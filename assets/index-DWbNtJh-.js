import{$,c as commonjsGlobal,g as getDefaultExportFromCjs,a as getAugmentedNamespace,B as Base64,b as configs,p as parser,s as settings,i as i18n,u as urlParameters,o as overpass,h as htmlentities,l as lzw_decode,d as lzw_encode,_ as _$1,f as ffs_construct_query,e as ffs_repair_search}from"./urlParameters-CcsrjBN6.js";/*! jQuery UI - v1.13.2 - 2022-07-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */(function(g){typeof define=="function"&&define.amd?define(["jquery"],g):g($)})(function(g){g.ui=g.ui||{},g.ui.version="1.13.2";/*!
 * jQuery UI Widget 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var B=0,M=Array.prototype.hasOwnProperty,P=Array.prototype.slice;g.cleanData=function(d){return function(w){var S,k,R;for(R=0;(k=w[R])!=null;R++)S=g._data(k,"events"),S&&S.remove&&g(k).triggerHandler("remove");d(w)}}(g.cleanData),g.widget=function(d,w,S){var k,R,W,se={},le=d.split(".")[0];d=d.split(".")[1];var fe=le+"-"+d;return S||(S=w,w=g.Widget),Array.isArray(S)&&(S=g.extend.apply(null,[{}].concat(S))),g.expr.pseudos[fe.toLowerCase()]=function(be){return!!g.data(be,fe)},g[le]=g[le]||{},k=g[le][d],R=g[le][d]=function(be,Te){if(!this||!this._createWidget)return new R(be,Te);arguments.length&&this._createWidget(be,Te)},g.extend(R,k,{version:S.version,_proto:g.extend({},S),_childConstructors:[]}),W=new w,W.options=g.widget.extend({},W.options),g.each(S,function(be,Te){if(typeof Te!="function"){se[be]=Te;return}se[be]=function(){function Ke(){return w.prototype[be].apply(this,arguments)}function Me(me){return w.prototype[be].apply(this,me)}return function(){var me=this._super,De=this._superApply,Xe;return this._super=Ke,this._superApply=Me,Xe=Te.apply(this,arguments),this._super=me,this._superApply=De,Xe}}()}),R.prototype=g.widget.extend(W,{widgetEventPrefix:k&&W.widgetEventPrefix||d},se,{constructor:R,namespace:le,widgetName:d,widgetFullName:fe}),k?(g.each(k._childConstructors,function(be,Te){var Ke=Te.prototype;g.widget(Ke.namespace+"."+Ke.widgetName,R,Te._proto)}),delete k._childConstructors):w._childConstructors.push(R),g.widget.bridge(d,R),R},g.widget.extend=function(d){for(var w=P.call(arguments,1),S=0,k=w.length,R,W;S<k;S++)for(R in w[S])W=w[S][R],M.call(w[S],R)&&W!==void 0&&(g.isPlainObject(W)?d[R]=g.isPlainObject(d[R])?g.widget.extend({},d[R],W):g.widget.extend({},W):d[R]=W);return d},g.widget.bridge=function(d,w){var S=w.prototype.widgetFullName||d;g.fn[d]=function(k){var R=typeof k=="string",W=P.call(arguments,1),se=this;return R?!this.length&&k==="instance"?se=void 0:this.each(function(){var le,fe=g.data(this,S);if(k==="instance")return se=fe,!1;if(!fe)return g.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+k+"'");if(typeof fe[k]!="function"||k.charAt(0)==="_")return g.error("no such method '"+k+"' for "+d+" widget instance");if(le=fe[k].apply(fe,W),le!==fe&&le!==void 0)return se=le&&le.jquery?se.pushStack(le.get()):le,!1}):(W.length&&(k=g.widget.extend.apply(null,[k].concat(W))),this.each(function(){var le=g.data(this,S);le?(le.option(k||{}),le._init&&le._init()):g.data(this,S,new w(k,this))})),se}},g.Widget=function(){},g.Widget._childConstructors=[],g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(d,w){w=g(w||this.defaultElement||this)[0],this.element=g(w),this.uuid=B++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=g(),this.hoverable=g(),this.focusable=g(),this.classesElementLookup={},w!==this&&(g.data(w,this.widgetFullName,this),this._on(!0,this.element,{remove:function(S){S.target===w&&this.destroy()}}),this.document=g(w.style?w.ownerDocument:w.document||w),this.window=g(this.document[0].defaultView||this.document[0].parentWindow)),this.options=g.widget.extend({},this.options,this._getCreateOptions(),d),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){var d=this;this._destroy(),g.each(this.classesElementLookup,function(w,S){d._removeClass(S,w)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:g.noop,widget:function(){return this.element},option:function(d,w){var S=d,k,R,W;if(arguments.length===0)return g.widget.extend({},this.options);if(typeof d=="string")if(S={},k=d.split("."),d=k.shift(),k.length){for(R=S[d]=g.widget.extend({},this.options[d]),W=0;W<k.length-1;W++)R[k[W]]=R[k[W]]||{},R=R[k[W]];if(d=k.pop(),arguments.length===1)return R[d]===void 0?null:R[d];R[d]=w}else{if(arguments.length===1)return this.options[d]===void 0?null:this.options[d];S[d]=w}return this._setOptions(S),this},_setOptions:function(d){var w;for(w in d)this._setOption(w,d[w]);return this},_setOption:function(d,w){return d==="classes"&&this._setOptionClasses(w),this.options[d]=w,d==="disabled"&&this._setOptionDisabled(w),this},_setOptionClasses:function(d){var w,S,k;for(w in d)k=this.classesElementLookup[w],!(d[w]===this.options.classes[w]||!k||!k.length)&&(S=g(k.get()),this._removeClass(k,w),S.addClass(this._classes({element:S,keys:w,classes:d,add:!0})))},_setOptionDisabled:function(d){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!d),d&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(d){var w=[],S=this;d=g.extend({element:this.element,classes:this.options.classes||{}},d);function k(){var W=[];d.element.each(function(se,le){var fe=g.map(S.classesElementLookup,function(be){return be}).some(function(be){return be.is(le)});fe||W.push(le)}),S._on(g(W),{remove:"_untrackClassesElement"})}function R(W,se){var le,fe;for(fe=0;fe<W.length;fe++)le=S.classesElementLookup[W[fe]]||g(),d.add?(k(),le=g(g.uniqueSort(le.get().concat(d.element.get())))):le=g(le.not(d.element).get()),S.classesElementLookup[W[fe]]=le,w.push(W[fe]),se&&d.classes[W[fe]]&&w.push(d.classes[W[fe]])}return d.keys&&R(d.keys.match(/\S+/g)||[],!0),d.extra&&R(d.extra.match(/\S+/g)||[]),w.join(" ")},_untrackClassesElement:function(d){var w=this;g.each(w.classesElementLookup,function(S,k){g.inArray(d.target,k)!==-1&&(w.classesElementLookup[S]=g(k.not(d.target).get()))}),this._off(g(d.target))},_removeClass:function(d,w,S){return this._toggleClass(d,w,S,!1)},_addClass:function(d,w,S){return this._toggleClass(d,w,S,!0)},_toggleClass:function(d,w,S,k){k=typeof k=="boolean"?k:S;var R=typeof d=="string"||d===null,W={extra:R?w:S,keys:R?d:w,element:R?this.element:d,add:k};return W.element.toggleClass(this._classes(W),k),this},_on:function(d,w,S){var k,R=this;typeof d!="boolean"&&(S=w,w=d,d=!1),S?(w=k=g(w),this.bindings=this.bindings.add(w)):(S=w,w=this.element,k=this.widget()),g.each(S,function(W,se){function le(){if(!(!d&&(R.options.disabled===!0||g(this).hasClass("ui-state-disabled"))))return(typeof se=="string"?R[se]:se).apply(R,arguments)}typeof se!="string"&&(le.guid=se.guid=se.guid||le.guid||g.guid++);var fe=W.match(/^([\w:-]*)\s*(.*)$/),be=fe[1]+R.eventNamespace,Te=fe[2];Te?k.on(be,Te,le):w.on(be,le)})},_off:function(d,w){w=(w||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,d.off(w),this.bindings=g(this.bindings.not(d).get()),this.focusable=g(this.focusable.not(d).get()),this.hoverable=g(this.hoverable.not(d).get())},_delay:function(d,w){function S(){return(typeof d=="string"?k[d]:d).apply(k,arguments)}var k=this;return setTimeout(S,w||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d),this._on(d,{mouseenter:function(w){this._addClass(g(w.currentTarget),null,"ui-state-hover")},mouseleave:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d),this._on(d,{focusin:function(w){this._addClass(g(w.currentTarget),null,"ui-state-focus")},focusout:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-focus")}})},_trigger:function(d,w,S){var k,R,W=this.options[d];if(S=S||{},w=g.Event(w),w.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase(),w.target=this.element[0],R=w.originalEvent,R)for(k in R)k in w||(w[k]=R[k]);return this.element.trigger(w,S),!(typeof W=="function"&&W.apply(this.element[0],[w].concat(S))===!1||w.isDefaultPrevented())}},g.each({show:"fadeIn",hide:"fadeOut"},function(d,w){g.Widget.prototype["_"+d]=function(S,k,R){typeof k=="string"&&(k={effect:k});var W,se=k?k===!0||typeof k=="number"?w:k.effect||w:d;k=k||{},typeof k=="number"?k={duration:k}:k===!0&&(k={}),W=!g.isEmptyObject(k),k.complete=R,k.delay&&S.delay(k.delay),W&&g.effects&&g.effects.effect[se]?S[d](k):se!==d&&S[se]?S[se](k.duration,k.easing,R):S.queue(function(le){g(this)[d](),R&&R.call(S[0]),le()})}}),g.widget;/*!
 * jQuery UI Position 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */(function(){var d,w=Math.max,S=Math.abs,k=/left|center|right/,R=/top|center|bottom/,W=/[\+\-]\d+(\.[\d]+)?%?/,se=/^\w+/,le=/%$/,fe=g.fn.position;function be(me,De,Xe){return[parseFloat(me[0])*(le.test(me[0])?De/100:1),parseFloat(me[1])*(le.test(me[1])?Xe/100:1)]}function Te(me,De){return parseInt(g.css(me,De),10)||0}function Ke(me){return me!=null&&me===me.window}function Me(me){var De=me[0];return De.nodeType===9?{width:me.width(),height:me.height(),offset:{top:0,left:0}}:Ke(De)?{width:me.width(),height:me.height(),offset:{top:me.scrollTop(),left:me.scrollLeft()}}:De.preventDefault?{width:0,height:0,offset:{top:De.pageY,left:De.pageX}}:{width:me.outerWidth(),height:me.outerHeight(),offset:me.offset()}}g.position={scrollbarWidth:function(){if(d!==void 0)return d;var me,De,Xe=g("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),ct=Xe.children()[0];return g("body").append(Xe),me=ct.offsetWidth,Xe.css("overflow","scroll"),De=ct.offsetWidth,me===De&&(De=Xe[0].clientWidth),Xe.remove(),d=me-De},getScrollInfo:function(me){var De=me.isWindow||me.isDocument?"":me.element.css("overflow-x"),Xe=me.isWindow||me.isDocument?"":me.element.css("overflow-y"),ct=De==="scroll"||De==="auto"&&me.width<me.element[0].scrollWidth,gt=Xe==="scroll"||Xe==="auto"&&me.height<me.element[0].scrollHeight;return{width:gt?g.position.scrollbarWidth():0,height:ct?g.position.scrollbarWidth():0}},getWithinInfo:function(me){var De=g(me||window),Xe=Ke(De[0]),ct=!!De[0]&&De[0].nodeType===9,gt=!Xe&&!ct;return{element:De,isWindow:Xe,isDocument:ct,offset:gt?g(me).offset():{left:0,top:0},scrollLeft:De.scrollLeft(),scrollTop:De.scrollTop(),width:De.outerWidth(),height:De.outerHeight()}}},g.fn.position=function(me){if(!me||!me.of)return fe.apply(this,arguments);me=g.extend({},me);var De,Xe,ct,gt,Dt,Kt,Gt=typeof me.of=="string"?g(document).find(me.of):g(me.of),Qt=g.position.getWithinInfo(me.within),$t=g.position.getScrollInfo(Qt),ri=(me.collision||"flip").split(" "),ci={};return Kt=Me(Gt),Gt[0].preventDefault&&(me.at="left top"),Xe=Kt.width,ct=Kt.height,gt=Kt.offset,Dt=g.extend({},gt),g.each(["my","at"],function(){var Bt=(me[this]||"").split(" "),di,ii;Bt.length===1&&(Bt=k.test(Bt[0])?Bt.concat(["center"]):R.test(Bt[0])?["center"].concat(Bt):["center","center"]),Bt[0]=k.test(Bt[0])?Bt[0]:"center",Bt[1]=R.test(Bt[1])?Bt[1]:"center",di=W.exec(Bt[0]),ii=W.exec(Bt[1]),ci[this]=[di?di[0]:0,ii?ii[0]:0],me[this]=[se.exec(Bt[0])[0],se.exec(Bt[1])[0]]}),ri.length===1&&(ri[1]=ri[0]),me.at[0]==="right"?Dt.left+=Xe:me.at[0]==="center"&&(Dt.left+=Xe/2),me.at[1]==="bottom"?Dt.top+=ct:me.at[1]==="center"&&(Dt.top+=ct/2),De=be(ci.at,Xe,ct),Dt.left+=De[0],Dt.top+=De[1],this.each(function(){var Bt,di,ii=g(this),Hi=ii.outerWidth(),Vi=ii.outerHeight(),Ht=Te(this,"marginLeft"),_i=Te(this,"marginTop"),Ti=Hi+Ht+Te(this,"marginRight")+$t.width,Wi=Vi+_i+Te(this,"marginBottom")+$t.height,Zt=g.extend({},Dt),mi=be(ci.my,ii.outerWidth(),ii.outerHeight());me.my[0]==="right"?Zt.left-=Hi:me.my[0]==="center"&&(Zt.left-=Hi/2),me.my[1]==="bottom"?Zt.top-=Vi:me.my[1]==="center"&&(Zt.top-=Vi/2),Zt.left+=mi[0],Zt.top+=mi[1],Bt={marginLeft:Ht,marginTop:_i},g.each(["left","top"],function(wi,$i){g.ui.position[ri[wi]]&&g.ui.position[ri[wi]][$i](Zt,{targetWidth:Xe,targetHeight:ct,elemWidth:Hi,elemHeight:Vi,collisionPosition:Bt,collisionWidth:Ti,collisionHeight:Wi,offset:[De[0]+mi[0],De[1]+mi[1]],my:me.my,at:me.at,within:Qt,elem:ii})}),me.using&&(di=function(wi){var $i=gt.left-Zt.left,tr=$i+Xe-Hi,Ar=gt.top-Zt.top,Tr=Ar+ct-Vi,ji={target:{element:Gt,left:gt.left,top:gt.top,width:Xe,height:ct},element:{element:ii,left:Zt.left,top:Zt.top,width:Hi,height:Vi},horizontal:tr<0?"left":$i>0?"right":"center",vertical:Tr<0?"top":Ar>0?"bottom":"middle"};Xe<Hi&&S($i+tr)<Xe&&(ji.horizontal="center"),ct<Vi&&S(Ar+Tr)<ct&&(ji.vertical="middle"),w(S($i),S(tr))>w(S(Ar),S(Tr))?ji.important="horizontal":ji.important="vertical",me.using.call(this,wi,ji)}),ii.offset(g.extend(Zt,{using:di}))})},g.ui.position={fit:{left:function(me,De){var Xe=De.within,ct=Xe.isWindow?Xe.scrollLeft:Xe.offset.left,gt=Xe.width,Dt=me.left-De.collisionPosition.marginLeft,Kt=ct-Dt,Gt=Dt+De.collisionWidth-gt-ct,Qt;De.collisionWidth>gt?Kt>0&&Gt<=0?(Qt=me.left+Kt+De.collisionWidth-gt-ct,me.left+=Kt-Qt):Gt>0&&Kt<=0?me.left=ct:Kt>Gt?me.left=ct+gt-De.collisionWidth:me.left=ct:Kt>0?me.left+=Kt:Gt>0?me.left-=Gt:me.left=w(me.left-Dt,me.left)},top:function(me,De){var Xe=De.within,ct=Xe.isWindow?Xe.scrollTop:Xe.offset.top,gt=De.within.height,Dt=me.top-De.collisionPosition.marginTop,Kt=ct-Dt,Gt=Dt+De.collisionHeight-gt-ct,Qt;De.collisionHeight>gt?Kt>0&&Gt<=0?(Qt=me.top+Kt+De.collisionHeight-gt-ct,me.top+=Kt-Qt):Gt>0&&Kt<=0?me.top=ct:Kt>Gt?me.top=ct+gt-De.collisionHeight:me.top=ct:Kt>0?me.top+=Kt:Gt>0?me.top-=Gt:me.top=w(me.top-Dt,me.top)}},flip:{left:function(me,De){var Xe=De.within,ct=Xe.offset.left+Xe.scrollLeft,gt=Xe.width,Dt=Xe.isWindow?Xe.scrollLeft:Xe.offset.left,Kt=me.left-De.collisionPosition.marginLeft,Gt=Kt-Dt,Qt=Kt+De.collisionWidth-gt-Dt,$t=De.my[0]==="left"?-De.elemWidth:De.my[0]==="right"?De.elemWidth:0,ri=De.at[0]==="left"?De.targetWidth:De.at[0]==="right"?-De.targetWidth:0,ci=-2*De.offset[0],Bt,di;Gt<0?(Bt=me.left+$t+ri+ci+De.collisionWidth-gt-ct,(Bt<0||Bt<S(Gt))&&(me.left+=$t+ri+ci)):Qt>0&&(di=me.left-De.collisionPosition.marginLeft+$t+ri+ci-Dt,(di>0||S(di)<Qt)&&(me.left+=$t+ri+ci))},top:function(me,De){var Xe=De.within,ct=Xe.offset.top+Xe.scrollTop,gt=Xe.height,Dt=Xe.isWindow?Xe.scrollTop:Xe.offset.top,Kt=me.top-De.collisionPosition.marginTop,Gt=Kt-Dt,Qt=Kt+De.collisionHeight-gt-Dt,$t=De.my[1]==="top",ri=$t?-De.elemHeight:De.my[1]==="bottom"?De.elemHeight:0,ci=De.at[1]==="top"?De.targetHeight:De.at[1]==="bottom"?-De.targetHeight:0,Bt=-2*De.offset[1],di,ii;Gt<0?(ii=me.top+ri+ci+Bt+De.collisionHeight-gt-ct,(ii<0||ii<S(Gt))&&(me.top+=ri+ci+Bt)):Qt>0&&(di=me.top-De.collisionPosition.marginTop+ri+ci+Bt-Dt,(di>0||S(di)<Qt)&&(me.top+=ri+ci+Bt))}},flipfit:{left:function(){g.ui.position.flip.left.apply(this,arguments),g.ui.position.fit.left.apply(this,arguments)},top:function(){g.ui.position.flip.top.apply(this,arguments),g.ui.position.fit.top.apply(this,arguments)}}}})(),g.ui.position;/*!
 * jQuery UI :data 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{data:g.expr.createPseudo?g.expr.createPseudo(function(d){return function(w){return!!g.data(w,d)}}):function(d,w,S){return!!g.data(d,S[3])}});/*!
 * jQuery UI Disable Selection 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({disableSelection:function(){var d="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(d+".ui-disableSelection",function(w){w.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var K=g;/*!
 * jQuery Color Animations v2.2.0
 * https://github.com/jquery/jquery-color
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun May 10 09:02:36 2020 +0200
 */var Y="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",ie={},D=ie.toString,ne=/^([\-+])=\s*(\d+\.?\d*)/,oe=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1]*2.55,d[2]*2.55,d[3]*2.55,d[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),d[4]?(parseInt(d[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16),d[4]?(parseInt(d[4]+d[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],ue=K.Color=function(d,w,S,k){return new K.Color.fn.parse(d,w,S,k)},pe={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},we={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},ke=ue.support={},Qe=K("<p>")[0],Ue,We=K.each;Qe.style.cssText="background-color:rgba(1,1,1,.5)",ke.rgba=Qe.style.backgroundColor.indexOf("rgba")>-1,We(pe,function(d,w){w.cache="_"+d,w.props.alpha={idx:3,type:"percent",def:1}}),K.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,w){ie["[object "+w+"]"]=w.toLowerCase()});function Ne(d){return d==null?d+"":typeof d=="object"?ie[D.call(d)]||"object":typeof d}function ut(d,w,S){var k=we[w.type]||{};return d==null?S||!w.def?null:w.def:(d=k.floor?~~d:parseFloat(d),isNaN(d)?w.def:k.mod?(d+k.mod)%k.mod:Math.min(k.max,Math.max(0,d)))}function Ye(d){var w=ue(),S=w._rgba=[];return d=d.toLowerCase(),We(oe,function(k,R){var W,se=R.re.exec(d),le=se&&R.parse(se),fe=R.space||"rgba";if(le)return W=w[fe](le),w[pe[fe].cache]=W[pe[fe].cache],S=w._rgba=W._rgba,!1}),S.length?(S.join()==="0,0,0,0"&&K.extend(S,Ue.transparent),w):Ue[d]}ue.fn=K.extend(ue.prototype,{parse:function(d,w,S,k){if(d===void 0)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=K(d).css(w),w=void 0);var R=this,W=Ne(d),se=this._rgba=[];if(w!==void 0&&(d=[d,w,S,k],W="array"),W==="string")return this.parse(Ye(d)||Ue._default);if(W==="array")return We(pe.rgba.props,function(le,fe){se[fe.idx]=ut(d[fe.idx],fe)}),this;if(W==="object")return d instanceof ue?We(pe,function(le,fe){d[fe.cache]&&(R[fe.cache]=d[fe.cache].slice())}):We(pe,function(le,fe){var be=fe.cache;We(fe.props,function(Te,Ke){if(!R[be]&&fe.to){if(Te==="alpha"||d[Te]==null)return;R[be]=fe.to(R._rgba)}R[be][Ke.idx]=ut(d[Te],Ke,!0)}),R[be]&&K.inArray(null,R[be].slice(0,3))<0&&(R[be][3]==null&&(R[be][3]=1),fe.from&&(R._rgba=fe.from(R[be])))}),this},is:function(d){var w=ue(d),S=!0,k=this;return We(pe,function(R,W){var se,le=w[W.cache];return le&&(se=k[W.cache]||W.to&&W.to(k._rgba)||[],We(W.props,function(fe,be){if(le[be.idx]!=null)return S=le[be.idx]===se[be.idx],S})),S}),S},_space:function(){var d=[],w=this;return We(pe,function(S,k){w[k.cache]&&d.push(S)}),d.pop()},transition:function(d,w){var S=ue(d),k=S._space(),R=pe[k],W=this.alpha()===0?ue("transparent"):this,se=W[R.cache]||R.to(W._rgba),le=se.slice();return S=S[R.cache],We(R.props,function(fe,be){var Te=be.idx,Ke=se[Te],Me=S[Te],me=we[be.type]||{};Me!==null&&(Ke===null?le[Te]=Me:(me.mod&&(Me-Ke>me.mod/2?Ke+=me.mod:Ke-Me>me.mod/2&&(Ke-=me.mod)),le[Te]=ut((Me-Ke)*w+Ke,be)))}),this[k](le)},blend:function(d){if(this._rgba[3]===1)return this;var w=this._rgba.slice(),S=w.pop(),k=ue(d)._rgba;return ue(K.map(w,function(R,W){return(1-S)*k[W]+S*R}))},toRgbaString:function(){var d="rgba(",w=K.map(this._rgba,function(S,k){return S??(k>2?1:0)});return w[3]===1&&(w.pop(),d="rgb("),d+w.join()+")"},toHslaString:function(){var d="hsla(",w=K.map(this.hsla(),function(S,k){return S==null&&(S=k>2?1:0),k&&k<3&&(S=Math.round(S*100)+"%"),S});return w[3]===1&&(w.pop(),d="hsl("),d+w.join()+")"},toHexString:function(d){var w=this._rgba.slice(),S=w.pop();return d&&w.push(~~(S*255)),"#"+K.map(w,function(k){return k=(k||0).toString(16),k.length===1?"0"+k:k}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),ue.fn.parse.prototype=ue.fn;function et(d,w,S){return S=(S+1)%1,S*6<1?d+(w-d)*S*6:S*2<1?w:S*3<2?d+(w-d)*(2/3-S)*6:d}pe.hsla.to=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/255,S=d[1]/255,k=d[2]/255,R=d[3],W=Math.max(w,S,k),se=Math.min(w,S,k),le=W-se,fe=W+se,be=fe*.5,Te,Ke;return se===W?Te=0:w===W?Te=60*(S-k)/le+360:S===W?Te=60*(k-w)/le+120:Te=60*(w-S)/le+240,le===0?Ke=0:be<=.5?Ke=le/fe:Ke=le/(2-fe),[Math.round(Te)%360,Ke,be,R??1]},pe.hsla.from=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/360,S=d[1],k=d[2],R=d[3],W=k<=.5?k*(1+S):k+S-k*S,se=2*k-W;return[Math.round(et(se,W,w+1/3)*255),Math.round(et(se,W,w)*255),Math.round(et(se,W,w-1/3)*255),R]},We(pe,function(d,w){var S=w.props,k=w.cache,R=w.to,W=w.from;ue.fn[d]=function(se){if(R&&!this[k]&&(this[k]=R(this._rgba)),se===void 0)return this[k].slice();var le,fe=Ne(se),be=fe==="array"||fe==="object"?se:arguments,Te=this[k].slice();return We(S,function(Ke,Me){var me=be[fe==="object"?Ke:Me.idx];me==null&&(me=Te[Me.idx]),Te[Me.idx]=ut(me,Me)}),W?(le=ue(W(Te)),le[k]=Te,le):ue(Te)},We(S,function(se,le){ue.fn[se]||(ue.fn[se]=function(fe){var be,Te,Ke,Me,me=Ne(fe);return se==="alpha"?Me=this._hsla?"hsla":"rgba":Me=d,be=this[Me](),Te=be[le.idx],me==="undefined"?Te:(me==="function"&&(fe=fe.call(this,Te),me=Ne(fe)),fe==null&&le.empty?this:(me==="string"&&(Ke=ne.exec(fe),Ke&&(fe=Te+parseFloat(Ke[2])*(Ke[1]==="+"?1:-1))),be[le.idx]=fe,this[Me](be)))})})}),ue.hook=function(d){var w=d.split(" ");We(w,function(S,k){K.cssHooks[k]={set:function(R,W){var se,le,fe="";if(W!=="transparent"&&(Ne(W)!=="string"||(se=Ye(W)))){if(W=ue(se||W),!ke.rgba&&W._rgba[3]!==1){for(le=k==="backgroundColor"?R.parentNode:R;(fe===""||fe==="transparent")&&le&&le.style;)try{fe=K.css(le,"backgroundColor"),le=le.parentNode}catch{}W=W.blend(fe&&fe!=="transparent"?fe:"_default")}W=W.toRgbaString()}try{R.style[k]=W}catch{}}},K.fx.step[k]=function(R){R.colorInit||(R.start=ue(R.elem,k),R.end=ue(R.end),R.colorInit=!0),K.cssHooks[k].set(R.elem,R.start.transition(R.end,R.pos))}})},ue.hook(Y),K.cssHooks.borderColor={expand:function(d){var w={};return We(["Top","Right","Bottom","Left"],function(S,k){w["border"+k+"Color"]=d}),w}},Ue=K.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};/*!
 * jQuery UI Effects 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var rt="ui-effects-",ft="ui-effects-style",Ze="ui-effects-animated";g.effects={effect:{}},function(){var d=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};g.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(W,se){g.fx.step[se]=function(le){(le.end!=="none"&&!le.setAttr||le.pos===1&&!le.setAttr)&&(K.style(le.elem,se,le.end),le.setAttr=!0)}});function S(W){return W.replace(/-([\da-z])/gi,function(se,le){return le.toUpperCase()})}function k(W){var se,le,fe=W.ownerDocument.defaultView?W.ownerDocument.defaultView.getComputedStyle(W,null):W.currentStyle,be={};if(fe&&fe.length&&fe[0]&&fe[fe[0]])for(le=fe.length;le--;)se=fe[le],typeof fe[se]=="string"&&(be[S(se)]=fe[se]);else for(se in fe)typeof fe[se]=="string"&&(be[se]=fe[se]);return be}function R(W,se){var le={},fe,be;for(fe in se)be=se[fe],W[fe]!==be&&(w[fe]||(g.fx.step[fe]||!isNaN(parseFloat(be)))&&(le[fe]=be));return le}g.fn.addBack||(g.fn.addBack=function(W){return this.add(W==null?this.prevObject:this.prevObject.filter(W))}),g.effects.animateClass=function(W,se,le,fe){var be=g.speed(se,le,fe);return this.queue(function(){var Te=g(this),Ke=Te.attr("class")||"",Me,me=be.children?Te.find("*").addBack():Te;me=me.map(function(){var De=g(this);return{el:De,start:k(this)}}),Me=function(){g.each(d,function(De,Xe){W[Xe]&&Te[Xe+"Class"](W[Xe])})},Me(),me=me.map(function(){return this.end=k(this.el[0]),this.diff=R(this.start,this.end),this}),Te.attr("class",Ke),me=me.map(function(){var De=this,Xe=g.Deferred(),ct=g.extend({},be,{queue:!1,complete:function(){Xe.resolve(De)}});return this.el.animate(this.diff,ct),Xe.promise()}),g.when.apply(g,me.get()).done(function(){Me(),g.each(arguments,function(){var De=this.el;g.each(this.diff,function(Xe){De.css(Xe,"")})}),be.complete.call(Te[0])})})},g.fn.extend({addClass:function(W){return function(se,le,fe,be){return le?g.effects.animateClass.call(this,{add:se},le,fe,be):W.apply(this,arguments)}}(g.fn.addClass),removeClass:function(W){return function(se,le,fe,be){return arguments.length>1?g.effects.animateClass.call(this,{remove:se},le,fe,be):W.apply(this,arguments)}}(g.fn.removeClass),toggleClass:function(W){return function(se,le,fe,be,Te){return typeof le=="boolean"||le===void 0?fe?g.effects.animateClass.call(this,le?{add:se}:{remove:se},fe,be,Te):W.apply(this,arguments):g.effects.animateClass.call(this,{toggle:se},le,fe,be)}}(g.fn.toggleClass),switchClass:function(W,se,le,fe,be){return g.effects.animateClass.call(this,{add:se,remove:W},le,fe,be)}})}(),function(){g.expr&&g.expr.pseudos&&g.expr.pseudos.animated&&(g.expr.pseudos.animated=function(k){return function(R){return!!g(R).data(Ze)||k(R)}}(g.expr.pseudos.animated)),g.uiBackCompat!==!1&&g.extend(g.effects,{save:function(k,R){for(var W=0,se=R.length;W<se;W++)R[W]!==null&&k.data(rt+R[W],k[0].style[R[W]])},restore:function(k,R){for(var W,se=0,le=R.length;se<le;se++)R[se]!==null&&(W=k.data(rt+R[se]),k.css(R[se],W))},setMode:function(k,R){return R==="toggle"&&(R=k.is(":hidden")?"show":"hide"),R},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper"))return k.parent();var R={width:k.outerWidth(!0),height:k.outerHeight(!0),float:k.css("float")},W=g("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),se={width:k.width(),height:k.height()},le=document.activeElement;try{le.id}catch{le=document.body}return k.wrap(W),(k[0]===le||g.contains(k[0],le))&&g(le).trigger("focus"),W=k.parent(),k.css("position")==="static"?(W.css({position:"relative"}),k.css({position:"relative"})):(g.extend(R,{position:k.css("position"),zIndex:k.css("z-index")}),g.each(["top","left","bottom","right"],function(fe,be){R[be]=k.css(be),isNaN(parseInt(R[be],10))&&(R[be]="auto")}),k.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),k.css(se),W.css(R).show()},removeWrapper:function(k){var R=document.activeElement;return k.parent().is(".ui-effects-wrapper")&&(k.parent().replaceWith(k),(k[0]===R||g.contains(k[0],R))&&g(R).trigger("focus")),k}}),g.extend(g.effects,{version:"1.13.2",define:function(k,R,W){return W||(W=R,R="effect"),g.effects.effect[k]=W,g.effects.effect[k].mode=R,W},scaledDimensions:function(k,R,W){if(R===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var se=W!=="horizontal"?(R||100)/100:1,le=W!=="vertical"?(R||100)/100:1;return{height:k.height()*le,width:k.width()*se,outerHeight:k.outerHeight()*le,outerWidth:k.outerWidth()*se}},clipToBox:function(k){return{width:k.clip.right-k.clip.left,height:k.clip.bottom-k.clip.top,left:k.clip.left,top:k.clip.top}},unshift:function(k,R,W){var se=k.queue();R>1&&se.splice.apply(se,[1,0].concat(se.splice(R,W))),k.dequeue()},saveStyle:function(k){k.data(ft,k[0].style.cssText)},restoreStyle:function(k){k[0].style.cssText=k.data(ft)||"",k.removeData(ft)},mode:function(k,R){var W=k.is(":hidden");return R==="toggle"&&(R=W?"show":"hide"),(W?R==="hide":R==="show")&&(R="none"),R},getBaseline:function(k,R){var W,se;switch(k[0]){case"top":W=0;break;case"middle":W=.5;break;case"bottom":W=1;break;default:W=k[0]/R.height}switch(k[1]){case"left":se=0;break;case"center":se=.5;break;case"right":se=1;break;default:se=k[1]/R.width}return{x:se,y:W}},createPlaceholder:function(k){var R,W=k.css("position"),se=k.position();return k.css({marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()),/^(static|relative)/.test(W)&&(W="absolute",R=g("<"+k[0].nodeName+">").insertAfter(k).css({display:/^(inline|ruby)/.test(k.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight"),float:k.css("float")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()).addClass("ui-effects-placeholder"),k.data(rt+"placeholder",R)),k.css({position:W,left:se.left,top:se.top}),R},removePlaceholder:function(k){var R=rt+"placeholder",W=k.data(R);W&&(W.remove(),k.removeData(R))},cleanUp:function(k){g.effects.restoreStyle(k),g.effects.removePlaceholder(k)},setTransition:function(k,R,W,se){return se=se||{},g.each(R,function(le,fe){var be=k.cssUnit(fe);be[0]>0&&(se[fe]=be[0]*W+be[1])}),se}});function d(k,R,W,se){return g.isPlainObject(k)&&(R=k,k=k.effect),k={effect:k},R==null&&(R={}),typeof R=="function"&&(se=R,W=null,R={}),(typeof R=="number"||g.fx.speeds[R])&&(se=W,W=R,R={}),typeof W=="function"&&(se=W,W=null),R&&g.extend(k,R),W=W||R.duration,k.duration=g.fx.off?0:typeof W=="number"?W:W in g.fx.speeds?g.fx.speeds[W]:g.fx.speeds._default,k.complete=se||R.complete,k}function w(k){return!!(!k||typeof k=="number"||g.fx.speeds[k]||typeof k=="string"&&!g.effects.effect[k]||typeof k=="function"||typeof k=="object"&&!k.effect)}g.fn.extend({effect:function(){var k=d.apply(this,arguments),R=g.effects.effect[k.effect],W=R.mode,se=k.queue,le=se||"fx",fe=k.complete,be=k.mode,Te=[],Ke=function(me){var De=g(this),Xe=g.effects.mode(De,be)||W;De.data(Ze,!0),Te.push(Xe),W&&(Xe==="show"||Xe===W&&Xe==="hide")&&De.show(),(!W||Xe!=="none")&&g.effects.saveStyle(De),typeof me=="function"&&me()};if(g.fx.off||!R)return be?this[be](k.duration,fe):this.each(function(){fe&&fe.call(this)});function Me(me){var De=g(this);function Xe(){De.removeData(Ze),g.effects.cleanUp(De),k.mode==="hide"&&De.hide(),ct()}function ct(){typeof fe=="function"&&fe.call(De[0]),typeof me=="function"&&me()}k.mode=Te.shift(),g.uiBackCompat!==!1&&!W?(De.is(":hidden")?be==="hide":be==="show")?(De[be](),ct()):R.call(De[0],k,ct):k.mode==="none"?(De[be](),ct()):R.call(De[0],k,Xe)}return se===!1?this.each(Ke).each(Me):this.queue(le,Ke).queue(le,Me)},show:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="show",this.effect.call(this,W)}}(g.fn.show),hide:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="hide",this.effect.call(this,W)}}(g.fn.hide),toggle:function(k){return function(R){if(w(R)||typeof R=="boolean")return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="toggle",this.effect.call(this,W)}}(g.fn.toggle),cssUnit:function(k){var R=this.css(k),W=[];return g.each(["em","px","%","pt"],function(se,le){R.indexOf(le)>0&&(W=[parseFloat(R),le])}),W},cssClip:function(k){return k?this.css("clip","rect("+k.top+"px "+k.right+"px "+k.bottom+"px "+k.left+"px)"):S(this.css("clip"),this)},transfer:function(k,R){var W=g(this),se=g(k.to),le=se.css("position")==="fixed",fe=g("body"),be=le?fe.scrollTop():0,Te=le?fe.scrollLeft():0,Ke=se.offset(),Me={top:Ke.top-be,left:Ke.left-Te,height:se.innerHeight(),width:se.innerWidth()},me=W.offset(),De=g("<div class='ui-effects-transfer'></div>");De.appendTo("body").addClass(k.className).css({top:me.top-be,left:me.left-Te,height:W.innerHeight(),width:W.innerWidth(),position:le?"fixed":"absolute"}).animate(Me,k.duration,k.easing,function(){De.remove(),typeof R=="function"&&R()})}});function S(k,R){var W=R.outerWidth(),se=R.outerHeight(),le=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,fe=le.exec(k)||["",0,W,se,0];return{top:parseFloat(fe[1])||0,right:fe[2]==="auto"?W:parseFloat(fe[2]),bottom:fe[3]==="auto"?se:parseFloat(fe[3]),left:parseFloat(fe[4])||0}}g.fx.step.clip=function(k){k.clipInit||(k.start=g(k.elem).cssClip(),typeof k.end=="string"&&(k.end=S(k.end,k.elem)),k.clipInit=!0),g(k.elem).cssClip({top:k.pos*(k.end.top-k.start.top)+k.start.top,right:k.pos*(k.end.right-k.start.right)+k.start.right,bottom:k.pos*(k.end.bottom-k.start.bottom)+k.start.bottom,left:k.pos*(k.end.left-k.start.left)+k.start.left})}}(),function(){var d={};g.each(["Quad","Cubic","Quart","Quint","Expo"],function(w,S){d[S]=function(k){return Math.pow(k,w+2)}}),g.extend(d,{Sine:function(w){return 1-Math.cos(w*Math.PI/2)},Circ:function(w){return 1-Math.sqrt(1-w*w)},Elastic:function(w){return w===0||w===1?w:-Math.pow(2,8*(w-1))*Math.sin(((w-1)*80-7.5)*Math.PI/15)},Back:function(w){return w*w*(3*w-2)},Bounce:function(w){for(var S,k=4;w<((S=Math.pow(2,--k))-1)/11;);return 1/Math.pow(4,3-k)-7.5625*Math.pow((S*3-2)/22-w,2)}}),g.each(d,function(w,S){g.easing["easeIn"+w]=S,g.easing["easeOut"+w]=function(k){return 1-S(1-k)},g.easing["easeInOut"+w]=function(k){return k<.5?S(k*2)/2:1-S(k*-2+2)/2}})}(),g.effects;/*!
 * jQuery UI Effects Blind 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("blind","hide",function(d,w){var S={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},k=g(this),R=d.direction||"up",W=k.cssClip(),se={clip:g.extend({},W)},le=g.effects.createPlaceholder(k);se.clip[S[R][0]]=se.clip[S[R][1]],d.mode==="show"&&(k.cssClip(se.clip),le&&le.css(g.effects.clipToBox(se)),se.clip=W),le&&le.animate(g.effects.clipToBox(se),d.duration,d.easing),k.animate(se,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Bounce 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("bounce",function(d,w){var S,k,R,W=g(this),se=d.mode,le=se==="hide",fe=se==="show",be=d.direction||"up",Te=d.distance,Ke=d.times||5,Me=Ke*2+(fe||le?1:0),me=d.duration/Me,De=d.easing,Xe=be==="up"||be==="down"?"top":"left",ct=be==="up"||be==="left",gt=0,Dt=W.queue().length;for(g.effects.createPlaceholder(W),R=W.css(Xe),Te||(Te=W[Xe==="top"?"outerHeight":"outerWidth"]()/3),fe&&(k={opacity:1},k[Xe]=R,W.css("opacity",0).css(Xe,ct?-Te*2:Te*2).animate(k,me,De)),le&&(Te=Te/Math.pow(2,Ke-1)),k={},k[Xe]=R;gt<Ke;gt++)S={},S[Xe]=(ct?"-=":"+=")+Te,W.animate(S,me,De).animate(k,me,De),Te=le?Te*2:Te/2;le&&(S={opacity:0},S[Xe]=(ct?"-=":"+=")+Te,W.animate(S,me,De)),W.queue(w),g.effects.unshift(W,Dt,Me+1)});/*!
 * jQuery UI Effects Clip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("clip","hide",function(d,w){var S,k={},R=g(this),W=d.direction||"vertical",se=W==="both",le=se||W==="horizontal",fe=se||W==="vertical";S=R.cssClip(),k.clip={top:fe?(S.bottom-S.top)/2:S.top,right:le?(S.right-S.left)/2:S.right,bottom:fe?(S.bottom-S.top)/2:S.bottom,left:le?(S.right-S.left)/2:S.left},g.effects.createPlaceholder(R),d.mode==="show"&&(R.cssClip(k.clip),k.clip=S),R.animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Drop 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("drop","hide",function(d,w){var S,k=g(this),R=d.mode,W=R==="show",se=d.direction||"left",le=se==="up"||se==="down"?"top":"left",fe=se==="up"||se==="left"?"-=":"+=",be=fe==="+="?"-=":"+=",Te={opacity:0};g.effects.createPlaceholder(k),S=d.distance||k[le==="top"?"outerHeight":"outerWidth"](!0)/2,Te[le]=fe+S,W&&(k.css(Te),Te[le]=be+S,Te.opacity=1),k.animate(Te,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Explode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("explode","hide",function(d,w){var S,k,R,W,se,le,fe=d.pieces?Math.round(Math.sqrt(d.pieces)):3,be=fe,Te=g(this),Ke=d.mode,Me=Ke==="show",me=Te.show().css("visibility","hidden").offset(),De=Math.ceil(Te.outerWidth()/be),Xe=Math.ceil(Te.outerHeight()/fe),ct=[];function gt(){ct.push(this),ct.length===fe*be&&Dt()}for(S=0;S<fe;S++)for(W=me.top+S*Xe,le=S-(fe-1)/2,k=0;k<be;k++)R=me.left+k*De,se=k-(be-1)/2,Te.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-k*De,top:-S*Xe}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:De,height:Xe,left:R+(Me?se*De:0),top:W+(Me?le*Xe:0),opacity:Me?0:1}).animate({left:R+(Me?0:se*De),top:W+(Me?0:le*Xe),opacity:Me?1:0},d.duration||500,d.easing,gt);function Dt(){Te.css({visibility:"visible"}),g(ct).remove(),w()}});/*!
 * jQuery UI Effects Fade 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fade","toggle",function(d,w){var S=d.mode==="show";g(this).css("opacity",S?0:1).animate({opacity:S?1:0},{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Fold 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fold","hide",function(d,w){var S=g(this),k=d.mode,R=k==="show",W=k==="hide",se=d.size||15,le=/([0-9]+)%/.exec(se),fe=!!d.horizFirst,be=fe?["right","bottom"]:["bottom","right"],Te=d.duration/2,Ke=g.effects.createPlaceholder(S),Me=S.cssClip(),me={clip:g.extend({},Me)},De={clip:g.extend({},Me)},Xe=[Me[be[0]],Me[be[1]]],ct=S.queue().length;le&&(se=parseInt(le[1],10)/100*Xe[W?0:1]),me.clip[be[0]]=se,De.clip[be[0]]=se,De.clip[be[1]]=0,R&&(S.cssClip(De.clip),Ke&&Ke.css(g.effects.clipToBox(De)),De.clip=Me),S.queue(function(gt){Ke&&Ke.animate(g.effects.clipToBox(me),Te,d.easing).animate(g.effects.clipToBox(De),Te,d.easing),gt()}).animate(me,Te,d.easing).animate(De,Te,d.easing).queue(w),g.effects.unshift(S,ct,4)});/*!
 * jQuery UI Effects Highlight 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("highlight","show",function(d,w){var S=g(this),k={backgroundColor:S.css("backgroundColor")};d.mode==="hide"&&(k.opacity=0),g.effects.saveStyle(S),S.css({backgroundImage:"none",backgroundColor:d.color||"#ffff99"}).animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Size 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("size",function(d,w){var S,k,R,W=g(this),se=["fontSize"],le=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],fe=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],be=d.mode,Te=be!=="effect",Ke=d.scale||"both",Me=d.origin||["middle","center"],me=W.css("position"),De=W.position(),Xe=g.effects.scaledDimensions(W),ct=d.from||Xe,gt=d.to||g.effects.scaledDimensions(W,0);g.effects.createPlaceholder(W),be==="show"&&(R=ct,ct=gt,gt=R),k={from:{y:ct.height/Xe.height,x:ct.width/Xe.width},to:{y:gt.height/Xe.height,x:gt.width/Xe.width}},(Ke==="box"||Ke==="both")&&(k.from.y!==k.to.y&&(ct=g.effects.setTransition(W,le,k.from.y,ct),gt=g.effects.setTransition(W,le,k.to.y,gt)),k.from.x!==k.to.x&&(ct=g.effects.setTransition(W,fe,k.from.x,ct),gt=g.effects.setTransition(W,fe,k.to.x,gt))),(Ke==="content"||Ke==="both")&&k.from.y!==k.to.y&&(ct=g.effects.setTransition(W,se,k.from.y,ct),gt=g.effects.setTransition(W,se,k.to.y,gt)),Me&&(S=g.effects.getBaseline(Me,Xe),ct.top=(Xe.outerHeight-ct.outerHeight)*S.y+De.top,ct.left=(Xe.outerWidth-ct.outerWidth)*S.x+De.left,gt.top=(Xe.outerHeight-gt.outerHeight)*S.y+De.top,gt.left=(Xe.outerWidth-gt.outerWidth)*S.x+De.left),delete ct.outerHeight,delete ct.outerWidth,W.css(ct),(Ke==="content"||Ke==="both")&&(le=le.concat(["marginTop","marginBottom"]).concat(se),fe=fe.concat(["marginLeft","marginRight"]),W.find("*[width]").each(function(){var Dt=g(this),Kt=g.effects.scaledDimensions(Dt),Gt={height:Kt.height*k.from.y,width:Kt.width*k.from.x,outerHeight:Kt.outerHeight*k.from.y,outerWidth:Kt.outerWidth*k.from.x},Qt={height:Kt.height*k.to.y,width:Kt.width*k.to.x,outerHeight:Kt.height*k.to.y,outerWidth:Kt.width*k.to.x};k.from.y!==k.to.y&&(Gt=g.effects.setTransition(Dt,le,k.from.y,Gt),Qt=g.effects.setTransition(Dt,le,k.to.y,Qt)),k.from.x!==k.to.x&&(Gt=g.effects.setTransition(Dt,fe,k.from.x,Gt),Qt=g.effects.setTransition(Dt,fe,k.to.x,Qt)),Te&&g.effects.saveStyle(Dt),Dt.css(Gt),Dt.animate(Qt,d.duration,d.easing,function(){Te&&g.effects.restoreStyle(Dt)})})),W.animate(gt,{queue:!1,duration:d.duration,easing:d.easing,complete:function(){var Dt=W.offset();gt.opacity===0&&W.css("opacity",ct.opacity),Te||(W.css("position",me==="static"?"relative":me).offset(Dt),g.effects.saveStyle(W)),w()}})});/*!
 * jQuery UI Effects Scale 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("scale",function(d,w){var S=g(this),k=d.mode,R=parseInt(d.percent,10)||(parseInt(d.percent,10)===0||k!=="effect"?0:100),W=g.extend(!0,{from:g.effects.scaledDimensions(S),to:g.effects.scaledDimensions(S,R,d.direction||"both"),origin:d.origin||["middle","center"]},d);d.fade&&(W.from.opacity=1,W.to.opacity=0),g.effects.effect.size.call(this,W,w)});/*!
 * jQuery UI Effects Puff 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("puff","hide",function(d,w){var S=g.extend(!0,{},d,{fade:!0,percent:parseInt(d.percent,10)||150});g.effects.effect.scale.call(this,S,w)});/*!
 * jQuery UI Effects Pulsate 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("pulsate","show",function(d,w){var S=g(this),k=d.mode,R=k==="show",W=k==="hide",se=R||W,le=(d.times||5)*2+(se?1:0),fe=d.duration/le,be=0,Te=1,Ke=S.queue().length;for((R||!S.is(":visible"))&&(S.css("opacity",0).show(),be=1);Te<le;Te++)S.animate({opacity:be},fe,d.easing),be=1-be;S.animate({opacity:be},fe,d.easing),S.queue(w),g.effects.unshift(S,Ke,le+1)});/*!
 * jQuery UI Effects Shake 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("shake",function(d,w){var S=1,k=g(this),R=d.direction||"left",W=d.distance||20,se=d.times||3,le=se*2+1,fe=Math.round(d.duration/le),be=R==="up"||R==="down"?"top":"left",Te=R==="up"||R==="left",Ke={},Me={},me={},De=k.queue().length;for(g.effects.createPlaceholder(k),Ke[be]=(Te?"-=":"+=")+W,Me[be]=(Te?"+=":"-=")+W*2,me[be]=(Te?"-=":"+=")+W*2,k.animate(Ke,fe,d.easing);S<se;S++)k.animate(Me,fe,d.easing).animate(me,fe,d.easing);k.animate(Me,fe,d.easing).animate(Ke,fe/2,d.easing).queue(w),g.effects.unshift(k,De,le+1)});/*!
 * jQuery UI Effects Slide 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("slide","show",function(d,w){var S,k,R=g(this),W={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},se=d.mode,le=d.direction||"left",fe=le==="up"||le==="down"?"top":"left",be=le==="up"||le==="left",Te=d.distance||R[fe==="top"?"outerHeight":"outerWidth"](!0),Ke={};g.effects.createPlaceholder(R),S=R.cssClip(),k=R.position()[fe],Ke[fe]=(be?-1:1)*Te+k,Ke.clip=R.cssClip(),Ke.clip[W[le][1]]=Ke.clip[W[le][0]],se==="show"&&(R.cssClip(Ke.clip),R.css(fe,Ke[fe]),Ke.clip=S,Ke[fe]=k),R.animate(Ke,{queue:!1,duration:d.duration,easing:d.easing,complete:w})}),g.uiBackCompat!==!1&&g.effects.define("transfer",function(d,w){g(this).transfer(d,w)});/*!
 * jQuery UI Focusable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.focusable=function(d,w){var S,k,R,W,se,le=d.nodeName.toLowerCase();return le==="area"?(S=d.parentNode,k=S.name,!d.href||!k||S.nodeName.toLowerCase()!=="map"?!1:(R=g("img[usemap='#"+k+"']"),R.length>0&&R.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(le)?(W=!d.disabled,W&&(se=g(d).closest("fieldset")[0],se&&(W=!se.disabled))):le==="a"?W=d.href||w:W=w,W&&g(d).is(":visible")&&wt(g(d)))};function wt(d){for(var w=d.css("visibility");w==="inherit";)d=d.parent(),w=d.css("visibility");return w==="visible"}g.extend(g.expr.pseudos,{focusable:function(d){return g.ui.focusable(d,g.attr(d,"tabindex")!=null)}}),g.ui.focusable,g.fn._form=function(){return typeof this[0].form=="string"?this.closest("form"):g(this[0].form)};/*!
 * jQuery UI Form Reset Mixin 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.formResetMixin={_formResetHandler:function(){var d=g(this);setTimeout(function(){var w=d.data("ui-form-reset-instances");g.each(w,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element._form(),!!this.form.length){var d=this.form.data("ui-form-reset-instances")||[];d.length||this.form.on("reset.ui-form-reset",this._formResetHandler),d.push(this),this.form.data("ui-form-reset-instances",d)}},_unbindFormResetHandler:function(){if(this.form.length){var d=this.form.data("ui-form-reset-instances");d.splice(g.inArray(this,d),1),d.length?this.form.data("ui-form-reset-instances",d):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */if(g.expr.pseudos||(g.expr.pseudos=g.expr[":"]),g.uniqueSort||(g.uniqueSort=g.unique),!g.escapeSelector){var Ft=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,_t=function(d,w){return w?d==="\0"?"ï¿½":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d};g.escapeSelector=function(d){return(d+"").replace(Ft,_t)}}(!g.fn.even||!g.fn.odd)&&g.fn.extend({even:function(){return this.filter(function(d){return d%2===0})},odd:function(){return this.filter(function(d){return d%2===1})}});/*!
 * jQuery UI Keycode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};/*!
 * jQuery UI Labels 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.labels=function(){var d,w,S,k,R;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(k=this.eq(0).parents("label"),S=this.attr("id"),S&&(d=this.eq(0).parents().last(),R=d.add(d.length?d.siblings():this.siblings()),w="label[for='"+g.escapeSelector(S)+"']",k=k.add(R.find(w).addBack(w))),this.pushStack(k)):this.pushStack([])};/*!
 * jQuery UI Scroll Parent 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.scrollParent=function(d){var w=this.css("position"),S=w==="absolute",k=d?/(auto|scroll|hidden)/:/(auto|scroll)/,R=this.parents().filter(function(){var W=g(this);return S&&W.css("position")==="static"?!1:k.test(W.css("overflow")+W.css("overflow-y")+W.css("overflow-x"))}).eq(0);return w==="fixed"||!R.length?g(this[0].ownerDocument||document):R};/*!
 * jQuery UI Tabbable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{tabbable:function(d){var w=g.attr(d,"tabindex"),S=w!=null;return(!S||w>=0)&&g.ui.focusable(d,S)}});/*!
 * jQuery UI Unique ID 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({uniqueId:function(){var d=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&g(this).removeAttr("id")})}});/*!
 * jQuery UI Accordion 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(d){return d.find("> li > :first-child").add(d.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var d=this.options;this.prevShow=this.prevHide=g(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),!d.collapsible&&(d.active===!1||d.active==null)&&(d.active=0),this._processPanels(),d.active<0&&(d.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():g()}},_createIcons:function(){var d,w,S=this.options.icons;S&&(d=g("<span>"),this._addClass(d,"ui-accordion-header-icon","ui-icon "+S.header),d.prependTo(this.headers),w=this.active.children(".ui-accordion-header-icon"),this._removeClass(w,S.header)._addClass(w,null,S.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var d;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),d=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&d.css("height","")},_setOption:function(d,w){if(d==="active"){this._activate(w);return}d==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(w)),this._super(d,w),d==="collapsible"&&!w&&this.options.active===!1&&this._activate(0),d==="icons"&&(this._destroyIcons(),w&&this._createIcons())},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!d)},_keydown:function(d){if(!(d.altKey||d.ctrlKey)){var w=g.ui.keyCode,S=this.headers.length,k=this.headers.index(d.target),R=!1;switch(d.keyCode){case w.RIGHT:case w.DOWN:R=this.headers[(k+1)%S];break;case w.LEFT:case w.UP:R=this.headers[(k-1+S)%S];break;case w.SPACE:case w.ENTER:this._eventHandler(d);break;case w.HOME:R=this.headers[0];break;case w.END:R=this.headers[S-1];break}R&&(g(d.target).attr("tabIndex",-1),g(R).attr("tabIndex",0),g(R).trigger("focus"),d.preventDefault())}},_panelKeyDown:function(d){d.keyCode===g.ui.keyCode.UP&&d.ctrlKey&&g(d.currentTarget).prev().trigger("focus")},refresh:function(){var d=this.options;this._processPanels(),d.active===!1&&d.collapsible===!0||!this.headers.length?(d.active=!1,this.active=g()):d.active===!1?this._activate(0):this.active.length&&!g.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(d.active=!1,this.active=g()):this._activate(Math.max(0,d.active-1)):d.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var d=this.headers,w=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),w&&(this._off(d.not(this.headers)),this._off(w.not(this.panels)))},_refresh:function(){var d,w=this.options,S=w.heightStyle,k=this.element.parent();this.active=this._findActive(w.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var R=g(this),W=R.uniqueId().attr("id"),se=R.next(),le=se.uniqueId().attr("id");R.attr("aria-controls",le),se.attr("aria-labelledby",W)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(w.event),S==="fill"?(d=k.height(),this.element.siblings(":visible").each(function(){var R=g(this),W=R.css("position");W==="absolute"||W==="fixed"||(d-=R.outerHeight(!0))}),this.headers.each(function(){d-=g(this).outerHeight(!0)}),this.headers.next().each(function(){g(this).height(Math.max(0,d-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):S==="auto"&&(d=0,this.headers.next().each(function(){var R=g(this).is(":visible");R||g(this).show(),d=Math.max(d,g(this).css("height","").height()),R||g(this).hide()}).height(d))},_activate:function(d){var w=this._findActive(d)[0];w!==this.active[0]&&(w=w||this.active[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return typeof d=="number"?this.headers.eq(d):g()},_setupEvents:function(d){var w={keydown:"_keydown"};d&&g.each(d.split(" "),function(S,k){w[k]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,w),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(d){var w,S,k=this.options,R=this.active,W=g(d.currentTarget),se=W[0]===R[0],le=se&&k.collapsible,fe=le?g():W.next(),be=R.next(),Te={oldHeader:R,oldPanel:be,newHeader:le?g():W,newPanel:fe};d.preventDefault(),!(se&&!k.collapsible||this._trigger("beforeActivate",d,Te)===!1)&&(k.active=le?!1:this.headers.index(W),this.active=se?g():W,this._toggle(Te),this._removeClass(R,"ui-accordion-header-active","ui-state-active"),k.icons&&(w=R.children(".ui-accordion-header-icon"),this._removeClass(w,null,k.icons.activeHeader)._addClass(w,null,k.icons.header)),se||(this._removeClass(W,"ui-accordion-header-collapsed")._addClass(W,"ui-accordion-header-active","ui-state-active"),k.icons&&(S=W.children(".ui-accordion-header-icon"),this._removeClass(S,null,k.icons.header)._addClass(S,null,k.icons.activeHeader)),this._addClass(W.next(),"ui-accordion-content-active")))},_toggle:function(d){var w=d.newPanel,S=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=w,this.prevHide=S,this.options.animate?this._animate(w,S,d):(S.hide(),w.show(),this._toggleComplete(d)),S.attr({"aria-hidden":"true"}),S.prev().attr({"aria-selected":"false","aria-expanded":"false"}),w.length&&S.length?S.prev().attr({tabIndex:-1,"aria-expanded":"false"}):w.length&&this.headers.filter(function(){return parseInt(g(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),w.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(d,w,S){var k,R,W,se=this,le=0,fe=d.css("box-sizing"),be=d.length&&(!w.length||d.index()<w.index()),Te=this.options.animate||{},Ke=be&&Te.down||Te,Me=function(){se._toggleComplete(S)};if(typeof Ke=="number"&&(W=Ke),typeof Ke=="string"&&(R=Ke),R=R||Ke.easing||Te.easing,W=W||Ke.duration||Te.duration,!w.length)return d.animate(this.showProps,W,R,Me);if(!d.length)return w.animate(this.hideProps,W,R,Me);k=d.show().outerHeight(),w.animate(this.hideProps,{duration:W,easing:R,step:function(me,De){De.now=Math.round(me)}}),d.hide().animate(this.showProps,{duration:W,easing:R,complete:Me,step:function(me,De){De.now=Math.round(me),De.prop!=="height"?fe==="content-box"&&(le+=De.now):se.options.heightStyle!=="content"&&(De.now=Math.round(k-w.outerHeight()-le),le=0)}})},_toggleComplete:function(d){var w=d.oldPanel,S=w.prev();this._removeClass(w,"ui-accordion-content-active"),this._removeClass(S,"ui-accordion-header-active")._addClass(S,"ui-accordion-header-collapsed"),w.length&&(w.parent()[0].className=w.parent()[0].className),this._trigger("activate",null,d)}}),g.ui.safeActiveElement=function(d){var w;try{w=d.activeElement}catch{w=d.body}return w||(w=d.body),w.nodeName||(w=d.body),w};/*!
 * jQuery UI Menu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(d){d.preventDefault(),this._activateItem(d)},"click .ui-menu-item":function(d){var w=g(d.target),S=g(g.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&w.not(".ui-state-disabled").length&&(this.select(d),d.isPropagationStopped()||(this.mouseHandled=!0),w.has(".ui-menu").length?this.expand(d):!this.element.is(":focus")&&S.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,w){var S=this.active||this._menuItems().first();w||this.focus(d,S)},blur:function(d){this._delay(function(){var w=!g.contains(this.element[0],g.ui.safeActiveElement(this.document[0]));w&&this.collapseAll(d)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(d){this._closeOnDocumentClick(d)&&this.collapseAll(d,!0),this.mouseHandled=!1}})},_activateItem:function(d){if(!this.previousFilter&&!(d.clientX===this.lastMousePosition.x&&d.clientY===this.lastMousePosition.y)){this.lastMousePosition={x:d.clientX,y:d.clientY};var w=g(d.target).closest(".ui-menu-item"),S=g(d.currentTarget);w[0]===S[0]&&(S.is(".ui-state-active")||(this._removeClass(S.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(d,S)))}},_destroy:function(){var d=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),w=d.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),w.children().each(function(){var S=g(this);S.data("ui-menu-submenu-caret")&&S.remove()})},_keydown:function(d){var w,S,k,R,W=!0;switch(d.keyCode){case g.ui.keyCode.PAGE_UP:this.previousPage(d);break;case g.ui.keyCode.PAGE_DOWN:this.nextPage(d);break;case g.ui.keyCode.HOME:this._move("first","first",d);break;case g.ui.keyCode.END:this._move("last","last",d);break;case g.ui.keyCode.UP:this.previous(d);break;case g.ui.keyCode.DOWN:this.next(d);break;case g.ui.keyCode.LEFT:this.collapse(d);break;case g.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(d);break;case g.ui.keyCode.ENTER:case g.ui.keyCode.SPACE:this._activate(d);break;case g.ui.keyCode.ESCAPE:this.collapse(d);break;default:W=!1,S=this.previousFilter||"",R=!1,k=d.keyCode>=96&&d.keyCode<=105?(d.keyCode-96).toString():String.fromCharCode(d.keyCode),clearTimeout(this.filterTimer),k===S?R=!0:k=S+k,w=this._filterMenuItems(k),w=R&&w.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):w,w.length||(k=String.fromCharCode(d.keyCode),w=this._filterMenuItems(k)),w.length?(this.focus(d,w),this.previousFilter=k,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}W&&d.preventDefault()},_activate:function(d){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(d):this.select(d))},refresh:function(){var d,w,S,k,R,W=this,se=this.options.icons.submenu,le=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),S=le.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var fe=g(this),be=fe.prev(),Te=g("<span>").data("ui-menu-submenu-caret",!0);W._addClass(Te,"ui-menu-icon","ui-icon "+se),be.attr("aria-haspopup","true").prepend(Te),fe.attr("aria-labelledby",be.attr("id"))}),this._addClass(S,"ui-menu","ui-widget ui-widget-content ui-front"),d=le.add(this.element),w=d.find(this.options.items),w.not(".ui-menu-item").each(function(){var fe=g(this);W._isDivider(fe)&&W._addClass(fe,"ui-menu-divider","ui-widget-content")}),k=w.not(".ui-menu-item, .ui-menu-divider"),R=k.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(k,"ui-menu-item")._addClass(R,"ui-menu-item-wrapper"),w.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!g.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(d,w){if(d==="icons"){var S=this.element.find(".ui-menu-icon");this._removeClass(S,null,this.options.icons.submenu)._addClass(S,null,w.submenu)}this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",String(d)),this._toggleClass(null,"ui-state-disabled",!!d)},focus:function(d,w){var S,k,R;this.blur(d,d&&d.type==="focus"),this._scrollIntoView(w),this.active=w.first(),k=this.active.children(".ui-menu-item-wrapper"),this._addClass(k,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",k.attr("id")),R=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(R,null,"ui-state-active"),d&&d.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),S=w.children(".ui-menu"),S.length&&d&&/^mouse/.test(d.type)&&this._startOpening(S),this.activeMenu=w.parent(),this._trigger("focus",d,{item:w})},_scrollIntoView:function(d){var w,S,k,R,W,se;this._hasScroll()&&(w=parseFloat(g.css(this.activeMenu[0],"borderTopWidth"))||0,S=parseFloat(g.css(this.activeMenu[0],"paddingTop"))||0,k=d.offset().top-this.activeMenu.offset().top-w-S,R=this.activeMenu.scrollTop(),W=this.activeMenu.height(),se=d.outerHeight(),k<0?this.activeMenu.scrollTop(R+k):k+se>W&&this.activeMenu.scrollTop(R+k-W+se))},blur:function(d,w){w||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",d,{item:this.active}),this.active=null)},_startOpening:function(d){clearTimeout(this.timer),d.attr("aria-hidden")==="true"&&(this.timer=this._delay(function(){this._close(),this._open(d)},this.delay))},_open:function(d){var w=g.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(w)},collapseAll:function(d,w){clearTimeout(this.timer),this.timer=this._delay(function(){var S=w?this.element:g(d&&d.target).closest(this.element.find(".ui-menu"));S.length||(S=this.element),this._close(S),this.blur(d),this._removeClass(S.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=S},w?0:this.delay)},_close:function(d){d||(d=this.active?this.active.parent():this.element),d.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(d){return!g(d.target).closest(".ui-menu").length},_isDivider:function(d){return!/[^\-\u2014\u2013\s]/.test(d.text())},collapse:function(d){var w=this.active&&this.active.parent().closest(".ui-menu-item",this.element);w&&w.length&&(this._close(),this.focus(d,w))},expand:function(d){var w=this.active&&this._menuItems(this.active.children(".ui-menu")).first();w&&w.length&&(this._open(w.parent()),this._delay(function(){this.focus(d,w)}))},next:function(d){this._move("next","first",d)},previous:function(d){this._move("prev","last",d)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(d){return(d||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(d,w,S){var k;this.active&&(d==="first"||d==="last"?k=this.active[d==="first"?"prevAll":"nextAll"](".ui-menu-item").last():k=this.active[d+"All"](".ui-menu-item").first()),(!k||!k.length||!this.active)&&(k=this._menuItems(this.activeMenu)[w]()),this.focus(S,k)},nextPage:function(d){var w,S,k;if(!this.active){this.next(d);return}this.isLastItem()||(this._hasScroll()?(S=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-S-k<0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu)[this.active?"last":"first"]()))},previousPage:function(d){var w,S,k;if(!this.active){this.next(d);return}this.isFirstItem()||(this._hasScroll()?(S=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-S+k>0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||g(d.target).closest(".ui-menu-item");var w={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,w)},_filterMenuItems:function(d){var w=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),S=new RegExp("^"+w,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return S.test(String.prototype.trim.call(g(this).children(".ui-menu-item-wrapper").text()))})}});/*!
 * jQuery UI Autocomplete 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var d,w,S,k=this.element[0].nodeName.toLowerCase(),R=k==="textarea",W=k==="input";this.isMultiLine=R||!W&&this._isContentEditable(this.element),this.valueMethod=this.element[R||W?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(se){if(this.element.prop("readOnly")){d=!0,S=!0,w=!0;return}d=!1,S=!1,w=!1;var le=g.ui.keyCode;switch(se.keyCode){case le.PAGE_UP:d=!0,this._move("previousPage",se);break;case le.PAGE_DOWN:d=!0,this._move("nextPage",se);break;case le.UP:d=!0,this._keyEvent("previous",se);break;case le.DOWN:d=!0,this._keyEvent("next",se);break;case le.ENTER:this.menu.active&&(d=!0,se.preventDefault(),this.menu.select(se));break;case le.TAB:this.menu.active&&this.menu.select(se);break;case le.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(se),se.preventDefault());break;default:w=!0,this._searchTimeout(se);break}},keypress:function(se){if(d){d=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&se.preventDefault();return}if(!w){var le=g.ui.keyCode;switch(se.keyCode){case le.PAGE_UP:this._move("previousPage",se);break;case le.PAGE_DOWN:this._move("nextPage",se);break;case le.UP:this._keyEvent("previous",se);break;case le.DOWN:this._keyEvent("next",se);break}}},input:function(se){if(S){S=!1,se.preventDefault();return}this._searchTimeout(se)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(se){clearTimeout(this.searching),this.close(se),this._change(se)}}),this._initSource(),this.menu=g("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(se){se.preventDefault()},menufocus:function(se,le){var fe,be;if(this.isNewMenu&&(this.isNewMenu=!1,se.originalEvent&&/^mouse/.test(se.originalEvent.type))){this.menu.blur(),this.document.one("mousemove",function(){g(se.target).trigger(se.originalEvent)});return}be=le.item.data("ui-autocomplete-item"),this._trigger("focus",se,{item:be})!==!1&&se.originalEvent&&/^key/.test(se.originalEvent.type)&&this._value(be.value),fe=le.item.attr("aria-label")||be.value,fe&&String.prototype.trim.call(fe).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(fe))},100))},menuselect:function(se,le){var fe=le.item.data("ui-autocomplete-item"),be=this.previous;this.element[0]!==g.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=be,this._delay(function(){this.previous=be,this.selectedItem=fe})),this._trigger("select",se,{item:fe})!==!1&&this._value(fe.value),this.term=this._value(),this.close(se),this.selectedItem=fe}}),this.liveRegion=g("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(d,w){this._super(d,w),d==="source"&&this._initSource(),d==="appendTo"&&this.menu.element.appendTo(this._appendTo()),d==="disabled"&&w&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(d){var w=this.menu.element[0];return d.target===this.element[0]||d.target===w||g.contains(w,d.target)},_closeOnClickOutside:function(d){this._isEventTargetInWidget(d)||this.close()},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_initSource:function(){var d,w,S=this;Array.isArray(this.options.source)?(d=this.options.source,this.source=function(k,R){R(g.ui.autocomplete.filter(d,k.term))}):typeof this.options.source=="string"?(w=this.options.source,this.source=function(k,R){S.xhr&&S.xhr.abort(),S.xhr=g.ajax({url:w,data:k,dataType:"json",success:function(W){R(W)},error:function(){R([])}})}):this.source=this.options.source},_searchTimeout:function(d){clearTimeout(this.searching),this.searching=this._delay(function(){var w=this.term===this._value(),S=this.menu.element.is(":visible"),k=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;(!w||w&&!S&&!k)&&(this.selectedItem=null,this.search(null,d))},this.options.delay)},search:function(d,w){if(d=d??this._value(),this.term=this._value(),d.length<this.options.minLength)return this.close(w);if(this._trigger("search",w)!==!1)return this._search(d)},_search:function(d){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;return(function(w){d===this.requestIndex&&this.__response(w),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}).bind(this)},__response:function(d){d&&(d=this._normalize(d)),this._trigger("response",null,{content:d}),!this.options.disabled&&d&&d.length&&!this.cancelSearch?(this._suggest(d),this._trigger("open")):this._close()},close:function(d){this.cancelSearch=!0,this._close(d)},_close:function(d){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",d))},_change:function(d){this.previous!==this._value()&&this._trigger("change",d,{item:this.selectedItem})},_normalize:function(d){return d.length&&d[0].label&&d[0].value?d:g.map(d,function(w){return typeof w=="string"?{label:w,value:w}:g.extend({},w,{label:w.label||w.value,value:w.value||w.label})})},_suggest:function(d){var w=this.menu.element.empty();this._renderMenu(w,d),this.isNewMenu=!0,this.menu.refresh(),w.show(),this._resizeMenu(),w.position(g.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(d,w){var S=this;g.each(w,function(k,R){S._renderItemData(d,R)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-autocomplete-item",w)},_renderItem:function(d,w){return g("<li>").append(g("<div>").text(w.label)).appendTo(d)},_move:function(d,w){if(!this.menu.element.is(":visible")){this.search(null,w);return}if(this.menu.isFirstItem()&&/^previous/.test(d)||this.menu.isLastItem()&&/^next/.test(d)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[d](w)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(d,w){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(d,w),w.preventDefault())},_isContentEditable:function(d){if(!d.length)return!1;var w=d.prop("contentEditable");return w==="inherit"?this._isContentEditable(d.parent()):w==="true"}}),g.extend(g.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,w){var S=new RegExp(g.ui.autocomplete.escapeRegex(w),"i");return g.grep(d,function(k){return S.test(k.label||k.value||k)})}}),g.widget("ui.autocomplete",g.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var w;this._superApply(arguments),!(this.options.disabled||this.cancelSearch)&&(d&&d.length?w=this.options.messages.results(d.length):w=this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(w))},100))}}),g.ui.autocomplete;/*!
 * jQuery UI Controlgroup 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Pt=/ui-corner-([a-z]){2,6}/g;g.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var d=this,w=[];g.each(this.options.items,function(S,k){var R,W={};if(k){if(S==="controlgroupLabel"){R=d.element.find(k),R.each(function(){var se=g(this);se.children(".ui-controlgroup-label-contents").length||se.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),d._addClass(R,null,"ui-widget ui-widget-content ui-state-default"),w=w.concat(R.get());return}g.fn[S]&&(d["_"+S+"Options"]?W=d["_"+S+"Options"]("middle"):W={classes:{}},d.element.find(k).each(function(){var se=g(this),le=se[S]("instance"),fe=g.widget.extend({},W);if(!(S==="button"&&se.parent(".ui-spinner").length)){le||(le=se[S]()[S]("instance")),le&&(fe.classes=d._resolveClassesValues(fe.classes,le)),se[S](fe);var be=se[S]("widget");g.data(be[0],"ui-controlgroup-data",le||se[S]("instance")),w.push(be[0])}}))}}),this.childWidgets=g(g.uniqueSort(w)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(d){this.childWidgets.each(function(){var w=g(this),S=w.data("ui-controlgroup-data");S&&S[d]&&S[d]()})},_updateCornerClass:function(d,w){var S="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",k=this._buildSimpleOptions(w,"label").classes.label;this._removeClass(d,null,S),this._addClass(d,null,k)},_buildSimpleOptions:function(d,w){var S=this.options.direction==="vertical",k={classes:{}};return k.classes[w]={middle:"",first:"ui-corner-"+(S?"top":"left"),last:"ui-corner-"+(S?"bottom":"right"),only:"ui-corner-all"}[d],k},_spinnerOptions:function(d){var w=this._buildSimpleOptions(d,"ui-spinner");return w.classes["ui-spinner-up"]="",w.classes["ui-spinner-down"]="",w},_buttonOptions:function(d){return this._buildSimpleOptions(d,"ui-button")},_checkboxradioOptions:function(d){return this._buildSimpleOptions(d,"ui-checkboxradio-label")},_selectmenuOptions:function(d){var w=this.options.direction==="vertical";return{width:w?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(w?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(w?"top":"left")},last:{"ui-selectmenu-button-open":w?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(w?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[d]}},_resolveClassesValues:function(d,w){var S={};return g.each(d,function(k){var R=w.options.classes[k]||"";R=String.prototype.trim.call(R.replace(Pt,"")),S[k]=(R+" "+d[k]).replace(/\s+/g," ")}),S},_setOption:function(d,w){if(d==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(d,w),d==="disabled"){this._callChildMethod(w?"disable":"enable");return}this.refresh()},refresh:function(){var d,w=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),d=this.childWidgets,this.options.onlyVisible&&(d=d.filter(":visible")),d.length&&(g.each(["first","last"],function(S,k){var R=d[k]().data("ui-controlgroup-data");if(R&&w["_"+R.widgetName+"Options"]){var W=w["_"+R.widgetName+"Options"](d.length===1?"only":k);W.classes=w._resolveClassesValues(W.classes,R),R.element[R.widgetName](W)}else w._updateCornerClass(d[k](),k)}),this._callChildMethod("refresh"))}});/*!
 * jQuery UI Checkboxradio 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.checkboxradio",[g.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var d,w,S,k=this._super()||{};return this._readType(),w=this.element.labels(),this.label=g(w[w.length-1]),this.label.length||g.error("No label found for checkboxradio widget"),this.originalLabel="",S=this.label.contents().not(this.element[0]),S.length&&(this.originalLabel+=S.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(k.label=this.originalLabel),d=this.element[0].disabled,d!=null&&(k.disabled=d),k},_create:function(){var d=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),d&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var d=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,(d!=="input"||!/radio|checkbox/.test(this.type))&&g.error("Can't create checkboxradio on element.nodeName="+d+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var d,w=this.element[0].name,S="input[name='"+g.escapeSelector(w)+"']";return w?(this.form.length?d=g(this.form[0].elements).filter(S):d=g(S).filter(function(){return g(this)._form().length===0}),d.not(this.element)):g([])},_toggleClasses:function(){var d=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",d)._toggleClass(this.icon,null,"ui-icon-blank",!d),this.type==="radio"&&this._getRadioGroup().each(function(){var w=g(this).checkboxradio("instance");w&&w._removeClass(w.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(d,w){if(!(d==="label"&&!w)){if(this._super(d,w),d==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",w),this.element[0].disabled=w;return}this.refresh()}},_updateIcon:function(d){var w="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=g("<span>"),this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(w+=d?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,d?"ui-icon-blank":"ui-icon-check")):w+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",w),d||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var d=this.label.contents().not(this.element[0]);this.icon&&(d=d.not(this.icon[0])),this.iconSpace&&(d=d.not(this.iconSpace[0])),d.remove(),this.label.append(this.options.label)},refresh:function(){var d=this.element[0].checked,w=this.element[0].disabled;this._updateIcon(d),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.label!==null&&this._updateLabel(),w!==this.options.disabled&&this._setOptions({disabled:w})}}]),g.ui.checkboxradio;/*!
 * jQuery UI Button 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var d,w=this._super()||{};return this.isInput=this.element.is("input"),d=this.element[0].disabled,d!=null&&(w.disabled=d),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(w.label=this.originalLabel),w},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(d){d.keyCode===g.ui.keyCode.SPACE&&(d.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),!this.options.showLabel&&!this.title&&this.element.attr("title",this.options.label)},_updateIcon:function(d,w){var S=d!=="iconPosition",k=S?this.options.iconPosition:w,R=k==="top"||k==="bottom";this.icon?S&&this._removeClass(this.icon,null,this.options.icon):(this.icon=g("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),S&&this._addClass(this.icon,null,w),this._attachIcon(k),R?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(k))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(d){this.icon[/^(?:end|bottom)/.test(d)?"before":"after"](this.iconSpace)},_attachIcon:function(d){this.element[/^(?:end|bottom)/.test(d)?"append":"prepend"](this.icon)},_setOptions:function(d){var w=d.showLabel===void 0?this.options.showLabel:d.showLabel,S=d.icon===void 0?this.options.icon:d.icon;!w&&!S&&(d.showLabel=!0),this._super(d)},_setOption:function(d,w){d==="icon"&&(w?this._updateIcon(d,w):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),d==="iconPosition"&&this._updateIcon(d,w),d==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!w),this._updateTooltip()),d==="label"&&(this.isInput?this.element.val(w):(this.element.html(w),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(d,w),d==="disabled"&&(this._toggleClass(null,"ui-state-disabled",w),this.element[0].disabled=w,w&&this.element.trigger("blur"))},refresh:function(){var d=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");d!==this.options.disabled&&this._setOptions({disabled:d}),this._updateTooltip()}}),g.uiBackCompat!==!1&&(g.widget("ui.button",g.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)?this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"):this.options.icon&&(this.options.icons.primary=this.options.icon),this._super()},_setOption:function(d,w){if(d==="text"){this._super("showLabel",w);return}d==="showLabel"&&(this.options.text=w),d==="icon"&&(this.options.icons.primary=w),d==="icons"&&(w.primary?(this._super("icon",w.primary),this._super("iconPosition","beginning")):w.secondary&&(this._super("icon",w.secondary),this._super("iconPosition","end"))),this._superApply(arguments)}}),g.fn.button=function(d){return function(w){var S=typeof w=="string",k=Array.prototype.slice.call(arguments,1),R=this;return S?!this.length&&w==="instance"?R=void 0:this.each(function(){var W,se=g(this).attr("type"),le=se!=="checkbox"&&se!=="radio"?"button":"checkboxradio",fe=g.data(this,"ui-"+le);if(w==="instance")return R=fe,!1;if(!fe)return g.error("cannot call methods on button prior to initialization; attempted to call method '"+w+"'");if(typeof fe[w]!="function"||w.charAt(0)==="_")return g.error("no such method '"+w+"' for button widget instance");if(W=fe[w].apply(fe,k),W!==fe&&W!==void 0)return R=W&&W.jquery?R.pushStack(W.get()):W,!1}):(k.length&&(w=g.widget.extend.apply(null,[w].concat(k))),this.each(function(){var W=g(this).attr("type"),se=W!=="checkbox"&&W!=="radio"?"button":"checkboxradio",le=g.data(this,"ui-"+se);if(le)le.option(w||{}),le._init&&le._init();else{if(se==="button"){d.call(g(this),w);return}g(this).checkboxradio(g.extend({icon:!1},w))}})),R}}(g.fn.button),g.fn.buttonset=function(){return g.ui.controlgroup||g.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),g.ui.button;/*!
 * jQuery UI Datepicker 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.ui,{datepicker:{version:"1.13.2"}});var Mt;function Vt(d){for(var w,S;d.length&&d[0]!==document;){if(w=d.css("position"),(w==="absolute"||w==="relative"||w==="fixed")&&(S=parseInt(d.css("zIndex"),10),!isNaN(S)&&S!==0))return S;d=d.parent()}return 0}function Ai(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},g.extend(this._defaults,this.regional[""]),this.regional.en=g.extend(!0,{},this.regional[""]),this.regional["en-US"]=g.extend(!0,{},this.regional.en),this.dpDiv=Ri(g("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}g.extend(Ai.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(d){return Li(this._defaults,d||{}),this},_attachDatepicker:function(d,w){var S,k,R;S=d.nodeName.toLowerCase(),k=S==="div"||S==="span",d.id||(this.uuid+=1,d.id="dp"+this.uuid),R=this._newInst(g(d),k),R.settings=g.extend({},w||{}),S==="input"?this._connectDatepicker(d,R):k&&this._inlineDatepicker(d,R)},_newInst:function(d,w){var S=d[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:S,input:d,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:w,dpDiv:w?Ri(g("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(d,w){var S=g(d);w.append=g([]),w.trigger=g([]),!S.hasClass(this.markerClassName)&&(this._attachments(S,w),S.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(w),g.data(d,"datepicker",w),w.settings.disabled&&this._disableDatepicker(d))},_attachments:function(d,w){var S,k,R,W=this._get(w,"appendText"),se=this._get(w,"isRTL");w.append&&w.append.remove(),W&&(w.append=g("<span>").addClass(this._appendClass).text(W),d[se?"before":"after"](w.append)),d.off("focus",this._showDatepicker),w.trigger&&w.trigger.remove(),S=this._get(w,"showOn"),(S==="focus"||S==="both")&&d.on("focus",this._showDatepicker),(S==="button"||S==="both")&&(k=this._get(w,"buttonText"),R=this._get(w,"buttonImage"),this._get(w,"buttonImageOnly")?w.trigger=g("<img>").addClass(this._triggerClass).attr({src:R,alt:k,title:k}):(w.trigger=g("<button type='button'>").addClass(this._triggerClass),R?w.trigger.html(g("<img>").attr({src:R,alt:k,title:k})):w.trigger.text(k)),d[se?"before":"after"](w.trigger),w.trigger.on("click",function(){return g.datepicker._datepickerShowing&&g.datepicker._lastInput===d[0]?g.datepicker._hideDatepicker():(g.datepicker._datepickerShowing&&g.datepicker._lastInput!==d[0]&&g.datepicker._hideDatepicker(),g.datepicker._showDatepicker(d[0])),!1}))},_autoSize:function(d){if(this._get(d,"autoSize")&&!d.inline){var w,S,k,R,W=new Date(2009,11,20),se=this._get(d,"dateFormat");se.match(/[DM]/)&&(w=function(le){for(S=0,k=0,R=0;R<le.length;R++)le[R].length>S&&(S=le[R].length,k=R);return k},W.setMonth(w(this._get(d,se.match(/MM/)?"monthNames":"monthNamesShort"))),W.setDate(w(this._get(d,se.match(/DD/)?"dayNames":"dayNamesShort"))+20-W.getDay())),d.input.attr("size",this._formatDate(d,W).length)}},_inlineDatepicker:function(d,w){var S=g(d);S.hasClass(this.markerClassName)||(S.addClass(this.markerClassName).append(w.dpDiv),g.data(d,"datepicker",w),this._setDate(w,this._getDefaultDate(w),!0),this._updateDatepicker(w),this._updateAlternate(w),w.settings.disabled&&this._disableDatepicker(d),w.dpDiv.css("display","block"))},_dialogDatepicker:function(d,w,S,k,R){var W,se,le,fe,be,Te=this._dialogInst;return Te||(this.uuid+=1,W="dp"+this.uuid,this._dialogInput=g("<input type='text' id='"+W+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),g("body").append(this._dialogInput),Te=this._dialogInst=this._newInst(this._dialogInput,!1),Te.settings={},g.data(this._dialogInput[0],"datepicker",Te)),Li(Te.settings,k||{}),w=w&&w.constructor===Date?this._formatDate(Te,w):w,this._dialogInput.val(w),this._pos=R?R.length?R:[R.pageX,R.pageY]:null,this._pos||(se=document.documentElement.clientWidth,le=document.documentElement.clientHeight,fe=document.documentElement.scrollLeft||document.body.scrollLeft,be=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[se/2-100+fe,le/2-150+be]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),Te.settings.onSelect=S,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),g.blockUI&&g.blockUI(this.dpDiv),g.data(this._dialogInput[0],"datepicker",Te),this},_destroyDatepicker:function(d){var w,S=g(d),k=g.data(d,"datepicker");S.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),g.removeData(d,"datepicker"),w==="input"?(k.append.remove(),k.trigger.remove(),S.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):(w==="div"||w==="span")&&S.removeClass(this.markerClassName).empty(),Mt===k&&(Mt=null,this._curInst=null))},_enableDatepicker:function(d){var w,S,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!1,R.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(w==="div"||w==="span")&&(S=k.children("."+this._inlineClass),S.children().removeClass("ui-state-disabled"),S.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}))},_disableDatepicker:function(d){var w,S,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!0,R.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(w==="div"||w==="span")&&(S=k.children("."+this._inlineClass),S.children().addClass("ui-state-disabled"),S.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}),this._disabledInputs[this._disabledInputs.length]=d)},_isDisabledDatepicker:function(d){if(!d)return!1;for(var w=0;w<this._disabledInputs.length;w++)if(this._disabledInputs[w]===d)return!0;return!1},_getInst:function(d){try{return g.data(d,"datepicker")}catch{throw"Missing instance data for this datepicker"}},_optionDatepicker:function(d,w,S){var k,R,W,se,le=this._getInst(d);if(arguments.length===2&&typeof w=="string")return w==="defaults"?g.extend({},g.datepicker._defaults):le?w==="all"?g.extend({},le.settings):this._get(le,w):null;k=w||{},typeof w=="string"&&(k={},k[w]=S),le&&(this._curInst===le&&this._hideDatepicker(),R=this._getDateDatepicker(d,!0),W=this._getMinMaxDate(le,"min"),se=this._getMinMaxDate(le,"max"),Li(le.settings,k),W!==null&&k.dateFormat!==void 0&&k.minDate===void 0&&(le.settings.minDate=this._formatDate(le,W)),se!==null&&k.dateFormat!==void 0&&k.maxDate===void 0&&(le.settings.maxDate=this._formatDate(le,se)),"disabled"in k&&(k.disabled?this._disableDatepicker(d):this._enableDatepicker(d)),this._attachments(g(d),le),this._autoSize(le),this._setDate(le,R),this._updateAlternate(le),this._updateDatepicker(le))},_changeDatepicker:function(d,w,S){this._optionDatepicker(d,w,S)},_refreshDatepicker:function(d){var w=this._getInst(d);w&&this._updateDatepicker(w)},_setDateDatepicker:function(d,w){var S=this._getInst(d);S&&(this._setDate(S,w),this._updateDatepicker(S),this._updateAlternate(S))},_getDateDatepicker:function(d,w){var S=this._getInst(d);return S&&!S.inline&&this._setDateFromField(S,w),S?this._getDate(S):null},_doKeyDown:function(d){var w,S,k,R=g.datepicker._getInst(d.target),W=!0,se=R.dpDiv.is(".ui-datepicker-rtl");if(R._keyEvent=!0,g.datepicker._datepickerShowing)switch(d.keyCode){case 9:g.datepicker._hideDatepicker(),W=!1;break;case 13:return k=g("td."+g.datepicker._dayOverClass+":not(."+g.datepicker._currentClass+")",R.dpDiv),k[0]&&g.datepicker._selectDay(d.target,R.selectedMonth,R.selectedYear,k[0]),w=g.datepicker._get(R,"onSelect"),w?(S=g.datepicker._formatDate(R),w.apply(R.input?R.input[0]:null,[S,R])):g.datepicker._hideDatepicker(),!1;case 27:g.datepicker._hideDatepicker();break;case 33:g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 34:g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 35:(d.ctrlKey||d.metaKey)&&g.datepicker._clearDate(d.target),W=d.ctrlKey||d.metaKey;break;case 36:(d.ctrlKey||d.metaKey)&&g.datepicker._gotoToday(d.target),W=d.ctrlKey||d.metaKey;break;case 37:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?1:-1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 38:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,-7,"D"),W=d.ctrlKey||d.metaKey;break;case 39:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?-1:1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 40:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,7,"D"),W=d.ctrlKey||d.metaKey;break;default:W=!1}else d.keyCode===36&&d.ctrlKey?g.datepicker._showDatepicker(this):W=!1;W&&(d.preventDefault(),d.stopPropagation())},_doKeyPress:function(d){var w,S,k=g.datepicker._getInst(d.target);if(g.datepicker._get(k,"constrainInput"))return w=g.datepicker._possibleChars(g.datepicker._get(k,"dateFormat")),S=String.fromCharCode(d.charCode==null?d.keyCode:d.charCode),d.ctrlKey||d.metaKey||S<" "||!w||w.indexOf(S)>-1},_doKeyUp:function(d){var w,S=g.datepicker._getInst(d.target);if(S.input.val()!==S.lastVal)try{w=g.datepicker.parseDate(g.datepicker._get(S,"dateFormat"),S.input?S.input.val():null,g.datepicker._getFormatConfig(S)),w&&(g.datepicker._setDateFromField(S),g.datepicker._updateAlternate(S),g.datepicker._updateDatepicker(S))}catch{}return!0},_showDatepicker:function(d){if(d=d.target||d,d.nodeName.toLowerCase()!=="input"&&(d=g("input",d.parentNode)[0]),!(g.datepicker._isDisabledDatepicker(d)||g.datepicker._lastInput===d)){var w,S,k,R,W,se,le;w=g.datepicker._getInst(d),g.datepicker._curInst&&g.datepicker._curInst!==w&&(g.datepicker._curInst.dpDiv.stop(!0,!0),w&&g.datepicker._datepickerShowing&&g.datepicker._hideDatepicker(g.datepicker._curInst.input[0])),S=g.datepicker._get(w,"beforeShow"),k=S?S.apply(d,[d,w]):{},k!==!1&&(Li(w.settings,k),w.lastVal=null,g.datepicker._lastInput=d,g.datepicker._setDateFromField(w),g.datepicker._inDialog&&(d.value=""),g.datepicker._pos||(g.datepicker._pos=g.datepicker._findPos(d),g.datepicker._pos[1]+=d.offsetHeight),R=!1,g(d).parents().each(function(){return R|=g(this).css("position")==="fixed",!R}),W={left:g.datepicker._pos[0],top:g.datepicker._pos[1]},g.datepicker._pos=null,w.dpDiv.empty(),w.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),g.datepicker._updateDatepicker(w),W=g.datepicker._checkOffset(w,W,R),w.dpDiv.css({position:g.datepicker._inDialog&&g.blockUI?"static":R?"fixed":"absolute",display:"none",left:W.left+"px",top:W.top+"px"}),w.inline||(se=g.datepicker._get(w,"showAnim"),le=g.datepicker._get(w,"duration"),w.dpDiv.css("z-index",Vt(g(d))+1),g.datepicker._datepickerShowing=!0,g.effects&&g.effects.effect[se]?w.dpDiv.show(se,g.datepicker._get(w,"showOptions"),le):w.dpDiv[se||"show"](se?le:null),g.datepicker._shouldFocusInput(w)&&w.input.trigger("focus"),g.datepicker._curInst=w))}},_updateDatepicker:function(d){this.maxRows=4,Mt=d,d.dpDiv.empty().append(this._generateHTML(d)),this._attachHandlers(d);var w,S=this._getNumberOfMonths(d),k=S[1],R=17,W=d.dpDiv.find("."+this._dayOverClass+" a"),se=g.datepicker._get(d,"onUpdateDatepicker");W.length>0&&Ei.apply(W.get(0)),d.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),k>1&&d.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",R*k+"em"),d.dpDiv[(S[0]!==1||S[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),d.dpDiv[(this._get(d,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),d===g.datepicker._curInst&&g.datepicker._datepickerShowing&&g.datepicker._shouldFocusInput(d)&&d.input.trigger("focus"),d.yearshtml&&(w=d.yearshtml,setTimeout(function(){w===d.yearshtml&&d.yearshtml&&d.dpDiv.find("select.ui-datepicker-year").first().replaceWith(d.yearshtml),w=d.yearshtml=null},0)),se&&se.apply(d.input?d.input[0]:null,[d])},_shouldFocusInput:function(d){return d.input&&d.input.is(":visible")&&!d.input.is(":disabled")&&!d.input.is(":focus")},_checkOffset:function(d,w,S){var k=d.dpDiv.outerWidth(),R=d.dpDiv.outerHeight(),W=d.input?d.input.outerWidth():0,se=d.input?d.input.outerHeight():0,le=document.documentElement.clientWidth+(S?0:g(document).scrollLeft()),fe=document.documentElement.clientHeight+(S?0:g(document).scrollTop());return w.left-=this._get(d,"isRTL")?k-W:0,w.left-=S&&w.left===d.input.offset().left?g(document).scrollLeft():0,w.top-=S&&w.top===d.input.offset().top+se?g(document).scrollTop():0,w.left-=Math.min(w.left,w.left+k>le&&le>k?Math.abs(w.left+k-le):0),w.top-=Math.min(w.top,w.top+R>fe&&fe>R?Math.abs(R+se):0),w},_findPos:function(d){for(var w,S=this._getInst(d),k=this._get(S,"isRTL");d&&(d.type==="hidden"||d.nodeType!==1||g.expr.pseudos.hidden(d));)d=d[k?"previousSibling":"nextSibling"];return w=g(d).offset(),[w.left,w.top]},_hideDatepicker:function(d){var w,S,k,R,W=this._curInst;!W||d&&W!==g.data(d,"datepicker")||this._datepickerShowing&&(w=this._get(W,"showAnim"),S=this._get(W,"duration"),k=function(){g.datepicker._tidyDialog(W)},g.effects&&(g.effects.effect[w]||g.effects[w])?W.dpDiv.hide(w,g.datepicker._get(W,"showOptions"),S,k):W.dpDiv[w==="slideDown"?"slideUp":w==="fadeIn"?"fadeOut":"hide"](w?S:null,k),w||k(),this._datepickerShowing=!1,R=this._get(W,"onClose"),R&&R.apply(W.input?W.input[0]:null,[W.input?W.input.val():"",W]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),g.blockUI&&(g.unblockUI(),g("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(d){d.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(d){if(g.datepicker._curInst){var w=g(d.target),S=g.datepicker._getInst(w[0]);(w[0].id!==g.datepicker._mainDivId&&w.parents("#"+g.datepicker._mainDivId).length===0&&!w.hasClass(g.datepicker.markerClassName)&&!w.closest("."+g.datepicker._triggerClass).length&&g.datepicker._datepickerShowing&&!(g.datepicker._inDialog&&g.blockUI)||w.hasClass(g.datepicker.markerClassName)&&g.datepicker._curInst!==S)&&g.datepicker._hideDatepicker()}},_adjustDate:function(d,w,S){var k=g(d),R=this._getInst(k[0]);this._isDisabledDatepicker(k[0])||(this._adjustInstDate(R,w,S),this._updateDatepicker(R))},_gotoToday:function(d){var w,S=g(d),k=this._getInst(S[0]);this._get(k,"gotoCurrent")&&k.currentDay?(k.selectedDay=k.currentDay,k.drawMonth=k.selectedMonth=k.currentMonth,k.drawYear=k.selectedYear=k.currentYear):(w=new Date,k.selectedDay=w.getDate(),k.drawMonth=k.selectedMonth=w.getMonth(),k.drawYear=k.selectedYear=w.getFullYear()),this._notifyChange(k),this._adjustDate(S)},_selectMonthYear:function(d,w,S){var k=g(d),R=this._getInst(k[0]);R["selected"+(S==="M"?"Month":"Year")]=R["draw"+(S==="M"?"Month":"Year")]=parseInt(w.options[w.selectedIndex].value,10),this._notifyChange(R),this._adjustDate(k)},_selectDay:function(d,w,S,k){var R,W=g(d);g(k).hasClass(this._unselectableClass)||this._isDisabledDatepicker(W[0])||(R=this._getInst(W[0]),R.selectedDay=R.currentDay=parseInt(g("a",k).attr("data-date")),R.selectedMonth=R.currentMonth=w,R.selectedYear=R.currentYear=S,this._selectDate(d,this._formatDate(R,R.currentDay,R.currentMonth,R.currentYear)))},_clearDate:function(d){var w=g(d);this._selectDate(w,"")},_selectDate:function(d,w){var S,k=g(d),R=this._getInst(k[0]);w=w??this._formatDate(R),R.input&&R.input.val(w),this._updateAlternate(R),S=this._get(R,"onSelect"),S?S.apply(R.input?R.input[0]:null,[w,R]):R.input&&R.input.trigger("change"),R.inline?this._updateDatepicker(R):(this._hideDatepicker(),this._lastInput=R.input[0],typeof R.input[0]!="object"&&R.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(d){var w,S,k,R=this._get(d,"altField");R&&(w=this._get(d,"altFormat")||this._get(d,"dateFormat"),S=this._getDate(d),k=this.formatDate(w,S,this._getFormatConfig(d)),g(document).find(R).val(k))},noWeekends:function(d){var w=d.getDay();return[w>0&&w<6,""]},iso8601Week:function(d){var w,S=new Date(d.getTime());return S.setDate(S.getDate()+4-(S.getDay()||7)),w=S.getTime(),S.setMonth(0),S.setDate(1),Math.floor(Math.round((w-S)/864e5)/7)+1},parseDate:function(d,w,S){if(d==null||w==null)throw"Invalid arguments";if(w=typeof w=="object"?w.toString():w+"",w==="")return null;var k,R,W,se=0,le=(S?S.shortYearCutoff:null)||this._defaults.shortYearCutoff,fe=typeof le!="string"?le:new Date().getFullYear()%100+parseInt(le,10),be=(S?S.dayNamesShort:null)||this._defaults.dayNamesShort,Te=(S?S.dayNames:null)||this._defaults.dayNames,Ke=(S?S.monthNamesShort:null)||this._defaults.monthNamesShort,Me=(S?S.monthNames:null)||this._defaults.monthNames,me=-1,De=-1,Xe=-1,ct=-1,gt=!1,Dt,Kt=function(ri){var ci=k+1<d.length&&d.charAt(k+1)===ri;return ci&&k++,ci},Gt=function(ri){var ci=Kt(ri),Bt=ri==="@"?14:ri==="!"?20:ri==="y"&&ci?4:ri==="o"?3:2,di=ri==="y"?Bt:1,ii=new RegExp("^\\d{"+di+","+Bt+"}"),Hi=w.substring(se).match(ii);if(!Hi)throw"Missing number at position "+se;return se+=Hi[0].length,parseInt(Hi[0],10)},Qt=function(ri,ci,Bt){var di=-1,ii=g.map(Kt(ri)?Bt:ci,function(Hi,Vi){return[[Vi,Hi]]}).sort(function(Hi,Vi){return-(Hi[1].length-Vi[1].length)});if(g.each(ii,function(Hi,Vi){var Ht=Vi[1];if(w.substr(se,Ht.length).toLowerCase()===Ht.toLowerCase())return di=Vi[0],se+=Ht.length,!1}),di!==-1)return di+1;throw"Unknown name at position "+se},$t=function(){if(w.charAt(se)!==d.charAt(k))throw"Unexpected literal at position "+se;se++};for(k=0;k<d.length;k++)if(gt)d.charAt(k)==="'"&&!Kt("'")?gt=!1:$t();else switch(d.charAt(k)){case"d":Xe=Gt("d");break;case"D":Qt("D",be,Te);break;case"o":ct=Gt("o");break;case"m":De=Gt("m");break;case"M":De=Qt("M",Ke,Me);break;case"y":me=Gt("y");break;case"@":Dt=new Date(Gt("@")),me=Dt.getFullYear(),De=Dt.getMonth()+1,Xe=Dt.getDate();break;case"!":Dt=new Date((Gt("!")-this._ticksTo1970)/1e4),me=Dt.getFullYear(),De=Dt.getMonth()+1,Xe=Dt.getDate();break;case"'":Kt("'")?$t():gt=!0;break;default:$t()}if(se<w.length&&(W=w.substr(se),!/^\s+/.test(W)))throw"Extra/unparsed characters found in date: "+W;if(me===-1?me=new Date().getFullYear():me<100&&(me+=new Date().getFullYear()-new Date().getFullYear()%100+(me<=fe?0:-100)),ct>-1){De=1,Xe=ct;do{if(R=this._getDaysInMonth(me,De-1),Xe<=R)break;De++,Xe-=R}while(!0)}if(Dt=this._daylightSavingAdjust(new Date(me,De-1,Xe)),Dt.getFullYear()!==me||Dt.getMonth()+1!==De||Dt.getDate()!==Xe)throw"Invalid date";return Dt},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(1969*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(d,w,S){if(!w)return"";var k,R=(S?S.dayNamesShort:null)||this._defaults.dayNamesShort,W=(S?S.dayNames:null)||this._defaults.dayNames,se=(S?S.monthNamesShort:null)||this._defaults.monthNamesShort,le=(S?S.monthNames:null)||this._defaults.monthNames,fe=function(me){var De=k+1<d.length&&d.charAt(k+1)===me;return De&&k++,De},be=function(me,De,Xe){var ct=""+De;if(fe(me))for(;ct.length<Xe;)ct="0"+ct;return ct},Te=function(me,De,Xe,ct){return fe(me)?ct[De]:Xe[De]},Ke="",Me=!1;if(w)for(k=0;k<d.length;k++)if(Me)d.charAt(k)==="'"&&!fe("'")?Me=!1:Ke+=d.charAt(k);else switch(d.charAt(k)){case"d":Ke+=be("d",w.getDate(),2);break;case"D":Ke+=Te("D",w.getDay(),R,W);break;case"o":Ke+=be("o",Math.round((new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime()-new Date(w.getFullYear(),0,0).getTime())/864e5),3);break;case"m":Ke+=be("m",w.getMonth()+1,2);break;case"M":Ke+=Te("M",w.getMonth(),se,le);break;case"y":Ke+=fe("y")?w.getFullYear():(w.getFullYear()%100<10?"0":"")+w.getFullYear()%100;break;case"@":Ke+=w.getTime();break;case"!":Ke+=w.getTime()*1e4+this._ticksTo1970;break;case"'":fe("'")?Ke+="'":Me=!0;break;default:Ke+=d.charAt(k)}return Ke},_possibleChars:function(d){var w,S="",k=!1,R=function(W){var se=w+1<d.length&&d.charAt(w+1)===W;return se&&w++,se};for(w=0;w<d.length;w++)if(k)d.charAt(w)==="'"&&!R("'")?k=!1:S+=d.charAt(w);else switch(d.charAt(w)){case"d":case"m":case"y":case"@":S+="0123456789";break;case"D":case"M":return null;case"'":R("'")?S+="'":k=!0;break;default:S+=d.charAt(w)}return S},_get:function(d,w){return d.settings[w]!==void 0?d.settings[w]:this._defaults[w]},_setDateFromField:function(d,w){if(d.input.val()!==d.lastVal){var S=this._get(d,"dateFormat"),k=d.lastVal=d.input?d.input.val():null,R=this._getDefaultDate(d),W=R,se=this._getFormatConfig(d);try{W=this.parseDate(S,k,se)||R}catch{k=w?"":k}d.selectedDay=W.getDate(),d.drawMonth=d.selectedMonth=W.getMonth(),d.drawYear=d.selectedYear=W.getFullYear(),d.currentDay=k?W.getDate():0,d.currentMonth=k?W.getMonth():0,d.currentYear=k?W.getFullYear():0,this._adjustInstDate(d)}},_getDefaultDate:function(d){return this._restrictMinMax(d,this._determineDate(d,this._get(d,"defaultDate"),new Date))},_determineDate:function(d,w,S){var k=function(se){var le=new Date;return le.setDate(le.getDate()+se),le},R=function(se){try{return g.datepicker.parseDate(g.datepicker._get(d,"dateFormat"),se,g.datepicker._getFormatConfig(d))}catch{}for(var le=(se.toLowerCase().match(/^c/)?g.datepicker._getDate(d):null)||new Date,fe=le.getFullYear(),be=le.getMonth(),Te=le.getDate(),Ke=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,Me=Ke.exec(se);Me;){switch(Me[2]||"d"){case"d":case"D":Te+=parseInt(Me[1],10);break;case"w":case"W":Te+=parseInt(Me[1],10)*7;break;case"m":case"M":be+=parseInt(Me[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(fe,be));break;case"y":case"Y":fe+=parseInt(Me[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(fe,be));break}Me=Ke.exec(se)}return new Date(fe,be,Te)},W=w==null||w===""?S:typeof w=="string"?R(w):typeof w=="number"?isNaN(w)?S:k(w):new Date(w.getTime());return W=W&&W.toString()==="Invalid Date"?S:W,W&&(W.setHours(0),W.setMinutes(0),W.setSeconds(0),W.setMilliseconds(0)),this._daylightSavingAdjust(W)},_daylightSavingAdjust:function(d){return d?(d.setHours(d.getHours()>12?d.getHours()+2:0),d):null},_setDate:function(d,w,S){var k=!w,R=d.selectedMonth,W=d.selectedYear,se=this._restrictMinMax(d,this._determineDate(d,w,new Date));d.selectedDay=d.currentDay=se.getDate(),d.drawMonth=d.selectedMonth=d.currentMonth=se.getMonth(),d.drawYear=d.selectedYear=d.currentYear=se.getFullYear(),(R!==d.selectedMonth||W!==d.selectedYear)&&!S&&this._notifyChange(d),this._adjustInstDate(d),d.input&&d.input.val(k?"":this._formatDate(d))},_getDate:function(d){var w=!d.currentYear||d.input&&d.input.val()===""?null:this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return w},_attachHandlers:function(d){var w=this._get(d,"stepMonths"),S="#"+d.id.replace(/\\\\/g,"\\");d.dpDiv.find("[data-handler]").map(function(){var k={prev:function(){g.datepicker._adjustDate(S,-w,"M")},next:function(){g.datepicker._adjustDate(S,+w,"M")},hide:function(){g.datepicker._hideDatepicker()},today:function(){g.datepicker._gotoToday(S)},selectDay:function(){return g.datepicker._selectDay(S,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return g.datepicker._selectMonthYear(S,this,"M"),!1},selectYear:function(){return g.datepicker._selectMonthYear(S,this,"Y"),!1}};g(this).on(this.getAttribute("data-event"),k[this.getAttribute("data-handler")])})},_generateHTML:function(d){var w,S,k,R,W,se,le,fe,be,Te,Ke,Me,me,De,Xe,ct,gt,Dt,Kt,Gt,Qt,$t,ri,ci,Bt,di,ii,Hi,Vi,Ht,_i,Ti,Wi,Zt,mi,wi,$i,tr,Ar,Tr=new Date,ji=this._daylightSavingAdjust(new Date(Tr.getFullYear(),Tr.getMonth(),Tr.getDate())),Ii=this._get(d,"isRTL"),Qs=this._get(d,"showButtonPanel"),$r=this._get(d,"hideIfNoPrevNext"),nt=this._get(d,"navigationAsDateFormat"),Ie=this._getNumberOfMonths(d),ce=this._get(d,"showCurrentAtPos"),ye=this._get(d,"stepMonths"),Be=Ie[0]!==1||Ie[1]!==1,Pe=this._daylightSavingAdjust(d.currentDay?new Date(d.currentYear,d.currentMonth,d.currentDay):new Date(9999,9,9)),qe=this._getMinMaxDate(d,"min"),Oe=this._getMinMaxDate(d,"max"),Ge=d.drawMonth-ce,ot=d.drawYear;if(Ge<0&&(Ge+=12,ot--),Oe)for(w=this._daylightSavingAdjust(new Date(Oe.getFullYear(),Oe.getMonth()-Ie[0]*Ie[1]+1,Oe.getDate())),w=qe&&w<qe?qe:w;this._daylightSavingAdjust(new Date(ot,Ge,1))>w;)Ge--,Ge<0&&(Ge=11,ot--);for(d.drawMonth=Ge,d.drawYear=ot,S=this._get(d,"prevText"),S=nt?this.formatDate(S,this._daylightSavingAdjust(new Date(ot,Ge-ye,1)),this._getFormatConfig(d)):S,this._canAdjustMonth(d,-1,ot,Ge)?k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:S}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Ii?"e":"w")).text(S))[0].outerHTML:$r?k="":k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:S}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Ii?"e":"w")).text(S))[0].outerHTML,R=this._get(d,"nextText"),R=nt?this.formatDate(R,this._daylightSavingAdjust(new Date(ot,Ge+ye,1)),this._getFormatConfig(d)):R,this._canAdjustMonth(d,1,ot,Ge)?W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:R}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Ii?"w":"e")).text(R))[0].outerHTML:$r?W="":W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:R}).append(g("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(Ii?"w":"e")).text(R))[0].outerHTML,se=this._get(d,"currentText"),le=this._get(d,"gotoCurrent")&&d.currentDay?Pe:ji,se=nt?this.formatDate(se,le,this._getFormatConfig(d)):se,fe="",d.inline||(fe=g("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(d,"closeText"))[0].outerHTML),be="",Qs&&(be=g("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(Ii?fe:"").append(this._isInRange(d,le)?g("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(se):"").append(Ii?"":fe)[0].outerHTML),Te=parseInt(this._get(d,"firstDay"),10),Te=isNaN(Te)?0:Te,Ke=this._get(d,"showWeek"),Me=this._get(d,"dayNames"),me=this._get(d,"dayNamesMin"),De=this._get(d,"monthNames"),Xe=this._get(d,"monthNamesShort"),ct=this._get(d,"beforeShowDay"),gt=this._get(d,"showOtherMonths"),Dt=this._get(d,"selectOtherMonths"),Kt=this._getDefaultDate(d),Gt="",$t=0;$t<Ie[0];$t++){for(ri="",this.maxRows=4,ci=0;ci<Ie[1];ci++){if(Bt=this._daylightSavingAdjust(new Date(ot,Ge,d.selectedDay)),di=" ui-corner-all",ii="",Be){if(ii+="<div class='ui-datepicker-group",Ie[1]>1)switch(ci){case 0:ii+=" ui-datepicker-group-first",di=" ui-corner-"+(Ii?"right":"left");break;case Ie[1]-1:ii+=" ui-datepicker-group-last",di=" ui-corner-"+(Ii?"left":"right");break;default:ii+=" ui-datepicker-group-middle",di="";break}ii+="'>"}for(ii+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+di+"'>"+(/all|left/.test(di)&&$t===0?Ii?W:k:"")+(/all|right/.test(di)&&$t===0?Ii?k:W:"")+this._generateMonthYearHeader(d,Ge,ot,qe,Oe,$t>0||ci>0,De,Xe)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Hi=Ke?"<th class='ui-datepicker-week-col'>"+this._get(d,"weekHeader")+"</th>":"",Qt=0;Qt<7;Qt++)Vi=(Qt+Te)%7,Hi+="<th scope='col'"+((Qt+Te+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+Me[Vi]+"'>"+me[Vi]+"</span></th>";for(ii+=Hi+"</tr></thead><tbody>",Ht=this._getDaysInMonth(ot,Ge),ot===d.selectedYear&&Ge===d.selectedMonth&&(d.selectedDay=Math.min(d.selectedDay,Ht)),_i=(this._getFirstDayOfMonth(ot,Ge)-Te+7)%7,Ti=Math.ceil((_i+Ht)/7),Wi=Be&&this.maxRows>Ti?this.maxRows:Ti,this.maxRows=Wi,Zt=this._daylightSavingAdjust(new Date(ot,Ge,1-_i)),mi=0;mi<Wi;mi++){for(ii+="<tr>",wi=Ke?"<td class='ui-datepicker-week-col'>"+this._get(d,"calculateWeek")(Zt)+"</td>":"",Qt=0;Qt<7;Qt++)$i=ct?ct.apply(d.input?d.input[0]:null,[Zt]):[!0,""],tr=Zt.getMonth()!==Ge,Ar=tr&&!Dt||!$i[0]||qe&&Zt<qe||Oe&&Zt>Oe,wi+="<td class='"+((Qt+Te+6)%7>=5?" ui-datepicker-week-end":"")+(tr?" ui-datepicker-other-month":"")+(Zt.getTime()===Bt.getTime()&&Ge===d.selectedMonth&&d._keyEvent||Kt.getTime()===Zt.getTime()&&Kt.getTime()===Bt.getTime()?" "+this._dayOverClass:"")+(Ar?" "+this._unselectableClass+" ui-state-disabled":"")+(tr&&!gt?"":" "+$i[1]+(Zt.getTime()===Pe.getTime()?" "+this._currentClass:"")+(Zt.getTime()===ji.getTime()?" ui-datepicker-today":""))+"'"+((!tr||gt)&&$i[2]?" title='"+$i[2].replace(/'/g,"&#39;")+"'":"")+(Ar?"":" data-handler='selectDay' data-event='click' data-month='"+Zt.getMonth()+"' data-year='"+Zt.getFullYear()+"'")+">"+(tr&&!gt?"&#xa0;":Ar?"<span class='ui-state-default'>"+Zt.getDate()+"</span>":"<a class='ui-state-default"+(Zt.getTime()===ji.getTime()?" ui-state-highlight":"")+(Zt.getTime()===Pe.getTime()?" ui-state-active":"")+(tr?" ui-priority-secondary":"")+"' href='#' aria-current='"+(Zt.getTime()===Pe.getTime()?"true":"false")+"' data-date='"+Zt.getDate()+"'>"+Zt.getDate()+"</a>")+"</td>",Zt.setDate(Zt.getDate()+1),Zt=this._daylightSavingAdjust(Zt);ii+=wi+"</tr>"}Ge++,Ge>11&&(Ge=0,ot++),ii+="</tbody></table>"+(Be?"</div>"+(Ie[0]>0&&ci===Ie[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),ri+=ii}Gt+=ri}return Gt+=be,d._keyEvent=!1,Gt},_generateMonthYearHeader:function(d,w,S,k,R,W,se,le){var fe,be,Te,Ke,Me,me,De,Xe,ct=this._get(d,"changeMonth"),gt=this._get(d,"changeYear"),Dt=this._get(d,"showMonthAfterYear"),Kt=this._get(d,"selectMonthLabel"),Gt=this._get(d,"selectYearLabel"),Qt="<div class='ui-datepicker-title'>",$t="";if(W||!ct)$t+="<span class='ui-datepicker-month'>"+se[w]+"</span>";else{for(fe=k&&k.getFullYear()===S,be=R&&R.getFullYear()===S,$t+="<select class='ui-datepicker-month' aria-label='"+Kt+"' data-handler='selectMonth' data-event='change'>",Te=0;Te<12;Te++)(!fe||Te>=k.getMonth())&&(!be||Te<=R.getMonth())&&($t+="<option value='"+Te+"'"+(Te===w?" selected='selected'":"")+">"+le[Te]+"</option>");$t+="</select>"}if(Dt||(Qt+=$t+(W||!(ct&&gt)?"&#xa0;":"")),!d.yearshtml)if(d.yearshtml="",W||!gt)Qt+="<span class='ui-datepicker-year'>"+S+"</span>";else{for(Ke=this._get(d,"yearRange").split(":"),Me=new Date().getFullYear(),me=function(ri){var ci=ri.match(/c[+\-].*/)?S+parseInt(ri.substring(1),10):ri.match(/[+\-].*/)?Me+parseInt(ri,10):parseInt(ri,10);return isNaN(ci)?Me:ci},De=me(Ke[0]),Xe=Math.max(De,me(Ke[1]||"")),De=k?Math.max(De,k.getFullYear()):De,Xe=R?Math.min(Xe,R.getFullYear()):Xe,d.yearshtml+="<select class='ui-datepicker-year' aria-label='"+Gt+"' data-handler='selectYear' data-event='change'>";De<=Xe;De++)d.yearshtml+="<option value='"+De+"'"+(De===S?" selected='selected'":"")+">"+De+"</option>";d.yearshtml+="</select>",Qt+=d.yearshtml,d.yearshtml=null}return Qt+=this._get(d,"yearSuffix"),Dt&&(Qt+=(W||!(ct&&gt)?"&#xa0;":"")+$t),Qt+="</div>",Qt},_adjustInstDate:function(d,w,S){var k=d.selectedYear+(S==="Y"?w:0),R=d.selectedMonth+(S==="M"?w:0),W=Math.min(d.selectedDay,this._getDaysInMonth(k,R))+(S==="D"?w:0),se=this._restrictMinMax(d,this._daylightSavingAdjust(new Date(k,R,W)));d.selectedDay=se.getDate(),d.drawMonth=d.selectedMonth=se.getMonth(),d.drawYear=d.selectedYear=se.getFullYear(),(S==="M"||S==="Y")&&this._notifyChange(d)},_restrictMinMax:function(d,w){var S=this._getMinMaxDate(d,"min"),k=this._getMinMaxDate(d,"max"),R=S&&w<S?S:w;return k&&R>k?k:R},_notifyChange:function(d){var w=this._get(d,"onChangeMonthYear");w&&w.apply(d.input?d.input[0]:null,[d.selectedYear,d.selectedMonth+1,d])},_getNumberOfMonths:function(d){var w=this._get(d,"numberOfMonths");return w==null?[1,1]:typeof w=="number"?[1,w]:w},_getMinMaxDate:function(d,w){return this._determineDate(d,this._get(d,w+"Date"),null)},_getDaysInMonth:function(d,w){return 32-this._daylightSavingAdjust(new Date(d,w,32)).getDate()},_getFirstDayOfMonth:function(d,w){return new Date(d,w,1).getDay()},_canAdjustMonth:function(d,w,S,k){var R=this._getNumberOfMonths(d),W=this._daylightSavingAdjust(new Date(S,k+(w<0?w:R[0]*R[1]),1));return w<0&&W.setDate(this._getDaysInMonth(W.getFullYear(),W.getMonth())),this._isInRange(d,W)},_isInRange:function(d,w){var S,k,R=this._getMinMaxDate(d,"min"),W=this._getMinMaxDate(d,"max"),se=null,le=null,fe=this._get(d,"yearRange");return fe&&(S=fe.split(":"),k=new Date().getFullYear(),se=parseInt(S[0],10),le=parseInt(S[1],10),S[0].match(/[+\-].*/)&&(se+=k),S[1].match(/[+\-].*/)&&(le+=k)),(!R||w.getTime()>=R.getTime())&&(!W||w.getTime()<=W.getTime())&&(!se||w.getFullYear()>=se)&&(!le||w.getFullYear()<=le)},_getFormatConfig:function(d){var w=this._get(d,"shortYearCutoff");return w=typeof w!="string"?w:new Date().getFullYear()%100+parseInt(w,10),{shortYearCutoff:w,dayNamesShort:this._get(d,"dayNamesShort"),dayNames:this._get(d,"dayNames"),monthNamesShort:this._get(d,"monthNamesShort"),monthNames:this._get(d,"monthNames")}},_formatDate:function(d,w,S,k){w||(d.currentDay=d.selectedDay,d.currentMonth=d.selectedMonth,d.currentYear=d.selectedYear);var R=w?typeof w=="object"?w:this._daylightSavingAdjust(new Date(k,S,w)):this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return this.formatDate(this._get(d,"dateFormat"),R,this._getFormatConfig(d))}});function Ri(d){var w="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return d.on("mouseout",w,function(){g(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",w,Ei)}function Ei(){g.datepicker._isDisabledDatepicker(Mt.inline?Mt.dpDiv.parent()[0]:Mt.input[0])||(g(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),g(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).addClass("ui-datepicker-next-hover"))}function Li(d,w){g.extend(d,w);for(var S in w)w[S]==null&&(d[S]=w[S]);return d}g.fn.datepicker=function(d){if(!this.length)return this;g.datepicker.initialized||(g(document).on("mousedown",g.datepicker._checkExternalClick),g.datepicker.initialized=!0),g("#"+g.datepicker._mainDivId).length===0&&g("body").append(g.datepicker.dpDiv);var w=Array.prototype.slice.call(arguments,1);return typeof d=="string"&&(d==="isDisabled"||d==="getDate"||d==="widget")?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):d==="option"&&arguments.length===2&&typeof arguments[1]=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):this.each(function(){typeof d=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this].concat(w)):g.datepicker._attachDatepicker(this,d)})},g.datepicker=new Ai,g.datepicker.initialized=!1,g.datepicker.uuid=new Date().getTime(),g.datepicker.version="1.13.2",g.datepicker,g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());/*!
 * jQuery UI Mouse 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Yi=!1;g(document).on("mouseup",function(){Yi=!1}),g.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.on("mousedown."+this.widgetName,function(w){return d._mouseDown(w)}).on("click."+this.widgetName,function(w){if(g.data(w.target,d.widgetName+".preventClickEvent")===!0)return g.removeData(w.target,d.widgetName+".preventClickEvent"),w.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!Yi){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var w=this,S=d.which===1,k=typeof this.options.cancel=="string"&&d.target.nodeName?g(d.target).closest(this.options.cancel).length:!1;return!S||k||!this._mouseCapture(d)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){w.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(g.data(d.target,this.widgetName+".preventClickEvent")===!0&&g.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(R){return w._mouseMove(R)},this._mouseUpDelegate=function(R){return w._mouseUp(R)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),Yi=!0,!0))}},_mouseMove:function(d){if(this._mouseMoved){if(g.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button)return this._mouseUp(d);if(!d.which){if(d.originalEvent.altKey||d.originalEvent.ctrlKey||d.originalEvent.metaKey||d.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(d)}}return(d.which||d.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==!1,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted)},_mouseUp:function(d){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&g.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Yi=!1,d.preventDefault()},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),g.ui.plugin={add:function(d,w,S){var k,R=g.ui[d].prototype;for(k in S)R.plugins[k]=R.plugins[k]||[],R.plugins[k].push([w,S[k]])},call:function(d,w,S,k){var R,W=d.plugins[w];if(W&&!(!k&&(!d.element[0].parentNode||d.element[0].parentNode.nodeType===11)))for(R=0;R<W.length;R++)d.options[W[R][0]]&&W[R][1].apply(d.element,S)}},g.ui.safeBlur=function(d){d&&d.nodeName.toLowerCase()!=="body"&&g(d).trigger("blur")};/*!
 * jQuery UI Draggable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.draggable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(d,w){this._super(d,w),d==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(d){var w=this.options;return this.helper||w.disabled||g(d.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(d),!this.handle)?!1:(this._blurActiveElement(d),this._blockFrames(w.iframeFix===!0?"iframe":w.iframeFix),!0)},_blockFrames:function(d){this.iframeBlocks=this.document.find(d).map(function(){var w=g(this);return g("<div>").css("position","absolute").appendTo(w.parent()).outerWidth(w.outerWidth()).outerHeight(w.outerHeight()).offset(w.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(d){var w=g.ui.safeActiveElement(this.document[0]),S=g(d.target);S.closest(w).length||g.ui.safeBlur(w)},_mouseStart:function(d){var w=this.options;return this.helper=this._createHelper(d),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),g.ui.ddmanager&&(g.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return g(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(d),this.originalPosition=this.position=this._generatePosition(d,!1),this.originalPageX=d.pageX,this.originalPageY=d.pageY,w.cursorAt&&this._adjustOffsetFromHelper(w.cursorAt),this._setContainment(),this._trigger("start",d)===!1?(this._clear(),!1):(this._cacheHelperProportions(),g.ui.ddmanager&&!w.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this._mouseDrag(d,!0),g.ui.ddmanager&&g.ui.ddmanager.dragStart(this,d),!0)},_refreshOffsets:function(d){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:d.pageX-this.offset.left,top:d.pageY-this.offset.top}},_mouseDrag:function(d,w){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d,!0),this.positionAbs=this._convertPositionTo("absolute"),!w){var S=this._uiHash();if(this._trigger("drag",d,S)===!1)return this._mouseUp(new g.Event("mouseup",d)),!1;this.position=S.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var w=this,S=!1;return g.ui.ddmanager&&!this.options.dropBehaviour&&(S=g.ui.ddmanager.drop(this,d)),this.dropped&&(S=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!S||this.options.revert==="valid"&&S||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,S)?g(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){w._trigger("stop",d)!==!1&&w._clear()}):this._trigger("stop",d)!==!1&&this._clear(),!1},_mouseUp:function(d){return this._unblockFrames(),g.ui.ddmanager&&g.ui.ddmanager.dragStop(this,d),this.handleElement.is(d.target)&&this.element.trigger("focus"),g.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new g.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(d){return this.options.handle?!!g(d.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(d){var w=this.options,S=typeof w.helper=="function",k=S?g(w.helper.apply(this.element[0],[d])):w.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return k.parents("body").length||k.appendTo(w.appendTo==="parent"?this.element[0].parentNode:w.appendTo),S&&k[0]===this.element[0]&&this._setPositionRelative(),k[0]!==this.element[0]&&!/(fixed|absolute)/.test(k.css("position"))&&k.css("position","absolute"),k},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_isRootNode:function(d){return/(html|body)/i.test(d.tagName)||d===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),w=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==w&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var d=this.element.position(),w=this._isRootNode(this.scrollParent[0]);return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+(w?0:this.scrollParent.scrollTop()),left:d.left-(parseInt(this.helper.css("left"),10)||0)+(w?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,S,k=this.options,R=this.document[0];if(this.relativeContainer=null,!k.containment){this.containment=null;return}if(k.containment==="window"){this.containment=[g(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,g(window).scrollLeft()+g(window).width()-this.helperProportions.width-this.margins.left,g(window).scrollTop()+(g(window).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment==="document"){this.containment=[0,0,g(R).width()-this.helperProportions.width-this.margins.left,(g(R).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment.constructor===Array){this.containment=k.containment;return}k.containment==="parent"&&(k.containment=this.helper[0].parentNode),w=g(k.containment),S=w[0],S&&(d=/(scroll|auto)/.test(w.css("overflow")),this.containment=[(parseInt(w.css("borderLeftWidth"),10)||0)+(parseInt(w.css("paddingLeft"),10)||0),(parseInt(w.css("borderTopWidth"),10)||0)+(parseInt(w.css("paddingTop"),10)||0),(d?Math.max(S.scrollWidth,S.offsetWidth):S.offsetWidth)-(parseInt(w.css("borderRightWidth"),10)||0)-(parseInt(w.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(S.scrollHeight,S.offsetHeight):S.offsetHeight)-(parseInt(w.css("borderBottomWidth"),10)||0)-(parseInt(w.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=w)},_convertPositionTo:function(d,w){w||(w=this.position);var S=d==="absolute"?1:-1,k=this._isRootNode(this.scrollParent[0]);return{top:w.top+this.offset.relative.top*S+this.offset.parent.top*S-(this.cssPosition==="fixed"?-this.offset.scroll.top:k?0:this.offset.scroll.top)*S,left:w.left+this.offset.relative.left*S+this.offset.parent.left*S-(this.cssPosition==="fixed"?-this.offset.scroll.left:k?0:this.offset.scroll.left)*S}},_generatePosition:function(d,w){var S,k,R,W,se=this.options,le=this._isRootNode(this.scrollParent[0]),fe=d.pageX,be=d.pageY;return(!le||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),w&&(this.containment&&(this.relativeContainer?(k=this.relativeContainer.offset(),S=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):S=this.containment,d.pageX-this.offset.click.left<S[0]&&(fe=S[0]+this.offset.click.left),d.pageY-this.offset.click.top<S[1]&&(be=S[1]+this.offset.click.top),d.pageX-this.offset.click.left>S[2]&&(fe=S[2]+this.offset.click.left),d.pageY-this.offset.click.top>S[3]&&(be=S[3]+this.offset.click.top)),se.grid&&(R=se.grid[1]?this.originalPageY+Math.round((be-this.originalPageY)/se.grid[1])*se.grid[1]:this.originalPageY,be=S?R-this.offset.click.top>=S[1]||R-this.offset.click.top>S[3]?R:R-this.offset.click.top>=S[1]?R-se.grid[1]:R+se.grid[1]:R,W=se.grid[0]?this.originalPageX+Math.round((fe-this.originalPageX)/se.grid[0])*se.grid[0]:this.originalPageX,fe=S?W-this.offset.click.left>=S[0]||W-this.offset.click.left>S[2]?W:W-this.offset.click.left>=S[0]?W-se.grid[0]:W+se.grid[0]:W),se.axis==="y"&&(fe=this.originalPageX),se.axis==="x"&&(be=this.originalPageY)),{top:be-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:le?0:this.offset.scroll.top),left:fe-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:le?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(d,w,S){return S=S||this._uiHash(),g.ui.plugin.call(this,d,[w,S,this],!0),/^(drag|start|stop)/.test(d)&&(this.positionAbs=this._convertPositionTo("absolute"),S.offset=this.positionAbs),g.Widget.prototype._trigger.call(this,d,w,S)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),g.ui.plugin.add("draggable","connectToSortable",{start:function(d,w,S){var k=g.extend({},w,{item:S.element});S.sortables=[],g(S.options.connectToSortable).each(function(){var R=g(this).sortable("instance");R&&!R.options.disabled&&(S.sortables.push(R),R.refreshPositions(),R._trigger("activate",d,k))})},stop:function(d,w,S){var k=g.extend({},w,{item:S.element});S.cancelHelperRemoval=!1,g.each(S.sortables,function(){var R=this;R.isOver?(R.isOver=0,S.cancelHelperRemoval=!0,R.cancelHelperRemoval=!1,R._storedCSS={position:R.placeholder.css("position"),top:R.placeholder.css("top"),left:R.placeholder.css("left")},R._mouseStop(d),R.options.helper=R.options._helper):(R.cancelHelperRemoval=!0,R._trigger("deactivate",d,k))})},drag:function(d,w,S){g.each(S.sortables,function(){var k=!1,R=this;R.positionAbs=S.positionAbs,R.helperProportions=S.helperProportions,R.offset.click=S.offset.click,R._intersectsWith(R.containerCache)&&(k=!0,g.each(S.sortables,function(){return this.positionAbs=S.positionAbs,this.helperProportions=S.helperProportions,this.offset.click=S.offset.click,this!==R&&this._intersectsWith(this.containerCache)&&g.contains(R.element[0],this.element[0])&&(k=!1),k})),k?(R.isOver||(R.isOver=1,S._parent=w.helper.parent(),R.currentItem=w.helper.appendTo(R.element).data("ui-sortable-item",!0),R.options._helper=R.options.helper,R.options.helper=function(){return w.helper[0]},d.target=R.currentItem[0],R._mouseCapture(d,!0),R._mouseStart(d,!0,!0),R.offset.click.top=S.offset.click.top,R.offset.click.left=S.offset.click.left,R.offset.parent.left-=S.offset.parent.left-R.offset.parent.left,R.offset.parent.top-=S.offset.parent.top-R.offset.parent.top,S._trigger("toSortable",d),S.dropped=R.element,g.each(S.sortables,function(){this.refreshPositions()}),S.currentItem=S.element,R.fromOutside=S),R.currentItem&&(R._mouseDrag(d),w.position=R.position)):R.isOver&&(R.isOver=0,R.cancelHelperRemoval=!0,R.options._revert=R.options.revert,R.options.revert=!1,R._trigger("out",d,R._uiHash(R)),R._mouseStop(d,!0),R.options.revert=R.options._revert,R.options.helper=R.options._helper,R.placeholder&&R.placeholder.remove(),w.helper.appendTo(S._parent),S._refreshOffsets(d),w.position=S._generatePosition(d,!0),S._trigger("fromSortable",d),S.dropped=!1,g.each(S.sortables,function(){this.refreshPositions()}))})}}),g.ui.plugin.add("draggable","cursor",{start:function(d,w,S){var k=g("body"),R=S.options;k.css("cursor")&&(R._cursor=k.css("cursor")),k.css("cursor",R.cursor)},stop:function(d,w,S){var k=S.options;k._cursor&&g("body").css("cursor",k._cursor)}}),g.ui.plugin.add("draggable","opacity",{start:function(d,w,S){var k=g(w.helper),R=S.options;k.css("opacity")&&(R._opacity=k.css("opacity")),k.css("opacity",R.opacity)},stop:function(d,w,S){var k=S.options;k._opacity&&g(w.helper).css("opacity",k._opacity)}}),g.ui.plugin.add("draggable","scroll",{start:function(d,w,S){S.scrollParentNotHidden||(S.scrollParentNotHidden=S.helper.scrollParent(!1)),S.scrollParentNotHidden[0]!==S.document[0]&&S.scrollParentNotHidden[0].tagName!=="HTML"&&(S.overflowOffset=S.scrollParentNotHidden.offset())},drag:function(d,w,S){var k=S.options,R=!1,W=S.scrollParentNotHidden[0],se=S.document[0];W!==se&&W.tagName!=="HTML"?((!k.axis||k.axis!=="x")&&(S.overflowOffset.top+W.offsetHeight-d.pageY<k.scrollSensitivity?W.scrollTop=R=W.scrollTop+k.scrollSpeed:d.pageY-S.overflowOffset.top<k.scrollSensitivity&&(W.scrollTop=R=W.scrollTop-k.scrollSpeed)),(!k.axis||k.axis!=="y")&&(S.overflowOffset.left+W.offsetWidth-d.pageX<k.scrollSensitivity?W.scrollLeft=R=W.scrollLeft+k.scrollSpeed:d.pageX-S.overflowOffset.left<k.scrollSensitivity&&(W.scrollLeft=R=W.scrollLeft-k.scrollSpeed))):((!k.axis||k.axis!=="x")&&(d.pageY-g(se).scrollTop()<k.scrollSensitivity?R=g(se).scrollTop(g(se).scrollTop()-k.scrollSpeed):g(window).height()-(d.pageY-g(se).scrollTop())<k.scrollSensitivity&&(R=g(se).scrollTop(g(se).scrollTop()+k.scrollSpeed))),(!k.axis||k.axis!=="y")&&(d.pageX-g(se).scrollLeft()<k.scrollSensitivity?R=g(se).scrollLeft(g(se).scrollLeft()-k.scrollSpeed):g(window).width()-(d.pageX-g(se).scrollLeft())<k.scrollSensitivity&&(R=g(se).scrollLeft(g(se).scrollLeft()+k.scrollSpeed)))),R!==!1&&g.ui.ddmanager&&!k.dropBehaviour&&g.ui.ddmanager.prepareOffsets(S,d)}}),g.ui.plugin.add("draggable","snap",{start:function(d,w,S){var k=S.options;S.snapElements=[],g(k.snap.constructor!==String?k.snap.items||":data(ui-draggable)":k.snap).each(function(){var R=g(this),W=R.offset();this!==S.element[0]&&S.snapElements.push({item:this,width:R.outerWidth(),height:R.outerHeight(),top:W.top,left:W.left})})},drag:function(d,w,S){var k,R,W,se,le,fe,be,Te,Ke,Me,me=S.options,De=me.snapTolerance,Xe=w.offset.left,ct=Xe+S.helperProportions.width,gt=w.offset.top,Dt=gt+S.helperProportions.height;for(Ke=S.snapElements.length-1;Ke>=0;Ke--){if(le=S.snapElements[Ke].left-S.margins.left,fe=le+S.snapElements[Ke].width,be=S.snapElements[Ke].top-S.margins.top,Te=be+S.snapElements[Ke].height,ct<le-De||Xe>fe+De||Dt<be-De||gt>Te+De||!g.contains(S.snapElements[Ke].item.ownerDocument,S.snapElements[Ke].item)){S.snapElements[Ke].snapping&&S.options.snap.release&&S.options.snap.release.call(S.element,d,g.extend(S._uiHash(),{snapItem:S.snapElements[Ke].item})),S.snapElements[Ke].snapping=!1;continue}me.snapMode!=="inner"&&(k=Math.abs(be-Dt)<=De,R=Math.abs(Te-gt)<=De,W=Math.abs(le-ct)<=De,se=Math.abs(fe-Xe)<=De,k&&(w.position.top=S._convertPositionTo("relative",{top:be-S.helperProportions.height,left:0}).top),R&&(w.position.top=S._convertPositionTo("relative",{top:Te,left:0}).top),W&&(w.position.left=S._convertPositionTo("relative",{top:0,left:le-S.helperProportions.width}).left),se&&(w.position.left=S._convertPositionTo("relative",{top:0,left:fe}).left)),Me=k||R||W||se,me.snapMode!=="outer"&&(k=Math.abs(be-gt)<=De,R=Math.abs(Te-Dt)<=De,W=Math.abs(le-Xe)<=De,se=Math.abs(fe-ct)<=De,k&&(w.position.top=S._convertPositionTo("relative",{top:be,left:0}).top),R&&(w.position.top=S._convertPositionTo("relative",{top:Te-S.helperProportions.height,left:0}).top),W&&(w.position.left=S._convertPositionTo("relative",{top:0,left:le}).left),se&&(w.position.left=S._convertPositionTo("relative",{top:0,left:fe-S.helperProportions.width}).left)),!S.snapElements[Ke].snapping&&(k||R||W||se||Me)&&S.options.snap.snap&&S.options.snap.snap.call(S.element,d,g.extend(S._uiHash(),{snapItem:S.snapElements[Ke].item})),S.snapElements[Ke].snapping=k||R||W||se||Me}}}),g.ui.plugin.add("draggable","stack",{start:function(d,w,S){var k,R=S.options,W=g.makeArray(g(R.stack)).sort(function(se,le){return(parseInt(g(se).css("zIndex"),10)||0)-(parseInt(g(le).css("zIndex"),10)||0)});W.length&&(k=parseInt(g(W[0]).css("zIndex"),10)||0,g(W).each(function(se){g(this).css("zIndex",k+se)}),this.css("zIndex",k+W.length))}}),g.ui.plugin.add("draggable","zIndex",{start:function(d,w,S){var k=g(w.helper),R=S.options;k.css("zIndex")&&(R._zIndex=k.css("zIndex")),k.css("zIndex",R.zIndex)},stop:function(d,w,S){var k=S.options;k._zIndex&&g(w.helper).css("zIndex",k._zIndex)}}),g.ui.draggable;/*!
 * jQuery UI Resizable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.resizable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(d){return parseFloat(d)||0},_isNumber:function(d){return!isNaN(parseFloat(d))},_hasScroll:function(d,w){if(g(d).css("overflow")==="hidden")return!1;var S=w&&w==="left"?"scrollLeft":"scrollTop",k=!1;if(d[S]>0)return!0;try{d[S]=1,k=d[S]>0,d[S]=0}catch{}return k},_create:function(){var d,w=this.options,S=this;this._addClass("ui-resizable"),g.extend(this,{_aspectRatio:!!w.aspectRatio,aspectRatio:w.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:w.helper||w.ghost||w.animate?w.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(g("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,d={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(d),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(d),this._proportionallyResize()),this._setupHandles(),w.autoHide&&g(this.element).on("mouseenter",function(){w.disabled||(S._removeClass("ui-resizable-autohide"),S._handles.show())}).on("mouseleave",function(){w.disabled||S.resizing||(S._addClass("ui-resizable-autohide"),S._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var d,w=function(S){g(S).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(w(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),w(this.originalElement),this},_setOption:function(d,w){switch(this._super(d,w),d){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!w;break}},_setupHandles:function(){var d=this.options,w,S,k,R,W,se=this;if(this.handles=d.handles||(g(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=g(),this._addedHandles=g(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),k=this.handles.split(","),this.handles={},S=0;S<k.length;S++)w=String.prototype.trim.call(k[S]),R="ui-resizable-"+w,W=g("<div>"),this._addClass(W,"ui-resizable-handle "+R),W.css({zIndex:d.zIndex}),this.handles[w]=".ui-resizable-"+w,this.element.children(this.handles[w]).length||(this.element.append(W),this._addedHandles=this._addedHandles.add(W));this._renderAxis=function(le){var fe,be,Te,Ke;le=le||this.element;for(fe in this.handles)this.handles[fe].constructor===String?this.handles[fe]=this.element.children(this.handles[fe]).first().show():(this.handles[fe].jquery||this.handles[fe].nodeType)&&(this.handles[fe]=g(this.handles[fe]),this._on(this.handles[fe],{mousedown:se._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(be=g(this.handles[fe],this.element),Ke=/sw|ne|nw|se|n|s/.test(fe)?be.outerHeight():be.outerWidth(),Te=["padding",/ne|nw|n/.test(fe)?"Top":/se|sw|s/.test(fe)?"Bottom":/^e$/.test(fe)?"Right":"Left"].join(""),le.css(Te,Ke),this._proportionallyResize()),this._handles=this._handles.add(this.handles[fe])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){se.resizing||(this.className&&(W=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),se.axis=W&&W[1]?W[1]:"se")}),d.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(d){var w,S,k=!1;for(w in this.handles)S=g(this.handles[w])[0],(S===d.target||g.contains(S,d.target))&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(d){var w,S,k,R=this.options,W=this.element;return this.resizing=!0,this._renderProxy(),w=this._num(this.helper.css("left")),S=this._num(this.helper.css("top")),R.containment&&(w+=g(R.containment).scrollLeft()||0,S+=g(R.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:w,top:S},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:W.width(),height:W.height()},this.originalSize=this._helper?{width:W.outerWidth(),height:W.outerHeight()}:{width:W.width(),height:W.height()},this.sizeDiff={width:W.outerWidth()-W.width(),height:W.outerHeight()-W.height()},this.originalPosition={left:w,top:S},this.originalMousePosition={left:d.pageX,top:d.pageY},this.aspectRatio=typeof R.aspectRatio=="number"?R.aspectRatio:this.originalSize.width/this.originalSize.height||1,k=g(".ui-resizable-"+this.axis).css("cursor"),g("body").css("cursor",k==="auto"?this.axis+"-resize":k),this._addClass("ui-resizable-resizing"),this._propagate("start",d),!0},_mouseDrag:function(d){var w,S,k=this.originalMousePosition,R=this.axis,W=d.pageX-k.left||0,se=d.pageY-k.top||0,le=this._change[R];return this._updatePrevProperties(),le&&(w=le.apply(this,[d,W,se]),this._updateVirtualBoundaries(d.shiftKey),(this._aspectRatio||d.shiftKey)&&(w=this._updateRatio(w,d)),w=this._respectSize(w,d),this._updateCache(w),this._propagate("resize",d),S=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),g.isEmptyObject(S)||(this._updatePrevProperties(),this._trigger("resize",d,this.ui()),this._applyChanges())),!1},_mouseStop:function(d){this.resizing=!1;var w,S,k,R,W,se,le,fe=this.options,be=this;return this._helper&&(w=this._proportionallyResizeElements,S=w.length&&/textarea/i.test(w[0].nodeName),k=S&&this._hasScroll(w[0],"left")?0:be.sizeDiff.height,R=S?0:be.sizeDiff.width,W={width:be.helper.width()-R,height:be.helper.height()-k},se=parseFloat(be.element.css("left"))+(be.position.left-be.originalPosition.left)||null,le=parseFloat(be.element.css("top"))+(be.position.top-be.originalPosition.top)||null,fe.animate||this.element.css(g.extend(W,{top:le,left:se})),be.helper.height(be.size.height),be.helper.width(be.size.width),this._helper&&!fe.animate&&this._proportionallyResize()),g("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",d),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var d={};return this.position.top!==this.prevPosition.top&&(d.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(d.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(d.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(d.height=this.size.height+"px"),this.helper.css(d),d},_updateVirtualBoundaries:function(d){var w,S,k,R,W,se=this.options;W={minWidth:this._isNumber(se.minWidth)?se.minWidth:0,maxWidth:this._isNumber(se.maxWidth)?se.maxWidth:1/0,minHeight:this._isNumber(se.minHeight)?se.minHeight:0,maxHeight:this._isNumber(se.maxHeight)?se.maxHeight:1/0},(this._aspectRatio||d)&&(w=W.minHeight*this.aspectRatio,k=W.minWidth/this.aspectRatio,S=W.maxHeight*this.aspectRatio,R=W.maxWidth/this.aspectRatio,w>W.minWidth&&(W.minWidth=w),k>W.minHeight&&(W.minHeight=k),S<W.maxWidth&&(W.maxWidth=S),R<W.maxHeight&&(W.maxHeight=R)),this._vBoundaries=W},_updateCache:function(d){this.offset=this.helper.offset(),this._isNumber(d.left)&&(this.position.left=d.left),this._isNumber(d.top)&&(this.position.top=d.top),this._isNumber(d.height)&&(this.size.height=d.height),this._isNumber(d.width)&&(this.size.width=d.width)},_updateRatio:function(d){var w=this.position,S=this.size,k=this.axis;return this._isNumber(d.height)?d.width=d.height*this.aspectRatio:this._isNumber(d.width)&&(d.height=d.width/this.aspectRatio),k==="sw"&&(d.left=w.left+(S.width-d.width),d.top=null),k==="nw"&&(d.top=w.top+(S.height-d.height),d.left=w.left+(S.width-d.width)),d},_respectSize:function(d){var w=this._vBoundaries,S=this.axis,k=this._isNumber(d.width)&&w.maxWidth&&w.maxWidth<d.width,R=this._isNumber(d.height)&&w.maxHeight&&w.maxHeight<d.height,W=this._isNumber(d.width)&&w.minWidth&&w.minWidth>d.width,se=this._isNumber(d.height)&&w.minHeight&&w.minHeight>d.height,le=this.originalPosition.left+this.originalSize.width,fe=this.originalPosition.top+this.originalSize.height,be=/sw|nw|w/.test(S),Te=/nw|ne|n/.test(S);return W&&(d.width=w.minWidth),se&&(d.height=w.minHeight),k&&(d.width=w.maxWidth),R&&(d.height=w.maxHeight),W&&be&&(d.left=le-w.minWidth),k&&be&&(d.left=le-w.maxWidth),se&&Te&&(d.top=fe-w.minHeight),R&&Te&&(d.top=fe-w.maxHeight),!d.width&&!d.height&&!d.left&&d.top?d.top=null:!d.width&&!d.height&&!d.top&&d.left&&(d.left=null),d},_getPaddingPlusBorderDimensions:function(d){for(var w=0,S=[],k=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],R=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];w<4;w++)S[w]=parseFloat(k[w])||0,S[w]+=parseFloat(R[w])||0;return{height:S[0]+S[2],width:S[1]+S[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d,w=0,S=this.helper||this.element;w<this._proportionallyResizeElements.length;w++)d=this._proportionallyResizeElements[w],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(d)),d.css({height:S.height()-this.outerDimensions.height||0,width:S.width()-this.outerDimensions.width||0})},_renderProxy:function(){var d=this.element,w=this.options;this.elementOffset=d.offset(),this._helper?(this.helper=this.helper||g("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++w.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(d,w){return{width:this.originalSize.width+w}},w:function(d,w){var S=this.originalSize,k=this.originalPosition;return{left:k.left+w,width:S.width-w}},n:function(d,w,S){var k=this.originalSize,R=this.originalPosition;return{top:R.top+S,height:k.height-S}},s:function(d,w,S){return{height:this.originalSize.height+S}},se:function(d,w,S){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,w,S]))},sw:function(d,w,S){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,w,S]))},ne:function(d,w,S){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,w,S]))},nw:function(d,w,S){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,w,S]))}},_propagate:function(d,w){g.ui.plugin.call(this,d,[w,this.ui()]),d!=="resize"&&this._trigger(d,w,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),g.ui.plugin.add("resizable","animate",{stop:function(d){var w=g(this).resizable("instance"),S=w.options,k=w._proportionallyResizeElements,R=k.length&&/textarea/i.test(k[0].nodeName),W=R&&w._hasScroll(k[0],"left")?0:w.sizeDiff.height,se=R?0:w.sizeDiff.width,le={width:w.size.width-se,height:w.size.height-W},fe=parseFloat(w.element.css("left"))+(w.position.left-w.originalPosition.left)||null,be=parseFloat(w.element.css("top"))+(w.position.top-w.originalPosition.top)||null;w.element.animate(g.extend(le,be&&fe?{top:be,left:fe}:{}),{duration:S.animateDuration,easing:S.animateEasing,step:function(){var Te={width:parseFloat(w.element.css("width")),height:parseFloat(w.element.css("height")),top:parseFloat(w.element.css("top")),left:parseFloat(w.element.css("left"))};k&&k.length&&g(k[0]).css({width:Te.width,height:Te.height}),w._updateCache(Te),w._propagate("resize",d)}})}}),g.ui.plugin.add("resizable","containment",{start:function(){var d,w,S,k,R,W,se,le=g(this).resizable("instance"),fe=le.options,be=le.element,Te=fe.containment,Ke=Te instanceof g?Te.get(0):/parent/.test(Te)?be.parent().get(0):Te;Ke&&(le.containerElement=g(Ke),/document/.test(Te)||Te===document?(le.containerOffset={left:0,top:0},le.containerPosition={left:0,top:0},le.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||document.body.parentNode.scrollHeight}):(d=g(Ke),w=[],g(["Top","Right","Left","Bottom"]).each(function(Me,me){w[Me]=le._num(d.css("padding"+me))}),le.containerOffset=d.offset(),le.containerPosition=d.position(),le.containerSize={height:d.innerHeight()-w[3],width:d.innerWidth()-w[1]},S=le.containerOffset,k=le.containerSize.height,R=le.containerSize.width,W=le._hasScroll(Ke,"left")?Ke.scrollWidth:R,se=le._hasScroll(Ke)?Ke.scrollHeight:k,le.parentData={element:Ke,left:S.left,top:S.top,width:W,height:se}))},resize:function(d){var w,S,k,R,W=g(this).resizable("instance"),se=W.options,le=W.containerOffset,fe=W.position,be=W._aspectRatio||d.shiftKey,Te={top:0,left:0},Ke=W.containerElement,Me=!0;Ke[0]!==document&&/static/.test(Ke.css("position"))&&(Te=le),fe.left<(W._helper?le.left:0)&&(W.size.width=W.size.width+(W._helper?W.position.left-le.left:W.position.left-Te.left),be&&(W.size.height=W.size.width/W.aspectRatio,Me=!1),W.position.left=se.helper?le.left:0),fe.top<(W._helper?le.top:0)&&(W.size.height=W.size.height+(W._helper?W.position.top-le.top:W.position.top),be&&(W.size.width=W.size.height*W.aspectRatio,Me=!1),W.position.top=W._helper?le.top:0),k=W.containerElement.get(0)===W.element.parent().get(0),R=/relative|absolute/.test(W.containerElement.css("position")),k&&R?(W.offset.left=W.parentData.left+W.position.left,W.offset.top=W.parentData.top+W.position.top):(W.offset.left=W.element.offset().left,W.offset.top=W.element.offset().top),w=Math.abs(W.sizeDiff.width+(W._helper?W.offset.left-Te.left:W.offset.left-le.left)),S=Math.abs(W.sizeDiff.height+(W._helper?W.offset.top-Te.top:W.offset.top-le.top)),w+W.size.width>=W.parentData.width&&(W.size.width=W.parentData.width-w,be&&(W.size.height=W.size.width/W.aspectRatio,Me=!1)),S+W.size.height>=W.parentData.height&&(W.size.height=W.parentData.height-S,be&&(W.size.width=W.size.height*W.aspectRatio,Me=!1)),Me||(W.position.left=W.prevPosition.left,W.position.top=W.prevPosition.top,W.size.width=W.prevSize.width,W.size.height=W.prevSize.height)},stop:function(){var d=g(this).resizable("instance"),w=d.options,S=d.containerOffset,k=d.containerPosition,R=d.containerElement,W=g(d.helper),se=W.offset(),le=W.outerWidth()-d.sizeDiff.width,fe=W.outerHeight()-d.sizeDiff.height;d._helper&&!w.animate&&/relative/.test(R.css("position"))&&g(this).css({left:se.left-k.left-S.left,width:le,height:fe}),d._helper&&!w.animate&&/static/.test(R.css("position"))&&g(this).css({left:se.left-k.left-S.left,width:le,height:fe})}}),g.ui.plugin.add("resizable","alsoResize",{start:function(){var d=g(this).resizable("instance"),w=d.options;g(w.alsoResize).each(function(){var S=g(this);S.data("ui-resizable-alsoresize",{width:parseFloat(S.width()),height:parseFloat(S.height()),left:parseFloat(S.css("left")),top:parseFloat(S.css("top"))})})},resize:function(d,w){var S=g(this).resizable("instance"),k=S.options,R=S.originalSize,W=S.originalPosition,se={height:S.size.height-R.height||0,width:S.size.width-R.width||0,top:S.position.top-W.top||0,left:S.position.left-W.left||0};g(k.alsoResize).each(function(){var le=g(this),fe=g(this).data("ui-resizable-alsoresize"),be={},Te=le.parents(w.originalElement[0]).length?["width","height"]:["width","height","top","left"];g.each(Te,function(Ke,Me){var me=(fe[Me]||0)+(se[Me]||0);me&&me>=0&&(be[Me]=me||null)}),le.css(be)})},stop:function(){g(this).removeData("ui-resizable-alsoresize")}}),g.ui.plugin.add("resizable","ghost",{start:function(){var d=g(this).resizable("instance"),w=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:w.height,width:w.width,margin:0,left:0,top:0}),d._addClass(d.ghost,"ui-resizable-ghost"),g.uiBackCompat!==!1&&typeof d.options.ghost=="string"&&d.ghost.addClass(this.options.ghost),d.ghost.appendTo(d.helper)},resize:function(){var d=g(this).resizable("instance");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=g(this).resizable("instance");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),g.ui.plugin.add("resizable","grid",{resize:function(){var d,w=g(this).resizable("instance"),S=w.options,k=w.size,R=w.originalSize,W=w.originalPosition,se=w.axis,le=typeof S.grid=="number"?[S.grid,S.grid]:S.grid,fe=le[0]||1,be=le[1]||1,Te=Math.round((k.width-R.width)/fe)*fe,Ke=Math.round((k.height-R.height)/be)*be,Me=R.width+Te,me=R.height+Ke,De=S.maxWidth&&S.maxWidth<Me,Xe=S.maxHeight&&S.maxHeight<me,ct=S.minWidth&&S.minWidth>Me,gt=S.minHeight&&S.minHeight>me;S.grid=le,ct&&(Me+=fe),gt&&(me+=be),De&&(Me-=fe),Xe&&(me-=be),/^(se|s|e)$/.test(se)?(w.size.width=Me,w.size.height=me):/^(ne)$/.test(se)?(w.size.width=Me,w.size.height=me,w.position.top=W.top-Ke):/^(sw)$/.test(se)?(w.size.width=Me,w.size.height=me,w.position.left=W.left-Te):((me-be<=0||Me-fe<=0)&&(d=w._getPaddingPlusBorderDimensions(this)),me-be>0?(w.size.height=me,w.position.top=W.top-Ke):(me=be-d.height,w.size.height=me,w.position.top=W.top+R.height-me),Me-fe>0?(w.size.width=Me,w.position.left=W.left-Te):(Me=fe-d.width,w.size.width=Me,w.position.left=W.left+R.width-Me))}}),g.ui.resizable;/*!
 * jQuery UI Dialog 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var w=g(this).css(d).offset().top;w<0&&g(this).css("top",d.top-w)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&g.fn.draggable&&this._makeDraggable(),this.options.resizable&&g.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?g(d):this.document.find(d||"body").eq(0)},_destroy:function(){var d,w=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),d=w.parent.children().eq(w.index),d.length&&d[0]!==this.element[0]?d.before(this.element):w.parent.append(this.element)},widget:function(){return this.uiDialog},disable:g.noop,enable:g.noop,close:function(d){var w=this;!this._isOpen||this._trigger("beforeClose",d)===!1||(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||g.ui.safeBlur(g.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){w._trigger("close",d)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(d,w){var S=!1,k=this.uiDialog.siblings(".ui-front:visible").map(function(){return+g(this).css("z-index")}).get(),R=Math.max.apply(null,k);return R>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",R+1),S=!0),S&&!w&&this._trigger("focus",d),S},open:function(){var d=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=g(g.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable(),d._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var d=this._focusedElement;d||(d=this.element.find("[autofocus]")),d.length||(d=this.element.find(":tabbable")),d.length||(d=this.uiDialogButtonPane.find(":tabbable")),d.length||(d=this.uiDialogTitlebarClose.filter(":tabbable")),d.length||(d=this.uiDialog),d.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var d=g.ui.safeActiveElement(this.document[0]),w=this.uiDialog[0]===d||g.contains(this.uiDialog[0],d);w||this._focusTabbable()},_keepFocus:function(d){d.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=g("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(d){if(this.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===g.ui.keyCode.ESCAPE){d.preventDefault(),this.close(d);return}if(!(d.keyCode!==g.ui.keyCode.TAB||d.isDefaultPrevented())){var w=this.uiDialog.find(":tabbable"),S=w.first(),k=w.last();(d.target===k[0]||d.target===this.uiDialog[0])&&!d.shiftKey?(this._delay(function(){S.trigger("focus")}),d.preventDefault()):(d.target===S[0]||d.target===this.uiDialog[0])&&d.shiftKey&&(this._delay(function(){k.trigger("focus")}),d.preventDefault())}},mousedown:function(d){this._moveToTop(d)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=g("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(w){g(w.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=g("<button type='button'></button>").button({label:g("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(w){w.preventDefault(),this.close(w)}}),d=g("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(d,"ui-dialog-title"),this._title(d),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(d){this.options.title?d.text(this.options.title):d.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=g("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=g("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var d=this,w=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),g.isEmptyObject(w)||Array.isArray(w)&&!w.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}g.each(w,function(S,k){var R,W;k=typeof k=="function"?{click:k,text:S}:k,k=g.extend({type:"button"},k),R=k.click,W={icon:k.icon,iconPosition:k.iconPosition,showLabel:k.showLabel,icons:k.icons,text:k.text},delete k.click,delete k.icon,delete k.iconPosition,delete k.showLabel,delete k.icons,typeof k.text=="boolean"&&delete k.text,g("<button></button>",k).button(W).appendTo(d.uiButtonSet).on("click",function(){R.apply(d.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var d=this,w=this.options;function S(k){return{position:k.position,offset:k.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,R){d._addClass(g(this),"ui-dialog-dragging"),d._blockFrames(),d._trigger("dragStart",k,S(R))},drag:function(k,R){d._trigger("drag",k,S(R))},stop:function(k,R){var W=R.offset.left-d.document.scrollLeft(),se=R.offset.top-d.document.scrollTop();w.position={my:"left top",at:"left"+(W>=0?"+":"")+W+" top"+(se>=0?"+":"")+se,of:d.window},d._removeClass(g(this),"ui-dialog-dragging"),d._unblockFrames(),d._trigger("dragStop",k,S(R))}})},_makeResizable:function(){var d=this,w=this.options,S=w.resizable,k=this.uiDialog.css("position"),R=typeof S=="string"?S:"n,e,s,w,se,sw,ne,nw";function W(se){return{originalPosition:se.originalPosition,originalSize:se.originalSize,position:se.position,size:se.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:w.maxWidth,maxHeight:w.maxHeight,minWidth:w.minWidth,minHeight:this._minHeight(),handles:R,start:function(se,le){d._addClass(g(this),"ui-dialog-resizing"),d._blockFrames(),d._trigger("resizeStart",se,W(le))},resize:function(se,le){d._trigger("resize",se,W(le))},stop:function(se,le){var fe=d.uiDialog.offset(),be=fe.left-d.document.scrollLeft(),Te=fe.top-d.document.scrollTop();w.height=d.uiDialog.height(),w.width=d.uiDialog.width(),w.position={my:"left top",at:"left"+(be>=0?"+":"")+be+" top"+(Te>=0?"+":"")+Te,of:d.window},d._removeClass(g(this),"ui-dialog-resizing"),d._unblockFrames(),d._trigger("resizeStop",se,W(le))}}).css("position",k)},_trackFocus:function(){this._on(this.widget(),{focusin:function(d){this._makeFocusTarget(),this._focusedElement=g(d.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var d=this._trackingInstances(),w=g.inArray(this,d);w!==-1&&d.splice(w,1)},_trackingInstances:function(){var d=this.document.data("ui-dialog-instances");return d||(d=[],this.document.data("ui-dialog-instances",d)),d},_minHeight:function(){var d=this.options;return d.height==="auto"?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(){var d=this.uiDialog.is(":visible");d||this.uiDialog.show(),this.uiDialog.position(this.options.position),d||this.uiDialog.hide()},_setOptions:function(d){var w=this,S=!1,k={};g.each(d,function(R,W){w._setOption(R,W),R in w.sizeRelatedOptions&&(S=!0),R in w.resizableRelatedOptions&&(k[R]=W)}),S&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",k)},_setOption:function(d,w){var S,k,R=this.uiDialog;d!=="disabled"&&(this._super(d,w),d==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),d==="buttons"&&this._createButtons(),d==="closeText"&&this.uiDialogTitlebarClose.button({label:g("<a>").text(""+this.options.closeText).html()}),d==="draggable"&&(S=R.is(":data(ui-draggable)"),S&&!w&&R.draggable("destroy"),!S&&w&&this._makeDraggable()),d==="position"&&this._position(),d==="resizable"&&(k=R.is(":data(ui-resizable)"),k&&!w&&R.resizable("destroy"),k&&typeof w=="string"&&R.resizable("option","handles",w),!k&&w!==!1&&this._makeResizable()),d==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var d,w,S,k=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),k.minWidth>k.width&&(k.width=k.minWidth),d=this.uiDialog.css({height:"auto",width:k.width}).outerHeight(),w=Math.max(0,k.minHeight-d),S=typeof k.maxHeight=="number"?Math.max(0,k.maxHeight-d):"none",k.height==="auto"?this.element.css({minHeight:w,maxHeight:S,height:"auto"}):this.element.height(Math.max(0,k.height-d)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=g(this);return g("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return g(d.target).closest(".ui-dialog").length?!0:!!g(d.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var d=g.fn.jquery.substring(0,4),w=!0;this._delay(function(){w=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",(function(S){if(!w){var k=this._trackingInstances()[0];k._allowInteraction(S)||(S.preventDefault(),k._focusTabbable(),(d==="3.4."||d==="3.5.")&&k._delay(k._restoreTabbableFocus))}}).bind(this)),this.overlay=g("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var d=this.document.data("ui-dialog-overlays")-1;d?this.document.data("ui-dialog-overlays",d):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),g.uiBackCompat!==!1&&g.widget("ui.dialog",g.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(d,w){d==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(w),this._superApply(arguments)}}),g.ui.dialog;/*!
 * jQuery UI Droppable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var d,w=this.options,S=w.accept;this.isover=!1,this.isout=!0,this.accept=typeof S=="function"?S:function(k){return k.is(S)},this.proportions=function(){if(arguments.length)d=arguments[0];else return d||(d={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(w.scope),w.addClasses&&this._addClass("ui-droppable")},_addToManager:function(d){g.ui.ddmanager.droppables[d]=g.ui.ddmanager.droppables[d]||[],g.ui.ddmanager.droppables[d].push(this)},_splice:function(d){for(var w=0;w<d.length;w++)d[w]===this&&d.splice(w,1)},_destroy:function(){var d=g.ui.ddmanager.droppables[this.options.scope];this._splice(d)},_setOption:function(d,w){if(d==="accept")this.accept=typeof w=="function"?w:function(k){return k.is(w)};else if(d==="scope"){var S=g.ui.ddmanager.droppables[this.options.scope];this._splice(S),this._addToManager(w)}this._super(d,w)},_activate:function(d){var w=g.ui.ddmanager.current;this._addActiveClass(),w&&this._trigger("activate",d,this.ui(w))},_deactivate:function(d){var w=g.ui.ddmanager.current;this._removeActiveClass(),w&&this._trigger("deactivate",d,this.ui(w))},_over:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._addHoverClass(),this._trigger("over",d,this.ui(w)))},_out:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._removeHoverClass(),this._trigger("out",d,this.ui(w)))},_drop:function(d,w){var S=w||g.ui.ddmanager.current,k=!1;return!S||(S.currentItem||S.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var R=g(this).droppable("instance");if(R.options.greedy&&!R.options.disabled&&R.options.scope===S.options.scope&&R.accept.call(R.element[0],S.currentItem||S.element)&&g.ui.intersect(S,g.extend(R,{offset:R.element.offset()}),R.options.tolerance,d))return k=!0,!1}),k)?!1:this.accept.call(this.element[0],S.currentItem||S.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",d,this.ui(S)),this.element):!1},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),g.ui.intersect=function(){function d(w,S,k){return w>=S&&w<S+k}return function(w,S,k,R){if(!S.offset)return!1;var W=(w.positionAbs||w.position.absolute).left+w.margins.left,se=(w.positionAbs||w.position.absolute).top+w.margins.top,le=W+w.helperProportions.width,fe=se+w.helperProportions.height,be=S.offset.left,Te=S.offset.top,Ke=be+S.proportions().width,Me=Te+S.proportions().height;switch(k){case"fit":return be<=W&&le<=Ke&&Te<=se&&fe<=Me;case"intersect":return be<W+w.helperProportions.width/2&&le-w.helperProportions.width/2<Ke&&Te<se+w.helperProportions.height/2&&fe-w.helperProportions.height/2<Me;case"pointer":return d(R.pageY,Te,S.proportions().height)&&d(R.pageX,be,S.proportions().width);case"touch":return(se>=Te&&se<=Me||fe>=Te&&fe<=Me||se<Te&&fe>Me)&&(W>=be&&W<=Ke||le>=be&&le<=Ke||W<be&&le>Ke);default:return!1}}}(),g.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(d,w){var S,k,R=g.ui.ddmanager.droppables[d.options.scope]||[],W=w?w.type:null,se=(d.currentItem||d.element).find(":data(ui-droppable)").addBack();e:for(S=0;S<R.length;S++)if(!(R[S].options.disabled||d&&!R[S].accept.call(R[S].element[0],d.currentItem||d.element))){for(k=0;k<se.length;k++)if(se[k]===R[S].element[0]){R[S].proportions().height=0;continue e}R[S].visible=R[S].element.css("display")!=="none",R[S].visible&&(W==="mousedown"&&R[S]._activate.call(R[S],w),R[S].offset=R[S].element.offset(),R[S].proportions({width:R[S].element[0].offsetWidth,height:R[S].element[0].offsetHeight}))}},drop:function(d,w){var S=!1;return g.each((g.ui.ddmanager.droppables[d.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&g.ui.intersect(d,this,this.options.tolerance,w)&&(S=this._drop.call(this,w)||S),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,w)))}),S},dragStart:function(d,w){d.element.parentsUntil("body").on("scroll.droppable",function(){d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)})},drag:function(d,w){d.options.refreshPositions&&g.ui.ddmanager.prepareOffsets(d,w),g.each(g.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var S,k,R,W=g.ui.intersect(d,this,this.options.tolerance,w),se=!W&&this.isover?"isout":W&&!this.isover?"isover":null;se&&(this.options.greedy&&(k=this.options.scope,R=this.element.parents(":data(ui-droppable)").filter(function(){return g(this).droppable("instance").options.scope===k}),R.length&&(S=g(R[0]).droppable("instance"),S.greedyChild=se==="isover")),S&&se==="isover"&&(S.isover=!1,S.isout=!0,S._out.call(S,w)),this[se]=!0,this[se==="isout"?"isover":"isout"]=!1,this[se==="isover"?"_over":"_out"].call(this,w),S&&se==="isout"&&(S.isout=!1,S.isover=!0,S._over.call(S,w)))}})},dragStop:function(d,w){d.element.parentsUntil("body").off("scroll.droppable"),d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)}},g.uiBackCompat!==!1&&g.widget("ui.droppable",g.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),g.ui.droppable;/*!
 * jQuery UI Progressbar 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=g("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(d){if(d===void 0)return this.options.value;this.options.value=this._constrainedValue(d),this._refreshValue()},_constrainedValue:function(d){return d===void 0&&(d=this.options.value),this.indeterminate=d===!1,typeof d!="number"&&(d=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,d))},_setOptions:function(d){var w=d.value;delete d.value,this._super(d),this.options.value=this._constrainedValue(w),this._refreshValue()},_setOption:function(d,w){d==="max"&&(w=Math.max(this.min,w)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,w=this._percentage();this.valueDiv.toggle(this.indeterminate||d>this.min).width(w.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,d===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=g("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":d}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),d===this.options.max&&this._trigger("complete")}});/*!
 * jQuery UI Selectable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectable",g.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){d.elementPos=g(d.element[0]).offset(),d.selectees=g(d.options.filter,d.element[0]),d._addClass(d.selectees,"ui-selectee"),d.selectees.each(function(){var w=g(this),S=w.offset(),k={left:S.left-d.elementPos.left,top:S.top-d.elementPos.top};g.data(this,"selectable-item",{element:this,$element:w,left:k.left,top:k.top,right:k.left+w.outerWidth(),bottom:k.top+w.outerHeight(),startselected:!1,selected:w.hasClass("ui-selected"),selecting:w.hasClass("ui-selecting"),unselecting:w.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=g("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(d){var w=this,S=this.options;this.opos=[d.pageX,d.pageY],this.elementPos=g(this.element[0]).offset(),!this.options.disabled&&(this.selectees=g(S.filter,this.element[0]),this._trigger("start",d),g(S.appendTo).append(this.helper),this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0}),S.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var k=g.data(this,"selectable-item");k.startselected=!0,!d.metaKey&&!d.ctrlKey&&(w._removeClass(k.$element,"ui-selected"),k.selected=!1,w._addClass(k.$element,"ui-unselecting"),k.unselecting=!0,w._trigger("unselecting",d,{unselecting:k.element}))}),g(d.target).parents().addBack().each(function(){var k,R=g.data(this,"selectable-item");if(R)return k=!d.metaKey&&!d.ctrlKey||!R.$element.hasClass("ui-selected"),w._removeClass(R.$element,k?"ui-unselecting":"ui-selected")._addClass(R.$element,k?"ui-selecting":"ui-unselecting"),R.unselecting=!k,R.selecting=k,R.selected=k,k?w._trigger("selecting",d,{selecting:R.element}):w._trigger("unselecting",d,{unselecting:R.element}),!1}))},_mouseDrag:function(d){if(this.dragged=!0,!this.options.disabled){var w,S=this,k=this.options,R=this.opos[0],W=this.opos[1],se=d.pageX,le=d.pageY;return R>se&&(w=se,se=R,R=w),W>le&&(w=le,le=W,W=w),this.helper.css({left:R,top:W,width:se-R,height:le-W}),this.selectees.each(function(){var fe=g.data(this,"selectable-item"),be=!1,Te={};!fe||fe.element===S.element[0]||(Te.left=fe.left+S.elementPos.left,Te.right=fe.right+S.elementPos.left,Te.top=fe.top+S.elementPos.top,Te.bottom=fe.bottom+S.elementPos.top,k.tolerance==="touch"?be=!(Te.left>se||Te.right<R||Te.top>le||Te.bottom<W):k.tolerance==="fit"&&(be=Te.left>R&&Te.right<se&&Te.top>W&&Te.bottom<le),be?(fe.selected&&(S._removeClass(fe.$element,"ui-selected"),fe.selected=!1),fe.unselecting&&(S._removeClass(fe.$element,"ui-unselecting"),fe.unselecting=!1),fe.selecting||(S._addClass(fe.$element,"ui-selecting"),fe.selecting=!0,S._trigger("selecting",d,{selecting:fe.element}))):(fe.selecting&&((d.metaKey||d.ctrlKey)&&fe.startselected?(S._removeClass(fe.$element,"ui-selecting"),fe.selecting=!1,S._addClass(fe.$element,"ui-selected"),fe.selected=!0):(S._removeClass(fe.$element,"ui-selecting"),fe.selecting=!1,fe.startselected&&(S._addClass(fe.$element,"ui-unselecting"),fe.unselecting=!0),S._trigger("unselecting",d,{unselecting:fe.element}))),fe.selected&&!d.metaKey&&!d.ctrlKey&&!fe.startselected&&(S._removeClass(fe.$element,"ui-selected"),fe.selected=!1,S._addClass(fe.$element,"ui-unselecting"),fe.unselecting=!0,S._trigger("unselecting",d,{unselecting:fe.element}))))}),!1}},_mouseStop:function(d){var w=this;return this.dragged=!1,g(".ui-unselecting",this.element[0]).each(function(){var S=g.data(this,"selectable-item");w._removeClass(S.$element,"ui-unselecting"),S.unselecting=!1,S.startselected=!1,w._trigger("unselected",d,{unselected:S.element})}),g(".ui-selecting",this.element[0]).each(function(){var S=g.data(this,"selectable-item");w._removeClass(S.$element,"ui-selecting")._addClass(S.$element,"ui-selected"),S.selecting=!1,S.selected=!0,S.startselected=!0,w._trigger("selected",d,{selected:S.element})}),this._trigger("stop",d),this.helper.remove(),!1}});/*!
 * jQuery UI Selectmenu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectmenu",[g.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var d=this.element.uniqueId().attr("id");this.ids={element:d,button:d+"-button",menu:d+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=g()},_drawButton:function(){var d,w=this,S=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(k){this.button.trigger("focus"),k.preventDefault()}}),this.element.hide(),this.button=g("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),d=g("<span>").appendTo(this.button),this._addClass(d,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(S).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){w._rendered||w._refreshMenu()})},_drawMenu:function(){var d=this;this.menu=g("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=g("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(w,S){w.preventDefault(),d._setSelection(),d._select(S.item.data("ui-selectmenu-item"),w)},focus:function(w,S){var k=S.item.data("ui-selectmenu-item");d.focusIndex!=null&&k.index!==d.focusIndex&&(d._trigger("focus",w,{item:k}),d.isOpen||d._select(k,w)),d.focusIndex=k.index,d.button.attr("aria-activedescendant",d.menuItems.eq(k.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),this.options.width===null&&this._resizeButton()},_refreshMenu:function(){var d,w=this.element.find("option");this.menu.empty(),this._parseOptions(w),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,w.length&&(d=this._getSelectedItem(),this.menuInstance.focus(null,d),this._setAria(d.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(d){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",d)))},_position:function(){this.menuWrap.position(g.extend({of:this.button},this.options.position))},close:function(d){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",d))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(d){var w=g("<span>");return this._setText(w,d.label),this._addClass(w,"ui-selectmenu-text"),w},_renderMenu:function(d,w){var S=this,k="";g.each(w,function(R,W){var se;W.optgroup!==k&&(se=g("<li>",{text:W.optgroup}),S._addClass(se,"ui-selectmenu-optgroup","ui-menu-divider"+(W.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),se.appendTo(d),k=W.optgroup),S._renderItemData(d,W)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-selectmenu-item",w)},_renderItem:function(d,w){var S=g("<li>"),k=g("<div>",{title:w.element.attr("title")});return w.disabled&&this._addClass(S,null,"ui-state-disabled"),this._setText(k,w.label),S.append(k).appendTo(d)},_setText:function(d,w){w?d.text(w):d.html("&#160;")},_move:function(d,w){var S,k,R=".ui-menu-item";this.isOpen?S=this.menuItems.eq(this.focusIndex).parent("li"):(S=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),R+=":not(.ui-state-disabled)"),d==="first"||d==="last"?k=S[d==="first"?"prevAll":"nextAll"](R).eq(-1):k=S[d+"All"](R).eq(0),k.length&&this.menuInstance.focus(w,k)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(d){this[this.isOpen?"close":"open"](d)},_setSelection:function(){var d;this.range&&(window.getSelection?(d=window.getSelection(),d.removeAllRanges(),d.addRange(this.range)):this.range.select(),this.button.trigger("focus"))},_documentClick:{mousedown:function(d){this.isOpen&&(g(d.target).closest(".ui-selectmenu-menu, #"+g.escapeSelector(this.ids.button)).length||this.close(d))}},_buttonEvents:{mousedown:function(){var d;window.getSelection?(d=window.getSelection(),d.rangeCount&&(this.range=d.getRangeAt(0))):this.range=document.selection.createRange()},click:function(d){this._setSelection(),this._toggle(d)},keydown:function(d){var w=!0;switch(d.keyCode){case g.ui.keyCode.TAB:case g.ui.keyCode.ESCAPE:this.close(d),w=!1;break;case g.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(d);break;case g.ui.keyCode.UP:d.altKey?this._toggle(d):this._move("prev",d);break;case g.ui.keyCode.DOWN:d.altKey?this._toggle(d):this._move("next",d);break;case g.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(d):this._toggle(d);break;case g.ui.keyCode.LEFT:this._move("prev",d);break;case g.ui.keyCode.RIGHT:this._move("next",d);break;case g.ui.keyCode.HOME:case g.ui.keyCode.PAGE_UP:this._move("first",d);break;case g.ui.keyCode.END:case g.ui.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d),w=!1}w&&d.preventDefault()}},_selectFocusedItem:function(d){var w=this.menuItems.eq(this.focusIndex).parent("li");w.hasClass("ui-state-disabled")||this._select(w.data("ui-selectmenu-item"),d)},_select:function(d,w){var S=this.element[0].selectedIndex;this.element[0].selectedIndex=d.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(d)),this._setAria(d),this._trigger("select",w,{item:d}),d.index!==S&&this._trigger("change",w,{item:d}),this.close(w)},_setAria:function(d){var w=this.menuItems.eq(d.index).attr("id");this.button.attr({"aria-labelledby":w,"aria-activedescendant":w}),this.menu.attr("aria-activedescendant",w)},_setOption:function(d,w){if(d==="icons"){var S=this.button.find("span.ui-icon");this._removeClass(S,null,this.options.icons.button)._addClass(S,null,w.button)}this._super(d,w),d==="appendTo"&&this.menuWrap.appendTo(this._appendTo()),d==="width"&&this._resizeButton()},_setOptionDisabled:function(d){this._super(d),this.menuInstance.option("disabled",d),this.button.attr("aria-disabled",d),this._toggleClass(this.button,null,"ui-state-disabled",d),this.element.prop("disabled",d),d?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var d=this.options.width;if(d===!1){this.button.css("width","");return}d===null&&(d=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(d)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var d=this._super();return d.disabled=this.element.prop("disabled"),d},_parseOptions:function(d){var w=this,S=[];d.each(function(k,R){R.hidden||S.push(w._parseOption(g(R),k))}),this.items=S},_parseOption:function(d,w){var S=d.parent("optgroup");return{element:d,index:w,value:d.val(),label:d.text(),optgroup:S.attr("label")||"",disabled:S.prop("disabled")||d.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]);/*!
 * jQuery UI Slider 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.slider",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var d,w,S=this.options,k=this.element.find(".ui-slider-handle"),R="<span tabindex='0'></span>",W=[];for(w=S.values&&S.values.length||1,k.length>w&&(k.slice(w).remove(),k=k.slice(0,w)),d=k.length;d<w;d++)W.push(R);this.handles=k.add(g(W.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(se){g(this).data("ui-slider-handle-index",se).attr("tabIndex",0)})},_createRange:function(){var d=this.options;d.range?(d.range===!0&&(d.values?d.values.length&&d.values.length!==2?d.values=[d.values[0],d.values[0]]:Array.isArray(d.values)&&(d.values=d.values.slice(0)):d.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=g("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")):(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})),(d.range==="min"||d.range==="max")&&this._addClass(this.range,"ui-slider-range-"+d.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(d){var w,S,k,R,W,se,le,fe,be=this,Te=this.options;return Te.disabled||(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),w={x:d.pageX,y:d.pageY},S=this._normValueFromMouse(w),k=this._valueMax()-this._valueMin()+1,this.handles.each(function(Ke){var Me=Math.abs(S-be.values(Ke));(k>Me||k===Me&&(Ke===be._lastChangedValue||be.values(Ke)===Te.min))&&(k=Me,R=g(this),W=Ke)}),se=this._start(d,W),se===!1)?!1:(this._mouseSliding=!0,this._handleIndex=W,this._addClass(R,null,"ui-state-active"),R.trigger("focus"),le=R.offset(),fe=!g(d.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=fe?{left:0,top:0}:{left:d.pageX-le.left-R.width()/2,top:d.pageY-le.top-R.height()/2-(parseInt(R.css("borderTopWidth"),10)||0)-(parseInt(R.css("borderBottomWidth"),10)||0)+(parseInt(R.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(d,W,S),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(d){var w={x:d.pageX,y:d.pageY},S=this._normValueFromMouse(w);return this._slide(d,this._handleIndex,S),!1},_mouseStop:function(d){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(d,this._handleIndex),this._change(d,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var w,S,k,R,W;return this.orientation==="horizontal"?(w=this.elementSize.width,S=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(w=this.elementSize.height,S=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),k=S/w,k>1&&(k=1),k<0&&(k=0),this.orientation==="vertical"&&(k=1-k),R=this._valueMax()-this._valueMin(),W=this._valueMin()+k*R,this._trimAlignValue(W)},_uiHash:function(d,w,S){var k={handle:this.handles[d],handleIndex:d,value:w!==void 0?w:this.value()};return this._hasMultipleValues()&&(k.value=w!==void 0?w:this.values(d),k.values=S||this.values()),k},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(d,w){return this._trigger("start",d,this._uiHash(w))},_slide:function(d,w,S){var k,R,W=this.value(),se=this.values();this._hasMultipleValues()&&(R=this.values(w?0:1),W=this.values(w),this.options.values.length===2&&this.options.range===!0&&(S=w===0?Math.min(R,S):Math.max(R,S)),se[w]=S),S!==W&&(k=this._trigger("slide",d,this._uiHash(w,S,se)),k!==!1&&(this._hasMultipleValues()?this.values(w,S):this.value(S)))},_stop:function(d,w){this._trigger("stop",d,this._uiHash(w))},_change:function(d,w){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=w,this._trigger("change",d,this._uiHash(w)))},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(d,w){var S,k,R;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(w),this._refreshValue(),this._change(null,d);return}if(arguments.length)if(Array.isArray(arguments[0])){for(S=this.options.values,k=arguments[0],R=0;R<S.length;R+=1)S[R]=this._trimAlignValue(k[R]),this._change(null,R);this._refreshValue()}else return this._hasMultipleValues()?this._values(d):this.value();else return this._values()},_setOption:function(d,w){var S,k=0;switch(d==="range"&&this.options.range===!0&&(w==="min"?(this.options.value=this._values(0),this.options.values=null):w==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(k=this.options.values.length),this._super(d,w),d){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(w),this.handles.css(w==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),S=k-1;S>=0;S--)this._change(null,S);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1;break}},_setOptionDisabled:function(d){this._super(d),this._toggleClass(null,"ui-state-disabled",!!d)},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d),d},_values:function(d){var w,S,k;if(arguments.length)return w=this.options.values[d],w=this._trimAlignValue(w),w;if(this._hasMultipleValues()){for(S=this.options.values.slice(),k=0;k<S.length;k+=1)S[k]=this._trimAlignValue(S[k]);return S}else return[]},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var w=this.options.step>0?this.options.step:1,S=(d-this._valueMin())%w,k=d-S;return Math.abs(S)*2>=w&&(k+=S>0?w:-w),parseFloat(k.toFixed(5))},_calculateNewMax:function(){var d=this.options.max,w=this._valueMin(),S=this.options.step,k=Math.round((d-w)/S)*S;d=k+w,d>this.options.max&&(d-=S),this.max=parseFloat(d.toFixed(this._precision()))},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),S=w.indexOf(".");return S===-1?0:w.length-S-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(d){d==="vertical"&&this.range.css({width:"",left:""}),d==="horizontal"&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var d,w,S,k,R,W=this.options.range,se=this.options,le=this,fe=this._animateOff?!1:se.animate,be={};this._hasMultipleValues()?this.handles.each(function(Te){w=(le.values(Te)-le._valueMin())/(le._valueMax()-le._valueMin())*100,be[le.orientation==="horizontal"?"left":"bottom"]=w+"%",g(this).stop(1,1)[fe?"animate":"css"](be,se.animate),le.options.range===!0&&(le.orientation==="horizontal"?(Te===0&&le.range.stop(1,1)[fe?"animate":"css"]({left:w+"%"},se.animate),Te===1&&le.range[fe?"animate":"css"]({width:w-d+"%"},{queue:!1,duration:se.animate})):(Te===0&&le.range.stop(1,1)[fe?"animate":"css"]({bottom:w+"%"},se.animate),Te===1&&le.range[fe?"animate":"css"]({height:w-d+"%"},{queue:!1,duration:se.animate}))),d=w}):(S=this.value(),k=this._valueMin(),R=this._valueMax(),w=R!==k?(S-k)/(R-k)*100:0,be[this.orientation==="horizontal"?"left":"bottom"]=w+"%",this.handle.stop(1,1)[fe?"animate":"css"](be,se.animate),W==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[fe?"animate":"css"]({width:w+"%"},se.animate),W==="max"&&this.orientation==="horizontal"&&this.range.stop(1,1)[fe?"animate":"css"]({width:100-w+"%"},se.animate),W==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[fe?"animate":"css"]({height:w+"%"},se.animate),W==="max"&&this.orientation==="vertical"&&this.range.stop(1,1)[fe?"animate":"css"]({height:100-w+"%"},se.animate))},_handleEvents:{keydown:function(d){var w,S,k,R,W=g(d.target).data("ui-slider-handle-index");switch(d.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(d.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(g(d.target),null,"ui-state-active"),w=this._start(d,W),w===!1))return;break}switch(R=this.options.step,this._hasMultipleValues()?S=k=this.values(W):S=k=this.value(),d.keyCode){case g.ui.keyCode.HOME:k=this._valueMin();break;case g.ui.keyCode.END:k=this._valueMax();break;case g.ui.keyCode.PAGE_UP:k=this._trimAlignValue(S+(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.PAGE_DOWN:k=this._trimAlignValue(S-(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:if(S===this._valueMax())return;k=this._trimAlignValue(S+R);break;case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(S===this._valueMin())return;k=this._trimAlignValue(S-R);break}this._slide(d,W,k)},keyup:function(d){var w=g(d.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(d,w),this._change(d,w),this._removeClass(g(d.target),null,"ui-state-active"))}}});/*!
 * jQuery UI Sortable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.sortable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(d,w,S){return d>=w&&d<w+S},_isFloating:function(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(d,w){this._super(d,w),d==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var d=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),g.each(this.items,function(){d._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(d,w){var S=null,k=!1,R=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(d),g(d.target).parents().each(function(){if(g.data(this,R.widgetName+"-item")===R)return S=g(this),!1}),g.data(d.target,R.widgetName+"-item")===R&&(S=g(d.target)),!S)||this.options.handle&&!w&&(g(this.options.handle,S).find("*").addBack().each(function(){this===d.target&&(k=!0)}),!k)?!1:(this.currentItem=S,this._removeCurrentsFromItems(),!0)},_mouseStart:function(d,w,S){var k,R,W=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=g(W.appendTo!=="parent"?W.appendTo:this.currentItem.parent()),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},g.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),W.cursorAt&&this._adjustOffsetFromHelper(W.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),g.extend(this.offset,{parent:this._getParentOffset()}),W.containment&&this._setContainment(),W.cursor&&W.cursor!=="auto"&&(R=this.document.find("body"),this.storedCursor=R.css("cursor"),R.css("cursor",W.cursor),this.storedStylesheet=g("<style>*{ cursor: "+W.cursor+" !important; }</style>").appendTo(R)),W.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",W.zIndex)),W.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",W.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!S)for(k=this.containers.length-1;k>=0;k--)this.containers[k]._trigger("activate",d,this._uiHash(this));return g.ui.ddmanager&&(g.ui.ddmanager.current=this),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(d),!0},_scroll:function(d){var w=this.options,S=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<w.scrollSensitivity?this.scrollParent[0].scrollTop=S=this.scrollParent[0].scrollTop+w.scrollSpeed:d.pageY-this.overflowOffset.top<w.scrollSensitivity&&(this.scrollParent[0].scrollTop=S=this.scrollParent[0].scrollTop-w.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<w.scrollSensitivity?this.scrollParent[0].scrollLeft=S=this.scrollParent[0].scrollLeft+w.scrollSpeed:d.pageX-this.overflowOffset.left<w.scrollSensitivity&&(this.scrollParent[0].scrollLeft=S=this.scrollParent[0].scrollLeft-w.scrollSpeed)):(d.pageY-this.document.scrollTop()<w.scrollSensitivity?S=this.document.scrollTop(this.document.scrollTop()-w.scrollSpeed):this.window.height()-(d.pageY-this.document.scrollTop())<w.scrollSensitivity&&(S=this.document.scrollTop(this.document.scrollTop()+w.scrollSpeed)),d.pageX-this.document.scrollLeft()<w.scrollSensitivity?S=this.document.scrollLeft(this.document.scrollLeft()-w.scrollSpeed):this.window.width()-(d.pageX-this.document.scrollLeft())<w.scrollSensitivity&&(S=this.document.scrollLeft(this.document.scrollLeft()+w.scrollSpeed))),S},_mouseDrag:function(d){var w,S,k,R,W=this.options;for(this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),W.scroll&&this._scroll(d)!==!1&&(this._refreshItemPositions(!0),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},w=this.items.length-1;w>=0;w--)if(S=this.items[w],k=S.item[0],R=this._intersectsWithPointer(S),!!R&&S.instance===this.currentContainer&&k!==this.currentItem[0]&&this.placeholder[R===1?"next":"prev"]()[0]!==k&&!g.contains(this.placeholder[0],k)&&(this.options.type!=="semi-dynamic"||!g.contains(this.element[0],k))){if(this.direction=R===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(S))this._rearrange(d,S);else break;this._trigger("change",d,this._uiHash());break}return this._contactContainers(d),g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),this._trigger("sort",d,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,w){if(d){if(g.ui.ddmanager&&!this.options.dropBehaviour&&g.ui.ddmanager.drop(this,d),this.options.revert){var S=this,k=this.placeholder.offset(),R=this.options.axis,W={};(!R||R==="x")&&(W.left=k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!R||R==="y")&&(W.top=k.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,g(this.helper).animate(W,parseInt(this.options.revert,10)||500,function(){S._clear(d)})}else this._clear(d,w);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new g.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),g.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?g(this.domPosition.prev).after(this.currentItem):g(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(d){var w=this._getItemsAsjQuery(d&&d.connected),S=[];return d=d||{},g(w).each(function(){var k=(g(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[\-=_](.+)/);k&&S.push((d.key||k[1]+"[]")+"="+(d.key&&d.expression?k[1]:k[2]))}),!S.length&&d.key&&S.push(d.key+"="),S.join("&")},toArray:function(d){var w=this._getItemsAsjQuery(d&&d.connected),S=[];return d=d||{},w.each(function(){S.push(g(d.item||this).attr(d.attribute||"id")||"")}),S},_intersectsWith:function(d){var w=this.positionAbs.left,S=w+this.helperProportions.width,k=this.positionAbs.top,R=k+this.helperProportions.height,W=d.left,se=W+d.width,le=d.top,fe=le+d.height,be=this.offset.click.top,Te=this.offset.click.left,Ke=this.options.axis==="x"||k+be>le&&k+be<fe,Me=this.options.axis==="y"||w+Te>W&&w+Te<se,me=Ke&&Me;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?me:W<w+this.helperProportions.width/2&&S-this.helperProportions.width/2<se&&le<k+this.helperProportions.height/2&&R-this.helperProportions.height/2<fe},_intersectsWithPointer:function(d){var w,S,k=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),R=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),W=k&&R;return W?(w=this.dragDirection.vertical,S=this.dragDirection.horizontal,this.floating?S==="right"||w==="down"?2:1:w&&(w==="down"?2:1)):!1},_intersectsWithSides:function(d){var w=this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),S=this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),k=this.dragDirection.vertical,R=this.dragDirection.horizontal;return this.floating&&R?R==="right"&&S||R==="left"&&!S:k&&(k==="down"&&w||k==="up"&&!w)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!==0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!==0&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var w,S,k,R,W=[],se=[],le=this._connectWith();if(le&&d)for(w=le.length-1;w>=0;w--)for(k=g(le[w],this.document[0]),S=k.length-1;S>=0;S--)R=g.data(k[S],this.widgetFullName),R&&R!==this&&!R.options.disabled&&se.push([typeof R.options.items=="function"?R.options.items.call(R.element):g(R.options.items,R.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),R]);se.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):g(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function fe(){W.push(this)}for(w=se.length-1;w>=0;w--)se[w][0].each(fe);return g(W)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=g.grep(this.items,function(w){for(var S=0;S<d.length;S++)if(d[S]===w.item[0])return!1;return!0})},_refreshItems:function(d){this.items=[],this.containers=[this];var w,S,k,R,W,se,le,fe,be=this.items,Te=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],d,{item:this.currentItem}):g(this.options.items,this.element),this]],Ke=this._connectWith();if(Ke&&this.ready)for(w=Ke.length-1;w>=0;w--)for(k=g(Ke[w],this.document[0]),S=k.length-1;S>=0;S--)R=g.data(k[S],this.widgetFullName),R&&R!==this&&!R.options.disabled&&(Te.push([typeof R.options.items=="function"?R.options.items.call(R.element[0],d,{item:this.currentItem}):g(R.options.items,R.element),R]),this.containers.push(R));for(w=Te.length-1;w>=0;w--)for(W=Te[w][1],se=Te[w][0],S=0,fe=se.length;S<fe;S++)le=g(se[S]),le.data(this.widgetName+"-item",W),be.push({item:le,instance:W,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(d){var w,S,k,R;for(w=this.items.length-1;w>=0;w--)S=this.items[w],!(this.currentContainer&&S.instance!==this.currentContainer&&S.item[0]!==this.currentItem[0])&&(k=this.options.toleranceElement?g(this.options.toleranceElement,S.item):S.item,d||(S.width=k.outerWidth(),S.height=k.outerHeight()),R=k.offset(),S.left=R.left,S.top=R.top)},refreshPositions:function(d){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(d);var w,S;if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(w=this.containers.length-1;w>=0;w--)S=this.containers[w].element.offset(),this.containers[w].containerCache.left=S.left,this.containers[w].containerCache.top=S.top,this.containers[w].containerCache.width=this.containers[w].element.outerWidth(),this.containers[w].containerCache.height=this.containers[w].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var w,S,k=d.options;(!k.placeholder||k.placeholder.constructor===String)&&(w=k.placeholder,S=d.currentItem[0].nodeName.toLowerCase(),k.placeholder={element:function(){var R=g("<"+S+">",d.document[0]);return d._addClass(R,"ui-sortable-placeholder",w||d.currentItem[0].className)._removeClass(R,"ui-sortable-helper"),S==="tbody"?d._createTrPlaceholder(d.currentItem.find("tr").eq(0),g("<tr>",d.document[0]).appendTo(R)):S==="tr"?d._createTrPlaceholder(d.currentItem,R):S==="img"&&R.attr("src",d.currentItem.attr("src")),w||R.css("visibility","hidden"),R},update:function(R,W){w&&!k.forcePlaceholderSize||((!W.height()||k.forcePlaceholderSize&&(S==="tbody"||S==="tr"))&&W.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),W.width()||W.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10)))}}),d.placeholder=g(k.placeholder.element.call(d.element,d.currentItem)),d.currentItem.after(d.placeholder),k.placeholder.update(d,d.placeholder)},_createTrPlaceholder:function(d,w){var S=this;d.children().each(function(){g("<td>&#160;</td>",S.document[0]).attr("colspan",g(this).attr("colspan")||1).appendTo(w)})},_contactContainers:function(d){var w,S,k,R,W,se,le,fe,be,Te,Ke=null,Me=null;for(w=this.containers.length-1;w>=0;w--)if(!g.contains(this.currentItem[0],this.containers[w].element[0]))if(this._intersectsWith(this.containers[w].containerCache)){if(Ke&&g.contains(this.containers[w].element[0],Ke.element[0]))continue;Ke=this.containers[w],Me=w}else this.containers[w].containerCache.over&&(this.containers[w]._trigger("out",d,this._uiHash(this)),this.containers[w].containerCache.over=0);if(Ke)if(this.containers.length===1)this.containers[Me].containerCache.over||(this.containers[Me]._trigger("over",d,this._uiHash(this)),this.containers[Me].containerCache.over=1);else{for(k=1e4,R=null,be=Ke.floating||this._isFloating(this.currentItem),W=be?"left":"top",se=be?"width":"height",Te=be?"pageX":"pageY",S=this.items.length-1;S>=0;S--)g.contains(this.containers[Me].element[0],this.items[S].item[0])&&this.items[S].item[0]!==this.currentItem[0]&&(le=this.items[S].item.offset()[W],fe=!1,d[Te]-le>this.items[S][se]/2&&(fe=!0),Math.abs(d[Te]-le)<k&&(k=Math.abs(d[Te]-le),R=this.items[S],this.direction=fe?"up":"down"));if(!R&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[Me]){this.currentContainer.containerCache.over||(this.containers[Me]._trigger("over",d,this._uiHash()),this.currentContainer.containerCache.over=1);return}R?this._rearrange(d,R,null,!0):this._rearrange(d,null,this.containers[Me].element,!0),this._trigger("change",d,this._uiHash()),this.containers[Me]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[Me],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[Me]._trigger("over",d,this._uiHash(this)),this.containers[Me].containerCache.over=1}},_createHelper:function(d){var w=this.options,S=typeof w.helper=="function"?g(w.helper.apply(this.element[0],[d,this.currentItem])):w.helper==="clone"?this.currentItem.clone():this.currentItem;return S.parents("body").length||this.appendTo[0].appendChild(S[0]),S[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!S[0].style.width||w.forceHelperSize)&&S.width(this.currentItem.width()),(!S[0].style.height||w.forceHelperSize)&&S.height(this.currentItem.height()),S},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&g.ui.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,S,k=this.options;k.containment==="parent"&&(k.containment=this.helper[0].parentNode),(k.containment==="document"||k.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,k.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(k.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(k.containment)||(d=g(k.containment)[0],w=g(k.containment).offset(),S=g(d).css("overflow")!=="hidden",this.containment=[w.left+(parseInt(g(d).css("borderLeftWidth"),10)||0)+(parseInt(g(d).css("paddingLeft"),10)||0)-this.margins.left,w.top+(parseInt(g(d).css("borderTopWidth"),10)||0)+(parseInt(g(d).css("paddingTop"),10)||0)-this.margins.top,w.left+(S?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(g(d).css("borderLeftWidth"),10)||0)-(parseInt(g(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,w.top+(S?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(g(d).css("borderTopWidth"),10)||0)-(parseInt(g(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,w){w||(w=this.position);var S=d==="absolute"?1:-1,k=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,R=/(html|body)/i.test(k[0].tagName);return{top:w.top+this.offset.relative.top*S+this.offset.parent.top*S-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():R?0:k.scrollTop())*S,left:w.left+this.offset.relative.left*S+this.offset.parent.left*S-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():R?0:k.scrollLeft())*S}},_generatePosition:function(d){var w,S,k=this.options,R=d.pageX,W=d.pageY,se=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,le=/(html|body)/i.test(se[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(R=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(W=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(R=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(W=this.containment[3]+this.offset.click.top)),k.grid&&(w=this.originalPageY+Math.round((W-this.originalPageY)/k.grid[1])*k.grid[1],W=this.containment?w-this.offset.click.top>=this.containment[1]&&w-this.offset.click.top<=this.containment[3]?w:w-this.offset.click.top>=this.containment[1]?w-k.grid[1]:w+k.grid[1]:w,S=this.originalPageX+Math.round((R-this.originalPageX)/k.grid[0])*k.grid[0],R=this.containment?S-this.offset.click.left>=this.containment[0]&&S-this.offset.click.left<=this.containment[2]?S:S-this.offset.click.left>=this.containment[0]?S-k.grid[0]:S+k.grid[0]:S)),{top:W-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():le?0:se.scrollTop()),left:R-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():le?0:se.scrollLeft())}},_rearrange:function(d,w,S,k){S?S[0].appendChild(this.placeholder[0]):w.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?w.item[0]:w.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var R=this.counter;this._delay(function(){R===this.counter&&this.refreshPositions(!k)})},_clear:function(d,w){this.reverting=!1;var S,k=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(S in this._storedCSS)(this._storedCSS[S]==="auto"||this._storedCSS[S]==="static")&&(this._storedCSS[S]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!w&&k.push(function(W){this._trigger("receive",W,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!w&&k.push(function(W){this._trigger("update",W,this._uiHash())}),this!==this.currentContainer&&(w||(k.push(function(W){this._trigger("remove",W,this._uiHash())}),k.push((function(W){return function(se){W._trigger("receive",se,this._uiHash(this))}}).call(this,this.currentContainer)),k.push((function(W){return function(se){W._trigger("update",se,this._uiHash(this))}}).call(this,this.currentContainer))));function R(W,se,le){return function(fe){le._trigger(W,fe,se._uiHash(se))}}for(S=this.containers.length-1;S>=0;S--)w||k.push(R("deactivate",this,this.containers[S])),this.containers[S].containerCache.over&&(k.push(R("out",this,this.containers[S])),this.containers[S].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,w||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!w){for(S=0;S<k.length;S++)k[S].call(this,d);this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){g.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var w=d||this;return{helper:w.helper,placeholder:w.placeholder||g([]),position:w.position,originalPosition:w.originalPosition,offset:w.positionAbs,item:w.currentItem,sender:d?d.element:null}}});/*!
 * jQuery UI Spinner 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */function vi(d){return function(){var w=this.element.val();d.apply(this,arguments),this._refresh(),w!==this.element.val()&&this._trigger("change")}}g.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d=this._super(),w=this.element;return g.each(["min","max","step"],function(S,k){var R=w.attr(k);R!=null&&R.length&&(d[k]=R)}),d},_events:{keydown:function(d){this._start(d)&&this._keydown(d)&&d.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(d){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",d)},mousewheel:function(d,w){var S=g.ui.safeActiveElement(this.document[0]),k=this.element[0]===S;if(!(!k||!w)){if(!this.spinning&&!this._start(d))return!1;this._spin((w>0?1:-1)*this.options.step,d),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(d)},100),d.preventDefault()}},"mousedown .ui-spinner-button":function(d){var w;w=this.element[0]===g.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function S(){var k=this.element[0]===g.ui.safeActiveElement(this.document[0]);k||(this.element.trigger("focus"),this.previous=w,this._delay(function(){this.previous=w}))}d.preventDefault(),S.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,S.call(this)}),this._start(d)!==!1&&this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(d){if(g(d.currentTarget).hasClass("ui-state-active")){if(this._start(d)===!1)return!1;this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)}},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(d){var w=this.options,S=g.ui.keyCode;switch(d.keyCode){case S.UP:return this._repeat(null,1,d),!0;case S.DOWN:return this._repeat(null,-1,d),!0;case S.PAGE_UP:return this._repeat(null,w.page,d),!0;case S.PAGE_DOWN:return this._repeat(null,-w.page,d),!0}return!1},_start:function(d){return!this.spinning&&this._trigger("start",d)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(d,w,S){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,w,S)},d),this._spin(w*this.options.step,S)},_spin:function(d,w){var S=this.value()||0;this.counter||(this.counter=1),S=this._adjustValue(S+d*this._increment(this.counter)),(!this.spinning||this._trigger("spin",w,{value:S})!==!1)&&(this._value(S),this.counter++)},_increment:function(d){var w=this.options.incremental;return w?typeof w=="function"?w(d):Math.floor(d*d*d/5e4-d*d/500+17*d/200+1):1},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),S=w.indexOf(".");return S===-1?0:w.length-S-1},_adjustValue:function(d){var w,S,k=this.options;return w=k.min!==null?k.min:0,S=d-w,S=Math.round(S/k.step)*k.step,d=w+S,d=parseFloat(d.toFixed(this._precision())),k.max!==null&&d>k.max?k.max:k.min!==null&&d<k.min?k.min:d},_stop:function(d){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",d))},_setOption:function(d,w){var S,k,R;if(d==="culture"||d==="numberFormat"){S=this._parse(this.element.val()),this.options[d]=w,this.element.val(this._format(S));return}(d==="max"||d==="min"||d==="step")&&typeof w=="string"&&(w=this._parse(w)),d==="icons"&&(k=this.buttons.first().find(".ui-icon"),this._removeClass(k,null,this.options.icons.up),this._addClass(k,null,w.up),R=this.buttons.last().find(".ui-icon"),this._removeClass(R,null,this.options.icons.down),this._addClass(R,null,w.down)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!d),this.element.prop("disabled",!!d),this.buttons.button(d?"disable":"enable")},_setOptions:vi(function(d){this._super(d)}),_parse:function(d){return typeof d=="string"&&d!==""&&(d=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(d,10,this.options.culture):+d),d===""||isNaN(d)?null:d},_format:function(d){return d===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(d,this.options.numberFormat,this.options.culture):d},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var d=this.value();return d===null?!1:d===this._adjustValue(d)},_value:function(d,w){var S;d!==""&&(S=this._parse(d),S!==null&&(w||(S=this._adjustValue(S)),d=this._format(S))),this.element.val(d),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:vi(function(d){this._stepUp(d)}),_stepUp:function(d){this._start()&&(this._spin((d||1)*this.options.step),this._stop())},stepDown:vi(function(d){this._stepDown(d)}),_stepDown:function(d){this._start()&&(this._spin((d||1)*-this.options.step),this._stop())},pageUp:vi(function(d){this._stepUp((d||1)*this.options.page)}),pageDown:vi(function(d){this._stepDown((d||1)*this.options.page)}),value:function(d){if(!arguments.length)return this._parse(this.element.val());vi(this._value).call(this,d)},widget:function(){return this.uiSpinner}}),g.uiBackCompat!==!1&&g.widget("ui.spinner",g.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),g.ui.spinner;/*!
 * jQuery UI Tabs 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var d=/#.*$/;return function(w){var S,k;S=w.href.replace(d,""),k=location.href.replace(d,"");try{S=decodeURIComponent(S)}catch{}try{k=decodeURIComponent(k)}catch{}return w.hash.length>1&&S===k}}(),_create:function(){var d=this,w=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,w.collapsible),this._processTabs(),w.active=this._initialActive(),Array.isArray(w.disabled)&&(w.disabled=g.uniqueSort(w.disabled.concat(g.map(this.tabs.filter(".ui-state-disabled"),function(S){return d.tabs.index(S)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(w.active):this.active=g(),this._refresh(),this.active.length&&this.load(w.active)},_initialActive:function(){var d=this.options.active,w=this.options.collapsible,S=location.hash.substring(1);return d===null&&(S&&this.tabs.each(function(k,R){if(g(R).attr("aria-controls")===S)return d=k,!1}),d===null&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(d===null||d===-1)&&(d=this.tabs.length?0:!1)),d!==!1&&(d=this.tabs.index(this.tabs.eq(d)),d===-1&&(d=w?!1:0)),!w&&d===!1&&this.anchors.length&&(d=0),d},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):g()}},_tabKeydown:function(d){var w=g(g.ui.safeActiveElement(this.document[0])).closest("li"),S=this.tabs.index(w),k=!0;if(!this._handlePageNav(d)){switch(d.keyCode){case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:S++;break;case g.ui.keyCode.UP:case g.ui.keyCode.LEFT:k=!1,S--;break;case g.ui.keyCode.END:S=this.anchors.length-1;break;case g.ui.keyCode.HOME:S=0;break;case g.ui.keyCode.SPACE:d.preventDefault(),clearTimeout(this.activating),this._activate(S);return;case g.ui.keyCode.ENTER:d.preventDefault(),clearTimeout(this.activating),this._activate(S===this.options.active?!1:S);return;default:return}d.preventDefault(),clearTimeout(this.activating),S=this._focusNextTab(S,k),!d.ctrlKey&&!d.metaKey&&(w.attr("aria-selected","false"),this.tabs.eq(S).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",S)},this.delay))}},_panelKeydown:function(d){this._handlePageNav(d)||d.ctrlKey&&d.keyCode===g.ui.keyCode.UP&&(d.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(d){if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(d,w){var S=this.tabs.length-1;function k(){return d>S&&(d=0),d<0&&(d=S),d}for(;g.inArray(k(),this.options.disabled)!==-1;)d=w?d+1:d-1;return d},_focusNextTab:function(d,w){return d=this._findNextTab(d,w),this.tabs.eq(d).trigger("focus"),d},_setOption:function(d,w){if(d==="active"){this._activate(w);return}this._super(d,w),d==="collapsible"&&(this._toggleClass("ui-tabs-collapsible",null,w),!w&&this.options.active===!1&&this._activate(0)),d==="event"&&this._setupEvents(w),d==="heightStyle"&&this._setupHeightStyle(w)},_sanitizeSelector:function(d){return d?d.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,w=this.tablist.children(":has(a[href])");d.disabled=g.map(w.filter(".ui-state-disabled"),function(S){return w.index(S)}),this._processTabs(),d.active===!1||!this.anchors.length?(d.active=!1,this.active=g()):this.active.length&&!g.contains(this.tablist[0],this.active[0])?this.tabs.length===d.disabled.length?(d.active=!1,this.active=g()):this._activate(this._findNextTab(Math.max(0,d.active-1),!1)):d.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this,w=this.tabs,S=this.anchors,k=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(R){g(this).is(".ui-state-disabled")&&R.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){g(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return g("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=g(),this.anchors.each(function(R,W){var se,le,fe,be=g(W).uniqueId().attr("id"),Te=g(W).closest("li"),Ke=Te.attr("aria-controls");d._isLocal(W)?(se=W.hash,fe=se.substring(1),le=d.element.find(d._sanitizeSelector(se))):(fe=Te.attr("aria-controls")||g({}).uniqueId()[0].id,se="#"+fe,le=d.element.find(se),le.length||(le=d._createPanel(fe),le.insertAfter(d.panels[R-1]||d.tablist)),le.attr("aria-live","polite")),le.length&&(d.panels=d.panels.add(le)),Ke&&Te.data("ui-tabs-aria-controls",Ke),Te.attr({"aria-controls":fe,"aria-labelledby":be}),le.attr("aria-labelledby",be)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),w&&(this._off(w.not(this.tabs)),this._off(S.not(this.anchors)),this._off(k.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(d){return g("<div>").attr("id",d).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(d){var w,S,k;for(Array.isArray(d)&&(d.length?d.length===this.anchors.length&&(d=!0):d=!1),k=0;S=this.tabs[k];k++)w=g(S),d===!0||g.inArray(k,d)!==-1?(w.attr("aria-disabled","true"),this._addClass(w,null,"ui-state-disabled")):(w.removeAttr("aria-disabled"),this._removeClass(w,null,"ui-state-disabled"));this.options.disabled=d,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,d===!0)},_setupEvents:function(d){var w={};d&&g.each(d.split(" "),function(S,k){w[k]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(S){S.preventDefault()}}),this._on(this.anchors,w),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(d){var w,S=this.element.parent();d==="fill"?(w=S.height(),w-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var k=g(this),R=k.css("position");R==="absolute"||R==="fixed"||(w-=k.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){w-=g(this).outerHeight(!0)}),this.panels.each(function(){g(this).height(Math.max(0,w-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):d==="auto"&&(w=0,this.panels.each(function(){w=Math.max(w,g(this).height("").height())}).height(w))},_eventHandler:function(d){var w=this.options,S=this.active,k=g(d.currentTarget),R=k.closest("li"),W=R[0]===S[0],se=W&&w.collapsible,le=se?g():this._getPanelForTab(R),fe=S.length?this._getPanelForTab(S):g(),be={oldTab:S,oldPanel:fe,newTab:se?g():R,newPanel:le};d.preventDefault(),!(R.hasClass("ui-state-disabled")||R.hasClass("ui-tabs-loading")||this.running||W&&!w.collapsible||this._trigger("beforeActivate",d,be)===!1)&&(w.active=se?!1:this.tabs.index(R),this.active=W?g():R,this.xhr&&this.xhr.abort(),!fe.length&&!le.length&&g.error("jQuery UI Tabs: Mismatching fragment identifier."),le.length&&this.load(this.tabs.index(R),d),this._toggle(d,be))},_toggle:function(d,w){var S=this,k=w.newPanel,R=w.oldPanel;this.running=!0;function W(){S.running=!1,S._trigger("activate",d,w)}function se(){S._addClass(w.newTab.closest("li"),"ui-tabs-active","ui-state-active"),k.length&&S.options.show?S._show(k,S.options.show,W):(k.show(),W())}R.length&&this.options.hide?this._hide(R,this.options.hide,function(){S._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),se()}):(this._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),R.hide(),se()),R.attr("aria-hidden","true"),w.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),k.length&&R.length?w.oldTab.attr("tabIndex",-1):k.length&&this.tabs.filter(function(){return g(this).attr("tabIndex")===0}).attr("tabIndex",-1),k.attr("aria-hidden","false"),w.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){var w,S=this._findActive(d);S[0]!==this.active[0]&&(S.length||(S=this.active),w=S.find(".ui-tabs-anchor")[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return d===!1?g():this.tabs.eq(d)},_getIndex:function(d){return typeof d=="string"&&(d=this.anchors.index(this.anchors.filter("[href$='"+g.escapeSelector(d)+"']"))),d},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){g.data(this,"ui-tabs-destroy")?g(this).remove():g(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var d=g(this),w=d.data("ui-tabs-aria-controls");w?d.attr("aria-controls",w).removeData("ui-tabs-aria-controls"):d.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(d){var w=this.options.disabled;w!==!1&&(d===void 0?w=!1:(d=this._getIndex(d),Array.isArray(w)?w=g.map(w,function(S){return S!==d?S:null}):w=g.map(this.tabs,function(S,k){return k!==d?k:null})),this._setOptionDisabled(w))},disable:function(d){var w=this.options.disabled;if(w!==!0){if(d===void 0)w=!0;else{if(d=this._getIndex(d),g.inArray(d,w)!==-1)return;Array.isArray(w)?w=g.merge([d],w).sort():w=[d]}this._setOptionDisabled(w)}},load:function(d,w){d=this._getIndex(d);var S=this,k=this.tabs.eq(d),R=k.find(".ui-tabs-anchor"),W=this._getPanelForTab(k),se={tab:k,panel:W},le=function(fe,be){be==="abort"&&S.panels.stop(!1,!0),S._removeClass(k,"ui-tabs-loading"),W.removeAttr("aria-busy"),fe===S.xhr&&delete S.xhr};this._isLocal(R[0])||(this.xhr=g.ajax(this._ajaxSettings(R,w,se)),this.xhr&&this.xhr.statusText!=="canceled"&&(this._addClass(k,"ui-tabs-loading"),W.attr("aria-busy","true"),this.xhr.done(function(fe,be,Te){setTimeout(function(){W.html(fe),S._trigger("load",w,se),le(Te,be)},1)}).fail(function(fe,be){setTimeout(function(){le(fe,be)},1)})))},_ajaxSettings:function(d,w,S){var k=this;return{url:d.attr("href").replace(/#.*$/,""),beforeSend:function(R,W){return k._trigger("beforeLoad",w,g.extend({jqXHR:R,ajaxSettings:W},S))}}},_getPanelForTab:function(d){var w=g(d).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+w))}}),g.uiBackCompat!==!1&&g.widget("ui.tabs",g.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),g.ui.tabs;/*!
 * jQuery UI Tooltip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var d=g(this).attr("title");return g("<a>").text(d).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(d,w){var S=(d.attr("aria-describedby")||"").split(/\s+/);S.push(w),d.data("ui-tooltip-id",w).attr("aria-describedby",String.prototype.trim.call(S.join(" ")))},_removeDescribedBy:function(d){var w=d.data("ui-tooltip-id"),S=(d.attr("aria-describedby")||"").split(/\s+/),k=g.inArray(w,S);k!==-1&&S.splice(k,1),d.removeData("ui-tooltip-id"),S=String.prototype.trim.call(S.join(" ")),S?d.attr("aria-describedby",S):d.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=g("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=g([])},_setOption:function(d,w){var S=this;this._super(d,w),d==="content"&&g.each(this.tooltips,function(k,R){S._updateContent(R.element)})},_setOptionDisabled:function(d){this[d?"_disable":"_enable"]()},_disable:function(){var d=this;g.each(this.tooltips,function(w,S){var k=g.Event("blur");k.target=k.currentTarget=S.element[0],d.close(k,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var w=g(this);if(w.is("[title]"))return w.data("ui-tooltip-title",w.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var d=g(this);d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title"))}),this.disabledTitles=g([])},open:function(d){var w=this,S=g(d?d.target:this.element).closest(this.options.items);!S.length||S.data("ui-tooltip-id")||(S.attr("title")&&S.data("ui-tooltip-title",S.attr("title")),S.data("ui-tooltip-open",!0),d&&d.type==="mouseover"&&S.parents().each(function(){var k=g(this),R;k.data("ui-tooltip-open")&&(R=g.Event("blur"),R.target=R.currentTarget=this,w.close(R,!0)),k.attr("title")&&(k.uniqueId(),w.parents[this.id]={element:this,title:k.attr("title")},k.attr("title",""))}),this._registerCloseHandlers(d,S),this._updateContent(S,d))},_updateContent:function(d,w){var S,k=this.options.content,R=this,W=w?w.type:null;if(typeof k=="string"||k.nodeType||k.jquery)return this._open(w,d,k);S=k.call(d[0],function(se){R._delay(function(){d.data("ui-tooltip-open")&&(w&&(w.type=W),this._open(w,d,se))})}),S&&this._open(w,d,S)},_open:function(d,w,S){var k,R,W,se,le=g.extend({},this.options.position);if(!S)return;if(k=this._find(w),k){k.tooltip.find(".ui-tooltip-content").html(S);return}w.is("[title]")&&(d&&d.type==="mouseover"?w.attr("title",""):w.removeAttr("title")),k=this._tooltip(w),R=k.tooltip,this._addDescribedBy(w,R.attr("id")),R.find(".ui-tooltip-content").html(S),this.liveRegion.children().hide(),se=g("<div>").html(R.find(".ui-tooltip-content").html()),se.removeAttr("name").find("[name]").removeAttr("name"),se.removeAttr("id").find("[id]").removeAttr("id"),se.appendTo(this.liveRegion);function fe(be){le.of=be,!R.is(":hidden")&&R.position(le)}this.options.track&&d&&/^mouse/.test(d.type)?(this._on(this.document,{mousemove:fe}),fe(d)):R.position(g.extend({of:w},this.options.position)),R.hide(),this._show(R,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(W=this.delayedShow=setInterval(function(){R.is(":visible")&&(fe(le.of),clearInterval(W))},13)),this._trigger("open",d,{tooltip:R})},_registerCloseHandlers:function(d,w){var S={keyup:function(k){if(k.keyCode===g.ui.keyCode.ESCAPE){var R=g.Event(k);R.currentTarget=w[0],this.close(R,!0)}}};w[0]!==this.element[0]&&(S.remove=function(){var k=this._find(w);k&&this._removeTooltip(k.tooltip)}),(!d||d.type==="mouseover")&&(S.mouseleave="close"),(!d||d.type==="focusin")&&(S.focusout="close"),this._on(!0,w,S)},close:function(d){var w,S=this,k=g(d?d.currentTarget:this.element),R=this._find(k);if(!R){k.removeData("ui-tooltip-open");return}w=R.tooltip,!R.closing&&(clearInterval(this.delayedShow),k.data("ui-tooltip-title")&&!k.attr("title")&&k.attr("title",k.data("ui-tooltip-title")),this._removeDescribedBy(k),R.hiding=!0,w.stop(!0),this._hide(w,this.options.hide,function(){S._removeTooltip(g(this))}),k.removeData("ui-tooltip-open"),this._off(k,"mouseleave focusout keyup"),k[0]!==this.element[0]&&this._off(k,"remove"),this._off(this.document,"mousemove"),d&&d.type==="mouseleave"&&g.each(this.parents,function(W,se){g(se.element).attr("title",se.title),delete S.parents[W]}),R.closing=!0,this._trigger("close",d,{tooltip:w}),R.hiding||(R.closing=!1))},_tooltip:function(d){var w=g("<div>").attr("role","tooltip"),S=g("<div>").appendTo(w),k=w.uniqueId().attr("id");return this._addClass(S,"ui-tooltip-content"),this._addClass(w,"ui-tooltip","ui-widget ui-widget-content"),w.appendTo(this._appendTo(d)),this.tooltips[k]={element:d,tooltip:w}},_find:function(d){var w=d.data("ui-tooltip-id");return w?this.tooltips[w]:null},_removeTooltip:function(d){clearInterval(this.delayedShow),d.remove(),delete this.tooltips[d.attr("id")]},_appendTo:function(d){var w=d.closest(".ui-front, dialog");return w.length||(w=this.document[0].body),w},_destroy:function(){var d=this;g.each(this.tooltips,function(w,S){var k=g.Event("blur"),R=S.element;k.target=k.currentTarget=R[0],d.close(k,!0),g("#"+w).remove(),R.data("ui-tooltip-title")&&(R.attr("title")||R.attr("title",R.data("ui-tooltip-title")),R.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),g.uiBackCompat!==!1&&g.widget("ui.tooltip",g.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var d=this._superApply(arguments);return this.options.tooltipClass&&d.tooltip.addClass(this.options.tooltipClass),d}}),g.ui.tooltip});/*! jQuery UI - v1.13.2 - 2022-07-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */(function(g){typeof define=="function"&&define.amd?define(["jquery"],g):g($)})(function(g){g.ui=g.ui||{},g.ui.version="1.13.2";/*!
 * jQuery UI Widget 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var B=0,M=Array.prototype.hasOwnProperty,P=Array.prototype.slice;g.cleanData=function(d){return function(w){var S,k,R;for(R=0;(k=w[R])!=null;R++)S=g._data(k,"events"),S&&S.remove&&g(k).triggerHandler("remove");d(w)}}(g.cleanData),g.widget=function(d,w,S){var k,R,W,se={},le=d.split(".")[0];d=d.split(".")[1];var fe=le+"-"+d;return S||(S=w,w=g.Widget),Array.isArray(S)&&(S=g.extend.apply(null,[{}].concat(S))),g.expr.pseudos[fe.toLowerCase()]=function(be){return!!g.data(be,fe)},g[le]=g[le]||{},k=g[le][d],R=g[le][d]=function(be,Te){if(!this||!this._createWidget)return new R(be,Te);arguments.length&&this._createWidget(be,Te)},g.extend(R,k,{version:S.version,_proto:g.extend({},S),_childConstructors:[]}),W=new w,W.options=g.widget.extend({},W.options),g.each(S,function(be,Te){if(typeof Te!="function"){se[be]=Te;return}se[be]=function(){function Ke(){return w.prototype[be].apply(this,arguments)}function Me(me){return w.prototype[be].apply(this,me)}return function(){var me=this._super,De=this._superApply,Xe;return this._super=Ke,this._superApply=Me,Xe=Te.apply(this,arguments),this._super=me,this._superApply=De,Xe}}()}),R.prototype=g.widget.extend(W,{widgetEventPrefix:k&&W.widgetEventPrefix||d},se,{constructor:R,namespace:le,widgetName:d,widgetFullName:fe}),k?(g.each(k._childConstructors,function(be,Te){var Ke=Te.prototype;g.widget(Ke.namespace+"."+Ke.widgetName,R,Te._proto)}),delete k._childConstructors):w._childConstructors.push(R),g.widget.bridge(d,R),R},g.widget.extend=function(d){for(var w=P.call(arguments,1),S=0,k=w.length,R,W;S<k;S++)for(R in w[S])W=w[S][R],M.call(w[S],R)&&W!==void 0&&(g.isPlainObject(W)?d[R]=g.isPlainObject(d[R])?g.widget.extend({},d[R],W):g.widget.extend({},W):d[R]=W);return d},g.widget.bridge=function(d,w){var S=w.prototype.widgetFullName||d;g.fn[d]=function(k){var R=typeof k=="string",W=P.call(arguments,1),se=this;return R?!this.length&&k==="instance"?se=void 0:this.each(function(){var le,fe=g.data(this,S);if(k==="instance")return se=fe,!1;if(!fe)return g.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+k+"'");if(typeof fe[k]!="function"||k.charAt(0)==="_")return g.error("no such method '"+k+"' for "+d+" widget instance");if(le=fe[k].apply(fe,W),le!==fe&&le!==void 0)return se=le&&le.jquery?se.pushStack(le.get()):le,!1}):(W.length&&(k=g.widget.extend.apply(null,[k].concat(W))),this.each(function(){var le=g.data(this,S);le?(le.option(k||{}),le._init&&le._init()):g.data(this,S,new w(k,this))})),se}},g.Widget=function(){},g.Widget._childConstructors=[],g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(d,w){w=g(w||this.defaultElement||this)[0],this.element=g(w),this.uuid=B++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=g(),this.hoverable=g(),this.focusable=g(),this.classesElementLookup={},w!==this&&(g.data(w,this.widgetFullName,this),this._on(!0,this.element,{remove:function(S){S.target===w&&this.destroy()}}),this.document=g(w.style?w.ownerDocument:w.document||w),this.window=g(this.document[0].defaultView||this.document[0].parentWindow)),this.options=g.widget.extend({},this.options,this._getCreateOptions(),d),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){var d=this;this._destroy(),g.each(this.classesElementLookup,function(w,S){d._removeClass(S,w)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:g.noop,widget:function(){return this.element},option:function(d,w){var S=d,k,R,W;if(arguments.length===0)return g.widget.extend({},this.options);if(typeof d=="string")if(S={},k=d.split("."),d=k.shift(),k.length){for(R=S[d]=g.widget.extend({},this.options[d]),W=0;W<k.length-1;W++)R[k[W]]=R[k[W]]||{},R=R[k[W]];if(d=k.pop(),arguments.length===1)return R[d]===void 0?null:R[d];R[d]=w}else{if(arguments.length===1)return this.options[d]===void 0?null:this.options[d];S[d]=w}return this._setOptions(S),this},_setOptions:function(d){var w;for(w in d)this._setOption(w,d[w]);return this},_setOption:function(d,w){return d==="classes"&&this._setOptionClasses(w),this.options[d]=w,d==="disabled"&&this._setOptionDisabled(w),this},_setOptionClasses:function(d){var w,S,k;for(w in d)k=this.classesElementLookup[w],!(d[w]===this.options.classes[w]||!k||!k.length)&&(S=g(k.get()),this._removeClass(k,w),S.addClass(this._classes({element:S,keys:w,classes:d,add:!0})))},_setOptionDisabled:function(d){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!d),d&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(d){var w=[],S=this;d=g.extend({element:this.element,classes:this.options.classes||{}},d);function k(){var W=[];d.element.each(function(se,le){var fe=g.map(S.classesElementLookup,function(be){return be}).some(function(be){return be.is(le)});fe||W.push(le)}),S._on(g(W),{remove:"_untrackClassesElement"})}function R(W,se){var le,fe;for(fe=0;fe<W.length;fe++)le=S.classesElementLookup[W[fe]]||g(),d.add?(k(),le=g(g.uniqueSort(le.get().concat(d.element.get())))):le=g(le.not(d.element).get()),S.classesElementLookup[W[fe]]=le,w.push(W[fe]),se&&d.classes[W[fe]]&&w.push(d.classes[W[fe]])}return d.keys&&R(d.keys.match(/\S+/g)||[],!0),d.extra&&R(d.extra.match(/\S+/g)||[]),w.join(" ")},_untrackClassesElement:function(d){var w=this;g.each(w.classesElementLookup,function(S,k){g.inArray(d.target,k)!==-1&&(w.classesElementLookup[S]=g(k.not(d.target).get()))}),this._off(g(d.target))},_removeClass:function(d,w,S){return this._toggleClass(d,w,S,!1)},_addClass:function(d,w,S){return this._toggleClass(d,w,S,!0)},_toggleClass:function(d,w,S,k){k=typeof k=="boolean"?k:S;var R=typeof d=="string"||d===null,W={extra:R?w:S,keys:R?d:w,element:R?this.element:d,add:k};return W.element.toggleClass(this._classes(W),k),this},_on:function(d,w,S){var k,R=this;typeof d!="boolean"&&(S=w,w=d,d=!1),S?(w=k=g(w),this.bindings=this.bindings.add(w)):(S=w,w=this.element,k=this.widget()),g.each(S,function(W,se){function le(){if(!(!d&&(R.options.disabled===!0||g(this).hasClass("ui-state-disabled"))))return(typeof se=="string"?R[se]:se).apply(R,arguments)}typeof se!="string"&&(le.guid=se.guid=se.guid||le.guid||g.guid++);var fe=W.match(/^([\w:-]*)\s*(.*)$/),be=fe[1]+R.eventNamespace,Te=fe[2];Te?k.on(be,Te,le):w.on(be,le)})},_off:function(d,w){w=(w||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,d.off(w),this.bindings=g(this.bindings.not(d).get()),this.focusable=g(this.focusable.not(d).get()),this.hoverable=g(this.hoverable.not(d).get())},_delay:function(d,w){function S(){return(typeof d=="string"?k[d]:d).apply(k,arguments)}var k=this;return setTimeout(S,w||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d),this._on(d,{mouseenter:function(w){this._addClass(g(w.currentTarget),null,"ui-state-hover")},mouseleave:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d),this._on(d,{focusin:function(w){this._addClass(g(w.currentTarget),null,"ui-state-focus")},focusout:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-focus")}})},_trigger:function(d,w,S){var k,R,W=this.options[d];if(S=S||{},w=g.Event(w),w.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase(),w.target=this.element[0],R=w.originalEvent,R)for(k in R)k in w||(w[k]=R[k]);return this.element.trigger(w,S),!(typeof W=="function"&&W.apply(this.element[0],[w].concat(S))===!1||w.isDefaultPrevented())}},g.each({show:"fadeIn",hide:"fadeOut"},function(d,w){g.Widget.prototype["_"+d]=function(S,k,R){typeof k=="string"&&(k={effect:k});var W,se=k?k===!0||typeof k=="number"?w:k.effect||w:d;k=k||{},typeof k=="number"?k={duration:k}:k===!0&&(k={}),W=!g.isEmptyObject(k),k.complete=R,k.delay&&S.delay(k.delay),W&&g.effects&&g.effects.effect[se]?S[d](k):se!==d&&S[se]?S[se](k.duration,k.easing,R):S.queue(function(le){g(this)[d](),R&&R.call(S[0]),le()})}}),g.widget;/*!
 * jQuery UI Position 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */(function(){var d,w=Math.max,S=Math.abs,k=/left|center|right/,R=/top|center|bottom/,W=/[\+\-]\d+(\.[\d]+)?%?/,se=/^\w+/,le=/%$/,fe=g.fn.position;function be(me,De,Xe){return[parseFloat(me[0])*(le.test(me[0])?De/100:1),parseFloat(me[1])*(le.test(me[1])?Xe/100:1)]}function Te(me,De){return parseInt(g.css(me,De),10)||0}function Ke(me){return me!=null&&me===me.window}function Me(me){var De=me[0];return De.nodeType===9?{width:me.width(),height:me.height(),offset:{top:0,left:0}}:Ke(De)?{width:me.width(),height:me.height(),offset:{top:me.scrollTop(),left:me.scrollLeft()}}:De.preventDefault?{width:0,height:0,offset:{top:De.pageY,left:De.pageX}}:{width:me.outerWidth(),height:me.outerHeight(),offset:me.offset()}}g.position={scrollbarWidth:function(){if(d!==void 0)return d;var me,De,Xe=g("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),ct=Xe.children()[0];return g("body").append(Xe),me=ct.offsetWidth,Xe.css("overflow","scroll"),De=ct.offsetWidth,me===De&&(De=Xe[0].clientWidth),Xe.remove(),d=me-De},getScrollInfo:function(me){var De=me.isWindow||me.isDocument?"":me.element.css("overflow-x"),Xe=me.isWindow||me.isDocument?"":me.element.css("overflow-y"),ct=De==="scroll"||De==="auto"&&me.width<me.element[0].scrollWidth,gt=Xe==="scroll"||Xe==="auto"&&me.height<me.element[0].scrollHeight;return{width:gt?g.position.scrollbarWidth():0,height:ct?g.position.scrollbarWidth():0}},getWithinInfo:function(me){var De=g(me||window),Xe=Ke(De[0]),ct=!!De[0]&&De[0].nodeType===9,gt=!Xe&&!ct;return{element:De,isWindow:Xe,isDocument:ct,offset:gt?g(me).offset():{left:0,top:0},scrollLeft:De.scrollLeft(),scrollTop:De.scrollTop(),width:De.outerWidth(),height:De.outerHeight()}}},g.fn.position=function(me){if(!me||!me.of)return fe.apply(this,arguments);me=g.extend({},me);var De,Xe,ct,gt,Dt,Kt,Gt=typeof me.of=="string"?g(document).find(me.of):g(me.of),Qt=g.position.getWithinInfo(me.within),$t=g.position.getScrollInfo(Qt),ri=(me.collision||"flip").split(" "),ci={};return Kt=Me(Gt),Gt[0].preventDefault&&(me.at="left top"),Xe=Kt.width,ct=Kt.height,gt=Kt.offset,Dt=g.extend({},gt),g.each(["my","at"],function(){var Bt=(me[this]||"").split(" "),di,ii;Bt.length===1&&(Bt=k.test(Bt[0])?Bt.concat(["center"]):R.test(Bt[0])?["center"].concat(Bt):["center","center"]),Bt[0]=k.test(Bt[0])?Bt[0]:"center",Bt[1]=R.test(Bt[1])?Bt[1]:"center",di=W.exec(Bt[0]),ii=W.exec(Bt[1]),ci[this]=[di?di[0]:0,ii?ii[0]:0],me[this]=[se.exec(Bt[0])[0],se.exec(Bt[1])[0]]}),ri.length===1&&(ri[1]=ri[0]),me.at[0]==="right"?Dt.left+=Xe:me.at[0]==="center"&&(Dt.left+=Xe/2),me.at[1]==="bottom"?Dt.top+=ct:me.at[1]==="center"&&(Dt.top+=ct/2),De=be(ci.at,Xe,ct),Dt.left+=De[0],Dt.top+=De[1],this.each(function(){var Bt,di,ii=g(this),Hi=ii.outerWidth(),Vi=ii.outerHeight(),Ht=Te(this,"marginLeft"),_i=Te(this,"marginTop"),Ti=Hi+Ht+Te(this,"marginRight")+$t.width,Wi=Vi+_i+Te(this,"marginBottom")+$t.height,Zt=g.extend({},Dt),mi=be(ci.my,ii.outerWidth(),ii.outerHeight());me.my[0]==="right"?Zt.left-=Hi:me.my[0]==="center"&&(Zt.left-=Hi/2),me.my[1]==="bottom"?Zt.top-=Vi:me.my[1]==="center"&&(Zt.top-=Vi/2),Zt.left+=mi[0],Zt.top+=mi[1],Bt={marginLeft:Ht,marginTop:_i},g.each(["left","top"],function(wi,$i){g.ui.position[ri[wi]]&&g.ui.position[ri[wi]][$i](Zt,{targetWidth:Xe,targetHeight:ct,elemWidth:Hi,elemHeight:Vi,collisionPosition:Bt,collisionWidth:Ti,collisionHeight:Wi,offset:[De[0]+mi[0],De[1]+mi[1]],my:me.my,at:me.at,within:Qt,elem:ii})}),me.using&&(di=function(wi){var $i=gt.left-Zt.left,tr=$i+Xe-Hi,Ar=gt.top-Zt.top,Tr=Ar+ct-Vi,ji={target:{element:Gt,left:gt.left,top:gt.top,width:Xe,height:ct},element:{element:ii,left:Zt.left,top:Zt.top,width:Hi,height:Vi},horizontal:tr<0?"left":$i>0?"right":"center",vertical:Tr<0?"top":Ar>0?"bottom":"middle"};Xe<Hi&&S($i+tr)<Xe&&(ji.horizontal="center"),ct<Vi&&S(Ar+Tr)<ct&&(ji.vertical="middle"),w(S($i),S(tr))>w(S(Ar),S(Tr))?ji.important="horizontal":ji.important="vertical",me.using.call(this,wi,ji)}),ii.offset(g.extend(Zt,{using:di}))})},g.ui.position={fit:{left:function(me,De){var Xe=De.within,ct=Xe.isWindow?Xe.scrollLeft:Xe.offset.left,gt=Xe.width,Dt=me.left-De.collisionPosition.marginLeft,Kt=ct-Dt,Gt=Dt+De.collisionWidth-gt-ct,Qt;De.collisionWidth>gt?Kt>0&&Gt<=0?(Qt=me.left+Kt+De.collisionWidth-gt-ct,me.left+=Kt-Qt):Gt>0&&Kt<=0?me.left=ct:Kt>Gt?me.left=ct+gt-De.collisionWidth:me.left=ct:Kt>0?me.left+=Kt:Gt>0?me.left-=Gt:me.left=w(me.left-Dt,me.left)},top:function(me,De){var Xe=De.within,ct=Xe.isWindow?Xe.scrollTop:Xe.offset.top,gt=De.within.height,Dt=me.top-De.collisionPosition.marginTop,Kt=ct-Dt,Gt=Dt+De.collisionHeight-gt-ct,Qt;De.collisionHeight>gt?Kt>0&&Gt<=0?(Qt=me.top+Kt+De.collisionHeight-gt-ct,me.top+=Kt-Qt):Gt>0&&Kt<=0?me.top=ct:Kt>Gt?me.top=ct+gt-De.collisionHeight:me.top=ct:Kt>0?me.top+=Kt:Gt>0?me.top-=Gt:me.top=w(me.top-Dt,me.top)}},flip:{left:function(me,De){var Xe=De.within,ct=Xe.offset.left+Xe.scrollLeft,gt=Xe.width,Dt=Xe.isWindow?Xe.scrollLeft:Xe.offset.left,Kt=me.left-De.collisionPosition.marginLeft,Gt=Kt-Dt,Qt=Kt+De.collisionWidth-gt-Dt,$t=De.my[0]==="left"?-De.elemWidth:De.my[0]==="right"?De.elemWidth:0,ri=De.at[0]==="left"?De.targetWidth:De.at[0]==="right"?-De.targetWidth:0,ci=-2*De.offset[0],Bt,di;Gt<0?(Bt=me.left+$t+ri+ci+De.collisionWidth-gt-ct,(Bt<0||Bt<S(Gt))&&(me.left+=$t+ri+ci)):Qt>0&&(di=me.left-De.collisionPosition.marginLeft+$t+ri+ci-Dt,(di>0||S(di)<Qt)&&(me.left+=$t+ri+ci))},top:function(me,De){var Xe=De.within,ct=Xe.offset.top+Xe.scrollTop,gt=Xe.height,Dt=Xe.isWindow?Xe.scrollTop:Xe.offset.top,Kt=me.top-De.collisionPosition.marginTop,Gt=Kt-Dt,Qt=Kt+De.collisionHeight-gt-Dt,$t=De.my[1]==="top",ri=$t?-De.elemHeight:De.my[1]==="bottom"?De.elemHeight:0,ci=De.at[1]==="top"?De.targetHeight:De.at[1]==="bottom"?-De.targetHeight:0,Bt=-2*De.offset[1],di,ii;Gt<0?(ii=me.top+ri+ci+Bt+De.collisionHeight-gt-ct,(ii<0||ii<S(Gt))&&(me.top+=ri+ci+Bt)):Qt>0&&(di=me.top-De.collisionPosition.marginTop+ri+ci+Bt-Dt,(di>0||S(di)<Qt)&&(me.top+=ri+ci+Bt))}},flipfit:{left:function(){g.ui.position.flip.left.apply(this,arguments),g.ui.position.fit.left.apply(this,arguments)},top:function(){g.ui.position.flip.top.apply(this,arguments),g.ui.position.fit.top.apply(this,arguments)}}}})(),g.ui.position;/*!
 * jQuery UI :data 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{data:g.expr.createPseudo?g.expr.createPseudo(function(d){return function(w){return!!g.data(w,d)}}):function(d,w,S){return!!g.data(d,S[3])}});/*!
 * jQuery UI Disable Selection 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({disableSelection:function(){var d="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(d+".ui-disableSelection",function(w){w.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var K=g;/*!
 * jQuery Color Animations v2.2.0
 * https://github.com/jquery/jquery-color
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun May 10 09:02:36 2020 +0200
 */var Y="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",ie={},D=ie.toString,ne=/^([\-+])=\s*(\d+\.?\d*)/,oe=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1]*2.55,d[2]*2.55,d[3]*2.55,d[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),d[4]?(parseInt(d[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16),d[4]?(parseInt(d[4]+d[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],ue=K.Color=function(d,w,S,k){return new K.Color.fn.parse(d,w,S,k)},pe={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},we={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},ke=ue.support={},Qe=K("<p>")[0],Ue,We=K.each;Qe.style.cssText="background-color:rgba(1,1,1,.5)",ke.rgba=Qe.style.backgroundColor.indexOf("rgba")>-1,We(pe,function(d,w){w.cache="_"+d,w.props.alpha={idx:3,type:"percent",def:1}}),K.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,w){ie["[object "+w+"]"]=w.toLowerCase()});function Ne(d){return d==null?d+"":typeof d=="object"?ie[D.call(d)]||"object":typeof d}function ut(d,w,S){var k=we[w.type]||{};return d==null?S||!w.def?null:w.def:(d=k.floor?~~d:parseFloat(d),isNaN(d)?w.def:k.mod?(d+k.mod)%k.mod:Math.min(k.max,Math.max(0,d)))}function Ye(d){var w=ue(),S=w._rgba=[];return d=d.toLowerCase(),We(oe,function(k,R){var W,se=R.re.exec(d),le=se&&R.parse(se),fe=R.space||"rgba";if(le)return W=w[fe](le),w[pe[fe].cache]=W[pe[fe].cache],S=w._rgba=W._rgba,!1}),S.length?(S.join()==="0,0,0,0"&&K.extend(S,Ue.transparent),w):Ue[d]}ue.fn=K.extend(ue.prototype,{parse:function(d,w,S,k){if(d===void 0)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=K(d).css(w),w=void 0);var R=this,W=Ne(d),se=this._rgba=[];if(w!==void 0&&(d=[d,w,S,k],W="array"),W==="string")return this.parse(Ye(d)||Ue._default);if(W==="array")return We(pe.rgba.props,function(le,fe){se[fe.idx]=ut(d[fe.idx],fe)}),this;if(W==="object")return d instanceof ue?We(pe,function(le,fe){d[fe.cache]&&(R[fe.cache]=d[fe.cache].slice())}):We(pe,function(le,fe){var be=fe.cache;We(fe.props,function(Te,Ke){if(!R[be]&&fe.to){if(Te==="alpha"||d[Te]==null)return;R[be]=fe.to(R._rgba)}R[be][Ke.idx]=ut(d[Te],Ke,!0)}),R[be]&&K.inArray(null,R[be].slice(0,3))<0&&(R[be][3]==null&&(R[be][3]=1),fe.from&&(R._rgba=fe.from(R[be])))}),this},is:function(d){var w=ue(d),S=!0,k=this;return We(pe,function(R,W){var se,le=w[W.cache];return le&&(se=k[W.cache]||W.to&&W.to(k._rgba)||[],We(W.props,function(fe,be){if(le[be.idx]!=null)return S=le[be.idx]===se[be.idx],S})),S}),S},_space:function(){var d=[],w=this;return We(pe,function(S,k){w[k.cache]&&d.push(S)}),d.pop()},transition:function(d,w){var S=ue(d),k=S._space(),R=pe[k],W=this.alpha()===0?ue("transparent"):this,se=W[R.cache]||R.to(W._rgba),le=se.slice();return S=S[R.cache],We(R.props,function(fe,be){var Te=be.idx,Ke=se[Te],Me=S[Te],me=we[be.type]||{};Me!==null&&(Ke===null?le[Te]=Me:(me.mod&&(Me-Ke>me.mod/2?Ke+=me.mod:Ke-Me>me.mod/2&&(Ke-=me.mod)),le[Te]=ut((Me-Ke)*w+Ke,be)))}),this[k](le)},blend:function(d){if(this._rgba[3]===1)return this;var w=this._rgba.slice(),S=w.pop(),k=ue(d)._rgba;return ue(K.map(w,function(R,W){return(1-S)*k[W]+S*R}))},toRgbaString:function(){var d="rgba(",w=K.map(this._rgba,function(S,k){return S??(k>2?1:0)});return w[3]===1&&(w.pop(),d="rgb("),d+w.join()+")"},toHslaString:function(){var d="hsla(",w=K.map(this.hsla(),function(S,k){return S==null&&(S=k>2?1:0),k&&k<3&&(S=Math.round(S*100)+"%"),S});return w[3]===1&&(w.pop(),d="hsl("),d+w.join()+")"},toHexString:function(d){var w=this._rgba.slice(),S=w.pop();return d&&w.push(~~(S*255)),"#"+K.map(w,function(k){return k=(k||0).toString(16),k.length===1?"0"+k:k}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),ue.fn.parse.prototype=ue.fn;function et(d,w,S){return S=(S+1)%1,S*6<1?d+(w-d)*S*6:S*2<1?w:S*3<2?d+(w-d)*(2/3-S)*6:d}pe.hsla.to=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/255,S=d[1]/255,k=d[2]/255,R=d[3],W=Math.max(w,S,k),se=Math.min(w,S,k),le=W-se,fe=W+se,be=fe*.5,Te,Ke;return se===W?Te=0:w===W?Te=60*(S-k)/le+360:S===W?Te=60*(k-w)/le+120:Te=60*(w-S)/le+240,le===0?Ke=0:be<=.5?Ke=le/fe:Ke=le/(2-fe),[Math.round(Te)%360,Ke,be,R??1]},pe.hsla.from=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/360,S=d[1],k=d[2],R=d[3],W=k<=.5?k*(1+S):k+S-k*S,se=2*k-W;return[Math.round(et(se,W,w+1/3)*255),Math.round(et(se,W,w)*255),Math.round(et(se,W,w-1/3)*255),R]},We(pe,function(d,w){var S=w.props,k=w.cache,R=w.to,W=w.from;ue.fn[d]=function(se){if(R&&!this[k]&&(this[k]=R(this._rgba)),se===void 0)return this[k].slice();var le,fe=Ne(se),be=fe==="array"||fe==="object"?se:arguments,Te=this[k].slice();return We(S,function(Ke,Me){var me=be[fe==="object"?Ke:Me.idx];me==null&&(me=Te[Me.idx]),Te[Me.idx]=ut(me,Me)}),W?(le=ue(W(Te)),le[k]=Te,le):ue(Te)},We(S,function(se,le){ue.fn[se]||(ue.fn[se]=function(fe){var be,Te,Ke,Me,me=Ne(fe);return se==="alpha"?Me=this._hsla?"hsla":"rgba":Me=d,be=this[Me](),Te=be[le.idx],me==="undefined"?Te:(me==="function"&&(fe=fe.call(this,Te),me=Ne(fe)),fe==null&&le.empty?this:(me==="string"&&(Ke=ne.exec(fe),Ke&&(fe=Te+parseFloat(Ke[2])*(Ke[1]==="+"?1:-1))),be[le.idx]=fe,this[Me](be)))})})}),ue.hook=function(d){var w=d.split(" ");We(w,function(S,k){K.cssHooks[k]={set:function(R,W){var se,le,fe="";if(W!=="transparent"&&(Ne(W)!=="string"||(se=Ye(W)))){if(W=ue(se||W),!ke.rgba&&W._rgba[3]!==1){for(le=k==="backgroundColor"?R.parentNode:R;(fe===""||fe==="transparent")&&le&&le.style;)try{fe=K.css(le,"backgroundColor"),le=le.parentNode}catch{}W=W.blend(fe&&fe!=="transparent"?fe:"_default")}W=W.toRgbaString()}try{R.style[k]=W}catch{}}},K.fx.step[k]=function(R){R.colorInit||(R.start=ue(R.elem,k),R.end=ue(R.end),R.colorInit=!0),K.cssHooks[k].set(R.elem,R.start.transition(R.end,R.pos))}})},ue.hook(Y),K.cssHooks.borderColor={expand:function(d){var w={};return We(["Top","Right","Bottom","Left"],function(S,k){w["border"+k+"Color"]=d}),w}},Ue=K.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};/*!
 * jQuery UI Effects 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var rt="ui-effects-",ft="ui-effects-style",Ze="ui-effects-animated";g.effects={effect:{}},function(){var d=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};g.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(W,se){g.fx.step[se]=function(le){(le.end!=="none"&&!le.setAttr||le.pos===1&&!le.setAttr)&&(K.style(le.elem,se,le.end),le.setAttr=!0)}});function S(W){return W.replace(/-([\da-z])/gi,function(se,le){return le.toUpperCase()})}function k(W){var se,le,fe=W.ownerDocument.defaultView?W.ownerDocument.defaultView.getComputedStyle(W,null):W.currentStyle,be={};if(fe&&fe.length&&fe[0]&&fe[fe[0]])for(le=fe.length;le--;)se=fe[le],typeof fe[se]=="string"&&(be[S(se)]=fe[se]);else for(se in fe)typeof fe[se]=="string"&&(be[se]=fe[se]);return be}function R(W,se){var le={},fe,be;for(fe in se)be=se[fe],W[fe]!==be&&(w[fe]||(g.fx.step[fe]||!isNaN(parseFloat(be)))&&(le[fe]=be));return le}g.fn.addBack||(g.fn.addBack=function(W){return this.add(W==null?this.prevObject:this.prevObject.filter(W))}),g.effects.animateClass=function(W,se,le,fe){var be=g.speed(se,le,fe);return this.queue(function(){var Te=g(this),Ke=Te.attr("class")||"",Me,me=be.children?Te.find("*").addBack():Te;me=me.map(function(){var De=g(this);return{el:De,start:k(this)}}),Me=function(){g.each(d,function(De,Xe){W[Xe]&&Te[Xe+"Class"](W[Xe])})},Me(),me=me.map(function(){return this.end=k(this.el[0]),this.diff=R(this.start,this.end),this}),Te.attr("class",Ke),me=me.map(function(){var De=this,Xe=g.Deferred(),ct=g.extend({},be,{queue:!1,complete:function(){Xe.resolve(De)}});return this.el.animate(this.diff,ct),Xe.promise()}),g.when.apply(g,me.get()).done(function(){Me(),g.each(arguments,function(){var De=this.el;g.each(this.diff,function(Xe){De.css(Xe,"")})}),be.complete.call(Te[0])})})},g.fn.extend({addClass:function(W){return function(se,le,fe,be){return le?g.effects.animateClass.call(this,{add:se},le,fe,be):W.apply(this,arguments)}}(g.fn.addClass),removeClass:function(W){return function(se,le,fe,be){return arguments.length>1?g.effects.animateClass.call(this,{remove:se},le,fe,be):W.apply(this,arguments)}}(g.fn.removeClass),toggleClass:function(W){return function(se,le,fe,be,Te){return typeof le=="boolean"||le===void 0?fe?g.effects.animateClass.call(this,le?{add:se}:{remove:se},fe,be,Te):W.apply(this,arguments):g.effects.animateClass.call(this,{toggle:se},le,fe,be)}}(g.fn.toggleClass),switchClass:function(W,se,le,fe,be){return g.effects.animateClass.call(this,{add:se,remove:W},le,fe,be)}})}(),function(){g.expr&&g.expr.pseudos&&g.expr.pseudos.animated&&(g.expr.pseudos.animated=function(k){return function(R){return!!g(R).data(Ze)||k(R)}}(g.expr.pseudos.animated)),g.uiBackCompat!==!1&&g.extend(g.effects,{save:function(k,R){for(var W=0,se=R.length;W<se;W++)R[W]!==null&&k.data(rt+R[W],k[0].style[R[W]])},restore:function(k,R){for(var W,se=0,le=R.length;se<le;se++)R[se]!==null&&(W=k.data(rt+R[se]),k.css(R[se],W))},setMode:function(k,R){return R==="toggle"&&(R=k.is(":hidden")?"show":"hide"),R},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper"))return k.parent();var R={width:k.outerWidth(!0),height:k.outerHeight(!0),float:k.css("float")},W=g("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),se={width:k.width(),height:k.height()},le=document.activeElement;try{le.id}catch{le=document.body}return k.wrap(W),(k[0]===le||g.contains(k[0],le))&&g(le).trigger("focus"),W=k.parent(),k.css("position")==="static"?(W.css({position:"relative"}),k.css({position:"relative"})):(g.extend(R,{position:k.css("position"),zIndex:k.css("z-index")}),g.each(["top","left","bottom","right"],function(fe,be){R[be]=k.css(be),isNaN(parseInt(R[be],10))&&(R[be]="auto")}),k.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),k.css(se),W.css(R).show()},removeWrapper:function(k){var R=document.activeElement;return k.parent().is(".ui-effects-wrapper")&&(k.parent().replaceWith(k),(k[0]===R||g.contains(k[0],R))&&g(R).trigger("focus")),k}}),g.extend(g.effects,{version:"1.13.2",define:function(k,R,W){return W||(W=R,R="effect"),g.effects.effect[k]=W,g.effects.effect[k].mode=R,W},scaledDimensions:function(k,R,W){if(R===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var se=W!=="horizontal"?(R||100)/100:1,le=W!=="vertical"?(R||100)/100:1;return{height:k.height()*le,width:k.width()*se,outerHeight:k.outerHeight()*le,outerWidth:k.outerWidth()*se}},clipToBox:function(k){return{width:k.clip.right-k.clip.left,height:k.clip.bottom-k.clip.top,left:k.clip.left,top:k.clip.top}},unshift:function(k,R,W){var se=k.queue();R>1&&se.splice.apply(se,[1,0].concat(se.splice(R,W))),k.dequeue()},saveStyle:function(k){k.data(ft,k[0].style.cssText)},restoreStyle:function(k){k[0].style.cssText=k.data(ft)||"",k.removeData(ft)},mode:function(k,R){var W=k.is(":hidden");return R==="toggle"&&(R=W?"show":"hide"),(W?R==="hide":R==="show")&&(R="none"),R},getBaseline:function(k,R){var W,se;switch(k[0]){case"top":W=0;break;case"middle":W=.5;break;case"bottom":W=1;break;default:W=k[0]/R.height}switch(k[1]){case"left":se=0;break;case"center":se=.5;break;case"right":se=1;break;default:se=k[1]/R.width}return{x:se,y:W}},createPlaceholder:function(k){var R,W=k.css("position"),se=k.position();return k.css({marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()),/^(static|relative)/.test(W)&&(W="absolute",R=g("<"+k[0].nodeName+">").insertAfter(k).css({display:/^(inline|ruby)/.test(k.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight"),float:k.css("float")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()).addClass("ui-effects-placeholder"),k.data(rt+"placeholder",R)),k.css({position:W,left:se.left,top:se.top}),R},removePlaceholder:function(k){var R=rt+"placeholder",W=k.data(R);W&&(W.remove(),k.removeData(R))},cleanUp:function(k){g.effects.restoreStyle(k),g.effects.removePlaceholder(k)},setTransition:function(k,R,W,se){return se=se||{},g.each(R,function(le,fe){var be=k.cssUnit(fe);be[0]>0&&(se[fe]=be[0]*W+be[1])}),se}});function d(k,R,W,se){return g.isPlainObject(k)&&(R=k,k=k.effect),k={effect:k},R==null&&(R={}),typeof R=="function"&&(se=R,W=null,R={}),(typeof R=="number"||g.fx.speeds[R])&&(se=W,W=R,R={}),typeof W=="function"&&(se=W,W=null),R&&g.extend(k,R),W=W||R.duration,k.duration=g.fx.off?0:typeof W=="number"?W:W in g.fx.speeds?g.fx.speeds[W]:g.fx.speeds._default,k.complete=se||R.complete,k}function w(k){return!!(!k||typeof k=="number"||g.fx.speeds[k]||typeof k=="string"&&!g.effects.effect[k]||typeof k=="function"||typeof k=="object"&&!k.effect)}g.fn.extend({effect:function(){var k=d.apply(this,arguments),R=g.effects.effect[k.effect],W=R.mode,se=k.queue,le=se||"fx",fe=k.complete,be=k.mode,Te=[],Ke=function(me){var De=g(this),Xe=g.effects.mode(De,be)||W;De.data(Ze,!0),Te.push(Xe),W&&(Xe==="show"||Xe===W&&Xe==="hide")&&De.show(),(!W||Xe!=="none")&&g.effects.saveStyle(De),typeof me=="function"&&me()};if(g.fx.off||!R)return be?this[be](k.duration,fe):this.each(function(){fe&&fe.call(this)});function Me(me){var De=g(this);function Xe(){De.removeData(Ze),g.effects.cleanUp(De),k.mode==="hide"&&De.hide(),ct()}function ct(){typeof fe=="function"&&fe.call(De[0]),typeof me=="function"&&me()}k.mode=Te.shift(),g.uiBackCompat!==!1&&!W?(De.is(":hidden")?be==="hide":be==="show")?(De[be](),ct()):R.call(De[0],k,ct):k.mode==="none"?(De[be](),ct()):R.call(De[0],k,Xe)}return se===!1?this.each(Ke).each(Me):this.queue(le,Ke).queue(le,Me)},show:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="show",this.effect.call(this,W)}}(g.fn.show),hide:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="hide",this.effect.call(this,W)}}(g.fn.hide),toggle:function(k){return function(R){if(w(R)||typeof R=="boolean")return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="toggle",this.effect.call(this,W)}}(g.fn.toggle),cssUnit:function(k){var R=this.css(k),W=[];return g.each(["em","px","%","pt"],function(se,le){R.indexOf(le)>0&&(W=[parseFloat(R),le])}),W},cssClip:function(k){return k?this.css("clip","rect("+k.top+"px "+k.right+"px "+k.bottom+"px "+k.left+"px)"):S(this.css("clip"),this)},transfer:function(k,R){var W=g(this),se=g(k.to),le=se.css("position")==="fixed",fe=g("body"),be=le?fe.scrollTop():0,Te=le?fe.scrollLeft():0,Ke=se.offset(),Me={top:Ke.top-be,left:Ke.left-Te,height:se.innerHeight(),width:se.innerWidth()},me=W.offset(),De=g("<div class='ui-effects-transfer'></div>");De.appendTo("body").addClass(k.className).css({top:me.top-be,left:me.left-Te,height:W.innerHeight(),width:W.innerWidth(),position:le?"fixed":"absolute"}).animate(Me,k.duration,k.easing,function(){De.remove(),typeof R=="function"&&R()})}});function S(k,R){var W=R.outerWidth(),se=R.outerHeight(),le=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,fe=le.exec(k)||["",0,W,se,0];return{top:parseFloat(fe[1])||0,right:fe[2]==="auto"?W:parseFloat(fe[2]),bottom:fe[3]==="auto"?se:parseFloat(fe[3]),left:parseFloat(fe[4])||0}}g.fx.step.clip=function(k){k.clipInit||(k.start=g(k.elem).cssClip(),typeof k.end=="string"&&(k.end=S(k.end,k.elem)),k.clipInit=!0),g(k.elem).cssClip({top:k.pos*(k.end.top-k.start.top)+k.start.top,right:k.pos*(k.end.right-k.start.right)+k.start.right,bottom:k.pos*(k.end.bottom-k.start.bottom)+k.start.bottom,left:k.pos*(k.end.left-k.start.left)+k.start.left})}}(),function(){var d={};g.each(["Quad","Cubic","Quart","Quint","Expo"],function(w,S){d[S]=function(k){return Math.pow(k,w+2)}}),g.extend(d,{Sine:function(w){return 1-Math.cos(w*Math.PI/2)},Circ:function(w){return 1-Math.sqrt(1-w*w)},Elastic:function(w){return w===0||w===1?w:-Math.pow(2,8*(w-1))*Math.sin(((w-1)*80-7.5)*Math.PI/15)},Back:function(w){return w*w*(3*w-2)},Bounce:function(w){for(var S,k=4;w<((S=Math.pow(2,--k))-1)/11;);return 1/Math.pow(4,3-k)-7.5625*Math.pow((S*3-2)/22-w,2)}}),g.each(d,function(w,S){g.easing["easeIn"+w]=S,g.easing["easeOut"+w]=function(k){return 1-S(1-k)},g.easing["easeInOut"+w]=function(k){return k<.5?S(k*2)/2:1-S(k*-2+2)/2}})}(),g.effects;/*!
 * jQuery UI Effects Blind 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("blind","hide",function(d,w){var S={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},k=g(this),R=d.direction||"up",W=k.cssClip(),se={clip:g.extend({},W)},le=g.effects.createPlaceholder(k);se.clip[S[R][0]]=se.clip[S[R][1]],d.mode==="show"&&(k.cssClip(se.clip),le&&le.css(g.effects.clipToBox(se)),se.clip=W),le&&le.animate(g.effects.clipToBox(se),d.duration,d.easing),k.animate(se,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Bounce 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("bounce",function(d,w){var S,k,R,W=g(this),se=d.mode,le=se==="hide",fe=se==="show",be=d.direction||"up",Te=d.distance,Ke=d.times||5,Me=Ke*2+(fe||le?1:0),me=d.duration/Me,De=d.easing,Xe=be==="up"||be==="down"?"top":"left",ct=be==="up"||be==="left",gt=0,Dt=W.queue().length;for(g.effects.createPlaceholder(W),R=W.css(Xe),Te||(Te=W[Xe==="top"?"outerHeight":"outerWidth"]()/3),fe&&(k={opacity:1},k[Xe]=R,W.css("opacity",0).css(Xe,ct?-Te*2:Te*2).animate(k,me,De)),le&&(Te=Te/Math.pow(2,Ke-1)),k={},k[Xe]=R;gt<Ke;gt++)S={},S[Xe]=(ct?"-=":"+=")+Te,W.animate(S,me,De).animate(k,me,De),Te=le?Te*2:Te/2;le&&(S={opacity:0},S[Xe]=(ct?"-=":"+=")+Te,W.animate(S,me,De)),W.queue(w),g.effects.unshift(W,Dt,Me+1)});/*!
 * jQuery UI Effects Clip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("clip","hide",function(d,w){var S,k={},R=g(this),W=d.direction||"vertical",se=W==="both",le=se||W==="horizontal",fe=se||W==="vertical";S=R.cssClip(),k.clip={top:fe?(S.bottom-S.top)/2:S.top,right:le?(S.right-S.left)/2:S.right,bottom:fe?(S.bottom-S.top)/2:S.bottom,left:le?(S.right-S.left)/2:S.left},g.effects.createPlaceholder(R),d.mode==="show"&&(R.cssClip(k.clip),k.clip=S),R.animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Drop 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("drop","hide",function(d,w){var S,k=g(this),R=d.mode,W=R==="show",se=d.direction||"left",le=se==="up"||se==="down"?"top":"left",fe=se==="up"||se==="left"?"-=":"+=",be=fe==="+="?"-=":"+=",Te={opacity:0};g.effects.createPlaceholder(k),S=d.distance||k[le==="top"?"outerHeight":"outerWidth"](!0)/2,Te[le]=fe+S,W&&(k.css(Te),Te[le]=be+S,Te.opacity=1),k.animate(Te,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Explode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("explode","hide",function(d,w){var S,k,R,W,se,le,fe=d.pieces?Math.round(Math.sqrt(d.pieces)):3,be=fe,Te=g(this),Ke=d.mode,Me=Ke==="show",me=Te.show().css("visibility","hidden").offset(),De=Math.ceil(Te.outerWidth()/be),Xe=Math.ceil(Te.outerHeight()/fe),ct=[];function gt(){ct.push(this),ct.length===fe*be&&Dt()}for(S=0;S<fe;S++)for(W=me.top+S*Xe,le=S-(fe-1)/2,k=0;k<be;k++)R=me.left+k*De,se=k-(be-1)/2,Te.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-k*De,top:-S*Xe}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:De,height:Xe,left:R+(Me?se*De:0),top:W+(Me?le*Xe:0),opacity:Me?0:1}).animate({left:R+(Me?0:se*De),top:W+(Me?0:le*Xe),opacity:Me?1:0},d.duration||500,d.easing,gt);function Dt(){Te.css({visibility:"visible"}),g(ct).remove(),w()}});/*!
 * jQuery UI Effects Fade 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fade","toggle",function(d,w){var S=d.mode==="show";g(this).css("opacity",S?0:1).animate({opacity:S?1:0},{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Fold 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fold","hide",function(d,w){var S=g(this),k=d.mode,R=k==="show",W=k==="hide",se=d.size||15,le=/([0-9]+)%/.exec(se),fe=!!d.horizFirst,be=fe?["right","bottom"]:["bottom","right"],Te=d.duration/2,Ke=g.effects.createPlaceholder(S),Me=S.cssClip(),me={clip:g.extend({},Me)},De={clip:g.extend({},Me)},Xe=[Me[be[0]],Me[be[1]]],ct=S.queue().length;le&&(se=parseInt(le[1],10)/100*Xe[W?0:1]),me.clip[be[0]]=se,De.clip[be[0]]=se,De.clip[be[1]]=0,R&&(S.cssClip(De.clip),Ke&&Ke.css(g.effects.clipToBox(De)),De.clip=Me),S.queue(function(gt){Ke&&Ke.animate(g.effects.clipToBox(me),Te,d.easing).animate(g.effects.clipToBox(De),Te,d.easing),gt()}).animate(me,Te,d.easing).animate(De,Te,d.easing).queue(w),g.effects.unshift(S,ct,4)});/*!
 * jQuery UI Effects Highlight 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("highlight","show",function(d,w){var S=g(this),k={backgroundColor:S.css("backgroundColor")};d.mode==="hide"&&(k.opacity=0),g.effects.saveStyle(S),S.css({backgroundImage:"none",backgroundColor:d.color||"#ffff99"}).animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Size 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("size",function(d,w){var S,k,R,W=g(this),se=["fontSize"],le=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],fe=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],be=d.mode,Te=be!=="effect",Ke=d.scale||"both",Me=d.origin||["middle","center"],me=W.css("position"),De=W.position(),Xe=g.effects.scaledDimensions(W),ct=d.from||Xe,gt=d.to||g.effects.scaledDimensions(W,0);g.effects.createPlaceholder(W),be==="show"&&(R=ct,ct=gt,gt=R),k={from:{y:ct.height/Xe.height,x:ct.width/Xe.width},to:{y:gt.height/Xe.height,x:gt.width/Xe.width}},(Ke==="box"||Ke==="both")&&(k.from.y!==k.to.y&&(ct=g.effects.setTransition(W,le,k.from.y,ct),gt=g.effects.setTransition(W,le,k.to.y,gt)),k.from.x!==k.to.x&&(ct=g.effects.setTransition(W,fe,k.from.x,ct),gt=g.effects.setTransition(W,fe,k.to.x,gt))),(Ke==="content"||Ke==="both")&&k.from.y!==k.to.y&&(ct=g.effects.setTransition(W,se,k.from.y,ct),gt=g.effects.setTransition(W,se,k.to.y,gt)),Me&&(S=g.effects.getBaseline(Me,Xe),ct.top=(Xe.outerHeight-ct.outerHeight)*S.y+De.top,ct.left=(Xe.outerWidth-ct.outerWidth)*S.x+De.left,gt.top=(Xe.outerHeight-gt.outerHeight)*S.y+De.top,gt.left=(Xe.outerWidth-gt.outerWidth)*S.x+De.left),delete ct.outerHeight,delete ct.outerWidth,W.css(ct),(Ke==="content"||Ke==="both")&&(le=le.concat(["marginTop","marginBottom"]).concat(se),fe=fe.concat(["marginLeft","marginRight"]),W.find("*[width]").each(function(){var Dt=g(this),Kt=g.effects.scaledDimensions(Dt),Gt={height:Kt.height*k.from.y,width:Kt.width*k.from.x,outerHeight:Kt.outerHeight*k.from.y,outerWidth:Kt.outerWidth*k.from.x},Qt={height:Kt.height*k.to.y,width:Kt.width*k.to.x,outerHeight:Kt.height*k.to.y,outerWidth:Kt.width*k.to.x};k.from.y!==k.to.y&&(Gt=g.effects.setTransition(Dt,le,k.from.y,Gt),Qt=g.effects.setTransition(Dt,le,k.to.y,Qt)),k.from.x!==k.to.x&&(Gt=g.effects.setTransition(Dt,fe,k.from.x,Gt),Qt=g.effects.setTransition(Dt,fe,k.to.x,Qt)),Te&&g.effects.saveStyle(Dt),Dt.css(Gt),Dt.animate(Qt,d.duration,d.easing,function(){Te&&g.effects.restoreStyle(Dt)})})),W.animate(gt,{queue:!1,duration:d.duration,easing:d.easing,complete:function(){var Dt=W.offset();gt.opacity===0&&W.css("opacity",ct.opacity),Te||(W.css("position",me==="static"?"relative":me).offset(Dt),g.effects.saveStyle(W)),w()}})});/*!
 * jQuery UI Effects Scale 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("scale",function(d,w){var S=g(this),k=d.mode,R=parseInt(d.percent,10)||(parseInt(d.percent,10)===0||k!=="effect"?0:100),W=g.extend(!0,{from:g.effects.scaledDimensions(S),to:g.effects.scaledDimensions(S,R,d.direction||"both"),origin:d.origin||["middle","center"]},d);d.fade&&(W.from.opacity=1,W.to.opacity=0),g.effects.effect.size.call(this,W,w)});/*!
 * jQuery UI Effects Puff 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("puff","hide",function(d,w){var S=g.extend(!0,{},d,{fade:!0,percent:parseInt(d.percent,10)||150});g.effects.effect.scale.call(this,S,w)});/*!
 * jQuery UI Effects Pulsate 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("pulsate","show",function(d,w){var S=g(this),k=d.mode,R=k==="show",W=k==="hide",se=R||W,le=(d.times||5)*2+(se?1:0),fe=d.duration/le,be=0,Te=1,Ke=S.queue().length;for((R||!S.is(":visible"))&&(S.css("opacity",0).show(),be=1);Te<le;Te++)S.animate({opacity:be},fe,d.easing),be=1-be;S.animate({opacity:be},fe,d.easing),S.queue(w),g.effects.unshift(S,Ke,le+1)});/*!
 * jQuery UI Effects Shake 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("shake",function(d,w){var S=1,k=g(this),R=d.direction||"left",W=d.distance||20,se=d.times||3,le=se*2+1,fe=Math.round(d.duration/le),be=R==="up"||R==="down"?"top":"left",Te=R==="up"||R==="left",Ke={},Me={},me={},De=k.queue().length;for(g.effects.createPlaceholder(k),Ke[be]=(Te?"-=":"+=")+W,Me[be]=(Te?"+=":"-=")+W*2,me[be]=(Te?"-=":"+=")+W*2,k.animate(Ke,fe,d.easing);S<se;S++)k.animate(Me,fe,d.easing).animate(me,fe,d.easing);k.animate(Me,fe,d.easing).animate(Ke,fe/2,d.easing).queue(w),g.effects.unshift(k,De,le+1)});/*!
 * jQuery UI Effects Slide 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("slide","show",function(d,w){var S,k,R=g(this),W={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},se=d.mode,le=d.direction||"left",fe=le==="up"||le==="down"?"top":"left",be=le==="up"||le==="left",Te=d.distance||R[fe==="top"?"outerHeight":"outerWidth"](!0),Ke={};g.effects.createPlaceholder(R),S=R.cssClip(),k=R.position()[fe],Ke[fe]=(be?-1:1)*Te+k,Ke.clip=R.cssClip(),Ke.clip[W[le][1]]=Ke.clip[W[le][0]],se==="show"&&(R.cssClip(Ke.clip),R.css(fe,Ke[fe]),Ke.clip=S,Ke[fe]=k),R.animate(Ke,{queue:!1,duration:d.duration,easing:d.easing,complete:w})}),g.uiBackCompat!==!1&&g.effects.define("transfer",function(d,w){g(this).transfer(d,w)});/*!
 * jQuery UI Focusable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.focusable=function(d,w){var S,k,R,W,se,le=d.nodeName.toLowerCase();return le==="area"?(S=d.parentNode,k=S.name,!d.href||!k||S.nodeName.toLowerCase()!=="map"?!1:(R=g("img[usemap='#"+k+"']"),R.length>0&&R.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(le)?(W=!d.disabled,W&&(se=g(d).closest("fieldset")[0],se&&(W=!se.disabled))):le==="a"?W=d.href||w:W=w,W&&g(d).is(":visible")&&wt(g(d)))};function wt(d){for(var w=d.css("visibility");w==="inherit";)d=d.parent(),w=d.css("visibility");return w==="visible"}g.extend(g.expr.pseudos,{focusable:function(d){return g.ui.focusable(d,g.attr(d,"tabindex")!=null)}}),g.ui.focusable,g.fn._form=function(){return typeof this[0].form=="string"?this.closest("form"):g(this[0].form)};/*!
 * jQuery UI Form Reset Mixin 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.formResetMixin={_formResetHandler:function(){var d=g(this);setTimeout(function(){var w=d.data("ui-form-reset-instances");g.each(w,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element._form(),!!this.form.length){var d=this.form.data("ui-form-reset-instances")||[];d.length||this.form.on("reset.ui-form-reset",this._formResetHandler),d.push(this),this.form.data("ui-form-reset-instances",d)}},_unbindFormResetHandler:function(){if(this.form.length){var d=this.form.data("ui-form-reset-instances");d.splice(g.inArray(this,d),1),d.length?this.form.data("ui-form-reset-instances",d):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */if(g.expr.pseudos||(g.expr.pseudos=g.expr[":"]),g.uniqueSort||(g.uniqueSort=g.unique),!g.escapeSelector){var Ft=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,_t=function(d,w){return w?d==="\0"?"ï¿½":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d};g.escapeSelector=function(d){return(d+"").replace(Ft,_t)}}(!g.fn.even||!g.fn.odd)&&g.fn.extend({even:function(){return this.filter(function(d){return d%2===0})},odd:function(){return this.filter(function(d){return d%2===1})}});/*!
 * jQuery UI Keycode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};/*!
 * jQuery UI Labels 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.labels=function(){var d,w,S,k,R;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(k=this.eq(0).parents("label"),S=this.attr("id"),S&&(d=this.eq(0).parents().last(),R=d.add(d.length?d.siblings():this.siblings()),w="label[for='"+g.escapeSelector(S)+"']",k=k.add(R.find(w).addBack(w))),this.pushStack(k)):this.pushStack([])};/*!
 * jQuery UI Scroll Parent 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.scrollParent=function(d){var w=this.css("position"),S=w==="absolute",k=d?/(auto|scroll|hidden)/:/(auto|scroll)/,R=this.parents().filter(function(){var W=g(this);return S&&W.css("position")==="static"?!1:k.test(W.css("overflow")+W.css("overflow-y")+W.css("overflow-x"))}).eq(0);return w==="fixed"||!R.length?g(this[0].ownerDocument||document):R};/*!
 * jQuery UI Tabbable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{tabbable:function(d){var w=g.attr(d,"tabindex"),S=w!=null;return(!S||w>=0)&&g.ui.focusable(d,S)}});/*!
 * jQuery UI Unique ID 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({uniqueId:function(){var d=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&g(this).removeAttr("id")})}});/*!
 * jQuery UI Accordion 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(d){return d.find("> li > :first-child").add(d.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var d=this.options;this.prevShow=this.prevHide=g(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),!d.collapsible&&(d.active===!1||d.active==null)&&(d.active=0),this._processPanels(),d.active<0&&(d.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():g()}},_createIcons:function(){var d,w,S=this.options.icons;S&&(d=g("<span>"),this._addClass(d,"ui-accordion-header-icon","ui-icon "+S.header),d.prependTo(this.headers),w=this.active.children(".ui-accordion-header-icon"),this._removeClass(w,S.header)._addClass(w,null,S.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var d;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),d=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&d.css("height","")},_setOption:function(d,w){if(d==="active"){this._activate(w);return}d==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(w)),this._super(d,w),d==="collapsible"&&!w&&this.options.active===!1&&this._activate(0),d==="icons"&&(this._destroyIcons(),w&&this._createIcons())},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!d)},_keydown:function(d){if(!(d.altKey||d.ctrlKey)){var w=g.ui.keyCode,S=this.headers.length,k=this.headers.index(d.target),R=!1;switch(d.keyCode){case w.RIGHT:case w.DOWN:R=this.headers[(k+1)%S];break;case w.LEFT:case w.UP:R=this.headers[(k-1+S)%S];break;case w.SPACE:case w.ENTER:this._eventHandler(d);break;case w.HOME:R=this.headers[0];break;case w.END:R=this.headers[S-1];break}R&&(g(d.target).attr("tabIndex",-1),g(R).attr("tabIndex",0),g(R).trigger("focus"),d.preventDefault())}},_panelKeyDown:function(d){d.keyCode===g.ui.keyCode.UP&&d.ctrlKey&&g(d.currentTarget).prev().trigger("focus")},refresh:function(){var d=this.options;this._processPanels(),d.active===!1&&d.collapsible===!0||!this.headers.length?(d.active=!1,this.active=g()):d.active===!1?this._activate(0):this.active.length&&!g.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(d.active=!1,this.active=g()):this._activate(Math.max(0,d.active-1)):d.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var d=this.headers,w=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),w&&(this._off(d.not(this.headers)),this._off(w.not(this.panels)))},_refresh:function(){var d,w=this.options,S=w.heightStyle,k=this.element.parent();this.active=this._findActive(w.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var R=g(this),W=R.uniqueId().attr("id"),se=R.next(),le=se.uniqueId().attr("id");R.attr("aria-controls",le),se.attr("aria-labelledby",W)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(w.event),S==="fill"?(d=k.height(),this.element.siblings(":visible").each(function(){var R=g(this),W=R.css("position");W==="absolute"||W==="fixed"||(d-=R.outerHeight(!0))}),this.headers.each(function(){d-=g(this).outerHeight(!0)}),this.headers.next().each(function(){g(this).height(Math.max(0,d-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):S==="auto"&&(d=0,this.headers.next().each(function(){var R=g(this).is(":visible");R||g(this).show(),d=Math.max(d,g(this).css("height","").height()),R||g(this).hide()}).height(d))},_activate:function(d){var w=this._findActive(d)[0];w!==this.active[0]&&(w=w||this.active[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return typeof d=="number"?this.headers.eq(d):g()},_setupEvents:function(d){var w={keydown:"_keydown"};d&&g.each(d.split(" "),function(S,k){w[k]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,w),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(d){var w,S,k=this.options,R=this.active,W=g(d.currentTarget),se=W[0]===R[0],le=se&&k.collapsible,fe=le?g():W.next(),be=R.next(),Te={oldHeader:R,oldPanel:be,newHeader:le?g():W,newPanel:fe};d.preventDefault(),!(se&&!k.collapsible||this._trigger("beforeActivate",d,Te)===!1)&&(k.active=le?!1:this.headers.index(W),this.active=se?g():W,this._toggle(Te),this._removeClass(R,"ui-accordion-header-active","ui-state-active"),k.icons&&(w=R.children(".ui-accordion-header-icon"),this._removeClass(w,null,k.icons.activeHeader)._addClass(w,null,k.icons.header)),se||(this._removeClass(W,"ui-accordion-header-collapsed")._addClass(W,"ui-accordion-header-active","ui-state-active"),k.icons&&(S=W.children(".ui-accordion-header-icon"),this._removeClass(S,null,k.icons.header)._addClass(S,null,k.icons.activeHeader)),this._addClass(W.next(),"ui-accordion-content-active")))},_toggle:function(d){var w=d.newPanel,S=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=w,this.prevHide=S,this.options.animate?this._animate(w,S,d):(S.hide(),w.show(),this._toggleComplete(d)),S.attr({"aria-hidden":"true"}),S.prev().attr({"aria-selected":"false","aria-expanded":"false"}),w.length&&S.length?S.prev().attr({tabIndex:-1,"aria-expanded":"false"}):w.length&&this.headers.filter(function(){return parseInt(g(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),w.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(d,w,S){var k,R,W,se=this,le=0,fe=d.css("box-sizing"),be=d.length&&(!w.length||d.index()<w.index()),Te=this.options.animate||{},Ke=be&&Te.down||Te,Me=function(){se._toggleComplete(S)};if(typeof Ke=="number"&&(W=Ke),typeof Ke=="string"&&(R=Ke),R=R||Ke.easing||Te.easing,W=W||Ke.duration||Te.duration,!w.length)return d.animate(this.showProps,W,R,Me);if(!d.length)return w.animate(this.hideProps,W,R,Me);k=d.show().outerHeight(),w.animate(this.hideProps,{duration:W,easing:R,step:function(me,De){De.now=Math.round(me)}}),d.hide().animate(this.showProps,{duration:W,easing:R,complete:Me,step:function(me,De){De.now=Math.round(me),De.prop!=="height"?fe==="content-box"&&(le+=De.now):se.options.heightStyle!=="content"&&(De.now=Math.round(k-w.outerHeight()-le),le=0)}})},_toggleComplete:function(d){var w=d.oldPanel,S=w.prev();this._removeClass(w,"ui-accordion-content-active"),this._removeClass(S,"ui-accordion-header-active")._addClass(S,"ui-accordion-header-collapsed"),w.length&&(w.parent()[0].className=w.parent()[0].className),this._trigger("activate",null,d)}}),g.ui.safeActiveElement=function(d){var w;try{w=d.activeElement}catch{w=d.body}return w||(w=d.body),w.nodeName||(w=d.body),w};/*!
 * jQuery UI Menu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(d){d.preventDefault(),this._activateItem(d)},"click .ui-menu-item":function(d){var w=g(d.target),S=g(g.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&w.not(".ui-state-disabled").length&&(this.select(d),d.isPropagationStopped()||(this.mouseHandled=!0),w.has(".ui-menu").length?this.expand(d):!this.element.is(":focus")&&S.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,w){var S=this.active||this._menuItems().first();w||this.focus(d,S)},blur:function(d){this._delay(function(){var w=!g.contains(this.element[0],g.ui.safeActiveElement(this.document[0]));w&&this.collapseAll(d)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(d){this._closeOnDocumentClick(d)&&this.collapseAll(d,!0),this.mouseHandled=!1}})},_activateItem:function(d){if(!this.previousFilter&&!(d.clientX===this.lastMousePosition.x&&d.clientY===this.lastMousePosition.y)){this.lastMousePosition={x:d.clientX,y:d.clientY};var w=g(d.target).closest(".ui-menu-item"),S=g(d.currentTarget);w[0]===S[0]&&(S.is(".ui-state-active")||(this._removeClass(S.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(d,S)))}},_destroy:function(){var d=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),w=d.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),w.children().each(function(){var S=g(this);S.data("ui-menu-submenu-caret")&&S.remove()})},_keydown:function(d){var w,S,k,R,W=!0;switch(d.keyCode){case g.ui.keyCode.PAGE_UP:this.previousPage(d);break;case g.ui.keyCode.PAGE_DOWN:this.nextPage(d);break;case g.ui.keyCode.HOME:this._move("first","first",d);break;case g.ui.keyCode.END:this._move("last","last",d);break;case g.ui.keyCode.UP:this.previous(d);break;case g.ui.keyCode.DOWN:this.next(d);break;case g.ui.keyCode.LEFT:this.collapse(d);break;case g.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(d);break;case g.ui.keyCode.ENTER:case g.ui.keyCode.SPACE:this._activate(d);break;case g.ui.keyCode.ESCAPE:this.collapse(d);break;default:W=!1,S=this.previousFilter||"",R=!1,k=d.keyCode>=96&&d.keyCode<=105?(d.keyCode-96).toString():String.fromCharCode(d.keyCode),clearTimeout(this.filterTimer),k===S?R=!0:k=S+k,w=this._filterMenuItems(k),w=R&&w.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):w,w.length||(k=String.fromCharCode(d.keyCode),w=this._filterMenuItems(k)),w.length?(this.focus(d,w),this.previousFilter=k,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}W&&d.preventDefault()},_activate:function(d){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(d):this.select(d))},refresh:function(){var d,w,S,k,R,W=this,se=this.options.icons.submenu,le=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),S=le.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var fe=g(this),be=fe.prev(),Te=g("<span>").data("ui-menu-submenu-caret",!0);W._addClass(Te,"ui-menu-icon","ui-icon "+se),be.attr("aria-haspopup","true").prepend(Te),fe.attr("aria-labelledby",be.attr("id"))}),this._addClass(S,"ui-menu","ui-widget ui-widget-content ui-front"),d=le.add(this.element),w=d.find(this.options.items),w.not(".ui-menu-item").each(function(){var fe=g(this);W._isDivider(fe)&&W._addClass(fe,"ui-menu-divider","ui-widget-content")}),k=w.not(".ui-menu-item, .ui-menu-divider"),R=k.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(k,"ui-menu-item")._addClass(R,"ui-menu-item-wrapper"),w.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!g.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(d,w){if(d==="icons"){var S=this.element.find(".ui-menu-icon");this._removeClass(S,null,this.options.icons.submenu)._addClass(S,null,w.submenu)}this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",String(d)),this._toggleClass(null,"ui-state-disabled",!!d)},focus:function(d,w){var S,k,R;this.blur(d,d&&d.type==="focus"),this._scrollIntoView(w),this.active=w.first(),k=this.active.children(".ui-menu-item-wrapper"),this._addClass(k,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",k.attr("id")),R=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(R,null,"ui-state-active"),d&&d.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),S=w.children(".ui-menu"),S.length&&d&&/^mouse/.test(d.type)&&this._startOpening(S),this.activeMenu=w.parent(),this._trigger("focus",d,{item:w})},_scrollIntoView:function(d){var w,S,k,R,W,se;this._hasScroll()&&(w=parseFloat(g.css(this.activeMenu[0],"borderTopWidth"))||0,S=parseFloat(g.css(this.activeMenu[0],"paddingTop"))||0,k=d.offset().top-this.activeMenu.offset().top-w-S,R=this.activeMenu.scrollTop(),W=this.activeMenu.height(),se=d.outerHeight(),k<0?this.activeMenu.scrollTop(R+k):k+se>W&&this.activeMenu.scrollTop(R+k-W+se))},blur:function(d,w){w||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",d,{item:this.active}),this.active=null)},_startOpening:function(d){clearTimeout(this.timer),d.attr("aria-hidden")==="true"&&(this.timer=this._delay(function(){this._close(),this._open(d)},this.delay))},_open:function(d){var w=g.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(w)},collapseAll:function(d,w){clearTimeout(this.timer),this.timer=this._delay(function(){var S=w?this.element:g(d&&d.target).closest(this.element.find(".ui-menu"));S.length||(S=this.element),this._close(S),this.blur(d),this._removeClass(S.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=S},w?0:this.delay)},_close:function(d){d||(d=this.active?this.active.parent():this.element),d.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(d){return!g(d.target).closest(".ui-menu").length},_isDivider:function(d){return!/[^\-\u2014\u2013\s]/.test(d.text())},collapse:function(d){var w=this.active&&this.active.parent().closest(".ui-menu-item",this.element);w&&w.length&&(this._close(),this.focus(d,w))},expand:function(d){var w=this.active&&this._menuItems(this.active.children(".ui-menu")).first();w&&w.length&&(this._open(w.parent()),this._delay(function(){this.focus(d,w)}))},next:function(d){this._move("next","first",d)},previous:function(d){this._move("prev","last",d)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(d){return(d||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(d,w,S){var k;this.active&&(d==="first"||d==="last"?k=this.active[d==="first"?"prevAll":"nextAll"](".ui-menu-item").last():k=this.active[d+"All"](".ui-menu-item").first()),(!k||!k.length||!this.active)&&(k=this._menuItems(this.activeMenu)[w]()),this.focus(S,k)},nextPage:function(d){var w,S,k;if(!this.active){this.next(d);return}this.isLastItem()||(this._hasScroll()?(S=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-S-k<0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu)[this.active?"last":"first"]()))},previousPage:function(d){var w,S,k;if(!this.active){this.next(d);return}this.isFirstItem()||(this._hasScroll()?(S=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-S+k>0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||g(d.target).closest(".ui-menu-item");var w={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,w)},_filterMenuItems:function(d){var w=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),S=new RegExp("^"+w,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return S.test(String.prototype.trim.call(g(this).children(".ui-menu-item-wrapper").text()))})}});/*!
 * jQuery UI Autocomplete 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var d,w,S,k=this.element[0].nodeName.toLowerCase(),R=k==="textarea",W=k==="input";this.isMultiLine=R||!W&&this._isContentEditable(this.element),this.valueMethod=this.element[R||W?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(se){if(this.element.prop("readOnly")){d=!0,S=!0,w=!0;return}d=!1,S=!1,w=!1;var le=g.ui.keyCode;switch(se.keyCode){case le.PAGE_UP:d=!0,this._move("previousPage",se);break;case le.PAGE_DOWN:d=!0,this._move("nextPage",se);break;case le.UP:d=!0,this._keyEvent("previous",se);break;case le.DOWN:d=!0,this._keyEvent("next",se);break;case le.ENTER:this.menu.active&&(d=!0,se.preventDefault(),this.menu.select(se));break;case le.TAB:this.menu.active&&this.menu.select(se);break;case le.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(se),se.preventDefault());break;default:w=!0,this._searchTimeout(se);break}},keypress:function(se){if(d){d=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&se.preventDefault();return}if(!w){var le=g.ui.keyCode;switch(se.keyCode){case le.PAGE_UP:this._move("previousPage",se);break;case le.PAGE_DOWN:this._move("nextPage",se);break;case le.UP:this._keyEvent("previous",se);break;case le.DOWN:this._keyEvent("next",se);break}}},input:function(se){if(S){S=!1,se.preventDefault();return}this._searchTimeout(se)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(se){clearTimeout(this.searching),this.close(se),this._change(se)}}),this._initSource(),this.menu=g("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(se){se.preventDefault()},menufocus:function(se,le){var fe,be;if(this.isNewMenu&&(this.isNewMenu=!1,se.originalEvent&&/^mouse/.test(se.originalEvent.type))){this.menu.blur(),this.document.one("mousemove",function(){g(se.target).trigger(se.originalEvent)});return}be=le.item.data("ui-autocomplete-item"),this._trigger("focus",se,{item:be})!==!1&&se.originalEvent&&/^key/.test(se.originalEvent.type)&&this._value(be.value),fe=le.item.attr("aria-label")||be.value,fe&&String.prototype.trim.call(fe).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(fe))},100))},menuselect:function(se,le){var fe=le.item.data("ui-autocomplete-item"),be=this.previous;this.element[0]!==g.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=be,this._delay(function(){this.previous=be,this.selectedItem=fe})),this._trigger("select",se,{item:fe})!==!1&&this._value(fe.value),this.term=this._value(),this.close(se),this.selectedItem=fe}}),this.liveRegion=g("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(d,w){this._super(d,w),d==="source"&&this._initSource(),d==="appendTo"&&this.menu.element.appendTo(this._appendTo()),d==="disabled"&&w&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(d){var w=this.menu.element[0];return d.target===this.element[0]||d.target===w||g.contains(w,d.target)},_closeOnClickOutside:function(d){this._isEventTargetInWidget(d)||this.close()},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_initSource:function(){var d,w,S=this;Array.isArray(this.options.source)?(d=this.options.source,this.source=function(k,R){R(g.ui.autocomplete.filter(d,k.term))}):typeof this.options.source=="string"?(w=this.options.source,this.source=function(k,R){S.xhr&&S.xhr.abort(),S.xhr=g.ajax({url:w,data:k,dataType:"json",success:function(W){R(W)},error:function(){R([])}})}):this.source=this.options.source},_searchTimeout:function(d){clearTimeout(this.searching),this.searching=this._delay(function(){var w=this.term===this._value(),S=this.menu.element.is(":visible"),k=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;(!w||w&&!S&&!k)&&(this.selectedItem=null,this.search(null,d))},this.options.delay)},search:function(d,w){if(d=d??this._value(),this.term=this._value(),d.length<this.options.minLength)return this.close(w);if(this._trigger("search",w)!==!1)return this._search(d)},_search:function(d){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;return(function(w){d===this.requestIndex&&this.__response(w),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}).bind(this)},__response:function(d){d&&(d=this._normalize(d)),this._trigger("response",null,{content:d}),!this.options.disabled&&d&&d.length&&!this.cancelSearch?(this._suggest(d),this._trigger("open")):this._close()},close:function(d){this.cancelSearch=!0,this._close(d)},_close:function(d){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",d))},_change:function(d){this.previous!==this._value()&&this._trigger("change",d,{item:this.selectedItem})},_normalize:function(d){return d.length&&d[0].label&&d[0].value?d:g.map(d,function(w){return typeof w=="string"?{label:w,value:w}:g.extend({},w,{label:w.label||w.value,value:w.value||w.label})})},_suggest:function(d){var w=this.menu.element.empty();this._renderMenu(w,d),this.isNewMenu=!0,this.menu.refresh(),w.show(),this._resizeMenu(),w.position(g.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(d,w){var S=this;g.each(w,function(k,R){S._renderItemData(d,R)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-autocomplete-item",w)},_renderItem:function(d,w){return g("<li>").append(g("<div>").text(w.label)).appendTo(d)},_move:function(d,w){if(!this.menu.element.is(":visible")){this.search(null,w);return}if(this.menu.isFirstItem()&&/^previous/.test(d)||this.menu.isLastItem()&&/^next/.test(d)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[d](w)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(d,w){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(d,w),w.preventDefault())},_isContentEditable:function(d){if(!d.length)return!1;var w=d.prop("contentEditable");return w==="inherit"?this._isContentEditable(d.parent()):w==="true"}}),g.extend(g.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,w){var S=new RegExp(g.ui.autocomplete.escapeRegex(w),"i");return g.grep(d,function(k){return S.test(k.label||k.value||k)})}}),g.widget("ui.autocomplete",g.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var w;this._superApply(arguments),!(this.options.disabled||this.cancelSearch)&&(d&&d.length?w=this.options.messages.results(d.length):w=this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(w))},100))}}),g.ui.autocomplete;/*!
 * jQuery UI Controlgroup 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Pt=/ui-corner-([a-z]){2,6}/g;g.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var d=this,w=[];g.each(this.options.items,function(S,k){var R,W={};if(k){if(S==="controlgroupLabel"){R=d.element.find(k),R.each(function(){var se=g(this);se.children(".ui-controlgroup-label-contents").length||se.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),d._addClass(R,null,"ui-widget ui-widget-content ui-state-default"),w=w.concat(R.get());return}g.fn[S]&&(d["_"+S+"Options"]?W=d["_"+S+"Options"]("middle"):W={classes:{}},d.element.find(k).each(function(){var se=g(this),le=se[S]("instance"),fe=g.widget.extend({},W);if(!(S==="button"&&se.parent(".ui-spinner").length)){le||(le=se[S]()[S]("instance")),le&&(fe.classes=d._resolveClassesValues(fe.classes,le)),se[S](fe);var be=se[S]("widget");g.data(be[0],"ui-controlgroup-data",le||se[S]("instance")),w.push(be[0])}}))}}),this.childWidgets=g(g.uniqueSort(w)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(d){this.childWidgets.each(function(){var w=g(this),S=w.data("ui-controlgroup-data");S&&S[d]&&S[d]()})},_updateCornerClass:function(d,w){var S="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",k=this._buildSimpleOptions(w,"label").classes.label;this._removeClass(d,null,S),this._addClass(d,null,k)},_buildSimpleOptions:function(d,w){var S=this.options.direction==="vertical",k={classes:{}};return k.classes[w]={middle:"",first:"ui-corner-"+(S?"top":"left"),last:"ui-corner-"+(S?"bottom":"right"),only:"ui-corner-all"}[d],k},_spinnerOptions:function(d){var w=this._buildSimpleOptions(d,"ui-spinner");return w.classes["ui-spinner-up"]="",w.classes["ui-spinner-down"]="",w},_buttonOptions:function(d){return this._buildSimpleOptions(d,"ui-button")},_checkboxradioOptions:function(d){return this._buildSimpleOptions(d,"ui-checkboxradio-label")},_selectmenuOptions:function(d){var w=this.options.direction==="vertical";return{width:w?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(w?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(w?"top":"left")},last:{"ui-selectmenu-button-open":w?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(w?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[d]}},_resolveClassesValues:function(d,w){var S={};return g.each(d,function(k){var R=w.options.classes[k]||"";R=String.prototype.trim.call(R.replace(Pt,"")),S[k]=(R+" "+d[k]).replace(/\s+/g," ")}),S},_setOption:function(d,w){if(d==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(d,w),d==="disabled"){this._callChildMethod(w?"disable":"enable");return}this.refresh()},refresh:function(){var d,w=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),d=this.childWidgets,this.options.onlyVisible&&(d=d.filter(":visible")),d.length&&(g.each(["first","last"],function(S,k){var R=d[k]().data("ui-controlgroup-data");if(R&&w["_"+R.widgetName+"Options"]){var W=w["_"+R.widgetName+"Options"](d.length===1?"only":k);W.classes=w._resolveClassesValues(W.classes,R),R.element[R.widgetName](W)}else w._updateCornerClass(d[k](),k)}),this._callChildMethod("refresh"))}});/*!
 * jQuery UI Checkboxradio 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.checkboxradio",[g.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var d,w,S,k=this._super()||{};return this._readType(),w=this.element.labels(),this.label=g(w[w.length-1]),this.label.length||g.error("No label found for checkboxradio widget"),this.originalLabel="",S=this.label.contents().not(this.element[0]),S.length&&(this.originalLabel+=S.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(k.label=this.originalLabel),d=this.element[0].disabled,d!=null&&(k.disabled=d),k},_create:function(){var d=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),d&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var d=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,(d!=="input"||!/radio|checkbox/.test(this.type))&&g.error("Can't create checkboxradio on element.nodeName="+d+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var d,w=this.element[0].name,S="input[name='"+g.escapeSelector(w)+"']";return w?(this.form.length?d=g(this.form[0].elements).filter(S):d=g(S).filter(function(){return g(this)._form().length===0}),d.not(this.element)):g([])},_toggleClasses:function(){var d=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",d)._toggleClass(this.icon,null,"ui-icon-blank",!d),this.type==="radio"&&this._getRadioGroup().each(function(){var w=g(this).checkboxradio("instance");w&&w._removeClass(w.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(d,w){if(!(d==="label"&&!w)){if(this._super(d,w),d==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",w),this.element[0].disabled=w;return}this.refresh()}},_updateIcon:function(d){var w="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=g("<span>"),this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(w+=d?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,d?"ui-icon-blank":"ui-icon-check")):w+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",w),d||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var d=this.label.contents().not(this.element[0]);this.icon&&(d=d.not(this.icon[0])),this.iconSpace&&(d=d.not(this.iconSpace[0])),d.remove(),this.label.append(this.options.label)},refresh:function(){var d=this.element[0].checked,w=this.element[0].disabled;this._updateIcon(d),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.label!==null&&this._updateLabel(),w!==this.options.disabled&&this._setOptions({disabled:w})}}]),g.ui.checkboxradio;/*!
 * jQuery UI Button 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var d,w=this._super()||{};return this.isInput=this.element.is("input"),d=this.element[0].disabled,d!=null&&(w.disabled=d),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(w.label=this.originalLabel),w},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(d){d.keyCode===g.ui.keyCode.SPACE&&(d.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),!this.options.showLabel&&!this.title&&this.element.attr("title",this.options.label)},_updateIcon:function(d,w){var S=d!=="iconPosition",k=S?this.options.iconPosition:w,R=k==="top"||k==="bottom";this.icon?S&&this._removeClass(this.icon,null,this.options.icon):(this.icon=g("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),S&&this._addClass(this.icon,null,w),this._attachIcon(k),R?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(k))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(d){this.icon[/^(?:end|bottom)/.test(d)?"before":"after"](this.iconSpace)},_attachIcon:function(d){this.element[/^(?:end|bottom)/.test(d)?"append":"prepend"](this.icon)},_setOptions:function(d){var w=d.showLabel===void 0?this.options.showLabel:d.showLabel,S=d.icon===void 0?this.options.icon:d.icon;!w&&!S&&(d.showLabel=!0),this._super(d)},_setOption:function(d,w){d==="icon"&&(w?this._updateIcon(d,w):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),d==="iconPosition"&&this._updateIcon(d,w),d==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!w),this._updateTooltip()),d==="label"&&(this.isInput?this.element.val(w):(this.element.html(w),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(d,w),d==="disabled"&&(this._toggleClass(null,"ui-state-disabled",w),this.element[0].disabled=w,w&&this.element.trigger("blur"))},refresh:function(){var d=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");d!==this.options.disabled&&this._setOptions({disabled:d}),this._updateTooltip()}}),g.uiBackCompat!==!1&&(g.widget("ui.button",g.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)?this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"):this.options.icon&&(this.options.icons.primary=this.options.icon),this._super()},_setOption:function(d,w){if(d==="text"){this._super("showLabel",w);return}d==="showLabel"&&(this.options.text=w),d==="icon"&&(this.options.icons.primary=w),d==="icons"&&(w.primary?(this._super("icon",w.primary),this._super("iconPosition","beginning")):w.secondary&&(this._super("icon",w.secondary),this._super("iconPosition","end"))),this._superApply(arguments)}}),g.fn.button=function(d){return function(w){var S=typeof w=="string",k=Array.prototype.slice.call(arguments,1),R=this;return S?!this.length&&w==="instance"?R=void 0:this.each(function(){var W,se=g(this).attr("type"),le=se!=="checkbox"&&se!=="radio"?"button":"checkboxradio",fe=g.data(this,"ui-"+le);if(w==="instance")return R=fe,!1;if(!fe)return g.error("cannot call methods on button prior to initialization; attempted to call method '"+w+"'");if(typeof fe[w]!="function"||w.charAt(0)==="_")return g.error("no such method '"+w+"' for button widget instance");if(W=fe[w].apply(fe,k),W!==fe&&W!==void 0)return R=W&&W.jquery?R.pushStack(W.get()):W,!1}):(k.length&&(w=g.widget.extend.apply(null,[w].concat(k))),this.each(function(){var W=g(this).attr("type"),se=W!=="checkbox"&&W!=="radio"?"button":"checkboxradio",le=g.data(this,"ui-"+se);if(le)le.option(w||{}),le._init&&le._init();else{if(se==="button"){d.call(g(this),w);return}g(this).checkboxradio(g.extend({icon:!1},w))}})),R}}(g.fn.button),g.fn.buttonset=function(){return g.ui.controlgroup||g.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),g.ui.button;/*!
 * jQuery UI Datepicker 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.ui,{datepicker:{version:"1.13.2"}});var Mt;function Vt(d){for(var w,S;d.length&&d[0]!==document;){if(w=d.css("position"),(w==="absolute"||w==="relative"||w==="fixed")&&(S=parseInt(d.css("zIndex"),10),!isNaN(S)&&S!==0))return S;d=d.parent()}return 0}function Ai(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},g.extend(this._defaults,this.regional[""]),this.regional.en=g.extend(!0,{},this.regional[""]),this.regional["en-US"]=g.extend(!0,{},this.regional.en),this.dpDiv=Ri(g("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}g.extend(Ai.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(d){return Li(this._defaults,d||{}),this},_attachDatepicker:function(d,w){var S,k,R;S=d.nodeName.toLowerCase(),k=S==="div"||S==="span",d.id||(this.uuid+=1,d.id="dp"+this.uuid),R=this._newInst(g(d),k),R.settings=g.extend({},w||{}),S==="input"?this._connectDatepicker(d,R):k&&this._inlineDatepicker(d,R)},_newInst:function(d,w){var S=d[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:S,input:d,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:w,dpDiv:w?Ri(g("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(d,w){var S=g(d);w.append=g([]),w.trigger=g([]),!S.hasClass(this.markerClassName)&&(this._attachments(S,w),S.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(w),g.data(d,"datepicker",w),w.settings.disabled&&this._disableDatepicker(d))},_attachments:function(d,w){var S,k,R,W=this._get(w,"appendText"),se=this._get(w,"isRTL");w.append&&w.append.remove(),W&&(w.append=g("<span>").addClass(this._appendClass).text(W),d[se?"before":"after"](w.append)),d.off("focus",this._showDatepicker),w.trigger&&w.trigger.remove(),S=this._get(w,"showOn"),(S==="focus"||S==="both")&&d.on("focus",this._showDatepicker),(S==="button"||S==="both")&&(k=this._get(w,"buttonText"),R=this._get(w,"buttonImage"),this._get(w,"buttonImageOnly")?w.trigger=g("<img>").addClass(this._triggerClass).attr({src:R,alt:k,title:k}):(w.trigger=g("<button type='button'>").addClass(this._triggerClass),R?w.trigger.html(g("<img>").attr({src:R,alt:k,title:k})):w.trigger.text(k)),d[se?"before":"after"](w.trigger),w.trigger.on("click",function(){return g.datepicker._datepickerShowing&&g.datepicker._lastInput===d[0]?g.datepicker._hideDatepicker():(g.datepicker._datepickerShowing&&g.datepicker._lastInput!==d[0]&&g.datepicker._hideDatepicker(),g.datepicker._showDatepicker(d[0])),!1}))},_autoSize:function(d){if(this._get(d,"autoSize")&&!d.inline){var w,S,k,R,W=new Date(2009,11,20),se=this._get(d,"dateFormat");se.match(/[DM]/)&&(w=function(le){for(S=0,k=0,R=0;R<le.length;R++)le[R].length>S&&(S=le[R].length,k=R);return k},W.setMonth(w(this._get(d,se.match(/MM/)?"monthNames":"monthNamesShort"))),W.setDate(w(this._get(d,se.match(/DD/)?"dayNames":"dayNamesShort"))+20-W.getDay())),d.input.attr("size",this._formatDate(d,W).length)}},_inlineDatepicker:function(d,w){var S=g(d);S.hasClass(this.markerClassName)||(S.addClass(this.markerClassName).append(w.dpDiv),g.data(d,"datepicker",w),this._setDate(w,this._getDefaultDate(w),!0),this._updateDatepicker(w),this._updateAlternate(w),w.settings.disabled&&this._disableDatepicker(d),w.dpDiv.css("display","block"))},_dialogDatepicker:function(d,w,S,k,R){var W,se,le,fe,be,Te=this._dialogInst;return Te||(this.uuid+=1,W="dp"+this.uuid,this._dialogInput=g("<input type='text' id='"+W+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),g("body").append(this._dialogInput),Te=this._dialogInst=this._newInst(this._dialogInput,!1),Te.settings={},g.data(this._dialogInput[0],"datepicker",Te)),Li(Te.settings,k||{}),w=w&&w.constructor===Date?this._formatDate(Te,w):w,this._dialogInput.val(w),this._pos=R?R.length?R:[R.pageX,R.pageY]:null,this._pos||(se=document.documentElement.clientWidth,le=document.documentElement.clientHeight,fe=document.documentElement.scrollLeft||document.body.scrollLeft,be=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[se/2-100+fe,le/2-150+be]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),Te.settings.onSelect=S,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),g.blockUI&&g.blockUI(this.dpDiv),g.data(this._dialogInput[0],"datepicker",Te),this},_destroyDatepicker:function(d){var w,S=g(d),k=g.data(d,"datepicker");S.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),g.removeData(d,"datepicker"),w==="input"?(k.append.remove(),k.trigger.remove(),S.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):(w==="div"||w==="span")&&S.removeClass(this.markerClassName).empty(),Mt===k&&(Mt=null,this._curInst=null))},_enableDatepicker:function(d){var w,S,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!1,R.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(w==="div"||w==="span")&&(S=k.children("."+this._inlineClass),S.children().removeClass("ui-state-disabled"),S.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}))},_disableDatepicker:function(d){var w,S,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!0,R.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(w==="div"||w==="span")&&(S=k.children("."+this._inlineClass),S.children().addClass("ui-state-disabled"),S.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}),this._disabledInputs[this._disabledInputs.length]=d)},_isDisabledDatepicker:function(d){if(!d)return!1;for(var w=0;w<this._disabledInputs.length;w++)if(this._disabledInputs[w]===d)return!0;return!1},_getInst:function(d){try{return g.data(d,"datepicker")}catch{throw"Missing instance data for this datepicker"}},_optionDatepicker:function(d,w,S){var k,R,W,se,le=this._getInst(d);if(arguments.length===2&&typeof w=="string")return w==="defaults"?g.extend({},g.datepicker._defaults):le?w==="all"?g.extend({},le.settings):this._get(le,w):null;k=w||{},typeof w=="string"&&(k={},k[w]=S),le&&(this._curInst===le&&this._hideDatepicker(),R=this._getDateDatepicker(d,!0),W=this._getMinMaxDate(le,"min"),se=this._getMinMaxDate(le,"max"),Li(le.settings,k),W!==null&&k.dateFormat!==void 0&&k.minDate===void 0&&(le.settings.minDate=this._formatDate(le,W)),se!==null&&k.dateFormat!==void 0&&k.maxDate===void 0&&(le.settings.maxDate=this._formatDate(le,se)),"disabled"in k&&(k.disabled?this._disableDatepicker(d):this._enableDatepicker(d)),this._attachments(g(d),le),this._autoSize(le),this._setDate(le,R),this._updateAlternate(le),this._updateDatepicker(le))},_changeDatepicker:function(d,w,S){this._optionDatepicker(d,w,S)},_refreshDatepicker:function(d){var w=this._getInst(d);w&&this._updateDatepicker(w)},_setDateDatepicker:function(d,w){var S=this._getInst(d);S&&(this._setDate(S,w),this._updateDatepicker(S),this._updateAlternate(S))},_getDateDatepicker:function(d,w){var S=this._getInst(d);return S&&!S.inline&&this._setDateFromField(S,w),S?this._getDate(S):null},_doKeyDown:function(d){var w,S,k,R=g.datepicker._getInst(d.target),W=!0,se=R.dpDiv.is(".ui-datepicker-rtl");if(R._keyEvent=!0,g.datepicker._datepickerShowing)switch(d.keyCode){case 9:g.datepicker._hideDatepicker(),W=!1;break;case 13:return k=g("td."+g.datepicker._dayOverClass+":not(."+g.datepicker._currentClass+")",R.dpDiv),k[0]&&g.datepicker._selectDay(d.target,R.selectedMonth,R.selectedYear,k[0]),w=g.datepicker._get(R,"onSelect"),w?(S=g.datepicker._formatDate(R),w.apply(R.input?R.input[0]:null,[S,R])):g.datepicker._hideDatepicker(),!1;case 27:g.datepicker._hideDatepicker();break;case 33:g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 34:g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 35:(d.ctrlKey||d.metaKey)&&g.datepicker._clearDate(d.target),W=d.ctrlKey||d.metaKey;break;case 36:(d.ctrlKey||d.metaKey)&&g.datepicker._gotoToday(d.target),W=d.ctrlKey||d.metaKey;break;case 37:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?1:-1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 38:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,-7,"D"),W=d.ctrlKey||d.metaKey;break;case 39:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?-1:1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 40:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,7,"D"),W=d.ctrlKey||d.metaKey;break;default:W=!1}else d.keyCode===36&&d.ctrlKey?g.datepicker._showDatepicker(this):W=!1;W&&(d.preventDefault(),d.stopPropagation())},_doKeyPress:function(d){var w,S,k=g.datepicker._getInst(d.target);if(g.datepicker._get(k,"constrainInput"))return w=g.datepicker._possibleChars(g.datepicker._get(k,"dateFormat")),S=String.fromCharCode(d.charCode==null?d.keyCode:d.charCode),d.ctrlKey||d.metaKey||S<" "||!w||w.indexOf(S)>-1},_doKeyUp:function(d){var w,S=g.datepicker._getInst(d.target);if(S.input.val()!==S.lastVal)try{w=g.datepicker.parseDate(g.datepicker._get(S,"dateFormat"),S.input?S.input.val():null,g.datepicker._getFormatConfig(S)),w&&(g.datepicker._setDateFromField(S),g.datepicker._updateAlternate(S),g.datepicker._updateDatepicker(S))}catch{}return!0},_showDatepicker:function(d){if(d=d.target||d,d.nodeName.toLowerCase()!=="input"&&(d=g("input",d.parentNode)[0]),!(g.datepicker._isDisabledDatepicker(d)||g.datepicker._lastInput===d)){var w,S,k,R,W,se,le;w=g.datepicker._getInst(d),g.datepicker._curInst&&g.datepicker._curInst!==w&&(g.datepicker._curInst.dpDiv.stop(!0,!0),w&&g.datepicker._datepickerShowing&&g.datepicker._hideDatepicker(g.datepicker._curInst.input[0])),S=g.datepicker._get(w,"beforeShow"),k=S?S.apply(d,[d,w]):{},k!==!1&&(Li(w.settings,k),w.lastVal=null,g.datepicker._lastInput=d,g.datepicker._setDateFromField(w),g.datepicker._inDialog&&(d.value=""),g.datepicker._pos||(g.datepicker._pos=g.datepicker._findPos(d),g.datepicker._pos[1]+=d.offsetHeight),R=!1,g(d).parents().each(function(){return R|=g(this).css("position")==="fixed",!R}),W={left:g.datepicker._pos[0],top:g.datepicker._pos[1]},g.datepicker._pos=null,w.dpDiv.empty(),w.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),g.datepicker._updateDatepicker(w),W=g.datepicker._checkOffset(w,W,R),w.dpDiv.css({position:g.datepicker._inDialog&&g.blockUI?"static":R?"fixed":"absolute",display:"none",left:W.left+"px",top:W.top+"px"}),w.inline||(se=g.datepicker._get(w,"showAnim"),le=g.datepicker._get(w,"duration"),w.dpDiv.css("z-index",Vt(g(d))+1),g.datepicker._datepickerShowing=!0,g.effects&&g.effects.effect[se]?w.dpDiv.show(se,g.datepicker._get(w,"showOptions"),le):w.dpDiv[se||"show"](se?le:null),g.datepicker._shouldFocusInput(w)&&w.input.trigger("focus"),g.datepicker._curInst=w))}},_updateDatepicker:function(d){this.maxRows=4,Mt=d,d.dpDiv.empty().append(this._generateHTML(d)),this._attachHandlers(d);var w,S=this._getNumberOfMonths(d),k=S[1],R=17,W=d.dpDiv.find("."+this._dayOverClass+" a"),se=g.datepicker._get(d,"onUpdateDatepicker");W.length>0&&Ei.apply(W.get(0)),d.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),k>1&&d.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",R*k+"em"),d.dpDiv[(S[0]!==1||S[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),d.dpDiv[(this._get(d,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),d===g.datepicker._curInst&&g.datepicker._datepickerShowing&&g.datepicker._shouldFocusInput(d)&&d.input.trigger("focus"),d.yearshtml&&(w=d.yearshtml,setTimeout(function(){w===d.yearshtml&&d.yearshtml&&d.dpDiv.find("select.ui-datepicker-year").first().replaceWith(d.yearshtml),w=d.yearshtml=null},0)),se&&se.apply(d.input?d.input[0]:null,[d])},_shouldFocusInput:function(d){return d.input&&d.input.is(":visible")&&!d.input.is(":disabled")&&!d.input.is(":focus")},_checkOffset:function(d,w,S){var k=d.dpDiv.outerWidth(),R=d.dpDiv.outerHeight(),W=d.input?d.input.outerWidth():0,se=d.input?d.input.outerHeight():0,le=document.documentElement.clientWidth+(S?0:g(document).scrollLeft()),fe=document.documentElement.clientHeight+(S?0:g(document).scrollTop());return w.left-=this._get(d,"isRTL")?k-W:0,w.left-=S&&w.left===d.input.offset().left?g(document).scrollLeft():0,w.top-=S&&w.top===d.input.offset().top+se?g(document).scrollTop():0,w.left-=Math.min(w.left,w.left+k>le&&le>k?Math.abs(w.left+k-le):0),w.top-=Math.min(w.top,w.top+R>fe&&fe>R?Math.abs(R+se):0),w},_findPos:function(d){for(var w,S=this._getInst(d),k=this._get(S,"isRTL");d&&(d.type==="hidden"||d.nodeType!==1||g.expr.pseudos.hidden(d));)d=d[k?"previousSibling":"nextSibling"];return w=g(d).offset(),[w.left,w.top]},_hideDatepicker:function(d){var w,S,k,R,W=this._curInst;!W||d&&W!==g.data(d,"datepicker")||this._datepickerShowing&&(w=this._get(W,"showAnim"),S=this._get(W,"duration"),k=function(){g.datepicker._tidyDialog(W)},g.effects&&(g.effects.effect[w]||g.effects[w])?W.dpDiv.hide(w,g.datepicker._get(W,"showOptions"),S,k):W.dpDiv[w==="slideDown"?"slideUp":w==="fadeIn"?"fadeOut":"hide"](w?S:null,k),w||k(),this._datepickerShowing=!1,R=this._get(W,"onClose"),R&&R.apply(W.input?W.input[0]:null,[W.input?W.input.val():"",W]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),g.blockUI&&(g.unblockUI(),g("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(d){d.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(d){if(g.datepicker._curInst){var w=g(d.target),S=g.datepicker._getInst(w[0]);(w[0].id!==g.datepicker._mainDivId&&w.parents("#"+g.datepicker._mainDivId).length===0&&!w.hasClass(g.datepicker.markerClassName)&&!w.closest("."+g.datepicker._triggerClass).length&&g.datepicker._datepickerShowing&&!(g.datepicker._inDialog&&g.blockUI)||w.hasClass(g.datepicker.markerClassName)&&g.datepicker._curInst!==S)&&g.datepicker._hideDatepicker()}},_adjustDate:function(d,w,S){var k=g(d),R=this._getInst(k[0]);this._isDisabledDatepicker(k[0])||(this._adjustInstDate(R,w,S),this._updateDatepicker(R))},_gotoToday:function(d){var w,S=g(d),k=this._getInst(S[0]);this._get(k,"gotoCurrent")&&k.currentDay?(k.selectedDay=k.currentDay,k.drawMonth=k.selectedMonth=k.currentMonth,k.drawYear=k.selectedYear=k.currentYear):(w=new Date,k.selectedDay=w.getDate(),k.drawMonth=k.selectedMonth=w.getMonth(),k.drawYear=k.selectedYear=w.getFullYear()),this._notifyChange(k),this._adjustDate(S)},_selectMonthYear:function(d,w,S){var k=g(d),R=this._getInst(k[0]);R["selected"+(S==="M"?"Month":"Year")]=R["draw"+(S==="M"?"Month":"Year")]=parseInt(w.options[w.selectedIndex].value,10),this._notifyChange(R),this._adjustDate(k)},_selectDay:function(d,w,S,k){var R,W=g(d);g(k).hasClass(this._unselectableClass)||this._isDisabledDatepicker(W[0])||(R=this._getInst(W[0]),R.selectedDay=R.currentDay=parseInt(g("a",k).attr("data-date")),R.selectedMonth=R.currentMonth=w,R.selectedYear=R.currentYear=S,this._selectDate(d,this._formatDate(R,R.currentDay,R.currentMonth,R.currentYear)))},_clearDate:function(d){var w=g(d);this._selectDate(w,"")},_selectDate:function(d,w){var S,k=g(d),R=this._getInst(k[0]);w=w??this._formatDate(R),R.input&&R.input.val(w),this._updateAlternate(R),S=this._get(R,"onSelect"),S?S.apply(R.input?R.input[0]:null,[w,R]):R.input&&R.input.trigger("change"),R.inline?this._updateDatepicker(R):(this._hideDatepicker(),this._lastInput=R.input[0],typeof R.input[0]!="object"&&R.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(d){var w,S,k,R=this._get(d,"altField");R&&(w=this._get(d,"altFormat")||this._get(d,"dateFormat"),S=this._getDate(d),k=this.formatDate(w,S,this._getFormatConfig(d)),g(document).find(R).val(k))},noWeekends:function(d){var w=d.getDay();return[w>0&&w<6,""]},iso8601Week:function(d){var w,S=new Date(d.getTime());return S.setDate(S.getDate()+4-(S.getDay()||7)),w=S.getTime(),S.setMonth(0),S.setDate(1),Math.floor(Math.round((w-S)/864e5)/7)+1},parseDate:function(d,w,S){if(d==null||w==null)throw"Invalid arguments";if(w=typeof w=="object"?w.toString():w+"",w==="")return null;var k,R,W,se=0,le=(S?S.shortYearCutoff:null)||this._defaults.shortYearCutoff,fe=typeof le!="string"?le:new Date().getFullYear()%100+parseInt(le,10),be=(S?S.dayNamesShort:null)||this._defaults.dayNamesShort,Te=(S?S.dayNames:null)||this._defaults.dayNames,Ke=(S?S.monthNamesShort:null)||this._defaults.monthNamesShort,Me=(S?S.monthNames:null)||this._defaults.monthNames,me=-1,De=-1,Xe=-1,ct=-1,gt=!1,Dt,Kt=function(ri){var ci=k+1<d.length&&d.charAt(k+1)===ri;return ci&&k++,ci},Gt=function(ri){var ci=Kt(ri),Bt=ri==="@"?14:ri==="!"?20:ri==="y"&&ci?4:ri==="o"?3:2,di=ri==="y"?Bt:1,ii=new RegExp("^\\d{"+di+","+Bt+"}"),Hi=w.substring(se).match(ii);if(!Hi)throw"Missing number at position "+se;return se+=Hi[0].length,parseInt(Hi[0],10)},Qt=function(ri,ci,Bt){var di=-1,ii=g.map(Kt(ri)?Bt:ci,function(Hi,Vi){return[[Vi,Hi]]}).sort(function(Hi,Vi){return-(Hi[1].length-Vi[1].length)});if(g.each(ii,function(Hi,Vi){var Ht=Vi[1];if(w.substr(se,Ht.length).toLowerCase()===Ht.toLowerCase())return di=Vi[0],se+=Ht.length,!1}),di!==-1)return di+1;throw"Unknown name at position "+se},$t=function(){if(w.charAt(se)!==d.charAt(k))throw"Unexpected literal at position "+se;se++};for(k=0;k<d.length;k++)if(gt)d.charAt(k)==="'"&&!Kt("'")?gt=!1:$t();else switch(d.charAt(k)){case"d":Xe=Gt("d");break;case"D":Qt("D",be,Te);break;case"o":ct=Gt("o");break;case"m":De=Gt("m");break;case"M":De=Qt("M",Ke,Me);break;case"y":me=Gt("y");break;case"@":Dt=new Date(Gt("@")),me=Dt.getFullYear(),De=Dt.getMonth()+1,Xe=Dt.getDate();break;case"!":Dt=new Date((Gt("!")-this._ticksTo1970)/1e4),me=Dt.getFullYear(),De=Dt.getMonth()+1,Xe=Dt.getDate();break;case"'":Kt("'")?$t():gt=!0;break;default:$t()}if(se<w.length&&(W=w.substr(se),!/^\s+/.test(W)))throw"Extra/unparsed characters found in date: "+W;if(me===-1?me=new Date().getFullYear():me<100&&(me+=new Date().getFullYear()-new Date().getFullYear()%100+(me<=fe?0:-100)),ct>-1){De=1,Xe=ct;do{if(R=this._getDaysInMonth(me,De-1),Xe<=R)break;De++,Xe-=R}while(!0)}if(Dt=this._daylightSavingAdjust(new Date(me,De-1,Xe)),Dt.getFullYear()!==me||Dt.getMonth()+1!==De||Dt.getDate()!==Xe)throw"Invalid date";return Dt},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(1969*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(d,w,S){if(!w)return"";var k,R=(S?S.dayNamesShort:null)||this._defaults.dayNamesShort,W=(S?S.dayNames:null)||this._defaults.dayNames,se=(S?S.monthNamesShort:null)||this._defaults.monthNamesShort,le=(S?S.monthNames:null)||this._defaults.monthNames,fe=function(me){var De=k+1<d.length&&d.charAt(k+1)===me;return De&&k++,De},be=function(me,De,Xe){var ct=""+De;if(fe(me))for(;ct.length<Xe;)ct="0"+ct;return ct},Te=function(me,De,Xe,ct){return fe(me)?ct[De]:Xe[De]},Ke="",Me=!1;if(w)for(k=0;k<d.length;k++)if(Me)d.charAt(k)==="'"&&!fe("'")?Me=!1:Ke+=d.charAt(k);else switch(d.charAt(k)){case"d":Ke+=be("d",w.getDate(),2);break;case"D":Ke+=Te("D",w.getDay(),R,W);break;case"o":Ke+=be("o",Math.round((new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime()-new Date(w.getFullYear(),0,0).getTime())/864e5),3);break;case"m":Ke+=be("m",w.getMonth()+1,2);break;case"M":Ke+=Te("M",w.getMonth(),se,le);break;case"y":Ke+=fe("y")?w.getFullYear():(w.getFullYear()%100<10?"0":"")+w.getFullYear()%100;break;case"@":Ke+=w.getTime();break;case"!":Ke+=w.getTime()*1e4+this._ticksTo1970;break;case"'":fe("'")?Ke+="'":Me=!0;break;default:Ke+=d.charAt(k)}return Ke},_possibleChars:function(d){var w,S="",k=!1,R=function(W){var se=w+1<d.length&&d.charAt(w+1)===W;return se&&w++,se};for(w=0;w<d.length;w++)if(k)d.charAt(w)==="'"&&!R("'")?k=!1:S+=d.charAt(w);else switch(d.charAt(w)){case"d":case"m":case"y":case"@":S+="0123456789";break;case"D":case"M":return null;case"'":R("'")?S+="'":k=!0;break;default:S+=d.charAt(w)}return S},_get:function(d,w){return d.settings[w]!==void 0?d.settings[w]:this._defaults[w]},_setDateFromField:function(d,w){if(d.input.val()!==d.lastVal){var S=this._get(d,"dateFormat"),k=d.lastVal=d.input?d.input.val():null,R=this._getDefaultDate(d),W=R,se=this._getFormatConfig(d);try{W=this.parseDate(S,k,se)||R}catch{k=w?"":k}d.selectedDay=W.getDate(),d.drawMonth=d.selectedMonth=W.getMonth(),d.drawYear=d.selectedYear=W.getFullYear(),d.currentDay=k?W.getDate():0,d.currentMonth=k?W.getMonth():0,d.currentYear=k?W.getFullYear():0,this._adjustInstDate(d)}},_getDefaultDate:function(d){return this._restrictMinMax(d,this._determineDate(d,this._get(d,"defaultDate"),new Date))},_determineDate:function(d,w,S){var k=function(se){var le=new Date;return le.setDate(le.getDate()+se),le},R=function(se){try{return g.datepicker.parseDate(g.datepicker._get(d,"dateFormat"),se,g.datepicker._getFormatConfig(d))}catch{}for(var le=(se.toLowerCase().match(/^c/)?g.datepicker._getDate(d):null)||new Date,fe=le.getFullYear(),be=le.getMonth(),Te=le.getDate(),Ke=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,Me=Ke.exec(se);Me;){switch(Me[2]||"d"){case"d":case"D":Te+=parseInt(Me[1],10);break;case"w":case"W":Te+=parseInt(Me[1],10)*7;break;case"m":case"M":be+=parseInt(Me[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(fe,be));break;case"y":case"Y":fe+=parseInt(Me[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(fe,be));break}Me=Ke.exec(se)}return new Date(fe,be,Te)},W=w==null||w===""?S:typeof w=="string"?R(w):typeof w=="number"?isNaN(w)?S:k(w):new Date(w.getTime());return W=W&&W.toString()==="Invalid Date"?S:W,W&&(W.setHours(0),W.setMinutes(0),W.setSeconds(0),W.setMilliseconds(0)),this._daylightSavingAdjust(W)},_daylightSavingAdjust:function(d){return d?(d.setHours(d.getHours()>12?d.getHours()+2:0),d):null},_setDate:function(d,w,S){var k=!w,R=d.selectedMonth,W=d.selectedYear,se=this._restrictMinMax(d,this._determineDate(d,w,new Date));d.selectedDay=d.currentDay=se.getDate(),d.drawMonth=d.selectedMonth=d.currentMonth=se.getMonth(),d.drawYear=d.selectedYear=d.currentYear=se.getFullYear(),(R!==d.selectedMonth||W!==d.selectedYear)&&!S&&this._notifyChange(d),this._adjustInstDate(d),d.input&&d.input.val(k?"":this._formatDate(d))},_getDate:function(d){var w=!d.currentYear||d.input&&d.input.val()===""?null:this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return w},_attachHandlers:function(d){var w=this._get(d,"stepMonths"),S="#"+d.id.replace(/\\\\/g,"\\");d.dpDiv.find("[data-handler]").map(function(){var k={prev:function(){g.datepicker._adjustDate(S,-w,"M")},next:function(){g.datepicker._adjustDate(S,+w,"M")},hide:function(){g.datepicker._hideDatepicker()},today:function(){g.datepicker._gotoToday(S)},selectDay:function(){return g.datepicker._selectDay(S,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return g.datepicker._selectMonthYear(S,this,"M"),!1},selectYear:function(){return g.datepicker._selectMonthYear(S,this,"Y"),!1}};g(this).on(this.getAttribute("data-event"),k[this.getAttribute("data-handler")])})},_generateHTML:function(d){var w,S,k,R,W,se,le,fe,be,Te,Ke,Me,me,De,Xe,ct,gt,Dt,Kt,Gt,Qt,$t,ri,ci,Bt,di,ii,Hi,Vi,Ht,_i,Ti,Wi,Zt,mi,wi,$i,tr,Ar,Tr=new Date,ji=this._daylightSavingAdjust(new Date(Tr.getFullYear(),Tr.getMonth(),Tr.getDate())),Ii=this._get(d,"isRTL"),Qs=this._get(d,"showButtonPanel"),$r=this._get(d,"hideIfNoPrevNext"),nt=this._get(d,"navigationAsDateFormat"),Ie=this._getNumberOfMonths(d),ce=this._get(d,"showCurrentAtPos"),ye=this._get(d,"stepMonths"),Be=Ie[0]!==1||Ie[1]!==1,Pe=this._daylightSavingAdjust(d.currentDay?new Date(d.currentYear,d.currentMonth,d.currentDay):new Date(9999,9,9)),qe=this._getMinMaxDate(d,"min"),Oe=this._getMinMaxDate(d,"max"),Ge=d.drawMonth-ce,ot=d.drawYear;if(Ge<0&&(Ge+=12,ot--),Oe)for(w=this._daylightSavingAdjust(new Date(Oe.getFullYear(),Oe.getMonth()-Ie[0]*Ie[1]+1,Oe.getDate())),w=qe&&w<qe?qe:w;this._daylightSavingAdjust(new Date(ot,Ge,1))>w;)Ge--,Ge<0&&(Ge=11,ot--);for(d.drawMonth=Ge,d.drawYear=ot,S=this._get(d,"prevText"),S=nt?this.formatDate(S,this._daylightSavingAdjust(new Date(ot,Ge-ye,1)),this._getFormatConfig(d)):S,this._canAdjustMonth(d,-1,ot,Ge)?k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:S}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Ii?"e":"w")).text(S))[0].outerHTML:$r?k="":k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:S}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Ii?"e":"w")).text(S))[0].outerHTML,R=this._get(d,"nextText"),R=nt?this.formatDate(R,this._daylightSavingAdjust(new Date(ot,Ge+ye,1)),this._getFormatConfig(d)):R,this._canAdjustMonth(d,1,ot,Ge)?W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:R}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Ii?"w":"e")).text(R))[0].outerHTML:$r?W="":W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:R}).append(g("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(Ii?"w":"e")).text(R))[0].outerHTML,se=this._get(d,"currentText"),le=this._get(d,"gotoCurrent")&&d.currentDay?Pe:ji,se=nt?this.formatDate(se,le,this._getFormatConfig(d)):se,fe="",d.inline||(fe=g("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(d,"closeText"))[0].outerHTML),be="",Qs&&(be=g("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(Ii?fe:"").append(this._isInRange(d,le)?g("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(se):"").append(Ii?"":fe)[0].outerHTML),Te=parseInt(this._get(d,"firstDay"),10),Te=isNaN(Te)?0:Te,Ke=this._get(d,"showWeek"),Me=this._get(d,"dayNames"),me=this._get(d,"dayNamesMin"),De=this._get(d,"monthNames"),Xe=this._get(d,"monthNamesShort"),ct=this._get(d,"beforeShowDay"),gt=this._get(d,"showOtherMonths"),Dt=this._get(d,"selectOtherMonths"),Kt=this._getDefaultDate(d),Gt="",$t=0;$t<Ie[0];$t++){for(ri="",this.maxRows=4,ci=0;ci<Ie[1];ci++){if(Bt=this._daylightSavingAdjust(new Date(ot,Ge,d.selectedDay)),di=" ui-corner-all",ii="",Be){if(ii+="<div class='ui-datepicker-group",Ie[1]>1)switch(ci){case 0:ii+=" ui-datepicker-group-first",di=" ui-corner-"+(Ii?"right":"left");break;case Ie[1]-1:ii+=" ui-datepicker-group-last",di=" ui-corner-"+(Ii?"left":"right");break;default:ii+=" ui-datepicker-group-middle",di="";break}ii+="'>"}for(ii+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+di+"'>"+(/all|left/.test(di)&&$t===0?Ii?W:k:"")+(/all|right/.test(di)&&$t===0?Ii?k:W:"")+this._generateMonthYearHeader(d,Ge,ot,qe,Oe,$t>0||ci>0,De,Xe)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Hi=Ke?"<th class='ui-datepicker-week-col'>"+this._get(d,"weekHeader")+"</th>":"",Qt=0;Qt<7;Qt++)Vi=(Qt+Te)%7,Hi+="<th scope='col'"+((Qt+Te+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+Me[Vi]+"'>"+me[Vi]+"</span></th>";for(ii+=Hi+"</tr></thead><tbody>",Ht=this._getDaysInMonth(ot,Ge),ot===d.selectedYear&&Ge===d.selectedMonth&&(d.selectedDay=Math.min(d.selectedDay,Ht)),_i=(this._getFirstDayOfMonth(ot,Ge)-Te+7)%7,Ti=Math.ceil((_i+Ht)/7),Wi=Be&&this.maxRows>Ti?this.maxRows:Ti,this.maxRows=Wi,Zt=this._daylightSavingAdjust(new Date(ot,Ge,1-_i)),mi=0;mi<Wi;mi++){for(ii+="<tr>",wi=Ke?"<td class='ui-datepicker-week-col'>"+this._get(d,"calculateWeek")(Zt)+"</td>":"",Qt=0;Qt<7;Qt++)$i=ct?ct.apply(d.input?d.input[0]:null,[Zt]):[!0,""],tr=Zt.getMonth()!==Ge,Ar=tr&&!Dt||!$i[0]||qe&&Zt<qe||Oe&&Zt>Oe,wi+="<td class='"+((Qt+Te+6)%7>=5?" ui-datepicker-week-end":"")+(tr?" ui-datepicker-other-month":"")+(Zt.getTime()===Bt.getTime()&&Ge===d.selectedMonth&&d._keyEvent||Kt.getTime()===Zt.getTime()&&Kt.getTime()===Bt.getTime()?" "+this._dayOverClass:"")+(Ar?" "+this._unselectableClass+" ui-state-disabled":"")+(tr&&!gt?"":" "+$i[1]+(Zt.getTime()===Pe.getTime()?" "+this._currentClass:"")+(Zt.getTime()===ji.getTime()?" ui-datepicker-today":""))+"'"+((!tr||gt)&&$i[2]?" title='"+$i[2].replace(/'/g,"&#39;")+"'":"")+(Ar?"":" data-handler='selectDay' data-event='click' data-month='"+Zt.getMonth()+"' data-year='"+Zt.getFullYear()+"'")+">"+(tr&&!gt?"&#xa0;":Ar?"<span class='ui-state-default'>"+Zt.getDate()+"</span>":"<a class='ui-state-default"+(Zt.getTime()===ji.getTime()?" ui-state-highlight":"")+(Zt.getTime()===Pe.getTime()?" ui-state-active":"")+(tr?" ui-priority-secondary":"")+"' href='#' aria-current='"+(Zt.getTime()===Pe.getTime()?"true":"false")+"' data-date='"+Zt.getDate()+"'>"+Zt.getDate()+"</a>")+"</td>",Zt.setDate(Zt.getDate()+1),Zt=this._daylightSavingAdjust(Zt);ii+=wi+"</tr>"}Ge++,Ge>11&&(Ge=0,ot++),ii+="</tbody></table>"+(Be?"</div>"+(Ie[0]>0&&ci===Ie[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),ri+=ii}Gt+=ri}return Gt+=be,d._keyEvent=!1,Gt},_generateMonthYearHeader:function(d,w,S,k,R,W,se,le){var fe,be,Te,Ke,Me,me,De,Xe,ct=this._get(d,"changeMonth"),gt=this._get(d,"changeYear"),Dt=this._get(d,"showMonthAfterYear"),Kt=this._get(d,"selectMonthLabel"),Gt=this._get(d,"selectYearLabel"),Qt="<div class='ui-datepicker-title'>",$t="";if(W||!ct)$t+="<span class='ui-datepicker-month'>"+se[w]+"</span>";else{for(fe=k&&k.getFullYear()===S,be=R&&R.getFullYear()===S,$t+="<select class='ui-datepicker-month' aria-label='"+Kt+"' data-handler='selectMonth' data-event='change'>",Te=0;Te<12;Te++)(!fe||Te>=k.getMonth())&&(!be||Te<=R.getMonth())&&($t+="<option value='"+Te+"'"+(Te===w?" selected='selected'":"")+">"+le[Te]+"</option>");$t+="</select>"}if(Dt||(Qt+=$t+(W||!(ct&&gt)?"&#xa0;":"")),!d.yearshtml)if(d.yearshtml="",W||!gt)Qt+="<span class='ui-datepicker-year'>"+S+"</span>";else{for(Ke=this._get(d,"yearRange").split(":"),Me=new Date().getFullYear(),me=function(ri){var ci=ri.match(/c[+\-].*/)?S+parseInt(ri.substring(1),10):ri.match(/[+\-].*/)?Me+parseInt(ri,10):parseInt(ri,10);return isNaN(ci)?Me:ci},De=me(Ke[0]),Xe=Math.max(De,me(Ke[1]||"")),De=k?Math.max(De,k.getFullYear()):De,Xe=R?Math.min(Xe,R.getFullYear()):Xe,d.yearshtml+="<select class='ui-datepicker-year' aria-label='"+Gt+"' data-handler='selectYear' data-event='change'>";De<=Xe;De++)d.yearshtml+="<option value='"+De+"'"+(De===S?" selected='selected'":"")+">"+De+"</option>";d.yearshtml+="</select>",Qt+=d.yearshtml,d.yearshtml=null}return Qt+=this._get(d,"yearSuffix"),Dt&&(Qt+=(W||!(ct&&gt)?"&#xa0;":"")+$t),Qt+="</div>",Qt},_adjustInstDate:function(d,w,S){var k=d.selectedYear+(S==="Y"?w:0),R=d.selectedMonth+(S==="M"?w:0),W=Math.min(d.selectedDay,this._getDaysInMonth(k,R))+(S==="D"?w:0),se=this._restrictMinMax(d,this._daylightSavingAdjust(new Date(k,R,W)));d.selectedDay=se.getDate(),d.drawMonth=d.selectedMonth=se.getMonth(),d.drawYear=d.selectedYear=se.getFullYear(),(S==="M"||S==="Y")&&this._notifyChange(d)},_restrictMinMax:function(d,w){var S=this._getMinMaxDate(d,"min"),k=this._getMinMaxDate(d,"max"),R=S&&w<S?S:w;return k&&R>k?k:R},_notifyChange:function(d){var w=this._get(d,"onChangeMonthYear");w&&w.apply(d.input?d.input[0]:null,[d.selectedYear,d.selectedMonth+1,d])},_getNumberOfMonths:function(d){var w=this._get(d,"numberOfMonths");return w==null?[1,1]:typeof w=="number"?[1,w]:w},_getMinMaxDate:function(d,w){return this._determineDate(d,this._get(d,w+"Date"),null)},_getDaysInMonth:function(d,w){return 32-this._daylightSavingAdjust(new Date(d,w,32)).getDate()},_getFirstDayOfMonth:function(d,w){return new Date(d,w,1).getDay()},_canAdjustMonth:function(d,w,S,k){var R=this._getNumberOfMonths(d),W=this._daylightSavingAdjust(new Date(S,k+(w<0?w:R[0]*R[1]),1));return w<0&&W.setDate(this._getDaysInMonth(W.getFullYear(),W.getMonth())),this._isInRange(d,W)},_isInRange:function(d,w){var S,k,R=this._getMinMaxDate(d,"min"),W=this._getMinMaxDate(d,"max"),se=null,le=null,fe=this._get(d,"yearRange");return fe&&(S=fe.split(":"),k=new Date().getFullYear(),se=parseInt(S[0],10),le=parseInt(S[1],10),S[0].match(/[+\-].*/)&&(se+=k),S[1].match(/[+\-].*/)&&(le+=k)),(!R||w.getTime()>=R.getTime())&&(!W||w.getTime()<=W.getTime())&&(!se||w.getFullYear()>=se)&&(!le||w.getFullYear()<=le)},_getFormatConfig:function(d){var w=this._get(d,"shortYearCutoff");return w=typeof w!="string"?w:new Date().getFullYear()%100+parseInt(w,10),{shortYearCutoff:w,dayNamesShort:this._get(d,"dayNamesShort"),dayNames:this._get(d,"dayNames"),monthNamesShort:this._get(d,"monthNamesShort"),monthNames:this._get(d,"monthNames")}},_formatDate:function(d,w,S,k){w||(d.currentDay=d.selectedDay,d.currentMonth=d.selectedMonth,d.currentYear=d.selectedYear);var R=w?typeof w=="object"?w:this._daylightSavingAdjust(new Date(k,S,w)):this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return this.formatDate(this._get(d,"dateFormat"),R,this._getFormatConfig(d))}});function Ri(d){var w="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return d.on("mouseout",w,function(){g(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",w,Ei)}function Ei(){g.datepicker._isDisabledDatepicker(Mt.inline?Mt.dpDiv.parent()[0]:Mt.input[0])||(g(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),g(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).addClass("ui-datepicker-next-hover"))}function Li(d,w){g.extend(d,w);for(var S in w)w[S]==null&&(d[S]=w[S]);return d}g.fn.datepicker=function(d){if(!this.length)return this;g.datepicker.initialized||(g(document).on("mousedown",g.datepicker._checkExternalClick),g.datepicker.initialized=!0),g("#"+g.datepicker._mainDivId).length===0&&g("body").append(g.datepicker.dpDiv);var w=Array.prototype.slice.call(arguments,1);return typeof d=="string"&&(d==="isDisabled"||d==="getDate"||d==="widget")?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):d==="option"&&arguments.length===2&&typeof arguments[1]=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):this.each(function(){typeof d=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this].concat(w)):g.datepicker._attachDatepicker(this,d)})},g.datepicker=new Ai,g.datepicker.initialized=!1,g.datepicker.uuid=new Date().getTime(),g.datepicker.version="1.13.2",g.datepicker,g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());/*!
 * jQuery UI Mouse 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Yi=!1;g(document).on("mouseup",function(){Yi=!1}),g.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.on("mousedown."+this.widgetName,function(w){return d._mouseDown(w)}).on("click."+this.widgetName,function(w){if(g.data(w.target,d.widgetName+".preventClickEvent")===!0)return g.removeData(w.target,d.widgetName+".preventClickEvent"),w.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!Yi){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var w=this,S=d.which===1,k=typeof this.options.cancel=="string"&&d.target.nodeName?g(d.target).closest(this.options.cancel).length:!1;return!S||k||!this._mouseCapture(d)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){w.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(g.data(d.target,this.widgetName+".preventClickEvent")===!0&&g.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(R){return w._mouseMove(R)},this._mouseUpDelegate=function(R){return w._mouseUp(R)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),Yi=!0,!0))}},_mouseMove:function(d){if(this._mouseMoved){if(g.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button)return this._mouseUp(d);if(!d.which){if(d.originalEvent.altKey||d.originalEvent.ctrlKey||d.originalEvent.metaKey||d.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(d)}}return(d.which||d.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==!1,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted)},_mouseUp:function(d){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&g.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Yi=!1,d.preventDefault()},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),g.ui.plugin={add:function(d,w,S){var k,R=g.ui[d].prototype;for(k in S)R.plugins[k]=R.plugins[k]||[],R.plugins[k].push([w,S[k]])},call:function(d,w,S,k){var R,W=d.plugins[w];if(W&&!(!k&&(!d.element[0].parentNode||d.element[0].parentNode.nodeType===11)))for(R=0;R<W.length;R++)d.options[W[R][0]]&&W[R][1].apply(d.element,S)}},g.ui.safeBlur=function(d){d&&d.nodeName.toLowerCase()!=="body"&&g(d).trigger("blur")};/*!
 * jQuery UI Draggable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.draggable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(d,w){this._super(d,w),d==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(d){var w=this.options;return this.helper||w.disabled||g(d.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(d),!this.handle)?!1:(this._blurActiveElement(d),this._blockFrames(w.iframeFix===!0?"iframe":w.iframeFix),!0)},_blockFrames:function(d){this.iframeBlocks=this.document.find(d).map(function(){var w=g(this);return g("<div>").css("position","absolute").appendTo(w.parent()).outerWidth(w.outerWidth()).outerHeight(w.outerHeight()).offset(w.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(d){var w=g.ui.safeActiveElement(this.document[0]),S=g(d.target);S.closest(w).length||g.ui.safeBlur(w)},_mouseStart:function(d){var w=this.options;return this.helper=this._createHelper(d),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),g.ui.ddmanager&&(g.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return g(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(d),this.originalPosition=this.position=this._generatePosition(d,!1),this.originalPageX=d.pageX,this.originalPageY=d.pageY,w.cursorAt&&this._adjustOffsetFromHelper(w.cursorAt),this._setContainment(),this._trigger("start",d)===!1?(this._clear(),!1):(this._cacheHelperProportions(),g.ui.ddmanager&&!w.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this._mouseDrag(d,!0),g.ui.ddmanager&&g.ui.ddmanager.dragStart(this,d),!0)},_refreshOffsets:function(d){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:d.pageX-this.offset.left,top:d.pageY-this.offset.top}},_mouseDrag:function(d,w){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d,!0),this.positionAbs=this._convertPositionTo("absolute"),!w){var S=this._uiHash();if(this._trigger("drag",d,S)===!1)return this._mouseUp(new g.Event("mouseup",d)),!1;this.position=S.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var w=this,S=!1;return g.ui.ddmanager&&!this.options.dropBehaviour&&(S=g.ui.ddmanager.drop(this,d)),this.dropped&&(S=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!S||this.options.revert==="valid"&&S||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,S)?g(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){w._trigger("stop",d)!==!1&&w._clear()}):this._trigger("stop",d)!==!1&&this._clear(),!1},_mouseUp:function(d){return this._unblockFrames(),g.ui.ddmanager&&g.ui.ddmanager.dragStop(this,d),this.handleElement.is(d.target)&&this.element.trigger("focus"),g.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new g.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(d){return this.options.handle?!!g(d.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(d){var w=this.options,S=typeof w.helper=="function",k=S?g(w.helper.apply(this.element[0],[d])):w.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return k.parents("body").length||k.appendTo(w.appendTo==="parent"?this.element[0].parentNode:w.appendTo),S&&k[0]===this.element[0]&&this._setPositionRelative(),k[0]!==this.element[0]&&!/(fixed|absolute)/.test(k.css("position"))&&k.css("position","absolute"),k},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_isRootNode:function(d){return/(html|body)/i.test(d.tagName)||d===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),w=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==w&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var d=this.element.position(),w=this._isRootNode(this.scrollParent[0]);return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+(w?0:this.scrollParent.scrollTop()),left:d.left-(parseInt(this.helper.css("left"),10)||0)+(w?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,S,k=this.options,R=this.document[0];if(this.relativeContainer=null,!k.containment){this.containment=null;return}if(k.containment==="window"){this.containment=[g(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,g(window).scrollLeft()+g(window).width()-this.helperProportions.width-this.margins.left,g(window).scrollTop()+(g(window).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment==="document"){this.containment=[0,0,g(R).width()-this.helperProportions.width-this.margins.left,(g(R).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment.constructor===Array){this.containment=k.containment;return}k.containment==="parent"&&(k.containment=this.helper[0].parentNode),w=g(k.containment),S=w[0],S&&(d=/(scroll|auto)/.test(w.css("overflow")),this.containment=[(parseInt(w.css("borderLeftWidth"),10)||0)+(parseInt(w.css("paddingLeft"),10)||0),(parseInt(w.css("borderTopWidth"),10)||0)+(parseInt(w.css("paddingTop"),10)||0),(d?Math.max(S.scrollWidth,S.offsetWidth):S.offsetWidth)-(parseInt(w.css("borderRightWidth"),10)||0)-(parseInt(w.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(S.scrollHeight,S.offsetHeight):S.offsetHeight)-(parseInt(w.css("borderBottomWidth"),10)||0)-(parseInt(w.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=w)},_convertPositionTo:function(d,w){w||(w=this.position);var S=d==="absolute"?1:-1,k=this._isRootNode(this.scrollParent[0]);return{top:w.top+this.offset.relative.top*S+this.offset.parent.top*S-(this.cssPosition==="fixed"?-this.offset.scroll.top:k?0:this.offset.scroll.top)*S,left:w.left+this.offset.relative.left*S+this.offset.parent.left*S-(this.cssPosition==="fixed"?-this.offset.scroll.left:k?0:this.offset.scroll.left)*S}},_generatePosition:function(d,w){var S,k,R,W,se=this.options,le=this._isRootNode(this.scrollParent[0]),fe=d.pageX,be=d.pageY;return(!le||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),w&&(this.containment&&(this.relativeContainer?(k=this.relativeContainer.offset(),S=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):S=this.containment,d.pageX-this.offset.click.left<S[0]&&(fe=S[0]+this.offset.click.left),d.pageY-this.offset.click.top<S[1]&&(be=S[1]+this.offset.click.top),d.pageX-this.offset.click.left>S[2]&&(fe=S[2]+this.offset.click.left),d.pageY-this.offset.click.top>S[3]&&(be=S[3]+this.offset.click.top)),se.grid&&(R=se.grid[1]?this.originalPageY+Math.round((be-this.originalPageY)/se.grid[1])*se.grid[1]:this.originalPageY,be=S?R-this.offset.click.top>=S[1]||R-this.offset.click.top>S[3]?R:R-this.offset.click.top>=S[1]?R-se.grid[1]:R+se.grid[1]:R,W=se.grid[0]?this.originalPageX+Math.round((fe-this.originalPageX)/se.grid[0])*se.grid[0]:this.originalPageX,fe=S?W-this.offset.click.left>=S[0]||W-this.offset.click.left>S[2]?W:W-this.offset.click.left>=S[0]?W-se.grid[0]:W+se.grid[0]:W),se.axis==="y"&&(fe=this.originalPageX),se.axis==="x"&&(be=this.originalPageY)),{top:be-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:le?0:this.offset.scroll.top),left:fe-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:le?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(d,w,S){return S=S||this._uiHash(),g.ui.plugin.call(this,d,[w,S,this],!0),/^(drag|start|stop)/.test(d)&&(this.positionAbs=this._convertPositionTo("absolute"),S.offset=this.positionAbs),g.Widget.prototype._trigger.call(this,d,w,S)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),g.ui.plugin.add("draggable","connectToSortable",{start:function(d,w,S){var k=g.extend({},w,{item:S.element});S.sortables=[],g(S.options.connectToSortable).each(function(){var R=g(this).sortable("instance");R&&!R.options.disabled&&(S.sortables.push(R),R.refreshPositions(),R._trigger("activate",d,k))})},stop:function(d,w,S){var k=g.extend({},w,{item:S.element});S.cancelHelperRemoval=!1,g.each(S.sortables,function(){var R=this;R.isOver?(R.isOver=0,S.cancelHelperRemoval=!0,R.cancelHelperRemoval=!1,R._storedCSS={position:R.placeholder.css("position"),top:R.placeholder.css("top"),left:R.placeholder.css("left")},R._mouseStop(d),R.options.helper=R.options._helper):(R.cancelHelperRemoval=!0,R._trigger("deactivate",d,k))})},drag:function(d,w,S){g.each(S.sortables,function(){var k=!1,R=this;R.positionAbs=S.positionAbs,R.helperProportions=S.helperProportions,R.offset.click=S.offset.click,R._intersectsWith(R.containerCache)&&(k=!0,g.each(S.sortables,function(){return this.positionAbs=S.positionAbs,this.helperProportions=S.helperProportions,this.offset.click=S.offset.click,this!==R&&this._intersectsWith(this.containerCache)&&g.contains(R.element[0],this.element[0])&&(k=!1),k})),k?(R.isOver||(R.isOver=1,S._parent=w.helper.parent(),R.currentItem=w.helper.appendTo(R.element).data("ui-sortable-item",!0),R.options._helper=R.options.helper,R.options.helper=function(){return w.helper[0]},d.target=R.currentItem[0],R._mouseCapture(d,!0),R._mouseStart(d,!0,!0),R.offset.click.top=S.offset.click.top,R.offset.click.left=S.offset.click.left,R.offset.parent.left-=S.offset.parent.left-R.offset.parent.left,R.offset.parent.top-=S.offset.parent.top-R.offset.parent.top,S._trigger("toSortable",d),S.dropped=R.element,g.each(S.sortables,function(){this.refreshPositions()}),S.currentItem=S.element,R.fromOutside=S),R.currentItem&&(R._mouseDrag(d),w.position=R.position)):R.isOver&&(R.isOver=0,R.cancelHelperRemoval=!0,R.options._revert=R.options.revert,R.options.revert=!1,R._trigger("out",d,R._uiHash(R)),R._mouseStop(d,!0),R.options.revert=R.options._revert,R.options.helper=R.options._helper,R.placeholder&&R.placeholder.remove(),w.helper.appendTo(S._parent),S._refreshOffsets(d),w.position=S._generatePosition(d,!0),S._trigger("fromSortable",d),S.dropped=!1,g.each(S.sortables,function(){this.refreshPositions()}))})}}),g.ui.plugin.add("draggable","cursor",{start:function(d,w,S){var k=g("body"),R=S.options;k.css("cursor")&&(R._cursor=k.css("cursor")),k.css("cursor",R.cursor)},stop:function(d,w,S){var k=S.options;k._cursor&&g("body").css("cursor",k._cursor)}}),g.ui.plugin.add("draggable","opacity",{start:function(d,w,S){var k=g(w.helper),R=S.options;k.css("opacity")&&(R._opacity=k.css("opacity")),k.css("opacity",R.opacity)},stop:function(d,w,S){var k=S.options;k._opacity&&g(w.helper).css("opacity",k._opacity)}}),g.ui.plugin.add("draggable","scroll",{start:function(d,w,S){S.scrollParentNotHidden||(S.scrollParentNotHidden=S.helper.scrollParent(!1)),S.scrollParentNotHidden[0]!==S.document[0]&&S.scrollParentNotHidden[0].tagName!=="HTML"&&(S.overflowOffset=S.scrollParentNotHidden.offset())},drag:function(d,w,S){var k=S.options,R=!1,W=S.scrollParentNotHidden[0],se=S.document[0];W!==se&&W.tagName!=="HTML"?((!k.axis||k.axis!=="x")&&(S.overflowOffset.top+W.offsetHeight-d.pageY<k.scrollSensitivity?W.scrollTop=R=W.scrollTop+k.scrollSpeed:d.pageY-S.overflowOffset.top<k.scrollSensitivity&&(W.scrollTop=R=W.scrollTop-k.scrollSpeed)),(!k.axis||k.axis!=="y")&&(S.overflowOffset.left+W.offsetWidth-d.pageX<k.scrollSensitivity?W.scrollLeft=R=W.scrollLeft+k.scrollSpeed:d.pageX-S.overflowOffset.left<k.scrollSensitivity&&(W.scrollLeft=R=W.scrollLeft-k.scrollSpeed))):((!k.axis||k.axis!=="x")&&(d.pageY-g(se).scrollTop()<k.scrollSensitivity?R=g(se).scrollTop(g(se).scrollTop()-k.scrollSpeed):g(window).height()-(d.pageY-g(se).scrollTop())<k.scrollSensitivity&&(R=g(se).scrollTop(g(se).scrollTop()+k.scrollSpeed))),(!k.axis||k.axis!=="y")&&(d.pageX-g(se).scrollLeft()<k.scrollSensitivity?R=g(se).scrollLeft(g(se).scrollLeft()-k.scrollSpeed):g(window).width()-(d.pageX-g(se).scrollLeft())<k.scrollSensitivity&&(R=g(se).scrollLeft(g(se).scrollLeft()+k.scrollSpeed)))),R!==!1&&g.ui.ddmanager&&!k.dropBehaviour&&g.ui.ddmanager.prepareOffsets(S,d)}}),g.ui.plugin.add("draggable","snap",{start:function(d,w,S){var k=S.options;S.snapElements=[],g(k.snap.constructor!==String?k.snap.items||":data(ui-draggable)":k.snap).each(function(){var R=g(this),W=R.offset();this!==S.element[0]&&S.snapElements.push({item:this,width:R.outerWidth(),height:R.outerHeight(),top:W.top,left:W.left})})},drag:function(d,w,S){var k,R,W,se,le,fe,be,Te,Ke,Me,me=S.options,De=me.snapTolerance,Xe=w.offset.left,ct=Xe+S.helperProportions.width,gt=w.offset.top,Dt=gt+S.helperProportions.height;for(Ke=S.snapElements.length-1;Ke>=0;Ke--){if(le=S.snapElements[Ke].left-S.margins.left,fe=le+S.snapElements[Ke].width,be=S.snapElements[Ke].top-S.margins.top,Te=be+S.snapElements[Ke].height,ct<le-De||Xe>fe+De||Dt<be-De||gt>Te+De||!g.contains(S.snapElements[Ke].item.ownerDocument,S.snapElements[Ke].item)){S.snapElements[Ke].snapping&&S.options.snap.release&&S.options.snap.release.call(S.element,d,g.extend(S._uiHash(),{snapItem:S.snapElements[Ke].item})),S.snapElements[Ke].snapping=!1;continue}me.snapMode!=="inner"&&(k=Math.abs(be-Dt)<=De,R=Math.abs(Te-gt)<=De,W=Math.abs(le-ct)<=De,se=Math.abs(fe-Xe)<=De,k&&(w.position.top=S._convertPositionTo("relative",{top:be-S.helperProportions.height,left:0}).top),R&&(w.position.top=S._convertPositionTo("relative",{top:Te,left:0}).top),W&&(w.position.left=S._convertPositionTo("relative",{top:0,left:le-S.helperProportions.width}).left),se&&(w.position.left=S._convertPositionTo("relative",{top:0,left:fe}).left)),Me=k||R||W||se,me.snapMode!=="outer"&&(k=Math.abs(be-gt)<=De,R=Math.abs(Te-Dt)<=De,W=Math.abs(le-Xe)<=De,se=Math.abs(fe-ct)<=De,k&&(w.position.top=S._convertPositionTo("relative",{top:be,left:0}).top),R&&(w.position.top=S._convertPositionTo("relative",{top:Te-S.helperProportions.height,left:0}).top),W&&(w.position.left=S._convertPositionTo("relative",{top:0,left:le}).left),se&&(w.position.left=S._convertPositionTo("relative",{top:0,left:fe-S.helperProportions.width}).left)),!S.snapElements[Ke].snapping&&(k||R||W||se||Me)&&S.options.snap.snap&&S.options.snap.snap.call(S.element,d,g.extend(S._uiHash(),{snapItem:S.snapElements[Ke].item})),S.snapElements[Ke].snapping=k||R||W||se||Me}}}),g.ui.plugin.add("draggable","stack",{start:function(d,w,S){var k,R=S.options,W=g.makeArray(g(R.stack)).sort(function(se,le){return(parseInt(g(se).css("zIndex"),10)||0)-(parseInt(g(le).css("zIndex"),10)||0)});W.length&&(k=parseInt(g(W[0]).css("zIndex"),10)||0,g(W).each(function(se){g(this).css("zIndex",k+se)}),this.css("zIndex",k+W.length))}}),g.ui.plugin.add("draggable","zIndex",{start:function(d,w,S){var k=g(w.helper),R=S.options;k.css("zIndex")&&(R._zIndex=k.css("zIndex")),k.css("zIndex",R.zIndex)},stop:function(d,w,S){var k=S.options;k._zIndex&&g(w.helper).css("zIndex",k._zIndex)}}),g.ui.draggable;/*!
 * jQuery UI Resizable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.resizable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(d){return parseFloat(d)||0},_isNumber:function(d){return!isNaN(parseFloat(d))},_hasScroll:function(d,w){if(g(d).css("overflow")==="hidden")return!1;var S=w&&w==="left"?"scrollLeft":"scrollTop",k=!1;if(d[S]>0)return!0;try{d[S]=1,k=d[S]>0,d[S]=0}catch{}return k},_create:function(){var d,w=this.options,S=this;this._addClass("ui-resizable"),g.extend(this,{_aspectRatio:!!w.aspectRatio,aspectRatio:w.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:w.helper||w.ghost||w.animate?w.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(g("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,d={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(d),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(d),this._proportionallyResize()),this._setupHandles(),w.autoHide&&g(this.element).on("mouseenter",function(){w.disabled||(S._removeClass("ui-resizable-autohide"),S._handles.show())}).on("mouseleave",function(){w.disabled||S.resizing||(S._addClass("ui-resizable-autohide"),S._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var d,w=function(S){g(S).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(w(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),w(this.originalElement),this},_setOption:function(d,w){switch(this._super(d,w),d){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!w;break}},_setupHandles:function(){var d=this.options,w,S,k,R,W,se=this;if(this.handles=d.handles||(g(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=g(),this._addedHandles=g(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),k=this.handles.split(","),this.handles={},S=0;S<k.length;S++)w=String.prototype.trim.call(k[S]),R="ui-resizable-"+w,W=g("<div>"),this._addClass(W,"ui-resizable-handle "+R),W.css({zIndex:d.zIndex}),this.handles[w]=".ui-resizable-"+w,this.element.children(this.handles[w]).length||(this.element.append(W),this._addedHandles=this._addedHandles.add(W));this._renderAxis=function(le){var fe,be,Te,Ke;le=le||this.element;for(fe in this.handles)this.handles[fe].constructor===String?this.handles[fe]=this.element.children(this.handles[fe]).first().show():(this.handles[fe].jquery||this.handles[fe].nodeType)&&(this.handles[fe]=g(this.handles[fe]),this._on(this.handles[fe],{mousedown:se._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(be=g(this.handles[fe],this.element),Ke=/sw|ne|nw|se|n|s/.test(fe)?be.outerHeight():be.outerWidth(),Te=["padding",/ne|nw|n/.test(fe)?"Top":/se|sw|s/.test(fe)?"Bottom":/^e$/.test(fe)?"Right":"Left"].join(""),le.css(Te,Ke),this._proportionallyResize()),this._handles=this._handles.add(this.handles[fe])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){se.resizing||(this.className&&(W=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),se.axis=W&&W[1]?W[1]:"se")}),d.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(d){var w,S,k=!1;for(w in this.handles)S=g(this.handles[w])[0],(S===d.target||g.contains(S,d.target))&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(d){var w,S,k,R=this.options,W=this.element;return this.resizing=!0,this._renderProxy(),w=this._num(this.helper.css("left")),S=this._num(this.helper.css("top")),R.containment&&(w+=g(R.containment).scrollLeft()||0,S+=g(R.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:w,top:S},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:W.width(),height:W.height()},this.originalSize=this._helper?{width:W.outerWidth(),height:W.outerHeight()}:{width:W.width(),height:W.height()},this.sizeDiff={width:W.outerWidth()-W.width(),height:W.outerHeight()-W.height()},this.originalPosition={left:w,top:S},this.originalMousePosition={left:d.pageX,top:d.pageY},this.aspectRatio=typeof R.aspectRatio=="number"?R.aspectRatio:this.originalSize.width/this.originalSize.height||1,k=g(".ui-resizable-"+this.axis).css("cursor"),g("body").css("cursor",k==="auto"?this.axis+"-resize":k),this._addClass("ui-resizable-resizing"),this._propagate("start",d),!0},_mouseDrag:function(d){var w,S,k=this.originalMousePosition,R=this.axis,W=d.pageX-k.left||0,se=d.pageY-k.top||0,le=this._change[R];return this._updatePrevProperties(),le&&(w=le.apply(this,[d,W,se]),this._updateVirtualBoundaries(d.shiftKey),(this._aspectRatio||d.shiftKey)&&(w=this._updateRatio(w,d)),w=this._respectSize(w,d),this._updateCache(w),this._propagate("resize",d),S=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),g.isEmptyObject(S)||(this._updatePrevProperties(),this._trigger("resize",d,this.ui()),this._applyChanges())),!1},_mouseStop:function(d){this.resizing=!1;var w,S,k,R,W,se,le,fe=this.options,be=this;return this._helper&&(w=this._proportionallyResizeElements,S=w.length&&/textarea/i.test(w[0].nodeName),k=S&&this._hasScroll(w[0],"left")?0:be.sizeDiff.height,R=S?0:be.sizeDiff.width,W={width:be.helper.width()-R,height:be.helper.height()-k},se=parseFloat(be.element.css("left"))+(be.position.left-be.originalPosition.left)||null,le=parseFloat(be.element.css("top"))+(be.position.top-be.originalPosition.top)||null,fe.animate||this.element.css(g.extend(W,{top:le,left:se})),be.helper.height(be.size.height),be.helper.width(be.size.width),this._helper&&!fe.animate&&this._proportionallyResize()),g("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",d),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var d={};return this.position.top!==this.prevPosition.top&&(d.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(d.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(d.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(d.height=this.size.height+"px"),this.helper.css(d),d},_updateVirtualBoundaries:function(d){var w,S,k,R,W,se=this.options;W={minWidth:this._isNumber(se.minWidth)?se.minWidth:0,maxWidth:this._isNumber(se.maxWidth)?se.maxWidth:1/0,minHeight:this._isNumber(se.minHeight)?se.minHeight:0,maxHeight:this._isNumber(se.maxHeight)?se.maxHeight:1/0},(this._aspectRatio||d)&&(w=W.minHeight*this.aspectRatio,k=W.minWidth/this.aspectRatio,S=W.maxHeight*this.aspectRatio,R=W.maxWidth/this.aspectRatio,w>W.minWidth&&(W.minWidth=w),k>W.minHeight&&(W.minHeight=k),S<W.maxWidth&&(W.maxWidth=S),R<W.maxHeight&&(W.maxHeight=R)),this._vBoundaries=W},_updateCache:function(d){this.offset=this.helper.offset(),this._isNumber(d.left)&&(this.position.left=d.left),this._isNumber(d.top)&&(this.position.top=d.top),this._isNumber(d.height)&&(this.size.height=d.height),this._isNumber(d.width)&&(this.size.width=d.width)},_updateRatio:function(d){var w=this.position,S=this.size,k=this.axis;return this._isNumber(d.height)?d.width=d.height*this.aspectRatio:this._isNumber(d.width)&&(d.height=d.width/this.aspectRatio),k==="sw"&&(d.left=w.left+(S.width-d.width),d.top=null),k==="nw"&&(d.top=w.top+(S.height-d.height),d.left=w.left+(S.width-d.width)),d},_respectSize:function(d){var w=this._vBoundaries,S=this.axis,k=this._isNumber(d.width)&&w.maxWidth&&w.maxWidth<d.width,R=this._isNumber(d.height)&&w.maxHeight&&w.maxHeight<d.height,W=this._isNumber(d.width)&&w.minWidth&&w.minWidth>d.width,se=this._isNumber(d.height)&&w.minHeight&&w.minHeight>d.height,le=this.originalPosition.left+this.originalSize.width,fe=this.originalPosition.top+this.originalSize.height,be=/sw|nw|w/.test(S),Te=/nw|ne|n/.test(S);return W&&(d.width=w.minWidth),se&&(d.height=w.minHeight),k&&(d.width=w.maxWidth),R&&(d.height=w.maxHeight),W&&be&&(d.left=le-w.minWidth),k&&be&&(d.left=le-w.maxWidth),se&&Te&&(d.top=fe-w.minHeight),R&&Te&&(d.top=fe-w.maxHeight),!d.width&&!d.height&&!d.left&&d.top?d.top=null:!d.width&&!d.height&&!d.top&&d.left&&(d.left=null),d},_getPaddingPlusBorderDimensions:function(d){for(var w=0,S=[],k=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],R=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];w<4;w++)S[w]=parseFloat(k[w])||0,S[w]+=parseFloat(R[w])||0;return{height:S[0]+S[2],width:S[1]+S[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d,w=0,S=this.helper||this.element;w<this._proportionallyResizeElements.length;w++)d=this._proportionallyResizeElements[w],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(d)),d.css({height:S.height()-this.outerDimensions.height||0,width:S.width()-this.outerDimensions.width||0})},_renderProxy:function(){var d=this.element,w=this.options;this.elementOffset=d.offset(),this._helper?(this.helper=this.helper||g("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++w.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(d,w){return{width:this.originalSize.width+w}},w:function(d,w){var S=this.originalSize,k=this.originalPosition;return{left:k.left+w,width:S.width-w}},n:function(d,w,S){var k=this.originalSize,R=this.originalPosition;return{top:R.top+S,height:k.height-S}},s:function(d,w,S){return{height:this.originalSize.height+S}},se:function(d,w,S){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,w,S]))},sw:function(d,w,S){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,w,S]))},ne:function(d,w,S){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,w,S]))},nw:function(d,w,S){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,w,S]))}},_propagate:function(d,w){g.ui.plugin.call(this,d,[w,this.ui()]),d!=="resize"&&this._trigger(d,w,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),g.ui.plugin.add("resizable","animate",{stop:function(d){var w=g(this).resizable("instance"),S=w.options,k=w._proportionallyResizeElements,R=k.length&&/textarea/i.test(k[0].nodeName),W=R&&w._hasScroll(k[0],"left")?0:w.sizeDiff.height,se=R?0:w.sizeDiff.width,le={width:w.size.width-se,height:w.size.height-W},fe=parseFloat(w.element.css("left"))+(w.position.left-w.originalPosition.left)||null,be=parseFloat(w.element.css("top"))+(w.position.top-w.originalPosition.top)||null;w.element.animate(g.extend(le,be&&fe?{top:be,left:fe}:{}),{duration:S.animateDuration,easing:S.animateEasing,step:function(){var Te={width:parseFloat(w.element.css("width")),height:parseFloat(w.element.css("height")),top:parseFloat(w.element.css("top")),left:parseFloat(w.element.css("left"))};k&&k.length&&g(k[0]).css({width:Te.width,height:Te.height}),w._updateCache(Te),w._propagate("resize",d)}})}}),g.ui.plugin.add("resizable","containment",{start:function(){var d,w,S,k,R,W,se,le=g(this).resizable("instance"),fe=le.options,be=le.element,Te=fe.containment,Ke=Te instanceof g?Te.get(0):/parent/.test(Te)?be.parent().get(0):Te;Ke&&(le.containerElement=g(Ke),/document/.test(Te)||Te===document?(le.containerOffset={left:0,top:0},le.containerPosition={left:0,top:0},le.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||document.body.parentNode.scrollHeight}):(d=g(Ke),w=[],g(["Top","Right","Left","Bottom"]).each(function(Me,me){w[Me]=le._num(d.css("padding"+me))}),le.containerOffset=d.offset(),le.containerPosition=d.position(),le.containerSize={height:d.innerHeight()-w[3],width:d.innerWidth()-w[1]},S=le.containerOffset,k=le.containerSize.height,R=le.containerSize.width,W=le._hasScroll(Ke,"left")?Ke.scrollWidth:R,se=le._hasScroll(Ke)?Ke.scrollHeight:k,le.parentData={element:Ke,left:S.left,top:S.top,width:W,height:se}))},resize:function(d){var w,S,k,R,W=g(this).resizable("instance"),se=W.options,le=W.containerOffset,fe=W.position,be=W._aspectRatio||d.shiftKey,Te={top:0,left:0},Ke=W.containerElement,Me=!0;Ke[0]!==document&&/static/.test(Ke.css("position"))&&(Te=le),fe.left<(W._helper?le.left:0)&&(W.size.width=W.size.width+(W._helper?W.position.left-le.left:W.position.left-Te.left),be&&(W.size.height=W.size.width/W.aspectRatio,Me=!1),W.position.left=se.helper?le.left:0),fe.top<(W._helper?le.top:0)&&(W.size.height=W.size.height+(W._helper?W.position.top-le.top:W.position.top),be&&(W.size.width=W.size.height*W.aspectRatio,Me=!1),W.position.top=W._helper?le.top:0),k=W.containerElement.get(0)===W.element.parent().get(0),R=/relative|absolute/.test(W.containerElement.css("position")),k&&R?(W.offset.left=W.parentData.left+W.position.left,W.offset.top=W.parentData.top+W.position.top):(W.offset.left=W.element.offset().left,W.offset.top=W.element.offset().top),w=Math.abs(W.sizeDiff.width+(W._helper?W.offset.left-Te.left:W.offset.left-le.left)),S=Math.abs(W.sizeDiff.height+(W._helper?W.offset.top-Te.top:W.offset.top-le.top)),w+W.size.width>=W.parentData.width&&(W.size.width=W.parentData.width-w,be&&(W.size.height=W.size.width/W.aspectRatio,Me=!1)),S+W.size.height>=W.parentData.height&&(W.size.height=W.parentData.height-S,be&&(W.size.width=W.size.height*W.aspectRatio,Me=!1)),Me||(W.position.left=W.prevPosition.left,W.position.top=W.prevPosition.top,W.size.width=W.prevSize.width,W.size.height=W.prevSize.height)},stop:function(){var d=g(this).resizable("instance"),w=d.options,S=d.containerOffset,k=d.containerPosition,R=d.containerElement,W=g(d.helper),se=W.offset(),le=W.outerWidth()-d.sizeDiff.width,fe=W.outerHeight()-d.sizeDiff.height;d._helper&&!w.animate&&/relative/.test(R.css("position"))&&g(this).css({left:se.left-k.left-S.left,width:le,height:fe}),d._helper&&!w.animate&&/static/.test(R.css("position"))&&g(this).css({left:se.left-k.left-S.left,width:le,height:fe})}}),g.ui.plugin.add("resizable","alsoResize",{start:function(){var d=g(this).resizable("instance"),w=d.options;g(w.alsoResize).each(function(){var S=g(this);S.data("ui-resizable-alsoresize",{width:parseFloat(S.width()),height:parseFloat(S.height()),left:parseFloat(S.css("left")),top:parseFloat(S.css("top"))})})},resize:function(d,w){var S=g(this).resizable("instance"),k=S.options,R=S.originalSize,W=S.originalPosition,se={height:S.size.height-R.height||0,width:S.size.width-R.width||0,top:S.position.top-W.top||0,left:S.position.left-W.left||0};g(k.alsoResize).each(function(){var le=g(this),fe=g(this).data("ui-resizable-alsoresize"),be={},Te=le.parents(w.originalElement[0]).length?["width","height"]:["width","height","top","left"];g.each(Te,function(Ke,Me){var me=(fe[Me]||0)+(se[Me]||0);me&&me>=0&&(be[Me]=me||null)}),le.css(be)})},stop:function(){g(this).removeData("ui-resizable-alsoresize")}}),g.ui.plugin.add("resizable","ghost",{start:function(){var d=g(this).resizable("instance"),w=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:w.height,width:w.width,margin:0,left:0,top:0}),d._addClass(d.ghost,"ui-resizable-ghost"),g.uiBackCompat!==!1&&typeof d.options.ghost=="string"&&d.ghost.addClass(this.options.ghost),d.ghost.appendTo(d.helper)},resize:function(){var d=g(this).resizable("instance");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=g(this).resizable("instance");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),g.ui.plugin.add("resizable","grid",{resize:function(){var d,w=g(this).resizable("instance"),S=w.options,k=w.size,R=w.originalSize,W=w.originalPosition,se=w.axis,le=typeof S.grid=="number"?[S.grid,S.grid]:S.grid,fe=le[0]||1,be=le[1]||1,Te=Math.round((k.width-R.width)/fe)*fe,Ke=Math.round((k.height-R.height)/be)*be,Me=R.width+Te,me=R.height+Ke,De=S.maxWidth&&S.maxWidth<Me,Xe=S.maxHeight&&S.maxHeight<me,ct=S.minWidth&&S.minWidth>Me,gt=S.minHeight&&S.minHeight>me;S.grid=le,ct&&(Me+=fe),gt&&(me+=be),De&&(Me-=fe),Xe&&(me-=be),/^(se|s|e)$/.test(se)?(w.size.width=Me,w.size.height=me):/^(ne)$/.test(se)?(w.size.width=Me,w.size.height=me,w.position.top=W.top-Ke):/^(sw)$/.test(se)?(w.size.width=Me,w.size.height=me,w.position.left=W.left-Te):((me-be<=0||Me-fe<=0)&&(d=w._getPaddingPlusBorderDimensions(this)),me-be>0?(w.size.height=me,w.position.top=W.top-Ke):(me=be-d.height,w.size.height=me,w.position.top=W.top+R.height-me),Me-fe>0?(w.size.width=Me,w.position.left=W.left-Te):(Me=fe-d.width,w.size.width=Me,w.position.left=W.left+R.width-Me))}}),g.ui.resizable;/*!
 * jQuery UI Dialog 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var w=g(this).css(d).offset().top;w<0&&g(this).css("top",d.top-w)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&g.fn.draggable&&this._makeDraggable(),this.options.resizable&&g.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?g(d):this.document.find(d||"body").eq(0)},_destroy:function(){var d,w=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),d=w.parent.children().eq(w.index),d.length&&d[0]!==this.element[0]?d.before(this.element):w.parent.append(this.element)},widget:function(){return this.uiDialog},disable:g.noop,enable:g.noop,close:function(d){var w=this;!this._isOpen||this._trigger("beforeClose",d)===!1||(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||g.ui.safeBlur(g.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){w._trigger("close",d)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(d,w){var S=!1,k=this.uiDialog.siblings(".ui-front:visible").map(function(){return+g(this).css("z-index")}).get(),R=Math.max.apply(null,k);return R>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",R+1),S=!0),S&&!w&&this._trigger("focus",d),S},open:function(){var d=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=g(g.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable(),d._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var d=this._focusedElement;d||(d=this.element.find("[autofocus]")),d.length||(d=this.element.find(":tabbable")),d.length||(d=this.uiDialogButtonPane.find(":tabbable")),d.length||(d=this.uiDialogTitlebarClose.filter(":tabbable")),d.length||(d=this.uiDialog),d.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var d=g.ui.safeActiveElement(this.document[0]),w=this.uiDialog[0]===d||g.contains(this.uiDialog[0],d);w||this._focusTabbable()},_keepFocus:function(d){d.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=g("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(d){if(this.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===g.ui.keyCode.ESCAPE){d.preventDefault(),this.close(d);return}if(!(d.keyCode!==g.ui.keyCode.TAB||d.isDefaultPrevented())){var w=this.uiDialog.find(":tabbable"),S=w.first(),k=w.last();(d.target===k[0]||d.target===this.uiDialog[0])&&!d.shiftKey?(this._delay(function(){S.trigger("focus")}),d.preventDefault()):(d.target===S[0]||d.target===this.uiDialog[0])&&d.shiftKey&&(this._delay(function(){k.trigger("focus")}),d.preventDefault())}},mousedown:function(d){this._moveToTop(d)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=g("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(w){g(w.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=g("<button type='button'></button>").button({label:g("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(w){w.preventDefault(),this.close(w)}}),d=g("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(d,"ui-dialog-title"),this._title(d),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(d){this.options.title?d.text(this.options.title):d.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=g("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=g("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var d=this,w=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),g.isEmptyObject(w)||Array.isArray(w)&&!w.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}g.each(w,function(S,k){var R,W;k=typeof k=="function"?{click:k,text:S}:k,k=g.extend({type:"button"},k),R=k.click,W={icon:k.icon,iconPosition:k.iconPosition,showLabel:k.showLabel,icons:k.icons,text:k.text},delete k.click,delete k.icon,delete k.iconPosition,delete k.showLabel,delete k.icons,typeof k.text=="boolean"&&delete k.text,g("<button></button>",k).button(W).appendTo(d.uiButtonSet).on("click",function(){R.apply(d.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var d=this,w=this.options;function S(k){return{position:k.position,offset:k.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,R){d._addClass(g(this),"ui-dialog-dragging"),d._blockFrames(),d._trigger("dragStart",k,S(R))},drag:function(k,R){d._trigger("drag",k,S(R))},stop:function(k,R){var W=R.offset.left-d.document.scrollLeft(),se=R.offset.top-d.document.scrollTop();w.position={my:"left top",at:"left"+(W>=0?"+":"")+W+" top"+(se>=0?"+":"")+se,of:d.window},d._removeClass(g(this),"ui-dialog-dragging"),d._unblockFrames(),d._trigger("dragStop",k,S(R))}})},_makeResizable:function(){var d=this,w=this.options,S=w.resizable,k=this.uiDialog.css("position"),R=typeof S=="string"?S:"n,e,s,w,se,sw,ne,nw";function W(se){return{originalPosition:se.originalPosition,originalSize:se.originalSize,position:se.position,size:se.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:w.maxWidth,maxHeight:w.maxHeight,minWidth:w.minWidth,minHeight:this._minHeight(),handles:R,start:function(se,le){d._addClass(g(this),"ui-dialog-resizing"),d._blockFrames(),d._trigger("resizeStart",se,W(le))},resize:function(se,le){d._trigger("resize",se,W(le))},stop:function(se,le){var fe=d.uiDialog.offset(),be=fe.left-d.document.scrollLeft(),Te=fe.top-d.document.scrollTop();w.height=d.uiDialog.height(),w.width=d.uiDialog.width(),w.position={my:"left top",at:"left"+(be>=0?"+":"")+be+" top"+(Te>=0?"+":"")+Te,of:d.window},d._removeClass(g(this),"ui-dialog-resizing"),d._unblockFrames(),d._trigger("resizeStop",se,W(le))}}).css("position",k)},_trackFocus:function(){this._on(this.widget(),{focusin:function(d){this._makeFocusTarget(),this._focusedElement=g(d.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var d=this._trackingInstances(),w=g.inArray(this,d);w!==-1&&d.splice(w,1)},_trackingInstances:function(){var d=this.document.data("ui-dialog-instances");return d||(d=[],this.document.data("ui-dialog-instances",d)),d},_minHeight:function(){var d=this.options;return d.height==="auto"?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(){var d=this.uiDialog.is(":visible");d||this.uiDialog.show(),this.uiDialog.position(this.options.position),d||this.uiDialog.hide()},_setOptions:function(d){var w=this,S=!1,k={};g.each(d,function(R,W){w._setOption(R,W),R in w.sizeRelatedOptions&&(S=!0),R in w.resizableRelatedOptions&&(k[R]=W)}),S&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",k)},_setOption:function(d,w){var S,k,R=this.uiDialog;d!=="disabled"&&(this._super(d,w),d==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),d==="buttons"&&this._createButtons(),d==="closeText"&&this.uiDialogTitlebarClose.button({label:g("<a>").text(""+this.options.closeText).html()}),d==="draggable"&&(S=R.is(":data(ui-draggable)"),S&&!w&&R.draggable("destroy"),!S&&w&&this._makeDraggable()),d==="position"&&this._position(),d==="resizable"&&(k=R.is(":data(ui-resizable)"),k&&!w&&R.resizable("destroy"),k&&typeof w=="string"&&R.resizable("option","handles",w),!k&&w!==!1&&this._makeResizable()),d==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var d,w,S,k=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),k.minWidth>k.width&&(k.width=k.minWidth),d=this.uiDialog.css({height:"auto",width:k.width}).outerHeight(),w=Math.max(0,k.minHeight-d),S=typeof k.maxHeight=="number"?Math.max(0,k.maxHeight-d):"none",k.height==="auto"?this.element.css({minHeight:w,maxHeight:S,height:"auto"}):this.element.height(Math.max(0,k.height-d)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=g(this);return g("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return g(d.target).closest(".ui-dialog").length?!0:!!g(d.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var d=g.fn.jquery.substring(0,4),w=!0;this._delay(function(){w=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",(function(S){if(!w){var k=this._trackingInstances()[0];k._allowInteraction(S)||(S.preventDefault(),k._focusTabbable(),(d==="3.4."||d==="3.5.")&&k._delay(k._restoreTabbableFocus))}}).bind(this)),this.overlay=g("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var d=this.document.data("ui-dialog-overlays")-1;d?this.document.data("ui-dialog-overlays",d):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),g.uiBackCompat!==!1&&g.widget("ui.dialog",g.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(d,w){d==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(w),this._superApply(arguments)}}),g.ui.dialog;/*!
 * jQuery UI Droppable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var d,w=this.options,S=w.accept;this.isover=!1,this.isout=!0,this.accept=typeof S=="function"?S:function(k){return k.is(S)},this.proportions=function(){if(arguments.length)d=arguments[0];else return d||(d={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(w.scope),w.addClasses&&this._addClass("ui-droppable")},_addToManager:function(d){g.ui.ddmanager.droppables[d]=g.ui.ddmanager.droppables[d]||[],g.ui.ddmanager.droppables[d].push(this)},_splice:function(d){for(var w=0;w<d.length;w++)d[w]===this&&d.splice(w,1)},_destroy:function(){var d=g.ui.ddmanager.droppables[this.options.scope];this._splice(d)},_setOption:function(d,w){if(d==="accept")this.accept=typeof w=="function"?w:function(k){return k.is(w)};else if(d==="scope"){var S=g.ui.ddmanager.droppables[this.options.scope];this._splice(S),this._addToManager(w)}this._super(d,w)},_activate:function(d){var w=g.ui.ddmanager.current;this._addActiveClass(),w&&this._trigger("activate",d,this.ui(w))},_deactivate:function(d){var w=g.ui.ddmanager.current;this._removeActiveClass(),w&&this._trigger("deactivate",d,this.ui(w))},_over:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._addHoverClass(),this._trigger("over",d,this.ui(w)))},_out:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._removeHoverClass(),this._trigger("out",d,this.ui(w)))},_drop:function(d,w){var S=w||g.ui.ddmanager.current,k=!1;return!S||(S.currentItem||S.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var R=g(this).droppable("instance");if(R.options.greedy&&!R.options.disabled&&R.options.scope===S.options.scope&&R.accept.call(R.element[0],S.currentItem||S.element)&&g.ui.intersect(S,g.extend(R,{offset:R.element.offset()}),R.options.tolerance,d))return k=!0,!1}),k)?!1:this.accept.call(this.element[0],S.currentItem||S.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",d,this.ui(S)),this.element):!1},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),g.ui.intersect=function(){function d(w,S,k){return w>=S&&w<S+k}return function(w,S,k,R){if(!S.offset)return!1;var W=(w.positionAbs||w.position.absolute).left+w.margins.left,se=(w.positionAbs||w.position.absolute).top+w.margins.top,le=W+w.helperProportions.width,fe=se+w.helperProportions.height,be=S.offset.left,Te=S.offset.top,Ke=be+S.proportions().width,Me=Te+S.proportions().height;switch(k){case"fit":return be<=W&&le<=Ke&&Te<=se&&fe<=Me;case"intersect":return be<W+w.helperProportions.width/2&&le-w.helperProportions.width/2<Ke&&Te<se+w.helperProportions.height/2&&fe-w.helperProportions.height/2<Me;case"pointer":return d(R.pageY,Te,S.proportions().height)&&d(R.pageX,be,S.proportions().width);case"touch":return(se>=Te&&se<=Me||fe>=Te&&fe<=Me||se<Te&&fe>Me)&&(W>=be&&W<=Ke||le>=be&&le<=Ke||W<be&&le>Ke);default:return!1}}}(),g.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(d,w){var S,k,R=g.ui.ddmanager.droppables[d.options.scope]||[],W=w?w.type:null,se=(d.currentItem||d.element).find(":data(ui-droppable)").addBack();e:for(S=0;S<R.length;S++)if(!(R[S].options.disabled||d&&!R[S].accept.call(R[S].element[0],d.currentItem||d.element))){for(k=0;k<se.length;k++)if(se[k]===R[S].element[0]){R[S].proportions().height=0;continue e}R[S].visible=R[S].element.css("display")!=="none",R[S].visible&&(W==="mousedown"&&R[S]._activate.call(R[S],w),R[S].offset=R[S].element.offset(),R[S].proportions({width:R[S].element[0].offsetWidth,height:R[S].element[0].offsetHeight}))}},drop:function(d,w){var S=!1;return g.each((g.ui.ddmanager.droppables[d.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&g.ui.intersect(d,this,this.options.tolerance,w)&&(S=this._drop.call(this,w)||S),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,w)))}),S},dragStart:function(d,w){d.element.parentsUntil("body").on("scroll.droppable",function(){d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)})},drag:function(d,w){d.options.refreshPositions&&g.ui.ddmanager.prepareOffsets(d,w),g.each(g.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var S,k,R,W=g.ui.intersect(d,this,this.options.tolerance,w),se=!W&&this.isover?"isout":W&&!this.isover?"isover":null;se&&(this.options.greedy&&(k=this.options.scope,R=this.element.parents(":data(ui-droppable)").filter(function(){return g(this).droppable("instance").options.scope===k}),R.length&&(S=g(R[0]).droppable("instance"),S.greedyChild=se==="isover")),S&&se==="isover"&&(S.isover=!1,S.isout=!0,S._out.call(S,w)),this[se]=!0,this[se==="isout"?"isover":"isout"]=!1,this[se==="isover"?"_over":"_out"].call(this,w),S&&se==="isout"&&(S.isout=!1,S.isover=!0,S._over.call(S,w)))}})},dragStop:function(d,w){d.element.parentsUntil("body").off("scroll.droppable"),d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)}},g.uiBackCompat!==!1&&g.widget("ui.droppable",g.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),g.ui.droppable;/*!
 * jQuery UI Progressbar 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=g("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(d){if(d===void 0)return this.options.value;this.options.value=this._constrainedValue(d),this._refreshValue()},_constrainedValue:function(d){return d===void 0&&(d=this.options.value),this.indeterminate=d===!1,typeof d!="number"&&(d=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,d))},_setOptions:function(d){var w=d.value;delete d.value,this._super(d),this.options.value=this._constrainedValue(w),this._refreshValue()},_setOption:function(d,w){d==="max"&&(w=Math.max(this.min,w)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,w=this._percentage();this.valueDiv.toggle(this.indeterminate||d>this.min).width(w.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,d===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=g("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":d}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),d===this.options.max&&this._trigger("complete")}});/*!
 * jQuery UI Selectable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectable",g.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){d.elementPos=g(d.element[0]).offset(),d.selectees=g(d.options.filter,d.element[0]),d._addClass(d.selectees,"ui-selectee"),d.selectees.each(function(){var w=g(this),S=w.offset(),k={left:S.left-d.elementPos.left,top:S.top-d.elementPos.top};g.data(this,"selectable-item",{element:this,$element:w,left:k.left,top:k.top,right:k.left+w.outerWidth(),bottom:k.top+w.outerHeight(),startselected:!1,selected:w.hasClass("ui-selected"),selecting:w.hasClass("ui-selecting"),unselecting:w.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=g("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(d){var w=this,S=this.options;this.opos=[d.pageX,d.pageY],this.elementPos=g(this.element[0]).offset(),!this.options.disabled&&(this.selectees=g(S.filter,this.element[0]),this._trigger("start",d),g(S.appendTo).append(this.helper),this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0}),S.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var k=g.data(this,"selectable-item");k.startselected=!0,!d.metaKey&&!d.ctrlKey&&(w._removeClass(k.$element,"ui-selected"),k.selected=!1,w._addClass(k.$element,"ui-unselecting"),k.unselecting=!0,w._trigger("unselecting",d,{unselecting:k.element}))}),g(d.target).parents().addBack().each(function(){var k,R=g.data(this,"selectable-item");if(R)return k=!d.metaKey&&!d.ctrlKey||!R.$element.hasClass("ui-selected"),w._removeClass(R.$element,k?"ui-unselecting":"ui-selected")._addClass(R.$element,k?"ui-selecting":"ui-unselecting"),R.unselecting=!k,R.selecting=k,R.selected=k,k?w._trigger("selecting",d,{selecting:R.element}):w._trigger("unselecting",d,{unselecting:R.element}),!1}))},_mouseDrag:function(d){if(this.dragged=!0,!this.options.disabled){var w,S=this,k=this.options,R=this.opos[0],W=this.opos[1],se=d.pageX,le=d.pageY;return R>se&&(w=se,se=R,R=w),W>le&&(w=le,le=W,W=w),this.helper.css({left:R,top:W,width:se-R,height:le-W}),this.selectees.each(function(){var fe=g.data(this,"selectable-item"),be=!1,Te={};!fe||fe.element===S.element[0]||(Te.left=fe.left+S.elementPos.left,Te.right=fe.right+S.elementPos.left,Te.top=fe.top+S.elementPos.top,Te.bottom=fe.bottom+S.elementPos.top,k.tolerance==="touch"?be=!(Te.left>se||Te.right<R||Te.top>le||Te.bottom<W):k.tolerance==="fit"&&(be=Te.left>R&&Te.right<se&&Te.top>W&&Te.bottom<le),be?(fe.selected&&(S._removeClass(fe.$element,"ui-selected"),fe.selected=!1),fe.unselecting&&(S._removeClass(fe.$element,"ui-unselecting"),fe.unselecting=!1),fe.selecting||(S._addClass(fe.$element,"ui-selecting"),fe.selecting=!0,S._trigger("selecting",d,{selecting:fe.element}))):(fe.selecting&&((d.metaKey||d.ctrlKey)&&fe.startselected?(S._removeClass(fe.$element,"ui-selecting"),fe.selecting=!1,S._addClass(fe.$element,"ui-selected"),fe.selected=!0):(S._removeClass(fe.$element,"ui-selecting"),fe.selecting=!1,fe.startselected&&(S._addClass(fe.$element,"ui-unselecting"),fe.unselecting=!0),S._trigger("unselecting",d,{unselecting:fe.element}))),fe.selected&&!d.metaKey&&!d.ctrlKey&&!fe.startselected&&(S._removeClass(fe.$element,"ui-selected"),fe.selected=!1,S._addClass(fe.$element,"ui-unselecting"),fe.unselecting=!0,S._trigger("unselecting",d,{unselecting:fe.element}))))}),!1}},_mouseStop:function(d){var w=this;return this.dragged=!1,g(".ui-unselecting",this.element[0]).each(function(){var S=g.data(this,"selectable-item");w._removeClass(S.$element,"ui-unselecting"),S.unselecting=!1,S.startselected=!1,w._trigger("unselected",d,{unselected:S.element})}),g(".ui-selecting",this.element[0]).each(function(){var S=g.data(this,"selectable-item");w._removeClass(S.$element,"ui-selecting")._addClass(S.$element,"ui-selected"),S.selecting=!1,S.selected=!0,S.startselected=!0,w._trigger("selected",d,{selected:S.element})}),this._trigger("stop",d),this.helper.remove(),!1}});/*!
 * jQuery UI Selectmenu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectmenu",[g.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var d=this.element.uniqueId().attr("id");this.ids={element:d,button:d+"-button",menu:d+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=g()},_drawButton:function(){var d,w=this,S=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(k){this.button.trigger("focus"),k.preventDefault()}}),this.element.hide(),this.button=g("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),d=g("<span>").appendTo(this.button),this._addClass(d,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(S).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){w._rendered||w._refreshMenu()})},_drawMenu:function(){var d=this;this.menu=g("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=g("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(w,S){w.preventDefault(),d._setSelection(),d._select(S.item.data("ui-selectmenu-item"),w)},focus:function(w,S){var k=S.item.data("ui-selectmenu-item");d.focusIndex!=null&&k.index!==d.focusIndex&&(d._trigger("focus",w,{item:k}),d.isOpen||d._select(k,w)),d.focusIndex=k.index,d.button.attr("aria-activedescendant",d.menuItems.eq(k.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),this.options.width===null&&this._resizeButton()},_refreshMenu:function(){var d,w=this.element.find("option");this.menu.empty(),this._parseOptions(w),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,w.length&&(d=this._getSelectedItem(),this.menuInstance.focus(null,d),this._setAria(d.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(d){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",d)))},_position:function(){this.menuWrap.position(g.extend({of:this.button},this.options.position))},close:function(d){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",d))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(d){var w=g("<span>");return this._setText(w,d.label),this._addClass(w,"ui-selectmenu-text"),w},_renderMenu:function(d,w){var S=this,k="";g.each(w,function(R,W){var se;W.optgroup!==k&&(se=g("<li>",{text:W.optgroup}),S._addClass(se,"ui-selectmenu-optgroup","ui-menu-divider"+(W.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),se.appendTo(d),k=W.optgroup),S._renderItemData(d,W)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-selectmenu-item",w)},_renderItem:function(d,w){var S=g("<li>"),k=g("<div>",{title:w.element.attr("title")});return w.disabled&&this._addClass(S,null,"ui-state-disabled"),this._setText(k,w.label),S.append(k).appendTo(d)},_setText:function(d,w){w?d.text(w):d.html("&#160;")},_move:function(d,w){var S,k,R=".ui-menu-item";this.isOpen?S=this.menuItems.eq(this.focusIndex).parent("li"):(S=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),R+=":not(.ui-state-disabled)"),d==="first"||d==="last"?k=S[d==="first"?"prevAll":"nextAll"](R).eq(-1):k=S[d+"All"](R).eq(0),k.length&&this.menuInstance.focus(w,k)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(d){this[this.isOpen?"close":"open"](d)},_setSelection:function(){var d;this.range&&(window.getSelection?(d=window.getSelection(),d.removeAllRanges(),d.addRange(this.range)):this.range.select(),this.button.trigger("focus"))},_documentClick:{mousedown:function(d){this.isOpen&&(g(d.target).closest(".ui-selectmenu-menu, #"+g.escapeSelector(this.ids.button)).length||this.close(d))}},_buttonEvents:{mousedown:function(){var d;window.getSelection?(d=window.getSelection(),d.rangeCount&&(this.range=d.getRangeAt(0))):this.range=document.selection.createRange()},click:function(d){this._setSelection(),this._toggle(d)},keydown:function(d){var w=!0;switch(d.keyCode){case g.ui.keyCode.TAB:case g.ui.keyCode.ESCAPE:this.close(d),w=!1;break;case g.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(d);break;case g.ui.keyCode.UP:d.altKey?this._toggle(d):this._move("prev",d);break;case g.ui.keyCode.DOWN:d.altKey?this._toggle(d):this._move("next",d);break;case g.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(d):this._toggle(d);break;case g.ui.keyCode.LEFT:this._move("prev",d);break;case g.ui.keyCode.RIGHT:this._move("next",d);break;case g.ui.keyCode.HOME:case g.ui.keyCode.PAGE_UP:this._move("first",d);break;case g.ui.keyCode.END:case g.ui.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d),w=!1}w&&d.preventDefault()}},_selectFocusedItem:function(d){var w=this.menuItems.eq(this.focusIndex).parent("li");w.hasClass("ui-state-disabled")||this._select(w.data("ui-selectmenu-item"),d)},_select:function(d,w){var S=this.element[0].selectedIndex;this.element[0].selectedIndex=d.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(d)),this._setAria(d),this._trigger("select",w,{item:d}),d.index!==S&&this._trigger("change",w,{item:d}),this.close(w)},_setAria:function(d){var w=this.menuItems.eq(d.index).attr("id");this.button.attr({"aria-labelledby":w,"aria-activedescendant":w}),this.menu.attr("aria-activedescendant",w)},_setOption:function(d,w){if(d==="icons"){var S=this.button.find("span.ui-icon");this._removeClass(S,null,this.options.icons.button)._addClass(S,null,w.button)}this._super(d,w),d==="appendTo"&&this.menuWrap.appendTo(this._appendTo()),d==="width"&&this._resizeButton()},_setOptionDisabled:function(d){this._super(d),this.menuInstance.option("disabled",d),this.button.attr("aria-disabled",d),this._toggleClass(this.button,null,"ui-state-disabled",d),this.element.prop("disabled",d),d?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var d=this.options.width;if(d===!1){this.button.css("width","");return}d===null&&(d=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(d)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var d=this._super();return d.disabled=this.element.prop("disabled"),d},_parseOptions:function(d){var w=this,S=[];d.each(function(k,R){R.hidden||S.push(w._parseOption(g(R),k))}),this.items=S},_parseOption:function(d,w){var S=d.parent("optgroup");return{element:d,index:w,value:d.val(),label:d.text(),optgroup:S.attr("label")||"",disabled:S.prop("disabled")||d.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]);/*!
 * jQuery UI Slider 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.slider",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var d,w,S=this.options,k=this.element.find(".ui-slider-handle"),R="<span tabindex='0'></span>",W=[];for(w=S.values&&S.values.length||1,k.length>w&&(k.slice(w).remove(),k=k.slice(0,w)),d=k.length;d<w;d++)W.push(R);this.handles=k.add(g(W.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(se){g(this).data("ui-slider-handle-index",se).attr("tabIndex",0)})},_createRange:function(){var d=this.options;d.range?(d.range===!0&&(d.values?d.values.length&&d.values.length!==2?d.values=[d.values[0],d.values[0]]:Array.isArray(d.values)&&(d.values=d.values.slice(0)):d.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=g("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")):(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})),(d.range==="min"||d.range==="max")&&this._addClass(this.range,"ui-slider-range-"+d.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(d){var w,S,k,R,W,se,le,fe,be=this,Te=this.options;return Te.disabled||(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),w={x:d.pageX,y:d.pageY},S=this._normValueFromMouse(w),k=this._valueMax()-this._valueMin()+1,this.handles.each(function(Ke){var Me=Math.abs(S-be.values(Ke));(k>Me||k===Me&&(Ke===be._lastChangedValue||be.values(Ke)===Te.min))&&(k=Me,R=g(this),W=Ke)}),se=this._start(d,W),se===!1)?!1:(this._mouseSliding=!0,this._handleIndex=W,this._addClass(R,null,"ui-state-active"),R.trigger("focus"),le=R.offset(),fe=!g(d.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=fe?{left:0,top:0}:{left:d.pageX-le.left-R.width()/2,top:d.pageY-le.top-R.height()/2-(parseInt(R.css("borderTopWidth"),10)||0)-(parseInt(R.css("borderBottomWidth"),10)||0)+(parseInt(R.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(d,W,S),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(d){var w={x:d.pageX,y:d.pageY},S=this._normValueFromMouse(w);return this._slide(d,this._handleIndex,S),!1},_mouseStop:function(d){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(d,this._handleIndex),this._change(d,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var w,S,k,R,W;return this.orientation==="horizontal"?(w=this.elementSize.width,S=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(w=this.elementSize.height,S=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),k=S/w,k>1&&(k=1),k<0&&(k=0),this.orientation==="vertical"&&(k=1-k),R=this._valueMax()-this._valueMin(),W=this._valueMin()+k*R,this._trimAlignValue(W)},_uiHash:function(d,w,S){var k={handle:this.handles[d],handleIndex:d,value:w!==void 0?w:this.value()};return this._hasMultipleValues()&&(k.value=w!==void 0?w:this.values(d),k.values=S||this.values()),k},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(d,w){return this._trigger("start",d,this._uiHash(w))},_slide:function(d,w,S){var k,R,W=this.value(),se=this.values();this._hasMultipleValues()&&(R=this.values(w?0:1),W=this.values(w),this.options.values.length===2&&this.options.range===!0&&(S=w===0?Math.min(R,S):Math.max(R,S)),se[w]=S),S!==W&&(k=this._trigger("slide",d,this._uiHash(w,S,se)),k!==!1&&(this._hasMultipleValues()?this.values(w,S):this.value(S)))},_stop:function(d,w){this._trigger("stop",d,this._uiHash(w))},_change:function(d,w){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=w,this._trigger("change",d,this._uiHash(w)))},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(d,w){var S,k,R;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(w),this._refreshValue(),this._change(null,d);return}if(arguments.length)if(Array.isArray(arguments[0])){for(S=this.options.values,k=arguments[0],R=0;R<S.length;R+=1)S[R]=this._trimAlignValue(k[R]),this._change(null,R);this._refreshValue()}else return this._hasMultipleValues()?this._values(d):this.value();else return this._values()},_setOption:function(d,w){var S,k=0;switch(d==="range"&&this.options.range===!0&&(w==="min"?(this.options.value=this._values(0),this.options.values=null):w==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(k=this.options.values.length),this._super(d,w),d){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(w),this.handles.css(w==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),S=k-1;S>=0;S--)this._change(null,S);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1;break}},_setOptionDisabled:function(d){this._super(d),this._toggleClass(null,"ui-state-disabled",!!d)},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d),d},_values:function(d){var w,S,k;if(arguments.length)return w=this.options.values[d],w=this._trimAlignValue(w),w;if(this._hasMultipleValues()){for(S=this.options.values.slice(),k=0;k<S.length;k+=1)S[k]=this._trimAlignValue(S[k]);return S}else return[]},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var w=this.options.step>0?this.options.step:1,S=(d-this._valueMin())%w,k=d-S;return Math.abs(S)*2>=w&&(k+=S>0?w:-w),parseFloat(k.toFixed(5))},_calculateNewMax:function(){var d=this.options.max,w=this._valueMin(),S=this.options.step,k=Math.round((d-w)/S)*S;d=k+w,d>this.options.max&&(d-=S),this.max=parseFloat(d.toFixed(this._precision()))},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),S=w.indexOf(".");return S===-1?0:w.length-S-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(d){d==="vertical"&&this.range.css({width:"",left:""}),d==="horizontal"&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var d,w,S,k,R,W=this.options.range,se=this.options,le=this,fe=this._animateOff?!1:se.animate,be={};this._hasMultipleValues()?this.handles.each(function(Te){w=(le.values(Te)-le._valueMin())/(le._valueMax()-le._valueMin())*100,be[le.orientation==="horizontal"?"left":"bottom"]=w+"%",g(this).stop(1,1)[fe?"animate":"css"](be,se.animate),le.options.range===!0&&(le.orientation==="horizontal"?(Te===0&&le.range.stop(1,1)[fe?"animate":"css"]({left:w+"%"},se.animate),Te===1&&le.range[fe?"animate":"css"]({width:w-d+"%"},{queue:!1,duration:se.animate})):(Te===0&&le.range.stop(1,1)[fe?"animate":"css"]({bottom:w+"%"},se.animate),Te===1&&le.range[fe?"animate":"css"]({height:w-d+"%"},{queue:!1,duration:se.animate}))),d=w}):(S=this.value(),k=this._valueMin(),R=this._valueMax(),w=R!==k?(S-k)/(R-k)*100:0,be[this.orientation==="horizontal"?"left":"bottom"]=w+"%",this.handle.stop(1,1)[fe?"animate":"css"](be,se.animate),W==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[fe?"animate":"css"]({width:w+"%"},se.animate),W==="max"&&this.orientation==="horizontal"&&this.range.stop(1,1)[fe?"animate":"css"]({width:100-w+"%"},se.animate),W==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[fe?"animate":"css"]({height:w+"%"},se.animate),W==="max"&&this.orientation==="vertical"&&this.range.stop(1,1)[fe?"animate":"css"]({height:100-w+"%"},se.animate))},_handleEvents:{keydown:function(d){var w,S,k,R,W=g(d.target).data("ui-slider-handle-index");switch(d.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(d.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(g(d.target),null,"ui-state-active"),w=this._start(d,W),w===!1))return;break}switch(R=this.options.step,this._hasMultipleValues()?S=k=this.values(W):S=k=this.value(),d.keyCode){case g.ui.keyCode.HOME:k=this._valueMin();break;case g.ui.keyCode.END:k=this._valueMax();break;case g.ui.keyCode.PAGE_UP:k=this._trimAlignValue(S+(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.PAGE_DOWN:k=this._trimAlignValue(S-(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:if(S===this._valueMax())return;k=this._trimAlignValue(S+R);break;case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(S===this._valueMin())return;k=this._trimAlignValue(S-R);break}this._slide(d,W,k)},keyup:function(d){var w=g(d.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(d,w),this._change(d,w),this._removeClass(g(d.target),null,"ui-state-active"))}}});/*!
 * jQuery UI Sortable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.sortable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(d,w,S){return d>=w&&d<w+S},_isFloating:function(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(d,w){this._super(d,w),d==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var d=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),g.each(this.items,function(){d._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(d,w){var S=null,k=!1,R=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(d),g(d.target).parents().each(function(){if(g.data(this,R.widgetName+"-item")===R)return S=g(this),!1}),g.data(d.target,R.widgetName+"-item")===R&&(S=g(d.target)),!S)||this.options.handle&&!w&&(g(this.options.handle,S).find("*").addBack().each(function(){this===d.target&&(k=!0)}),!k)?!1:(this.currentItem=S,this._removeCurrentsFromItems(),!0)},_mouseStart:function(d,w,S){var k,R,W=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=g(W.appendTo!=="parent"?W.appendTo:this.currentItem.parent()),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},g.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),W.cursorAt&&this._adjustOffsetFromHelper(W.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),g.extend(this.offset,{parent:this._getParentOffset()}),W.containment&&this._setContainment(),W.cursor&&W.cursor!=="auto"&&(R=this.document.find("body"),this.storedCursor=R.css("cursor"),R.css("cursor",W.cursor),this.storedStylesheet=g("<style>*{ cursor: "+W.cursor+" !important; }</style>").appendTo(R)),W.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",W.zIndex)),W.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",W.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!S)for(k=this.containers.length-1;k>=0;k--)this.containers[k]._trigger("activate",d,this._uiHash(this));return g.ui.ddmanager&&(g.ui.ddmanager.current=this),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(d),!0},_scroll:function(d){var w=this.options,S=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<w.scrollSensitivity?this.scrollParent[0].scrollTop=S=this.scrollParent[0].scrollTop+w.scrollSpeed:d.pageY-this.overflowOffset.top<w.scrollSensitivity&&(this.scrollParent[0].scrollTop=S=this.scrollParent[0].scrollTop-w.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<w.scrollSensitivity?this.scrollParent[0].scrollLeft=S=this.scrollParent[0].scrollLeft+w.scrollSpeed:d.pageX-this.overflowOffset.left<w.scrollSensitivity&&(this.scrollParent[0].scrollLeft=S=this.scrollParent[0].scrollLeft-w.scrollSpeed)):(d.pageY-this.document.scrollTop()<w.scrollSensitivity?S=this.document.scrollTop(this.document.scrollTop()-w.scrollSpeed):this.window.height()-(d.pageY-this.document.scrollTop())<w.scrollSensitivity&&(S=this.document.scrollTop(this.document.scrollTop()+w.scrollSpeed)),d.pageX-this.document.scrollLeft()<w.scrollSensitivity?S=this.document.scrollLeft(this.document.scrollLeft()-w.scrollSpeed):this.window.width()-(d.pageX-this.document.scrollLeft())<w.scrollSensitivity&&(S=this.document.scrollLeft(this.document.scrollLeft()+w.scrollSpeed))),S},_mouseDrag:function(d){var w,S,k,R,W=this.options;for(this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),W.scroll&&this._scroll(d)!==!1&&(this._refreshItemPositions(!0),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},w=this.items.length-1;w>=0;w--)if(S=this.items[w],k=S.item[0],R=this._intersectsWithPointer(S),!!R&&S.instance===this.currentContainer&&k!==this.currentItem[0]&&this.placeholder[R===1?"next":"prev"]()[0]!==k&&!g.contains(this.placeholder[0],k)&&(this.options.type!=="semi-dynamic"||!g.contains(this.element[0],k))){if(this.direction=R===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(S))this._rearrange(d,S);else break;this._trigger("change",d,this._uiHash());break}return this._contactContainers(d),g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),this._trigger("sort",d,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,w){if(d){if(g.ui.ddmanager&&!this.options.dropBehaviour&&g.ui.ddmanager.drop(this,d),this.options.revert){var S=this,k=this.placeholder.offset(),R=this.options.axis,W={};(!R||R==="x")&&(W.left=k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!R||R==="y")&&(W.top=k.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,g(this.helper).animate(W,parseInt(this.options.revert,10)||500,function(){S._clear(d)})}else this._clear(d,w);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new g.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),g.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?g(this.domPosition.prev).after(this.currentItem):g(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(d){var w=this._getItemsAsjQuery(d&&d.connected),S=[];return d=d||{},g(w).each(function(){var k=(g(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[\-=_](.+)/);k&&S.push((d.key||k[1]+"[]")+"="+(d.key&&d.expression?k[1]:k[2]))}),!S.length&&d.key&&S.push(d.key+"="),S.join("&")},toArray:function(d){var w=this._getItemsAsjQuery(d&&d.connected),S=[];return d=d||{},w.each(function(){S.push(g(d.item||this).attr(d.attribute||"id")||"")}),S},_intersectsWith:function(d){var w=this.positionAbs.left,S=w+this.helperProportions.width,k=this.positionAbs.top,R=k+this.helperProportions.height,W=d.left,se=W+d.width,le=d.top,fe=le+d.height,be=this.offset.click.top,Te=this.offset.click.left,Ke=this.options.axis==="x"||k+be>le&&k+be<fe,Me=this.options.axis==="y"||w+Te>W&&w+Te<se,me=Ke&&Me;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?me:W<w+this.helperProportions.width/2&&S-this.helperProportions.width/2<se&&le<k+this.helperProportions.height/2&&R-this.helperProportions.height/2<fe},_intersectsWithPointer:function(d){var w,S,k=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),R=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),W=k&&R;return W?(w=this.dragDirection.vertical,S=this.dragDirection.horizontal,this.floating?S==="right"||w==="down"?2:1:w&&(w==="down"?2:1)):!1},_intersectsWithSides:function(d){var w=this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),S=this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),k=this.dragDirection.vertical,R=this.dragDirection.horizontal;return this.floating&&R?R==="right"&&S||R==="left"&&!S:k&&(k==="down"&&w||k==="up"&&!w)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!==0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!==0&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var w,S,k,R,W=[],se=[],le=this._connectWith();if(le&&d)for(w=le.length-1;w>=0;w--)for(k=g(le[w],this.document[0]),S=k.length-1;S>=0;S--)R=g.data(k[S],this.widgetFullName),R&&R!==this&&!R.options.disabled&&se.push([typeof R.options.items=="function"?R.options.items.call(R.element):g(R.options.items,R.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),R]);se.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):g(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function fe(){W.push(this)}for(w=se.length-1;w>=0;w--)se[w][0].each(fe);return g(W)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=g.grep(this.items,function(w){for(var S=0;S<d.length;S++)if(d[S]===w.item[0])return!1;return!0})},_refreshItems:function(d){this.items=[],this.containers=[this];var w,S,k,R,W,se,le,fe,be=this.items,Te=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],d,{item:this.currentItem}):g(this.options.items,this.element),this]],Ke=this._connectWith();if(Ke&&this.ready)for(w=Ke.length-1;w>=0;w--)for(k=g(Ke[w],this.document[0]),S=k.length-1;S>=0;S--)R=g.data(k[S],this.widgetFullName),R&&R!==this&&!R.options.disabled&&(Te.push([typeof R.options.items=="function"?R.options.items.call(R.element[0],d,{item:this.currentItem}):g(R.options.items,R.element),R]),this.containers.push(R));for(w=Te.length-1;w>=0;w--)for(W=Te[w][1],se=Te[w][0],S=0,fe=se.length;S<fe;S++)le=g(se[S]),le.data(this.widgetName+"-item",W),be.push({item:le,instance:W,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(d){var w,S,k,R;for(w=this.items.length-1;w>=0;w--)S=this.items[w],!(this.currentContainer&&S.instance!==this.currentContainer&&S.item[0]!==this.currentItem[0])&&(k=this.options.toleranceElement?g(this.options.toleranceElement,S.item):S.item,d||(S.width=k.outerWidth(),S.height=k.outerHeight()),R=k.offset(),S.left=R.left,S.top=R.top)},refreshPositions:function(d){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(d);var w,S;if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(w=this.containers.length-1;w>=0;w--)S=this.containers[w].element.offset(),this.containers[w].containerCache.left=S.left,this.containers[w].containerCache.top=S.top,this.containers[w].containerCache.width=this.containers[w].element.outerWidth(),this.containers[w].containerCache.height=this.containers[w].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var w,S,k=d.options;(!k.placeholder||k.placeholder.constructor===String)&&(w=k.placeholder,S=d.currentItem[0].nodeName.toLowerCase(),k.placeholder={element:function(){var R=g("<"+S+">",d.document[0]);return d._addClass(R,"ui-sortable-placeholder",w||d.currentItem[0].className)._removeClass(R,"ui-sortable-helper"),S==="tbody"?d._createTrPlaceholder(d.currentItem.find("tr").eq(0),g("<tr>",d.document[0]).appendTo(R)):S==="tr"?d._createTrPlaceholder(d.currentItem,R):S==="img"&&R.attr("src",d.currentItem.attr("src")),w||R.css("visibility","hidden"),R},update:function(R,W){w&&!k.forcePlaceholderSize||((!W.height()||k.forcePlaceholderSize&&(S==="tbody"||S==="tr"))&&W.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),W.width()||W.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10)))}}),d.placeholder=g(k.placeholder.element.call(d.element,d.currentItem)),d.currentItem.after(d.placeholder),k.placeholder.update(d,d.placeholder)},_createTrPlaceholder:function(d,w){var S=this;d.children().each(function(){g("<td>&#160;</td>",S.document[0]).attr("colspan",g(this).attr("colspan")||1).appendTo(w)})},_contactContainers:function(d){var w,S,k,R,W,se,le,fe,be,Te,Ke=null,Me=null;for(w=this.containers.length-1;w>=0;w--)if(!g.contains(this.currentItem[0],this.containers[w].element[0]))if(this._intersectsWith(this.containers[w].containerCache)){if(Ke&&g.contains(this.containers[w].element[0],Ke.element[0]))continue;Ke=this.containers[w],Me=w}else this.containers[w].containerCache.over&&(this.containers[w]._trigger("out",d,this._uiHash(this)),this.containers[w].containerCache.over=0);if(Ke)if(this.containers.length===1)this.containers[Me].containerCache.over||(this.containers[Me]._trigger("over",d,this._uiHash(this)),this.containers[Me].containerCache.over=1);else{for(k=1e4,R=null,be=Ke.floating||this._isFloating(this.currentItem),W=be?"left":"top",se=be?"width":"height",Te=be?"pageX":"pageY",S=this.items.length-1;S>=0;S--)g.contains(this.containers[Me].element[0],this.items[S].item[0])&&this.items[S].item[0]!==this.currentItem[0]&&(le=this.items[S].item.offset()[W],fe=!1,d[Te]-le>this.items[S][se]/2&&(fe=!0),Math.abs(d[Te]-le)<k&&(k=Math.abs(d[Te]-le),R=this.items[S],this.direction=fe?"up":"down"));if(!R&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[Me]){this.currentContainer.containerCache.over||(this.containers[Me]._trigger("over",d,this._uiHash()),this.currentContainer.containerCache.over=1);return}R?this._rearrange(d,R,null,!0):this._rearrange(d,null,this.containers[Me].element,!0),this._trigger("change",d,this._uiHash()),this.containers[Me]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[Me],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[Me]._trigger("over",d,this._uiHash(this)),this.containers[Me].containerCache.over=1}},_createHelper:function(d){var w=this.options,S=typeof w.helper=="function"?g(w.helper.apply(this.element[0],[d,this.currentItem])):w.helper==="clone"?this.currentItem.clone():this.currentItem;return S.parents("body").length||this.appendTo[0].appendChild(S[0]),S[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!S[0].style.width||w.forceHelperSize)&&S.width(this.currentItem.width()),(!S[0].style.height||w.forceHelperSize)&&S.height(this.currentItem.height()),S},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&g.ui.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,S,k=this.options;k.containment==="parent"&&(k.containment=this.helper[0].parentNode),(k.containment==="document"||k.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,k.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(k.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(k.containment)||(d=g(k.containment)[0],w=g(k.containment).offset(),S=g(d).css("overflow")!=="hidden",this.containment=[w.left+(parseInt(g(d).css("borderLeftWidth"),10)||0)+(parseInt(g(d).css("paddingLeft"),10)||0)-this.margins.left,w.top+(parseInt(g(d).css("borderTopWidth"),10)||0)+(parseInt(g(d).css("paddingTop"),10)||0)-this.margins.top,w.left+(S?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(g(d).css("borderLeftWidth"),10)||0)-(parseInt(g(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,w.top+(S?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(g(d).css("borderTopWidth"),10)||0)-(parseInt(g(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,w){w||(w=this.position);var S=d==="absolute"?1:-1,k=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,R=/(html|body)/i.test(k[0].tagName);return{top:w.top+this.offset.relative.top*S+this.offset.parent.top*S-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():R?0:k.scrollTop())*S,left:w.left+this.offset.relative.left*S+this.offset.parent.left*S-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():R?0:k.scrollLeft())*S}},_generatePosition:function(d){var w,S,k=this.options,R=d.pageX,W=d.pageY,se=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,le=/(html|body)/i.test(se[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(R=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(W=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(R=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(W=this.containment[3]+this.offset.click.top)),k.grid&&(w=this.originalPageY+Math.round((W-this.originalPageY)/k.grid[1])*k.grid[1],W=this.containment?w-this.offset.click.top>=this.containment[1]&&w-this.offset.click.top<=this.containment[3]?w:w-this.offset.click.top>=this.containment[1]?w-k.grid[1]:w+k.grid[1]:w,S=this.originalPageX+Math.round((R-this.originalPageX)/k.grid[0])*k.grid[0],R=this.containment?S-this.offset.click.left>=this.containment[0]&&S-this.offset.click.left<=this.containment[2]?S:S-this.offset.click.left>=this.containment[0]?S-k.grid[0]:S+k.grid[0]:S)),{top:W-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():le?0:se.scrollTop()),left:R-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():le?0:se.scrollLeft())}},_rearrange:function(d,w,S,k){S?S[0].appendChild(this.placeholder[0]):w.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?w.item[0]:w.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var R=this.counter;this._delay(function(){R===this.counter&&this.refreshPositions(!k)})},_clear:function(d,w){this.reverting=!1;var S,k=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(S in this._storedCSS)(this._storedCSS[S]==="auto"||this._storedCSS[S]==="static")&&(this._storedCSS[S]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!w&&k.push(function(W){this._trigger("receive",W,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!w&&k.push(function(W){this._trigger("update",W,this._uiHash())}),this!==this.currentContainer&&(w||(k.push(function(W){this._trigger("remove",W,this._uiHash())}),k.push((function(W){return function(se){W._trigger("receive",se,this._uiHash(this))}}).call(this,this.currentContainer)),k.push((function(W){return function(se){W._trigger("update",se,this._uiHash(this))}}).call(this,this.currentContainer))));function R(W,se,le){return function(fe){le._trigger(W,fe,se._uiHash(se))}}for(S=this.containers.length-1;S>=0;S--)w||k.push(R("deactivate",this,this.containers[S])),this.containers[S].containerCache.over&&(k.push(R("out",this,this.containers[S])),this.containers[S].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,w||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!w){for(S=0;S<k.length;S++)k[S].call(this,d);this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){g.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var w=d||this;return{helper:w.helper,placeholder:w.placeholder||g([]),position:w.position,originalPosition:w.originalPosition,offset:w.positionAbs,item:w.currentItem,sender:d?d.element:null}}});/*!
 * jQuery UI Spinner 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */function vi(d){return function(){var w=this.element.val();d.apply(this,arguments),this._refresh(),w!==this.element.val()&&this._trigger("change")}}g.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d=this._super(),w=this.element;return g.each(["min","max","step"],function(S,k){var R=w.attr(k);R!=null&&R.length&&(d[k]=R)}),d},_events:{keydown:function(d){this._start(d)&&this._keydown(d)&&d.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(d){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",d)},mousewheel:function(d,w){var S=g.ui.safeActiveElement(this.document[0]),k=this.element[0]===S;if(!(!k||!w)){if(!this.spinning&&!this._start(d))return!1;this._spin((w>0?1:-1)*this.options.step,d),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(d)},100),d.preventDefault()}},"mousedown .ui-spinner-button":function(d){var w;w=this.element[0]===g.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function S(){var k=this.element[0]===g.ui.safeActiveElement(this.document[0]);k||(this.element.trigger("focus"),this.previous=w,this._delay(function(){this.previous=w}))}d.preventDefault(),S.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,S.call(this)}),this._start(d)!==!1&&this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(d){if(g(d.currentTarget).hasClass("ui-state-active")){if(this._start(d)===!1)return!1;this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)}},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(d){var w=this.options,S=g.ui.keyCode;switch(d.keyCode){case S.UP:return this._repeat(null,1,d),!0;case S.DOWN:return this._repeat(null,-1,d),!0;case S.PAGE_UP:return this._repeat(null,w.page,d),!0;case S.PAGE_DOWN:return this._repeat(null,-w.page,d),!0}return!1},_start:function(d){return!this.spinning&&this._trigger("start",d)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(d,w,S){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,w,S)},d),this._spin(w*this.options.step,S)},_spin:function(d,w){var S=this.value()||0;this.counter||(this.counter=1),S=this._adjustValue(S+d*this._increment(this.counter)),(!this.spinning||this._trigger("spin",w,{value:S})!==!1)&&(this._value(S),this.counter++)},_increment:function(d){var w=this.options.incremental;return w?typeof w=="function"?w(d):Math.floor(d*d*d/5e4-d*d/500+17*d/200+1):1},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),S=w.indexOf(".");return S===-1?0:w.length-S-1},_adjustValue:function(d){var w,S,k=this.options;return w=k.min!==null?k.min:0,S=d-w,S=Math.round(S/k.step)*k.step,d=w+S,d=parseFloat(d.toFixed(this._precision())),k.max!==null&&d>k.max?k.max:k.min!==null&&d<k.min?k.min:d},_stop:function(d){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",d))},_setOption:function(d,w){var S,k,R;if(d==="culture"||d==="numberFormat"){S=this._parse(this.element.val()),this.options[d]=w,this.element.val(this._format(S));return}(d==="max"||d==="min"||d==="step")&&typeof w=="string"&&(w=this._parse(w)),d==="icons"&&(k=this.buttons.first().find(".ui-icon"),this._removeClass(k,null,this.options.icons.up),this._addClass(k,null,w.up),R=this.buttons.last().find(".ui-icon"),this._removeClass(R,null,this.options.icons.down),this._addClass(R,null,w.down)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!d),this.element.prop("disabled",!!d),this.buttons.button(d?"disable":"enable")},_setOptions:vi(function(d){this._super(d)}),_parse:function(d){return typeof d=="string"&&d!==""&&(d=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(d,10,this.options.culture):+d),d===""||isNaN(d)?null:d},_format:function(d){return d===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(d,this.options.numberFormat,this.options.culture):d},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var d=this.value();return d===null?!1:d===this._adjustValue(d)},_value:function(d,w){var S;d!==""&&(S=this._parse(d),S!==null&&(w||(S=this._adjustValue(S)),d=this._format(S))),this.element.val(d),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:vi(function(d){this._stepUp(d)}),_stepUp:function(d){this._start()&&(this._spin((d||1)*this.options.step),this._stop())},stepDown:vi(function(d){this._stepDown(d)}),_stepDown:function(d){this._start()&&(this._spin((d||1)*-this.options.step),this._stop())},pageUp:vi(function(d){this._stepUp((d||1)*this.options.page)}),pageDown:vi(function(d){this._stepDown((d||1)*this.options.page)}),value:function(d){if(!arguments.length)return this._parse(this.element.val());vi(this._value).call(this,d)},widget:function(){return this.uiSpinner}}),g.uiBackCompat!==!1&&g.widget("ui.spinner",g.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),g.ui.spinner;/*!
 * jQuery UI Tabs 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var d=/#.*$/;return function(w){var S,k;S=w.href.replace(d,""),k=location.href.replace(d,"");try{S=decodeURIComponent(S)}catch{}try{k=decodeURIComponent(k)}catch{}return w.hash.length>1&&S===k}}(),_create:function(){var d=this,w=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,w.collapsible),this._processTabs(),w.active=this._initialActive(),Array.isArray(w.disabled)&&(w.disabled=g.uniqueSort(w.disabled.concat(g.map(this.tabs.filter(".ui-state-disabled"),function(S){return d.tabs.index(S)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(w.active):this.active=g(),this._refresh(),this.active.length&&this.load(w.active)},_initialActive:function(){var d=this.options.active,w=this.options.collapsible,S=location.hash.substring(1);return d===null&&(S&&this.tabs.each(function(k,R){if(g(R).attr("aria-controls")===S)return d=k,!1}),d===null&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(d===null||d===-1)&&(d=this.tabs.length?0:!1)),d!==!1&&(d=this.tabs.index(this.tabs.eq(d)),d===-1&&(d=w?!1:0)),!w&&d===!1&&this.anchors.length&&(d=0),d},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):g()}},_tabKeydown:function(d){var w=g(g.ui.safeActiveElement(this.document[0])).closest("li"),S=this.tabs.index(w),k=!0;if(!this._handlePageNav(d)){switch(d.keyCode){case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:S++;break;case g.ui.keyCode.UP:case g.ui.keyCode.LEFT:k=!1,S--;break;case g.ui.keyCode.END:S=this.anchors.length-1;break;case g.ui.keyCode.HOME:S=0;break;case g.ui.keyCode.SPACE:d.preventDefault(),clearTimeout(this.activating),this._activate(S);return;case g.ui.keyCode.ENTER:d.preventDefault(),clearTimeout(this.activating),this._activate(S===this.options.active?!1:S);return;default:return}d.preventDefault(),clearTimeout(this.activating),S=this._focusNextTab(S,k),!d.ctrlKey&&!d.metaKey&&(w.attr("aria-selected","false"),this.tabs.eq(S).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",S)},this.delay))}},_panelKeydown:function(d){this._handlePageNav(d)||d.ctrlKey&&d.keyCode===g.ui.keyCode.UP&&(d.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(d){if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(d,w){var S=this.tabs.length-1;function k(){return d>S&&(d=0),d<0&&(d=S),d}for(;g.inArray(k(),this.options.disabled)!==-1;)d=w?d+1:d-1;return d},_focusNextTab:function(d,w){return d=this._findNextTab(d,w),this.tabs.eq(d).trigger("focus"),d},_setOption:function(d,w){if(d==="active"){this._activate(w);return}this._super(d,w),d==="collapsible"&&(this._toggleClass("ui-tabs-collapsible",null,w),!w&&this.options.active===!1&&this._activate(0)),d==="event"&&this._setupEvents(w),d==="heightStyle"&&this._setupHeightStyle(w)},_sanitizeSelector:function(d){return d?d.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,w=this.tablist.children(":has(a[href])");d.disabled=g.map(w.filter(".ui-state-disabled"),function(S){return w.index(S)}),this._processTabs(),d.active===!1||!this.anchors.length?(d.active=!1,this.active=g()):this.active.length&&!g.contains(this.tablist[0],this.active[0])?this.tabs.length===d.disabled.length?(d.active=!1,this.active=g()):this._activate(this._findNextTab(Math.max(0,d.active-1),!1)):d.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this,w=this.tabs,S=this.anchors,k=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(R){g(this).is(".ui-state-disabled")&&R.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){g(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return g("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=g(),this.anchors.each(function(R,W){var se,le,fe,be=g(W).uniqueId().attr("id"),Te=g(W).closest("li"),Ke=Te.attr("aria-controls");d._isLocal(W)?(se=W.hash,fe=se.substring(1),le=d.element.find(d._sanitizeSelector(se))):(fe=Te.attr("aria-controls")||g({}).uniqueId()[0].id,se="#"+fe,le=d.element.find(se),le.length||(le=d._createPanel(fe),le.insertAfter(d.panels[R-1]||d.tablist)),le.attr("aria-live","polite")),le.length&&(d.panels=d.panels.add(le)),Ke&&Te.data("ui-tabs-aria-controls",Ke),Te.attr({"aria-controls":fe,"aria-labelledby":be}),le.attr("aria-labelledby",be)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),w&&(this._off(w.not(this.tabs)),this._off(S.not(this.anchors)),this._off(k.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(d){return g("<div>").attr("id",d).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(d){var w,S,k;for(Array.isArray(d)&&(d.length?d.length===this.anchors.length&&(d=!0):d=!1),k=0;S=this.tabs[k];k++)w=g(S),d===!0||g.inArray(k,d)!==-1?(w.attr("aria-disabled","true"),this._addClass(w,null,"ui-state-disabled")):(w.removeAttr("aria-disabled"),this._removeClass(w,null,"ui-state-disabled"));this.options.disabled=d,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,d===!0)},_setupEvents:function(d){var w={};d&&g.each(d.split(" "),function(S,k){w[k]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(S){S.preventDefault()}}),this._on(this.anchors,w),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(d){var w,S=this.element.parent();d==="fill"?(w=S.height(),w-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var k=g(this),R=k.css("position");R==="absolute"||R==="fixed"||(w-=k.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){w-=g(this).outerHeight(!0)}),this.panels.each(function(){g(this).height(Math.max(0,w-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):d==="auto"&&(w=0,this.panels.each(function(){w=Math.max(w,g(this).height("").height())}).height(w))},_eventHandler:function(d){var w=this.options,S=this.active,k=g(d.currentTarget),R=k.closest("li"),W=R[0]===S[0],se=W&&w.collapsible,le=se?g():this._getPanelForTab(R),fe=S.length?this._getPanelForTab(S):g(),be={oldTab:S,oldPanel:fe,newTab:se?g():R,newPanel:le};d.preventDefault(),!(R.hasClass("ui-state-disabled")||R.hasClass("ui-tabs-loading")||this.running||W&&!w.collapsible||this._trigger("beforeActivate",d,be)===!1)&&(w.active=se?!1:this.tabs.index(R),this.active=W?g():R,this.xhr&&this.xhr.abort(),!fe.length&&!le.length&&g.error("jQuery UI Tabs: Mismatching fragment identifier."),le.length&&this.load(this.tabs.index(R),d),this._toggle(d,be))},_toggle:function(d,w){var S=this,k=w.newPanel,R=w.oldPanel;this.running=!0;function W(){S.running=!1,S._trigger("activate",d,w)}function se(){S._addClass(w.newTab.closest("li"),"ui-tabs-active","ui-state-active"),k.length&&S.options.show?S._show(k,S.options.show,W):(k.show(),W())}R.length&&this.options.hide?this._hide(R,this.options.hide,function(){S._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),se()}):(this._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),R.hide(),se()),R.attr("aria-hidden","true"),w.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),k.length&&R.length?w.oldTab.attr("tabIndex",-1):k.length&&this.tabs.filter(function(){return g(this).attr("tabIndex")===0}).attr("tabIndex",-1),k.attr("aria-hidden","false"),w.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){var w,S=this._findActive(d);S[0]!==this.active[0]&&(S.length||(S=this.active),w=S.find(".ui-tabs-anchor")[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return d===!1?g():this.tabs.eq(d)},_getIndex:function(d){return typeof d=="string"&&(d=this.anchors.index(this.anchors.filter("[href$='"+g.escapeSelector(d)+"']"))),d},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){g.data(this,"ui-tabs-destroy")?g(this).remove():g(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var d=g(this),w=d.data("ui-tabs-aria-controls");w?d.attr("aria-controls",w).removeData("ui-tabs-aria-controls"):d.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(d){var w=this.options.disabled;w!==!1&&(d===void 0?w=!1:(d=this._getIndex(d),Array.isArray(w)?w=g.map(w,function(S){return S!==d?S:null}):w=g.map(this.tabs,function(S,k){return k!==d?k:null})),this._setOptionDisabled(w))},disable:function(d){var w=this.options.disabled;if(w!==!0){if(d===void 0)w=!0;else{if(d=this._getIndex(d),g.inArray(d,w)!==-1)return;Array.isArray(w)?w=g.merge([d],w).sort():w=[d]}this._setOptionDisabled(w)}},load:function(d,w){d=this._getIndex(d);var S=this,k=this.tabs.eq(d),R=k.find(".ui-tabs-anchor"),W=this._getPanelForTab(k),se={tab:k,panel:W},le=function(fe,be){be==="abort"&&S.panels.stop(!1,!0),S._removeClass(k,"ui-tabs-loading"),W.removeAttr("aria-busy"),fe===S.xhr&&delete S.xhr};this._isLocal(R[0])||(this.xhr=g.ajax(this._ajaxSettings(R,w,se)),this.xhr&&this.xhr.statusText!=="canceled"&&(this._addClass(k,"ui-tabs-loading"),W.attr("aria-busy","true"),this.xhr.done(function(fe,be,Te){setTimeout(function(){W.html(fe),S._trigger("load",w,se),le(Te,be)},1)}).fail(function(fe,be){setTimeout(function(){le(fe,be)},1)})))},_ajaxSettings:function(d,w,S){var k=this;return{url:d.attr("href").replace(/#.*$/,""),beforeSend:function(R,W){return k._trigger("beforeLoad",w,g.extend({jqXHR:R,ajaxSettings:W},S))}}},_getPanelForTab:function(d){var w=g(d).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+w))}}),g.uiBackCompat!==!1&&g.widget("ui.tabs",g.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),g.ui.tabs;/*!
 * jQuery UI Tooltip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var d=g(this).attr("title");return g("<a>").text(d).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(d,w){var S=(d.attr("aria-describedby")||"").split(/\s+/);S.push(w),d.data("ui-tooltip-id",w).attr("aria-describedby",String.prototype.trim.call(S.join(" ")))},_removeDescribedBy:function(d){var w=d.data("ui-tooltip-id"),S=(d.attr("aria-describedby")||"").split(/\s+/),k=g.inArray(w,S);k!==-1&&S.splice(k,1),d.removeData("ui-tooltip-id"),S=String.prototype.trim.call(S.join(" ")),S?d.attr("aria-describedby",S):d.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=g("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=g([])},_setOption:function(d,w){var S=this;this._super(d,w),d==="content"&&g.each(this.tooltips,function(k,R){S._updateContent(R.element)})},_setOptionDisabled:function(d){this[d?"_disable":"_enable"]()},_disable:function(){var d=this;g.each(this.tooltips,function(w,S){var k=g.Event("blur");k.target=k.currentTarget=S.element[0],d.close(k,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var w=g(this);if(w.is("[title]"))return w.data("ui-tooltip-title",w.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var d=g(this);d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title"))}),this.disabledTitles=g([])},open:function(d){var w=this,S=g(d?d.target:this.element).closest(this.options.items);!S.length||S.data("ui-tooltip-id")||(S.attr("title")&&S.data("ui-tooltip-title",S.attr("title")),S.data("ui-tooltip-open",!0),d&&d.type==="mouseover"&&S.parents().each(function(){var k=g(this),R;k.data("ui-tooltip-open")&&(R=g.Event("blur"),R.target=R.currentTarget=this,w.close(R,!0)),k.attr("title")&&(k.uniqueId(),w.parents[this.id]={element:this,title:k.attr("title")},k.attr("title",""))}),this._registerCloseHandlers(d,S),this._updateContent(S,d))},_updateContent:function(d,w){var S,k=this.options.content,R=this,W=w?w.type:null;if(typeof k=="string"||k.nodeType||k.jquery)return this._open(w,d,k);S=k.call(d[0],function(se){R._delay(function(){d.data("ui-tooltip-open")&&(w&&(w.type=W),this._open(w,d,se))})}),S&&this._open(w,d,S)},_open:function(d,w,S){var k,R,W,se,le=g.extend({},this.options.position);if(!S)return;if(k=this._find(w),k){k.tooltip.find(".ui-tooltip-content").html(S);return}w.is("[title]")&&(d&&d.type==="mouseover"?w.attr("title",""):w.removeAttr("title")),k=this._tooltip(w),R=k.tooltip,this._addDescribedBy(w,R.attr("id")),R.find(".ui-tooltip-content").html(S),this.liveRegion.children().hide(),se=g("<div>").html(R.find(".ui-tooltip-content").html()),se.removeAttr("name").find("[name]").removeAttr("name"),se.removeAttr("id").find("[id]").removeAttr("id"),se.appendTo(this.liveRegion);function fe(be){le.of=be,!R.is(":hidden")&&R.position(le)}this.options.track&&d&&/^mouse/.test(d.type)?(this._on(this.document,{mousemove:fe}),fe(d)):R.position(g.extend({of:w},this.options.position)),R.hide(),this._show(R,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(W=this.delayedShow=setInterval(function(){R.is(":visible")&&(fe(le.of),clearInterval(W))},13)),this._trigger("open",d,{tooltip:R})},_registerCloseHandlers:function(d,w){var S={keyup:function(k){if(k.keyCode===g.ui.keyCode.ESCAPE){var R=g.Event(k);R.currentTarget=w[0],this.close(R,!0)}}};w[0]!==this.element[0]&&(S.remove=function(){var k=this._find(w);k&&this._removeTooltip(k.tooltip)}),(!d||d.type==="mouseover")&&(S.mouseleave="close"),(!d||d.type==="focusin")&&(S.focusout="close"),this._on(!0,w,S)},close:function(d){var w,S=this,k=g(d?d.currentTarget:this.element),R=this._find(k);if(!R){k.removeData("ui-tooltip-open");return}w=R.tooltip,!R.closing&&(clearInterval(this.delayedShow),k.data("ui-tooltip-title")&&!k.attr("title")&&k.attr("title",k.data("ui-tooltip-title")),this._removeDescribedBy(k),R.hiding=!0,w.stop(!0),this._hide(w,this.options.hide,function(){S._removeTooltip(g(this))}),k.removeData("ui-tooltip-open"),this._off(k,"mouseleave focusout keyup"),k[0]!==this.element[0]&&this._off(k,"remove"),this._off(this.document,"mousemove"),d&&d.type==="mouseleave"&&g.each(this.parents,function(W,se){g(se.element).attr("title",se.title),delete S.parents[W]}),R.closing=!0,this._trigger("close",d,{tooltip:w}),R.hiding||(R.closing=!1))},_tooltip:function(d){var w=g("<div>").attr("role","tooltip"),S=g("<div>").appendTo(w),k=w.uniqueId().attr("id");return this._addClass(S,"ui-tooltip-content"),this._addClass(w,"ui-tooltip","ui-widget ui-widget-content"),w.appendTo(this._appendTo(d)),this.tooltips[k]={element:d,tooltip:w}},_find:function(d){var w=d.data("ui-tooltip-id");return w?this.tooltips[w]:null},_removeTooltip:function(d){clearInterval(this.delayedShow),d.remove(),delete this.tooltips[d.attr("id")]},_appendTo:function(d){var w=d.closest(".ui-front, dialog");return w.length||(w=this.document[0].body),w},_destroy:function(){var d=this;g.each(this.tooltips,function(w,S){var k=g.Event("blur"),R=S.element;k.target=k.currentTarget=R[0],d.close(k,!0),g("#"+w).remove(),R.data("ui-tooltip-title")&&(R.attr("title")||R.attr("title",R.data("ui-tooltip-title")),R.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),g.uiBackCompat!==!1&&g.widget("ui.tooltip",g.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var d=this._superApply(arguments);return this.options.tooltipClass&&d.tooltip.addClass(this.options.tooltipClass),d}}),g.ui.tooltip});/**
 * @author bbecquet
 * @license MIT
 * @see github.com/bbecquet/Leaflet.PolylineOffset
 */function forEachPair(g,B){if(!(!g||g.length<1))for(let M=1,P=g.length;M<P;M++)B(g[M-1],g[M])}function lineEquation(g,B){if(g.x===B.x)return g.y===B.y?null:{x:g.x};const M=(B.y-g.y)/(B.x-g.x);return{a:M,b:g.y-M*g.x}}function intersection(g,B,M,P){const K=lineEquation(g,B),Y=lineEquation(M,P);if(K===null||Y===null)return null;if(K.hasOwnProperty("x"))return Y.hasOwnProperty("x")?null:{x:K.x,y:Y.a*K.x+Y.b};if(Y.hasOwnProperty("x"))return{x:Y.x,y:K.a*Y.x+K.b};if(K.a===Y.a)return null;const ie=(Y.b-K.b)/(K.a-Y.a);return{x:ie,y:K.a*ie+K.b}}function translatePoint(g,B,M){return{x:g.x+B*Math.cos(M),y:g.y+B*Math.sin(M)}}const PolylineOffset={offsetPointLine:function(g,B){const M=[];return forEachPair(g,L.bind((P,K)=>{if(P.x===K.x&&P.y===K.y)return;const ie=Math.atan2(P.y-K.y,P.x-K.x)-Math.PI/2;M.push({offsetAngle:ie,original:[P,K],offset:[translatePoint(P,B,ie),translatePoint(K,B,ie)]})},this)),M},offsetPoints:function(g,B){const M=this.offsetPointLine(L.LineUtil.simplify(g,B.smoothFactor),B.offset);return this.joinLineSegments(M,B.offset)},joinSegments:function(g,B,M){return this.circularArc(g,B,M).filter(P=>P)},joinLineSegments:function(g,B){let M=[];const P=g[0],K=g[g.length-1];return P&&K&&(M.push(P.offset[0]),forEachPair(g,L.bind(function(Y,ie){M=M.concat(this.joinSegments(Y,ie,B))},this)),M.push(K.offset[1])),M},segmentAsVector:function(g){return{x:g[1].x-g[0].x,y:g[1].y-g[0].y}},getSignedAngle:function(g,B){const M=this.segmentAsVector(g),P=this.segmentAsVector(B);return Math.atan2(M.x*P.y-M.y*P.x,M.x*P.x+M.y*P.y)},circularArc:function(g,B,M){if(g.offsetAngle===B.offsetAngle)return[g.offset[1]];const P=this.getSignedAngle(g.offset,B.offset);if(P*M>0&&P*this.getSignedAngle(g.offset,[g.offset[0],B.offset[1]])>0)return[intersection(g.offset[0],g.offset[1],B.offset[0],B.offset[1])];const K=[],Y=g.original[1],ie=M>0,D=ie?B.offsetAngle:g.offsetAngle;let ne=ie?g.offsetAngle:B.offsetAngle;ne<D&&(ne+=Math.PI*2);const oe=Math.PI/8;for(let ue=D;ue<ne;ue+=oe)K.push(translatePoint(Y,M,ue));return K.push(translatePoint(Y,M,ne)),ie?K.reverse():K}};L.Polyline.include({_projectLatlngs:function(g,B,M){if(g.length>0&&g[0]instanceof L.LatLng){let K=g.map(L.bind(function(Y){const ie=this._map.latLngToLayerPoint(Y);return M&&M.extend(ie),ie},this));this.options.offset&&(K=PolylineOffset.offsetPoints(K,this.options)),B.push(K.map(Y=>L.point(Y.x,Y.y)))}else g.forEach(L.bind(function(K){this._projectLatlngs(K,B,M)},this))}});L.Polyline.include({setOffset:function(g){return this.options.offset=g,this.redraw(),this}});L.LatLngBounds.prototype.modify=function(g,B){var M=this.getSouthWest(),P=this.getNorthEast(),K=g.latLngToLayerPoint(M),Y=g.latLngToLayerPoint(P);return M=g.layerPointToLatLng(new L.Point(K.x-B,K.y+B)),P=g.layerPointToLatLng(new L.Point(Y.x+B,Y.y-B)),new L.LatLngBounds(M,P)};L.Control.Button=L.Class.extend({initialize:function(g){L.Util.setOptions(this,g)},addTo:function(g){return g.addButton(this),this},onAdd:function(g){this._buttonContainer=g,this._button=L.DomUtil.create("a",this.options.className,this._buttonContainer.getContainer()),this._button.href="#",this.setText(this.options.text);var B=this;this._onClick=function(M){B.options.onClick.call(B,M)},L.DomEvent.on(this._button,"click",L.DomEvent.stopPropagation).on(this._button,"mousedown",L.DomEvent.stopPropagation).on(this._button,"dblclick",L.DomEvent.stopPropagation).on(this._button,"click",L.DomEvent.preventDefault).on(this._button,"click",this._onClick,this)},remove:function(){L.DomEvent.off(this._button,"click",this._onClick),this._buttonContainer.getContainer().removeChild(this._button)},setText:function(g){this._button.title=g,this._button.innerHTML=g}});L.Control.ButtonContainer=L.Control.extend({options:{position:"topleft"},getContainer:function(){return this._container||(this._container=L.DomUtil.create("div",this.options.className)),this._container},onAdd:function(g){return this._map=g,this.getContainer()},addButton:function(g){g.onAdd(this)},addClass:function(g){L.DomUtil.addClass(this.getContainer(),g)},removeClass:function(g){L.DomUtil.removeClass(this.getContainer(),g)}});L.LocationFilter=L.Layer.extend({includes:L.Mixin.Events,options:{enableButton:{enableText:"Select area",disableText:"Remove selection"},adjustButton:{text:"Select area within current zoom"},buttonPosition:"topleft",showButtons:!0,locked:!1,fixed:!1},initialize:function(g){L.Util.setOptions(this,g)},addTo:function(g){return g.addLayer(this),this},onAdd:function(g){this._map=g,this.options.showButtons&&(this.options.enableButton||this.options.adjustButton)&&this._initializeButtonContainer(),this.options.enable&&this.enable()},onRemove:function(g){this.disable(),this._buttonContainer&&this._buttonContainer.removeFrom(g)},getBounds:function(){return new L.LatLngBounds(this._sw,this._ne)},setBounds:function(g){this._nw=g.getNorthWest(),this._ne=g.getNorthEast(),this._sw=g.getSouthWest(),this._se=g.getSouthEast(),this.isEnabled()&&(this._draw(),this.fire("change",{bounds:g}))},isEnabled:function(){return this._enabled},setLocked:function(g){this.options.locked=g,this._toggleMarkerDragging(this._moveMarker,g,"hide-marker")},isLocked:function(){return this.options.locked},setFixed:function(g){this.options.fixed=g,this._toggleMarkerDragging(this._neMarker,g,"hide-marker"),this._toggleMarkerDragging(this._nwMarker,g,"hide-marker"),this._toggleMarkerDragging(this._seMarker,g,"hide-marker"),this._toggleMarkerDragging(this._swMarker,g,"hide-marker")},_toggleMarkerDragging(g,B,M){B?(g.dragging.disable(),g._icon.classList.add(M)):(g.dragging.enable(),g._icon.classList.remove(M))},_drawRectangle:function(g,B){B=B||{};var M={stroke:!1,fill:!0,fillColor:"black",fillOpacity:.3,clickable:!1};B=L.Util.extend(M,B);var P=new L.Rectangle(g,B);return P.addTo(this._layer),P},_drawImageMarker:function(g,B){var M=new L.Marker(g,{icon:new L.DivIcon({iconAnchor:B.anchor,iconSize:B.size,className:B.className}),draggable:!0});return M.addTo(this._layer),M},_drawMoveMarker:function(g){var B=this;return this._moveMarker=this._drawImageMarker(g,{className:"location-filter move-marker "+(this.options.locked?"hide-marker":""),anchor:[-10,-10],size:[13,13]}),this._moveMarker.on("drag",function(M){var P=B._moveMarker.getLatLng(),K=P.lat-B._nw.lat,Y=P.lng-B._nw.lng;B._nw=new L.LatLng(B._nw.lat+K,B._nw.lng+Y,!0),B._ne=new L.LatLng(B._ne.lat+K,B._ne.lng+Y,!0),B._sw=new L.LatLng(B._sw.lat+K,B._sw.lng+Y,!0),B._se=new L.LatLng(B._se.lat+K,B._se.lng+Y,!0),B._draw()}),this._setupDragendListener(this._moveMarker),this._moveMarker},_drawResizeMarker:function(g,B,M,P,K){return this._drawImageMarker(g,{className:"location-filter resize-marker "+B+" "+(this.options.fixed?"hide-marker":""),anchor:[7,6],size:[13,12]})},_setupResizeMarkerTracking:function(g,B){var M=this;g.on("drag",function(P){var K=g.getLatLng(),Y=B.moveAlong.lat,ie=B.moveAlong.lng;Y.setLatLng(new L.LatLng(K.lat,Y.getLatLng().lng,!0)),ie.setLatLng(new L.LatLng(ie.getLatLng().lat,K.lng,!0));var D=[M._nwMarker.getLatLng(),M._neMarker.getLatLng(),M._swMarker.getLatLng(),M._seMarker.getLatLng()];D.sort(function(ne,oe){return ne.lat!=oe.lat?oe.lat-ne.lat:ne.lng-oe.lng}),M._nw=D[0],M._ne=D[1],M._sw=D[2],M._se=D[3],M._draw({repositionResizeMarkers:!1})}),this._setupDragendListener(g)},_setupDragendListener:function(g){var B=this;g.on("dragend",function(M){B.fire("change",{bounds:B.getBounds()})})},_calculateBounds:function(){var g=this._map.getBounds(),B=new L.LatLngBounds(new L.LatLng(g.getSouthWest().lat-.1,g.getSouthWest().lng-.1,!0),new L.LatLng(g.getNorthEast().lat+.1,g.getNorthEast().lng+.1,!0));this._osw=B.getSouthWest(),this._one=B.getNorthEast(),this._northBounds=new L.LatLngBounds(new L.LatLng(this._ne.lat,this._osw.lng,!0),this._one),this._westBounds=new L.LatLngBounds(new L.LatLng(this._sw.lat,this._osw.lng,!0),this._nw),this._eastBounds=new L.LatLngBounds(this._se,new L.LatLng(this._ne.lat,this._one.lng,!0)),this._southBounds=new L.LatLngBounds(this._osw,new L.LatLng(this._sw.lat,this._one.lng,!0))},_initialDraw:function(){this._initialDrawCalled||(this._layer=new L.LayerGroup,this._calculateBounds(),this._northRect=this._drawRectangle(this._northBounds),this._westRect=this._drawRectangle(this._westBounds),this._eastRect=this._drawRectangle(this._eastBounds),this._southRect=this._drawRectangle(this._southBounds),this._innerRect=this._drawRectangle(this.getBounds(),{fillOpacity:0,stroke:!0,color:"white",weight:1,opacity:.9}),this._nwMarker=this._drawResizeMarker(this._nw,"nw"),this._neMarker=this._drawResizeMarker(this._ne,"ne"),this._swMarker=this._drawResizeMarker(this._sw,"sw"),this._seMarker=this._drawResizeMarker(this._se,"se"),this._setupResizeMarkerTracking(this._nwMarker,{moveAlong:{lat:this._neMarker,lng:this._swMarker}}),this._setupResizeMarkerTracking(this._neMarker,{moveAlong:{lat:this._nwMarker,lng:this._seMarker}}),this._setupResizeMarkerTracking(this._swMarker,{moveAlong:{lat:this._seMarker,lng:this._nwMarker}}),this._setupResizeMarkerTracking(this._seMarker,{moveAlong:{lat:this._swMarker,lng:this._neMarker}}),this._moveMarker=this._drawMoveMarker(this._nw),this._initialDrawCalled=!0)},_draw:function(g){g=L.Util.extend({repositionResizeMarkers:!0},g),this._calculateBounds(),this._northRect.setBounds(this._northBounds),this._westRect.setBounds(this._westBounds),this._eastRect.setBounds(this._eastBounds),this._southRect.setBounds(this._southBounds),this._innerRect.setBounds(this.getBounds()),g.repositionResizeMarkers&&(this._nwMarker.setLatLng(this._nw),this._neMarker.setLatLng(this._ne),this._swMarker.setLatLng(this._sw),this._seMarker.setLatLng(this._se)),this._moveMarker.setLatLng(this._nw)},_adjustToMap:function(){this.setBounds(this._map.getBounds()),this._map.zoomOut()},enable:function(){if(!this._enabled){var g;this._sw&&this._ne?g=new L.LatLngBounds(this._sw,this._ne):this.options.bounds?g=this.options.bounds:g=this._map.getBounds(),this._map.invalidateSize(),this._nw=g.getNorthWest(),this._ne=g.getNorthEast(),this._sw=g.getSouthWest(),this._se=g.getSouthEast(),this.options.showButtons&&(this._buttonContainer&&this._buttonContainer.addClass("enabled"),this._enableButton&&this._enableButton.setText(this.options.enableButton.disableText),this.options.adjustButton&&this._createAdjustButton()),this._initialDraw(),this._draw();var B=this;this._moveHandler=function(){B._draw()},this._map.on("move",this._moveHandler),this._layer.addTo(this._map);var M=this._map.getBounds();g=new L.LatLngBounds(this._sw,this._ne).modify(this._map,10),(!M.contains(g.getSouthWest())||!M.contains(g.getNorthEast()))&&this._map.fitBounds(g),this._enabled=!0,this.fire("enabled")}},disable:function(){this._enabled&&(this.options.showButtons&&(this._buttonContainer&&this._buttonContainer.removeClass("enabled"),this._enableButton&&this._enableButton.setText(this.options.enableButton.enableText),this._adjustButton&&this._adjustButton.remove()),this._map.off("move",this._moveHandler),this._map.removeLayer(this._layer),this._enabled=!1,this.fire("disabled"))},_createAdjustButton:function(){var g=this;this._adjustButton=new L.Control.Button({className:"adjust-button",text:this.options.adjustButton.text,onClick:function(B){g._adjustToMap(),g.fire("adjustToZoomClick")}}).addTo(this._buttonContainer)},_initializeButtonContainer:function(){var g=this;this._buttonContainer=new L.Control.ButtonContainer({className:"location-filter button-container",position:this.options.buttonPosition}),this.options.enableButton&&(this._enableButton=new L.Control.Button({className:"enable-button",text:this.options.enableButton.enableText,onClick:function(B){g._enabled?(g.disable(),g.fire("disableClick")):(g.enable(),g.fire("enableClick"))}}).addTo(this._buttonContainer)),this._buttonContainer.addTo(this._map)}});var codemirror={},hasRequiredCodemirror;function requireCodemirror(){return hasRequiredCodemirror||(hasRequiredCodemirror=1,window.CodeMirror=function(){function g(ce,ye){var Be={},Pe=g.defaults;for(var qe in Pe)Pe.hasOwnProperty(qe)&&(Be[qe]=(ye&&ye.hasOwnProperty(qe)?ye:Pe)[qe]);var Oe=wi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");Oe.setAttribute("wrap","off"),Oe.setAttribute("autocorrect","off"),Oe.setAttribute("autocapitalize","off");var Ge=wi("div",[Oe],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),ot=wi("div",null,"CodeMirror-scrollbar-inner"),vt=wi("div",[ot],"CodeMirror-scrollbar"),Ct=wi("div"),Ut=wi("div",null,null,"position: relative; z-index: -1"),ai=wi("pre","Â ","CodeMirror-cursor"),Di=wi("pre","Â ","CodeMirror-cursor","visibility: hidden"),ni=wi("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),ei=wi("div",[ni,ai,Di,Ut,Ct],null,"position: relative; z-index: 0"),Ui=wi("div",null,"CodeMirror-gutter-text"),Qi=wi("div",[Ui],"CodeMirror-gutter"),hr=wi("div",[Qi,wi("div",[ei],"CodeMirror-lines")],null,"position: relative"),Ki=wi("div",[hr],null,"position: relative"),Yt=wi("div",[Ki],"CodeMirror-scroll");Yt.setAttribute("tabIndex","-1");var wr=wi("div",[Ge,vt,Yt],"CodeMirror"+(Be.lineWrapping?" CodeMirror-wrap":""));ce.appendChild?ce.appendChild(wr):ce(wr),oo(),Ma(),B&&(Oe.style.width="0px"),ut||(Yt.draggable=!0),ei.style.outline="none",Be.tabindex!=null&&(Oe.tabIndex=Be.tabindex),Be.autofocus&&Rs(),!Be.gutter&&!Be.lineNumbers&&(Qi.style.display="none"),Ze&&(Ge.style.height="1px",Ge.style.position="absolute"),wt?(vt.style.zIndex=-2,vt.style.visibility="hidden"):Ue&&(vt.style.minWidth="18px");var bi=new $t,Ir=new $t,Pr,Zi,pi=new le([new se([new W("")])]),_s=0,dr;no();var Lt={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Yr,Ys,_r,Br=0,Cr,rr=!1,Lr=!1,sr=!1,jr,ss,ps,cr,js,ys,Os,pn=0,Qr=0,es=0,xo=0,Zs,An=er(0),ta=!1,ja=!0,Qn=!1,wa=null;qi(function(){xa(Be.value||""),jr=!1})();var Nr=new Me;Qt(Yt,"mousedown",qi(Ta)),Qt(Yt,"dblclick",qi(On)),Qt(ei,"selectstart",Xe),ke||Qt(Yt,"contextmenu",Qa),Qt(Yt,"scroll",Ea),Qt(vt,"scroll",Ca),Qt(vt,"mousedown",function(){dr&&setTimeout(Rs,0)});var Vo=Qt(window,"resize",function(){wr.parentNode?Js(!0):Vo()},!0);Qt(Oe,"keyup",qi(Co)),Qt(Oe,"input",aa),Qt(Oe,"keydown",qi(pr)),Qt(Oe,"keypress",qi($a)),Qt(Oe,"focus",In),Qt(Oe,"blur",sa);function Bo(xe){Be.onDragEvent&&Be.onDragEvent(br,De(xe))||gt(xe)}Be.dragDrop&&(Qt(Yt,"dragstart",ks),Qt(Yt,"dragenter",Bo),Qt(Yt,"dragover",Bo),Qt(Yt,"drop",qi(Za))),Qt(Yt,"paste",function(){Rs(),aa()}),Qt(Oe,"paste",function(){sr=!0,aa()}),Qt(Oe,"cut",qi(function(){Be.readOnly||Rn("")})),Ze&&Qt(Ki,"mouseup",function(){document.activeElement==Oe&&Oe.blur(),Rs()});var ba;try{ba=document.activeElement==Oe}catch{}ba||Be.autofocus?setTimeout(In,20):sa();function Tn(xe){return xe>=0&&xe<pi.size}var br=wr.CodeMirror={getValue:Ba,setValue:qi(xa),getSelection:Fa,replaceSelection:qi(Rn),focus:function(){window.focus(),Rs(),In(),aa()},setOption:function(xe,He){var je=Be[xe];Be[xe]=He,xe=="mode"||xe=="indentUnit"?no():xe=="readOnly"&&He=="nocursor"?(sa(),Oe.blur()):xe=="readOnly"&&!He?hn(!0):xe=="theme"?oo():xe=="lineWrapping"&&je!=He?qi(ao)():xe=="tabSize"?Js(!0):xe=="keyMap"?Ma():xe=="tabindex"?Oe.tabIndex=He:xe=="showCursorWhenSelecting"&&Io(),(xe=="lineNumbers"||xe=="gutter"||xe=="firstLineNumber"||xe=="theme"||xe=="lineNumberFormatter")&&(Ua(),Js(!0))},getOption:function(xe){return Be[xe]},getMode:function(){return Zi},undo:qi(na),redo:qi(dl),indentLine:qi(function(xe,He){typeof He!="string"&&(He==null?He=Be.smartIndent?"smart":"prev":He=He?"add":"subtract"),Tn(xe)&&so(xe,He)}),indentSelection:qi(Fo),historySize:function(){return{undo:Nr.done.length,redo:Nr.undone.length}},clearHistory:function(){Nr=new Me},setHistory:function(xe){Nr=new Me,Nr.done=xe.done,Nr.undone=xe.undone},getHistory:function(){function xe(He){for(var je=0,$e=[],bt;je<He.length;++je){$e.push(bt=[]);for(var St=0,Nt=He[je];St<Nt.length;++St){var jt=[],hi=Nt[St];bt.push({start:hi.start,added:hi.added,old:jt});for(var Xt=0;Xt<hi.old.length;++Xt)jt.push(vi(hi.old[Xt]))}}return $e}return{done:xe(Nr.done),undone:xe(Nr.undone)}},matchBrackets:qi(function(){qr(!0)}),getTokenAt:qi(function(xe){return xe=yr(xe),er(xe.line).getTokenAt(Zi,Ms(xe.line),Be.tabSize,xe.ch)}),getStateAfter:function(xe){return xe=Ji(xe??pi.size-1),Ms(xe+1)},cursorCoords:function(xe,He){return xe==null&&(xe=Lt.inverted),this.charCoords(xe?Lt.from:Lt.to,He)},charCoords:function(xe,He){return xe=yr(xe),He=="local"?xs(xe,!1):He=="div"?xs(xe,!0):jo(xe)},coordsChar:function(xe){var He=ii(ei);return Kn(xe.x-He.left,xe.y-He.top)},defaultTextHeight:function(){return Bs()},markText:qi(Pa),setBookmark:ml,findMarksAt:Yo,setMarker:qi(Wr),clearMarker:qi(Vn),setLineClass:qi(ko),hideLine:qi(function(xe){return Aa(xe,!0)}),showLine:qi(function(xe){return Aa(xe,!1)}),onDeleteLine:function(xe,He){if(typeof xe=="number"){if(!Tn(xe))return null;xe=er(xe)}return(xe.handlers||(xe.handlers=[])).push(He),xe},lineInfo:Do,getViewport:function(){return{from:Qr,to:es}},addWidget:function(xe,He,je,$e,bt){xe=xs(yr(xe));var St=xe.yBot,Nt=xe.x;if(He.style.position="absolute",Ki.appendChild(He),$e=="over")St=xe.y;else if($e=="near"){var jt=Math.max(Yt.offsetHeight,pi.height*Bs()),hi=Math.max(Ki.clientWidth,ei.clientWidth)-lo();xe.yBot+He.offsetHeight>jt&&xe.y>He.offsetHeight&&(St=xe.y-He.offsetHeight),Nt+He.offsetWidth>hi&&(Nt=hi-He.offsetWidth)}He.style.top=St+La()+"px",He.style.left=He.style.right="",bt=="right"?(Nt=Ki.clientWidth-He.offsetWidth,He.style.right="0px"):(bt=="left"?Nt=0:bt=="middle"&&(Nt=(Ki.clientWidth-He.offsetWidth)/2),He.style.left=Nt+lo()+"px"),je&&to(Nt,St,Nt+He.offsetWidth,St+He.offsetHeight)},lineCount:function(){return pi.size},clipPos:yr,getCursor:function(xe){return(xe==null||xe=="head")&&(xe=Lt.inverted),xe=="anchor"&&(xe=!Lt.inverted),xe=="end"&&(xe=!1),mi(xe?Lt.from:Lt.to)},somethingSelected:function(){return!Wi(Lt.from,Lt.to)},setCursor:qi(function(xe,He,je){He==null&&typeof xe.line=="number"?$s(xe.line,xe.ch,je):$s(xe,He,je)}),setSelection:qi(function(xe,He,je){(je?Hs:ka)(yr(xe),yr(He||xe))}),getLine:function(xe){if(Tn(xe))return er(xe).text},getLineHandle:function(xe){if(Tn(xe))return er(xe)},setLine:qi(function(xe,He){Tn(xe)&&cn(He,{line:xe,ch:0},{line:xe,ch:er(xe).text.length})}),removeLine:qi(function(xe){Tn(xe)&&cn("",{line:xe,ch:0},yr({line:xe+1,ch:0}))}),replaceRange:qi(cn),getRange:function(xe,He,je){return eo(yr(xe),yr(He),je)},triggerOnKeyDown:qi(pr),execCommand:function(xe){return ne[xe](br)},moveH:qi(Mr),deleteH:qi(zn),moveV:qi(Da),toggleOverwrite:function(){rr?(rr=!1,ai.className=ai.className.replace(" CodeMirror-overwrite","")):(rr=!0,ai.className+=" CodeMirror-overwrite")},posFromIndex:function(xe){var He=0,je;return pi.iter(0,pi.size,function($e){var bt=$e.text.length+1;if(bt>xe)return je=xe,!0;xe-=bt,++He}),yr({line:He,ch:je})},indexFromPos:function(xe){if(xe.line<0||xe.ch<0)return 0;var He=xe.ch;return pi.iter(0,xe.line,function(je){He+=je.text.length+1}),He},scrollTo:function(xe,He){xe!=null&&(Yt.scrollLeft=xe),He!=null&&(vt.scrollTop=Yt.scrollTop=He),Js([])},getScrollInfo:function(){return{x:Yt.scrollLeft,y:vt.scrollTop,height:vt.scrollHeight,width:Yt.scrollWidth}},scrollIntoView:function(xe){var He=xs(xe?yr(xe):Lt.inverted?Lt.from:Lt.to);to(He.x,He.y,He.x,He.yBot)},setSize:function(xe,He){function je($e){return $e=String($e),/^\d+$/.test($e)?$e+"px":$e}xe!=null&&(wr.style.width=je(xe)),He!=null&&(Yt.style.height=je(He)),br.refresh()},operation:function(xe){return qi(xe)()},compoundChange:function(xe){return tn(xe)},refresh:function(){Js(!0,null,Br),vt.scrollHeight>Br&&(vt.scrollTop=Br)},getInputField:function(){return Oe},getWrapperElement:function(){return wr},getScrollerElement:function(){return Yt},getGutterElement:function(){return Qi}};function er(xe){return fe(pi,xe)}function As(xe,He){ys=!0;for(var je=He-xe.height,$e=xe;$e;$e=$e.parent)$e.height+=je}function ia(xe,He){return xe.styles||xe.highlight(Zi,xe.stateAfter=Ms(be(xe)),Be.tabSize),xe.getContent(Be.tabSize,He,Be.lineWrapping)}function xa(xe){var He={line:0,ch:0};Eo(He,{line:pi.size-1,ch:er(pi.size-1).text.length},$r(xe),He,He),jr=!0}function Ba(xe){var He=[];return pi.iter(0,pi.size,function(je){He.push(je.text)}),He.join(xe||`
`)}function Ca(xe){Math.abs(vt.scrollTop-Br)>1&&(Br=Yt.scrollTop=vt.scrollTop,Js([]))}function Ea(xe){Be.fixedGutter&&Qi.style.left!=Yt.scrollLeft+"px"&&(Qi.style.left=Yt.scrollLeft+"px"),Math.abs(Yt.scrollTop-Br)>1&&(Br=Yt.scrollTop,vt.scrollTop!=Br&&(vt.scrollTop=Br),Js([])),Be.onScroll&&Be.onScroll(br)}function Ta(xe){Xo(Gt(xe,"shiftKey"));for(var He=Dt(xe);He!=wr;He=He.parentNode)if(He.parentNode==Ki&&He!=hr)return;for(var He=Dt(xe);He!=wr;He=He.parentNode)if(He.parentNode==Ui)return Be.onGutterClick&&Be.onGutterClick(br,ji(Ui.childNodes,He)+Qr,xe),Xe(xe);var je=ua(xe);switch(Kt(xe)){case 3:ke&&Qa(xe);return;case 2:je&&$s(je.line,je.ch,!0),setTimeout(Rs,20),Xe(xe);return}if(!je){Dt(xe)==Yt&&Xe(xe);return}dr||In();var $e=+new Date,bt="single";if(_r&&_r.time>$e-400&&Wi(_r.pos,je))bt="triple",Xe(xe),setTimeout(Rs,20),gl(je.line);else if(Ys&&Ys.time>$e-400&&Wi(Ys.pos,je)){bt="double",_r={time:$e,pos:je},Xe(xe);var St=ro(je);Hs(St.from,St.to)}else Ys={time:$e,pos:je};function Nt(Xi){ut&&(Yt.draggable=!1),Cr=!1,nr(),Xt(),Math.abs(xe.clientX-Xi.clientX)+Math.abs(xe.clientY-Xi.clientY)<10&&(Xe(Xi),$s(je.line,je.ch,!0),Rs())}var jt=je,hi;if(Be.dragDrop&&ci&&!Be.readOnly&&!Wi(Lt.from,Lt.to)&&!Zt(je,Lt.from)&&!Zt(Lt.to,je)&&bt=="single"){ut&&(Yt.draggable=!0);var nr=Qt(document,"mouseup",qi(Nt),!0),Xt=Qt(Yt,"drop",qi(Nt),!0);Cr=!0,Yt.dragDrop&&Yt.dragDrop();return}Xe(xe),bt=="single"&&$s(je.line,je.ch,!0);var Gi=Lt.from,zi=Lt.to;function Oi(Xi){if(bt=="single"){Hs(yr(je),Xi);return}if(Gi=yr(Gi),zi=yr(zi),bt=="double"){var Or=ro(Xi);Zt(Xi,Gi)?Hs(Or.from,zi):Hs(Gi,Or.to)}else bt=="triple"&&(Zt(Xi,Gi)?Hs(zi,yr({line:Xi.line,ch:0})):Hs(Gi,yr({line:Xi.line+1,ch:0})))}function mr(Xi){var Or=ua(Xi,!0);if(Or&&!Wi(Or,jt)){dr||In(),jt=Or,Oi(Or),jr=!1;var Sr=gr();(Or.line>=Sr.to||Or.line<Sr.from)&&(hi=setTimeout(qi(function(){mr(Xi)}),150))}}function ur(Xi){clearTimeout(hi);var Or=ua(Xi);Or&&Oi(Or),Xe(Xi),Rs(),jr=!0,vr(),nr()}var vr=Qt(document,"mousemove",qi(function(Xi){clearTimeout(hi),Xe(Xi),!Qe&&!Kt(Xi)?ur(Xi):mr(Xi)}),!0),nr=Qt(document,"mouseup",qi(ur),!0)}function On(xe){for(var He=Dt(xe);He!=wr;He=He.parentNode)if(He.parentNode==Ui)return Xe(xe);Xe(xe)}function Za(xe){if(!(Be.onDragEvent&&Be.onDragEvent(br,De(xe)))){Xe(xe);var He=ua(xe,!0),je=xe.dataTransfer.files;if(!(!He||Be.readOnly))if(je&&je.length&&window.FileReader&&window.File)for(var $e=je.length,bt=Array($e),St=0,Nt=function(hi,Xt){var Gi=new FileReader;Gi.onload=function(){bt[Xt]=Gi.result,++St==$e&&(He=yr(He),qi(function(){var zi=cn(bt.join(""),He,He);Hs(He,zi)})())},Gi.readAsText(hi)},jt=0;jt<$e;++jt)Nt(je[jt],jt);else{if(Cr&&!(Zt(He,Lt.from)||Zt(Lt.to,He)))return;try{var bt=xe.dataTransfer.getData("Text");bt&&tn(function(){var Xt=Lt.from,Gi=Lt.to;Hs(He,He),Cr&&cn("",Xt,Gi),Rn(bt),Rs()})}catch{}}}}function ks(xe){var He=Fa();xe.dataTransfer.setData("Text",He),xe.dataTransfer.setDragImage&&xe.dataTransfer.setDragImage(wi("img"),0,0)}function gs(xe,He){if(typeof xe=="string"&&(xe=ne[xe],!xe))return!1;var je=Yr;try{Be.readOnly&&(Lr=!0),He&&(Yr=null),xe(br)}catch($e){if($e!=ri)throw $e;return!1}finally{Yr=je,Lr=!1}return!0}var Ja;function Sa(xe){var He=ue(Be.keyMap),je=He.auto;clearTimeout(Ja),je&&!we(xe)&&(Ja=setTimeout(function(){ue(Be.keyMap)==He&&(Be.keyMap=je.call?je.call(null,br):je)},50));var $e=Ie[Gt(xe,"keyCode")],bt=!1;if($e==null||xe.altGraphKey)return!1;Gt(xe,"altKey")&&($e="Alt-"+$e),Gt(xe,_t?"metaKey":"ctrlKey")&&($e="Ctrl-"+$e),Gt(xe,_t?"ctrlKey":"metaKey")&&($e="Cmd-"+$e);var St=!1;function Nt(){St=!0}return Gt(xe,"shiftKey")?bt=pe("Shift-"+$e,Be.extraKeys,Be.keyMap,function(jt){return gs(jt,!0)},Nt)||pe($e,Be.extraKeys,Be.keyMap,function(jt){if(typeof jt=="string"&&/^go[A-Z]/.test(jt))return gs(jt)},Nt):bt=pe($e,Be.extraKeys,Be.keyMap,gs,Nt),St&&(bt=!1),bt&&(Xe(xe),Fn(),We&&(xe.oldKeyCode=xe.keyCode,xe.keyCode=0)),bt}function ra(xe,He){var je=pe("'"+He+"'",Be.extraKeys,Be.keyMap,function($e){return gs($e,!0)});return je&&(Xe(xe),Fn()),je}var Sn=null;function pr(xe){if(dr||In(),Qe&&xe.keyCode==27&&(xe.returnValue=!1),Qn&&oa()&&(Qn=!1),!(Be.onKeyEvent&&Be.onKeyEvent(br,De(xe)))){var He=Gt(xe,"keyCode");Xo(He==16||Gt(xe,"shiftKey"));var je=Sa(xe);rt&&(Sn=je?He:null,!je&&He==88&&Gt(xe,M?"metaKey":"ctrlKey")&&Rn(""))}}function $a(xe){if(Qn&&oa(),!(Be.onKeyEvent&&Be.onKeyEvent(br,De(xe)))){var He=Gt(xe,"keyCode"),je=Gt(xe,"charCode");if(rt&&He==Sn){Sn=null,Xe(xe);return}if(!((rt&&(!xe.which||xe.which<10)||Ze)&&Sa(xe))){var $e=String.fromCharCode(je??He);Be.electricChars&&Zi.electricChars&&Be.smartIndent&&!Be.readOnly&&Zi.electricChars.indexOf($e)>-1&&setTimeout(qi(function(){so(Lt.to.line,"smart")}),75),!ra(xe,$e)&&aa()}}}function Co(xe){Be.onKeyEvent&&Be.onKeyEvent(br,De(xe))||Gt(xe,"keyCode")==16&&(Yr=null)}function In(){Be.readOnly!="nocursor"&&(dr||(Be.onFocus&&Be.onFocus(br),dr=!0,Yt.className.search(/\bCodeMirror-focused\b/)==-1&&(Yt.className+=" CodeMirror-focused")),gn(),Fn())}function sa(){dr&&(Be.onBlur&&Be.onBlur(br),dr=!1,Zs&&qi(function(){Zs&&(Zs(),Zs=null)})(),Yt.className=Yt.className.replace(" CodeMirror-focused","")),clearInterval(Pr),setTimeout(function(){dr||(Yr=null)},150)}function Eo(xe,He,je,$e,bt){if(!Lr){var St=[];if(pi.iter(xe.line,He.line+1,function(jt){St.push(w(jt.text,jt.markedSpans))}),Nr)for(Nr.addChange(xe.line,je.length,St);Nr.done.length>Be.undoDepth;)Nr.done.shift();var Nt=Yi(d(St[0]),d(_i(St)),xe.ch,He.ch,je);Ko(xe,He,Nt,$e,bt)}}function To(xe,He){if(xe.length){for(var je=xe.pop(),$e=[],bt=je.length-1;bt>=0;bt-=1){var St=je[bt],Nt=[],jt=St.start+St.added;pi.iter(St.start,jt,function(Xt){Nt.push(w(Xt.text,Xt.markedSpans))}),$e.push({start:St.start,added:St.old.length,old:Nt});var hi={line:St.start+St.old.length-1,ch:Tr(vi(_i(Nt)),vi(_i(St.old)))};Ko({line:St.start,ch:0},{line:jt-1,ch:er(jt-1).text.length},St.old,hi,hi)}jr=!0,He.push($e)}}function na(){To(Nr.done,Nr.undone)}function dl(){To(Nr.undone,Nr.done)}function Ko(xe,He,je,$e,bt){if(Lr)return;var St=!1,Nt=An.text.length;Be.lineWrapping||pi.iter(xe.line,He.line+1,function(Sr){if(!Sr.hidden&&Sr.text.length==Nt)return St=!0,!0}),(xe.line!=He.line||je.length>1)&&(ys=!0);var jt=He.line-xe.line,hi=er(xe.line),Xt=er(He.line),Gi=_i(je);if(xe.ch==0&&He.ch==0&&vi(Gi)==""){for(var zi=[],Oi=0,mr=je.length-1;Oi<mr;++Oi)zi.push(new W(vi(je[Oi]),d(je[Oi])));Xt.update(Xt.text,d(Gi)),jt&&pi.remove(xe.line,jt,Os),zi.length&&pi.insert(xe.line,zi)}else if(hi==Xt)if(je.length==1)hi.update(hi.text.slice(0,xe.ch)+vi(je[0])+hi.text.slice(He.ch),d(je[0]));else{for(var zi=[],Oi=1,mr=je.length-1;Oi<mr;++Oi)zi.push(new W(vi(je[Oi]),d(je[Oi])));zi.push(new W(vi(Gi)+hi.text.slice(He.ch),d(Gi))),hi.update(hi.text.slice(0,xe.ch)+vi(je[0]),d(je[0])),pi.insert(xe.line+1,zi)}else if(je.length==1)hi.update(hi.text.slice(0,xe.ch)+vi(je[0])+Xt.text.slice(He.ch),d(je[0])),pi.remove(xe.line+1,jt,Os);else{var zi=[];hi.update(hi.text.slice(0,xe.ch)+vi(je[0]),d(je[0])),Xt.update(vi(Gi)+Xt.text.slice(He.ch),d(Gi));for(var Oi=1,mr=je.length-1;Oi<mr;++Oi)zi.push(new W(vi(je[Oi]),d(je[Oi])));jt>1&&pi.remove(xe.line+1,jt-1,Os),pi.insert(xe.line+1,zi)}if(Be.lineWrapping){var ur=Math.max(5,Yt.clientWidth/Gn()-3);pi.iter(xe.line,xe.line+je.length,function(Sr){if(!Sr.hidden){var ws=Math.ceil(Sr.text.length/ur)||1;ws!=Sr.height&&As(Sr,ws)}})}else pi.iter(xe.line,xe.line+je.length,function(Sr){var ws=Sr.text;!Sr.hidden&&ws.length>Nt&&(An=Sr,Nt=ws.length,ja=!0,St=!1)}),St&&(ta=!0);_s=Math.min(_s,xe.line),co(400);var vr=je.length-jt-1;if(ps.push({from:xe.line,to:He.line+1,diff:vr}),Be.onChange){for(var Oi=0;Oi<je.length;++Oi)typeof je[Oi]!="string"&&(je[Oi]=je[Oi].text);var nr={from:xe,to:He,text:je};if(cr){for(var Xi=cr;Xi.next;Xi=Xi.next);Xi.next=nr}else cr=nr}function Or(Sr){return Sr<=Math.min(He.line,He.line+vr)?Sr:Sr+vr}ka(yr($e),yr(bt),Or(Lt.from.line),Or(Lt.to.line))}function Go(){var xe=pi.height*Bs()+2*La();return xe*.99>Yt.offsetHeight?xe:!1}function So(xe){var He=Go();vt.style.display=He?"block":"none",He?(ot.style.height=Ki.style.minHeight=He+"px",vt.style.height=Yt.clientHeight+"px",xe!=null&&(vt.scrollTop=Yt.scrollTop=xe,ut&&setTimeout(function(){vt.scrollTop==xe&&(vt.scrollTop=xe+(xe?-1:1),vt.scrollTop=xe)},0))):Ki.style.minHeight="",hr.style.top=pn*Bs()+"px"}function Wo(){An=er(0),ja=!0;var xe=An.text.length;pi.iter(1,pi.size,function(He){var je=He.text;!He.hidden&&je.length>xe&&(xe=je.length,An=He)}),ta=!1}function cn(xe,He,je){He=yr(He),je?je=yr(je):je=He,xe=$r(xe);function $e(St){if(Zt(St,He))return St;if(!Zt(je,St))return bt;var Nt=St.line+xe.length-(je.line-He.line)-1,jt=St.ch;return St.line==je.line&&(jt+=_i(xe).length-(je.ch-(je.line==He.line?He.ch:0))),{line:Nt,ch:jt}}var bt;return Ia(xe,He,je,function(St){return bt=St,{from:$e(Lt.from),to:$e(Lt.to)}}),bt}function Rn(xe,He){Ia($r(xe),Lt.from,Lt.to,function(je){return He=="end"?{from:je,to:je}:He=="start"?{from:Lt.from,to:Lt.from}:{from:Lt.from,to:je}})}function Ia(xe,He,je,$e){var bt=xe.length==1?xe[0].length+He.ch:_i(xe).length,St=$e({line:He.line+xe.length-1,ch:bt});Eo(He,je,xe,St.from,St.to)}function eo(xe,He,je){var $e=xe.line,bt=He.line;if($e==bt)return er($e).text.slice(xe.ch,He.ch);var St=[er($e).text.slice(xe.ch)];return pi.iter($e+1,bt,function(Nt){St.push(Nt.text)}),St.push(er(bt).text.slice(0,He.ch)),St.join(je||`
`)}function Fa(xe){return eo(Lt.from,Lt.to,xe)}function gn(){Qn||bi.set(Be.pollInterval,function(){oa(),dr&&gn()})}function aa(){var xe=!1;Qn=!0;function He(){var je=oa();!je&&!xe?(xe=!0,bi.set(60,He)):(Qn=!1,gn())}bi.set(20,He)}var Ds="";function oa(){if(!dr||nt(Oe)||Be.readOnly)return!1;var xe=Oe.value;if(xe==Ds)return!1;Wn||fa(),Yr=null;for(var He=0,je=Math.min(Ds.length,xe.length);He<je&&Ds[He]==xe[He];)++He;return He<Ds.length?Lt.from={line:Lt.from.line,ch:Lt.from.ch-(Ds.length-He)}:rr&&Wi(Lt.from,Lt.to)&&!sr&&(Lt.to={line:Lt.to.line,ch:Math.min(er(Lt.to.line).text.length,Lt.to.ch+(xe.length-He))}),Rn(xe.slice(He),"end"),xe.length>1e3?Oe.value=Ds="":Ds=xe,Wn||Zo(),sr=!1,!0}function hn(xe){Wi(Lt.from,Lt.to)?xe&&(Ds=Oe.value=""):(Ds="",Oe.value=Fa(),dr&&Ti(Oe))}function Rs(){Be.readOnly!="nocursor"&&(We||document.activeElement!=Oe)&&Oe.focus()}function la(){var xe=Hn();if(to(xe.x,xe.y,xe.x,xe.yBot),!!dr){var He=Ki.getBoundingClientRect(),je=null;if(xe.y+He.top<0?je=!0:xe.y+He.top+Bs()>(window.innerHeight||document.documentElement.clientHeight)&&(je=!1),je!=null){var $e=ai.style.display=="none";$e&&(ai.style.display="",ai.style.left=xe.x+"px",ai.style.top=xe.y-pn+"px"),ai.scrollIntoView(je),$e&&(ai.style.display="none")}}}function Hn(){var xe=xs(Lt.inverted?Lt.from:Lt.to),He=Be.lineWrapping?Math.min(xe.x,ei.offsetWidth):xe.x;return{x:He,y:xe.y,yBot:xe.yBot}}function to(xe,He,je,$e){var bt=io(xe,He,je,$e);bt.scrollLeft!=null&&(Yt.scrollLeft=bt.scrollLeft),bt.scrollTop!=null&&(vt.scrollTop=Yt.scrollTop=bt.scrollTop)}function io(xe,He,je,$e){var bt=lo(),St=La();He+=St,$e+=St,xe+=bt,je+=bt;var Nt=Yt.clientHeight,jt=vt.scrollTop,hi={},Xt=Go()||1/0,Gi=He<St+10,zi=$e+St>Xt-10;He<jt?hi.scrollTop=Gi?0:Math.max(0,He):$e>jt+Nt&&(hi.scrollTop=(zi?Xt:$e)-Nt);var Oi=Yt.clientWidth,mr=Yt.scrollLeft,ur=Be.fixedGutter?Qi.clientWidth:0,vr=xe<ur+bt+10;return xe<mr+ur||vr?(vr&&(xe=0),hi.scrollLeft=Math.max(0,xe-10-ur)):je>Oi+mr-3&&(hi.scrollLeft=je+10-Oi),hi}function gr(xe){var He=Bs(),je=(xe??vt.scrollTop)-La(),$e=Math.max(0,Math.floor(je/He)),bt=Math.ceil((je+Yt.clientHeight)/He);return{from:Te(pi,$e),to:Te(pi,bt)}}function Js(xe,He,je){if(!Yt.clientWidth){Qr=es=pn=0;return}var $e=gr(je);if(xe!==!0&&xe.length==0&&$e.from>Qr&&$e.to<es){So(je);return}var bt=Math.max($e.from-100,0),St=Math.min(pi.size,$e.to+100);Qr<bt&&bt-Qr<20&&(bt=Qr),es>St&&es-St<20&&(St=Math.min(pi.size,es));for(var Nt=xe===!0?[]:pl([{from:Qr,to:es,domStart:0}],xe),jt=0,hi=0;hi<Nt.length;++hi){var Xt=Nt[hi];Xt.from<bt&&(Xt.domStart+=bt-Xt.from,Xt.from=bt),Xt.to>St&&(Xt.to=St),Xt.from>=Xt.to?Nt.splice(hi--,1):jt+=Xt.to-Xt.from}if(jt==St-bt&&bt==Qr&&St==es){So(je);return}Nt.sort(function(ur,vr){return ur.domStart-vr.domStart});var Gi=Bs(),zi=Qi.style.display;Ct.style.display="none",qo(bt,St,Nt),Ct.style.display=Qi.style.display="";var Oi=bt!=Qr||St!=es||xo!=Yt.clientHeight+Gi;if(Oi&&(xo=Yt.clientHeight+Gi),(bt!=Qr||St!=es&&Be.onViewportChange)&&setTimeout(function(){Be.onViewportChange&&Be.onViewportChange(br,bt,St)}),Qr=bt,es=St,pn=Ke(pi,bt),co(100),Ct.childNodes.length!=es-Qr)throw new Error("BAD PATCH! "+JSON.stringify(Nt)+" size="+(es-Qr)+" nodes="+Ct.childNodes.length);function mr(){var ur=Ct.firstChild,vr=!1;return pi.iter(Qr,es,function(nr){if(ur){if(!nr.hidden){var Xi=Math.round(ur.offsetHeight/Gi)||1;nr.height!=Xi&&(As(nr,Xi),ys=vr=!0)}ur=ur.nextSibling}}),vr}return Be.lineWrapping&&mr(),Qi.style.display=zi,(Oi||ys)&&mn()&&Be.lineWrapping&&mr()&&mn(),So(je),Io(),!He&&Be.onUpdate&&Be.onUpdate(br),!0}function pl(xe,He){for(var je=0,$e=He.length||0;je<$e;++je){for(var bt=He[je],St=[],Nt=bt.diff||0,jt=0,hi=xe.length;jt<hi;++jt){var Xt=xe[jt];bt.to<=Xt.from&&bt.diff?St.push({from:Xt.from+Nt,to:Xt.to+Nt,domStart:Xt.domStart}):bt.to<=Xt.from||bt.from>=Xt.to?St.push(Xt):(bt.from>Xt.from&&St.push({from:Xt.from,to:bt.from,domStart:Xt.domStart}),bt.to<Xt.to&&St.push({from:bt.to+Nt,to:Xt.to+Nt,domStart:Xt.domStart+(bt.to-Xt.from)}))}xe=St}return xe}function qo(xe,He,je){function $e(zi){var Oi=zi.nextSibling;return zi.parentNode.removeChild(zi),Oi}if(!je.length)$i(Ct);else{for(var bt=0,Xt=Ct.firstChild,St=0;St<je.length;++St){for(var Nt=je[St];Nt.domStart>bt;)Xt=$e(Xt),bt++;for(var Gi=0,jt=Nt.to-Nt.from;Gi<jt;++Gi)Xt=Xt.nextSibling,bt++}for(;Xt;)Xt=$e(Xt)}var hi=je.shift(),Xt=Ct.firstChild,Gi=xe;pi.iter(xe,He,function(zi){if(hi&&hi.to==Gi&&(hi=je.shift()),!hi||hi.from>Gi){if(zi.hidden)var Oi=wi("pre");else{var Oi=ia(zi);if(zi.className&&(Oi.className=zi.className),zi.bgClassName){var mr=wi("pre","Â ",zi.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");Oi=wi("div",[mr,Oi],null,"position: relative")}}Ct.insertBefore(Oi,Xt)}else Xt=Xt.nextSibling;++Gi})}function mn(){if(!(!Be.gutter&&!Be.lineNumbers)){var xe=hr.offsetHeight,He=Yt.clientHeight;Qi.style.height=(xe-He<2?He:xe)+"px";var je=document.createDocumentFragment(),$e=Qr,bt;if(pi.iter(Qr,Math.max(es,Qr+1),function(Gi){if(Gi.hidden)je.appendChild(wi("pre"));else{var zi=Gi.gutterMarker,Oi=Be.lineNumbers?Be.lineNumberFormatter($e+Be.firstLineNumber):null;zi&&zi.text?Oi=zi.text.replace("%N%",Oi??""):Oi==null&&(Oi="Â ");var mr=je.appendChild(wi("pre",null,zi&&zi.style));mr.innerHTML=Oi;for(var ur=1;ur<Gi.height;++ur)mr.appendChild(wi("br")),mr.appendChild(document.createTextNode("Â "));zi||(bt=$e)}++$e}),Qi.style.display="none",tr(Ui,je),bt!=null&&Be.lineNumbers){for(var St=Ui.childNodes[bt-Qr],Nt=String(pi.size).length,jt=Hi(St.firstChild),hi="";jt.length+hi.length<Nt;)hi+="Â ";hi&&St.insertBefore(document.createTextNode(hi),St.firstChild)}Qi.style.display="";var Xt=Math.abs((parseInt(ei.style.marginLeft)||0)-Qi.offsetWidth)>2;return ei.style.marginLeft=Qi.offsetWidth+"px",ys=!1,Xt}}function Io(){var xe=Wi(Lt.from,Lt.to),He=xs(Lt.from,!0),je=xe?He:xs(Lt.to,!0),$e=Lt.inverted?He:je,bt=Bs(),St=ii(wr),Nt=ii(Ct);if(Ge.style.top=Math.max(0,Math.min(Yt.offsetHeight,$e.y+Nt.top-St.top))+"px",Ge.style.left=Math.max(0,Math.min(Yt.offsetWidth,$e.x+Nt.left-St.left))+"px",xe||Be.showCursorWhenSelecting?(ai.style.top=$e.y+"px",ai.style.left=(Be.lineWrapping?Math.min($e.x,ei.offsetWidth):$e.x)+"px",ai.style.display=""):ai.style.display="none",xe)Ut.style.display="none";else{var jt=He.y==je.y,hi=document.createDocumentFragment(),Xt=ei.clientWidth||ei.offsetWidth,Gi=ei.clientHeight||ei.offsetHeight,zi=function(vr,nr,Xi,Or){var Sr=Ne?"width: "+(Xi?Xt-Xi-vr:Xt)+"px":"right: "+(Xi-1)+"px";hi.appendChild(wi("div",null,"CodeMirror-selected","position: absolute; left: "+vr+"px; top: "+nr+"px; "+Sr+"; height: "+Or+"px"))};if(Lt.from.ch&&He.y>=0){var Oi=jt?Xt-je.x:0;zi(He.x,He.y,Oi,bt)}var mr=Math.max(0,He.y+(Lt.from.ch?bt:0)),ur=Math.min(je.y,Gi)-mr;ur>.2*bt&&zi(0,mr,0,ur),(!jt||!Lt.from.ch)&&je.y<Gi-.5*bt&&zi(0,je.y,Xt-je.x,bt),tr(Ut,hi),Ut.style.display=""}}function Xo(xe){xe?Yr=Yr||(Lt.inverted?Lt.to:Lt.from):Yr=null}function Hs(xe,He){var je=Yr&&yr(Yr);je&&(Zt(je,xe)?xe=je:Zt(He,je)&&(He=je)),ka(xe,He),ss=!0}function ka(xe,He,je,$e){if(wa=null,je==null&&(je=Lt.from.line,$e=Lt.to.line),!(Wi(Lt.from,xe)&&Wi(Lt.to,He))){if(Zt(He,xe)){var bt=He;He=xe,xe=bt}if(xe.line!=je){var St=Ur(xe,je,Lt.from.ch);St?xe=St:Aa(xe.line,!1)}if(He.line!=$e&&(He=Ur(He,$e,Lt.to.ch)),Wi(xe,He)||Wi(xe,Lt.to)?Lt.inverted=!1:Wi(He,Lt.from)&&(Lt.inverted=!0),Be.autoClearEmptyLines&&Wi(Lt.from,Lt.to)){var Nt=Lt.inverted?xe:He;if(Nt.line!=Lt.from.line&&Lt.from.line<pi.size){var jt=er(Lt.from.line);/^\s+$/.test(jt.text)&&setTimeout(qi(function(){if(jt.parent&&/^\s+$/.test(jt.text)){var hi=be(jt);cn("",{line:hi,ch:0},{line:hi,ch:jt.text.length})}}))}}Lt.from=xe,Lt.to=He,js=!0}}function Ur(xe,He,je){function $e(Nt){for(var jt=xe.line+Nt,hi=Nt==1?pi.size:-1;jt!=hi;){var Xt=er(jt);if(!Xt.hidden){var Gi=xe.ch;return(St||Gi>je||Gi>Xt.text.length)&&(Gi=Xt.text.length),{line:jt,ch:Gi}}jt+=Nt}}var bt=er(xe.line),St=xe.ch==bt.text.length&&xe.ch!=je;return bt.hidden?xe.line>=He?$e(1)||$e(-1):$e(-1)||$e(1):xe}function $s(xe,He,je){var $e=yr({line:xe,ch:He||0});(je?Hs:ka)($e,$e)}function Ji(xe){return Math.max(0,Math.min(xe,pi.size-1))}function yr(xe){if(xe.line<0)return{line:0,ch:0};if(xe.line>=pi.size)return{line:pi.size-1,ch:er(pi.size-1).text.length};var He=xe.ch,je=er(xe.line).text.length;return He==null||He>je?{line:xe.line,ch:je}:He<0?{line:xe.line,ch:0}:xe}function Fr(xe,He){var je=Lt.inverted?Lt.from:Lt.to,$e=je.line,bt=je.ch,St=er($e);function Nt(){for(var Xt=$e+xe,Gi=xe<0?-1:pi.size;Xt!=Gi;Xt+=xe){var zi=er(Xt);if(!zi.hidden)return $e=Xt,St=zi,!0}}function jt(Xt){if(bt==(xe<0?0:St.text.length))if(!Xt&&Nt())bt=xe<0?St.text.length:0;else return!1;else bt+=xe;return!0}if(He=="char")jt();else if(He=="column")jt(!0);else if(He=="word")for(var hi=!1;!(xe<0&&!jt());){if(Qs(St.text.charAt(bt)))hi=!0;else if(hi){xe<0&&(xe=1,jt());break}if(xe>0&&!jt())break}return{line:$e,ch:bt}}function Mr(xe,He){var je=xe<0?Lt.from:Lt.to;(Yr||Wi(Lt.from,Lt.to))&&(je=Fr(xe,He)),$s(je.line,je.ch,!0)}function zn(xe,He){Wi(Lt.from,Lt.to)?xe<0?cn("",Fr(xe,He),Lt.to):cn("",Lt.from,Fr(xe,He)):cn("",Lt.from,Lt.to),ss=!0}function Da(xe,He){var je=xs(Lt.inverted?Lt.from:Lt.to,!0);if(wa!=null&&(je.x=wa),He=="page")var $e=Math.min(Yt.clientHeight,window.innerHeight||document.documentElement.clientHeight),bt=Kn(je.x,je.y+$e*xe);else if(He=="line")var St=Bs(),bt=Kn(je.x,je.y+.5*St+xe*St);He=="page"&&(vt.scrollTop+=xs(bt,!0).y-je.y),$s(bt.line,bt.ch,!0),wa=je.x}function ro(xe){var He=er(xe.line).text,je=xe.ch,$e=xe.ch;if(He){xe.after===!1||$e==He.length?--je:++$e;for(var bt=He.charAt(je),St=Qs(bt)?Qs:/\s/.test(bt)?function(Nt){return/\s/.test(Nt)}:function(Nt){return!/\s/.test(Nt)&&Qs(Nt)};je>0&&St(He.charAt(je-1));)--je;for(;$e<He.length&&St(He.charAt($e));)++$e}return{from:{line:xe.line,ch:je},to:{line:xe.line,ch:$e}}}function gl(xe){Hs({line:xe,ch:0},yr({line:xe+1,ch:0}))}function Fo(xe){if(Wi(Lt.from,Lt.to))return so(Lt.from.line,xe);for(var He=Lt.to.line-(Lt.to.ch?0:1),je=Lt.from.line;je<=He;++je)so(je,xe)}function so(xe,He){if(He||(He="add"),He=="smart")if(!Zi.indent)He="prev";else var je=Ms(xe);var $e=er(xe),bt=$e.indentation(Be.tabSize),St=$e.text.match(/^\s*/)[0],Nt;He=="smart"&&(Nt=Zi.indent(je,$e.text.slice(St.length),$e.text),Nt==ri&&(He="prev")),He=="prev"?xe?Nt=er(xe-1).indentation(Be.tabSize):Nt=0:He=="add"?Nt=bt+Be.indentUnit:He=="subtract"&&(Nt=bt-Be.indentUnit),Nt=Math.max(0,Nt);var jt="",hi=0;if(Be.indentWithTabs)for(var Xt=Math.floor(Nt/Be.tabSize);Xt;--Xt)hi+=Be.tabSize,jt+="	";hi<Nt&&(jt+=Ht(Nt-hi)),jt!=St&&cn(jt,{line:xe,ch:0},{line:xe,ch:St.length}),$e.stateAfter=null}function no(){Zi=g.getMode(Be,Be.mode),pi.iter(0,pi.size,function(xe){xe.stateAfter=null}),_s=0,co(100)}function Ua(){var xe=Be.gutter||Be.lineNumbers;Qi.style.display=xe?"":"none",xe?ys=!0:Ct.parentNode.style.marginLeft=0}function ao(xe,He){if(Be.lineWrapping){wr.className+=" CodeMirror-wrap";var je=Yt.clientWidth/Gn()-3;pi.iter(0,pi.size,function($e){if(!$e.hidden){var bt=Math.ceil($e.text.length/je)||1;bt!=1&&As($e,bt)}}),ei.style.minWidth=Di.style.left=""}else wr.className=wr.className.replace(" CodeMirror-wrap",""),Wo(),pi.iter(0,pi.size,function($e){$e.height!=1&&!$e.hidden&&As($e,1)});ps.push({from:0,to:pi.size})}function oo(){Yt.className=Yt.className.replace(/\s*cm-s-\S+/g,"")+Be.theme.replace(/(^|\s)\s*/g," cm-s-")}function Ma(){var xe=oe[Be.keyMap].style;wr.className=wr.className.replace(/\s*cm-keymap-\S+/g,"")+(xe?" cm-keymap-"+xe:"")}function Nn(xe,He){this.lines=[],this.type=xe,He&&(this.style=He)}Nn.prototype.clear=qi(function(){for(var xe,He,je=0;je<this.lines.length;++je){var $e=this.lines[je],bt=Ai($e.markedSpans,this);bt.from!=null&&(xe=be($e)),bt.to!=null&&(He=be($e)),$e.markedSpans=Ri($e.markedSpans,bt)}xe!=null&&ps.push({from:xe,to:He+1}),this.lines.length=0,this.explicitlyCleared=!0}),Nn.prototype.find=function(){for(var xe,He,je=0;je<this.lines.length;++je){var $e=this.lines[je],bt=Ai($e.markedSpans,this);if(bt.from!=null||bt.to!=null){var St=be($e);bt.from!=null&&(xe={line:St,ch:bt.from}),bt.to!=null&&(He={line:St,ch:bt.to})}}return this.type=="bookmark"?xe:xe&&{from:xe,to:He}};function Pa(xe,He,je,$e){xe=yr(xe),He=yr(He);var bt=new Nn("range",je);if($e)for(var St in $e)$e.hasOwnProperty(St)&&(bt[St]=$e[St]);var Nt=xe.line;return pi.iter(Nt,He.line+1,function(jt){var hi={from:Nt==xe.line?xe.ch:null,to:Nt==He.line?He.ch:null,marker:bt};jt.markedSpans=(jt.markedSpans||[]).concat([hi]),bt.lines.push(jt),++Nt}),ps.push({from:xe.line,to:He.line+1}),bt}function ml(xe){xe=yr(xe);var He=new Nn("bookmark"),je=er(xe.line);Nr.addChange(xe.line,1,[w(je.text,je.markedSpans)],!0);var $e={from:xe.ch,to:xe.ch,marker:He};return je.markedSpans=(je.markedSpans||[]).concat([$e]),He.lines.push(je),He}function Yo(xe){xe=yr(xe);var He=[],je=er(xe.line).markedSpans;if(je)for(var $e=0;$e<je.length;++$e){var bt=je[$e];(bt.from==null||bt.from<=xe.ch)&&(bt.to==null||bt.to>=xe.ch)&&He.push(bt.marker)}return He}function Wr(xe,He,je){return typeof xe=="number"&&(xe=er(Ji(xe))),xe.gutterMarker={text:He,style:je},ys=!0,xe}function Vn(xe){typeof xe=="number"&&(xe=er(Ji(xe))),xe.gutterMarker=null,ys=!0}function Us(xe,He){var je=xe,$e=xe;if(typeof xe=="number"?$e=er(Ji(xe)):je=be(xe),je==null)return null;if(He($e,je))ps.push({from:je,to:je+1});else return null;return $e}function ko(xe,He,je){return Us(xe,function($e){if($e.className!=He||$e.bgClassName!=je)return $e.className=He,$e.bgClassName=je,!0})}function Aa(xe,He){return Us(xe,function(je,$e){if(je.hidden!=He){je.hidden=He,Be.lineWrapping||(He&&je.text.length==An.text.length?ta=!0:!He&&je.text.length>An.text.length&&(An=je,ta=!1)),As(je,He?0:1);var bt=Lt.from.line,St=Lt.to.line;if(He&&(bt==$e||St==$e)){var Nt=bt==$e?Ur({line:bt,ch:0},bt,0):Lt.from,jt=St==$e?Ur({line:St,ch:0},St,0):Lt.to;if(!jt)return;ka(Nt,jt)}return ys=!0}})}function Do(xe){if(typeof xe=="number"){if(!Tn(xe))return null;var He=xe;if(xe=er(xe),!xe)return null}else{var He=be(xe);if(He==null)return null}var je=xe.gutterMarker;return{line:He,handle:xe,text:xe.text,markerText:je&&je.text,markerClass:je&&je.style,lineClass:xe.className,bgClass:xe.bgClassName}}function en(xe,He){if(He==0)return{top:0,left:0};var je=ia(xe,He);tr(ni,je);var $e=je.anchor,bt=$e.offsetTop,St=$e.offsetLeft;if(Qe&&bt==0&&St==0){var Nt=wi("span","x");$e.parentNode.insertBefore(Nt,$e.nextSibling),bt=Nt.offsetTop}return{top:bt,left:St}}function xs(xe,He){var je,$e=Bs(),bt=$e*(Ke(pi,xe.line)-(He?pn:0));if(xe.ch==0)je=0;else{var St=en(er(xe.line),xe.ch);je=St.left,Be.lineWrapping&&(bt+=Math.max(0,St.top))}return{x:je,y:bt,yBot:bt+$e}}function Kn(xe,He){var je=Bs(),$e=Gn(),bt=pn+Math.floor(He/je);if(bt<0)return{line:0,ch:0};var St=Te(pi,bt);if(St>=pi.size)return{line:pi.size-1,ch:er(pi.size-1).text.length};var Nt=er(St),jt=Nt.text,hi=Be.lineWrapping,Xt=hi?bt-Ke(pi,St):0;if(xe<=0&&Xt==0)return{line:St,ch:0};var Gi=!1;function zi(Ha){var da=en(Nt,Ha);if(hi){var ns=Math.round(da.top/je);return Gi=ns!=Xt,Math.max(0,da.left+(ns-Xt)*Yt.clientWidth)}return da.left}for(var Oi=0,mr=0,ur=jt.length,vr,nr=Math.min(ur,Math.ceil((xe+Xt*Yt.clientWidth*.9)/$e));;){var Xi=zi(nr);if(Xi<=xe&&nr<ur)nr=Math.min(ur,Math.ceil(nr*1.2));else{vr=Xi,ur=nr;break}}if(xe>vr)return{line:St,ch:ur};for(nr=Math.floor(ur*.8),Xi=zi(nr),Xi<xe&&(Oi=nr,mr=Xi);;){if(ur-Oi<=1){var Or=xe-mr<vr-xe;return{line:St,ch:Or?Oi:ur,after:Or}}var Sr=Math.ceil((Oi+ur)/2),ws=zi(Sr);ws>xe?(ur=Sr,vr=ws,Gi&&(vr+=1e3)):(Oi=Sr,mr=ws)}}function jo(xe){var He=xs(xe,!0),je=ii(ei);return{x:je.left+He.x,y:je.top+He.y,yBot:je.top+He.yBot}}var ca,ha,_n;function Bs(){if(_n==null){_n=wi("pre");for(var xe=0;xe<49;++xe)_n.appendChild(document.createTextNode("x")),_n.appendChild(wi("br"));_n.appendChild(document.createTextNode("x"))}var He=Ct.clientHeight;return He==ha||(ha=He,tr(ni,_n.cloneNode(!0)),ca=ni.firstChild.offsetHeight/50||1,$i(ni)),ca}var yn,Uo=0;function Gn(){if(Yt.clientWidth==Uo)return yn;Uo=Yt.clientWidth;var xe=wi("span","x"),He=wi("pre",[xe]);return tr(ni,He),yn=xe.offsetWidth||10}function La(){return ei.offsetTop}function lo(){return ei.offsetLeft}function ua(xe,He){var je=ii(Yt,!0),$e,bt;try{$e=xe.clientX,bt=xe.clientY}catch{return null}if(!He&&($e-je.left>Yt.clientWidth||bt-je.top>Yt.clientHeight))return null;var St=ii(ei,!0);return Kn($e-St.left,bt-St.top)}var Ao;function Qa(xe){var He=ua(xe),je=vt.scrollTop;if(!He||rt)return;(Wi(Lt.from,Lt.to)||Zt(He,Lt.from)||!Zt(He,Lt.to))&&qi($s)(He.line,He.ch);var $e=Oe.style.cssText;Ge.style.position="absolute",Oe.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(xe.clientY-5)+"px; left: "+(xe.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Rs(),hn(!0),Wi(Lt.from,Lt.to)&&(Oe.value=Ds=" ");function bt(){if(Ge.style.position="relative",Oe.style.cssText=$e,We&&(vt.scrollTop=je),gn(),Oe.selectionStart!=null){clearTimeout(Ao);var Nt=Oe.value=" "+(Wi(Lt.from,Lt.to)?"":Oe.value),jt=0;Ds=" ",Oe.selectionStart=1,Oe.selectionEnd=Nt.length,Ao=setTimeout(function hi(){Ds==" "&&Oe.selectionStart==0?qi(ne.selectAll)(br):jt++<10?Ao=setTimeout(hi,500):hn()},200)}}if(ke){gt(xe);var St=Qt(window,"mouseup",function(){St(),setTimeout(bt,20)},!0)}else setTimeout(bt,50)}function Fn(){clearInterval(Pr);var xe=!0;ai.style.visibility="",Pr=setInterval(function(){ai.style.visibility=(xe=!xe)?"":"hidden"},Be.cursorBlinkRate)}var vs={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function qr(xe){var He=Lt.inverted?Lt.from:Lt.to,je=er(He.line),$e=He.ch-1,bt=$e>=0&&vs[je.text.charAt($e)]||vs[je.text.charAt(++$e)];if(!bt)return;bt.charAt(0);for(var St=bt.charAt(1)==">",Nt=St?1:-1,jt=je.styles,hi=$e+1,Xt=0,Gi=jt.length;Xt<Gi;Xt+=2)if((hi-=jt[Xt].length)<=0){var nr=jt[Xt+1];break}var zi=[je.text.charAt($e)],Oi=/[(){}[\]]/;function mr(ws,Ha,da){if(ws.text)for(var ns=ws.styles,Er=St?0:ws.text.length-1,pa,vn=St?0:ns.length-2,Jo=St?ns.length:-2;vn!=Jo;vn+=2*Nt){var qn=ns[vn];if(ns[vn+1]!=nr){Er+=Nt*qn.length;continue}for(var ho=St?0:qn.length-1,_l=St?qn.length:-1;ho!=_l;ho+=Nt,Er+=Nt)if(Er>=Ha&&Er<da&&Oi.test(pa=qn.charAt(ho))){var zs=vs[pa];if(zs.charAt(1)==">"==St)zi.push(pa);else{if(zi.pop()!=zs.charAt(0))return{pos:Er,match:!1};if(!zi.length)return{pos:Er,match:!0}}}}}for(var Xt=He.line,Gi=St?Math.min(Xt+100,pi.size):Math.max(-1,Xt-100);Xt!=Gi;Xt+=Nt){var je=er(Xt),ur=Xt==He.line,vr=mr(je,ur&&St?$e+1:0,ur&&!St?$e:je.text.length);if(vr)break}vr||(vr={pos:null,match:!1});var nr=vr.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",Xi=Pa({line:He.line,ch:$e},{line:He.line,ch:$e+1},nr),Or=vr.pos!=null&&Pa({line:Xt,ch:vr.pos},{line:Xt,ch:vr.pos+1},nr),Sr=qi(function(){Xi.clear(),Or&&Or.clear()});xe?setTimeout(Sr,800):Zs=Sr}function Oa(xe){for(var He,je,$e=xe,bt=xe-40;$e>bt;--$e){if($e==0)return 0;var St=er($e-1);if(St.stateAfter)return $e;var Nt=St.indentation(Be.tabSize);(je==null||He>Nt)&&(je=$e-1,He=Nt)}return je}function Ms(xe){var He=Oa(xe),je=He&&er(He-1).stateAfter;return je?je=Pt(Zi,je):je=Mt(Zi),pi.iter(He,xe,function($e){$e.process(Zi,je,Be.tabSize),$e.stateAfter=He==xe-1||He%5==0?Pt(Zi,je):null}),je}function Ra(){if(!(_s>=es)){var xe=+new Date+Be.workTime,He=Pt(Zi,Ms(_s)),je=_s;pi.iter(_s,es,function($e){if(_s>=Qr?($e.highlight(Zi,He,Be.tabSize),$e.stateAfter=Pt(Zi,He)):($e.process(Zi,He,Be.tabSize),$e.stateAfter=_s%5==0?Pt(Zi,He):null),++_s,+new Date>xe)return co(Be.workDelay),!0}),es>je&&_s>=Qr&&qi(function(){ps.push({from:je,to:_s})})()}}function co(xe){_s<es&&Ir.set(xe,Ra)}function fa(){jr=ss=cr=null,ps=[],js=!1,Os=[]}function Zo(){if(ta&&Wo(),ja&&!Be.lineWrapping){var xe=Di.offsetWidth,He=en(An,An.text.length).left;Ue||(Di.style.left=He+"px",ei.style.minWidth=He+xe+"px"),ja=!1}var je,$e;if(js){var bt=Hn();je=io(bt.x,bt.y,bt.x,bt.yBot)}(ps.length||je&&je.scrollTop!=null)&&($e=Js(ps,!0,je&&je.scrollTop)),$e||(js&&Io(),ys&&mn()),je&&la(),js&&Fn(),dr&&(jr===!0||jr!==!1&&js)&&hn(ss),js&&Be.matchBrackets&&setTimeout(qi(function(){Zs&&(Zs(),Zs=null),Wi(Lt.from,Lt.to)&&qr(!1)}),20);var St=js,Nt=Os;cr&&Be.onChange&&br&&Be.onChange(br,cr),St&&Be.onCursorActivity&&Be.onCursorActivity(br);for(var jt=0;jt<Nt.length;++jt)Nt[jt](br);$e&&Be.onUpdate&&Be.onUpdate(br)}var Wn=0;function qi(xe){return function(){Wn++||fa();try{var He=xe.apply(this,arguments)}finally{--Wn||Zo()}return He}}function tn(xe){Nr.startCompound();try{return xe()}finally{Nr.endCompound()}}for(var gi in Y)Y.propertyIsEnumerable(gi)&&!br.propertyIsEnumerable(gi)&&(br[gi]=Y[gi]);for(var kn=0;kn<ie.length;++kn)ie[kn](br);return br}g.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,showCursorWhenSelecting:!1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(ce){return ce}};var B=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),M=B||/Mac/.test(navigator.platform),P=g.modes={},K=g.mimeModes={};g.defineMode=function(ce,ye){if(!g.defaults.mode&&ce!="null"&&(g.defaults.mode=ce),arguments.length>2){ye.dependencies=[];for(var Be=2;Be<arguments.length;++Be)ye.dependencies.push(arguments[Be])}P[ce]=ye},g.defineMIME=function(ce,ye){K[ce]=ye},g.resolveMode=function(ce){if(typeof ce=="string"&&K.hasOwnProperty(ce))ce=K[ce];else if(typeof ce=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(ce))return g.resolveMode("application/xml");return typeof ce=="string"?{name:ce}:ce||{name:"null"}},g.getMode=function(ce,Be){var Be=g.resolveMode(Be),Pe=P[Be.name];if(!Pe)return g.getMode(ce,"text/plain");var qe=Pe(ce,Be);if(D.hasOwnProperty(Be.name)){var Oe=D[Be.name];for(var Ge in Oe)Oe.hasOwnProperty(Ge)&&(qe.hasOwnProperty(Ge)&&(qe["_"+Ge]=qe[Ge]),qe[Ge]=Oe[Ge])}return qe.name=Be.name,qe},g.listModes=function(){var ce=[];for(var ye in P)P.propertyIsEnumerable(ye)&&ce.push(ye);return ce},g.listMIMEs=function(){var ce=[];for(var ye in K)K.propertyIsEnumerable(ye)&&ce.push({mime:ye,mode:K[ye]});return ce};var Y=g.extensions={};g.defineExtension=function(ce,ye){Y[ce]=ye};var ie=[];g.defineInitHook=function(ce){ie.push(ce)};var D=g.modeExtensions={};g.extendMode=function(ce,ye){var Be=D.hasOwnProperty(ce)?D[ce]:D[ce]={};for(var Pe in ye)ye.hasOwnProperty(Pe)&&(Be[Pe]=ye[Pe])};var ne=g.commands={selectAll:function(ce){ce.setSelection({line:0,ch:0},{line:ce.lineCount()-1})},killLine:function(ce){var ye=ce.getCursor(!0),Be=ce.getCursor(!1),Pe=!Wi(ye,Be);!Pe&&ce.getLine(ye.line).length==ye.ch?ce.replaceRange("",ye,{line:ye.line+1,ch:0}):ce.replaceRange("",ye,Pe?Be:{line:ye.line})},deleteLine:function(ce){var ye=ce.getCursor().line;ce.replaceRange("",{line:ye,ch:0},{line:ye})},undo:function(ce){ce.undo()},redo:function(ce){ce.redo()},goDocStart:function(ce){ce.setCursor(0,0,!0)},goDocEnd:function(ce){ce.setSelection({line:ce.lineCount()-1},null,!0)},goLineStart:function(ce){ce.setCursor(ce.getCursor().line,0,!0)},goLineStartSmart:function(ce){var ye=ce.getCursor(),Be=ce.getLine(ye.line),Pe=Math.max(0,Be.search(/\S/));ce.setCursor(ye.line,ye.ch<=Pe&&ye.ch?0:Pe,!0)},goLineEnd:function(ce){ce.setSelection({line:ce.getCursor().line},null,!0)},goLineUp:function(ce){ce.moveV(-1,"line")},goLineDown:function(ce){ce.moveV(1,"line")},goPageUp:function(ce){ce.moveV(-1,"page")},goPageDown:function(ce){ce.moveV(1,"page")},goCharLeft:function(ce){ce.moveH(-1,"char")},goCharRight:function(ce){ce.moveH(1,"char")},goColumnLeft:function(ce){ce.moveH(-1,"column")},goColumnRight:function(ce){ce.moveH(1,"column")},goWordLeft:function(ce){ce.moveH(-1,"word")},goWordRight:function(ce){ce.moveH(1,"word")},delCharLeft:function(ce){ce.deleteH(-1,"char")},delCharRight:function(ce){ce.deleteH(1,"char")},delWordLeft:function(ce){ce.deleteH(-1,"word")},delWordRight:function(ce){ce.deleteH(1,"word")},indentAuto:function(ce){ce.indentSelection("smart")},indentMore:function(ce){ce.indentSelection("add")},indentLess:function(ce){ce.indentSelection("subtract")},insertTab:function(ce){ce.replaceSelection("	","end")},defaultTab:function(ce){ce.somethingSelected()?ce.indentSelection("add"):ce.replaceSelection("	","end")},transposeChars:function(ce){var ye=ce.getCursor(),Be=ce.getLine(ye.line);ye.ch>0&&ye.ch<Be.length-1&&ce.replaceRange(Be.charAt(ye.ch)+Be.charAt(ye.ch-1),{line:ye.line,ch:ye.ch-1},{line:ye.line,ch:ye.ch+1})},newlineAndIndent:function(ce){ce.replaceSelection(`
`,"end"),ce.indentLine(ce.getCursor().line)},toggleOverwrite:function(ce){ce.toggleOverwrite()}},oe=g.keyMap={};oe.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},oe.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},oe.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},oe.default=M?oe.macDefault:oe.pcDefault,oe.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function ue(ce){return typeof ce=="string"?oe[ce]:ce}function pe(ce,ye,Be,Pe,qe){function Oe(Ge){Ge=ue(Ge);var ot=Ge[ce];if(ot===!1)return qe&&qe(),!0;if(ot!=null&&Pe(ot))return!0;if(Ge.nofallthrough)return qe&&qe(),!0;var vt=Ge.fallthrough;if(vt==null)return!1;if(Object.prototype.toString.call(vt)!="[object Array]")return Oe(vt);for(var Ct=0,Ut=vt.length;Ct<Ut;++Ct)if(Oe(vt[Ct]))return!0;return!1}return ye&&Oe(ye)?!0:Oe(Be)}function we(ce){var ye=Ie[Gt(ce,"keyCode")];return ye=="Ctrl"||ye=="Alt"||ye=="Shift"||ye=="Mod"}g.isModifierKey=we,g.fromTextArea=function(ce,ye){if(ye||(ye={}),ye.value=ce.value,!ye.tabindex&&ce.tabindex&&(ye.tabindex=ce.tabindex),ye.autofocus==null){var Be=document.body;try{Be=document.activeElement}catch{}ye.autofocus=Be==ce||ce.getAttribute("autofocus")!=null&&Be==document.body}function Pe(){ce.value=ot.getValue()}if(ce.form){var qe=Qt(ce.form,"submit",Pe,!0),Oe=ce.form,Ge=Oe.submit;ce.form.submit=function vt(){Pe(),Oe.submit=Ge,Oe.submit(),Oe.submit=vt}}ce.style.display="none";var ot=g(function(vt){ce.parentNode.insertBefore(vt,ce.nextSibling)},ye);return ot.save=Pe,ot.getTextArea=function(){return ce},ot.toTextArea=function(){Pe(),ce.parentNode.removeChild(ot.getWrapperElement()),ce.style.display="",ce.form&&(qe(),typeof ce.form.submit=="function"&&(ce.form.submit=Ge))},ot};var ke=/gecko\/\d/i.test(navigator.userAgent),Qe=/MSIE \d/.test(navigator.userAgent),Ue=/MSIE [1-7]\b/.test(navigator.userAgent),We=/MSIE [1-8]\b/.test(navigator.userAgent),Ne=Qe&&document.documentMode==5,ut=/WebKit\//.test(navigator.userAgent),Ye=ut&&/Qt\/\d+\.\d+/.test(navigator.userAgent),et=/Chrome\//.test(navigator.userAgent),rt=/Opera\//.test(navigator.userAgent),ft=/Apple Computer/.test(navigator.vendor),Ze=/KHTML\//.test(navigator.userAgent),wt=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),Ft=rt&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ft&&(Ft=Number(Ft[1]));var _t=M&&(Ye||rt&&(Ft==null||Ft<12.11));function Pt(ce,ye){if(ye===!0)return ye;if(ce.copyState)return ce.copyState(ye);var Be={};for(var Pe in ye){var qe=ye[Pe];qe instanceof Array&&(qe=qe.concat([])),Be[Pe]=qe}return Be}g.copyState=Pt;function Mt(ce,ye,Be){return ce.startState?ce.startState(ye,Be):!0}g.startState=Mt,g.innerMode=function(ce,ye){for(;ce.innerMode;){var Be=ce.innerMode(ye);ye=Be.state,ce=Be.mode}return Be||{mode:ce,state:ye}};function Vt(ce,ye){this.pos=this.start=0,this.string=ce,this.tabSize=ye||8}Vt.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(ce){var ye=this.string.charAt(this.pos);if(typeof ce=="string")var Be=ye==ce;else var Be=ye&&(ce.test?ce.test(ye):ce(ye));if(Be)return++this.pos,ye},eatWhile:function(ce){for(var ye=this.pos;this.eat(ce););return this.pos>ye},eatSpace:function(){for(var ce=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>ce},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ce){var ye=this.string.indexOf(ce,this.pos);if(ye>-1)return this.pos=ye,!0},backUp:function(ce){this.pos-=ce},column:function(){return di(this.string,this.start,this.tabSize)},indentation:function(){return di(this.string,null,this.tabSize)},match:function(ce,ye,Be){if(typeof ce=="string"){var Pe=function(Oe){return Be?Oe.toLowerCase():Oe};if(Pe(this.string).indexOf(Pe(ce),this.pos)==this.pos)return ye!==!1&&(this.pos+=ce.length),!0}else{var qe=this.string.slice(this.pos).match(ce);return qe&&qe.index>0?null:(qe&&ye!==!1&&(this.pos+=qe[0].length),qe)}},current:function(){return this.string.slice(this.start,this.pos)}},g.StringStream=Vt;function Ai(ce,ye){if(ce)for(var Be=0;Be<ce.length;++Be){var Pe=ce[Be];if(Pe.marker==ye)return Pe}}function Ri(ce,ye){for(var Be,Pe=0;Pe<ce.length;++Pe)ce[Pe]!=ye&&(Be||(Be=[])).push(ce[Pe]);return Be}function Ei(ce,ye,Be){if(ce)for(var Pe=0,qe;Pe<ce.length;++Pe){var Oe=ce[Pe],Ge=Oe.marker,ot=Oe.from==null||(Ge.inclusiveLeft?Oe.from<=ye:Oe.from<ye);if(ot||Ge.type=="bookmark"&&Oe.from==ye&&Oe.from!=Be){var vt=Oe.to==null||(Ge.inclusiveRight?Oe.to>=ye:Oe.to>ye);(qe||(qe=[])).push({from:Oe.from,to:vt?null:Oe.to,marker:Ge})}}return qe}function Li(ce,ye){if(ce)for(var Be=0,Pe;Be<ce.length;++Be){var qe=ce[Be],Oe=qe.marker,Ge=qe.to==null||(Oe.inclusiveRight?qe.to>=ye:qe.to>ye);if(Ge||Oe.type=="bookmark"&&qe.from==ye){var ot=qe.from==null||(Oe.inclusiveLeft?qe.from<=ye:qe.from<ye);(Pe||(Pe=[])).push({from:ot?null:qe.from-ye,to:qe.to==null?null:qe.to-ye,marker:Oe})}}return Pe}function Yi(ce,ye,Be,Pe,qe){if(!ce&&!ye)return qe;var Oe=Ei(ce,Be),Ge=Li(ye,Pe),ot=qe.length==1,vt=_i(qe).length+(ot?Be:0);if(Oe)for(var Ct=0;Ct<Oe.length;++Ct){var Ut=Oe[Ct];if(Ut.to==null){var ai=Ai(Ge,Ut.marker);ai?ot&&(Ut.to=ai.to==null?null:ai.to+vt):Ut.to=Be}}if(Ge)for(var Ct=0;Ct<Ge.length;++Ct){var Ut=Ge[Ct];if(Ut.to!=null&&(Ut.to+=vt),Ut.from==null){var ai=Ai(Oe,Ut.marker);ai||(Ut.from=vt,ot&&(Oe||(Oe=[])).push(Ut))}else Ut.from+=vt,ot&&(Oe||(Oe=[])).push(Ut)}var Di=[w(qe[0],Oe)];if(!ot){var ni=qe.length-2,ei;if(ni>0&&Oe)for(var Ct=0;Ct<Oe.length;++Ct)Oe[Ct].to==null&&(ei||(ei=[])).push({from:null,to:null,marker:Oe[Ct].marker});for(var Ct=0;Ct<ni;++Ct)Di.push(w(qe[Ct+1],ei));Di.push(w(_i(qe),Ge))}return Di}function vi(ce){return typeof ce=="string"?ce:ce.text}function d(ce){if(typeof ce=="string")return null;for(var ye=ce.markedSpans,Be=null,Pe=0;Pe<ye.length;++Pe)ye[Pe].marker.explicitlyCleared?Be||(Be=ye.slice(0,Pe)):Be&&Be.push(ye[Pe]);return Be?Be.length?Be:null:ye}function w(ce,ye){return ye?{text:ce,markedSpans:ye}:ce}function S(ce){var ye=ce.markedSpans;if(ye){for(var Be=0;Be<ye.length;++Be){var Pe=ye[Be].marker.lines,qe=ji(Pe,ce);Pe.splice(qe,1)}ce.markedSpans=null}}function k(ce,ye){if(ye){for(var Be=0;Be<ye.length;++Be)var Pe=ye[Be].marker.lines.push(ce);ce.markedSpans=ye}}var R=" ";ke||Qe&&!Ue?R="â":rt&&(R="");function W(ce,ye){this.text=ce,this.height=1,k(this,ye)}W.prototype={update:function(ce,ye){this.text=ce,this.stateAfter=this.styles=null,S(this),k(this,ye)},highlight:function(ce,ye,Be){var Pe=new Vt(this.text,Be),qe=this.styles||(this.styles=[]),Oe=qe.length=0;for(this.text==""&&ce.blankLine&&ce.blankLine(ye);!Pe.eol();){var Ge=ce.token(Pe,ye),ot=Pe.current();if(Pe.start=Pe.pos,Oe&&qe[Oe-1]==Ge?qe[Oe-2]+=ot:ot&&(qe[Oe++]=ot,qe[Oe++]=Ge),Pe.pos>5e3){qe[Oe++]=this.text.slice(Pe.pos),qe[Oe++]=null;break}}},process:function(ce,ye,Be){var Pe=new Vt(this.text,Be);for(this.text==""&&ce.blankLine&&ce.blankLine(ye);!Pe.eol()&&Pe.pos<=5e3;)ce.token(Pe,ye),Pe.start=Pe.pos},getTokenAt:function(ce,ye,Be,Pe){for(var qe=this.text,Oe=new Vt(qe,Be);Oe.pos<Pe&&!Oe.eol();){Oe.start=Oe.pos;var Ge=ce.token(Oe,ye)}return{start:Oe.start,end:Oe.pos,string:Oe.current(),className:Ge||null,state:ye}},indentation:function(ce){return di(this.text,null,ce)},getContent:function(ce,ye,Be){var Pe=!0,qe=0,Oe=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,Ge=wi("pre");function ot(Br,Cr,rr){if(Cr){if(Pe&&Qe&&Cr.charAt(0)==" "&&(Cr="Â "+Cr.slice(1)),Pe=!1,Oe.test(Cr))for(var Lr=document.createDocumentFragment(),sr=0;;){Oe.lastIndex=sr;var jr=Oe.exec(Cr),ss=jr?jr.index-sr:Cr.length-sr;if(ss&&(Lr.appendChild(document.createTextNode(Cr.slice(sr,sr+ss))),qe+=ss),!jr)break;if(sr+=ss+1,jr[0]=="	"){var ps=ce-qe%ce;Lr.appendChild(wi("span",Ht(ps),"cm-tab")),qe+=ps}else{var cr=wi("span","â¢","cm-invalidchar");cr.title="\\u"+jr[0].charCodeAt(0).toString(16),Lr.appendChild(cr),qe+=1}}else{qe+=Cr.length;var Lr=document.createTextNode(Cr)}rr?Br.appendChild(wi("span",[Lr],rr)):Br.appendChild(Lr)}}var vt=ot;if(ye!=null){var Ct=0,Ut=Ge.anchor=wi("span");vt=function(Br,Cr,rr){var Lr=Cr.length;if(ye>=Ct&&ye<Ct+Lr){var sr=ye-Ct;if(sr&&(ot(Br,Cr.slice(0,sr),rr),Be)){var jr=Cr.slice(sr-1,sr+1);Bt.test(jr)?Br.appendChild(wi("wbr")):!Ue&&/\w\w/.test(jr)&&Br.appendChild(document.createTextNode("â"))}Br.appendChild(Ut),ot(Ut,rt?Cr.slice(sr,sr+1):Cr.slice(sr),rr),rt&&ot(Br,Cr.slice(sr+1),rr),ye--,Ct+=Lr}else Ct+=Lr,ot(Br,Cr,rr),Ct==ye&&Ct==ei?(Ar(Ut,R),Br.appendChild(Ut)):Ct>ye+10&&/\s/.test(Cr)&&(vt=function(){})}}var ai=this.styles,Di=this.text,ni=this.markedSpans,ei=Di.length;function Ui(Br){return Br?"cm-"+Br.replace(/ +/g," cm-"):null}if(!Di&&ye==null)vt(Ge," ");else if(!ni||!ni.length)for(var Qi=0,hr=0;hr<ei;Qi+=2){var Ki=ai[Qi],Yt=ai[Qi+1],wr=Ki.length;hr+wr>ei&&(Ki=Ki.slice(0,ei-hr)),hr+=wr,vt(Ge,Ki,Ui(Yt))}else{ni.sort(function(rr,Lr){return rr.from-Lr.from});for(var bi=0,Qi=0,Ir="",Yt,Pr=ni[0].from||0,Zi=[],pi=0,_s=function(){for(var rr;pi<ni.length&&((rr=ni[pi]).from==bi||rr.from==null);)rr.marker.type=="range"&&Zi.push(rr),++pi;Pr=pi<ni.length?ni[pi].from:1/0;for(var Lr=0;Lr<Zi.length;++Lr){var sr=Zi[Lr].to;sr==null&&(sr=1/0),sr==bi?Zi.splice(Lr--,1):Pr=Math.min(sr,Pr)}};bi<ei;){Pr==bi&&_s();for(var dr=Math.min(ei,Pr);;){if(Ir){for(var Lt=bi+Ir.length,Yr=Yt,Ys=0;Ys<Zi.length;++Ys){var _r=Zi[Ys];Yr=(Yr?Yr+" ":"")+_r.marker.style,_r.marker.endStyle&&_r.to===Math.min(Lt,dr)&&(Yr+=" "+_r.marker.endStyle),_r.marker.startStyle&&_r.from===bi&&(Yr+=" "+_r.marker.startStyle)}if(vt(Ge,Lt>dr?Ir.slice(0,dr-bi):Ir,Yr),Lt>=dr){Ir=Ir.slice(dr-bi),bi=dr;break}bi=Lt}Ir=ai[Qi++],Yt=Ui(ai[Qi++])}}}return Ge},cleanUp:function(){this.parent=null,S(this)}};function se(ce){this.lines=ce,this.parent=null;for(var ye=0,Be=ce.length,Pe=0;ye<Be;++ye)ce[ye].parent=this,Pe+=ce[ye].height;this.height=Pe}se.prototype={chunkSize:function(){return this.lines.length},remove:function(ce,ye,Be){for(var Pe=ce,qe=ce+ye;Pe<qe;++Pe){var Oe=this.lines[Pe];if(this.height-=Oe.height,Oe.cleanUp(),Oe.handlers)for(var Ge=0;Ge<Oe.handlers.length;++Ge)Be.push(Oe.handlers[Ge])}this.lines.splice(ce,ye)},collapse:function(ce){ce.splice.apply(ce,[ce.length,0].concat(this.lines))},insertHeight:function(ce,ye,Be){this.height+=Be,this.lines=this.lines.slice(0,ce).concat(ye).concat(this.lines.slice(ce));for(var Pe=0,qe=ye.length;Pe<qe;++Pe)ye[Pe].parent=this},iterN:function(ce,ye,Be){for(var Pe=ce+ye;ce<Pe;++ce)if(Be(this.lines[ce]))return!0}};function le(ce){this.children=ce;for(var ye=0,Be=0,Pe=0,qe=ce.length;Pe<qe;++Pe){var Oe=ce[Pe];ye+=Oe.chunkSize(),Be+=Oe.height,Oe.parent=this}this.size=ye,this.height=Be,this.parent=null}le.prototype={chunkSize:function(){return this.size},remove:function(ce,ye,Be){this.size-=ye;for(var Pe=0;Pe<this.children.length;++Pe){var qe=this.children[Pe],Oe=qe.chunkSize();if(ce<Oe){var Ge=Math.min(ye,Oe-ce),ot=qe.height;if(qe.remove(ce,Ge,Be),this.height-=ot-qe.height,Oe==Ge&&(this.children.splice(Pe--,1),qe.parent=null),(ye-=Ge)==0)break;ce=0}else ce-=Oe}if(this.size-ye<25){var vt=[];this.collapse(vt),this.children=[new se(vt)],this.children[0].parent=this}},collapse:function(ce){for(var ye=0,Be=this.children.length;ye<Be;++ye)this.children[ye].collapse(ce)},insert:function(ce,ye){for(var Be=0,Pe=0,qe=ye.length;Pe<qe;++Pe)Be+=ye[Pe].height;this.insertHeight(ce,ye,Be)},insertHeight:function(ce,ye,Be){this.size+=ye.length,this.height+=Be;for(var Pe=0,qe=this.children.length;Pe<qe;++Pe){var Oe=this.children[Pe],Ge=Oe.chunkSize();if(ce<=Ge){if(Oe.insertHeight(ce,ye,Be),Oe.lines&&Oe.lines.length>50){for(;Oe.lines.length>50;){var ot=Oe.lines.splice(Oe.lines.length-25,25),vt=new se(ot);Oe.height-=vt.height,this.children.splice(Pe+1,0,vt),vt.parent=this}this.maybeSpill()}break}ce-=Ge}},maybeSpill:function(){if(!(this.children.length<=10)){var ce=this;do{var ye=ce.children.splice(ce.children.length-5,5),Be=new le(ye);if(ce.parent){ce.size-=Be.size,ce.height-=Be.height;var qe=ji(ce.parent.children,ce);ce.parent.children.splice(qe+1,0,Be)}else{var Pe=new le(ce.children);Pe.parent=ce,ce.children=[Pe,Be],ce=Pe}Be.parent=ce.parent}while(ce.children.length>10);ce.parent.maybeSpill()}},iter:function(ce,ye,Be){this.iterN(ce,ye-ce,Be)},iterN:function(ce,ye,Be){for(var Pe=0,qe=this.children.length;Pe<qe;++Pe){var Oe=this.children[Pe],Ge=Oe.chunkSize();if(ce<Ge){var ot=Math.min(ye,Ge-ce);if(Oe.iterN(ce,ot,Be))return!0;if((ye-=ot)==0)break;ce=0}else ce-=Ge}}};function fe(ce,ye){for(;!ce.lines;)for(var Be=0;;++Be){var Pe=ce.children[Be],qe=Pe.chunkSize();if(ye<qe){ce=Pe;break}ye-=qe}return ce.lines[ye]}function be(ce){if(ce.parent==null)return null;for(var ye=ce.parent,Be=ji(ye.lines,ce),Pe=ye.parent;Pe;ye=Pe,Pe=Pe.parent)for(var qe=0;Pe.children[qe]!=ye;++qe)Be+=Pe.children[qe].chunkSize();return Be}function Te(ce,ye){var Be=0;e:do{for(var Pe=0,qe=ce.children.length;Pe<qe;++Pe){var Oe=ce.children[Pe],Ge=Oe.height;if(ye<Ge){ce=Oe;continue e}ye-=Ge,Be+=Oe.chunkSize()}return Be}while(!ce.lines);for(var Pe=0,qe=ce.lines.length;Pe<qe;++Pe){var ot=ce.lines[Pe],vt=ot.height;if(ye<vt)break;ye-=vt}return Be+Pe}function Ke(ce,ye){var Be=0;e:do{for(var Pe=0,qe=ce.children.length;Pe<qe;++Pe){var Oe=ce.children[Pe],Ge=Oe.chunkSize();if(ye<Ge){ce=Oe;continue e}ye-=Ge,Be+=Oe.height}return Be}while(!ce.lines);for(var Pe=0;Pe<ye;++Pe)Be+=ce.lines[Pe].height;return Be}function Me(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}Me.prototype={addChange:function(ce,ye,Be){this.undone.length=0;var Pe=+new Date,qe=_i(this.done),Oe=qe&&_i(qe),Ge=Pe-this.time;if(qe&&!this.closed&&this.compound)qe.push({start:ce,added:ye,old:Be});else if(Ge>400||!Oe||this.closed||Oe.start>ce+Be.length||Oe.start+Oe.added<ce)this.done.push([{start:ce,added:ye,old:Be}]),this.closed=!1;else{for(var ot=Math.max(0,Oe.start-ce),vt=Math.max(0,ce+Be.length-(Oe.start+Oe.added)),Ct=ot;Ct>0;--Ct)Oe.old.unshift(Be[Ct-1]);for(var Ct=vt;Ct>0;--Ct)Oe.old.push(Be[Be.length-Ct]);ot&&(Oe.start=ce),Oe.added+=ye-(Be.length-ot-vt)}this.time=Pe},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}};function me(){gt(this)}function De(ce){return ce.stop||(ce.stop=me),ce}function Xe(ce){ce.preventDefault?ce.preventDefault():ce.returnValue=!1}function ct(ce){ce.stopPropagation?ce.stopPropagation():ce.cancelBubble=!0}function gt(ce){Xe(ce),ct(ce)}g.e_stop=gt,g.e_preventDefault=Xe,g.e_stopPropagation=ct;function Dt(ce){return ce.target||ce.srcElement}function Kt(ce){var ye=ce.which;return ye==null&&(ce.button&1?ye=1:ce.button&2?ye=3:ce.button&4&&(ye=2)),M&&ce.ctrlKey&&ye==1&&(ye=3),ye}function Gt(ce,ye){var Be=ce.override&&ce.override.hasOwnProperty(ye);return Be?ce.override[ye]:ce[ye]}function Qt(ce,ye,Be,Pe){if(typeof ce.addEventListener=="function"){if(ce.addEventListener(ye,Be,!1),Pe)return function(){ce.removeEventListener(ye,Be,!1)}}else{var qe=function(Oe){Be(Oe||window.event)};if(ce.attachEvent("on"+ye,qe),Pe)return function(){ce.detachEvent("on"+ye,qe)}}}g.connect=Qt;function $t(){this.id=null}$t.prototype={set:function(ce,ye){clearTimeout(this.id),this.id=setTimeout(ye,ce)}};var ri=g.Pass={toString:function(){return"CodeMirror.Pass"}},ci=function(){if(We)return!1;var ce=wi("div");return"draggable"in ce||"dragDrop"in ce}();(function(){var ce=wi("textarea");return ce.value=`foo
bar`,ce.value.indexOf("\r")>-1?`\r
`:`
`})();var Bt=/^$/;ke?Bt=/$'/:ft?Bt=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:et&&(Bt=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);function di(ce,ye,Be){ye==null&&(ye=ce.search(/[^\s\u00a0]/),ye==-1&&(ye=ce.length));for(var Pe=0,qe=0;Pe<ye;++Pe)ce.charAt(Pe)=="	"?qe+=Be-qe%Be:++qe;return qe}function ii(ce,ye){try{var Be=ce.getBoundingClientRect();Be={top:Be.top,left:Be.left}}catch{Be={top:0,left:0}}if(!ye)if(window.pageYOffset==null){var Pe=document.documentElement||document.body.parentNode;Pe.scrollTop==null&&(Pe=document.body),Be.top+=Pe.scrollTop,Be.left+=Pe.scrollLeft}else Be.top+=window.pageYOffset,Be.left+=window.pageXOffset;return Be}function Hi(ce){return ce.textContent||ce.innerText||ce.nodeValue||""}var Vi=[""];function Ht(ce){for(;Vi.length<=ce;)Vi.push(_i(Vi)+" ");return Vi[ce]}function _i(ce){return ce[ce.length-1]}function Ti(ce){B?(ce.selectionStart=0,ce.selectionEnd=ce.value.length):ce.select()}function Wi(ce,ye){return ce.line==ye.line&&ce.ch==ye.ch}function Zt(ce,ye){return ce.line<ye.line||ce.line==ye.line&&ce.ch<ye.ch}function mi(ce){return{line:ce.line,ch:ce.ch}}function wi(ce,ye,Be,Pe){var qe=document.createElement(ce);if(Be&&(qe.className=Be),Pe&&(qe.style.cssText=Pe),typeof ye=="string")Ar(qe,ye);else if(ye)for(var Oe=0;Oe<ye.length;++Oe)qe.appendChild(ye[Oe]);return qe}function $i(ce){return ce.innerHTML="",ce}function tr(ce,ye){$i(ce).appendChild(ye)}function Ar(ce,ye){We?(ce.innerHTML="",ce.appendChild(document.createTextNode(ye))):ce.textContent=ye}function Tr(ce,ye){if(!ye)return 0;if(!ce)return ye.length;for(var Be=ce.length,Pe=ye.length;Be>=0&&Pe>=0&&ce.charAt(Be)==ye.charAt(Pe);--Be,--Pe);return Pe+1}function ji(ce,ye){if(ce.indexOf)return ce.indexOf(ye);for(var Be=0,Pe=ce.length;Be<Pe;++Be)if(ce[Be]==ye)return Be;return-1}var Ii=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function Qs(ce){return/\w/.test(ce)||ce>"Â"&&(ce.toUpperCase()!=ce.toLowerCase()||Ii.test(ce))}var $r=`

b`.split(/\n/).length!=3?function(ce){for(var ye=0,Be=[],Pe=ce.length;ye<=Pe;){var qe=ce.indexOf(`
`,ye);qe==-1&&(qe=ce.length);var Oe=ce.slice(ye,ce.charAt(qe-1)=="\r"?qe-1:qe),Ge=Oe.indexOf("\r");Ge!=-1?(Be.push(Oe.slice(0,Ge)),ye+=Ge+1):(Be.push(Oe),ye=qe+1)}return Be}:function(ce){return ce.split(/\r\n?|\n/)};g.splitLines=$r;var nt=window.getSelection?function(ce){try{return ce.selectionStart!=ce.selectionEnd}catch{return!1}}:function(ce){try{var ye=ce.ownerDocument.selection.createRange()}catch{}return!ye||ye.parentElement()!=ce?!1:ye.compareEndPoints("StartToEnd",ye)!=0};g.defineMode("null",function(){return{token:function(ce){ce.skipToEnd()}}}),g.defineMIME("text/plain","null");var Ie={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return g.keyNames=Ie,function(){for(var ce=0;ce<10;ce++)Ie[ce+48]=String(ce);for(var ce=65;ce<=90;ce++)Ie[ce]=String.fromCharCode(ce);for(var ce=1;ce<=12;ce++)Ie[ce+111]=Ie[ce+63235]="F"+ce}(),g.version="2.38",g}()),codemirror}requireCodemirror();CodeMirror.defineMode("javascript",function(g,B){var M=g.indentUnit,P=B.json,K=B.typescript,Y=function(){function Me($t){return{type:$t,style:"keyword"}}var me=Me("keyword a"),De=Me("keyword b"),Xe=Me("keyword c"),ct=Me("operator"),gt={type:"atom",style:"atom"},Dt={if:me,while:me,with:me,else:De,do:De,try:De,finally:De,return:Xe,break:Xe,continue:Xe,new:Xe,delete:Xe,throw:Xe,var:Me("var"),const:Me("var"),let:Me("var"),function:Me("function"),catch:Me("catch"),for:Me("for"),switch:Me("switch"),case:Me("case"),default:Me("default"),in:ct,typeof:ct,instanceof:ct,true:gt,false:gt,null:gt,undefined:gt,NaN:gt,Infinity:gt};if(K){var Kt={type:"variable",style:"variable-3"},Gt={interface:Me("interface"),class:Me("class"),extends:Me("extends"),constructor:Me("constructor"),public:Me("public"),private:Me("private"),protected:Me("protected"),static:Me("static"),super:Me("super"),string:Kt,number:Kt,bool:Kt,any:Kt};for(var Qt in Gt)Dt[Qt]=Gt[Qt]}return Dt}(),ie=/[+\-*&%=<>!?|]/;function D(Me,me,De){return me.tokenize=De,De(Me,me)}function ne(Me,me){for(var De=!1,Xe;(Xe=Me.next())!=null;){if(Xe==me&&!De)return!1;De=!De&&Xe=="\\"}return De}var oe,ue;function pe(Me,me,De){return oe=Me,ue=De,me}function we(Me,me){var De=Me.next();if(De=='"'||De=="'")return D(Me,me,ke(De));if(/[\[\]{}\(\),;\:\.]/.test(De))return pe(De);if(De=="0"&&Me.eat(/x/i))return Me.eatWhile(/[\da-f]/i),pe("number","number");if(/\d/.test(De)||De=="-"&&Me.eat(/\d/))return Me.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),pe("number","number");if(De=="/")return Me.eat("*")?D(Me,me,Qe):Me.eat("/")?(Me.skipToEnd(),pe("comment","comment")):me.lastType=="operator"||me.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(me.lastType)?(ne(Me,"/"),Me.eatWhile(/[gimy]/),pe("regexp","string-2")):(Me.eatWhile(ie),pe("operator",null,Me.current()));if(De=="#")return Me.skipToEnd(),pe("error","error");if(ie.test(De))return Me.eatWhile(ie),pe("operator",null,Me.current());Me.eatWhile(/[\w\$_]/);var Xe=Me.current(),ct=Y.propertyIsEnumerable(Xe)&&Y[Xe];return ct&&me.lastType!="."?pe(ct.type,ct.style,Xe):pe("variable","variable",Xe)}function ke(Me){return function(me,De){return ne(me,Me)||(De.tokenize=we),pe("string","string")}}function Qe(Me,me){for(var De=!1,Xe;Xe=Me.next();){if(Xe=="/"&&De){me.tokenize=we;break}De=Xe=="*"}return pe("comment","comment")}var Ue={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function We(Me,me,De,Xe,ct,gt){this.indented=Me,this.column=me,this.type=De,this.prev=ct,this.info=gt,Xe!=null&&(this.align=Xe)}function Ne(Me,me){for(var De=Me.localVars;De;De=De.next)if(De.name==me)return!0}function ut(Me,me,De,Xe,ct){var gt=Me.cc;for(Ye.state=Me,Ye.stream=ct,Ye.marked=null,Ye.cc=gt,Me.lexical.hasOwnProperty("align")||(Me.lexical.align=!0);;){var Dt=gt.length?gt.pop():P?Ai:Vt;if(Dt(De,Xe)){for(;gt.length&&gt[gt.length-1].lex;)gt.pop()();return Ye.marked?Ye.marked:De=="variable"&&Ne(Me,Xe)?"variable-2":me}}}var Ye={state:null,marked:null,cc:null};function et(){for(var Me=arguments.length-1;Me>=0;Me--)Ye.cc.push(arguments[Me])}function rt(){return et.apply(null,arguments),!0}function ft(Me){function me(Xe){for(var ct=Xe;ct;ct=ct.next)if(ct.name==Me)return!0;return!1}var De=Ye.state;if(De.context){if(Ye.marked="def",me(De.localVars))return;De.localVars={name:Me,next:De.localVars}}else{if(me(De.globalVars))return;De.globalVars={name:Me,next:De.globalVars}}}var Ze={name:"this",next:{name:"arguments"}};function wt(){Ye.state.context={prev:Ye.state.context,vars:Ye.state.localVars},Ye.state.localVars=Ze}function Ft(){Ye.state.localVars=Ye.state.context.vars,Ye.state.context=Ye.state.context.prev}function _t(Me,me){var De=function(){var Xe=Ye.state;Xe.lexical=new We(Xe.indented,Ye.stream.column(),Me,null,Xe.lexical,me)};return De.lex=!0,De}function Pt(){var Me=Ye.state;Me.lexical.prev&&(Me.lexical.type==")"&&(Me.indented=Me.lexical.indented),Me.lexical=Me.lexical.prev)}Pt.lex=!0;function Mt(Me){return function(De){return De==Me?rt():Me==";"?et():rt(arguments.callee)}}function Vt(Me){return Me=="var"?rt(_t("vardef"),R,Mt(";"),Pt):Me=="keyword a"?rt(_t("form"),Ai,Vt,Pt):Me=="keyword b"?rt(_t("form"),Vt,Pt):Me=="{"?rt(_t("}"),w,Pt):Me==";"?rt():Me=="function"?rt(Te):Me=="for"?rt(_t("form"),Mt("("),_t(")"),se,Mt(")"),Pt,Vt,Pt):Me=="variable"?rt(_t("stat"),Li):Me=="switch"?rt(_t("form"),Ai,_t("}","switch"),Mt("{"),w,Pt,Pt):Me=="case"?rt(Ai,Mt(":")):Me=="default"?rt(Mt(":")):Me=="catch"?rt(_t("form"),wt,Mt("("),Ke,Mt(")"),Vt,Pt,Ft):et(_t("stat"),Ai,Mt(";"),Pt)}function Ai(Me){return Ue.hasOwnProperty(Me)?rt(Ei):Me=="function"?rt(Te):Me=="keyword c"?rt(Ri):Me=="("?rt(_t(")"),Ri,Mt(")"),Pt,Ei):Me=="operator"?rt(Ai):Me=="["?rt(_t("]"),d(Ai,"]"),Pt,Ei):Me=="{"?rt(_t("}"),d(vi,"}"),Pt,Ei):rt()}function Ri(Me){return Me.match(/[;\}\)\],]/)?et():et(Ai)}function Ei(Me,me){if(Me=="operator"&&/\+\+|--/.test(me))return rt(Ei);if(Me=="operator"&&me=="?")return rt(Ai,Mt(":"),Ai);if(Me!=";"){if(Me=="(")return rt(_t(")"),d(Ai,")"),Pt,Ei);if(Me==".")return rt(Yi,Ei);if(Me=="[")return rt(_t("]"),Ai,Mt("]"),Pt,Ei)}}function Li(Me){return Me==":"?rt(Pt,Vt):et(Ei,Mt(";"),Pt)}function Yi(Me){if(Me=="variable")return Ye.marked="property",rt()}function vi(Me){if(Me=="variable"&&(Ye.marked="property"),Ue.hasOwnProperty(Me))return rt(Mt(":"),Ai)}function d(Me,me){function De(Xe){return Xe==","?rt(Me,De):Xe==me?rt():rt(Mt(me))}return function(ct){return ct==me?rt():et(Me,De)}}function w(Me){return Me=="}"?rt():et(Vt,w)}function S(Me){return Me==":"?rt(k):et()}function k(Me){return Me=="variable"?(Ye.marked="variable-3",rt()):et()}function R(Me,me){return Me=="variable"?(ft(me),K?rt(S,W):rt(W)):et()}function W(Me,me){if(me=="=")return rt(Ai,W);if(Me==",")return rt(R)}function se(Me){return Me=="var"?rt(R,Mt(";"),fe):Me==";"?rt(fe):Me=="variable"?rt(le):rt(fe)}function le(Me,me){return me=="in"?rt(Ai):rt(Ei,fe)}function fe(Me,me){return Me==";"?rt(be):me=="in"?rt(Ai):rt(Ai,Mt(";"),be)}function be(Me){Me!=")"&&rt(Ai)}function Te(Me,me){if(Me=="variable")return ft(me),rt(Te);if(Me=="(")return rt(_t(")"),wt,d(Ke,")"),Pt,Vt,Ft)}function Ke(Me,me){if(Me=="variable")return ft(me),K?rt(S):rt()}return{startState:function(Me){return{tokenize:we,lastType:null,cc:[],lexical:new We((Me||0)-M,0,"block",!1),localVars:B.localVars,globalVars:B.globalVars,context:B.localVars&&{vars:B.localVars},indented:0}},token:function(Me,me){if(Me.sol()&&(me.lexical.hasOwnProperty("align")||(me.lexical.align=!1),me.indented=Me.indentation()),Me.eatSpace())return null;var De=me.tokenize(Me,me);return oe=="comment"?De:(me.lastType=oe,ut(me,De,oe,ue,Me))},indent:function(Me,me){if(Me.tokenize==Qe)return CodeMirror.Pass;if(Me.tokenize!=we)return 0;var De=me&&me.charAt(0),Xe=Me.lexical;Xe.type=="stat"&&De=="}"&&(Xe=Xe.prev);var ct=Xe.type,gt=De==ct;return ct=="vardef"?Xe.indented+(Me.lastType=="operator"||Me.lastType==","?4:0):ct=="form"&&De=="{"?Xe.indented:ct=="form"?Xe.indented+M:ct=="stat"?Xe.indented+(Me.lastType=="operator"||Me.lastType==","?M:0):Xe.info=="switch"&&!gt?Xe.indented+(/^(?:case|default)\b/.test(me)?M:2*M):Xe.align?Xe.column+(gt?0:1):Xe.indented+(gt?0:M)},electricChars:":{}",jsonMode:P}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMode("xml",function(g,B){var M=g.indentUnit,P=B.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},K=B.alignCDATA,Y,ie;function D(_t,Pt){function Mt(Li){return Pt.tokenize=Li,Li(_t,Pt)}var Vt=_t.next();if(Vt=="<"){if(_t.eat("!"))return _t.eat("[")?_t.match("CDATA[")?Mt(ue("atom","]]>")):null:_t.match("--")?Mt(ue("comment","-->")):_t.match("DOCTYPE",!0,!0)?(_t.eatWhile(/[\w\._\-]/),Mt(pe(1))):null;if(_t.eat("?"))return _t.eatWhile(/[\w\._\-]/),Pt.tokenize=ue("meta","?>"),"meta";var Ai=_t.eat("/");Y="";for(var Ri;Ri=_t.eat(/[^\s\u00a0=<>\"\'\/?]/);)Y+=Ri;return Y?(ie=Ai?"closeTag":"openTag",Pt.tokenize=ne,"tag"):"error"}else if(Vt=="&"){var Ei;return _t.eat("#")?_t.eat("x")?Ei=_t.eatWhile(/[a-fA-F\d]/)&&_t.eat(";"):Ei=_t.eatWhile(/[\d]/)&&_t.eat(";"):Ei=_t.eatWhile(/[\w\.\-:]/)&&_t.eat(";"),Ei?"atom":"error"}else return _t.eatWhile(/[^&<]/),null}function ne(_t,Pt){var Mt=_t.next();return Mt==">"||Mt=="/"&&_t.eat(">")?(Pt.tokenize=D,ie=Mt==">"?"endTag":"selfcloseTag","tag"):Mt=="="?(ie="equals",null):/[\'\"]/.test(Mt)?(Pt.tokenize=oe(Mt),Pt.tokenize(_t,Pt)):(_t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function oe(_t){return function(Pt,Mt){for(;!Pt.eol();)if(Pt.next()==_t){Mt.tokenize=ne;break}return"string"}}function ue(_t,Pt){return function(Mt,Vt){for(;!Mt.eol();){if(Mt.match(Pt)){Vt.tokenize=D;break}Mt.next()}return _t}}function pe(_t){return function(Pt,Mt){for(var Vt;(Vt=Pt.next())!=null;){if(Vt=="<")return Mt.tokenize=pe(_t+1),Mt.tokenize(Pt,Mt);if(Vt==">")if(_t==1){Mt.tokenize=D;break}else return Mt.tokenize=pe(_t-1),Mt.tokenize(Pt,Mt)}return"meta"}}var we,ke;function Qe(){for(var _t=arguments.length-1;_t>=0;_t--)we.cc.push(arguments[_t])}function Ue(){return Qe.apply(null,arguments),!0}function We(_t,Pt){var Mt=P.doNotIndent.hasOwnProperty(_t)||we.context&&we.context.noIndent;we.context={prev:we.context,tagName:_t,indent:we.indented,startOfLine:Pt,noIndent:Mt}}function Ne(){we.context&&(we.context=we.context.prev)}function ut(_t){if(_t=="openTag")return we.tagName=Y,Ue(ft,Ye(we.startOfLine));if(_t=="closeTag"){var Pt=!1;return we.context?we.context.tagName!=Y&&(P.implicitlyClosed.hasOwnProperty(we.context.tagName.toLowerCase())&&Ne(),Pt=!we.context||we.context.tagName!=Y):Pt=!0,Pt&&(ke="error"),Ue(et(Pt))}return Ue()}function Ye(_t){return function(Pt){return Pt=="selfcloseTag"||Pt=="endTag"&&P.autoSelfClosers.hasOwnProperty(we.tagName.toLowerCase())?(rt(we.tagName.toLowerCase()),Ue()):(Pt=="endTag"&&(rt(we.tagName.toLowerCase()),We(we.tagName,_t)),Ue())}}function et(_t){return function(Pt){return _t&&(ke="error"),Pt=="endTag"?(Ne(),Ue()):(ke="error",Ue(arguments.callee))}}function rt(_t){for(var Pt;;){if(!we.context||(Pt=we.context.tagName.toLowerCase(),!P.contextGrabbers.hasOwnProperty(Pt)||!P.contextGrabbers[Pt].hasOwnProperty(_t)))return;Ne()}}function ft(_t){return _t=="word"?(ke="attribute",Ue(Ze,ft)):_t=="endTag"||_t=="selfcloseTag"?Qe():(ke="error",Ue(ft))}function Ze(_t){return _t=="equals"?Ue(wt,ft):(P.allowMissing?_t=="word"&&(ke="attribute"):ke="error",_t=="endTag"||_t=="selfcloseTag"?Qe():Ue())}function wt(_t){return _t=="string"?Ue(Ft):_t=="word"&&P.allowUnquoted?(ke="string",Ue()):(ke="error",_t=="endTag"||_t=="selfCloseTag"?Qe():Ue())}function Ft(_t){return _t=="string"?Ue(Ft):Qe()}return{startState:function(){return{tokenize:D,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(_t,Pt){if(_t.sol()&&(Pt.startOfLine=!0,Pt.indented=_t.indentation()),_t.eatSpace())return null;ke=ie=Y=null;var Mt=Pt.tokenize(_t,Pt);if(Pt.type=ie,(Mt||ie)&&Mt!="comment")for(we=Pt;;){var Vt=Pt.cc.pop()||ut;if(Vt(ie||Mt))break}return Pt.startOfLine=!1,ke||Mt},indent:function(_t,Pt,Mt){var Vt=_t.context;if(_t.tokenize!=ne&&_t.tokenize!=D||Vt&&Vt.noIndent)return Mt?Mt.match(/^(\s*)/)[0].length:0;if(K&&/<!\[CDATA\[/.test(Pt))return 0;for(Vt&&/^<\//.test(Pt)&&(Vt=Vt.prev);Vt&&!Vt.startOfLine;)Vt=Vt.prev;return Vt?Vt.indent+M:0},electricChars:"/",configuration:B.htmlMode?"html":"xml"}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});var clike={},hasRequiredClike;function requireClike(){return hasRequiredClike||(hasRequiredClike=1,CodeMirror.defineMode("clike",function(g,B){var M=g.indentUnit,P=B.statementIndentUnit||M,K=B.dontAlignCalls,Y=B.keywords||{},ie=B.builtin||{},D=B.blockKeywords||{},ne=B.atoms||{},oe=B.hooks||{},ue=B.multiLineStrings,pe=/[+\-*&%=<>!?|\/]/,we;function ke(Ye,et){var rt=Ye.next();if(oe[rt]){var ft=oe[rt](Ye,et);if(ft!==!1)return ft}if(rt=='"'||rt=="'")return et.tokenize=Qe(rt),et.tokenize(Ye,et);if(/[\[\]{}\(\),;\:\.]/.test(rt))return we=rt,null;if(/\d/.test(rt))return Ye.eatWhile(/[\w\.]/),"number";if(rt=="/"){if(Ye.eat("*"))return et.tokenize=Ue,Ue(Ye,et);if(Ye.eat("/"))return Ye.skipToEnd(),"comment"}if(pe.test(rt))return Ye.eatWhile(pe),"operator";Ye.eatWhile(/[\w\$_]/);var Ze=Ye.current();return Y.propertyIsEnumerable(Ze)?(D.propertyIsEnumerable(Ze)&&(we="newstatement"),"keyword"):ie.propertyIsEnumerable(Ze)?(D.propertyIsEnumerable(Ze)&&(we="newstatement"),"builtin"):ne.propertyIsEnumerable(Ze)?"atom":"variable"}function Qe(Ye){return function(et,rt){for(var ft=!1,Ze,wt=!1;(Ze=et.next())!=null;){if(Ze==Ye&&!ft){wt=!0;break}ft=!ft&&Ze=="\\"}return(wt||!(ft||ue))&&(rt.tokenize=null),"string"}}function Ue(Ye,et){for(var rt=!1,ft;ft=Ye.next();){if(ft=="/"&&rt){et.tokenize=null;break}rt=ft=="*"}return"comment"}function We(Ye,et,rt,ft,Ze){this.indented=Ye,this.column=et,this.type=rt,this.align=ft,this.prev=Ze}function Ne(Ye,et,rt){var ft=Ye.indented;return Ye.context&&Ye.context.type=="statement"&&(ft=Ye.context.indented),Ye.context=new We(ft,et,rt,null,Ye.context)}function ut(Ye){var et=Ye.context.type;return(et==")"||et=="]"||et=="}")&&(Ye.indented=Ye.context.indented),Ye.context=Ye.context.prev}return{startState:function(Ye){return{tokenize:null,context:new We((Ye||0)-M,0,"top",!1),indented:0,startOfLine:!0}},token:function(Ye,et){var rt=et.context;if(Ye.sol()&&(rt.align==null&&(rt.align=!1),et.indented=Ye.indentation(),et.startOfLine=!0),Ye.eatSpace())return null;we=null;var ft=(et.tokenize||ke)(Ye,et);if(ft=="comment"||ft=="meta")return ft;if(rt.align==null&&(rt.align=!0),(we==";"||we==":"||we==",")&&rt.type=="statement")ut(et);else if(we=="{")Ne(et,Ye.column(),"}");else if(we=="[")Ne(et,Ye.column(),"]");else if(we=="(")Ne(et,Ye.column(),")");else if(we=="}"){for(;rt.type=="statement";)rt=ut(et);for(rt.type=="}"&&(rt=ut(et));rt.type=="statement";)rt=ut(et)}else we==rt.type?ut(et):((rt.type=="}"||rt.type=="top")&&we!=";"||rt.type=="statement"&&we=="newstatement")&&Ne(et,Ye.column(),"statement");return et.startOfLine=!1,ft},indent:function(Ye,et){if(Ye.tokenize==Ue)return CodeMirror.Pass;if(Ye.tokenize!=ke&&Ye.tokenize!=null)return 0;var rt=Ye.context,ft=et&&et.charAt(0);rt.type=="statement"&&ft=="}"&&(rt=rt.prev);var Ze=ft==rt.type;return rt.type=="statement"?rt.indented+(ft=="{"?0:P):K&&rt.type==")"&&!Ze?rt.indented+P:rt.align?rt.column+(Ze?0:1):rt.indented+(Ze?0:M)},electricChars:"{}"}}),function(){function g(Y){for(var ie={},D=Y.split(" "),ne=0;ne<D.length;++ne)ie[D[ne]]=!0;return ie}var B="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";function M(Y,ie){if(!ie.startOfLine)return!1;for(;;)if(Y.skipTo("\\")){if(Y.next(),Y.eol()){ie.tokenize=M;break}}else{Y.skipToEnd(),ie.tokenize=null;break}return"meta"}function P(Y,ie){for(var D;(D=Y.next())!=null;)if(D=='"'&&!Y.eat('"')){ie.tokenize=null;break}return"string"}function K(Y,ie){for(var D=0;D<Y.length;++D)CodeMirror.defineMIME(Y[D],ie)}K(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:g(B),blockKeywords:g("case do else for if switch while struct"),atoms:g("null"),hooks:{"#":M}}),K(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:g(B+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:g("catch class do else finally for if struct switch try while"),atoms:g("true false null"),hooks:{"#":M}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:g("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:g("catch class do else finally for if switch try while"),atoms:g("true false null"),hooks:{"@":function(Y,ie){return Y.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:g("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:g("catch class do else finally for foreach if struct switch try while"),builtin:g("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:g("true false null"),hooks:{"@":function(Y,ie){return Y.eat('"')?(ie.tokenize=P,P(Y,ie)):(Y.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:g("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:g("catch class do else finally for forSome if match switch try while"),atoms:g("true false null"),hooks:{"@":function(Y,ie){return Y.eatWhile(/[\w\$_]/),"meta"}}})}()),clike}requireClike();CodeMirror.defineMode("css",function(g){var B=g.indentUnit,M,P=ne(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),K=ne(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),Y=ne(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),ie=ne(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),D=ne(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);function ne(Ue){for(var We={},Ne=0;Ne<Ue.length;++Ne)We[Ue[Ne]]=!0;return We}function oe(Ue,We){return M=We,Ue}function ue(Ue,We){var Ne=Ue.next();if(Ne=="@")return Ue.eatWhile(/[\w\\\-]/),oe("def",Ue.current());if(Ne=="/"&&Ue.eat("*"))return We.tokenize=pe,pe(Ue,We);if(Ne=="<"&&Ue.eat("!"))return We.tokenize=we,we(Ue,We);if(Ne=="=")oe(null,"compare");else{if((Ne=="~"||Ne=="|")&&Ue.eat("="))return oe(null,"compare");if(Ne=='"'||Ne=="'")return We.tokenize=ke(Ne),We.tokenize(Ue,We);if(Ne=="#")return Ue.eatWhile(/[\w\\\-]/),oe("atom","hash");if(Ne=="!")return Ue.match(/^\s*\w*/),oe("keyword","important");if(/\d/.test(Ne))return Ue.eatWhile(/[\w.%]/),oe("number","unit");if(Ne==="-"){if(/\d/.test(Ue.peek()))return Ue.eatWhile(/[\w.%]/),oe("number","unit");if(Ue.match(/^[^-]+-/))return oe("meta",M)}else return/[,+>*\/]/.test(Ne)?oe(null,"select-op"):Ne=="."&&Ue.match(/^-?[_a-z][_a-z0-9-]*/i)?oe("qualifier",M):Ne==":"?oe("operator",Ne):/[;{}\[\]\(\)]/.test(Ne)?oe(null,Ne):Ne=="u"&&Ue.match("rl(")?(Ue.backUp(1),We.tokenize=Qe,oe("property","variable")):(Ue.eatWhile(/[\w\\\-]/),oe("property","variable"))}}function pe(Ue,We){for(var Ne=!1,ut;(ut=Ue.next())!=null;){if(Ne&&ut=="/"){We.tokenize=ue;break}Ne=ut=="*"}return oe("comment","comment")}function we(Ue,We){for(var Ne=0,ut;(ut=Ue.next())!=null;){if(Ne>=2&&ut==">"){We.tokenize=ue;break}Ne=ut=="-"?Ne+1:0}return oe("comment","comment")}function ke(Ue,We){return function(Ne,ut){for(var Ye=!1,et;(et=Ne.next())!=null&&!(et==Ue&&!Ye);)Ye=!Ye&&et=="\\";return Ye||(We&&Ne.backUp(1),ut.tokenize=ue),oe("string","string")}}function Qe(Ue,We){return Ue.next(),Ue.match(/\s*[\"\']/,!1)?We.tokenize=ue:We.tokenize=ke(")",!0),oe(null,"(")}return{startState:function(Ue){return{tokenize:ue,baseIndent:Ue||0,stack:[]}},token:function(Ue,We){if(We.tokenize==ue&&Ue.eatSpace())return null;var Ne=We.tokenize(Ue,We),ut=We.stack[We.stack.length-1];return Ne=="property"?ut=="propertyValue"?D[Ue.current()]?Ne="string-2":ie[Ue.current()]?Ne="keyword":Ne="variable-2":ut=="rule"?Y[Ue.current()]||(Ne+=" error"):!ut||ut=="@media{"?Ne="tag":ut=="@media"?P[Ue.current()]?Ne="attribute":/^(only|not)$/i.test(Ue.current())?Ne="keyword":Ue.current().toLowerCase()=="and"||K[Ue.current()]?Ne="error":Ne="attribute error":ut=="@mediaType"?P[Ue.current()]?Ne="attribute":Ue.current().toLowerCase()=="and"?Ne="operator":(/^(only|not)$/i.test(Ue.current())||K[Ue.current()],Ne="error"):ut=="@mediaType("?Y[Ue.current()]||(P[Ue.current()]?Ne="error":Ue.current().toLowerCase()=="and"?Ne="operator":/^(only|not)$/i.test(Ue.current())?Ne="error":Ne+=" error"):Ne="error":Ne=="atom"?!ut||ut=="@media{"?Ne="builtin":ut=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(Ue.current())||(Ne+=" error"):Ne="error":ut=="@media"&&M=="{"&&(Ne="error"),M=="{"?ut=="@media"||ut=="@mediaType"?(We.stack.pop(),We.stack[We.stack.length-1]="@media{"):We.stack.push("rule"):M=="}"?(We.stack.pop(),ut=="propertyValue"&&We.stack.pop()):M=="@media"?We.stack.push("@media"):ut=="@media"&&/\b(keyword|attribute)\b/.test(Ne)?We.stack.push("@mediaType"):ut=="@mediaType"&&Ue.current()==","?We.stack.pop():ut=="@mediaType"&&M=="("?We.stack.push("@mediaType("):ut=="@mediaType("&&M==")"?We.stack.pop():ut=="rule"&&M==":"?We.stack.push("propertyValue"):ut=="propertyValue"&&M==";"&&We.stack.pop(),Ne},indent:function(Ue,We){var Ne=Ue.stack.length;return/^\}/.test(We)&&(Ne-=Ue.stack[Ue.stack.length-1]=="propertyValue"?2:1),Ue.baseIndent+Ne*B},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");CodeMirror.multiplexingMode=function(g){var B=Array.prototype.slice.call(arguments,1),M=B.length;function P(K,Y,ie){if(typeof Y=="string")return K.indexOf(Y,ie);var D=Y.exec(ie?K.slice(ie):K);return D?D.index+ie:-1}return{startState:function(){return{outer:CodeMirror.startState(g),innerActive:null,inner:null}},copyState:function(K){return{outer:CodeMirror.copyState(g,K.outer),innerActive:K.innerActive,inner:K.innerActive&&CodeMirror.copyState(K.innerActive.mode,K.inner)}},token:function(K,Y){if(Y.innerActive){var we=Y.innerActive,D=K.string,ue=P(D,we.close,K.pos);if(ue==K.pos)return K.match(we.close),Y.innerActive=Y.inner=null,we.delimStyle;ue>-1&&(K.string=D.slice(0,ue));var ke=we.mode.token(K,Y.inner);ue>-1&&(K.string=D);var Qe=K.current(),ue=Qe.indexOf(we.close);return ue>-1&&K.backUp(Qe.length-ue),ke}else{for(var ie=1/0,D=K.string,ne=0;ne<M;++ne){var oe=B[ne],ue=P(D,oe.open,K.pos);if(ue==K.pos)return K.match(oe.open),Y.innerActive=oe,Y.inner=CodeMirror.startState(oe.mode,g.indent?g.indent(Y.outer,""):0),oe.delimStyle;ue!=-1&&ue<ie&&(ie=ue)}ie!=1/0&&(K.string=D.slice(0,ie));var pe=g.token(K,Y.outer);return ie!=1/0&&(K.string=D),pe}},indent:function(K,Y){var ie=K.innerActive?K.innerActive.mode:g;return ie.indent?ie.indent(K.innerActive?K.inner:K.outer,Y):CodeMirror.Pass},blankLine:function(K){var Y=K.innerActive?K.innerActive.mode:g;if(Y.blankLine&&Y.blankLine(K.innerActive?K.inner:K.outer),K.innerActive)Y.close===`
`&&(K.innerActive=K.inner=null);else for(var ie=0;ie<M;++ie){var D=B[ie];D.open===`
`&&(K.innerActive=D,K.inner=CodeMirror.startState(D.mode,Y.indent?Y.indent(K.outer,""):0))}},electricChars:g.electricChars,innerMode:function(K){return K.inner?{state:K.inner,mode:K.innerActive.mode}:{state:K.outer,mode:g}}}};(function(){CodeMirror.defaults.closeTagEnabled=!0,CodeMirror.defaults.closeTagIndent=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"],CodeMirror.defaults.closeTagVoid=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function g(ie,D){var ne=CodeMirror.innerMode(ie.getMode(),D);if(ne.mode.name=="xml")return ne.state}CodeMirror.defineExtension("closeTag",function(ie,D,ne,oe){if(!ie.getOption("closeTagEnabled"))throw CodeMirror.Pass;var ue=ie.getCursor(),pe=ie.getTokenAt(ue),we=g(ie,pe.state);if(we){if(D==">"){var ke=we.type;if(pe.className=="tag"&&ke=="closeTag"||(ie.replaceSelection(">"),ue={line:ue.line,ch:ue.ch+1},ie.setCursor(ue),pe=ie.getTokenAt(ie.getCursor()),we=g(ie,pe.state),!we))throw CodeMirror.Pass;var ke=we.type;if(pe.className=="tag"&&ke!="selfcloseTag"){var Qe=we.tagName;Qe.length>0&&P(ie,oe,Qe)&&B(ie,ne,ue,Qe);return}ie.setSelection({line:ue.line,ch:ue.ch-1},ue),ie.replaceSelection("")}else if(D=="/"&&pe.className=="tag"&&pe.string=="<"){var Ue=we.context,Qe=Ue?Ue.tagName:"";if(Qe.length>0){Y(ie,ue,Qe);return}}}throw CodeMirror.Pass});function B(ie,D,ne,oe){M(ie,D,oe)?(ie.replaceSelection(`

</`+oe+">","end"),ie.indentLine(ne.line+1),ie.indentLine(ne.line+2),ie.setCursor({line:ne.line+1,ch:ie.getLine(ne.line+1).length})):(ie.replaceSelection("</"+oe+">"),ie.setCursor(ne))}function M(ie,D,ne){return(typeof D>"u"||D==null||D==!0)&&(D=ie.getOption("closeTagIndent")),D||(D=[]),K(D,ne.toLowerCase())!=-1}function P(ie,D,ne){return ie.getOption("mode")=="xml"?!0:((typeof D>"u"||D==null)&&(D=ie.getOption("closeTagVoid")),D||(D=[]),K(D,ne.toLowerCase())==-1)}function K(ie,D){if(ie.indexOf)return ie.indexOf(D);for(var ne=0,oe=ie.length;ne<oe;++ne)if(ie[ne]==D)return ne;return-1}function Y(ie,D,ne){ie.replaceSelection("/"+ne+">"),ie.setCursor({line:D.line,ch:D.ch+ne.length+2})}})();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(g,B){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var K in P)Object.prototype.hasOwnProperty.call(P,K)&&(M[K]=P[K])},extendStatics(g,B)};function __extends(g,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");extendStatics(g,B);function M(){this.constructor=g}g.prototype=B===null?Object.create(B):(M.prototype=B.prototype,new M)}var __assign=function(){return __assign=Object.assign||function(B){for(var M,P=1,K=arguments.length;P<K;P++){M=arguments[P];for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(B[Y]=M[Y])}return B},__assign.apply(this,arguments)};function __awaiter(g,B,M,P){function K(Y){return Y instanceof M?Y:new M(function(ie){ie(Y)})}return new(M||(M=Promise))(function(Y,ie){function D(ue){try{oe(P.next(ue))}catch(pe){ie(pe)}}function ne(ue){try{oe(P.throw(ue))}catch(pe){ie(pe)}}function oe(ue){ue.done?Y(ue.value):K(ue.value).then(D,ne)}oe((P=P.apply(g,[])).next())})}function __generator(g,B){var M={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},P,K,Y,ie;return ie={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(ie[Symbol.iterator]=function(){return this}),ie;function D(oe){return function(ue){return ne([oe,ue])}}function ne(oe){if(P)throw new TypeError("Generator is already executing.");for(;M;)try{if(P=1,K&&(Y=oe[0]&2?K.return:oe[0]?K.throw||((Y=K.return)&&Y.call(K),0):K.next)&&!(Y=Y.call(K,oe[1])).done)return Y;switch(K=0,Y&&(oe=[oe[0]&2,Y.value]),oe[0]){case 0:case 1:Y=oe;break;case 4:return M.label++,{value:oe[1],done:!1};case 5:M.label++,K=oe[1],oe=[0];continue;case 7:oe=M.ops.pop(),M.trys.pop();continue;default:if(Y=M.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(oe[0]===6||oe[0]===2)){M=0;continue}if(oe[0]===3&&(!Y||oe[1]>Y[0]&&oe[1]<Y[3])){M.label=oe[1];break}if(oe[0]===6&&M.label<Y[1]){M.label=Y[1],Y=oe;break}if(Y&&M.label<Y[2]){M.label=Y[2],M.ops.push(oe);break}Y[2]&&M.ops.pop(),M.trys.pop();continue}oe=B.call(g,M)}catch(ue){oe=[6,ue],K=0}finally{P=Y=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}function __spreadArray(g,B,M){if(arguments.length===2)for(var P=0,K=B.length,Y;P<K;P++)(Y||!(P in B))&&(Y||(Y=Array.prototype.slice.call(B,0,P)),Y[P]=B[P]);return g.concat(Y||B)}var Bounds=function(){function g(B,M,P,K){this.left=B,this.top=M,this.width=P,this.height=K}return g.prototype.add=function(B,M,P,K){return new g(this.left+B,this.top+M,this.width+P,this.height+K)},g.fromClientRect=function(B,M){return new g(M.left+B.windowBounds.left,M.top+B.windowBounds.top,M.width,M.height)},g.fromDOMRectList=function(B,M){var P=Array.from(M).find(function(K){return K.width!==0});return P?new g(P.left+B.windowBounds.left,P.top+B.windowBounds.top,P.width,P.height):g.EMPTY},g.EMPTY=new g(0,0,0,0),g}(),parseBounds=function(g,B){return Bounds.fromClientRect(g,B.getBoundingClientRect())},parseDocumentSize=function(g){var B=g.body,M=g.documentElement;if(!B||!M)throw new Error("Unable to get document size");var P=Math.max(Math.max(B.scrollWidth,M.scrollWidth),Math.max(B.offsetWidth,M.offsetWidth),Math.max(B.clientWidth,M.clientWidth)),K=Math.max(Math.max(B.scrollHeight,M.scrollHeight),Math.max(B.offsetHeight,M.offsetHeight),Math.max(B.clientHeight,M.clientHeight));return new Bounds(0,0,P,K)},toCodePoints$1=function(g){for(var B=[],M=0,P=g.length;M<P;){var K=g.charCodeAt(M++);if(K>=55296&&K<=56319&&M<P){var Y=g.charCodeAt(M++);(Y&64512)===56320?B.push(((K&1023)<<10)+(Y&1023)+65536):(B.push(K),M--)}else B.push(K)}return B},fromCodePoint$1=function(){for(var g=[],B=0;B<arguments.length;B++)g[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,g);var M=g.length;if(!M)return"";for(var P=[],K=-1,Y="";++K<M;){var ie=g[K];ie<=65535?P.push(ie):(ie-=65536,P.push((ie>>10)+55296,ie%1024+56320)),(K+1===M||P.length>16384)&&(Y+=String.fromCharCode.apply(String,P),P.length=0)}return Y},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(g){var B=g.length*.75,M=g.length,P,K=0,Y,ie,D,ne;g[g.length-1]==="="&&(B--,g[g.length-2]==="="&&B--);var oe=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),ue=Array.isArray(oe)?oe:new Uint8Array(oe);for(P=0;P<M;P+=4)Y=lookup$1$1[g.charCodeAt(P)],ie=lookup$1$1[g.charCodeAt(P+1)],D=lookup$1$1[g.charCodeAt(P+2)],ne=lookup$1$1[g.charCodeAt(P+3)],ue[K++]=Y<<2|ie>>4,ue[K++]=(ie&15)<<4|D>>2,ue[K++]=(D&3)<<6|ne&63;return oe},polyUint16Array$1=function(g){for(var B=g.length,M=[],P=0;P<B;P+=2)M.push(g[P+1]<<8|g[P]);return M},polyUint32Array$1=function(g){for(var B=g.length,M=[],P=0;P<B;P+=4)M.push(g[P+3]<<24|g[P+2]<<16|g[P+1]<<8|g[P]);return M},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(g,B,M){return g.slice?g.slice(B,M):new Uint16Array(Array.prototype.slice.call(g,B,M))},slice32$1=function(g,B,M){return g.slice?g.slice(B,M):new Uint32Array(Array.prototype.slice.call(g,B,M))},createTrieFromBase64$1=function(g,B){var M=decode$1(g),P=Array.isArray(M)?polyUint32Array$1(M):new Uint32Array(M),K=Array.isArray(M)?polyUint16Array$1(M):new Uint16Array(M),Y=24,ie=slice16$1(K,Y/2,P[4]/2),D=P[5]===2?slice16$1(K,(Y+P[4])/2):slice32$1(P,Math.ceil((Y+P[4])/4));return new Trie$1(P[0],P[1],P[2],P[3],ie,D)},Trie$1=function(){function g(B,M,P,K,Y,ie){this.initialValue=B,this.errorValue=M,this.highStart=P,this.highValueIndex=K,this.index=Y,this.data=ie}return g.prototype.get=function(B){var M;if(B>=0){if(B<55296||B>56319&&B<=65535)return M=this.index[B>>UTRIE2_SHIFT_2$1],M=(M<<UTRIE2_INDEX_SHIFT$1)+(B&UTRIE2_DATA_MASK$1),this.data[M];if(B<=65535)return M=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(B-55296>>UTRIE2_SHIFT_2$1)],M=(M<<UTRIE2_INDEX_SHIFT$1)+(B&UTRIE2_DATA_MASK$1),this.data[M];if(B<this.highStart)return M=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(B>>UTRIE2_SHIFT_1$1),M=this.index[M],M+=B>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,M=this.index[M],M=(M<<UTRIE2_INDEX_SHIFT$1)+(B&UTRIE2_DATA_MASK$1),this.data[M];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},g}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="Ã",BREAK_ALLOWED$1="Ã·",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(g,B){B===void 0&&(B="strict");var M=[],P=[],K=[];return g.forEach(function(Y,ie){var D=UnicodeTrie$1.get(Y);if(D>LETTER_NUMBER_MODIFIER?(K.push(!0),D-=LETTER_NUMBER_MODIFIER):K.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf(Y)!==-1)return P.push(ie),M.push(CB);if(D===CM||D===ZWJ$1){if(ie===0)return P.push(ie),M.push(AL);var ne=M[ie-1];return LINE_BREAKS.indexOf(ne)===-1?(P.push(P[ie-1]),M.push(ne)):(P.push(ie),M.push(AL))}if(P.push(ie),D===CJ)return M.push(B==="strict"?NS:ID);if(D===SA||D===AI)return M.push(AL);if(D===XX)return Y>=131072&&Y<=196605||Y>=196608&&Y<=262141?M.push(ID):M.push(AL);M.push(D)}),[P,M,K]},isAdjacentWithSpaceIgnored=function(g,B,M,P){var K=P[M];if(Array.isArray(g)?g.indexOf(K)!==-1:g===K)for(var Y=M;Y<=P.length;){Y++;var ie=P[Y];if(ie===B)return!0;if(ie!==SP)break}if(K===SP)for(var Y=M;Y>0;){Y--;var D=P[Y];if(Array.isArray(g)?g.indexOf(D)!==-1:g===D)for(var ne=M;ne<=P.length;){ne++;var ie=P[ne];if(ie===B)return!0;if(ie!==SP)break}if(D!==SP)break}return!1},previousNonSpaceClassType=function(g,B){for(var M=g;M>=0;){var P=B[M];if(P===SP)M--;else return P}return 0},_lineBreakAtIndex=function(g,B,M,P,K){if(M[P]===0)return BREAK_NOT_ALLOWED$1;var Y=P-1;if(Array.isArray(K)&&K[Y]===!0)return BREAK_NOT_ALLOWED$1;var ie=Y-1,D=Y+1,ne=B[Y],oe=ie>=0?B[ie]:0,ue=B[D];if(ne===CR$1&&ue===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(ne)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(ue)!==-1||SPACE$1.indexOf(ue)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(Y,B)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(g[Y])===ZWJ$1||(ne===EB||ne===EM)&&UnicodeTrie$1.get(g[D])===ZWJ$1||ne===WJ||ue===WJ||ne===GL||[SP,BA,HY].indexOf(ne)===-1&&ue===GL||[CL,CP,EX,IS,SY].indexOf(ue)!==-1||previousNonSpaceClassType(Y,B)===OP||isAdjacentWithSpaceIgnored(QU,OP,Y,B)||isAdjacentWithSpaceIgnored([CL,CP],NS,Y,B)||isAdjacentWithSpaceIgnored(B2,B2,Y,B))return BREAK_NOT_ALLOWED$1;if(ne===SP)return BREAK_ALLOWED$1;if(ne===QU||ue===QU)return BREAK_NOT_ALLOWED$1;if(ue===CB||ne===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(ue)!==-1||ne===BB||oe===HL&&HYPHEN.indexOf(ne)!==-1||ne===SY&&ue===HL||ue===IN||ALPHABETICS.indexOf(ue)!==-1&&ne===NU||ALPHABETICS.indexOf(ne)!==-1&&ue===NU||ne===PR&&[ID,EB,EM].indexOf(ue)!==-1||[ID,EB,EM].indexOf(ne)!==-1&&ue===PO||ALPHABETICS.indexOf(ne)!==-1&&PREFIX_POSTFIX.indexOf(ue)!==-1||PREFIX_POSTFIX.indexOf(ne)!==-1&&ALPHABETICS.indexOf(ue)!==-1||[PR,PO].indexOf(ne)!==-1&&(ue===NU||[OP,HY].indexOf(ue)!==-1&&B[D+1]===NU)||[OP,HY].indexOf(ne)!==-1&&ue===NU||ne===NU&&[NU,SY,IS].indexOf(ue)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(ue)!==-1)for(var pe=Y;pe>=0;){var we=B[pe];if(we===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(we)!==-1)pe--;else break}if([PR,PO].indexOf(ue)!==-1)for(var pe=[CL,CP].indexOf(ne)!==-1?ie:Y;pe>=0;){var we=B[pe];if(we===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(we)!==-1)pe--;else break}if(JL===ne&&[JL,JV,H2,H3].indexOf(ue)!==-1||[JV,H2].indexOf(ne)!==-1&&[JV,JT].indexOf(ue)!==-1||[JT,H3].indexOf(ne)!==-1&&ue===JT||KOREAN_SYLLABLE_BLOCK.indexOf(ne)!==-1&&[IN,PO].indexOf(ue)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(ue)!==-1&&ne===PR||ALPHABETICS.indexOf(ne)!==-1&&ALPHABETICS.indexOf(ue)!==-1||ne===IS&&ALPHABETICS.indexOf(ue)!==-1||ALPHABETICS.concat(NU).indexOf(ne)!==-1&&ue===OP&&ea_OP.indexOf(g[D])===-1||ALPHABETICS.concat(NU).indexOf(ue)!==-1&&ne===CP)return BREAK_NOT_ALLOWED$1;if(ne===RI$1&&ue===RI$1){for(var ke=M[Y],Qe=1;ke>0&&(ke--,B[ke]===RI$1);)Qe++;if(Qe%2!==0)return BREAK_NOT_ALLOWED$1}return ne===EB&&ue===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(g,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var M=codePointsToCharacterClasses(g,B.lineBreak),P=M[0],K=M[1],Y=M[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(K=K.map(function(D){return[NU,AL,SA].indexOf(D)!==-1?ID:D}));var ie=B.wordBreak==="keep-all"?Y.map(function(D,ne){return D&&g[ne]>=19968&&g[ne]<=40959}):void 0;return[P,K,ie]},Break=function(){function g(B,M,P,K){this.codePoints=B,this.required=M===BREAK_MANDATORY,this.start=P,this.end=K}return g.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},g}(),LineBreaker=function(g,B){var M=toCodePoints$1(g),P=cssFormattedClasses(M,B),K=P[0],Y=P[1],ie=P[2],D=M.length,ne=0,oe=0;return{next:function(){if(oe>=D)return{done:!0,value:null};for(var ue=BREAK_NOT_ALLOWED$1;oe<D&&(ue=_lineBreakAtIndex(M,Y,K,++oe,ie))===BREAK_NOT_ALLOWED$1;);if(ue!==BREAK_NOT_ALLOWED$1||oe===D){var pe=new Break(M,ue,ne,oe);return ne=oe,{value:pe,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a$1=97,e$1=101,f$1=102,u$1=117,z=122,A=65,E=69,F=70,U=85,Z=90,isDigit=function(g){return g>=ZERO&&g<=57},isSurrogateCodePoint=function(g){return g>=55296&&g<=57343},isHex=function(g){return isDigit(g)||g>=A&&g<=F||g>=a$1&&g<=f$1},isLowerCaseLetter=function(g){return g>=a$1&&g<=z},isUpperCaseLetter=function(g){return g>=A&&g<=Z},isLetter=function(g){return isLowerCaseLetter(g)||isUpperCaseLetter(g)},isNonASCIICodePoint=function(g){return g>=CONTROL},isWhiteSpace=function(g){return g===LINE_FEED||g===CHARACTER_TABULATION||g===SPACE},isNameStartCodePoint=function(g){return isLetter(g)||isNonASCIICodePoint(g)||g===LOW_LINE},isNameCodePoint=function(g){return isNameStartCodePoint(g)||isDigit(g)||g===HYPHEN_MINUS},isNonPrintableCodePoint=function(g){return g>=NULL&&g<=BACKSPACE||g===LINE_TABULATION||g>=SHIFT_OUT&&g<=INFORMATION_SEPARATOR_ONE||g===DELETE},isValidEscape=function(g,B){return g!==REVERSE_SOLIDUS?!1:B!==LINE_FEED},isIdentifierStart=function(g,B,M){return g===HYPHEN_MINUS?isNameStartCodePoint(B)||isValidEscape(B,M):isNameStartCodePoint(g)?!0:!!(g===REVERSE_SOLIDUS&&isValidEscape(g,B))},isNumberStart=function(g,B,M){return g===PLUS_SIGN||g===HYPHEN_MINUS?isDigit(B)?!0:B===FULL_STOP&&isDigit(M):isDigit(g===FULL_STOP?B:g)},stringToNumber=function(g){var B=0,M=1;(g[B]===PLUS_SIGN||g[B]===HYPHEN_MINUS)&&(g[B]===HYPHEN_MINUS&&(M=-1),B++);for(var P=[];isDigit(g[B]);)P.push(g[B++]);var K=P.length?parseInt(fromCodePoint$1.apply(void 0,P),10):0;g[B]===FULL_STOP&&B++;for(var Y=[];isDigit(g[B]);)Y.push(g[B++]);var ie=Y.length,D=ie?parseInt(fromCodePoint$1.apply(void 0,Y),10):0;(g[B]===E||g[B]===e$1)&&B++;var ne=1;(g[B]===PLUS_SIGN||g[B]===HYPHEN_MINUS)&&(g[B]===HYPHEN_MINUS&&(ne=-1),B++);for(var oe=[];isDigit(g[B]);)oe.push(g[B++]);var ue=oe.length?parseInt(fromCodePoint$1.apply(void 0,oe),10):0;return M*(K+D*Math.pow(10,-ie))*Math.pow(10,ne*ue)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function g(){this._value=[]}return g.prototype.write=function(B){this._value=this._value.concat(toCodePoints$1(B))},g.prototype.read=function(){for(var B=[],M=this.consumeToken();M!==EOF_TOKEN;)B.push(M),M=this.consumeToken();return B},g.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var M=this.peekCodePoint(0),P=this.peekCodePoint(1),K=this.peekCodePoint(2);if(isNameCodePoint(M)||isValidEscape(P,K)){var Y=isIdentifierStart(M,P,K)?FLAG_ID:FLAG_UNRESTRICTED,ie=this.consumeName();return{type:5,value:ie,flags:Y}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var D=B,ne=this.peekCodePoint(0),oe=this.peekCodePoint(1);if(isNumberStart(D,ne,oe))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(isIdentifierStart(D,ne,oe))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(ne===HYPHEN_MINUS&&oe===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var ue=this.consumeCodePoint();if(ue===ASTERISK&&(ue=this.consumeCodePoint(),ue===SOLIDUS))return this.consumeToken();if(ue===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var pe=this.peekCodePoint(0),we=this.peekCodePoint(1),ke=this.peekCodePoint(2);if(isIdentifierStart(pe,we,ke)){var ie=this.consumeName();return{type:7,value:ie}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u$1:case U:var Qe=this.peekCodePoint(0),Ue=this.peekCodePoint(1);return Qe===PLUS_SIGN&&(isHex(Ue)||Ue===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(B)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):isNameStartCodePoint(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(B)}},g.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},g.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},g.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},g.prototype.consumeUnicodeRangeToken=function(){for(var B=[],M=this.consumeCodePoint();isHex(M)&&B.length<6;)B.push(M),M=this.consumeCodePoint();for(var P=!1;M===QUESTION_MARK&&B.length<6;)B.push(M),M=this.consumeCodePoint(),P=!0;if(P){var K=parseInt(fromCodePoint$1.apply(void 0,B.map(function(ne){return ne===QUESTION_MARK?ZERO:ne})),16),Y=parseInt(fromCodePoint$1.apply(void 0,B.map(function(ne){return ne===QUESTION_MARK?F:ne})),16);return{type:30,start:K,end:Y}}var ie=parseInt(fromCodePoint$1.apply(void 0,B),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),M=this.consumeCodePoint();for(var D=[];isHex(M)&&D.length<6;)D.push(M),M=this.consumeCodePoint();var Y=parseInt(fromCodePoint$1.apply(void 0,D),16);return{type:30,start:ie,end:Y}}else return{type:30,start:ie,end:ie}},g.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},g.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var M=this.peekCodePoint(0);if(M===APOSTROPHE||M===QUOTATION_MARK){var P=this.consumeStringToken(this.consumeCodePoint());return P.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:P.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var K=this.consumeCodePoint();if(K===EOF||K===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,B)};if(isWhiteSpace(K))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,B)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(K===QUOTATION_MARK||K===APOSTROPHE||K===LEFT_PARENTHESIS||isNonPrintableCodePoint(K))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(K===REVERSE_SOLIDUS)if(isValidEscape(K,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else B.push(K)}},g.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},g.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===RIGHT_PARENTHESIS||B===EOF)return;isValidEscape(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},g.prototype.consumeStringSlice=function(B){for(var M=5e4,P="";B>0;){var K=Math.min(M,B);P+=fromCodePoint$1.apply(void 0,this._value.splice(0,K)),B-=K}return this._value.shift(),P},g.prototype.consumeStringToken=function(B){var M="",P=0;do{var K=this._value[P];if(K===EOF||K===void 0||K===B)return M+=this.consumeStringSlice(P),{type:0,value:M};if(K===LINE_FEED)return this._value.splice(0,P),BAD_STRING_TOKEN;if(K===REVERSE_SOLIDUS){var Y=this._value[P+1];Y!==EOF&&Y!==void 0&&(Y===LINE_FEED?(M+=this.consumeStringSlice(P),P=-1,this._value.shift()):isValidEscape(K,Y)&&(M+=this.consumeStringSlice(P),M+=fromCodePoint$1(this.consumeEscapedCodePoint()),P=-1))}P++}while(!0)},g.prototype.consumeNumber=function(){var B=[],M=FLAG_INTEGER,P=this.peekCodePoint(0);for((P===PLUS_SIGN||P===HYPHEN_MINUS)&&B.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)B.push(this.consumeCodePoint());P=this.peekCodePoint(0);var K=this.peekCodePoint(1);if(P===FULL_STOP&&isDigit(K))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),M=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)B.push(this.consumeCodePoint());P=this.peekCodePoint(0),K=this.peekCodePoint(1);var Y=this.peekCodePoint(2);if((P===E||P===e$1)&&((K===PLUS_SIGN||K===HYPHEN_MINUS)&&isDigit(Y)||isDigit(K)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),M=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[stringToNumber(B),M]},g.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),M=B[0],P=B[1],K=this.peekCodePoint(0),Y=this.peekCodePoint(1),ie=this.peekCodePoint(2);if(isIdentifierStart(K,Y,ie)){var D=this.consumeName();return{type:15,number:M,flags:P,unit:D}}return K===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:M,flags:P}):{type:17,number:M,flags:P}},g.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(isHex(B)){for(var M=fromCodePoint$1(B);isHex(this.peekCodePoint(0))&&M.length<6;)M+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var P=parseInt(M,16);return P===0||isSurrogateCodePoint(P)||P>1114111?REPLACEMENT_CHARACTER:P}return B===EOF?REPLACEMENT_CHARACTER:B},g.prototype.consumeName=function(){for(var B="";;){var M=this.consumeCodePoint();if(isNameCodePoint(M))B+=fromCodePoint$1(M);else if(isValidEscape(M,this.peekCodePoint(0)))B+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(M),B}},g}(),Parser$1=function(){function g(B){this._tokens=B}return g.create=function(B){var M=new Tokenizer;return M.write(B),new g(M.read())},g.parseValue=function(B){return g.create(B).parseComponentValue()},g.parseValues=function(B){return g.create(B).parseComponentValues()},g.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var M=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return M;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},g.prototype.parseComponentValues=function(){for(var B=[];;){var M=this.consumeComponentValue();if(M.type===32)return B;B.push(M),B.push()}},g.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},g.prototype.consumeSimpleBlock=function(B){for(var M={type:B,values:[]},P=this.consumeToken();;){if(P.type===32||isEndingTokenFor(P,B))return M;this.reconsumeToken(P),M.values.push(this.consumeComponentValue()),P=this.consumeToken()}},g.prototype.consumeFunction=function(B){for(var M={name:B.value,values:[],type:18};;){var P=this.consumeToken();if(P.type===32||P.type===3)return M;this.reconsumeToken(P),M.values.push(this.consumeComponentValue())}},g.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?EOF_TOKEN:B},g.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},g}(),isDimensionToken=function(g){return g.type===15},isNumberToken=function(g){return g.type===17},isIdentToken=function(g){return g.type===20},isStringToken=function(g){return g.type===0},isIdentWithValue=function(g,B){return isIdentToken(g)&&g.value===B},nonWhiteSpace=function(g){return g.type!==31},nonFunctionArgSeparator=function(g){return g.type!==31&&g.type!==4},parseFunctionArgs=function(g){var B=[],M=[];return g.forEach(function(P){if(P.type===4){if(M.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(M),M=[];return}P.type!==31&&M.push(P)}),M.length&&B.push(M),B},isEndingTokenFor=function(g,B){return B===11&&g.type===12||B===28&&g.type===29?!0:B===2&&g.type===3},isLength=function(g){return g.type===17||g.type===15},isLengthPercentage=function(g){return g.type===16||isLength(g)},parseLengthPercentageTuple=function(g){return g.length>1?[g[0],g[1]]:[g[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(g,B,M){var P=g[0],K=g[1];return[getAbsoluteValue(P,B),getAbsoluteValue(typeof K<"u"?K:P,M)]},getAbsoluteValue=function(g,B){if(g.type===16)return g.number/100*B;if(isDimensionToken(g))switch(g.unit){case"rem":case"em":return 16*g.number;case"px":default:return g.number}return g.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(g,B){if(B.type===15)switch(B.unit){case DEG:return Math.PI*B.number/180;case GRAD:return Math.PI/200*B.number;case RAD:return B.number;case TURN:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},isAngle=function(g){return g.type===15&&(g.unit===DEG||g.unit===GRAD||g.unit===RAD||g.unit===TURN)},parseNamedSide=function(g){var B=g.filter(isIdentToken).map(function(M){return M.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(g){return Math.PI*g/180},color$1={name:"color",parse:function(g,B){if(B.type===18){var M=SUPPORTED_COLOR_FUNCTIONS[B.name];if(typeof M>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return M(g,B.values)}if(B.type===5){if(B.value.length===3){var P=B.value.substring(0,1),K=B.value.substring(1,2),Y=B.value.substring(2,3);return pack(parseInt(P+P,16),parseInt(K+K,16),parseInt(Y+Y,16),1)}if(B.value.length===4){var P=B.value.substring(0,1),K=B.value.substring(1,2),Y=B.value.substring(2,3),ie=B.value.substring(3,4);return pack(parseInt(P+P,16),parseInt(K+K,16),parseInt(Y+Y,16),parseInt(ie+ie,16)/255)}if(B.value.length===6){var P=B.value.substring(0,2),K=B.value.substring(2,4),Y=B.value.substring(4,6);return pack(parseInt(P,16),parseInt(K,16),parseInt(Y,16),1)}if(B.value.length===8){var P=B.value.substring(0,2),K=B.value.substring(2,4),Y=B.value.substring(4,6),ie=B.value.substring(6,8);return pack(parseInt(P,16),parseInt(K,16),parseInt(Y,16),parseInt(ie,16)/255)}}if(B.type===20){var D=COLORS[B.value.toUpperCase()];if(typeof D<"u")return D}return COLORS.TRANSPARENT}},isTransparent=function(g){return(255&g)===0},asString=function(g){var B=255&g,M=255&g>>8,P=255&g>>16,K=255&g>>24;return B<255?"rgba("+K+","+P+","+M+","+B/255+")":"rgb("+K+","+P+","+M+")"},pack=function(g,B,M,P){return(g<<24|B<<16|M<<8|Math.round(P*255)<<0)>>>0},getTokenColorValue=function(g,B){if(g.type===17)return g.number;if(g.type===16){var M=B===3?1:255;return B===3?g.number/100*M:Math.round(g.number/100*M)}return 0},rgb=function(g,B){var M=B.filter(nonFunctionArgSeparator);if(M.length===3){var P=M.map(getTokenColorValue),K=P[0],Y=P[1],ie=P[2];return pack(K,Y,ie,1)}if(M.length===4){var D=M.map(getTokenColorValue),K=D[0],Y=D[1],ie=D[2],ne=D[3];return pack(K,Y,ie,ne)}return 0};function hue2rgb(g,B,M){return M<0&&(M+=1),M>=1&&(M-=1),M<1/6?(B-g)*M*6+g:M<1/2?B:M<2/3?(B-g)*6*(2/3-M)+g:g}var hsl=function(g,B){var M=B.filter(nonFunctionArgSeparator),P=M[0],K=M[1],Y=M[2],ie=M[3],D=(P.type===17?deg(P.number):angle.parse(g,P))/(Math.PI*2),ne=isLengthPercentage(K)?K.number/100:0,oe=isLengthPercentage(Y)?Y.number/100:0,ue=typeof ie<"u"&&isLengthPercentage(ie)?getAbsoluteValue(ie,1):1;if(ne===0)return pack(oe*255,oe*255,oe*255,1);var pe=oe<=.5?oe*(ne+1):oe+ne-oe*ne,we=oe*2-pe,ke=hue2rgb(we,pe,D+1/3),Qe=hue2rgb(we,pe,D),Ue=hue2rgb(we,pe,D-1/3);return pack(ke*255,Qe*255,Ue*255,ue)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(g,B){return color$1.parse(g,Parser$1.create(B).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(g,B){return B.map(function(M){if(isIdentToken(M))switch(M.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(g,B){var M=color$1.parse(g,B[0]),P=B[1];return P&&isLengthPercentage(P)?{color:M,stop:P}:{color:M,stop:null}},processColorStops=function(g,B){var M=g[0],P=g[g.length-1];M.stop===null&&(M.stop=ZERO_LENGTH),P.stop===null&&(P.stop=HUNDRED_PERCENT);for(var K=[],Y=0,ie=0;ie<g.length;ie++){var D=g[ie].stop;if(D!==null){var ne=getAbsoluteValue(D,B);ne>Y?K.push(ne):K.push(Y),Y=ne}else K.push(null)}for(var oe=null,ie=0;ie<K.length;ie++){var ue=K[ie];if(ue===null)oe===null&&(oe=ie);else if(oe!==null){for(var pe=ie-oe,we=K[oe-1],ke=(ue-we)/(pe+1),Qe=1;Qe<=pe;Qe++)K[oe+Qe-1]=ke*Qe;oe=null}}return g.map(function(Ue,We){var Ne=Ue.color;return{color:Ne,stop:Math.max(Math.min(1,K[We]/B),0)}})},getAngleFromCorner=function(g,B,M){var P=B/2,K=M/2,Y=getAbsoluteValue(g[0],B)-P,ie=K-getAbsoluteValue(g[1],M);return(Math.atan2(ie,Y)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(g,B,M){var P=typeof g=="number"?g:getAngleFromCorner(g,B,M),K=Math.abs(B*Math.sin(P))+Math.abs(M*Math.cos(P)),Y=B/2,ie=M/2,D=K/2,ne=Math.sin(P-Math.PI/2)*D,oe=Math.cos(P-Math.PI/2)*D;return[K,Y-oe,Y+oe,ie-ne,ie+ne]},distance=function(g,B){return Math.sqrt(g*g+B*B)},findCorner=function(g,B,M,P,K){var Y=[[0,0],[0,B],[g,0],[g,B]];return Y.reduce(function(ie,D){var ne=D[0],oe=D[1],ue=distance(M-ne,P-oe);return(K?ue<ie.optimumDistance:ue>ie.optimumDistance)?{optimumCorner:D,optimumDistance:ue}:ie},{optimumDistance:K?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(g,B,M,P,K){var Y=0,ie=0;switch(g.size){case 0:g.shape===0?Y=ie=Math.min(Math.abs(B),Math.abs(B-P),Math.abs(M),Math.abs(M-K)):g.shape===1&&(Y=Math.min(Math.abs(B),Math.abs(B-P)),ie=Math.min(Math.abs(M),Math.abs(M-K)));break;case 2:if(g.shape===0)Y=ie=Math.min(distance(B,M),distance(B,M-K),distance(B-P,M),distance(B-P,M-K));else if(g.shape===1){var D=Math.min(Math.abs(M),Math.abs(M-K))/Math.min(Math.abs(B),Math.abs(B-P)),ne=findCorner(P,K,B,M,!0),oe=ne[0],ue=ne[1];Y=distance(oe-B,(ue-M)/D),ie=D*Y}break;case 1:g.shape===0?Y=ie=Math.max(Math.abs(B),Math.abs(B-P),Math.abs(M),Math.abs(M-K)):g.shape===1&&(Y=Math.max(Math.abs(B),Math.abs(B-P)),ie=Math.max(Math.abs(M),Math.abs(M-K)));break;case 3:if(g.shape===0)Y=ie=Math.max(distance(B,M),distance(B,M-K),distance(B-P,M),distance(B-P,M-K));else if(g.shape===1){var D=Math.max(Math.abs(M),Math.abs(M-K))/Math.max(Math.abs(B),Math.abs(B-P)),pe=findCorner(P,K,B,M,!1),oe=pe[0],ue=pe[1];Y=distance(oe-B,(ue-M)/D),ie=D*Y}break}return Array.isArray(g.size)&&(Y=getAbsoluteValue(g.size[0],P),ie=g.size.length===2?getAbsoluteValue(g.size[1],K):Y),[Y,ie]},linearGradient=function(g,B){var M=deg(180),P=[];return parseFunctionArgs(B).forEach(function(K,Y){if(Y===0){var ie=K[0];if(ie.type===20&&ie.value==="to"){M=parseNamedSide(K);return}else if(isAngle(ie)){M=angle.parse(g,ie);return}}var D=parseColorStop(g,K);P.push(D)}),{angle:M,stops:P,type:1}},prefixLinearGradient=function(g,B){var M=deg(180),P=[];return parseFunctionArgs(B).forEach(function(K,Y){if(Y===0){var ie=K[0];if(ie.type===20&&["top","left","right","bottom"].indexOf(ie.value)!==-1){M=parseNamedSide(K);return}else if(isAngle(ie)){M=(angle.parse(g,ie)+deg(270))%deg(360);return}}var D=parseColorStop(g,K);P.push(D)}),{angle:M,stops:P,type:1}},webkitGradient=function(g,B){var M=deg(180),P=[],K=1,Y=0,ie=3,D=[];return parseFunctionArgs(B).forEach(function(ne,oe){var ue=ne[0];if(oe===0){if(isIdentToken(ue)&&ue.value==="linear"){K=1;return}else if(isIdentToken(ue)&&ue.value==="radial"){K=2;return}}if(ue.type===18){if(ue.name==="from"){var pe=color$1.parse(g,ue.values[0]);P.push({stop:ZERO_LENGTH,color:pe})}else if(ue.name==="to"){var pe=color$1.parse(g,ue.values[0]);P.push({stop:HUNDRED_PERCENT,color:pe})}else if(ue.name==="color-stop"){var we=ue.values.filter(nonFunctionArgSeparator);if(we.length===2){var pe=color$1.parse(g,we[1]),ke=we[0];isNumberToken(ke)&&P.push({stop:{type:16,number:ke.number*100,flags:ke.flags},color:pe})}}}}),K===1?{angle:(M+deg(180))%deg(360),stops:P,type:K}:{size:ie,shape:Y,stops:P,position:D,type:K}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(g,B){var M=0,P=3,K=[],Y=[];return parseFunctionArgs(B).forEach(function(ie,D){var ne=!0;if(D===0){var oe=!1;ne=ie.reduce(function(pe,we){if(oe)if(isIdentToken(we))switch(we.value){case"center":return Y.push(FIFTY_PERCENT),pe;case"top":case"left":return Y.push(ZERO_LENGTH),pe;case"right":case"bottom":return Y.push(HUNDRED_PERCENT),pe}else(isLengthPercentage(we)||isLength(we))&&Y.push(we);else if(isIdentToken(we))switch(we.value){case CIRCLE:return M=0,!1;case ELLIPSE:return M=1,!1;case"at":return oe=!0,!1;case CLOSEST_SIDE:return P=0,!1;case COVER:case FARTHEST_SIDE:return P=1,!1;case CONTAIN:case CLOSEST_CORNER:return P=2,!1;case FARTHEST_CORNER:return P=3,!1}else if(isLength(we)||isLengthPercentage(we))return Array.isArray(P)||(P=[]),P.push(we),!1;return pe},ne)}if(ne){var ue=parseColorStop(g,ie);K.push(ue)}}),{size:P,shape:M,stops:K,position:Y,type:2}},prefixRadialGradient=function(g,B){var M=0,P=3,K=[],Y=[];return parseFunctionArgs(B).forEach(function(ie,D){var ne=!0;if(D===0?ne=ie.reduce(function(ue,pe){if(isIdentToken(pe))switch(pe.value){case"center":return Y.push(FIFTY_PERCENT),!1;case"top":case"left":return Y.push(ZERO_LENGTH),!1;case"right":case"bottom":return Y.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(pe)||isLength(pe))return Y.push(pe),!1;return ue},ne):D===1&&(ne=ie.reduce(function(ue,pe){if(isIdentToken(pe))switch(pe.value){case CIRCLE:return M=0,!1;case ELLIPSE:return M=1,!1;case CONTAIN:case CLOSEST_SIDE:return P=0,!1;case FARTHEST_SIDE:return P=1,!1;case CLOSEST_CORNER:return P=2,!1;case COVER:case FARTHEST_CORNER:return P=3,!1}else if(isLength(pe)||isLengthPercentage(pe))return Array.isArray(P)||(P=[]),P.push(pe),!1;return ue},ne)),ne){var oe=parseColorStop(g,ie);K.push(oe)}}),{size:P,shape:M,stops:K,position:Y,type:2}},isLinearGradient=function(g){return g.type===1},isRadialGradient=function(g){return g.type===2},image={name:"image",parse:function(g,B){if(B.type===22){var M={url:B.value,type:0};return g.cache.addImage(B.value),M}if(B.type===18){var P=SUPPORTED_IMAGE_FUNCTIONS[B.name];if(typeof P>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return P(g,B.values)}throw new Error("Unsupported image type "+B.type)}};function isSupportedImage(g){return!(g.type===20&&g.value==="none")&&(g.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[g.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(g,B){if(B.length===0)return[];var M=B[0];return M.type===20&&M.value==="none"?[]:B.filter(function(P){return nonFunctionArgSeparator(P)&&isSupportedImage(P)}).map(function(P){return image.parse(g,P)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(g,B){return B.map(function(M){if(isIdentToken(M))switch(M.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(g,B){return parseFunctionArgs(B).map(function(M){return M.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(g,B){return parseFunctionArgs(B).map(function(M){return M.filter(isIdentToken).map(function(P){return P.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(g){switch(g){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(g){g.AUTO="auto",g.CONTAIN="contain",g.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(g,B){return parseFunctionArgs(B).map(function(M){return M.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(g){return isIdentToken(g)||isLengthPercentage(g)},borderColorForSide=function(g){return{name:"border-"+g+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(g){return{name:"border-radius-"+g,initialValue:"0 0",prefix:!1,type:1,parse:function(B,M){return parseLengthPercentageTuple(M.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(g){return{name:"border-"+g+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,M){switch(M){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(g){return{name:"border-"+g+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,M){return isDimensionToken(M)?M.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(g,B){switch(B){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(g,B){return B.filter(isIdentToken).reduce(function(M,P){return M|parseDisplayValue(P.value)},0)}},parseDisplayValue=function(g){switch(g){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(g,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},LINE_BREAK;(function(g){g.NORMAL="normal",g.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(g,B){return isIdentToken(g)&&g.value==="normal"?1.2*B:g.type===17?B*g.number:isLengthPercentage(g)?getAbsoluteValue(g,B):B},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(g,B){return B.type===20&&B.value==="none"?null:image.parse(g,B)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(g,B){switch(B){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(g){return{name:"margin-"+g,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(g,B){return B.filter(isIdentToken).map(function(M){switch(M.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(g){return{name:"padding-"+g,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(g,B){switch(B){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(g,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(g,B){return B.length===1&&isIdentWithValue(B[0],"none")?[]:parseFunctionArgs(B).map(function(M){for(var P={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},K=0,Y=0;Y<M.length;Y++){var ie=M[Y];isLength(ie)?(K===0?P.offsetX=ie:K===1?P.offsetY=ie:P.blur=ie,K++):P.color=color$1.parse(g,ie)}return P})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(g,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var M=SUPPORTED_TRANSFORM_FUNCTIONS[B.name];if(typeof M>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return M(B.values)}return null}},matrix=function(g){var B=g.filter(function(M){return M.type===17}).map(function(M){return M.number});return B.length===6?B:null},matrix3d=function(g){var B=g.filter(function(ne){return ne.type===17}).map(function(ne){return ne.number}),M=B[0],P=B[1];B[2],B[3];var K=B[4],Y=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var ie=B[12],D=B[13];return B[14],B[15],B.length===16?[M,P,K,Y,ie,D]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(g,B){var M=B.filter(isLengthPercentage);return M.length!==2?DEFAULT:[M[0],M[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(g){g.NORMAL="normal",g.BREAK_ALL="break-all",g.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(g,B){if(B.type===20)return{auto:!0,order:0};if(isNumberToken(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(g,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(g,B){return isNumberToken(B)?B.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(g,B){return B.filter(isIdentToken).map(function(M){switch(M.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(M){return M!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(g,B){var M=[],P=[];return B.forEach(function(K){switch(K.type){case 20:case 0:M.push(K.value);break;case 17:M.push(K.number.toString());break;case 4:P.push(M.join(" ")),M.length=0;break}}),M.length&&P.push(M.join(" ")),P.map(function(K){return K.indexOf(" ")===-1?K:"'"+K+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(g,B){if(isNumberToken(B))return B.number;if(isIdentToken(B))switch(B.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(g,B){return B.filter(isIdentToken).map(function(M){return M.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(g,B){return(g&B)!==0},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(g,B){if(B.length===0)return[];var M=B[0];return M.type===20&&M.value==="none"?[]:B}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(g,B){if(B.length===0)return null;var M=B[0];if(M.type===20&&M.value==="none")return null;for(var P=[],K=B.filter(nonWhiteSpace),Y=0;Y<K.length;Y++){var ie=K[Y],D=K[Y+1];if(ie.type===20){var ne=D&&isNumberToken(D)?D.number:1;P.push({counter:ie.value,increment:ne})}}return P}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(g,B){if(B.length===0)return[];for(var M=[],P=B.filter(nonWhiteSpace),K=0;K<P.length;K++){var Y=P[K],ie=P[K+1];if(isIdentToken(Y)&&Y.value!=="none"){var D=ie&&isNumberToken(ie)?ie.number:0;M.push({counter:Y.value,reset:D})}}return M}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(g,B){return B.filter(isDimensionToken).map(function(M){return time.parse(g,M)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(g,B){if(B.length===0)return null;var M=B[0];if(M.type===20&&M.value==="none")return null;var P=[],K=B.filter(isStringToken);if(K.length%2!==0)return null;for(var Y=0;Y<K.length;Y+=2){var ie=K[Y].value,D=K[Y+1].value;P.push({open:ie,close:D})}return P}},getQuote=function(g,B,M){if(!g)return"";var P=g[Math.min(B,g.length-1)];return P?M?P.open:P.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(g,B){return B.length===1&&isIdentWithValue(B[0],"none")?[]:parseFunctionArgs(B).map(function(M){for(var P={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},K=0,Y=0;Y<M.length;Y++){var ie=M[Y];isIdentWithValue(ie,"inset")?P.inset=!0:isLength(ie)?(K===0?P.offsetX=ie:K===1?P.offsetY=ie:K===2?P.blur=ie:P.spread=ie,K++):P.color=color$1.parse(g,ie)}return P})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(g,B){var M=[0,1,2],P=[];return B.filter(isIdentToken).forEach(function(K){switch(K.value){case"stroke":P.push(1);break;case"fill":P.push(0);break;case"markers":P.push(2);break}}),M.forEach(function(K){P.indexOf(K)===-1&&P.push(K)}),P}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(g,B){return isDimensionToken(B)?B.number:0}},CSSParsedDeclaration=function(){function g(B,M){var P,K;this.animationDuration=parse(B,duration,M.animationDuration),this.backgroundClip=parse(B,backgroundClip,M.backgroundClip),this.backgroundColor=parse(B,backgroundColor,M.backgroundColor),this.backgroundImage=parse(B,backgroundImage,M.backgroundImage),this.backgroundOrigin=parse(B,backgroundOrigin,M.backgroundOrigin),this.backgroundPosition=parse(B,backgroundPosition,M.backgroundPosition),this.backgroundRepeat=parse(B,backgroundRepeat,M.backgroundRepeat),this.backgroundSize=parse(B,backgroundSize,M.backgroundSize),this.borderTopColor=parse(B,borderTopColor,M.borderTopColor),this.borderRightColor=parse(B,borderRightColor,M.borderRightColor),this.borderBottomColor=parse(B,borderBottomColor,M.borderBottomColor),this.borderLeftColor=parse(B,borderLeftColor,M.borderLeftColor),this.borderTopLeftRadius=parse(B,borderTopLeftRadius,M.borderTopLeftRadius),this.borderTopRightRadius=parse(B,borderTopRightRadius,M.borderTopRightRadius),this.borderBottomRightRadius=parse(B,borderBottomRightRadius,M.borderBottomRightRadius),this.borderBottomLeftRadius=parse(B,borderBottomLeftRadius,M.borderBottomLeftRadius),this.borderTopStyle=parse(B,borderTopStyle,M.borderTopStyle),this.borderRightStyle=parse(B,borderRightStyle,M.borderRightStyle),this.borderBottomStyle=parse(B,borderBottomStyle,M.borderBottomStyle),this.borderLeftStyle=parse(B,borderLeftStyle,M.borderLeftStyle),this.borderTopWidth=parse(B,borderTopWidth,M.borderTopWidth),this.borderRightWidth=parse(B,borderRightWidth,M.borderRightWidth),this.borderBottomWidth=parse(B,borderBottomWidth,M.borderBottomWidth),this.borderLeftWidth=parse(B,borderLeftWidth,M.borderLeftWidth),this.boxShadow=parse(B,boxShadow,M.boxShadow),this.color=parse(B,color,M.color),this.direction=parse(B,direction,M.direction),this.display=parse(B,display,M.display),this.float=parse(B,float,M.cssFloat),this.fontFamily=parse(B,fontFamily,M.fontFamily),this.fontSize=parse(B,fontSize,M.fontSize),this.fontStyle=parse(B,fontStyle,M.fontStyle),this.fontVariant=parse(B,fontVariant,M.fontVariant),this.fontWeight=parse(B,fontWeight,M.fontWeight),this.letterSpacing=parse(B,letterSpacing,M.letterSpacing),this.lineBreak=parse(B,lineBreak,M.lineBreak),this.lineHeight=parse(B,lineHeight,M.lineHeight),this.listStyleImage=parse(B,listStyleImage,M.listStyleImage),this.listStylePosition=parse(B,listStylePosition,M.listStylePosition),this.listStyleType=parse(B,listStyleType,M.listStyleType),this.marginTop=parse(B,marginTop,M.marginTop),this.marginRight=parse(B,marginRight,M.marginRight),this.marginBottom=parse(B,marginBottom,M.marginBottom),this.marginLeft=parse(B,marginLeft,M.marginLeft),this.opacity=parse(B,opacity,M.opacity);var Y=parse(B,overflow,M.overflow);this.overflowX=Y[0],this.overflowY=Y[Y.length>1?1:0],this.overflowWrap=parse(B,overflowWrap,M.overflowWrap),this.paddingTop=parse(B,paddingTop,M.paddingTop),this.paddingRight=parse(B,paddingRight,M.paddingRight),this.paddingBottom=parse(B,paddingBottom,M.paddingBottom),this.paddingLeft=parse(B,paddingLeft,M.paddingLeft),this.paintOrder=parse(B,paintOrder,M.paintOrder),this.position=parse(B,position,M.position),this.textAlign=parse(B,textAlign,M.textAlign),this.textDecorationColor=parse(B,textDecorationColor,(P=M.textDecorationColor)!==null&&P!==void 0?P:M.color),this.textDecorationLine=parse(B,textDecorationLine,(K=M.textDecorationLine)!==null&&K!==void 0?K:M.textDecoration),this.textShadow=parse(B,textShadow,M.textShadow),this.textTransform=parse(B,textTransform,M.textTransform),this.transform=parse(B,transform$1,M.transform),this.transformOrigin=parse(B,transformOrigin,M.transformOrigin),this.visibility=parse(B,visibility,M.visibility),this.webkitTextStrokeColor=parse(B,webkitTextStrokeColor,M.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(B,webkitTextStrokeWidth,M.webkitTextStrokeWidth),this.wordBreak=parse(B,wordBreak,M.wordBreak),this.zIndex=parse(B,zIndex,M.zIndex)}return g.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},g.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},g.prototype.isTransformed=function(){return this.transform!==null},g.prototype.isPositioned=function(){return this.position!==0},g.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},g.prototype.isFloating=function(){return this.float!==0},g.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},g}(),CSSParsedPseudoDeclaration=function(){function g(B,M){this.content=parse(B,content,M.content),this.quotes=parse(B,quotes,M.quotes)}return g}(),CSSParsedCounterDeclaration=function(){function g(B,M){this.counterIncrement=parse(B,counterIncrement,M.counterIncrement),this.counterReset=parse(B,counterReset,M.counterReset)}return g}(),parse=function(g,B,M){var P=new Tokenizer,K=M!==null&&typeof M<"u"?M.toString():B.initialValue;P.write(K);var Y=new Parser$1(P.read());switch(B.type){case 2:var ie=Y.parseComponentValue();return B.parse(g,isIdentToken(ie)?ie.value:B.initialValue);case 0:return B.parse(g,Y.parseComponentValue());case 1:return B.parse(g,Y.parseComponentValues());case 4:return Y.parseComponentValue();case 3:switch(B.format){case"angle":return angle.parse(g,Y.parseComponentValue());case"color":return color$1.parse(g,Y.parseComponentValue());case"image":return image.parse(g,Y.parseComponentValue());case"length":var D=Y.parseComponentValue();return isLength(D)?D:ZERO_LENGTH;case"length-percentage":var ne=Y.parseComponentValue();return isLengthPercentage(ne)?ne:ZERO_LENGTH;case"time":return time.parse(g,Y.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(g){var B=g.getAttribute(elementDebuggerAttribute);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(g,B){var M=getElementDebugType(g);return M===1||B===M},ElementContainer=function(){function g(B,M){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(M,3))debugger;this.styles=new CSSParsedDeclaration(B,window.getComputedStyle(M,null)),isHTMLElementNode(M)&&(this.styles.animationDuration.some(function(P){return P>0})&&(M.style.animationDuration="0s"),this.styles.transform!==null&&(M.style.transform="none")),this.bounds=parseBounds(this.context,M),isDebugging(M,4)&&(this.flags|=16)}return g}(),base64$2="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var decode=function(g){var B=g.length*.75,M=g.length,P,K=0,Y,ie,D,ne;g[g.length-1]==="="&&(B--,g[g.length-2]==="="&&B--);var oe=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),ue=Array.isArray(oe)?oe:new Uint8Array(oe);for(P=0;P<M;P+=4)Y=lookup$1[g.charCodeAt(P)],ie=lookup$1[g.charCodeAt(P+1)],D=lookup$1[g.charCodeAt(P+2)],ne=lookup$1[g.charCodeAt(P+3)],ue[K++]=Y<<2|ie>>4,ue[K++]=(ie&15)<<4|D>>2,ue[K++]=(D&3)<<6|ne&63;return oe},polyUint16Array=function(g){for(var B=g.length,M=[],P=0;P<B;P+=2)M.push(g[P+1]<<8|g[P]);return M},polyUint32Array=function(g){for(var B=g.length,M=[],P=0;P<B;P+=4)M.push(g[P+3]<<24|g[P+2]<<16|g[P+1]<<8|g[P]);return M},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(g,B,M){return g.slice?g.slice(B,M):new Uint16Array(Array.prototype.slice.call(g,B,M))},slice32=function(g,B,M){return g.slice?g.slice(B,M):new Uint32Array(Array.prototype.slice.call(g,B,M))},createTrieFromBase64=function(g,B){var M=decode(g),P=Array.isArray(M)?polyUint32Array(M):new Uint32Array(M),K=Array.isArray(M)?polyUint16Array(M):new Uint16Array(M),Y=24,ie=slice16(K,Y/2,P[4]/2),D=P[5]===2?slice16(K,(Y+P[4])/2):slice32(P,Math.ceil((Y+P[4])/4));return new Trie(P[0],P[1],P[2],P[3],ie,D)},Trie=function(){function g(B,M,P,K,Y,ie){this.initialValue=B,this.errorValue=M,this.highStart=P,this.highValueIndex=K,this.index=Y,this.data=ie}return g.prototype.get=function(B){var M;if(B>=0){if(B<55296||B>56319&&B<=65535)return M=this.index[B>>UTRIE2_SHIFT_2],M=(M<<UTRIE2_INDEX_SHIFT)+(B&UTRIE2_DATA_MASK),this.data[M];if(B<=65535)return M=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(B-55296>>UTRIE2_SHIFT_2)],M=(M<<UTRIE2_INDEX_SHIFT)+(B&UTRIE2_DATA_MASK),this.data[M];if(B<this.highStart)return M=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(B>>UTRIE2_SHIFT_1),M=this.index[M],M+=B>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,M=this.index[M],M=(M<<UTRIE2_INDEX_SHIFT)+(B&UTRIE2_DATA_MASK),this.data[M];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},g}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$4=0;i$4<chars.length;i$4++)lookup[chars.charCodeAt(i$4)]=i$4;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V=9,T$1=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(g){for(var B=[],M=0,P=g.length;M<P;){var K=g.charCodeAt(M++);if(K>=55296&&K<=56319&&M<P){var Y=g.charCodeAt(M++);(Y&64512)===56320?B.push(((K&1023)<<10)+(Y&1023)+65536):(B.push(K),M--)}else B.push(K)}return B},fromCodePoint=function(){for(var g=[],B=0;B<arguments.length;B++)g[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,g);var M=g.length;if(!M)return"";for(var P=[],K=-1,Y="";++K<M;){var ie=g[K];ie<=65535?P.push(ie):(ie-=65536,P.push((ie>>10)+55296,ie%1024+56320)),(K+1===M||P.length>16384)&&(Y+=String.fromCharCode.apply(String,P),P.length=0)}return Y},UnicodeTrie=createTrieFromBase64(base64$2),BREAK_NOT_ALLOWED="Ã",BREAK_ALLOWED="Ã·",codePointToClass=function(g){return UnicodeTrie.get(g)},_graphemeBreakAtIndex=function(g,B,M){var P=M-2,K=B[P],Y=B[M-1],ie=B[M];if(Y===CR&&ie===LF)return BREAK_NOT_ALLOWED;if(Y===CR||Y===LF||Y===Control||ie===CR||ie===LF||ie===Control)return BREAK_ALLOWED;if(Y===L$1&&[L$1,V,LV,LVT].indexOf(ie)!==-1||(Y===LV||Y===V)&&(ie===V||ie===T$1)||(Y===LVT||Y===T$1)&&ie===T$1||ie===ZWJ||ie===Extend||ie===SpacingMark||Y===Prepend)return BREAK_NOT_ALLOWED;if(Y===ZWJ&&ie===Extended_Pictographic){for(;K===Extend;)K=B[--P];if(K===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(Y===RI&&ie===RI){for(var D=0;K===RI;)D++,K=B[--P];if(D%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(g){var B=toCodePoints(g),M=B.length,P=0,K=0,Y=B.map(codePointToClass);return{next:function(){if(P>=M)return{done:!0,value:null};for(var ie=BREAK_NOT_ALLOWED;P<M&&(ie=_graphemeBreakAtIndex(B,Y,++P))===BREAK_NOT_ALLOWED;);if(ie!==BREAK_NOT_ALLOWED||P===M){var D=fromCodePoint.apply(null,B.slice(K,P));return K=P,{value:D,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(g){for(var B=GraphemeBreaker(g),M=[],P;!(P=B.next()).done;)P.value&&M.push(P.value.slice());return M},testRangeBounds=function(g){var B=123;if(g.createRange){var M=g.createRange();if(M.getBoundingClientRect){var P=g.createElement("boundtest");P.style.height=B+"px",P.style.display="block",g.body.appendChild(P),M.selectNode(P);var K=M.getBoundingClientRect(),Y=Math.round(K.height);if(g.body.removeChild(P),Y===B)return!0}}return!1},testIOSLineBreak=function(g){var B=g.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",g.body.appendChild(B);var M=g.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var P=B.firstChild,K=toCodePoints$1(P.data).map(function(ne){return fromCodePoint$1(ne)}),Y=0,ie={},D=K.every(function(ne,oe){M.setStart(P,Y),M.setEnd(P,Y+ne.length);var ue=M.getBoundingClientRect();Y+=ne.length;var pe=ue.x>ie.x||ue.y>ie.y;return ie=ue,oe===0?!0:pe});return g.body.removeChild(B),D},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(g){var B=new Image,M=g.createElement("canvas"),P=M.getContext("2d");if(!P)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{P.drawImage(B,0,0),M.toDataURL()}catch{return!1}return!0},isGreenPixel=function(g){return g[0]===0&&g[1]===255&&g[2]===0&&g[3]===255},testForeignObject=function(g){var B=g.createElement("canvas"),M=100;B.width=M,B.height=M;var P=B.getContext("2d");if(!P)return Promise.reject(!1);P.fillStyle="rgb(0, 255, 0)",P.fillRect(0,0,M,M);var K=new Image,Y=B.toDataURL();K.src=Y;var ie=createForeignObjectSVG(M,M,0,0,K);return P.fillStyle="red",P.fillRect(0,0,M,M),loadSerializedSVG$1(ie).then(function(D){P.drawImage(D,0,0);var ne=P.getImageData(0,0,M,M).data;P.fillStyle="red",P.fillRect(0,0,M,M);var oe=g.createElement("div");return oe.style.backgroundImage="url("+Y+")",oe.style.height=M+"px",isGreenPixel(ne)?loadSerializedSVG$1(createForeignObjectSVG(M,M,0,0,oe)):Promise.reject(!1)}).then(function(D){return P.drawImage(D,0,0),isGreenPixel(P.getImageData(0,0,M,M).data)}).catch(function(){return!1})},createForeignObjectSVG=function(g,B,M,P,K){var Y="http://www.w3.org/2000/svg",ie=document.createElementNS(Y,"svg"),D=document.createElementNS(Y,"foreignObject");return ie.setAttributeNS(null,"width",g.toString()),ie.setAttributeNS(null,"height",B.toString()),D.setAttributeNS(null,"width","100%"),D.setAttributeNS(null,"height","100%"),D.setAttributeNS(null,"x",M.toString()),D.setAttributeNS(null,"y",P.toString()),D.setAttributeNS(null,"externalResourcesRequired","true"),ie.appendChild(D),D.appendChild(K),ie},loadSerializedSVG$1=function(g){return new Promise(function(B,M){var P=new Image;P.onload=function(){return B(P)},P.onerror=M,P.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(g))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var g=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:g}),g},get SUPPORT_WORD_BREAKING(){var g=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:g}),g},get SUPPORT_SVG_DRAWING(){var g=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:g}),g},get SUPPORT_FOREIGNOBJECT_DRAWING(){var g=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:g}),g},get SUPPORT_CORS_IMAGES(){var g=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:g}),g},get SUPPORT_RESPONSE_TYPE(){var g=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:g}),g},get SUPPORT_CORS_XHR(){var g="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:g}),g},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var g=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:g}),g}},TextBounds=function(){function g(B,M){this.text=B,this.bounds=M}return g}(),parseTextBounds=function(g,B,M,P){var K=breakText(B,M),Y=[],ie=0;return K.forEach(function(D){if(M.textDecorationLine.length||D.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var ne=createRange(P,ie,D.length).getClientRects();if(ne.length>1){var oe=segmentGraphemes(D),ue=0;oe.forEach(function(we){Y.push(new TextBounds(we,Bounds.fromDOMRectList(g,createRange(P,ue+ie,we.length).getClientRects()))),ue+=we.length})}else Y.push(new TextBounds(D,Bounds.fromDOMRectList(g,ne)))}else{var pe=P.splitText(D.length);Y.push(new TextBounds(D,getWrapperBounds(g,P))),P=pe}else FEATURES.SUPPORT_RANGE_BOUNDS||(P=P.splitText(D.length));ie+=D.length}),Y},getWrapperBounds=function(g,B){var M=B.ownerDocument;if(M){var P=M.createElement("html2canvaswrapper");P.appendChild(B.cloneNode(!0));var K=B.parentNode;if(K){K.replaceChild(P,B);var Y=parseBounds(g,P);return P.firstChild&&K.replaceChild(P.firstChild,P),Y}}return Bounds.EMPTY},createRange=function(g,B,M){var P=g.ownerDocument;if(!P)throw new Error("Node has no owner document");var K=P.createRange();return K.setStart(g,B),K.setEnd(g,B+M),K},segmentGraphemes=function(g){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(g)).map(function(M){return M.segment})}return splitGraphemes(g)},segmentWords=function(g,B){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var M=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(M.segment(g)).map(function(P){return P.segment})}return breakWords(g,B)},breakText=function(g,B){return B.letterSpacing!==0?segmentGraphemes(g):segmentWords(g,B)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(g,B){for(var M=LineBreaker(g,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),P=[],K,Y=function(){if(K.value){var ie=K.value.slice(),D=toCodePoints$1(ie),ne="";D.forEach(function(oe){wordSeparators.indexOf(oe)===-1?ne+=fromCodePoint$1(oe):(ne.length&&P.push(ne),P.push(fromCodePoint$1(oe)),ne="")}),ne.length&&P.push(ne)}};!(K=M.next()).done;)Y();return P},TextContainer=function(){function g(B,M,P){this.text=transform(M.data,P.textTransform),this.textBounds=parseTextBounds(B,this.text,P,M)}return g}(),transform=function(g,B){switch(B){case 1:return g.toLowerCase();case 3:return g.replace(CAPITALIZE,capitalize);case 2:return g.toUpperCase();default:return g}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(g,B,M){return g.length>0?B+M.toUpperCase():g},ImageElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.src=P.currentSrc||P.src,K.intrinsicWidth=P.naturalWidth,K.intrinsicHeight=P.naturalHeight,K.context.cache.addImage(K.src),K}return B}(ElementContainer),CanvasElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.canvas=P,K.intrinsicWidth=P.width,K.intrinsicHeight=P.height,K}return B}(ElementContainer),SVGElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this,Y=new XMLSerializer,ie=parseBounds(M,P);return P.setAttribute("width",ie.width+"px"),P.setAttribute("height",ie.height+"px"),K.svg="data:image/svg+xml,"+encodeURIComponent(Y.serializeToString(P)),K.intrinsicWidth=P.width.baseVal.value,K.intrinsicHeight=P.height.baseVal.value,K.context.cache.addImage(K.svg),K}return B}(ElementContainer),LIElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.value=P.value,K}return B}(ElementContainer),OLElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.start=P.start,K.reversed=typeof P.reversed=="boolean"&&P.reversed===!0,K}return B}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(g){return g.width>g.height?new Bounds(g.left+(g.width-g.height)/2,g.top,g.height,g.height):g.width<g.height?new Bounds(g.left,g.top+(g.height-g.width)/2,g.width,g.width):g},getInputValue=function(g){var B=g.type===PASSWORD?new Array(g.value.length+1).join("â¢"):g.value;return B.length===0?g.placeholder||"":B},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;switch(K.type=P.type.toLowerCase(),K.checked=P.checked,K.value=getInputValue(P),(K.type===CHECKBOX||K.type===RADIO)&&(K.styles.backgroundColor=3739148031,K.styles.borderTopColor=K.styles.borderRightColor=K.styles.borderBottomColor=K.styles.borderLeftColor=2779096575,K.styles.borderTopWidth=K.styles.borderRightWidth=K.styles.borderBottomWidth=K.styles.borderLeftWidth=1,K.styles.borderTopStyle=K.styles.borderRightStyle=K.styles.borderBottomStyle=K.styles.borderLeftStyle=1,K.styles.backgroundClip=[0],K.styles.backgroundOrigin=[0],K.bounds=reformatInputBounds(K.bounds)),K.type){case CHECKBOX:K.styles.borderTopRightRadius=K.styles.borderTopLeftRadius=K.styles.borderBottomRightRadius=K.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:K.styles.borderTopRightRadius=K.styles.borderTopLeftRadius=K.styles.borderBottomRightRadius=K.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return K}return B}(ElementContainer),SelectElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this,Y=P.options[P.selectedIndex||0];return K.value=Y&&Y.text||"",K}return B}(ElementContainer),TextareaElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.value=P.value,K}return B}(ElementContainer),IFrameElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;K.src=P.src,K.width=parseInt(P.width,10)||0,K.height=parseInt(P.height,10)||0,K.backgroundColor=K.styles.backgroundColor;try{if(P.contentWindow&&P.contentWindow.document&&P.contentWindow.document.documentElement){K.tree=parseTree(M,P.contentWindow.document.documentElement);var Y=P.contentWindow.document.documentElement?parseColor(M,getComputedStyle(P.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,ie=P.contentWindow.document.body?parseColor(M,getComputedStyle(P.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;K.backgroundColor=isTransparent(Y)?isTransparent(ie)?K.styles.backgroundColor:ie:Y}}catch{}return K}return B}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(g,B,M,P){for(var K=B.firstChild,Y=void 0;K;K=Y)if(Y=K.nextSibling,isTextNode(K)&&K.data.trim().length>0)M.textNodes.push(new TextContainer(g,K,M.styles));else if(isElementNode(K))if(isSlotElement(K)&&K.assignedNodes)K.assignedNodes().forEach(function(D){return parseNodeTree(g,D,M,P)});else{var ie=createContainer(g,K);ie.styles.isVisible()&&(createsRealStackingContext(K,ie,P)?ie.flags|=4:createsStackingContext(ie.styles)&&(ie.flags|=2),LIST_OWNERS.indexOf(K.tagName)!==-1&&(ie.flags|=8),M.elements.push(ie),K.slot,K.shadowRoot?parseNodeTree(g,K.shadowRoot,ie,P):!isTextareaElement(K)&&!isSVGElement(K)&&!isSelectElement(K)&&parseNodeTree(g,K,ie,P))}},createContainer=function(g,B){return isImageElement(B)?new ImageElementContainer(g,B):isCanvasElement(B)?new CanvasElementContainer(g,B):isSVGElement(B)?new SVGElementContainer(g,B):isLIElement(B)?new LIElementContainer(g,B):isOLElement(B)?new OLElementContainer(g,B):isInputElement(B)?new InputElementContainer(g,B):isSelectElement(B)?new SelectElementContainer(g,B):isTextareaElement(B)?new TextareaElementContainer(g,B):isIFrameElement(B)?new IFrameElementContainer(g,B):new ElementContainer(g,B)},parseTree=function(g,B){var M=createContainer(g,B);return M.flags|=4,parseNodeTree(g,B,M,M),M},createsRealStackingContext=function(g,B,M){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||isBodyElement(g)&&M.styles.isTransparent()},createsStackingContext=function(g){return g.isPositioned()||g.isFloating()},isTextNode=function(g){return g.nodeType===Node.TEXT_NODE},isElementNode=function(g){return g.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(g){return isElementNode(g)&&typeof g.style<"u"&&!isSVGElementNode(g)},isSVGElementNode=function(g){return typeof g.className=="object"},isLIElement=function(g){return g.tagName==="LI"},isOLElement=function(g){return g.tagName==="OL"},isInputElement=function(g){return g.tagName==="INPUT"},isHTMLElement=function(g){return g.tagName==="HTML"},isSVGElement=function(g){return g.tagName==="svg"},isBodyElement=function(g){return g.tagName==="BODY"},isCanvasElement=function(g){return g.tagName==="CANVAS"},isVideoElement=function(g){return g.tagName==="VIDEO"},isImageElement=function(g){return g.tagName==="IMG"},isIFrameElement=function(g){return g.tagName==="IFRAME"},isStyleElement=function(g){return g.tagName==="STYLE"},isScriptElement=function(g){return g.tagName==="SCRIPT"},isTextareaElement=function(g){return g.tagName==="TEXTAREA"},isSelectElement=function(g){return g.tagName==="SELECT"},isSlotElement=function(g){return g.tagName==="SLOT"},isCustomElement=function(g){return g.tagName.indexOf("-")>0},CounterState=function(){function g(){this.counters={}}return g.prototype.getCounterValue=function(B){var M=this.counters[B];return M&&M.length?M[M.length-1]:1},g.prototype.getCounterValues=function(B){var M=this.counters[B];return M||[]},g.prototype.pop=function(B){var M=this;B.forEach(function(P){return M.counters[P].pop()})},g.prototype.parse=function(B){var M=this,P=B.counterIncrement,K=B.counterReset,Y=!0;P!==null&&P.forEach(function(D){var ne=M.counters[D.counter];ne&&D.increment!==0&&(Y=!1,ne.length||ne.push(1),ne[Math.max(0,ne.length-1)]+=D.increment)});var ie=[];return Y&&K.forEach(function(D){var ne=M.counters[D.counter];ie.push(D.counter),ne||(ne=M.counters[D.counter]=[]),ne.push(D.reset)}),ie},g}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Ô¿","Ô¾","Ô½","Ô¼","Ô»","Ôº","Ô¹","Ô¸","Ô·","Ô¶","Ôµ","Ô´","Ô³","Ô²","Ô±"]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["××³","××³","××³","××³","××³","××³","××³","××³","××³","××³","×ª","×©","×¨","×§","×¦","×¤","×¢","×¡","× ","×","×","×","××","××","××","××","××","×","×","×","×","×","×","×","×","×","×"]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["áµ","á°","á¯","á´","á®","á­","á¬","á«","áª","á©","á¨","á§","á¦","á¥","á¤","á³","á¢","á¡","á ","á","á","á","á²","á","á","á","á","á","á","á±","á","á","á","á","á","á","á"]},createAdditiveCounter=function(g,B,M,P,K,Y){return g<B||g>M?createCounterText(g,K,Y.length>0):P.integers.reduce(function(ie,D,ne){for(;g>=D;)g-=D,ie+=P.values[ne];return ie},"")+Y},createCounterStyleWithSymbolResolver=function(g,B,M,P){var K="";do M||g--,K=P(g)+K,g/=B;while(g*B>=B);return K},createCounterStyleFromRange=function(g,B,M,P,K){var Y=M-B+1;return(g<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(g),Y,P,function(ie){return fromCodePoint$1(Math.floor(ie%Y)+B)})+K)},createCounterStyleFromSymbols=function(g,B,M){M===void 0&&(M=". ");var P=B.length;return createCounterStyleWithSymbolResolver(Math.abs(g),P,!1,function(K){return B[Math.floor(K%P)]})+M},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(g,B,M,P,K,Y){if(g<-9999||g>9999)return createCounterText(g,4,K.length>0);var ie=Math.abs(g),D=K;if(ie===0)return B[0]+D;for(var ne=0;ie>0&&ne<=4;ne++){var oe=ie%10;oe===0&&contains(Y,CJK_ZEROS)&&D!==""?D=B[oe]+D:oe>1||oe===1&&ne===0||oe===1&&ne===1&&contains(Y,CJK_TEN_COEFFICIENTS)||oe===1&&ne===1&&contains(Y,CJK_TEN_HIGH_COEFFICIENTS)&&g>100||oe===1&&ne>1&&contains(Y,CJK_HUNDRED_COEFFICIENTS)?D=B[oe]+(ne>0?M[ne-1]:"")+D:oe===1&&ne>0&&(D=M[ne-1]+D),ie=Math.floor(ie/10)}return(g<0?P:"")+D},CHINESE_INFORMAL_MULTIPLIERS="åç¾åè¬",CHINESE_FORMAL_MULTIPLIERS="æ¾ä½°ä»è¬",JAPANESE_NEGATIVE="ãã¤ãã¹",KOREAN_NEGATIVE="ë§ì´ëì¤",createCounterText=function(g,B,M){var P=M?". ":"",K=M?"ã":"",Y=M?", ":"",ie=M?" ":"";switch(B){case 0:return"â¢"+ie;case 1:return"â¦"+ie;case 2:return"â¾"+ie;case 5:var D=createCounterStyleFromRange(g,48,57,!0,P);return D.length<4?"0"+D:D;case 4:return createCounterStyleFromSymbols(g,"ãä¸äºä¸åäºå­ä¸å«ä¹",K);case 6:return createAdditiveCounter(g,1,3999,ROMAN_UPPER,3,P).toLowerCase();case 7:return createAdditiveCounter(g,1,3999,ROMAN_UPPER,3,P);case 8:return createCounterStyleFromRange(g,945,969,!1,P);case 9:return createCounterStyleFromRange(g,97,122,!1,P);case 10:return createCounterStyleFromRange(g,65,90,!1,P);case 11:return createCounterStyleFromRange(g,1632,1641,!0,P);case 12:case 49:return createAdditiveCounter(g,1,9999,ARMENIAN,3,P);case 35:return createAdditiveCounter(g,1,9999,ARMENIAN,3,P).toLowerCase();case 13:return createCounterStyleFromRange(g,2534,2543,!0,P);case 14:case 30:return createCounterStyleFromRange(g,6112,6121,!0,P);case 15:return createCounterStyleFromSymbols(g,"å­ä¸å¯å¯è¾°å·³åæªç³éæäº¥",K);case 16:return createCounterStyleFromSymbols(g,"ç²ä¹ä¸ä¸æå·±åºè¾å£¬ç¸",K);case 17:case 48:return createCJKCounter(g,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",CHINESE_INFORMAL_MULTIPLIERS,"è² ",K,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(g,"é¶å£¹è²³åèä¼é¸ææç",CHINESE_FORMAL_MULTIPLIERS,"è² ",K,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(g,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",CHINESE_INFORMAL_MULTIPLIERS,"è´",K,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(g,"é¶å£¹è´°åèä¼éææç",CHINESE_FORMAL_MULTIPLIERS,"è´",K,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(g,"ãä¸äºä¸åäºå­ä¸å«ä¹","åç¾åä¸",JAPANESE_NEGATIVE,K,0);case 25:return createCJKCounter(g,"é¶å£±å¼ååä¼å­ä¸å«ä¹","æ¾ç¾åä¸",JAPANESE_NEGATIVE,K,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(g,"ìì¼ì´ì¼ì¬ì¤ì¡ì¹ íêµ¬","ì­ë°±ì²ë§",KOREAN_NEGATIVE,Y,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(g,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬",KOREAN_NEGATIVE,Y,0);case 32:return createCJKCounter(g,"é¶å£¹è²³ååäºå­ä¸å«ä¹","æ¾ç¾å",KOREAN_NEGATIVE,Y,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(g,2406,2415,!0,P);case 20:return createAdditiveCounter(g,1,19999,GEORGIAN,3,P);case 21:return createCounterStyleFromRange(g,2790,2799,!0,P);case 22:return createCounterStyleFromRange(g,2662,2671,!0,P);case 22:return createAdditiveCounter(g,1,10999,HEBREW,3,P);case 23:return createCounterStyleFromSymbols(g,"ããããããããããããããããã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ãããããããããããããããã");case 24:return createCounterStyleFromSymbols(g,"ããã¯ã«ã»ã¸ã¨ã¡ãã¬ããããããããã¤ã­ãªããããã®ãããã¾ããµããã¦ãããããã¿ããã²ããã");case 27:return createCounterStyleFromRange(g,3302,3311,!0,P);case 28:return createCounterStyleFromSymbols(g,"ã¢ã¤ã¦ã¨ãªã«ã­ã¯ã±ã³ãµã·ã¹ã»ã½ã¿ããããããããããããããããã ã¡ã¢ã¤ã¦ã¨ã©ãªã«ã¬ã­ã¯ã°ã±ã²ã³",K);case 29:return createCounterStyleFromSymbols(g,"ã¤ã­ãããããããªãã«ã²ã¯ã«ã¨ã¿ã¬ã½ãããã©ã ã¦ã°ããªã¯ã¤ãã±ãã³ã¨ãã¢ãµã­ã¦ã¡ãã·ã±ãã¢ã»ã¹",K);case 34:return createCounterStyleFromRange(g,3792,3801,!0,P);case 37:return createCounterStyleFromRange(g,6160,6169,!0,P);case 38:return createCounterStyleFromRange(g,4160,4169,!0,P);case 39:return createCounterStyleFromRange(g,2918,2927,!0,P);case 40:return createCounterStyleFromRange(g,1776,1785,!0,P);case 43:return createCounterStyleFromRange(g,3046,3055,!0,P);case 44:return createCounterStyleFromRange(g,3174,3183,!0,P);case 45:return createCounterStyleFromRange(g,3664,3673,!0,P);case 46:return createCounterStyleFromRange(g,3872,3881,!0,P);case 3:default:return createCounterStyleFromRange(g,48,57,!0,P)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function g(B,M,P){if(this.context=B,this.options=P,this.scrolledElements=[],this.referenceElement=M,this.counters=new CounterState,this.quoteDepth=0,!M.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(M.ownerDocument.documentElement,!1)}return g.prototype.toIFrame=function(B,M){var P=this,K=createIFrameContainer(B,M);if(!K.contentWindow)return Promise.reject("Unable to find iframe window");var Y=B.defaultView.pageXOffset,ie=B.defaultView.pageYOffset,D=K.contentWindow,ne=D.document,oe=iframeLoader(K).then(function(){return __awaiter(P,void 0,void 0,function(){var ue,pe;return __generator(this,function(we){switch(we.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),D&&(D.scrollTo(M.left,M.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(D.scrollY!==M.top||D.scrollX!==M.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(D.scrollX-M.left,D.scrollY-M.top,0,0))),ue=this.options.onclone,pe=this.clonedReferenceElement,typeof pe>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ne.fonts&&ne.fonts.ready?[4,ne.fonts.ready]:[3,2];case 1:we.sent(),we.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(ne)]:[3,4];case 3:we.sent(),we.label=4;case 4:return typeof ue=="function"?[2,Promise.resolve().then(function(){return ue(ne,pe)}).then(function(){return K})]:[2,K]}})})});return ne.open(),ne.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,Y,ie),ne.replaceChild(ne.adoptNode(this.documentElement),ne.documentElement),ne.close(),oe},g.prototype.createElementClone=function(B){if(isDebugging(B,2))debugger;if(isCanvasElement(B))return this.createCanvasClone(B);if(isVideoElement(B))return this.createVideoClone(B);if(isStyleElement(B))return this.createStyleClone(B);var M=B.cloneNode(!1);return isImageElement(M)&&(isImageElement(B)&&B.currentSrc&&B.currentSrc!==B.src&&(M.src=B.currentSrc,M.srcset=""),M.loading==="lazy"&&(M.loading="eager")),isCustomElement(M)?this.createCustomElementClone(M):M},g.prototype.createCustomElementClone=function(B){var M=document.createElement("html2canvascustomelement");return copyCSSStyles(B.style,M),M},g.prototype.createStyleClone=function(B){try{var M=B.sheet;if(M&&M.cssRules){var P=[].slice.call(M.cssRules,0).reduce(function(Y,ie){return ie&&typeof ie.cssText=="string"?Y+ie.cssText:Y},""),K=B.cloneNode(!1);return K.textContent=P,K}}catch(Y){if(this.context.logger.error("Unable to access cssRules property",Y),Y.name!=="SecurityError")throw Y}return B.cloneNode(!1)},g.prototype.createCanvasClone=function(B){var M;if(this.options.inlineImages&&B.ownerDocument){var P=B.ownerDocument.createElement("img");try{return P.src=B.toDataURL(),P}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var K=B.cloneNode(!1);try{K.width=B.width,K.height=B.height;var Y=B.getContext("2d"),ie=K.getContext("2d");if(ie)if(!this.options.allowTaint&&Y)ie.putImageData(Y.getImageData(0,0,B.width,B.height),0,0);else{var D=(M=B.getContext("webgl2"))!==null&&M!==void 0?M:B.getContext("webgl");if(D){var ne=D.getContextAttributes();(ne==null?void 0:ne.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}ie.drawImage(B,0,0)}return K}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return K},g.prototype.createVideoClone=function(B){var M=B.ownerDocument.createElement("canvas");M.width=B.offsetWidth,M.height=B.offsetHeight;var P=M.getContext("2d");try{return P&&(P.drawImage(B,0,0,M.width,M.height),this.options.allowTaint||P.getImageData(0,0,M.width,M.height)),M}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var K=B.ownerDocument.createElement("canvas");return K.width=B.offsetWidth,K.height=B.offsetHeight,K},g.prototype.appendChildNode=function(B,M,P){(!isElementNode(M)||!isScriptElement(M)&&!M.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(M)))&&(!this.options.copyStyles||!isElementNode(M)||!isStyleElement(M))&&B.appendChild(this.cloneNode(M,P))},g.prototype.cloneChildNodes=function(B,M,P){for(var K=this,Y=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;Y;Y=Y.nextSibling)if(isElementNode(Y)&&isSlotElement(Y)&&typeof Y.assignedNodes=="function"){var ie=Y.assignedNodes();ie.length&&ie.forEach(function(D){return K.appendChildNode(M,D,P)})}else this.appendChildNode(M,Y,P)},g.prototype.cloneNode=function(B,M){if(isTextNode(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var P=B.ownerDocument.defaultView;if(P&&isElementNode(B)&&(isHTMLElementNode(B)||isSVGElementNode(B))){var K=this.createElementClone(B);K.style.transitionProperty="none";var Y=P.getComputedStyle(B),ie=P.getComputedStyle(B,":before"),D=P.getComputedStyle(B,":after");this.referenceElement===B&&isHTMLElementNode(K)&&(this.clonedReferenceElement=K),isBodyElement(K)&&createPseudoHideStyles(K);var ne=this.counters.parse(new CSSParsedCounterDeclaration(this.context,Y)),oe=this.resolvePseudoContent(B,K,ie,PseudoElementType.BEFORE);isCustomElement(B)&&(M=!0),isVideoElement(B)||this.cloneChildNodes(B,K,M),oe&&K.insertBefore(oe,K.firstChild);var ue=this.resolvePseudoContent(B,K,D,PseudoElementType.AFTER);return ue&&K.appendChild(ue),this.counters.pop(ne),(Y&&(this.options.copyStyles||isSVGElementNode(B))&&!isIFrameElement(B)||M)&&copyCSSStyles(Y,K),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([K,B.scrollLeft,B.scrollTop]),(isTextareaElement(B)||isSelectElement(B))&&(isTextareaElement(K)||isSelectElement(K))&&(K.value=B.value),K}return B.cloneNode(!1)},g.prototype.resolvePseudoContent=function(B,M,P,K){var Y=this;if(P){var ie=P.content,D=M.ownerDocument;if(!(!D||!ie||ie==="none"||ie==="-moz-alt-content"||P.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,P));var ne=new CSSParsedPseudoDeclaration(this.context,P),oe=D.createElement("html2canvaspseudoelement");copyCSSStyles(P,oe),ne.content.forEach(function(pe){if(pe.type===0)oe.appendChild(D.createTextNode(pe.value));else if(pe.type===22){var we=D.createElement("img");we.src=pe.value,we.style.opacity="1",oe.appendChild(we)}else if(pe.type===18){if(pe.name==="attr"){var ke=pe.values.filter(isIdentToken);ke.length&&oe.appendChild(D.createTextNode(B.getAttribute(ke[0].value)||""))}else if(pe.name==="counter"){var Qe=pe.values.filter(nonFunctionArgSeparator),Ue=Qe[0],We=Qe[1];if(Ue&&isIdentToken(Ue)){var Ne=Y.counters.getCounterValue(Ue.value),ut=We&&isIdentToken(We)?listStyleType.parse(Y.context,We.value):3;oe.appendChild(D.createTextNode(createCounterText(Ne,ut,!1)))}}else if(pe.name==="counters"){var Ye=pe.values.filter(nonFunctionArgSeparator),Ue=Ye[0],et=Ye[1],We=Ye[2];if(Ue&&isIdentToken(Ue)){var rt=Y.counters.getCounterValues(Ue.value),ft=We&&isIdentToken(We)?listStyleType.parse(Y.context,We.value):3,Ze=et&&et.type===0?et.value:"",wt=rt.map(function(Pt){return createCounterText(Pt,ft,!1)}).join(Ze);oe.appendChild(D.createTextNode(wt))}}}else if(pe.type===20)switch(pe.value){case"open-quote":oe.appendChild(D.createTextNode(getQuote(ne.quotes,Y.quoteDepth++,!0)));break;case"close-quote":oe.appendChild(D.createTextNode(getQuote(ne.quotes,--Y.quoteDepth,!1)));break;default:oe.appendChild(D.createTextNode(pe.value))}}),oe.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var ue=K===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(M)?M.className.baseValue+=ue:M.className+=ue,oe}}},g.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},g}(),PseudoElementType;(function(g){g[g.BEFORE=0]="BEFORE",g[g.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(g,B){var M=g.createElement("iframe");return M.className="html2canvas-container",M.style.visibility="hidden",M.style.position="fixed",M.style.left="-10000px",M.style.top="0px",M.style.border="0",M.width=B.width.toString(),M.height=B.height.toString(),M.scrolling="no",M.setAttribute(IGNORE_ATTRIBUTE,"true"),g.body.appendChild(M),M},imageReady=function(g){return new Promise(function(B){if(g.complete){B();return}if(!g.src){B();return}g.onload=B,g.onerror=B})},imagesReady=function(g){return Promise.all([].slice.call(g.images,0).map(imageReady))},iframeLoader=function(g){return new Promise(function(B,M){var P=g.contentWindow;if(!P)return M("No window assigned for iframe");var K=P.document;P.onload=g.onload=function(){P.onload=g.onload=null;var Y=setInterval(function(){K.body.childNodes.length>0&&K.readyState==="complete"&&(clearInterval(Y),B(g))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(g,B){for(var M=g.length-1;M>=0;M--){var P=g.item(M);ignoredStyleProperties.indexOf(P)===-1&&B.style.setProperty(P,g.getPropertyValue(P))}return B},serializeDoctype=function(g){var B="";return g&&(B+="<!DOCTYPE ",g.name&&(B+=g.name),g.internalSubset&&(B+=g.internalSubset),g.publicId&&(B+='"'+g.publicId+'"'),g.systemId&&(B+='"'+g.systemId+'"'),B+=">"),B},restoreOwnerScroll=function(g,B,M){g&&g.defaultView&&(B!==g.defaultView.pageXOffset||M!==g.defaultView.pageYOffset)&&g.defaultView.scrollTo(B,M)},restoreNodeScroll=function(g){var B=g[0],M=g[1],P=g[2];B.scrollLeft=M,B.scrollTop=P},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(g){createStyles(g,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(g,B){var M=g.ownerDocument;if(M){var P=M.createElement("style");P.textContent=B,g.appendChild(P)}},CacheStorage=function(){function g(){}return g.getOrigin=function(B){var M=g._link;return M?(M.href=B,M.href=M.href,M.protocol+M.hostname+M.port):"about:blank"},g.isSameOrigin=function(B){return g.getOrigin(B)===g._origin},g.setContext=function(B){g._link=B.document.createElement("a"),g._origin=g.getOrigin(B.location.href)},g._origin="about:blank",g}(),Cache=function(){function g(B,M){this.context=B,this._options=M,this._cache={}}return g.prototype.addImage=function(B){var M=Promise.resolve();return this.has(B)||(isBlobImage(B)||isRenderable(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),M},g.prototype.match=function(B){return this._cache[B]},g.prototype.loadImage=function(B){return __awaiter(this,void 0,void 0,function(){var M,P,K,Y,ie=this;return __generator(this,function(D){switch(D.label){case 0:return M=CacheStorage.isSameOrigin(B),P=!isInlineImage(B)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!M,K=!isInlineImage(B)&&!M&&!isBlobImage(B)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!P,!M&&this._options.allowTaint===!1&&!isInlineImage(B)&&!isBlobImage(B)&&!K&&!P?[2]:(Y=B,K?[4,this.proxy(Y)]:[3,2]);case 1:Y=D.sent(),D.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(ne,oe){var ue=new Image;ue.onload=function(){return ne(ue)},ue.onerror=oe,(isInlineBase64Image(Y)||P)&&(ue.crossOrigin="anonymous"),ue.src=Y,ue.complete===!0&&setTimeout(function(){return ne(ue)},500),ie._options.imageTimeout>0&&setTimeout(function(){return oe("Timed out ("+ie._options.imageTimeout+"ms) loading image")},ie._options.imageTimeout)})];case 3:return[2,D.sent()]}})})},g.prototype.has=function(B){return typeof this._cache[B]<"u"},g.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},g.prototype.proxy=function(B){var M=this,P=this._options.proxy;if(!P)throw new Error("No proxy defined");var K=B.substring(0,256);return new Promise(function(Y,ie){var D=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",ne=new XMLHttpRequest;ne.onload=function(){if(ne.status===200)if(D==="text")Y(ne.response);else{var pe=new FileReader;pe.addEventListener("load",function(){return Y(pe.result)},!1),pe.addEventListener("error",function(we){return ie(we)},!1),pe.readAsDataURL(ne.response)}else ie("Failed to proxy resource "+K+" with status code "+ne.status)},ne.onerror=ie;var oe=P.indexOf("?")>-1?"&":"?";if(ne.open("GET",""+P+oe+"url="+encodeURIComponent(B)+"&responseType="+D),D!=="text"&&ne instanceof XMLHttpRequest&&(ne.responseType=D),M._options.imageTimeout){var ue=M._options.imageTimeout;ne.timeout=ue,ne.ontimeout=function(){return ie("Timed out ("+ue+"ms) proxying "+K)}}ne.send()})},g}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(g){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(g)},isInlineImage=function(g){return INLINE_IMG.test(g)},isInlineBase64Image=function(g){return INLINE_BASE64.test(g)},isBlobImage=function(g){return g.substr(0,4)==="blob"},isSVG=function(g){return g.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(g)},Vector=function(){function g(B,M){this.type=0,this.x=B,this.y=M}return g.prototype.add=function(B,M){return new g(this.x+B,this.y+M)},g}(),lerp=function(g,B,M){return new Vector(g.x+(B.x-g.x)*M,g.y+(B.y-g.y)*M)},BezierCurve=function(){function g(B,M,P,K){this.type=1,this.start=B,this.startControl=M,this.endControl=P,this.end=K}return g.prototype.subdivide=function(B,M){var P=lerp(this.start,this.startControl,B),K=lerp(this.startControl,this.endControl,B),Y=lerp(this.endControl,this.end,B),ie=lerp(P,K,B),D=lerp(K,Y,B),ne=lerp(ie,D,B);return M?new g(this.start,P,ie,ne):new g(ne,D,Y,this.end)},g.prototype.add=function(B,M){return new g(this.start.add(B,M),this.startControl.add(B,M),this.endControl.add(B,M),this.end.add(B,M))},g.prototype.reverse=function(){return new g(this.end,this.endControl,this.startControl,this.start)},g}(),isBezierCurve=function(g){return g.type===1},BoundCurves=function(){function g(B){var M=B.styles,P=B.bounds,K=getAbsoluteValueForTuple(M.borderTopLeftRadius,P.width,P.height),Y=K[0],ie=K[1],D=getAbsoluteValueForTuple(M.borderTopRightRadius,P.width,P.height),ne=D[0],oe=D[1],ue=getAbsoluteValueForTuple(M.borderBottomRightRadius,P.width,P.height),pe=ue[0],we=ue[1],ke=getAbsoluteValueForTuple(M.borderBottomLeftRadius,P.width,P.height),Qe=ke[0],Ue=ke[1],We=[];We.push((Y+ne)/P.width),We.push((Qe+pe)/P.width),We.push((ie+Ue)/P.height),We.push((oe+we)/P.height);var Ne=Math.max.apply(Math,We);Ne>1&&(Y/=Ne,ie/=Ne,ne/=Ne,oe/=Ne,pe/=Ne,we/=Ne,Qe/=Ne,Ue/=Ne);var ut=P.width-ne,Ye=P.height-we,et=P.width-pe,rt=P.height-Ue,ft=M.borderTopWidth,Ze=M.borderRightWidth,wt=M.borderBottomWidth,Ft=M.borderLeftWidth,_t=getAbsoluteValue(M.paddingTop,B.bounds.width),Pt=getAbsoluteValue(M.paddingRight,B.bounds.width),Mt=getAbsoluteValue(M.paddingBottom,B.bounds.width),Vt=getAbsoluteValue(M.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=Y>0||ie>0?getCurvePoints(P.left+Ft/3,P.top+ft/3,Y-Ft/3,ie-ft/3,CORNER.TOP_LEFT):new Vector(P.left+Ft/3,P.top+ft/3),this.topRightBorderDoubleOuterBox=Y>0||ie>0?getCurvePoints(P.left+ut,P.top+ft/3,ne-Ze/3,oe-ft/3,CORNER.TOP_RIGHT):new Vector(P.left+P.width-Ze/3,P.top+ft/3),this.bottomRightBorderDoubleOuterBox=pe>0||we>0?getCurvePoints(P.left+et,P.top+Ye,pe-Ze/3,we-wt/3,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Ze/3,P.top+P.height-wt/3),this.bottomLeftBorderDoubleOuterBox=Qe>0||Ue>0?getCurvePoints(P.left+Ft/3,P.top+rt,Qe-Ft/3,Ue-wt/3,CORNER.BOTTOM_LEFT):new Vector(P.left+Ft/3,P.top+P.height-wt/3),this.topLeftBorderDoubleInnerBox=Y>0||ie>0?getCurvePoints(P.left+Ft*2/3,P.top+ft*2/3,Y-Ft*2/3,ie-ft*2/3,CORNER.TOP_LEFT):new Vector(P.left+Ft*2/3,P.top+ft*2/3),this.topRightBorderDoubleInnerBox=Y>0||ie>0?getCurvePoints(P.left+ut,P.top+ft*2/3,ne-Ze*2/3,oe-ft*2/3,CORNER.TOP_RIGHT):new Vector(P.left+P.width-Ze*2/3,P.top+ft*2/3),this.bottomRightBorderDoubleInnerBox=pe>0||we>0?getCurvePoints(P.left+et,P.top+Ye,pe-Ze*2/3,we-wt*2/3,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Ze*2/3,P.top+P.height-wt*2/3),this.bottomLeftBorderDoubleInnerBox=Qe>0||Ue>0?getCurvePoints(P.left+Ft*2/3,P.top+rt,Qe-Ft*2/3,Ue-wt*2/3,CORNER.BOTTOM_LEFT):new Vector(P.left+Ft*2/3,P.top+P.height-wt*2/3),this.topLeftBorderStroke=Y>0||ie>0?getCurvePoints(P.left+Ft/2,P.top+ft/2,Y-Ft/2,ie-ft/2,CORNER.TOP_LEFT):new Vector(P.left+Ft/2,P.top+ft/2),this.topRightBorderStroke=Y>0||ie>0?getCurvePoints(P.left+ut,P.top+ft/2,ne-Ze/2,oe-ft/2,CORNER.TOP_RIGHT):new Vector(P.left+P.width-Ze/2,P.top+ft/2),this.bottomRightBorderStroke=pe>0||we>0?getCurvePoints(P.left+et,P.top+Ye,pe-Ze/2,we-wt/2,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Ze/2,P.top+P.height-wt/2),this.bottomLeftBorderStroke=Qe>0||Ue>0?getCurvePoints(P.left+Ft/2,P.top+rt,Qe-Ft/2,Ue-wt/2,CORNER.BOTTOM_LEFT):new Vector(P.left+Ft/2,P.top+P.height-wt/2),this.topLeftBorderBox=Y>0||ie>0?getCurvePoints(P.left,P.top,Y,ie,CORNER.TOP_LEFT):new Vector(P.left,P.top),this.topRightBorderBox=ne>0||oe>0?getCurvePoints(P.left+ut,P.top,ne,oe,CORNER.TOP_RIGHT):new Vector(P.left+P.width,P.top),this.bottomRightBorderBox=pe>0||we>0?getCurvePoints(P.left+et,P.top+Ye,pe,we,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width,P.top+P.height),this.bottomLeftBorderBox=Qe>0||Ue>0?getCurvePoints(P.left,P.top+rt,Qe,Ue,CORNER.BOTTOM_LEFT):new Vector(P.left,P.top+P.height),this.topLeftPaddingBox=Y>0||ie>0?getCurvePoints(P.left+Ft,P.top+ft,Math.max(0,Y-Ft),Math.max(0,ie-ft),CORNER.TOP_LEFT):new Vector(P.left+Ft,P.top+ft),this.topRightPaddingBox=ne>0||oe>0?getCurvePoints(P.left+Math.min(ut,P.width-Ze),P.top+ft,ut>P.width+Ze?0:Math.max(0,ne-Ze),Math.max(0,oe-ft),CORNER.TOP_RIGHT):new Vector(P.left+P.width-Ze,P.top+ft),this.bottomRightPaddingBox=pe>0||we>0?getCurvePoints(P.left+Math.min(et,P.width-Ft),P.top+Math.min(Ye,P.height-wt),Math.max(0,pe-Ze),Math.max(0,we-wt),CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Ze,P.top+P.height-wt),this.bottomLeftPaddingBox=Qe>0||Ue>0?getCurvePoints(P.left+Ft,P.top+Math.min(rt,P.height-wt),Math.max(0,Qe-Ft),Math.max(0,Ue-wt),CORNER.BOTTOM_LEFT):new Vector(P.left+Ft,P.top+P.height-wt),this.topLeftContentBox=Y>0||ie>0?getCurvePoints(P.left+Ft+Vt,P.top+ft+_t,Math.max(0,Y-(Ft+Vt)),Math.max(0,ie-(ft+_t)),CORNER.TOP_LEFT):new Vector(P.left+Ft+Vt,P.top+ft+_t),this.topRightContentBox=ne>0||oe>0?getCurvePoints(P.left+Math.min(ut,P.width+Ft+Vt),P.top+ft+_t,ut>P.width+Ft+Vt?0:ne-Ft+Vt,oe-(ft+_t),CORNER.TOP_RIGHT):new Vector(P.left+P.width-(Ze+Pt),P.top+ft+_t),this.bottomRightContentBox=pe>0||we>0?getCurvePoints(P.left+Math.min(et,P.width-(Ft+Vt)),P.top+Math.min(Ye,P.height+ft+_t),Math.max(0,pe-(Ze+Pt)),we-(wt+Mt),CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-(Ze+Pt),P.top+P.height-(wt+Mt)),this.bottomLeftContentBox=Qe>0||Ue>0?getCurvePoints(P.left+Ft+Vt,P.top+rt,Math.max(0,Qe-(Ft+Vt)),Ue-(wt+Mt),CORNER.BOTTOM_LEFT):new Vector(P.left+Ft+Vt,P.top+P.height-(wt+Mt))}return g}(),CORNER;(function(g){g[g.TOP_LEFT=0]="TOP_LEFT",g[g.TOP_RIGHT=1]="TOP_RIGHT",g[g.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",g[g.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(g,B,M,P,K){var Y=4*((Math.sqrt(2)-1)/3),ie=M*Y,D=P*Y,ne=g+M,oe=B+P;switch(K){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(g,oe),new Vector(g,oe-D),new Vector(ne-ie,B),new Vector(ne,B));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(g,B),new Vector(g+ie,B),new Vector(ne,oe-D),new Vector(ne,oe));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(ne,B),new Vector(ne,B+D),new Vector(g+ie,oe),new Vector(g,oe));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(ne,oe),new Vector(ne-ie,oe),new Vector(g,B+D),new Vector(g,B))}},calculateBorderBoxPath=function(g){return[g.topLeftBorderBox,g.topRightBorderBox,g.bottomRightBorderBox,g.bottomLeftBorderBox]},calculateContentBoxPath=function(g){return[g.topLeftContentBox,g.topRightContentBox,g.bottomRightContentBox,g.bottomLeftContentBox]},calculatePaddingBoxPath=function(g){return[g.topLeftPaddingBox,g.topRightPaddingBox,g.bottomRightPaddingBox,g.bottomLeftPaddingBox]},TransformEffect=function(){function g(B,M,P){this.offsetX=B,this.offsetY=M,this.matrix=P,this.type=0,this.target=6}return g}(),ClipEffect=function(){function g(B,M){this.path=B,this.target=M,this.type=1}return g}(),OpacityEffect=function(){function g(B){this.opacity=B,this.type=2,this.target=6}return g}(),isTransformEffect=function(g){return g.type===0},isClipEffect=function(g){return g.type===1},isOpacityEffect=function(g){return g.type===2},equalPath=function(g,B){return g.length===B.length?g.some(function(M,P){return M===B[P]}):!1},transformPath=function(g,B,M,P,K){return g.map(function(Y,ie){switch(ie){case 0:return Y.add(B,M);case 1:return Y.add(B+P,M);case 2:return Y.add(B+P,M+K);case 3:return Y.add(B,M+K)}return Y})},StackingContext=function(){function g(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return g}(),ElementPaint=function(){function g(B,M){if(this.container=B,this.parent=M,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var P=this.container.bounds.left+this.container.styles.transformOrigin[0].number,K=this.container.bounds.top+this.container.styles.transformOrigin[1].number,Y=this.container.styles.transform;this.effects.push(new TransformEffect(P,K,Y))}if(this.container.styles.overflowX!==0){var ie=calculateBorderBoxPath(this.curves),D=calculatePaddingBoxPath(this.curves);equalPath(ie,D)?this.effects.push(new ClipEffect(ie,6)):(this.effects.push(new ClipEffect(ie,2)),this.effects.push(new ClipEffect(D,4)))}}return g.prototype.getEffects=function(B){for(var M=[2,3].indexOf(this.container.styles.position)===-1,P=this.parent,K=this.effects.slice(0);P;){var Y=P.effects.filter(function(ne){return!isClipEffect(ne)});if(M||P.container.styles.position!==0||!P.parent){if(K.unshift.apply(K,Y),M=[2,3].indexOf(P.container.styles.position)===-1,P.container.styles.overflowX!==0){var ie=calculateBorderBoxPath(P.curves),D=calculatePaddingBoxPath(P.curves);equalPath(ie,D)||K.unshift(new ClipEffect(D,6))}}else K.unshift.apply(K,Y);P=P.parent}return K.filter(function(ne){return contains(ne.target,B)})},g}(),parseStackTree=function(g,B,M,P){g.container.elements.forEach(function(K){var Y=contains(K.flags,4),ie=contains(K.flags,2),D=new ElementPaint(K,g);contains(K.styles.display,2048)&&P.push(D);var ne=contains(K.flags,8)?[]:P;if(Y||ie){var oe=Y||K.styles.isPositioned()?M:B,ue=new StackingContext(D);if(K.styles.isPositioned()||K.styles.opacity<1||K.styles.isTransformed()){var pe=K.styles.zIndex.order;if(pe<0){var we=0;oe.negativeZIndex.some(function(Qe,Ue){return pe>Qe.element.container.styles.zIndex.order?(we=Ue,!1):we>0}),oe.negativeZIndex.splice(we,0,ue)}else if(pe>0){var ke=0;oe.positiveZIndex.some(function(Qe,Ue){return pe>=Qe.element.container.styles.zIndex.order?(ke=Ue+1,!1):ke>0}),oe.positiveZIndex.splice(ke,0,ue)}else oe.zeroOrAutoZIndexOrTransformedOrOpacity.push(ue)}else K.styles.isFloating()?oe.nonPositionedFloats.push(ue):oe.nonPositionedInlineLevel.push(ue);parseStackTree(D,ue,Y?ue:M,ne)}else K.styles.isInlineLevel()?B.inlineLevel.push(D):B.nonInlineLevel.push(D),parseStackTree(D,B,M,ne);contains(K.flags,8)&&processListItems(K,ne)})},processListItems=function(g,B){for(var M=g instanceof OLElementContainer?g.start:1,P=g instanceof OLElementContainer?g.reversed:!1,K=0;K<B.length;K++){var Y=B[K];Y.container instanceof LIElementContainer&&typeof Y.container.value=="number"&&Y.container.value!==0&&(M=Y.container.value),Y.listValue=createCounterText(M,Y.container.styles.listStyleType,!0),M+=P?-1:1}},parseStackingContexts=function(g){var B=new ElementPaint(g,null),M=new StackingContext(B),P=[];return parseStackTree(B,M,M,P),processListItems(B.container,P),M},parsePathForBorder=function(g,B){switch(B){case 0:return createPathFromCurves(g.topLeftBorderBox,g.topLeftPaddingBox,g.topRightBorderBox,g.topRightPaddingBox);case 1:return createPathFromCurves(g.topRightBorderBox,g.topRightPaddingBox,g.bottomRightBorderBox,g.bottomRightPaddingBox);case 2:return createPathFromCurves(g.bottomRightBorderBox,g.bottomRightPaddingBox,g.bottomLeftBorderBox,g.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(g.bottomLeftBorderBox,g.bottomLeftPaddingBox,g.topLeftBorderBox,g.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(g,B){switch(B){case 0:return createPathFromCurves(g.topLeftBorderBox,g.topLeftBorderDoubleOuterBox,g.topRightBorderBox,g.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(g.topRightBorderBox,g.topRightBorderDoubleOuterBox,g.bottomRightBorderBox,g.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(g.bottomRightBorderBox,g.bottomRightBorderDoubleOuterBox,g.bottomLeftBorderBox,g.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(g.bottomLeftBorderBox,g.bottomLeftBorderDoubleOuterBox,g.topLeftBorderBox,g.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(g,B){switch(B){case 0:return createPathFromCurves(g.topLeftBorderDoubleInnerBox,g.topLeftPaddingBox,g.topRightBorderDoubleInnerBox,g.topRightPaddingBox);case 1:return createPathFromCurves(g.topRightBorderDoubleInnerBox,g.topRightPaddingBox,g.bottomRightBorderDoubleInnerBox,g.bottomRightPaddingBox);case 2:return createPathFromCurves(g.bottomRightBorderDoubleInnerBox,g.bottomRightPaddingBox,g.bottomLeftBorderDoubleInnerBox,g.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(g.bottomLeftBorderDoubleInnerBox,g.bottomLeftPaddingBox,g.topLeftBorderDoubleInnerBox,g.topLeftPaddingBox)}},parsePathForBorderStroke=function(g,B){switch(B){case 0:return createStrokePathFromCurves(g.topLeftBorderStroke,g.topRightBorderStroke);case 1:return createStrokePathFromCurves(g.topRightBorderStroke,g.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(g.bottomRightBorderStroke,g.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(g.bottomLeftBorderStroke,g.topLeftBorderStroke)}},createStrokePathFromCurves=function(g,B){var M=[];return isBezierCurve(g)?M.push(g.subdivide(.5,!1)):M.push(g),isBezierCurve(B)?M.push(B.subdivide(.5,!0)):M.push(B),M},createPathFromCurves=function(g,B,M,P){var K=[];return isBezierCurve(g)?K.push(g.subdivide(.5,!1)):K.push(g),isBezierCurve(M)?K.push(M.subdivide(.5,!0)):K.push(M),isBezierCurve(P)?K.push(P.subdivide(.5,!0).reverse()):K.push(P),isBezierCurve(B)?K.push(B.subdivide(.5,!1).reverse()):K.push(B),K},paddingBox=function(g){var B=g.bounds,M=g.styles;return B.add(M.borderLeftWidth,M.borderTopWidth,-(M.borderRightWidth+M.borderLeftWidth),-(M.borderTopWidth+M.borderBottomWidth))},contentBox=function(g){var B=g.styles,M=g.bounds,P=getAbsoluteValue(B.paddingLeft,M.width),K=getAbsoluteValue(B.paddingRight,M.width),Y=getAbsoluteValue(B.paddingTop,M.width),ie=getAbsoluteValue(B.paddingBottom,M.width);return M.add(P+B.borderLeftWidth,Y+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+P+K),-(B.borderTopWidth+B.borderBottomWidth+Y+ie))},calculateBackgroundPositioningArea=function(g,B){return g===0?B.bounds:g===2?contentBox(B):paddingBox(B)},calculateBackgroundPaintingArea=function(g,B){return g===0?B.bounds:g===2?contentBox(B):paddingBox(B)},calculateBackgroundRendering=function(g,B,M){var P=calculateBackgroundPositioningArea(getBackgroundValueForIndex(g.styles.backgroundOrigin,B),g),K=calculateBackgroundPaintingArea(getBackgroundValueForIndex(g.styles.backgroundClip,B),g),Y=calculateBackgroundSize(getBackgroundValueForIndex(g.styles.backgroundSize,B),M,P),ie=Y[0],D=Y[1],ne=getAbsoluteValueForTuple(getBackgroundValueForIndex(g.styles.backgroundPosition,B),P.width-ie,P.height-D),oe=calculateBackgroundRepeatPath(getBackgroundValueForIndex(g.styles.backgroundRepeat,B),ne,Y,P,K),ue=Math.round(P.left+ne[0]),pe=Math.round(P.top+ne[1]);return[oe,ue,pe,ie,D]},isAuto=function(g){return isIdentToken(g)&&g.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(g){return typeof g=="number"},calculateBackgroundSize=function(g,B,M){var P=B[0],K=B[1],Y=B[2],ie=g[0],D=g[1];if(!ie)return[0,0];if(isLengthPercentage(ie)&&D&&isLengthPercentage(D))return[getAbsoluteValue(ie,M.width),getAbsoluteValue(D,M.height)];var ne=hasIntrinsicValue(Y);if(isIdentToken(ie)&&(ie.value===BACKGROUND_SIZE.CONTAIN||ie.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(Y)){var oe=M.width/M.height;return oe<Y!=(ie.value===BACKGROUND_SIZE.COVER)?[M.width,M.width/Y]:[M.height*Y,M.height]}return[M.width,M.height]}var ue=hasIntrinsicValue(P),pe=hasIntrinsicValue(K),we=ue||pe;if(isAuto(ie)&&(!D||isAuto(D))){if(ue&&pe)return[P,K];if(!ne&&!we)return[M.width,M.height];if(we&&ne){var ke=ue?P:K*Y,Qe=pe?K:P/Y;return[ke,Qe]}var Ue=ue?P:M.width,We=pe?K:M.height;return[Ue,We]}if(ne){var Ne=0,ut=0;return isLengthPercentage(ie)?Ne=getAbsoluteValue(ie,M.width):isLengthPercentage(D)&&(ut=getAbsoluteValue(D,M.height)),isAuto(ie)?Ne=ut*Y:(!D||isAuto(D))&&(ut=Ne/Y),[Ne,ut]}var Ye=null,et=null;if(isLengthPercentage(ie)?Ye=getAbsoluteValue(ie,M.width):D&&isLengthPercentage(D)&&(et=getAbsoluteValue(D,M.height)),Ye!==null&&(!D||isAuto(D))&&(et=ue&&pe?Ye/P*K:M.height),et!==null&&isAuto(ie)&&(Ye=ue&&pe?et/K*P:M.width),Ye!==null&&et!==null)return[Ye,et];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(g,B){var M=g[B];return typeof M>"u"?g[0]:M},calculateBackgroundRepeatPath=function(g,B,M,P,K){var Y=B[0],ie=B[1],D=M[0],ne=M[1];switch(g){case 2:return[new Vector(Math.round(P.left),Math.round(P.top+ie)),new Vector(Math.round(P.left+P.width),Math.round(P.top+ie)),new Vector(Math.round(P.left+P.width),Math.round(ne+P.top+ie)),new Vector(Math.round(P.left),Math.round(ne+P.top+ie))];case 3:return[new Vector(Math.round(P.left+Y),Math.round(P.top)),new Vector(Math.round(P.left+Y+D),Math.round(P.top)),new Vector(Math.round(P.left+Y+D),Math.round(P.height+P.top)),new Vector(Math.round(P.left+Y),Math.round(P.height+P.top))];case 1:return[new Vector(Math.round(P.left+Y),Math.round(P.top+ie)),new Vector(Math.round(P.left+Y+D),Math.round(P.top+ie)),new Vector(Math.round(P.left+Y+D),Math.round(P.top+ie+ne)),new Vector(Math.round(P.left+Y),Math.round(P.top+ie+ne))];default:return[new Vector(Math.round(K.left),Math.round(K.top)),new Vector(Math.round(K.left+K.width),Math.round(K.top)),new Vector(Math.round(K.left+K.width),Math.round(K.height+K.top)),new Vector(Math.round(K.left),Math.round(K.height+K.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function g(B){this._data={},this._document=B}return g.prototype.parseMetrics=function(B,M){var P=this._document.createElement("div"),K=this._document.createElement("img"),Y=this._document.createElement("span"),ie=this._document.body;P.style.visibility="hidden",P.style.fontFamily=B,P.style.fontSize=M,P.style.margin="0",P.style.padding="0",P.style.whiteSpace="nowrap",ie.appendChild(P),K.src=SMALL_IMAGE,K.width=1,K.height=1,K.style.margin="0",K.style.padding="0",K.style.verticalAlign="baseline",Y.style.fontFamily=B,Y.style.fontSize=M,Y.style.margin="0",Y.style.padding="0",Y.appendChild(this._document.createTextNode(SAMPLE_TEXT)),P.appendChild(Y),P.appendChild(K);var D=K.offsetTop-Y.offsetTop+2;P.removeChild(Y),P.appendChild(this._document.createTextNode(SAMPLE_TEXT)),P.style.lineHeight="normal",K.style.verticalAlign="super";var ne=K.offsetTop-P.offsetTop+2;return ie.removeChild(P),{baseline:D,middle:ne}},g.prototype.getMetrics=function(B,M){var P=B+" "+M;return typeof this._data[P]>"u"&&(this._data[P]=this.parseMetrics(B,M)),this._data[P]},g}(),Renderer=function(){function g(B,M){this.context=B,this.options=M}return g}(),MASK_OFFSET=1e4,CanvasRenderer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K._activeEffects=[],K.canvas=P.canvas?P.canvas:document.createElement("canvas"),K.ctx=K.canvas.getContext("2d"),P.canvas||(K.canvas.width=Math.floor(P.width*P.scale),K.canvas.height=Math.floor(P.height*P.scale),K.canvas.style.width=P.width+"px",K.canvas.style.height=P.height+"px"),K.fontMetrics=new FontMetrics(document),K.ctx.scale(K.options.scale,K.options.scale),K.ctx.translate(-P.x,-P.y),K.ctx.textBaseline="bottom",K._activeEffects=[],K.context.logger.debug("Canvas renderer initialized ("+P.width+"x"+P.height+") with scale "+P.scale),K}return B.prototype.applyEffects=function(M){for(var P=this;this._activeEffects.length;)this.popEffect();M.forEach(function(K){return P.applyEffect(K)})},B.prototype.applyEffect=function(M){this.ctx.save(),isOpacityEffect(M)&&(this.ctx.globalAlpha=M.opacity),isTransformEffect(M)&&(this.ctx.translate(M.offsetX,M.offsetY),this.ctx.transform(M.matrix[0],M.matrix[1],M.matrix[2],M.matrix[3],M.matrix[4],M.matrix[5]),this.ctx.translate(-M.offsetX,-M.offsetY)),isClipEffect(M)&&(this.path(M.path),this.ctx.clip()),this._activeEffects.push(M)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(M){return __awaiter(this,void 0,void 0,function(){var P;return __generator(this,function(K){switch(K.label){case 0:return P=M.element.container.styles,P.isVisible()?[4,this.renderStackContent(M)]:[3,2];case 1:K.sent(),K.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(M){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(P){switch(P.label){case 0:if(contains(M.container.flags,16))debugger;return M.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(M)]:[3,3];case 1:return P.sent(),[4,this.renderNodeContent(M)];case 2:P.sent(),P.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(M,P,K){var Y=this;if(P===0)this.ctx.fillText(M.text,M.bounds.left,M.bounds.top+K);else{var ie=segmentGraphemes(M.text);ie.reduce(function(D,ne){return Y.ctx.fillText(ne,D,M.bounds.top+K),D+Y.ctx.measureText(ne).width},M.bounds.left)}},B.prototype.createFontStyle=function(M){var P=M.fontVariant.filter(function(ie){return ie==="normal"||ie==="small-caps"}).join(""),K=fixIOSSystemFonts(M.fontFamily).join(", "),Y=isDimensionToken(M.fontSize)?""+M.fontSize.number+M.fontSize.unit:M.fontSize.number+"px";return[[M.fontStyle,P,M.fontWeight,Y,K].join(" "),K,Y]},B.prototype.renderTextNode=function(M,P){return __awaiter(this,void 0,void 0,function(){var K,Y,ie,D,ne,oe,ue,pe,we=this;return __generator(this,function(ke){return K=this.createFontStyle(P),Y=K[0],ie=K[1],D=K[2],this.ctx.font=Y,this.ctx.direction=P.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ne=this.fontMetrics.getMetrics(ie,D),oe=ne.baseline,ue=ne.middle,pe=P.paintOrder,M.textBounds.forEach(function(Qe){pe.forEach(function(Ue){switch(Ue){case 0:we.ctx.fillStyle=asString(P.color),we.renderTextWithLetterSpacing(Qe,P.letterSpacing,oe);var We=P.textShadow;We.length&&Qe.text.trim().length&&(We.slice(0).reverse().forEach(function(Ne){we.ctx.shadowColor=asString(Ne.color),we.ctx.shadowOffsetX=Ne.offsetX.number*we.options.scale,we.ctx.shadowOffsetY=Ne.offsetY.number*we.options.scale,we.ctx.shadowBlur=Ne.blur.number,we.renderTextWithLetterSpacing(Qe,P.letterSpacing,oe)}),we.ctx.shadowColor="",we.ctx.shadowOffsetX=0,we.ctx.shadowOffsetY=0,we.ctx.shadowBlur=0),P.textDecorationLine.length&&(we.ctx.fillStyle=asString(P.textDecorationColor||P.color),P.textDecorationLine.forEach(function(Ne){switch(Ne){case 1:we.ctx.fillRect(Qe.bounds.left,Math.round(Qe.bounds.top+oe),Qe.bounds.width,1);break;case 2:we.ctx.fillRect(Qe.bounds.left,Math.round(Qe.bounds.top),Qe.bounds.width,1);break;case 3:we.ctx.fillRect(Qe.bounds.left,Math.ceil(Qe.bounds.top+ue),Qe.bounds.width,1);break}}));break;case 1:P.webkitTextStrokeWidth&&Qe.text.trim().length&&(we.ctx.strokeStyle=asString(P.webkitTextStrokeColor),we.ctx.lineWidth=P.webkitTextStrokeWidth,we.ctx.lineJoin=window.chrome?"miter":"round",we.ctx.strokeText(Qe.text,Qe.bounds.left,Qe.bounds.top+oe)),we.ctx.strokeStyle="",we.ctx.lineWidth=0,we.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(M,P,K){if(K&&M.intrinsicWidth>0&&M.intrinsicHeight>0){var Y=contentBox(M),ie=calculatePaddingBoxPath(P);this.path(ie),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(K,0,0,M.intrinsicWidth,M.intrinsicHeight,Y.left,Y.top,Y.width,Y.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Y,ie,D,ne,ut,ut,oe,ue,pe,we,et,ke,Qe,rt,Ue,We,Ne,ut,Ye,et,rt;return __generator(this,function(ft){switch(ft.label){case 0:this.applyEffects(M.getEffects(4)),P=M.container,K=M.curves,Y=P.styles,ie=0,D=P.textNodes,ft.label=1;case 1:return ie<D.length?(ne=D[ie],[4,this.renderTextNode(ne,Y)]):[3,4];case 2:ft.sent(),ft.label=3;case 3:return ie++,[3,1];case 4:if(!(P instanceof ImageElementContainer))return[3,8];ft.label=5;case 5:return ft.trys.push([5,7,,8]),[4,this.context.cache.match(P.src)];case 6:return ut=ft.sent(),this.renderReplacedElement(P,K,ut),[3,8];case 7:return ft.sent(),this.context.logger.error("Error loading image "+P.src),[3,8];case 8:if(P instanceof CanvasElementContainer&&this.renderReplacedElement(P,K,P.canvas),!(P instanceof SVGElementContainer))return[3,12];ft.label=9;case 9:return ft.trys.push([9,11,,12]),[4,this.context.cache.match(P.svg)];case 10:return ut=ft.sent(),this.renderReplacedElement(P,K,ut),[3,12];case 11:return ft.sent(),this.context.logger.error("Error loading svg "+P.svg.substring(0,255)),[3,12];case 12:return P instanceof IFrameElementContainer&&P.tree?(oe=new B(this.context,{scale:this.options.scale,backgroundColor:P.backgroundColor,x:0,y:0,width:P.width,height:P.height}),[4,oe.render(P.tree)]):[3,14];case 13:ue=ft.sent(),P.width&&P.height&&this.ctx.drawImage(ue,0,0,P.width,P.height,P.bounds.left,P.bounds.top,P.bounds.width,P.bounds.height),ft.label=14;case 14:if(P instanceof InputElementContainer&&(pe=Math.min(P.bounds.width,P.bounds.height),P.type===CHECKBOX?P.checked&&(this.ctx.save(),this.path([new Vector(P.bounds.left+pe*.39363,P.bounds.top+pe*.79),new Vector(P.bounds.left+pe*.16,P.bounds.top+pe*.5549),new Vector(P.bounds.left+pe*.27347,P.bounds.top+pe*.44071),new Vector(P.bounds.left+pe*.39694,P.bounds.top+pe*.5649),new Vector(P.bounds.left+pe*.72983,P.bounds.top+pe*.23),new Vector(P.bounds.left+pe*.84,P.bounds.top+pe*.34085),new Vector(P.bounds.left+pe*.39363,P.bounds.top+pe*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):P.type===RADIO&&P.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(P.bounds.left+pe/2,P.bounds.top+pe/2,pe/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(P)&&P.value.length){switch(we=this.createFontStyle(Y),et=we[0],ke=we[1],Qe=this.fontMetrics.getMetrics(et,ke).baseline,this.ctx.font=et,this.ctx.fillStyle=asString(Y.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(P.styles.textAlign),rt=contentBox(P),Ue=0,P.styles.textAlign){case 1:Ue+=rt.width/2;break;case 2:Ue+=rt.width;break}We=rt.add(Ue,0,0,-rt.height/2+1),this.ctx.save(),this.path([new Vector(rt.left,rt.top),new Vector(rt.left+rt.width,rt.top),new Vector(rt.left+rt.width,rt.top+rt.height),new Vector(rt.left,rt.top+rt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(P.value,We),Y.letterSpacing,Qe),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(P.styles.display,2048))return[3,20];if(P.styles.listStyleImage===null)return[3,19];if(Ne=P.styles.listStyleImage,Ne.type!==0)return[3,18];ut=void 0,Ye=Ne.url,ft.label=15;case 15:return ft.trys.push([15,17,,18]),[4,this.context.cache.match(Ye)];case 16:return ut=ft.sent(),this.ctx.drawImage(ut,P.bounds.left-(ut.width+10),P.bounds.top),[3,18];case 17:return ft.sent(),this.context.logger.error("Error loading list-style-image "+Ye),[3,18];case 18:return[3,20];case 19:M.listValue&&P.styles.listStyleType!==-1&&(et=this.createFontStyle(Y)[0],this.ctx.font=et,this.ctx.fillStyle=asString(Y.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",rt=new Bounds(P.bounds.left,P.bounds.top+getAbsoluteValue(P.styles.paddingTop,P.bounds.width),P.bounds.width,computeLineHeight(Y.lineHeight,Y.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(M.listValue,rt),Y.letterSpacing,computeLineHeight(Y.lineHeight,Y.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ft.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Ne,Y,ie,Ne,D,ne,Ne,oe,ue,Ne,pe,we,Ne,ke,Qe,Ne,Ue,We,Ne;return __generator(this,function(ut){switch(ut.label){case 0:if(contains(M.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(M.element)];case 1:ut.sent(),P=0,K=M.negativeZIndex,ut.label=2;case 2:return P<K.length?(Ne=K[P],[4,this.renderStack(Ne)]):[3,5];case 3:ut.sent(),ut.label=4;case 4:return P++,[3,2];case 5:return[4,this.renderNodeContent(M.element)];case 6:ut.sent(),Y=0,ie=M.nonInlineLevel,ut.label=7;case 7:return Y<ie.length?(Ne=ie[Y],[4,this.renderNode(Ne)]):[3,10];case 8:ut.sent(),ut.label=9;case 9:return Y++,[3,7];case 10:D=0,ne=M.nonPositionedFloats,ut.label=11;case 11:return D<ne.length?(Ne=ne[D],[4,this.renderStack(Ne)]):[3,14];case 12:ut.sent(),ut.label=13;case 13:return D++,[3,11];case 14:oe=0,ue=M.nonPositionedInlineLevel,ut.label=15;case 15:return oe<ue.length?(Ne=ue[oe],[4,this.renderStack(Ne)]):[3,18];case 16:ut.sent(),ut.label=17;case 17:return oe++,[3,15];case 18:pe=0,we=M.inlineLevel,ut.label=19;case 19:return pe<we.length?(Ne=we[pe],[4,this.renderNode(Ne)]):[3,22];case 20:ut.sent(),ut.label=21;case 21:return pe++,[3,19];case 22:ke=0,Qe=M.zeroOrAutoZIndexOrTransformedOrOpacity,ut.label=23;case 23:return ke<Qe.length?(Ne=Qe[ke],[4,this.renderStack(Ne)]):[3,26];case 24:ut.sent(),ut.label=25;case 25:return ke++,[3,23];case 26:Ue=0,We=M.positiveZIndex,ut.label=27;case 27:return Ue<We.length?(Ne=We[Ue],[4,this.renderStack(Ne)]):[3,30];case 28:ut.sent(),ut.label=29;case 29:return Ue++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(M){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(M.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(M){this.ctx.beginPath(),this.formatPath(M),this.ctx.closePath()},B.prototype.formatPath=function(M){var P=this;M.forEach(function(K,Y){var ie=isBezierCurve(K)?K.start:K;Y===0?P.ctx.moveTo(ie.x,ie.y):P.ctx.lineTo(ie.x,ie.y),isBezierCurve(K)&&P.ctx.bezierCurveTo(K.startControl.x,K.startControl.y,K.endControl.x,K.endControl.y,K.end.x,K.end.y)})},B.prototype.renderRepeat=function(M,P,K,Y){this.path(M),this.ctx.fillStyle=P,this.ctx.translate(K,Y),this.ctx.fill(),this.ctx.translate(-K,-Y)},B.prototype.resizeImage=function(M,P,K){var Y;if(M.width===P&&M.height===K)return M;var ie=(Y=this.canvas.ownerDocument)!==null&&Y!==void 0?Y:document,D=ie.createElement("canvas");D.width=Math.max(1,P),D.height=Math.max(1,K);var ne=D.getContext("2d");return ne.drawImage(M,0,0,M.width,M.height,0,0,P,K),D},B.prototype.renderBackgroundImage=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Y,ie,D,ne;return __generator(this,function(oe){switch(oe.label){case 0:P=M.styles.backgroundImage.length-1,K=function(ue){var pe,we,ke,_t,Ei,Li,Vt,Ai,wt,Qe,_t,Ei,Li,Vt,Ai,Ue,We,Ne,ut,Ye,et,rt,ft,Ze,wt,Ft,_t,Pt,Mt,Vt,Ai,Ri,Ei,Li,Yi,vi,d,w,S,k,R,W;return __generator(this,function(se){switch(se.label){case 0:if(ue.type!==0)return[3,5];pe=void 0,we=ue.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,Y.context.cache.match(we)];case 2:return pe=se.sent(),[3,4];case 3:return se.sent(),Y.context.logger.error("Error loading background-image "+we),[3,4];case 4:return pe&&(ke=calculateBackgroundRendering(M,P,[pe.width,pe.height,pe.width/pe.height]),_t=ke[0],Ei=ke[1],Li=ke[2],Vt=ke[3],Ai=ke[4],wt=Y.ctx.createPattern(Y.resizeImage(pe,Vt,Ai),"repeat"),Y.renderRepeat(_t,wt,Ei,Li)),[3,6];case 5:isLinearGradient(ue)?(Qe=calculateBackgroundRendering(M,P,[null,null,null]),_t=Qe[0],Ei=Qe[1],Li=Qe[2],Vt=Qe[3],Ai=Qe[4],Ue=calculateGradientDirection(ue.angle,Vt,Ai),We=Ue[0],Ne=Ue[1],ut=Ue[2],Ye=Ue[3],et=Ue[4],rt=document.createElement("canvas"),rt.width=Vt,rt.height=Ai,ft=rt.getContext("2d"),Ze=ft.createLinearGradient(Ne,Ye,ut,et),processColorStops(ue.stops,We).forEach(function(le){return Ze.addColorStop(le.stop,asString(le.color))}),ft.fillStyle=Ze,ft.fillRect(0,0,Vt,Ai),Vt>0&&Ai>0&&(wt=Y.ctx.createPattern(rt,"repeat"),Y.renderRepeat(_t,wt,Ei,Li))):isRadialGradient(ue)&&(Ft=calculateBackgroundRendering(M,P,[null,null,null]),_t=Ft[0],Pt=Ft[1],Mt=Ft[2],Vt=Ft[3],Ai=Ft[4],Ri=ue.position.length===0?[FIFTY_PERCENT]:ue.position,Ei=getAbsoluteValue(Ri[0],Vt),Li=getAbsoluteValue(Ri[Ri.length-1],Ai),Yi=calculateRadius(ue,Ei,Li,Vt,Ai),vi=Yi[0],d=Yi[1],vi>0&&d>0&&(w=Y.ctx.createRadialGradient(Pt+Ei,Mt+Li,0,Pt+Ei,Mt+Li,vi),processColorStops(ue.stops,vi*2).forEach(function(le){return w.addColorStop(le.stop,asString(le.color))}),Y.path(_t),Y.ctx.fillStyle=w,vi!==d?(S=M.bounds.left+.5*M.bounds.width,k=M.bounds.top+.5*M.bounds.height,R=d/vi,W=1/R,Y.ctx.save(),Y.ctx.translate(S,k),Y.ctx.transform(1,0,0,R,0,0),Y.ctx.translate(-S,-k),Y.ctx.fillRect(Pt,W*(Mt-k)+k,Vt,Ai*W),Y.ctx.restore()):Y.ctx.fill())),se.label=6;case 6:return P--,[2]}})},Y=this,ie=0,D=M.styles.backgroundImage.slice(0).reverse(),oe.label=1;case 1:return ie<D.length?(ne=D[ie],[5,K(ne)]):[3,4];case 2:oe.sent(),oe.label=3;case 3:return ie++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(M,P,K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(Y){return this.path(parsePathForBorder(K,P)),this.ctx.fillStyle=asString(M),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(M,P,K,Y){return __awaiter(this,void 0,void 0,function(){var ie,D;return __generator(this,function(ne){switch(ne.label){case 0:return P<3?[4,this.renderSolidBorder(M,K,Y)]:[3,2];case 1:return ne.sent(),[2];case 2:return ie=parsePathForBorderDoubleOuter(Y,K),this.path(ie),this.ctx.fillStyle=asString(M),this.ctx.fill(),D=parsePathForBorderDoubleInner(Y,K),this.path(D),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Y,ie,D,ne,oe,ue,pe=this;return __generator(this,function(we){switch(we.label){case 0:return this.applyEffects(M.getEffects(2)),P=M.container.styles,K=!isTransparent(P.backgroundColor)||P.backgroundImage.length,Y=[{style:P.borderTopStyle,color:P.borderTopColor,width:P.borderTopWidth},{style:P.borderRightStyle,color:P.borderRightColor,width:P.borderRightWidth},{style:P.borderBottomStyle,color:P.borderBottomColor,width:P.borderBottomWidth},{style:P.borderLeftStyle,color:P.borderLeftColor,width:P.borderLeftWidth}],ie=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(P.backgroundClip,0),M.curves),K||P.boxShadow.length?(this.ctx.save(),this.path(ie),this.ctx.clip(),isTransparent(P.backgroundColor)||(this.ctx.fillStyle=asString(P.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(M.container)]):[3,2];case 1:we.sent(),this.ctx.restore(),P.boxShadow.slice(0).reverse().forEach(function(ke){pe.ctx.save();var Qe=calculateBorderBoxPath(M.curves),Ue=ke.inset?0:MASK_OFFSET,We=transformPath(Qe,-Ue+(ke.inset?1:-1)*ke.spread.number,(ke.inset?1:-1)*ke.spread.number,ke.spread.number*(ke.inset?-2:2),ke.spread.number*(ke.inset?-2:2));ke.inset?(pe.path(Qe),pe.ctx.clip(),pe.mask(We)):(pe.mask(Qe),pe.ctx.clip(),pe.path(We)),pe.ctx.shadowOffsetX=ke.offsetX.number+Ue,pe.ctx.shadowOffsetY=ke.offsetY.number,pe.ctx.shadowColor=asString(ke.color),pe.ctx.shadowBlur=ke.blur.number,pe.ctx.fillStyle=ke.inset?asString(ke.color):"rgba(0,0,0,1)",pe.ctx.fill(),pe.ctx.restore()}),we.label=2;case 2:D=0,ne=0,oe=Y,we.label=3;case 3:return ne<oe.length?(ue=oe[ne],ue.style!==0&&!isTransparent(ue.color)&&ue.width>0?ue.style!==2?[3,5]:[4,this.renderDashedDottedBorder(ue.color,ue.width,D,M.curves,2)]:[3,11]):[3,13];case 4:return we.sent(),[3,11];case 5:return ue.style!==3?[3,7]:[4,this.renderDashedDottedBorder(ue.color,ue.width,D,M.curves,3)];case 6:return we.sent(),[3,11];case 7:return ue.style!==4?[3,9]:[4,this.renderDoubleBorder(ue.color,ue.width,D,M.curves)];case 8:return we.sent(),[3,11];case 9:return[4,this.renderSolidBorder(ue.color,D,M.curves)];case 10:we.sent(),we.label=11;case 11:D++,we.label=12;case 12:return ne++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(M,P,K,Y,ie){return __awaiter(this,void 0,void 0,function(){var D,ne,oe,ue,pe,we,ke,Qe,Ue,We,Ne,ut,Ye,et,rt,ft,rt,ft;return __generator(this,function(Ze){return this.ctx.save(),D=parsePathForBorderStroke(Y,K),ne=parsePathForBorder(Y,K),ie===2&&(this.path(ne),this.ctx.clip()),isBezierCurve(ne[0])?(oe=ne[0].start.x,ue=ne[0].start.y):(oe=ne[0].x,ue=ne[0].y),isBezierCurve(ne[1])?(pe=ne[1].end.x,we=ne[1].end.y):(pe=ne[1].x,we=ne[1].y),K===0||K===2?ke=Math.abs(oe-pe):ke=Math.abs(ue-we),this.ctx.beginPath(),ie===3?this.formatPath(D):this.formatPath(ne.slice(0,2)),Qe=P<3?P*3:P*2,Ue=P<3?P*2:P,ie===3&&(Qe=P,Ue=P),We=!0,ke<=Qe*2?We=!1:ke<=Qe*2+Ue?(Ne=ke/(2*Qe+Ue),Qe*=Ne,Ue*=Ne):(ut=Math.floor((ke+Ue)/(Qe+Ue)),Ye=(ke-ut*Qe)/(ut-1),et=(ke-(ut+1)*Qe)/ut,Ue=et<=0||Math.abs(Ue-Ye)<Math.abs(Ue-et)?Ye:et),We&&(ie===3?this.ctx.setLineDash([0,Qe+Ue]):this.ctx.setLineDash([Qe,Ue])),ie===3?(this.ctx.lineCap="round",this.ctx.lineWidth=P):this.ctx.lineWidth=P*2+1.1,this.ctx.strokeStyle=asString(M),this.ctx.stroke(),this.ctx.setLineDash([]),ie===2&&(isBezierCurve(ne[0])&&(rt=ne[3],ft=ne[0],this.ctx.beginPath(),this.formatPath([new Vector(rt.end.x,rt.end.y),new Vector(ft.start.x,ft.start.y)]),this.ctx.stroke()),isBezierCurve(ne[1])&&(rt=ne[1],ft=ne[2],this.ctx.beginPath(),this.formatPath([new Vector(rt.end.x,rt.end.y),new Vector(ft.start.x,ft.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(M){return __awaiter(this,void 0,void 0,function(){var P;return __generator(this,function(K){switch(K.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),P=parseStackingContexts(M),[4,this.renderStack(P)];case 1:return K.sent(),this.applyEffects([]),[2,this.canvas]}})})},B}(Renderer),isTextInputElement=function(g){return g instanceof TextareaElementContainer||g instanceof SelectElementContainer?!0:g instanceof InputElementContainer&&g.type!==RADIO&&g.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(g,B){switch(g){case 0:return calculateBorderBoxPath(B);case 2:return calculateContentBoxPath(B);case 1:default:return calculatePaddingBoxPath(B)}},canvasTextAlign=function(g){switch(g){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(g){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?g.filter(function(B){return iOSBrokenFonts.indexOf(B)===-1}):g},ForeignObjectRenderer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.canvas=P.canvas?P.canvas:document.createElement("canvas"),K.ctx=K.canvas.getContext("2d"),K.options=P,K.canvas.width=Math.floor(P.width*P.scale),K.canvas.height=Math.floor(P.height*P.scale),K.canvas.style.width=P.width+"px",K.canvas.style.height=P.height+"px",K.ctx.scale(K.options.scale,K.options.scale),K.ctx.translate(-P.x,-P.y),K.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+P.width+"x"+P.height+" at "+P.x+","+P.y+") with scale "+P.scale),K}return B.prototype.render=function(M){return __awaiter(this,void 0,void 0,function(){var P,K;return __generator(this,function(Y){switch(Y.label){case 0:return P=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,M),[4,loadSerializedSVG(P)];case 1:return K=Y.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(K,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B}(Renderer),loadSerializedSVG=function(g){return new Promise(function(B,M){var P=new Image;P.onload=function(){B(P)},P.onerror=M,P.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(g))})},Logger=function(){function g(B){var M=B.id,P=B.enabled;this.id=M,this.enabled=P,this.start=Date.now()}return g.prototype.debug=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},g.prototype.getTime=function(){return Date.now()-this.start},g.prototype.info=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B))},g.prototype.warn=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},g.prototype.error=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},g.instances={},g}(),Context=function(){function g(B,M){var P;this.windowBounds=M,this.instanceName="#"+g.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:B.logging}),this.cache=(P=B.cache)!==null&&P!==void 0?P:new Cache(this,B)}return g.instanceCount=1,g}(),html2canvas=function(g,B){return B===void 0&&(B={}),renderElement(g,B)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(g,B){return __awaiter(void 0,void 0,void 0,function(){var M,P,K,Y,ie,D,ne,oe,ue,pe,we,ke,Qe,Ue,We,Ne,ut,Ye,et,rt,Ze,ft,Ze,wt,Ft,_t,Pt,Mt,Vt,Ai,Ri,Ei,Li,Yi,vi,d,w,S,k,R;return __generator(this,function(W){switch(W.label){case 0:if(!g||typeof g!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(M=g.ownerDocument,!M)throw new Error("Element is not attached to a Document");if(P=M.defaultView,!P)throw new Error("Document is not attached to a Window");return K={allowTaint:(wt=B.allowTaint)!==null&&wt!==void 0?wt:!1,imageTimeout:(Ft=B.imageTimeout)!==null&&Ft!==void 0?Ft:15e3,proxy:B.proxy,useCORS:(_t=B.useCORS)!==null&&_t!==void 0?_t:!1},Y=__assign({logging:(Pt=B.logging)!==null&&Pt!==void 0?Pt:!0,cache:B.cache},K),ie={windowWidth:(Mt=B.windowWidth)!==null&&Mt!==void 0?Mt:P.innerWidth,windowHeight:(Vt=B.windowHeight)!==null&&Vt!==void 0?Vt:P.innerHeight,scrollX:(Ai=B.scrollX)!==null&&Ai!==void 0?Ai:P.pageXOffset,scrollY:(Ri=B.scrollY)!==null&&Ri!==void 0?Ri:P.pageYOffset},D=new Bounds(ie.scrollX,ie.scrollY,ie.windowWidth,ie.windowHeight),ne=new Context(Y,D),oe=(Ei=B.foreignObjectRendering)!==null&&Ei!==void 0?Ei:!1,ue={allowTaint:(Li=B.allowTaint)!==null&&Li!==void 0?Li:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:oe,copyStyles:oe},ne.logger.debug("Starting document clone with size "+D.width+"x"+D.height+" scrolled to "+-D.left+","+-D.top),pe=new DocumentCloner(ne,g,ue),we=pe.clonedReferenceElement,we?[4,pe.toIFrame(M,D)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return ke=W.sent(),Qe=isBodyElement(we)||isHTMLElement(we)?parseDocumentSize(we.ownerDocument):parseBounds(ne,we),Ue=Qe.width,We=Qe.height,Ne=Qe.left,ut=Qe.top,Ye=parseBackgroundColor(ne,we,B.backgroundColor),et={canvas:B.canvas,backgroundColor:Ye,scale:(vi=(Yi=B.scale)!==null&&Yi!==void 0?Yi:P.devicePixelRatio)!==null&&vi!==void 0?vi:1,x:((d=B.x)!==null&&d!==void 0?d:0)+Ne,y:((w=B.y)!==null&&w!==void 0?w:0)+ut,width:(S=B.width)!==null&&S!==void 0?S:Math.ceil(Ue),height:(k=B.height)!==null&&k!==void 0?k:Math.ceil(We)},oe?(ne.logger.debug("Document cloned, using foreign object rendering"),Ze=new ForeignObjectRenderer(ne,et),[4,Ze.render(we)]):[3,3];case 2:return rt=W.sent(),[3,5];case 3:return ne.logger.debug("Document cloned, element located at "+Ne+","+ut+" with size "+Ue+"x"+We+" using computed rendering"),ne.logger.debug("Starting DOM parsing"),ft=parseTree(ne,we),Ye===ft.styles.backgroundColor&&(ft.styles.backgroundColor=COLORS.TRANSPARENT),ne.logger.debug("Starting renderer for element at "+et.x+","+et.y+" with size "+et.width+"x"+et.height),Ze=new CanvasRenderer(ne,et),[4,Ze.render(ft)];case 4:rt=W.sent(),W.label=5;case 5:return(!((R=B.removeContainer)!==null&&R!==void 0)||R)&&(DocumentCloner.destroy(ke)||ne.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ne.logger.debug("Finished rendering"),[2,rt]}})})},parseBackgroundColor=function(g,B,M){var P=B.ownerDocument,K=P.documentElement?parseColor(g,getComputedStyle(P.documentElement).backgroundColor):COLORS.TRANSPARENT,Y=P.body?parseColor(g,getComputedStyle(P.body).backgroundColor):COLORS.TRANSPARENT,ie=typeof M=="string"?parseColor(g,M):M===null?COLORS.TRANSPARENT:4294967295;return B===P.documentElement?isTransparent(K)?isTransparent(Y)?ie:Y:K:ie},raf={exports:{}},performanceNow$1={exports:{}},performanceNow=performanceNow$1.exports,hasRequiredPerformanceNow;function requirePerformanceNow(){return hasRequiredPerformanceNow||(hasRequiredPerformanceNow=1,(function(){var g,B,M,P,K,Y;typeof performance<"u"&&performance!==null&&performance.now?performanceNow$1.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow$1.exports=function(){return(g()-K)/1e6},B=process.hrtime,g=function(){var ie;return ie=B(),ie[0]*1e9+ie[1]},P=g(),Y=process.uptime()*1e9,K=P-Y):Date.now?(performanceNow$1.exports=function(){return Date.now()-M},M=Date.now()):(performanceNow$1.exports=function(){return new Date().getTime()-M},M=new Date().getTime())}).call(performanceNow)),performanceNow$1.exports}var hasRequiredRaf;function requireRaf(){if(hasRequiredRaf)return raf.exports;hasRequiredRaf=1;for(var g=requirePerformanceNow(),B=typeof window>"u"?commonjsGlobal:window,M=["moz","webkit"],P="AnimationFrame",K=B["request"+P],Y=B["cancel"+P]||B["cancelRequest"+P],ie=0;!K&&ie<M.length;ie++)K=B[M[ie]+"Request"+P],Y=B[M[ie]+"Cancel"+P]||B[M[ie]+"CancelRequest"+P];if(!K||!Y){var D=0,ne=0,oe=[],ue=1e3/60;K=function(pe){if(oe.length===0){var we=g(),ke=Math.max(0,ue-(we-D));D=ke+we,setTimeout(function(){var Qe=oe.slice(0);oe.length=0;for(var Ue=0;Ue<Qe.length;Ue++)if(!Qe[Ue].cancelled)try{Qe[Ue].callback(D)}catch(We){setTimeout(function(){throw We},0)}},Math.round(ke))}return oe.push({handle:++ne,callback:pe,cancelled:!1}),ne},Y=function(pe){for(var we=0;we<oe.length;we++)oe[we].handle===pe&&(oe[we].cancelled=!0)}}return raf.exports=function(pe){return K.call(B,pe)},raf.exports.cancel=function(){Y.apply(B,arguments)},raf.exports.polyfill=function(pe){pe||(pe=B),pe.requestAnimationFrame=K,pe.cancelAnimationFrame=Y},raf.exports}var rafExports=requireRaf();const requestAnimationFrame$1=getDefaultExportFromCjs(rafExports);var rgbcolor,hasRequiredRgbcolor;function requireRgbcolor(){return hasRequiredRgbcolor||(hasRequiredRgbcolor=1,rgbcolor=function(g){this.ok=!1,this.alpha=1,g.charAt(0)=="#"&&(g=g.substr(1,6)),g=g.replace(/ /g,""),g=g.toLowerCase();var B={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};g=B[g]||g;for(var M=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(ne){return[parseInt(ne[1]),parseInt(ne[2]),parseInt(ne[3]),parseFloat(ne[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(ne){return[parseInt(ne[1]),parseInt(ne[2]),parseInt(ne[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(ne){return[parseInt(ne[1],16),parseInt(ne[2],16),parseInt(ne[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(ne){return[parseInt(ne[1]+ne[1],16),parseInt(ne[2]+ne[2],16),parseInt(ne[3]+ne[3],16)]}}],P=0;P<M.length;P++){var K=M[P].re,Y=M[P].process,ie=K.exec(g);if(ie){var D=Y(ie);this.r=D[0],this.g=D[1],this.b=D[2],D.length>3&&(this.alpha=D[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var ne=this.r.toString(16),oe=this.g.toString(16),ue=this.b.toString(16);return ne.length==1&&(ne="0"+ne),oe.length==1&&(oe="0"+oe),ue.length==1&&(ue="0"+ue),"#"+ne+oe+ue},this.getHelpXML=function(){for(var ne=new Array,oe=0;oe<M.length;oe++)for(var ue=M[oe].example,pe=0;pe<ue.length;pe++)ne[ne.length]=ue[pe];for(var we in B)ne[ne.length]=we;var ke=document.createElement("ul");ke.setAttribute("id","rgbcolor-examples");for(var oe=0;oe<ne.length;oe++)try{var Qe=document.createElement("li"),Ue=new RGBColor(ne[oe]),We=document.createElement("div");We.style.cssText="margin: 3px; border: 1px solid black; background:"+Ue.toHex()+"; color:"+Ue.toHex(),We.appendChild(document.createTextNode("test"));var Ne=document.createTextNode(" "+ne[oe]+" -> "+Ue.toRGB()+" -> "+Ue.toHex());Qe.appendChild(We),Qe.appendChild(Ne),ke.appendChild(Qe)}catch{}return ke}}),rgbcolor}var rgbcolorExports=requireRgbcolor();const RGBColor$1=getDefaultExportFromCjs(rgbcolorExports);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(g,B){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var K in P)Object.prototype.hasOwnProperty.call(P,K)&&(M[K]=P[K])})(g,B)};function r(g,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function M(){this.constructor=g}t(g,B),g.prototype=B===null?Object.create(B):(M.prototype=B.prototype,new M)}function e(g){var B="";Array.isArray(g)||(g=[g]);for(var M=0;M<g.length;M++){var P=g[M];if(P.type===_.CLOSE_PATH)B+="z";else if(P.type===_.HORIZ_LINE_TO)B+=(P.relative?"h":"H")+P.x;else if(P.type===_.VERT_LINE_TO)B+=(P.relative?"v":"V")+P.y;else if(P.type===_.MOVE_TO)B+=(P.relative?"m":"M")+P.x+" "+P.y;else if(P.type===_.LINE_TO)B+=(P.relative?"l":"L")+P.x+" "+P.y;else if(P.type===_.CURVE_TO)B+=(P.relative?"c":"C")+P.x1+" "+P.y1+" "+P.x2+" "+P.y2+" "+P.x+" "+P.y;else if(P.type===_.SMOOTH_CURVE_TO)B+=(P.relative?"s":"S")+P.x2+" "+P.y2+" "+P.x+" "+P.y;else if(P.type===_.QUAD_TO)B+=(P.relative?"q":"Q")+P.x1+" "+P.y1+" "+P.x+" "+P.y;else if(P.type===_.SMOOTH_QUAD_TO)B+=(P.relative?"t":"T")+P.x+" "+P.y;else{if(P.type!==_.ARC)throw new Error('Unexpected command type "'+P.type+'" at index '+M+".");B+=(P.relative?"a":"A")+P.rX+" "+P.rY+" "+P.xRot+" "+ +P.lArcFlag+" "+ +P.sweepFlag+" "+P.x+" "+P.y}}return B}function i(g,B){var M=g[0],P=g[1];return[M*Math.cos(B)-P*Math.sin(B),M*Math.sin(B)+P*Math.cos(B)]}function a(){for(var g=[],B=0;B<arguments.length;B++)g[B]=arguments[B];for(var M=0;M<g.length;M++)if(typeof g[M]!="number")throw new Error("assertNumbers arguments["+M+"] is not a number. "+typeof g[M]+" == typeof "+g[M]);return!0}var n=Math.PI;function o(g,B,M){g.lArcFlag=g.lArcFlag===0?0:1,g.sweepFlag=g.sweepFlag===0?0:1;var P=g.rX,K=g.rY,Y=g.x,ie=g.y;P=Math.abs(g.rX),K=Math.abs(g.rY);var D=i([(B-Y)/2,(M-ie)/2],-g.xRot/180*n),ne=D[0],oe=D[1],ue=Math.pow(ne,2)/Math.pow(P,2)+Math.pow(oe,2)/Math.pow(K,2);1<ue&&(P*=Math.sqrt(ue),K*=Math.sqrt(ue)),g.rX=P,g.rY=K;var pe=Math.pow(P,2)*Math.pow(oe,2)+Math.pow(K,2)*Math.pow(ne,2),we=(g.lArcFlag!==g.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(P,2)*Math.pow(K,2)-pe)/pe)),ke=P*oe/K*we,Qe=-K*ne/P*we,Ue=i([ke,Qe],g.xRot/180*n);g.cX=Ue[0]+(B+Y)/2,g.cY=Ue[1]+(M+ie)/2,g.phi1=Math.atan2((oe-Qe)/K,(ne-ke)/P),g.phi2=Math.atan2((-oe-Qe)/K,(-ne-ke)/P),g.sweepFlag===0&&g.phi2>g.phi1&&(g.phi2-=2*n),g.sweepFlag===1&&g.phi2<g.phi1&&(g.phi2+=2*n),g.phi1*=180/n,g.phi2*=180/n}function s(g,B,M){a(g,B,M);var P=g*g+B*B-M*M;if(0>P)return[];if(P===0)return[[g*M/(g*g+B*B),B*M/(g*g+B*B)]];var K=Math.sqrt(P);return[[(g*M+B*K)/(g*g+B*B),(B*M-g*K)/(g*g+B*B)],[(g*M-B*K)/(g*g+B*B),(B*M+g*K)/(g*g+B*B)]]}var u,h=Math.PI/180;function c$1(g,B,M){return(1-M)*g+M*B}function y(g,B,M,P){return g+Math.cos(P/180*n)*B+Math.sin(P/180*n)*M}function p(g,B,M,P){var K=1e-6,Y=B-g,ie=M-B,D=3*Y+3*(P-M)-6*ie,ne=6*(ie-Y),oe=3*Y;return Math.abs(D)<K?[-oe/ne]:function(ue,pe,we){var ke=ue*ue/4-pe;if(ke<-1e-6)return[];if(ke<=we)return[-ue/2];var Qe=Math.sqrt(ke);return[-ue/2-Qe,-ue/2+Qe]}(ne/D,oe/D,K)}function m$1(g,B,M,P,K){var Y=1-K;return g*(Y*Y*Y)+B*(3*Y*Y*K)+M*(3*Y*K*K)+P*(K*K*K)}(function(g){function B(){return K(function(D,ne,oe){return D.relative&&(D.x1!==void 0&&(D.x1+=ne),D.y1!==void 0&&(D.y1+=oe),D.x2!==void 0&&(D.x2+=ne),D.y2!==void 0&&(D.y2+=oe),D.x!==void 0&&(D.x+=ne),D.y!==void 0&&(D.y+=oe),D.relative=!1),D})}function M(){var D=NaN,ne=NaN,oe=NaN,ue=NaN;return K(function(pe,we,ke){return pe.type&_.SMOOTH_CURVE_TO&&(pe.type=_.CURVE_TO,D=isNaN(D)?we:D,ne=isNaN(ne)?ke:ne,pe.x1=pe.relative?we-D:2*we-D,pe.y1=pe.relative?ke-ne:2*ke-ne),pe.type&_.CURVE_TO?(D=pe.relative?we+pe.x2:pe.x2,ne=pe.relative?ke+pe.y2:pe.y2):(D=NaN,ne=NaN),pe.type&_.SMOOTH_QUAD_TO&&(pe.type=_.QUAD_TO,oe=isNaN(oe)?we:oe,ue=isNaN(ue)?ke:ue,pe.x1=pe.relative?we-oe:2*we-oe,pe.y1=pe.relative?ke-ue:2*ke-ue),pe.type&_.QUAD_TO?(oe=pe.relative?we+pe.x1:pe.x1,ue=pe.relative?ke+pe.y1:pe.y1):(oe=NaN,ue=NaN),pe})}function P(){var D=NaN,ne=NaN;return K(function(oe,ue,pe){if(oe.type&_.SMOOTH_QUAD_TO&&(oe.type=_.QUAD_TO,D=isNaN(D)?ue:D,ne=isNaN(ne)?pe:ne,oe.x1=oe.relative?ue-D:2*ue-D,oe.y1=oe.relative?pe-ne:2*pe-ne),oe.type&_.QUAD_TO){D=oe.relative?ue+oe.x1:oe.x1,ne=oe.relative?pe+oe.y1:oe.y1;var we=oe.x1,ke=oe.y1;oe.type=_.CURVE_TO,oe.x1=((oe.relative?0:ue)+2*we)/3,oe.y1=((oe.relative?0:pe)+2*ke)/3,oe.x2=(oe.x+2*we)/3,oe.y2=(oe.y+2*ke)/3}else D=NaN,ne=NaN;return oe})}function K(D){var ne=0,oe=0,ue=NaN,pe=NaN;return function(we){if(isNaN(ue)&&!(we.type&_.MOVE_TO))throw new Error("path must start with moveto");var ke=D(we,ne,oe,ue,pe);return we.type&_.CLOSE_PATH&&(ne=ue,oe=pe),we.x!==void 0&&(ne=we.relative?ne+we.x:we.x),we.y!==void 0&&(oe=we.relative?oe+we.y:we.y),we.type&_.MOVE_TO&&(ue=ne,pe=oe),ke}}function Y(D,ne,oe,ue,pe,we){return a(D,ne,oe,ue,pe,we),K(function(ke,Qe,Ue,We){var Ne=ke.x1,ut=ke.x2,Ye=ke.relative&&!isNaN(We),et=ke.x!==void 0?ke.x:Ye?0:Qe,rt=ke.y!==void 0?ke.y:Ye?0:Ue;function ft(S){return S*S}ke.type&_.HORIZ_LINE_TO&&ne!==0&&(ke.type=_.LINE_TO,ke.y=ke.relative?0:Ue),ke.type&_.VERT_LINE_TO&&oe!==0&&(ke.type=_.LINE_TO,ke.x=ke.relative?0:Qe),ke.x!==void 0&&(ke.x=ke.x*D+rt*oe+(Ye?0:pe)),ke.y!==void 0&&(ke.y=et*ne+ke.y*ue+(Ye?0:we)),ke.x1!==void 0&&(ke.x1=ke.x1*D+ke.y1*oe+(Ye?0:pe)),ke.y1!==void 0&&(ke.y1=Ne*ne+ke.y1*ue+(Ye?0:we)),ke.x2!==void 0&&(ke.x2=ke.x2*D+ke.y2*oe+(Ye?0:pe)),ke.y2!==void 0&&(ke.y2=ut*ne+ke.y2*ue+(Ye?0:we));var Ze=D*ue-ne*oe;if(ke.xRot!==void 0&&(D!==1||ne!==0||oe!==0||ue!==1))if(Ze===0)delete ke.rX,delete ke.rY,delete ke.xRot,delete ke.lArcFlag,delete ke.sweepFlag,ke.type=_.LINE_TO;else{var wt=ke.xRot*Math.PI/180,Ft=Math.sin(wt),_t=Math.cos(wt),Pt=1/ft(ke.rX),Mt=1/ft(ke.rY),Vt=ft(_t)*Pt+ft(Ft)*Mt,Ai=2*Ft*_t*(Pt-Mt),Ri=ft(Ft)*Pt+ft(_t)*Mt,Ei=Vt*ue*ue-Ai*ne*ue+Ri*ne*ne,Li=Ai*(D*ue+ne*oe)-2*(Vt*oe*ue+Ri*D*ne),Yi=Vt*oe*oe-Ai*D*oe+Ri*D*D,vi=(Math.atan2(Li,Ei-Yi)+Math.PI)%Math.PI/2,d=Math.sin(vi),w=Math.cos(vi);ke.rX=Math.abs(Ze)/Math.sqrt(Ei*ft(w)+Li*d*w+Yi*ft(d)),ke.rY=Math.abs(Ze)/Math.sqrt(Ei*ft(d)-Li*d*w+Yi*ft(w)),ke.xRot=180*vi/Math.PI}return ke.sweepFlag!==void 0&&0>Ze&&(ke.sweepFlag=+!ke.sweepFlag),ke})}function ie(){return function(D){var ne={};for(var oe in D)ne[oe]=D[oe];return ne}}g.ROUND=function(D){function ne(oe){return Math.round(oe*D)/D}return D===void 0&&(D=1e13),a(D),function(oe){return oe.x1!==void 0&&(oe.x1=ne(oe.x1)),oe.y1!==void 0&&(oe.y1=ne(oe.y1)),oe.x2!==void 0&&(oe.x2=ne(oe.x2)),oe.y2!==void 0&&(oe.y2=ne(oe.y2)),oe.x!==void 0&&(oe.x=ne(oe.x)),oe.y!==void 0&&(oe.y=ne(oe.y)),oe.rX!==void 0&&(oe.rX=ne(oe.rX)),oe.rY!==void 0&&(oe.rY=ne(oe.rY)),oe}},g.TO_ABS=B,g.TO_REL=function(){return K(function(D,ne,oe){return D.relative||(D.x1!==void 0&&(D.x1-=ne),D.y1!==void 0&&(D.y1-=oe),D.x2!==void 0&&(D.x2-=ne),D.y2!==void 0&&(D.y2-=oe),D.x!==void 0&&(D.x-=ne),D.y!==void 0&&(D.y-=oe),D.relative=!0),D})},g.NORMALIZE_HVZ=function(D,ne,oe){return D===void 0&&(D=!0),ne===void 0&&(ne=!0),oe===void 0&&(oe=!0),K(function(ue,pe,we,ke,Qe){if(isNaN(ke)&&!(ue.type&_.MOVE_TO))throw new Error("path must start with moveto");return ne&&ue.type&_.HORIZ_LINE_TO&&(ue.type=_.LINE_TO,ue.y=ue.relative?0:we),oe&&ue.type&_.VERT_LINE_TO&&(ue.type=_.LINE_TO,ue.x=ue.relative?0:pe),D&&ue.type&_.CLOSE_PATH&&(ue.type=_.LINE_TO,ue.x=ue.relative?ke-pe:ke,ue.y=ue.relative?Qe-we:Qe),ue.type&_.ARC&&(ue.rX===0||ue.rY===0)&&(ue.type=_.LINE_TO,delete ue.rX,delete ue.rY,delete ue.xRot,delete ue.lArcFlag,delete ue.sweepFlag),ue})},g.NORMALIZE_ST=M,g.QT_TO_C=P,g.INFO=K,g.SANITIZE=function(D){D===void 0&&(D=0),a(D);var ne=NaN,oe=NaN,ue=NaN,pe=NaN;return K(function(we,ke,Qe,Ue,We){var Ne=Math.abs,ut=!1,Ye=0,et=0;if(we.type&_.SMOOTH_CURVE_TO&&(Ye=isNaN(ne)?0:ke-ne,et=isNaN(oe)?0:Qe-oe),we.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(ne=we.relative?ke+we.x2:we.x2,oe=we.relative?Qe+we.y2:we.y2):(ne=NaN,oe=NaN),we.type&_.SMOOTH_QUAD_TO?(ue=isNaN(ue)?ke:2*ke-ue,pe=isNaN(pe)?Qe:2*Qe-pe):we.type&_.QUAD_TO?(ue=we.relative?ke+we.x1:we.x1,pe=we.relative?Qe+we.y1:we.y2):(ue=NaN,pe=NaN),we.type&_.LINE_COMMANDS||we.type&_.ARC&&(we.rX===0||we.rY===0||!we.lArcFlag)||we.type&_.CURVE_TO||we.type&_.SMOOTH_CURVE_TO||we.type&_.QUAD_TO||we.type&_.SMOOTH_QUAD_TO){var rt=we.x===void 0?0:we.relative?we.x:we.x-ke,ft=we.y===void 0?0:we.relative?we.y:we.y-Qe;Ye=isNaN(ue)?we.x1===void 0?Ye:we.relative?we.x:we.x1-ke:ue-ke,et=isNaN(pe)?we.y1===void 0?et:we.relative?we.y:we.y1-Qe:pe-Qe;var Ze=we.x2===void 0?0:we.relative?we.x:we.x2-ke,wt=we.y2===void 0?0:we.relative?we.y:we.y2-Qe;Ne(rt)<=D&&Ne(ft)<=D&&Ne(Ye)<=D&&Ne(et)<=D&&Ne(Ze)<=D&&Ne(wt)<=D&&(ut=!0)}return we.type&_.CLOSE_PATH&&Ne(ke-Ue)<=D&&Ne(Qe-We)<=D&&(ut=!0),ut?[]:we})},g.MATRIX=Y,g.ROTATE=function(D,ne,oe){ne===void 0&&(ne=0),oe===void 0&&(oe=0),a(D,ne,oe);var ue=Math.sin(D),pe=Math.cos(D);return Y(pe,ue,-ue,pe,ne-ne*pe+oe*ue,oe-ne*ue-oe*pe)},g.TRANSLATE=function(D,ne){return ne===void 0&&(ne=0),a(D,ne),Y(1,0,0,1,D,ne)},g.SCALE=function(D,ne){return ne===void 0&&(ne=D),a(D,ne),Y(D,0,0,ne,0,0)},g.SKEW_X=function(D){return a(D),Y(1,0,Math.atan(D),1,0,0)},g.SKEW_Y=function(D){return a(D),Y(1,Math.atan(D),0,1,0,0)},g.X_AXIS_SYMMETRY=function(D){return D===void 0&&(D=0),a(D),Y(-1,0,0,1,D,0)},g.Y_AXIS_SYMMETRY=function(D){return D===void 0&&(D=0),a(D),Y(1,0,0,-1,0,D)},g.A_TO_C=function(){return K(function(D,ne,oe){return _.ARC===D.type?function(ue,pe,we){var ke,Qe,Ue,We;ue.cX||o(ue,pe,we);for(var Ne=Math.min(ue.phi1,ue.phi2),ut=Math.max(ue.phi1,ue.phi2)-Ne,Ye=Math.ceil(ut/90),et=new Array(Ye),rt=pe,ft=we,Ze=0;Ze<Ye;Ze++){var wt=c$1(ue.phi1,ue.phi2,Ze/Ye),Ft=c$1(ue.phi1,ue.phi2,(Ze+1)/Ye),_t=Ft-wt,Pt=4/3*Math.tan(_t*h/4),Mt=[Math.cos(wt*h)-Pt*Math.sin(wt*h),Math.sin(wt*h)+Pt*Math.cos(wt*h)],Vt=Mt[0],Ai=Mt[1],Ri=[Math.cos(Ft*h),Math.sin(Ft*h)],Ei=Ri[0],Li=Ri[1],Yi=[Ei+Pt*Math.sin(Ft*h),Li-Pt*Math.cos(Ft*h)],vi=Yi[0],d=Yi[1];et[Ze]={relative:ue.relative,type:_.CURVE_TO};var w=function(S,k){var R=i([S*ue.rX,k*ue.rY],ue.xRot),W=R[0],se=R[1];return[ue.cX+W,ue.cY+se]};ke=w(Vt,Ai),et[Ze].x1=ke[0],et[Ze].y1=ke[1],Qe=w(vi,d),et[Ze].x2=Qe[0],et[Ze].y2=Qe[1],Ue=w(Ei,Li),et[Ze].x=Ue[0],et[Ze].y=Ue[1],ue.relative&&(et[Ze].x1-=rt,et[Ze].y1-=ft,et[Ze].x2-=rt,et[Ze].y2-=ft,et[Ze].x-=rt,et[Ze].y-=ft),rt=(We=[et[Ze].x,et[Ze].y])[0],ft=We[1]}return et}(D,D.relative?0:ne,D.relative?0:oe):D})},g.ANNOTATE_ARCS=function(){return K(function(D,ne,oe){return D.relative&&(ne=0,oe=0),_.ARC===D.type&&o(D,ne,oe),D})},g.CLONE=ie,g.CALCULATE_BOUNDS=function(){var D=function(we){var ke={};for(var Qe in we)ke[Qe]=we[Qe];return ke},ne=B(),oe=P(),ue=M(),pe=K(function(we,ke,Qe){var Ue=ue(oe(ne(D(we))));function We(d){d>pe.maxX&&(pe.maxX=d),d<pe.minX&&(pe.minX=d)}function Ne(d){d>pe.maxY&&(pe.maxY=d),d<pe.minY&&(pe.minY=d)}if(Ue.type&_.DRAWING_COMMANDS&&(We(ke),Ne(Qe)),Ue.type&_.HORIZ_LINE_TO&&We(Ue.x),Ue.type&_.VERT_LINE_TO&&Ne(Ue.y),Ue.type&_.LINE_TO&&(We(Ue.x),Ne(Ue.y)),Ue.type&_.CURVE_TO){We(Ue.x),Ne(Ue.y);for(var ut=0,Ye=p(ke,Ue.x1,Ue.x2,Ue.x);ut<Ye.length;ut++)0<(vi=Ye[ut])&&1>vi&&We(m$1(ke,Ue.x1,Ue.x2,Ue.x,vi));for(var et=0,rt=p(Qe,Ue.y1,Ue.y2,Ue.y);et<rt.length;et++)0<(vi=rt[et])&&1>vi&&Ne(m$1(Qe,Ue.y1,Ue.y2,Ue.y,vi))}if(Ue.type&_.ARC){We(Ue.x),Ne(Ue.y),o(Ue,ke,Qe);for(var ft=Ue.xRot/180*Math.PI,Ze=Math.cos(ft)*Ue.rX,wt=Math.sin(ft)*Ue.rX,Ft=-Math.sin(ft)*Ue.rY,_t=Math.cos(ft)*Ue.rY,Pt=Ue.phi1<Ue.phi2?[Ue.phi1,Ue.phi2]:-180>Ue.phi2?[Ue.phi2+360,Ue.phi1+360]:[Ue.phi2,Ue.phi1],Mt=Pt[0],Vt=Pt[1],Ai=function(d){var w=d[0],S=d[1],k=180*Math.atan2(S,w)/Math.PI;return k<Mt?k+360:k},Ri=0,Ei=s(Ft,-Ze,0).map(Ai);Ri<Ei.length;Ri++)(vi=Ei[Ri])>Mt&&vi<Vt&&We(y(Ue.cX,Ze,Ft,vi));for(var Li=0,Yi=s(_t,-wt,0).map(Ai);Li<Yi.length;Li++){var vi;(vi=Yi[Li])>Mt&&vi<Vt&&Ne(y(Ue.cY,wt,_t,vi))}}return we});return pe.minX=1/0,pe.maxX=-1/0,pe.minY=1/0,pe.maxY=-1/0,pe}})(u||(u={}));var O,l=function(){function g(){}return g.prototype.round=function(B){return this.transform(u.ROUND(B))},g.prototype.toAbs=function(){return this.transform(u.TO_ABS())},g.prototype.toRel=function(){return this.transform(u.TO_REL())},g.prototype.normalizeHVZ=function(B,M,P){return this.transform(u.NORMALIZE_HVZ(B,M,P))},g.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},g.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},g.prototype.aToC=function(){return this.transform(u.A_TO_C())},g.prototype.sanitize=function(B){return this.transform(u.SANITIZE(B))},g.prototype.translate=function(B,M){return this.transform(u.TRANSLATE(B,M))},g.prototype.scale=function(B,M){return this.transform(u.SCALE(B,M))},g.prototype.rotate=function(B,M,P){return this.transform(u.ROTATE(B,M,P))},g.prototype.matrix=function(B,M,P,K,Y,ie){return this.transform(u.MATRIX(B,M,P,K,Y,ie))},g.prototype.skewX=function(B){return this.transform(u.SKEW_X(B))},g.prototype.skewY=function(B){return this.transform(u.SKEW_Y(B))},g.prototype.xSymmetry=function(B){return this.transform(u.X_AXIS_SYMMETRY(B))},g.prototype.ySymmetry=function(B){return this.transform(u.Y_AXIS_SYMMETRY(B))},g.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},g}(),T=function(g){return g===" "||g==="	"||g==="\r"||g===`
`},v=function(g){return 48<=g.charCodeAt(0)&&g.charCodeAt(0)<=57},f=function(g){function B(){var M=g.call(this)||this;return M.curNumber="",M.curCommandType=-1,M.curCommandRelative=!1,M.canParseCommandOrComma=!0,M.curNumberHasExp=!1,M.curNumberHasExpDigits=!1,M.curNumberHasDecimal=!1,M.curArgs=[],M}return r(B,g),B.prototype.finish=function(M){if(M===void 0&&(M=[]),this.parse(" ",M),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return M},B.prototype.parse=function(M,P){var K=this;P===void 0&&(P=[]);for(var Y=function(pe){P.push(pe),K.curArgs.length=0,K.canParseCommandOrComma=!0},ie=0;ie<M.length;ie++){var D=M[ie],ne=!(this.curCommandType!==_.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),oe=v(D)&&(this.curNumber==="0"&&D==="0"||ne);if(!v(D)||oe)if(D!=="e"&&D!=="E")if(D!=="-"&&D!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(D!=="."||this.curNumberHasExp||this.curNumberHasDecimal||ne){if(this.curNumber&&this.curCommandType!==-1){var ue=Number(this.curNumber);if(isNaN(ue))throw new SyntaxError("Invalid number ending at "+ie);if(this.curCommandType===_.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>ue)throw new SyntaxError('Expected positive number, got "'+ue+'" at index "'+ie+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+ie+'"')}this.curArgs.push(ue),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?Y({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:ue}):_.VERT_LINE_TO===this.curCommandType?Y({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:ue}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(Y({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?Y({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?Y({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?Y({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&Y({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(D))if(D===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(D!=="+"&&D!=="-"&&D!==".")if(oe)this.curNumber=D,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+ie+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+D+'" at index '+ie+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,D!=="z"&&D!=="Z")if(D==="h"||D==="H")this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=D==="h";else if(D==="v"||D==="V")this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=D==="v";else if(D==="m"||D==="M")this.curCommandType=_.MOVE_TO,this.curCommandRelative=D==="m";else if(D==="l"||D==="L")this.curCommandType=_.LINE_TO,this.curCommandRelative=D==="l";else if(D==="c"||D==="C")this.curCommandType=_.CURVE_TO,this.curCommandRelative=D==="c";else if(D==="s"||D==="S")this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=D==="s";else if(D==="q"||D==="Q")this.curCommandType=_.QUAD_TO,this.curCommandRelative=D==="q";else if(D==="t"||D==="T")this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=D==="t";else{if(D!=="a"&&D!=="A")throw new SyntaxError('Unexpected character "'+D+'" at index '+ie+".");this.curCommandType=_.ARC,this.curCommandRelative=D==="a"}else P.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=D,this.curNumberHasDecimal=D==="."}else this.curNumber+=D,this.curNumberHasDecimal=!0;else this.curNumber+=D;else this.curNumber+=D,this.curNumberHasExp=!0;else this.curNumber+=D,this.curNumberHasExpDigits=this.curNumberHasExp}return P},B.prototype.transform=function(M){return Object.create(this,{parse:{value:function(P,K){K===void 0&&(K=[]);for(var Y=0,ie=Object.getPrototypeOf(this).parse.call(this,P);Y<ie.length;Y++){var D=ie[Y],ne=M(D);Array.isArray(ne)?K.push.apply(K,ne):K.push(ne)}return K}}})},B}(l),_=function(g){function B(M){var P=g.call(this)||this;return P.commands=typeof M=="string"?B.parse(M):M,P}return r(B,g),B.prototype.encode=function(){return B.encode(this.commands)},B.prototype.getBounds=function(){var M=u.CALCULATE_BOUNDS();return this.transform(M),M},B.prototype.transform=function(M){for(var P=[],K=0,Y=this.commands;K<Y.length;K++){var ie=M(Y[K]);Array.isArray(ie)?P.push.apply(P,ie):P.push(ie)}return this.commands=P,this},B.encode=function(M){return e(M)},B.parse=function(M){var P=new f,K=[];return P.parse(M,K),P.finish(K),K},B.CLOSE_PATH=1,B.MOVE_TO=2,B.HORIZ_LINE_TO=4,B.VERT_LINE_TO=8,B.LINE_TO=16,B.CURVE_TO=32,B.SMOOTH_CURVE_TO=64,B.QUAD_TO=128,B.SMOOTH_QUAD_TO=256,B.ARC=512,B.LINE_COMMANDS=B.LINE_TO|B.HORIZ_LINE_TO|B.VERT_LINE_TO,B.DRAWING_COMMANDS=B.HORIZ_LINE_TO|B.VERT_LINE_TO|B.LINE_TO|B.CURVE_TO|B.SMOOTH_CURVE_TO|B.QUAD_TO|B.SMOOTH_QUAD_TO|B.ARC,B}(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O);function _typeof(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(B){return typeof B}:_typeof=function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},_typeof(g)}function _classCallCheck(g,B){if(!(g instanceof B))throw new TypeError("Cannot call a class as a function")}var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas(g,B,M,P,K){if(typeof g=="string"&&(g=document.getElementById(g)),!g||_typeof(g)!=="object"||!("getContext"in g))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var Y=g.getContext("2d");try{return Y.getImageData(B,M,P,K)}catch(ie){throw new Error("unable to access image data: "+ie)}}function processCanvasRGBA(g,B,M,P,K,Y){if(!(isNaN(Y)||Y<1)){Y|=0;var ie=getImageDataFromCanvas(g,B,M,P,K);ie=processImageDataRGBA(ie,B,M,P,K,Y),g.getContext("2d").putImageData(ie,B,M)}}function processImageDataRGBA(g,B,M,P,K,Y){for(var ie=g.data,D=2*Y+1,ne=P-1,oe=K-1,ue=Y+1,pe=ue*(ue+1)/2,we=new BlurStack,ke=we,Qe,Ue=1;Ue<D;Ue++)ke=ke.next=new BlurStack,Ue===ue&&(Qe=ke);ke.next=we;for(var We=null,Ne=null,ut=0,Ye=0,et=mulTable[Y],rt=shgTable[Y],ft=0;ft<K;ft++){ke=we;for(var Ze=ie[Ye],wt=ie[Ye+1],Ft=ie[Ye+2],_t=ie[Ye+3],Pt=0;Pt<ue;Pt++)ke.r=Ze,ke.g=wt,ke.b=Ft,ke.a=_t,ke=ke.next;for(var Mt=0,Vt=0,Ai=0,Ri=0,Ei=ue*Ze,Li=ue*wt,Yi=ue*Ft,vi=ue*_t,d=pe*Ze,w=pe*wt,S=pe*Ft,k=pe*_t,R=1;R<ue;R++){var W=Ye+((ne<R?ne:R)<<2),se=ie[W],le=ie[W+1],fe=ie[W+2],be=ie[W+3],Te=ue-R;d+=(ke.r=se)*Te,w+=(ke.g=le)*Te,S+=(ke.b=fe)*Te,k+=(ke.a=be)*Te,Mt+=se,Vt+=le,Ai+=fe,Ri+=be,ke=ke.next}We=we,Ne=Qe;for(var Ke=0;Ke<P;Ke++){var Me=k*et>>rt;if(ie[Ye+3]=Me,Me!==0){var me=255/Me;ie[Ye]=(d*et>>rt)*me,ie[Ye+1]=(w*et>>rt)*me,ie[Ye+2]=(S*et>>rt)*me}else ie[Ye]=ie[Ye+1]=ie[Ye+2]=0;d-=Ei,w-=Li,S-=Yi,k-=vi,Ei-=We.r,Li-=We.g,Yi-=We.b,vi-=We.a;var De=Ke+Y+1;De=ut+(De<ne?De:ne)<<2,Mt+=We.r=ie[De],Vt+=We.g=ie[De+1],Ai+=We.b=ie[De+2],Ri+=We.a=ie[De+3],d+=Mt,w+=Vt,S+=Ai,k+=Ri,We=We.next;var Xe=Ne,ct=Xe.r,gt=Xe.g,Dt=Xe.b,Kt=Xe.a;Ei+=ct,Li+=gt,Yi+=Dt,vi+=Kt,Mt-=ct,Vt-=gt,Ai-=Dt,Ri-=Kt,Ne=Ne.next,Ye+=4}ut+=P}for(var Gt=0;Gt<P;Gt++){Ye=Gt<<2;var Qt=ie[Ye],$t=ie[Ye+1],ri=ie[Ye+2],ci=ie[Ye+3],Bt=ue*Qt,di=ue*$t,ii=ue*ri,Hi=ue*ci,Vi=pe*Qt,Ht=pe*$t,_i=pe*ri,Ti=pe*ci;ke=we;for(var Wi=0;Wi<ue;Wi++)ke.r=Qt,ke.g=$t,ke.b=ri,ke.a=ci,ke=ke.next;for(var Zt=P,mi=0,wi=0,$i=0,tr=0,Ar=1;Ar<=Y;Ar++){Ye=Zt+Gt<<2;var Tr=ue-Ar;Vi+=(ke.r=Qt=ie[Ye])*Tr,Ht+=(ke.g=$t=ie[Ye+1])*Tr,_i+=(ke.b=ri=ie[Ye+2])*Tr,Ti+=(ke.a=ci=ie[Ye+3])*Tr,tr+=Qt,mi+=$t,wi+=ri,$i+=ci,ke=ke.next,Ar<oe&&(Zt+=P)}Ye=Gt,We=we,Ne=Qe;for(var ji=0;ji<K;ji++){var Ii=Ye<<2;ie[Ii+3]=ci=Ti*et>>rt,ci>0?(ci=255/ci,ie[Ii]=(Vi*et>>rt)*ci,ie[Ii+1]=(Ht*et>>rt)*ci,ie[Ii+2]=(_i*et>>rt)*ci):ie[Ii]=ie[Ii+1]=ie[Ii+2]=0,Vi-=Bt,Ht-=di,_i-=ii,Ti-=Hi,Bt-=We.r,di-=We.g,ii-=We.b,Hi-=We.a,Ii=Gt+((Ii=ji+ue)<oe?Ii:oe)*P<<2,Vi+=tr+=We.r=ie[Ii],Ht+=mi+=We.g=ie[Ii+1],_i+=wi+=We.b=ie[Ii+2],Ti+=$i+=We.a=ie[Ii+3],We=We.next,Bt+=Qt=Ne.r,di+=$t=Ne.g,ii+=ri=Ne.b,Hi+=ci=Ne.a,tr-=Qt,mi-=$t,wi-=ri,$i-=ci,Ne=Ne.next,Ye+=P}}return g}var BlurStack=function g(){_classCallCheck(this,g),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function compressSpaces(g){return g.replace(/(?!\u3000)\s+/gm," ")}function trimLeft(g){return g.replace(/^[\n \t]+/,"")}function trimRight(g){return g.replace(/[\n \t]+$/,"")}function toNumbers(g){const B=g.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return B?B.map(parseFloat):[]}function toMatrixValue(g){const B=toNumbers(g);return[B[0]||0,B[1]||0,B[2]||0,B[3]||0,B[4]||0,B[5]||0]}const allUppercase=/^[A-Z-]+$/;function normalizeAttributeName(g){return allUppercase.test(g)?g.toLowerCase():g}function parseExternalUrl(g){const B=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(g);return B&&(B[2]||B[3]||B[4])||""}function normalizeColor(g){if(!g.startsWith("rgb"))return g;let B=3;return g.replace(/\d+(\.\d+)?/g,(P,K)=>B--&&K?String(Math.round(parseFloat(P))):P)}const attributeRegex=/(\[[^\]]+\])/g,idRegex=/(#[^\s+>~.[:]+)/g,classRegex=/(\.[^\s+>~.[:]+)/g,pseudoElementRegex=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,pseudoClassWithBracketsRegex=/(:[\w-]+\([^)]*\))/gi,pseudoClassRegex=/(:[^\s+>~.[:]+)/g,elementRegex=/([^\s+>~.[:]+)/g;function findSelectorMatch(g,B){const M=B.exec(g);return M?[g.replace(B," "),M.length]:[g,0]}function getSelectorSpecificity(g){const B=[0,0,0];let M=g.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),P=0;return[M,P]=findSelectorMatch(M,attributeRegex),B[1]+=P,[M,P]=findSelectorMatch(M,idRegex),B[0]+=P,[M,P]=findSelectorMatch(M,classRegex),B[1]+=P,[M,P]=findSelectorMatch(M,pseudoElementRegex),B[2]+=P,[M,P]=findSelectorMatch(M,pseudoClassWithBracketsRegex),B[1]+=P,[M,P]=findSelectorMatch(M,pseudoClassRegex),B[1]+=P,M=M.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[M,P]=findSelectorMatch(M,elementRegex),B[2]+=P,B.join("")}const PSEUDO_ZERO=1e-8;function vectorMagnitude(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))}function vectorsRatio(g,B){return(g[0]*B[0]+g[1]*B[1])/(vectorMagnitude(g)*vectorMagnitude(B))}function vectorsAngle(g,B){return(g[0]*B[1]<g[1]*B[0]?-1:1)*Math.acos(vectorsRatio(g,B))}function CB1(g){return g*g*g}function CB2(g){return 3*g*g*(1-g)}function CB3(g){return 3*g*(1-g)*(1-g)}function CB4(g){return(1-g)*(1-g)*(1-g)}function QB1(g){return g*g}function QB2(g){return 2*g*(1-g)}function QB3(g){return(1-g)*(1-g)}class Property{static empty(B){return new Property(B,"EMPTY","")}split(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:M,name:P}=this;return compressSpaces(this.getString()).trim().split(B).map(K=>new Property(M,P,K))}hasValue(B){const M=this.value;return M!==null&&M!==""&&(B||M!==0)&&typeof M<"u"}isString(B){const{value:M}=this,P=typeof M=="string";return!P||!B?P:B.test(M)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const B=this.getString();switch(!0){case B.endsWith("px"):case/^[0-9]+$/.test(B):return!0;default:return!1}}setValue(B){return this.value=B,this}getValue(B){return typeof B>"u"||this.hasValue()?this.value:B}getNumber(B){if(!this.hasValue())return typeof B>"u"?0:parseFloat(B);const{value:M}=this;let P=parseFloat(M);return this.isString(/%$/)&&(P/=100),P}getString(B){return typeof B>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(B)}getColor(B){let M=this.getString(B);return this.isNormalizedColor||(this.isNormalizedColor=!0,M=normalizeColor(M),this.value=M),M}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[P,K]=typeof B=="boolean"?[void 0,B]:[B],{viewPort:Y}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(Y.computeSize("x"),Y.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(Y.computeSize("x"),Y.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*Y.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*Y.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&K):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*Y.computeSize(P);default:{const ie=this.getNumber();return M&&ie<1?ie*Y.computeSize(P):ie}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const B=this.getString(),M=/#([^)'"]+)/.exec(B),P=(M==null?void 0:M[1])||B;return this.document.definitions.get(P)}getFillStyleDefinition(B,M){let P=this.getDefinition();if(!P)return null;if(typeof P.createGradient=="function"&&"getBoundingBox"in B)return P.createGradient(this.document.ctx,B,M);if(typeof P.createPattern=="function"){if(P.getHrefAttribute().hasValue()){const K=P.getAttribute("patternTransform");P=P.getHrefAttribute().getDefinition(),P&&K.hasValue()&&P.getAttribute("patternTransform",!0).setValue(K.value)}if(P)return P.createPattern(this.document.ctx,B,M)}return null}getTextBaseline(){if(!this.hasValue())return null;const B=this.getString();return Property.textBaselineMapping[B]||null}addOpacity(B){let M=this.getColor();const P=M.length;let K=0;for(let Y=0;Y<P&&(M[Y]===","&&K++,K!==3);Y++);if(B.hasValue()&&this.isString()&&K!==3){const Y=new RGBColor$1(M);Y.ok&&(Y.alpha=B.getNumber(),M=Y.toRGBA())}return new Property(this.document,this.name,M)}constructor(B,M,P){this.document=B,this.name=M,this.value=P,this.isNormalizedColor=!1}}Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ViewPort{clear(){this.viewPorts=[]}setCurrent(B,M){this.viewPorts.push({width:B,height:M})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[B]=this.viewPorts;return B||getDefault()}getCurrent(){const{viewPorts:B}=this,M=B[B.length-1];return M||getDefault()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(B){return typeof B=="number"?B:B==="x"?this.width:B==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}ViewPort.DEFAULT_VIEWPORT_WIDTH=800;ViewPort.DEFAULT_VIEWPORT_HEIGHT=600;function getDefault(){return{width:ViewPort.DEFAULT_VIEWPORT_WIDTH,height:ViewPort.DEFAULT_VIEWPORT_HEIGHT}}class Point{static parse(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[P=M,K=M]=toNumbers(B);return new Point(P,K)}static parseScale(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[P=M,K=P]=toNumbers(B);return new Point(P,K)}static parsePath(B){const M=toNumbers(B),P=M.length,K=[];for(let Y=0;Y<P;Y+=2)K.push(new Point(M[Y],M[Y+1]));return K}angleTo(B){return Math.atan2(B.y-this.y,B.x-this.x)}applyTransform(B){const{x:M,y:P}=this,K=M*B[0]+P*B[2]+B[4],Y=M*B[1]+P*B[3]+B[5];this.x=K,this.y=Y}constructor(B,M){this.x=B,this.y=M}}class Mouse{isWorking(){return this.working}start(){if(this.working)return;const{screen:B,onClick:M,onMouseMove:P}=this,K=B.ctx.canvas;K.onclick=M,K.onmousemove=P,this.working=!0}stop(){if(!this.working)return;const B=this.screen.ctx.canvas;this.working=!1,B.onclick=null,B.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:B,events:M,eventElements:P}=this,{style:K}=B.ctx.canvas;let Y;K&&(K.cursor=""),M.forEach((ie,D)=>{let{run:ne}=ie;for(Y=P[D];Y;)ne(Y),Y=Y.parent}),this.events=[],this.eventElements=[]}checkPath(B,M){if(!this.working||!M)return;const{events:P,eventElements:K}=this;P.forEach((Y,ie)=>{let{x:D,y:ne}=Y;!K[ie]&&M.isPointInPath&&M.isPointInPath(D,ne)&&(K[ie]=B)})}checkBoundingBox(B,M){if(!this.working||!M)return;const{events:P,eventElements:K}=this;P.forEach((Y,ie)=>{let{x:D,y:ne}=Y;!K[ie]&&M.isPointInBox(D,ne)&&(K[ie]=B)})}mapXY(B,M){const{window:P,ctx:K}=this.screen,Y=new Point(B,M);let ie=K.canvas;for(;ie;)Y.x-=ie.offsetLeft,Y.y-=ie.offsetTop,ie=ie.offsetParent;return P!=null&&P.scrollX&&(Y.x+=P.scrollX),P!=null&&P.scrollY&&(Y.y+=P.scrollY),Y}onClick(B){const{x:M,y:P}=this.mapXY(B.clientX,B.clientY);this.events.push({type:"onclick",x:M,y:P,run(K){K.onClick&&K.onClick()}})}onMouseMove(B){const{x:M,y:P}=this.mapXY(B.clientX,B.clientY);this.events.push({type:"onmousemove",x:M,y:P,run(K){K.onMouseMove&&K.onMouseMove()}})}constructor(B){this.screen=B,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const defaultWindow=typeof window<"u"?window:null,defaultFetch$1=typeof fetch<"u"?fetch.bind(void 0):void 0;class Screen{wait(B){this.waits.push(B)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const B=this.waits.every(M=>M());return B&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=B,B}setDefaults(B){B.strokeStyle="rgba(0,0,0,0)",B.lineCap="butt",B.lineJoin="miter",B.miterLimit=4}setViewBox(B){let{document:M,ctx:P,aspectRatio:K,width:Y,desiredWidth:ie,height:D,desiredHeight:ne,minX:oe=0,minY:ue=0,refX:pe,refY:we,clip:ke=!1,clipX:Qe=0,clipY:Ue=0}=B;const We=compressSpaces(K).replace(/^defer\s/,""),[Ne,ut]=We.split(" "),Ye=Ne||"xMidYMid",et=ut||"meet",rt=Y/ie,ft=D/ne,Ze=Math.min(rt,ft),wt=Math.max(rt,ft);let Ft=ie,_t=ne;et==="meet"&&(Ft*=Ze,_t*=Ze),et==="slice"&&(Ft*=wt,_t*=wt);const Pt=new Property(M,"refX",pe),Mt=new Property(M,"refY",we),Vt=Pt.hasValue()&&Mt.hasValue();if(Vt&&P.translate(-Ze*Pt.getPixels("x"),-Ze*Mt.getPixels("y")),ke){const Ai=Ze*Qe,Ri=Ze*Ue;P.beginPath(),P.moveTo(Ai,Ri),P.lineTo(Y,Ri),P.lineTo(Y,D),P.lineTo(Ai,D),P.closePath(),P.clip()}if(!Vt){const Ai=et==="meet"&&Ze===ft,Ri=et==="slice"&&wt===ft,Ei=et==="meet"&&Ze===rt,Li=et==="slice"&&wt===rt;Ye.startsWith("xMid")&&(Ai||Ri)&&P.translate(Y/2-Ft/2,0),Ye.endsWith("YMid")&&(Ei||Li)&&P.translate(0,D/2-_t/2),Ye.startsWith("xMax")&&(Ai||Ri)&&P.translate(Y-Ft,0),Ye.endsWith("YMax")&&(Ei||Li)&&P.translate(0,D-_t)}switch(!0){case Ye==="none":P.scale(rt,ft);break;case et==="meet":P.scale(Ze,Ze);break;case et==="slice":P.scale(wt,wt);break}P.translate(-oe,-ue)}start(B){let{enableRedraw:M=!1,ignoreMouse:P=!1,ignoreAnimation:K=!1,ignoreDimensions:Y=!1,ignoreClear:ie=!1,forceRedraw:D,scaleWidth:ne,scaleHeight:oe,offsetX:ue,offsetY:pe}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:we}=this,ke=1e3/Screen.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=ke,this.readyPromise=new Promise(ut=>{this.resolveReady=ut}),this.isReady()&&this.render(B,Y,ie,ne,oe,ue,pe),!M)return;let Qe=Date.now(),Ue=Qe,We=0;const Ne=()=>{Qe=Date.now(),We=Qe-Ue,We>=ke&&(Ue=Qe-We%ke,this.shouldUpdate(K,D)&&(this.render(B,Y,ie,ne,oe,ue,pe),we.runEvents())),this.intervalId=requestAnimationFrame$1(Ne)};P||we.start(),this.intervalId=requestAnimationFrame$1(Ne)}stop(){this.intervalId&&(requestAnimationFrame$1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(B,M){if(!B){const{frameDuration:P}=this;if(this.animations.reduce((Y,ie)=>ie.update(P)||Y,!1))return!0}return!!(typeof M=="function"&&M()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(B,M,P,K,Y,ie,D){const{viewPort:ne,ctx:oe,isFirstRender:ue}=this,pe=oe.canvas;ne.clear(),pe.width&&pe.height&&ne.setCurrent(pe.width,pe.height);const we=B.getStyle("width"),ke=B.getStyle("height");!M&&(ue||typeof K!="number"&&typeof Y!="number")&&(we.hasValue()&&(pe.width=we.getPixels("x"),pe.style&&(pe.style.width="".concat(pe.width,"px"))),ke.hasValue()&&(pe.height=ke.getPixels("y"),pe.style&&(pe.style.height="".concat(pe.height,"px"))));let Qe=pe.clientWidth||pe.width,Ue=pe.clientHeight||pe.height;if(M&&we.hasValue()&&ke.hasValue()&&(Qe=we.getPixels("x"),Ue=ke.getPixels("y")),ne.setCurrent(Qe,Ue),typeof ie=="number"&&B.getAttribute("x",!0).setValue(ie),typeof D=="number"&&B.getAttribute("y",!0).setValue(D),typeof K=="number"||typeof Y=="number"){const We=toNumbers(B.getAttribute("viewBox").getString());let Ne=0,ut=0;if(typeof K=="number"){const et=B.getStyle("width");et.hasValue()?Ne=et.getPixels("x")/K:We[2]&&!isNaN(We[2])&&(Ne=We[2]/K)}if(typeof Y=="number"){const et=B.getStyle("height");et.hasValue()?ut=et.getPixels("y")/Y:We[3]&&!isNaN(We[3])&&(ut=We[3]/Y)}Ne||(Ne=ut),ut||(ut=Ne),B.getAttribute("width",!0).setValue(K),B.getAttribute("height",!0).setValue(Y);const Ye=B.getStyle("transform",!0,!0);Ye.setValue("".concat(Ye.getString()," scale(").concat(1/Ne,", ").concat(1/ut,")"))}P||oe.clearRect(0,0,Qe,Ue),B.render(oe),ue&&(this.isFirstRender=!1)}constructor(B,{fetch:M=defaultFetch$1,window:P=defaultWindow}={}){if(this.ctx=B,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=P,!M)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=M}}Screen.defaultWindow=defaultWindow;Screen.defaultFetch=defaultFetch$1;Screen.FRAMERATE=30;Screen.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch}=Screen,DefaultDOMParser=typeof DOMParser<"u"?DOMParser:void 0;class Parser{async parse(B){return B.startsWith("<")?this.parseFromString(B):this.load(B)}parseFromString(B){const M=new this.DOMParser;try{return this.checkDocument(M.parseFromString(B,"image/svg+xml"))}catch{return this.checkDocument(M.parseFromString(B,"text/xml"))}}checkDocument(B){const M=B.getElementsByTagName("parsererror")[0];if(M)throw new Error(M.textContent||"Unknown parse error");return B}async load(B){const P=await(await this.fetch(B)).text();return this.parseFromString(P)}constructor({fetch:B=defaultFetch,DOMParser:M=DefaultDOMParser}={}){if(!B)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!M)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=B,this.DOMParser=M}}class Translate{apply(B){const{x:M,y:P}=this.point;B.translate(M||0,P||0)}unapply(B){const{x:M,y:P}=this.point;B.translate(-1*M||0,-1*P||0)}applyToPoint(B){const{x:M,y:P}=this.point;B.applyTransform([1,0,0,1,M||0,P||0])}constructor(B,M){this.type="translate",this.point=Point.parse(M)}}class Rotate{apply(B){const{cx:M,cy:P,originX:K,originY:Y,angle:ie}=this,D=M+K.getPixels("x"),ne=P+Y.getPixels("y");B.translate(D,ne),B.rotate(ie.getRadians()),B.translate(-D,-ne)}unapply(B){const{cx:M,cy:P,originX:K,originY:Y,angle:ie}=this,D=M+K.getPixels("x"),ne=P+Y.getPixels("y");B.translate(D,ne),B.rotate(-1*ie.getRadians()),B.translate(-D,-ne)}applyToPoint(B){const{cx:M,cy:P,angle:K}=this,Y=K.getRadians();B.applyTransform([1,0,0,1,M||0,P||0]),B.applyTransform([Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0]),B.applyTransform([1,0,0,1,-M||0,-P||0])}constructor(B,M,P){this.type="rotate";const K=toNumbers(M);this.angle=new Property(B,"angle",K[0]),this.originX=P[0],this.originY=P[1],this.cx=K[1]||0,this.cy=K[2]||0}}class Scale{apply(B){const{scale:{x:M,y:P},originX:K,originY:Y}=this,ie=K.getPixels("x"),D=Y.getPixels("y");B.translate(ie,D),B.scale(M,P||M),B.translate(-ie,-D)}unapply(B){const{scale:{x:M,y:P},originX:K,originY:Y}=this,ie=K.getPixels("x"),D=Y.getPixels("y");B.translate(ie,D),B.scale(1/M,1/P||M),B.translate(-ie,-D)}applyToPoint(B){const{x:M,y:P}=this.scale;B.applyTransform([M||0,0,0,P||0,0,0])}constructor(B,M,P){this.type="scale";const K=Point.parseScale(M);(K.x===0||K.y===0)&&(K.x=PSEUDO_ZERO,K.y=PSEUDO_ZERO),this.scale=K,this.originX=P[0],this.originY=P[1]}}class Matrix{apply(B){const{originX:M,originY:P,matrix:K}=this,Y=M.getPixels("x"),ie=P.getPixels("y");B.translate(Y,ie),B.transform(K[0],K[1],K[2],K[3],K[4],K[5]),B.translate(-Y,-ie)}unapply(B){const{originX:M,originY:P,matrix:K}=this,Y=K[0],ie=K[2],D=K[4],ne=K[1],oe=K[3],ue=K[5],pe=0,we=0,ke=1,Qe=1/(Y*(oe*ke-ue*we)-ie*(ne*ke-ue*pe)+D*(ne*we-oe*pe)),Ue=M.getPixels("x"),We=P.getPixels("y");B.translate(Ue,We),B.transform(Qe*(oe*ke-ue*we),Qe*(ue*pe-ne*ke),Qe*(D*we-ie*ke),Qe*(Y*ke-D*pe),Qe*(ie*ue-D*oe),Qe*(D*ne-Y*ue)),B.translate(-Ue,-We)}applyToPoint(B){B.applyTransform(this.matrix)}constructor(B,M,P){this.type="matrix",this.matrix=toMatrixValue(M),this.originX=P[0],this.originY=P[1]}}class Skew extends Matrix{constructor(B,M,P){super(B,M,P),this.type="skew",this.angle=new Property(B,"angle",M)}}class SkewX extends Skew{constructor(B,M,P){super(B,M,P),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class SkewY extends Skew{constructor(B,M,P){super(B,M,P),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms(g){return compressSpaces(g).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(g){const[B="",M=""]=g.split("(");return[B.trim(),M.trim().replace(")","")]}class Transform{static fromElement(B,M){const P=M.getStyle("transform",!1,!0);if(P.hasValue()){const[K,Y=K]=M.getStyle("transform-origin",!1,!0).split();if(K&&Y){const ie=[K,Y];return new Transform(B,P.getString(),ie)}}return null}apply(B){this.transforms.forEach(M=>M.apply(B))}unapply(B){this.transforms.forEach(M=>M.unapply(B))}applyToPoint(B){this.transforms.forEach(M=>M.applyToPoint(B))}constructor(B,M,P){this.document=B,this.transforms=[],parseTransforms(M).forEach(Y=>{if(Y==="none")return;const[ie,D]=parseTransform(Y),ne=Transform.transformTypes[ie];ne&&this.transforms.push(new ne(this.document,D,P))})}}Transform.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};class Element{getAttribute(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const P=this.attributes.get(B);if(!P&&M){const K=new Property(this.document,B,"");return this.attributes.set(B,K),K}return P||Property.empty(this.document)}getHrefAttribute(){let B;for(const[M,P]of this.attributes)if(M==="href"||M.endsWith(":href")){B=P;break}return B||Property.empty(this.document)}getStyle(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const K=this.styles.get(B);if(K)return K;const Y=this.getAttribute(B);if(Y.hasValue())return this.styles.set(B,Y),Y;if(!P){const{parent:ie}=this;if(ie){const D=ie.getStyle(B);if(D.hasValue())return D}}if(M){const ie=new Property(this.document,B,"");return this.styles.set(B,ie),ie}return Property.empty(this.document)}render(B){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(B.save(),this.getStyle("mask").hasValue()){const M=this.getStyle("mask").getDefinition();M&&(this.applyEffects(B),M.apply(B,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const M=this.getStyle("filter").getDefinition();M&&(this.applyEffects(B),M.apply(B,this))}else this.setContext(B),this.renderChildren(B),this.clearContext(B);B.restore()}}setContext(B){}applyEffects(B){const M=Transform.fromElement(this.document,this);M&&M.apply(B);const P=this.getStyle("clip-path",!1,!0);if(P.hasValue()){const K=P.getDefinition();K&&K.apply(B)}}clearContext(B){}renderChildren(B){this.children.forEach(M=>{M.render(B)})}addChild(B){const M=B instanceof Element?B:this.document.createElement(B);M.parent=this,Element.ignoreChildTypes.includes(M.type)||this.children.push(M)}matchesSelector(B){var M;const{node:P}=this;if(typeof P.matches=="function")return P.matches(B);const K=(M=P.getAttribute)===null||M===void 0?void 0:M.call(P,"class");return!K||K===""?!1:K.split(" ").some(Y=>".".concat(Y)===B)}addStylesFromStyleDefinition(){const{styles:B,stylesSpecificity:M}=this.document;for(const[P,K]of B)if(!P.startsWith("@")&&this.matchesSelector(P)){const Y=M.get(P);if(K)for(const[ie,D]of K){let ne=this.stylesSpecificity.get(ie);typeof ne>"u"&&(ne="000"),Y&&Y>=ne&&(D&&this.styles.set(ie,D),this.stylesSpecificity.set(ie,Y))}}}removeStyles(B,M){return M.reduce((K,Y)=>{const ie=B.getStyle(Y);if(!ie.hasValue())return K;const D=ie.getString();return ie.setValue(""),[...K,[Y,D]]},[])}restoreStyles(B,M){M.forEach(P=>{let[K,Y]=P;B.getStyle(K,!0).setValue(Y)})}isFirstChild(){var B;return((B=this.parent)===null||B===void 0?void 0:B.children.indexOf(this))===0}constructor(B,M,P=!1){if(this.document=B,this.node=M,this.captureTextNodes=P,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!M||M.nodeType!==1)return;Array.from(M.attributes).forEach(ie=>{const D=normalizeAttributeName(ie.nodeName);this.attributes.set(D,new Property(B,D,ie.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(D=>D.trim()).forEach(D=>{if(!D)return;const[ne,oe]=D.split(":").map(ue=>ue.trim());ne&&this.styles.set(ne,new Property(B,ne,oe))});const{definitions:K}=B,Y=this.getAttribute("id");Y.hasValue()&&(K.has(Y.getString())||K.set(Y.getString(),this)),Array.from(M.childNodes).forEach(ie=>{if(ie.nodeType===1)this.addChild(ie);else if(P&&(ie.nodeType===3||ie.nodeType===4)){const D=B.createTextNode(ie);D.getText().length>0&&this.addChild(D)}})}}Element.ignoreChildTypes=["title"];class UnknownElement extends Element{constructor(B,M,P){super(B,M,P)}}function wrapFontFamily(g){const B=g.trim();return/^('|")/.test(B)?B:'"'.concat(B,'"')}function prepareFontFamily(g){return typeof process>"u"?g:g.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle(g){if(!g)return"";const B=g.trim().toLowerCase();switch(B){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return B;default:return/^oblique\s+(-|)\d+deg$/.test(B)?B:""}}function prepareFontWeight(g){if(!g)return"";const B=g.trim().toLowerCase();switch(B){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return B;default:return/^[\d.]+$/.test(B)?B:""}}class Font{static parse(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",M=arguments.length>1?arguments[1]:void 0,P="",K="",Y="",ie="",D="";const ne=compressSpaces(B).trim().split(" "),oe={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return ne.forEach(ue=>{switch(!0){case(!oe.fontStyle&&Font.styles.includes(ue)):ue!=="inherit"&&(P=ue),oe.fontStyle=!0;break;case(!oe.fontVariant&&Font.variants.includes(ue)):ue!=="inherit"&&(K=ue),oe.fontStyle=!0,oe.fontVariant=!0;break;case(!oe.fontWeight&&Font.weights.includes(ue)):ue!=="inherit"&&(Y=ue),oe.fontStyle=!0,oe.fontVariant=!0,oe.fontWeight=!0;break;case!oe.fontSize:ue!=="inherit"&&(ie=ue.split("/")[0]||""),oe.fontStyle=!0,oe.fontVariant=!0,oe.fontWeight=!0,oe.fontSize=!0;break;default:ue!=="inherit"&&(D+=ue)}}),new Font(P,K,Y,ie,D,M)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}constructor(B,M,P,K,Y,ie){const D=ie?typeof ie=="string"?Font.parse(ie):ie:{};this.fontFamily=Y||D.fontFamily,this.fontSize=K||D.fontSize,this.fontStyle=B||D.fontStyle,this.fontWeight=P||D.fontWeight,this.fontVariant=M||D.fontVariant}}Font.styles="normal|italic|oblique|inherit";Font.variants="normal|small-caps|inherit";Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class BoundingBox{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(B,M){typeof B<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=B,this.x2=B),B<this.x1&&(this.x1=B),B>this.x2&&(this.x2=B)),typeof M<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=M,this.y2=M),M<this.y1&&(this.y1=M),M>this.y2&&(this.y2=M))}addX(B){this.addPoint(B,0)}addY(B){this.addPoint(0,B)}addBoundingBox(B){if(!B)return;const{x1:M,y1:P,x2:K,y2:Y}=B;this.addPoint(M,P),this.addPoint(K,Y)}sumCubic(B,M,P,K,Y){return Math.pow(1-B,3)*M+3*Math.pow(1-B,2)*B*P+3*(1-B)*Math.pow(B,2)*K+Math.pow(B,3)*Y}bezierCurveAdd(B,M,P,K,Y){const ie=6*M-12*P+6*K,D=-3*M+9*P-9*K+3*Y,ne=3*P-3*M;if(D===0){if(ie===0)return;const we=-ne/ie;0<we&&we<1&&(B?this.addX(this.sumCubic(we,M,P,K,Y)):this.addY(this.sumCubic(we,M,P,K,Y)));return}const oe=Math.pow(ie,2)-4*ne*D;if(oe<0)return;const ue=(-ie+Math.sqrt(oe))/(2*D);0<ue&&ue<1&&(B?this.addX(this.sumCubic(ue,M,P,K,Y)):this.addY(this.sumCubic(ue,M,P,K,Y)));const pe=(-ie-Math.sqrt(oe))/(2*D);0<pe&&pe<1&&(B?this.addX(this.sumCubic(pe,M,P,K,Y)):this.addY(this.sumCubic(pe,M,P,K,Y)))}addBezierCurve(B,M,P,K,Y,ie,D,ne){this.addPoint(B,M),this.addPoint(D,ne),this.bezierCurveAdd(!0,B,P,Y,D),this.bezierCurveAdd(!1,M,K,ie,ne)}addQuadraticCurve(B,M,P,K,Y,ie){const D=B+.6666666666666666*(P-B),ne=M+2/3*(K-M),oe=D+1/3*(Y-B),ue=ne+1/3*(ie-M);this.addBezierCurve(B,M,D,oe,ne,ue,Y,ie)}isPointInBox(B,M){const{x1:P,y1:K,x2:Y,y2:ie}=this;return P<=B&&B<=Y&&K<=M&&M<=ie}constructor(B=Number.NaN,M=Number.NaN,P=Number.NaN,K=Number.NaN){this.x1=B,this.y1=M,this.x2=P,this.y2=K,this.addPoint(B,M),this.addPoint(P,K)}}class RenderedElement extends Element{calculateOpacity(){let B=1,M=this;for(;M;){const P=M.getStyle("opacity",!1,!0);P.hasValue(!0)&&(B*=P.getNumber()),M=M.parent}return B}setContext(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!M){const P=this.getStyle("fill"),K=this.getStyle("fill-opacity"),Y=this.getStyle("stroke"),ie=this.getStyle("stroke-opacity");if(P.isUrlDefinition()){const ke=P.getFillStyleDefinition(this,K);ke&&(B.fillStyle=ke)}else if(P.hasValue()){P.getString()==="currentColor"&&P.setValue(this.getStyle("color").getColor());const ke=P.getColor();ke!=="inherit"&&(B.fillStyle=ke==="none"?"rgba(0,0,0,0)":ke)}if(K.hasValue()){const ke=new Property(this.document,"fill",B.fillStyle).addOpacity(K).getColor();B.fillStyle=ke}if(Y.isUrlDefinition()){const ke=Y.getFillStyleDefinition(this,ie);ke&&(B.strokeStyle=ke)}else if(Y.hasValue()){Y.getString()==="currentColor"&&Y.setValue(this.getStyle("color").getColor());const ke=Y.getString();ke!=="inherit"&&(B.strokeStyle=ke==="none"?"rgba(0,0,0,0)":ke)}if(ie.hasValue()){const ke=new Property(this.document,"stroke",B.strokeStyle).addOpacity(ie).getString();B.strokeStyle=ke}const D=this.getStyle("stroke-width");if(D.hasValue()){const ke=D.getPixels();B.lineWidth=ke||PSEUDO_ZERO}const ne=this.getStyle("stroke-linecap"),oe=this.getStyle("stroke-linejoin"),ue=this.getStyle("stroke-miterlimit"),pe=this.getStyle("stroke-dasharray"),we=this.getStyle("stroke-dashoffset");if(ne.hasValue()&&(B.lineCap=ne.getString()),oe.hasValue()&&(B.lineJoin=oe.getString()),ue.hasValue()&&(B.miterLimit=ue.getNumber()),pe.hasValue()&&pe.getString()!=="none"){const ke=toNumbers(pe.getString());typeof B.setLineDash<"u"?B.setLineDash(ke):typeof B.webkitLineDash<"u"?B.webkitLineDash=ke:typeof B.mozDash<"u"&&!(ke.length===1&&ke[0]===0)&&(B.mozDash=ke);const Qe=we.getPixels();typeof B.lineDashOffset<"u"?B.lineDashOffset=Qe:typeof B.webkitLineDashOffset<"u"?B.webkitLineDashOffset=Qe:typeof B.mozDashOffset<"u"&&(B.mozDashOffset=Qe)}}if(this.modifiedEmSizeStack=!1,typeof B.font<"u"){const P=this.getStyle("font"),K=this.getStyle("font-style"),Y=this.getStyle("font-variant"),ie=this.getStyle("font-weight"),D=this.getStyle("font-size"),ne=this.getStyle("font-family"),oe=new Font(K.getString(),Y.getString(),ie.getString(),D.hasValue()?"".concat(D.getPixels(!0),"px"):"",ne.getString(),Font.parse(P.getString(),B.font));K.setValue(oe.fontStyle),Y.setValue(oe.fontVariant),ie.setValue(oe.fontWeight),D.setValue(oe.fontSize),ne.setValue(oe.fontFamily),B.font=oe.toString(),D.isPixels()&&(this.document.emSize=D.getPixels(),this.modifiedEmSizeStack=!0)}M||(this.applyEffects(B),B.globalAlpha=this.calculateOpacity())}clearContext(B){super.clearContext(B),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...B){super(...B),this.modifiedEmSizeStack=!1}}class TextElement extends RenderedElement{setContext(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(B,M);const P=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();P&&(B.textBaseline=P)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(B){if(this.type!=="text")return this.getTElementBoundingBox(B);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(B);let M=null;return this.children.forEach((P,K)=>{const Y=this.getChildBoundingBox(B,this,this,K);M?M.addBoundingBox(Y):M=Y}),M}getFontSize(){const{document:B,parent:M}=this,P=Font.parse(B.ctx.font).fontSize;return M.getStyle("font-size").getNumber(P)}getTElementBoundingBox(B){const M=this.getFontSize();return new BoundingBox(this.x,this.y-M,this.x+this.measureText(B),this.y)}getGlyph(B,M,P){const K=M[P];let Y;if(B.isArabic){var ie;const D=M.length,ne=M[P-1],oe=M[P+1];let ue="isolated";(P===0||ne===" ")&&P<D-1&&oe!==" "&&(ue="terminal"),P>0&&ne!==" "&&P<D-1&&oe!==" "&&(ue="medial"),P>0&&ne!==" "&&(P===D-1||oe===" ")&&(ue="initial"),Y=((ie=B.arabicGlyphs.get(K))===null||ie===void 0?void 0:ie.get(ue))||B.glyphs.get(K)}else Y=B.glyphs.get(K);return Y||(Y=B.missingGlyph),Y}getText(){return""}getTextFromNode(B){const M=B||this.node,P=Array.from(M.parentNode.childNodes),K=P.indexOf(M),Y=P.length-1;let ie=compressSpaces(M.textContent||"");return K===0&&(ie=trimLeft(ie)),K===Y&&(ie=trimRight(ie)),ie}renderChildren(B){if(this.type!=="text"){this.renderTElementChildren(B);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(B),this.children.forEach((P,K)=>{this.renderChild(B,this,this,K)});const{mouse:M}=this.document.screen;M.isWorking()&&M.checkBoundingBox(this,this.getBoundingBox(B))}renderTElementChildren(B){const{document:M,parent:P}=this,K=this.getText(),Y=P.getStyle("font-family").getDefinition();if(Y){const{unitsPerEm:ne}=Y.fontFace,oe=Font.parse(M.ctx.font),ue=P.getStyle("font-size").getNumber(oe.fontSize),pe=P.getStyle("font-style").getString(oe.fontStyle),we=ue/ne,ke=Y.isRTL?K.split("").reverse().join(""):K,Qe=toNumbers(P.getAttribute("dx").getString()),Ue=ke.length;for(let We=0;We<Ue;We++){const Ne=this.getGlyph(Y,ke,We);B.translate(this.x,this.y),B.scale(we,-we);const ut=B.lineWidth;B.lineWidth=B.lineWidth*ne/ue,pe==="italic"&&B.transform(1,0,.4,1,0,0),Ne.render(B),pe==="italic"&&B.transform(1,0,-.4,1,0,0),B.lineWidth=ut,B.scale(1/we,-1/we),B.translate(-this.x,-this.y),this.x+=ue*(Ne.horizAdvX||Y.horizAdvX)/ne,typeof Qe[We]<"u"&&!isNaN(Qe[We])&&(this.x+=Qe[We])}return}const{x:ie,y:D}=this;B.fillStyle&&B.fillText(K,ie,D),B.strokeStyle&&B.strokeText(K,ie,D)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const B=this.leafTexts[this.textChunkStart],M=B.getStyle("text-anchor").getString("start"),P=!1;let K=0;M==="start"||M==="end"&&P?K=B.x-this.minX:M==="end"||M==="start"&&P?K=B.x-this.maxX:K=B.x-(this.minX+this.maxX)/2;for(let Y=this.textChunkStart;Y<this.leafTexts.length;Y++)this.leafTexts[Y].x+=K;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(B){this.children.forEach((M,P)=>{this.adjustChildCoordinatesRecursiveCore(B,this,this,P)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(B,M,P,K){const Y=P.children[K];Y.children.length>0?Y.children.forEach((ie,D)=>{M.adjustChildCoordinatesRecursiveCore(B,M,Y,D)}):this.adjustChildCoordinates(B,M,P,K)}adjustChildCoordinates(B,M,P,K){const Y=P.children[K];if(typeof Y.measureText!="function")return Y;B.save(),Y.setContext(B,!0);const ie=Y.getAttribute("x"),D=Y.getAttribute("y"),ne=Y.getAttribute("dx"),oe=Y.getAttribute("dy"),ue=Y.getStyle("font-family").getDefinition(),pe=!!(ue!=null&&ue.isRTL);K===0&&(ie.hasValue()||ie.setValue(Y.getInheritedAttribute("x")),D.hasValue()||D.setValue(Y.getInheritedAttribute("y")),ne.hasValue()||ne.setValue(Y.getInheritedAttribute("dx")),oe.hasValue()||oe.setValue(Y.getInheritedAttribute("dy")));const we=Y.measureText(B);return pe&&(M.x-=we),ie.hasValue()?(M.applyAnchoring(),Y.x=ie.getPixels("x"),ne.hasValue()&&(Y.x+=ne.getPixels("x"))):(ne.hasValue()&&(M.x+=ne.getPixels("x")),Y.x=M.x),M.x=Y.x,pe||(M.x+=we),D.hasValue()?(Y.y=D.getPixels("y"),oe.hasValue()&&(Y.y+=oe.getPixels("y"))):(oe.hasValue()&&(M.y+=oe.getPixels("y")),Y.y=M.y),M.y=Y.y,M.leafTexts.push(Y),M.minX=Math.min(M.minX,Y.x,Y.x+we),M.maxX=Math.max(M.maxX,Y.x,Y.x+we),Y.clearContext(B),B.restore(),Y}getChildBoundingBox(B,M,P,K){const Y=P.children[K];if(typeof Y.getBoundingBox!="function")return null;const ie=Y.getBoundingBox(B);return ie&&Y.children.forEach((D,ne)=>{const oe=M.getChildBoundingBox(B,M,Y,ne);ie.addBoundingBox(oe)}),ie}renderChild(B,M,P,K){const Y=P.children[K];Y.render(B),Y.children.forEach((ie,D)=>{M.renderChild(B,M,Y,D)})}measureText(B){const{measureCache:M}=this;if(~M)return M;const P=this.getText(),K=this.measureTargetText(B,P);return this.measureCache=K,K}measureTargetText(B,M){if(!M.length)return 0;const{parent:P}=this,K=P.getStyle("font-family").getDefinition();if(K){const ie=this.getFontSize(),D=K.isRTL?M.split("").reverse().join(""):M,ne=toNumbers(P.getAttribute("dx").getString()),oe=D.length;let ue=0;for(let pe=0;pe<oe;pe++){const we=this.getGlyph(K,D,pe);ue+=(we.horizAdvX||K.horizAdvX)*ie/K.fontFace.unitsPerEm,typeof ne[pe]<"u"&&!isNaN(ne[pe])&&(ue+=ne[pe])}return ue}if(!B.measureText)return M.length*10;B.save(),this.setContext(B,!0);const{width:Y}=B.measureText(M);return this.clearContext(B),B.restore(),Y}getInheritedAttribute(B){let M=this;for(;M instanceof TextElement&&M.isFirstChild()&&M.parent;){const P=M.parent.getAttribute(B);if(P.hasValue(!0))return P.getString("0");M=M.parent}return null}constructor(B,M,P){super(B,M,new.target===TextElement?!0:P),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class TSpanElement extends TextElement{getText(){return this.text}constructor(B,M,P){super(B,M,new.target===TSpanElement?!0:P),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class TextNode extends TSpanElement{constructor(...B){super(...B),this.type="textNode"}}class PathParser extends _{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]}isEnd(){const{i:B,commands:M}=this;return B>=M.length-1}next(){const B=this.commands[++this.i];return this.previousCommand=this.command,this.command=B,B}getPoint(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const P=new Point(this.command[B],this.command[M]);return this.makeAbsolute(P)}getAsControlPoint(B,M){const P=this.getPoint(B,M);return this.control=P,P}getAsCurrentPoint(B,M){const P=this.getPoint(B,M);return this.current=P,P}getReflectedControlPoint(){const B=this.previousCommand.type;if(B!==_.CURVE_TO&&B!==_.SMOOTH_CURVE_TO&&B!==_.QUAD_TO&&B!==_.SMOOTH_QUAD_TO)return this.current;const{current:{x:M,y:P},control:{x:K,y:Y}}=this;return new Point(2*M-K,2*P-Y)}makeAbsolute(B){if(this.command.relative){const{x:M,y:P}=this.current;B.x+=M,B.y+=P}return B}addMarker(B,M,P){const{points:K,angles:Y}=this;P&&Y.length>0&&!Y[Y.length-1]&&(Y[Y.length-1]=K[K.length-1].angleTo(P)),this.addMarkerAngle(B,M?M.angleTo(B):null)}addMarkerAngle(B,M){this.points.push(B),this.angles.push(M)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:B}=this,M=B.length;for(let P=0;P<M;P++)if(!B[P]){for(let K=P+1;K<M;K++)if(B[K]){B[P]=B[K];break}}return B}constructor(B){super(B.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new Point(0,0),this.start=new Point(0,0),this.current=new Point(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class PathElement extends RenderedElement{path(B){const{pathParser:M}=this,P=new BoundingBox;for(M.reset(),B&&B.beginPath();!M.isEnd();)switch(M.next().type){case PathParser.MOVE_TO:this.pathM(B,P);break;case PathParser.LINE_TO:this.pathL(B,P);break;case PathParser.HORIZ_LINE_TO:this.pathH(B,P);break;case PathParser.VERT_LINE_TO:this.pathV(B,P);break;case PathParser.CURVE_TO:this.pathC(B,P);break;case PathParser.SMOOTH_CURVE_TO:this.pathS(B,P);break;case PathParser.QUAD_TO:this.pathQ(B,P);break;case PathParser.SMOOTH_QUAD_TO:this.pathT(B,P);break;case PathParser.ARC:this.pathA(B,P);break;case PathParser.CLOSE_PATH:this.pathZ(B,P);break}return P}getBoundingBox(B){return this.path()}getMarkers(){const{pathParser:B}=this,M=B.getMarkerPoints(),P=B.getMarkerAngles();return M.map((Y,ie)=>[Y,P[ie]])}renderChildren(B){this.path(B),this.document.screen.mouse.checkPath(this,B);const M=this.getStyle("fill-rule");B.fillStyle!==""&&(M.getString("inherit")!=="inherit"?B.fill(M.getString()):B.fill()),B.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(B.save(),B.setTransform(1,0,0,1,0,0),B.stroke(),B.restore()):B.stroke());const P=this.getMarkers();if(P){const K=P.length-1,Y=this.getStyle("marker-start"),ie=this.getStyle("marker-mid"),D=this.getStyle("marker-end");if(Y.isUrlDefinition()){const ne=Y.getDefinition(),[oe,ue]=P[0];ne.render(B,oe,ue)}if(ie.isUrlDefinition()){const ne=ie.getDefinition();for(let oe=1;oe<K;oe++){const[ue,pe]=P[oe];ne.render(B,ue,pe)}}if(D.isUrlDefinition()){const ne=D.getDefinition(),[oe,ue]=P[K];ne.render(B,oe,ue)}}}static pathM(B){const M=B.getAsCurrentPoint();return B.start=B.current,{point:M}}pathM(B,M){const{pathParser:P}=this,{point:K}=PathElement.pathM(P),{x:Y,y:ie}=K;P.addMarker(K),M.addPoint(Y,ie),B&&B.moveTo(Y,ie)}static pathL(B){const{current:M}=B,P=B.getAsCurrentPoint();return{current:M,point:P}}pathL(B,M){const{pathParser:P}=this,{current:K,point:Y}=PathElement.pathL(P),{x:ie,y:D}=Y;P.addMarker(Y,K),M.addPoint(ie,D),B&&B.lineTo(ie,D)}static pathH(B){const{current:M,command:P}=B,K=new Point((P.relative?M.x:0)+P.x,M.y);return B.current=K,{current:M,point:K}}pathH(B,M){const{pathParser:P}=this,{current:K,point:Y}=PathElement.pathH(P),{x:ie,y:D}=Y;P.addMarker(Y,K),M.addPoint(ie,D),B&&B.lineTo(ie,D)}static pathV(B){const{current:M,command:P}=B,K=new Point(M.x,(P.relative?M.y:0)+P.y);return B.current=K,{current:M,point:K}}pathV(B,M){const{pathParser:P}=this,{current:K,point:Y}=PathElement.pathV(P),{x:ie,y:D}=Y;P.addMarker(Y,K),M.addPoint(ie,D),B&&B.lineTo(ie,D)}static pathC(B){const{current:M}=B,P=B.getPoint("x1","y1"),K=B.getAsControlPoint("x2","y2"),Y=B.getAsCurrentPoint();return{current:M,point:P,controlPoint:K,currentPoint:Y}}pathC(B,M){const{pathParser:P}=this,{current:K,point:Y,controlPoint:ie,currentPoint:D}=PathElement.pathC(P);P.addMarker(D,ie,Y),M.addBezierCurve(K.x,K.y,Y.x,Y.y,ie.x,ie.y,D.x,D.y),B&&B.bezierCurveTo(Y.x,Y.y,ie.x,ie.y,D.x,D.y)}static pathS(B){const{current:M}=B,P=B.getReflectedControlPoint(),K=B.getAsControlPoint("x2","y2"),Y=B.getAsCurrentPoint();return{current:M,point:P,controlPoint:K,currentPoint:Y}}pathS(B,M){const{pathParser:P}=this,{current:K,point:Y,controlPoint:ie,currentPoint:D}=PathElement.pathS(P);P.addMarker(D,ie,Y),M.addBezierCurve(K.x,K.y,Y.x,Y.y,ie.x,ie.y,D.x,D.y),B&&B.bezierCurveTo(Y.x,Y.y,ie.x,ie.y,D.x,D.y)}static pathQ(B){const{current:M}=B,P=B.getAsControlPoint("x1","y1"),K=B.getAsCurrentPoint();return{current:M,controlPoint:P,currentPoint:K}}pathQ(B,M){const{pathParser:P}=this,{current:K,controlPoint:Y,currentPoint:ie}=PathElement.pathQ(P);P.addMarker(ie,Y,Y),M.addQuadraticCurve(K.x,K.y,Y.x,Y.y,ie.x,ie.y),B&&B.quadraticCurveTo(Y.x,Y.y,ie.x,ie.y)}static pathT(B){const{current:M}=B,P=B.getReflectedControlPoint();B.control=P;const K=B.getAsCurrentPoint();return{current:M,controlPoint:P,currentPoint:K}}pathT(B,M){const{pathParser:P}=this,{current:K,controlPoint:Y,currentPoint:ie}=PathElement.pathT(P);P.addMarker(ie,Y,Y),M.addQuadraticCurve(K.x,K.y,Y.x,Y.y,ie.x,ie.y),B&&B.quadraticCurveTo(Y.x,Y.y,ie.x,ie.y)}static pathA(B){const{current:M,command:P}=B;let{rX:K,rY:Y,xRot:ie,lArcFlag:D,sweepFlag:ne}=P;const oe=ie*(Math.PI/180),ue=B.getAsCurrentPoint(),pe=new Point(Math.cos(oe)*(M.x-ue.x)/2+Math.sin(oe)*(M.y-ue.y)/2,-Math.sin(oe)*(M.x-ue.x)/2+Math.cos(oe)*(M.y-ue.y)/2),we=Math.pow(pe.x,2)/Math.pow(K,2)+Math.pow(pe.y,2)/Math.pow(Y,2);we>1&&(K*=Math.sqrt(we),Y*=Math.sqrt(we));let ke=(D===ne?-1:1)*Math.sqrt((Math.pow(K,2)*Math.pow(Y,2)-Math.pow(K,2)*Math.pow(pe.y,2)-Math.pow(Y,2)*Math.pow(pe.x,2))/(Math.pow(K,2)*Math.pow(pe.y,2)+Math.pow(Y,2)*Math.pow(pe.x,2)));isNaN(ke)&&(ke=0);const Qe=new Point(ke*K*pe.y/Y,ke*-Y*pe.x/K),Ue=new Point((M.x+ue.x)/2+Math.cos(oe)*Qe.x-Math.sin(oe)*Qe.y,(M.y+ue.y)/2+Math.sin(oe)*Qe.x+Math.cos(oe)*Qe.y),We=vectorsAngle([1,0],[(pe.x-Qe.x)/K,(pe.y-Qe.y)/Y]),Ne=[(pe.x-Qe.x)/K,(pe.y-Qe.y)/Y],ut=[(-pe.x-Qe.x)/K,(-pe.y-Qe.y)/Y];let Ye=vectorsAngle(Ne,ut);return vectorsRatio(Ne,ut)<=-1&&(Ye=Math.PI),vectorsRatio(Ne,ut)>=1&&(Ye=0),{currentPoint:ue,rX:K,rY:Y,sweepFlag:ne,xAxisRotation:oe,centp:Ue,a1:We,ad:Ye}}pathA(B,M){const{pathParser:P}=this,{currentPoint:K,rX:Y,rY:ie,sweepFlag:D,xAxisRotation:ne,centp:oe,a1:ue,ad:pe}=PathElement.pathA(P),we=1-D?1:-1,ke=ue+we*(pe/2),Qe=new Point(oe.x+Y*Math.cos(ke),oe.y+ie*Math.sin(ke));if(P.addMarkerAngle(Qe,ke-we*Math.PI/2),P.addMarkerAngle(K,ke-we*Math.PI),M.addPoint(K.x,K.y),B&&!isNaN(ue)&&!isNaN(pe)){const Ue=Y>ie?Y:ie,We=Y>ie?1:Y/ie,Ne=Y>ie?ie/Y:1;B.translate(oe.x,oe.y),B.rotate(ne),B.scale(We,Ne),B.arc(0,0,Ue,ue,ue+pe,!!(1-D)),B.scale(1/We,1/Ne),B.rotate(-ne),B.translate(-oe.x,-oe.y)}}static pathZ(B){B.current=B.start}pathZ(B,M){PathElement.pathZ(this.pathParser),B&&M.x1!==M.x2&&M.y1!==M.y2&&B.closePath()}constructor(B,M,P){super(B,M,P),this.type="path",this.pathParser=new PathParser(this.getAttribute("d").getString())}}class SVGElement extends RenderedElement{setContext(B){var M;const{document:P}=this,{screen:K,window:Y}=P,ie=B.canvas;if(K.setDefaults(B),"style"in ie&&typeof B.font<"u"&&Y&&typeof Y.getComputedStyle<"u"){B.font=Y.getComputedStyle(ie).getPropertyValue("font");const ut=new Property(P,"fontSize",Font.parse(B.font).fontSize);ut.hasValue()&&(P.rootEmSize=ut.getPixels("y"),P.emSize=P.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:D,height:ne}=K.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const oe=this.getAttribute("refX"),ue=this.getAttribute("refY"),pe=this.getAttribute("viewBox"),we=pe.hasValue()?toNumbers(pe.getString()):null,ke=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let Qe=0,Ue=0,We=0,Ne=0;we&&(Qe=we[0],Ue=we[1]),this.root||(D=this.getStyle("width").getPixels("x"),ne=this.getStyle("height").getPixels("y"),this.type==="marker"&&(We=Qe,Ne=Ue,Qe=0,Ue=0)),K.viewPort.setCurrent(D,ne),this.node&&(!this.parent||((M=this.node.parentNode)===null||M===void 0?void 0:M.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(B),B.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),we&&(D=we[2],ne=we[3]),P.setViewBox({ctx:B,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:K.viewPort.width,desiredWidth:D,height:K.viewPort.height,desiredHeight:ne,minX:Qe,minY:Ue,refX:oe.getValue(),refY:ue.getValue(),clip:ke,clipX:We,clipY:Ne}),we&&(K.viewPort.removeCurrent(),K.viewPort.setCurrent(D,ne))}clearContext(B){super.clearContext(B),this.document.screen.viewPort.removeCurrent()}resize(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const K=this.getAttribute("width",!0),Y=this.getAttribute("height",!0),ie=this.getAttribute("viewBox"),D=this.getAttribute("style"),ne=K.getNumber(0),oe=Y.getNumber(0);if(P)if(typeof P=="string")this.getAttribute("preserveAspectRatio",!0).setValue(P);else{const ue=this.getAttribute("preserveAspectRatio");ue.hasValue()&&ue.setValue(ue.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(K.setValue(B),Y.setValue(M),ie.hasValue()||ie.setValue("0 0 ".concat(ne||B," ").concat(oe||M)),D.hasValue()){const ue=this.getStyle("width"),pe=this.getStyle("height");ue.hasValue()&&ue.setValue("".concat(B,"px")),pe.hasValue()&&pe.setValue("".concat(M,"px"))}}constructor(...B){super(...B),this.type="svg",this.root=!1}}class RectElement extends PathElement{path(B){const M=this.getAttribute("x").getPixels("x"),P=this.getAttribute("y").getPixels("y"),K=this.getStyle("width",!1,!0).getPixels("x"),Y=this.getStyle("height",!1,!0).getPixels("y"),ie=this.getAttribute("rx"),D=this.getAttribute("ry");let ne=ie.getPixels("x"),oe=D.getPixels("y");if(ie.hasValue()&&!D.hasValue()&&(oe=ne),D.hasValue()&&!ie.hasValue()&&(ne=oe),ne=Math.min(ne,K/2),oe=Math.min(oe,Y/2),B){const ue=4*((Math.sqrt(2)-1)/3);B.beginPath(),Y>0&&K>0&&(B.moveTo(M+ne,P),B.lineTo(M+K-ne,P),B.bezierCurveTo(M+K-ne+ue*ne,P,M+K,P+oe-ue*oe,M+K,P+oe),B.lineTo(M+K,P+Y-oe),B.bezierCurveTo(M+K,P+Y-oe+ue*oe,M+K-ne+ue*ne,P+Y,M+K-ne,P+Y),B.lineTo(M+ne,P+Y),B.bezierCurveTo(M+ne-ue*ne,P+Y,M,P+Y-oe+ue*oe,M,P+Y-oe),B.lineTo(M,P+oe),B.bezierCurveTo(M,P+oe-ue*oe,M+ne-ue*ne,P,M+ne,P),B.closePath())}return new BoundingBox(M,P,M+K,P+Y)}getMarkers(){return null}constructor(...B){super(...B),this.type="rect"}}class CircleElement extends PathElement{path(B){const M=this.getAttribute("cx").getPixels("x"),P=this.getAttribute("cy").getPixels("y"),K=this.getAttribute("r").getPixels();return B&&K>0&&(B.beginPath(),B.arc(M,P,K,0,Math.PI*2,!1),B.closePath()),new BoundingBox(M-K,P-K,M+K,P+K)}getMarkers(){return null}constructor(...B){super(...B),this.type="circle"}}class EllipseElement extends PathElement{path(B){const M=4*((Math.sqrt(2)-1)/3),P=this.getAttribute("rx").getPixels("x"),K=this.getAttribute("ry").getPixels("y"),Y=this.getAttribute("cx").getPixels("x"),ie=this.getAttribute("cy").getPixels("y");return B&&P>0&&K>0&&(B.beginPath(),B.moveTo(Y+P,ie),B.bezierCurveTo(Y+P,ie+M*K,Y+M*P,ie+K,Y,ie+K),B.bezierCurveTo(Y-M*P,ie+K,Y-P,ie+M*K,Y-P,ie),B.bezierCurveTo(Y-P,ie-M*K,Y-M*P,ie-K,Y,ie-K),B.bezierCurveTo(Y+M*P,ie-K,Y+P,ie-M*K,Y+P,ie),B.closePath()),new BoundingBox(Y-P,ie-K,Y+P,ie+K)}getMarkers(){return null}constructor(...B){super(...B),this.type="ellipse"}}class LineElement extends PathElement{getPoints(){return[new Point(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(B){const[{x:M,y:P},{x:K,y:Y}]=this.getPoints();return B&&(B.beginPath(),B.moveTo(M,P),B.lineTo(K,Y)),new BoundingBox(M,P,K,Y)}getMarkers(){const[B,M]=this.getPoints(),P=B.angleTo(M);return[[B,P],[M,P]]}constructor(...B){super(...B),this.type="line"}}class PolylineElement extends PathElement{path(B){const{points:M}=this,[{x:P,y:K}]=M,Y=new BoundingBox(P,K);return B&&(B.beginPath(),B.moveTo(P,K)),M.forEach(ie=>{let{x:D,y:ne}=ie;Y.addPoint(D,ne),B&&B.lineTo(D,ne)}),Y}getMarkers(){const{points:B}=this,M=B.length-1,P=[];return B.forEach((K,Y)=>{Y!==M&&P.push([K,K.angleTo(B[Y+1])])}),P.length>0&&P.push([B[B.length-1],P[P.length-1][1]]),P}constructor(B,M,P){super(B,M,P),this.type="polyline",this.points=[],this.points=Point.parsePath(this.getAttribute("points").getString())}}class PolygonElement extends PolylineElement{path(B){const M=super.path(B),[{x:P,y:K}]=this.points;return B&&(B.lineTo(P,K),B.closePath()),M}constructor(...B){super(...B),this.type="polygon"}}class PatternElement extends Element{createPattern(B,M,P){const K=this.getStyle("width").getPixels("x",!0),Y=this.getStyle("height").getPixels("y",!0),ie=new SVGElement(this.document,null);ie.attributes.set("viewBox",new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue())),ie.attributes.set("width",new Property(this.document,"width","".concat(K,"px"))),ie.attributes.set("height",new Property(this.document,"height","".concat(Y,"px"))),ie.attributes.set("transform",new Property(this.document,"transform",this.getAttribute("patternTransform").getValue())),ie.children=this.children;const D=this.document.createCanvas(K,Y),ne=D.getContext("2d"),oe=this.getAttribute("x"),ue=this.getAttribute("y");oe.hasValue()&&ue.hasValue()&&ne.translate(oe.getPixels("x",!0),ue.getPixels("y",!0)),P.hasValue()?this.styles.set("fill-opacity",P):this.styles.delete("fill-opacity");for(let we=-1;we<=1;we++)for(let ke=-1;ke<=1;ke++)ne.save(),ie.attributes.set("x",new Property(this.document,"x",we*D.width)),ie.attributes.set("y",new Property(this.document,"y",ke*D.height)),ie.render(ne),ne.restore();return B.createPattern(D,"repeat")}constructor(...B){super(...B),this.type="pattern"}}class MarkerElement extends Element{render(B,M,P){if(!M)return;const{x:K,y:Y}=M,ie=this.getAttribute("orient").getString("auto"),D=this.getAttribute("markerUnits").getString("strokeWidth");B.translate(K,Y),ie==="auto"&&B.rotate(P),D==="strokeWidth"&&B.scale(B.lineWidth,B.lineWidth),B.save();const ne=new SVGElement(this.document);ne.type=this.type,ne.attributes.set("viewBox",new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue())),ne.attributes.set("refX",new Property(this.document,"refX",this.getAttribute("refX").getValue())),ne.attributes.set("refY",new Property(this.document,"refY",this.getAttribute("refY").getValue())),ne.attributes.set("width",new Property(this.document,"width",this.getAttribute("markerWidth").getValue())),ne.attributes.set("height",new Property(this.document,"height",this.getAttribute("markerHeight").getValue())),ne.attributes.set("overflow",new Property(this.document,"overflow",this.getAttribute("overflow").getValue())),ne.attributes.set("fill",new Property(this.document,"fill",this.getAttribute("fill").getColor("black"))),ne.attributes.set("stroke",new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),ne.children=this.children,ne.render(B),B.restore(),D==="strokeWidth"&&B.scale(1/B.lineWidth,1/B.lineWidth),ie==="auto"&&B.rotate(-P),B.translate(-K,-Y)}constructor(...B){super(...B),this.type="marker"}}class DefsElement extends Element{render(){}constructor(...B){super(...B),this.type="defs"}}class GElement extends RenderedElement{getBoundingBox(B){const M=new BoundingBox;return this.children.forEach(P=>{M.addBoundingBox(P.getBoundingBox(B))}),M}constructor(...B){super(...B),this.type="g"}}class GradientElement extends Element{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(B,M,P){let K=this;this.getHrefAttribute().hasValue()&&(K=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(K));const{stops:Y}=K,ie=this.getGradient(B,M);if(!ie)return this.addParentOpacity(P,Y[Y.length-1].color);if(Y.forEach(D=>{ie.addColorStop(D.offset,this.addParentOpacity(P,D.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:D}=this,{MAX_VIRTUAL_PIXELS:ne}=Screen,{viewPort:oe}=D.screen,ue=oe.getRoot(),pe=new RectElement(D);pe.attributes.set("x",new Property(D,"x",-ne/3)),pe.attributes.set("y",new Property(D,"y",-ne/3)),pe.attributes.set("width",new Property(D,"width",ne)),pe.attributes.set("height",new Property(D,"height",ne));const we=new GElement(D);we.attributes.set("transform",new Property(D,"transform",this.getAttribute("gradientTransform").getValue())),we.children=[pe];const ke=new SVGElement(D);ke.attributes.set("x",new Property(D,"x",0)),ke.attributes.set("y",new Property(D,"y",0)),ke.attributes.set("width",new Property(D,"width",ue.width)),ke.attributes.set("height",new Property(D,"height",ue.height)),ke.children=[we];const Qe=D.createCanvas(ue.width,ue.height),Ue=Qe.getContext("2d");return Ue.fillStyle=ie,ke.render(Ue),Ue.createPattern(Qe,"no-repeat")}return ie}inheritStopContainer(B){this.attributesToInherit.forEach(M=>{!this.getAttribute(M).hasValue()&&B.getAttribute(M).hasValue()&&this.getAttribute(M,!0).setValue(B.getAttribute(M).getValue())})}addParentOpacity(B,M){return B.hasValue()?new Property(this.document,"color",M).addOpacity(B).getColor():M}constructor(B,M,P){super(B,M,P),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:K,children:Y}=this;Y.forEach(ie=>{ie.type==="stop"&&K.push(ie)})}}class LinearGradientElement extends GradientElement{getGradient(B,M){const P=this.getGradientUnits()==="objectBoundingBox",K=P?M.getBoundingBox(B):null;if(P&&!K)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const Y=P?K.x+K.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),ie=P?K.y+K.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),D=P?K.x+K.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),ne=P?K.y+K.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return Y===D&&ie===ne?null:B.createLinearGradient(Y,ie,D,ne)}constructor(B,M,P){super(B,M,P),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class RadialGradientElement extends GradientElement{getGradient(B,M){const P=this.getGradientUnits()==="objectBoundingBox",K=M.getBoundingBox(B);if(P&&!K)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const Y=P?K.x+K.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),ie=P?K.y+K.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let D=Y,ne=ie;this.getAttribute("fx").hasValue()&&(D=P?K.x+K.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(ne=P?K.y+K.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const oe=P?(K.width+K.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),ue=this.getAttribute("fr").getPixels();return B.createRadialGradient(D,ne,ue,Y,ie,oe)}constructor(B,M,P){super(B,M,P),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class StopElement extends Element{constructor(B,M,P){super(B,M,P),this.type="stop";const K=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),Y=this.getStyle("stop-opacity");let ie=this.getStyle("stop-color",!0);ie.getString()===""&&ie.setValue("#000"),Y.hasValue()&&(ie=ie.addOpacity(Y)),this.offset=K,this.color=ie.getColor()}}class AnimateElement extends Element{getProperty(){const B=this.getAttribute("attributeType").getString(),M=this.getAttribute("attributeName").getString();return B==="CSS"?this.parent.getStyle(M,!0):this.parent.getAttribute(M,!0)}calcValue(){const{initialUnits:B}=this,{progress:M,from:P,to:K}=this.getProgress();let Y=P.getNumber()+(K.getNumber()-P.getNumber())*M;return B==="%"&&(Y*=100),"".concat(Y).concat(B)}update(B){const{parent:M}=this,P=this.getProperty();if(this.initialValue||(this.initialValue=P.getString(),this.initialUnits=P.getUnits()),this.duration>this.maxDuration){const Y=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(Y==="freeze"&&!this.frozen)this.frozen=!0,M&&P&&(M.animationFrozen=!0,M.animationFrozenValue=P.getString());else if(Y==="remove"&&!this.removed)return this.removed=!0,M&&P&&P.setValue(M.animationFrozen?M.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=B;let K=!1;if(this.begin<this.duration){let Y=this.calcValue();const ie=this.getAttribute("type");if(ie.hasValue()){const D=ie.getString();Y="".concat(D,"(").concat(Y,")")}P.setValue(Y),K=!0}return K}getProgress(){const{document:B,values:M}=this;let P=(this.duration-this.begin)/(this.maxDuration-this.begin),K,Y;if(M.hasValue()){const ie=P*(M.getValue().length-1),D=Math.floor(ie),ne=Math.ceil(ie);let oe;oe=M.getValue()[D],K=new Property(B,"from",oe?parseFloat(oe):0),oe=M.getValue()[ne],Y=new Property(B,"to",oe?parseFloat(oe):0),P=(ie-D)/(ne-D)}else K=this.from,Y=this.to;return{progress:P,from:K,to:Y}}constructor(B,M,P){super(B,M,P),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,B.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property(B,"values",null);const K=this.getAttribute("values");K.hasValue()&&this.values.setValue(K.getString().split(";"))}}class AnimateColorElement extends AnimateElement{calcValue(){const{progress:B,from:M,to:P}=this.getProgress(),K=new RGBColor$1(M.getColor()),Y=new RGBColor$1(P.getColor());if(K.ok&&Y.ok){const ie=K.r+(Y.r-K.r)*B,D=K.g+(Y.g-K.g)*B,ne=K.b+(Y.b-K.b)*B;return"rgb(".concat(Math.floor(ie),", ").concat(Math.floor(D),", ").concat(Math.floor(ne),")")}return this.getAttribute("from").getColor()}constructor(...B){super(...B),this.type="animateColor"}}class AnimateTransformElement extends AnimateElement{calcValue(){const{progress:B,from:M,to:P}=this.getProgress(),K=toNumbers(M.getString()),Y=toNumbers(P.getString());return K.map((D,ne)=>{const oe=Y[ne];return D+(oe-D)*B}).join(" ")}constructor(...B){super(...B),this.type="animateTransform"}}class FontFaceElement extends Element{constructor(B,M,P){super(B,M,P),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class GlyphElement extends PathElement{constructor(B,M,P){super(B,M,P),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class MissingGlyphElement extends GlyphElement{constructor(...B){super(...B),this.type="missing-glyph",this.horizAdvX=0}}class FontElement extends Element{render(){}constructor(B,M,P){super(B,M,P),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:K}=B,{children:Y}=this;for(const ie of Y)if(ie instanceof FontFaceElement){this.fontFace=ie;const D=ie.getStyle("font-family");D.hasValue()&&K.set(D.getString(),this)}else if(ie instanceof MissingGlyphElement)this.missingGlyph=ie;else if(ie instanceof GlyphElement)if(ie.arabicForm){this.isRTL=!0,this.isArabic=!0;let D=this.arabicGlyphs.get(ie.unicode);typeof D>"u"&&(D=new Map,this.arabicGlyphs.set(ie.unicode,D)),D.set(ie.arabicForm,ie)}else this.glyphs.set(ie.unicode,ie)}}class TRefElement extends TextElement{getText(){const B=this.getHrefAttribute().getDefinition();if(B){const M=B.children[0];if(M)return M.getText()}return""}constructor(...B){super(...B),this.type="tref"}}class AElement extends TextElement{getText(){return this.text}renderChildren(B){if(this.hasText){super.renderChildren(B);const{document:M,x:P,y:K}=this,{mouse:Y}=M.screen,ie=new Property(M,"fontSize",Font.parse(M.ctx.font).fontSize);Y.isWorking()&&Y.checkBoundingBox(this,new BoundingBox(P,K-ie.getPixels("y"),P+this.measureText(B),K))}else if(this.children.length>0){const M=new GElement(this.document);M.children=this.children,M.parent=this,M.render(B)}}onClick(){const{window:B}=this.document;B&&B.open(this.getHrefAttribute().getString())}onMouseMove(){const B=this.document.ctx;B.canvas.style.cursor="pointer"}constructor(B,M,P){super(B,M,P),this.type="a";const{childNodes:K}=M,Y=K[0],ie=K.length>0&&Array.from(K).every(D=>D.nodeType===3);this.hasText=ie,this.text=ie?this.getTextFromNode(Y):""}}class TextPathElement extends TextElement{getText(){return this.text}path(B){const{dataArray:M}=this;B&&B.beginPath(),M.forEach(P=>{let{type:K,points:Y}=P;switch(K){case PathParser.LINE_TO:B&&B.lineTo(Y[0],Y[1]);break;case PathParser.MOVE_TO:B&&B.moveTo(Y[0],Y[1]);break;case PathParser.CURVE_TO:B&&B.bezierCurveTo(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);break;case PathParser.QUAD_TO:B&&B.quadraticCurveTo(Y[0],Y[1],Y[2],Y[3]);break;case PathParser.ARC:{const[ie,D,ne,oe,ue,pe,we,ke]=Y,Qe=ne>oe?ne:oe,Ue=ne>oe?1:ne/oe,We=ne>oe?oe/ne:1;B&&(B.translate(ie,D),B.rotate(we),B.scale(Ue,We),B.arc(0,0,Qe,ue,ue+pe,!!(1-ke)),B.scale(1/Ue,1/We),B.rotate(-we),B.translate(-ie,-D));break}case PathParser.CLOSE_PATH:B&&B.closePath();break}})}renderChildren(B){this.setTextData(B),B.save();const M=this.parent.getStyle("text-decoration").getString(),P=this.getFontSize(),{glyphInfo:K}=this,Y=B.fillStyle;M==="underline"&&B.beginPath(),K.forEach((ie,D)=>{const{p0:ne,p1:oe,rotation:ue,text:pe}=ie;B.save(),B.translate(ne.x,ne.y),B.rotate(ue),B.fillStyle&&B.fillText(pe,0,0),B.strokeStyle&&B.strokeText(pe,0,0),B.restore(),M==="underline"&&(D===0&&B.moveTo(ne.x,ne.y+P/8),B.lineTo(oe.x,oe.y+P/5))}),M==="underline"&&(B.lineWidth=P/20,B.strokeStyle=Y,B.stroke(),B.closePath()),B.restore()}getLetterSpacingAt(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[B]||0}findSegmentToFitChar(B,M,P,K,Y,ie,D,ne,oe){let ue=ie,pe=this.measureText(B,ne);ne===" "&&M==="justify"&&P<K&&(pe+=(K-P)/Y),oe>-1&&(ue+=this.getLetterSpacingAt(oe));const we=this.textHeight/20,ke=this.getEquidistantPointOnPath(ue,we,0),Qe=this.getEquidistantPointOnPath(ue+pe,we,0),Ue={p0:ke,p1:Qe},We=ke&&Qe?Math.atan2(Qe.y-ke.y,Qe.x-ke.x):0;if(D){const Ne=Math.cos(Math.PI/2+We)*D,ut=Math.cos(-We)*D;Ue.p0={...ke,x:ke.x+Ne,y:ke.y+ut},Ue.p1={...Qe,x:Qe.x+Ne,y:Qe.y+ut}}return ue+=pe,{offset:ue,segment:Ue,rotation:We}}measureText(B,M){const{measuresCache:P}=this,K=M||this.getText();if(P.has(K))return P.get(K);const Y=this.measureTargetText(B,K);return P.set(K,Y),Y}setTextData(B){if(this.glyphInfo)return;const M=this.getText(),P=M.split(""),K=M.split(" ").length-1,Y=this.parent.getAttribute("dx").split().map(Ye=>Ye.getPixels("x")),ie=this.parent.getAttribute("dy").getPixels("y"),D=this.parent.getStyle("text-anchor").getString("start"),ne=this.getStyle("letter-spacing"),oe=this.parent.getStyle("letter-spacing");let ue=0;!ne.hasValue()||ne.getValue()==="inherit"?ue=oe.getPixels():ne.hasValue()&&ne.getValue()!=="initial"&&ne.getValue()!=="unset"&&(ue=ne.getPixels());const pe=[],we=M.length;this.letterSpacingCache=pe;for(let Ye=0;Ye<we;Ye++)pe.push(typeof Y[Ye]<"u"?Y[Ye]:ue);const ke=pe.reduce((Ye,et,rt)=>rt===0?0:Ye+et||0,0),Qe=this.measureText(B),Ue=Math.max(Qe+ke,0);this.textWidth=Qe,this.textHeight=this.getFontSize(),this.glyphInfo=[];const We=this.getPathLength(),Ne=this.getStyle("startOffset").getNumber(0)*We;let ut=0;(D==="middle"||D==="center")&&(ut=-Ue/2),(D==="end"||D==="right")&&(ut=-Ue),ut+=Ne,P.forEach((Ye,et)=>{const{offset:rt,segment:ft,rotation:Ze}=this.findSegmentToFitChar(B,D,Ue,We,K,ut,ie,Ye,et);ut=rt,!(!ft.p0||!ft.p1)&&this.glyphInfo.push({text:P[et],p0:ft.p0,p1:ft.p1,rotation:Ze})})}parsePathData(B){if(this.pathLength=-1,!B)return[];const M=[],{pathParser:P}=B;for(P.reset();!P.isEnd();){const{current:K}=P,Y=K?K.x:0,ie=K?K.y:0,D=P.next();let ne=D.type,oe=[];switch(D.type){case PathParser.MOVE_TO:this.pathM(P,oe);break;case PathParser.LINE_TO:ne=this.pathL(P,oe);break;case PathParser.HORIZ_LINE_TO:ne=this.pathH(P,oe);break;case PathParser.VERT_LINE_TO:ne=this.pathV(P,oe);break;case PathParser.CURVE_TO:this.pathC(P,oe);break;case PathParser.SMOOTH_CURVE_TO:ne=this.pathS(P,oe);break;case PathParser.QUAD_TO:this.pathQ(P,oe);break;case PathParser.SMOOTH_QUAD_TO:ne=this.pathT(P,oe);break;case PathParser.ARC:oe=this.pathA(P);break;case PathParser.CLOSE_PATH:PathElement.pathZ(P);break}D.type!==PathParser.CLOSE_PATH?M.push({type:ne,points:oe,start:{x:Y,y:ie},pathLength:this.calcLength(Y,ie,ne,oe)}):M.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return M}pathM(B,M){const{x:P,y:K}=PathElement.pathM(B).point;M.push(P,K)}pathL(B,M){const{x:P,y:K}=PathElement.pathL(B).point;return M.push(P,K),PathParser.LINE_TO}pathH(B,M){const{x:P,y:K}=PathElement.pathH(B).point;return M.push(P,K),PathParser.LINE_TO}pathV(B,M){const{x:P,y:K}=PathElement.pathV(B).point;return M.push(P,K),PathParser.LINE_TO}pathC(B,M){const{point:P,controlPoint:K,currentPoint:Y}=PathElement.pathC(B);M.push(P.x,P.y,K.x,K.y,Y.x,Y.y)}pathS(B,M){const{point:P,controlPoint:K,currentPoint:Y}=PathElement.pathS(B);return M.push(P.x,P.y,K.x,K.y,Y.x,Y.y),PathParser.CURVE_TO}pathQ(B,M){const{controlPoint:P,currentPoint:K}=PathElement.pathQ(B);M.push(P.x,P.y,K.x,K.y)}pathT(B,M){const{controlPoint:P,currentPoint:K}=PathElement.pathT(B);return M.push(P.x,P.y,K.x,K.y),PathParser.QUAD_TO}pathA(B){let{rX:M,rY:P,sweepFlag:K,xAxisRotation:Y,centp:ie,a1:D,ad:ne}=PathElement.pathA(B);return K===0&&ne>0&&(ne-=2*Math.PI),K===1&&ne<0&&(ne+=2*Math.PI),[ie.x,ie.y,M,P,D,ne,Y,K]}calcLength(B,M,P,K){let Y=0,ie=null,D=null,ne=0;switch(P){case PathParser.LINE_TO:return this.getLineLength(B,M,K[0],K[1]);case PathParser.CURVE_TO:for(Y=0,ie=this.getPointOnCubicBezier(0,B,M,K[0],K[1],K[2],K[3],K[4],K[5]),ne=.01;ne<=1;ne+=.01)D=this.getPointOnCubicBezier(ne,B,M,K[0],K[1],K[2],K[3],K[4],K[5]),Y+=this.getLineLength(ie.x,ie.y,D.x,D.y),ie=D;return Y;case PathParser.QUAD_TO:for(Y=0,ie=this.getPointOnQuadraticBezier(0,B,M,K[0],K[1],K[2],K[3]),ne=.01;ne<=1;ne+=.01)D=this.getPointOnQuadraticBezier(ne,B,M,K[0],K[1],K[2],K[3]),Y+=this.getLineLength(ie.x,ie.y,D.x,D.y),ie=D;return Y;case PathParser.ARC:{Y=0;const oe=K[4],ue=K[5],pe=K[4]+ue;let we=Math.PI/180;if(Math.abs(oe-pe)<we&&(we=Math.abs(oe-pe)),ie=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],oe,0),ue<0)for(ne=oe-we;ne>pe;ne-=we)D=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],ne,0),Y+=this.getLineLength(ie.x,ie.y,D.x,D.y),ie=D;else for(ne=oe+we;ne<pe;ne+=we)D=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],ne,0),Y+=this.getLineLength(ie.x,ie.y,D.x,D.y),ie=D;return D=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],pe,0),Y+=this.getLineLength(ie.x,ie.y,D.x,D.y),Y}}return 0}getPointOnLine(B,M,P,K,Y){let ie=arguments.length>5&&arguments[5]!==void 0?arguments[5]:M,D=arguments.length>6&&arguments[6]!==void 0?arguments[6]:P;const ne=(Y-P)/(K-M+PSEUDO_ZERO);let oe=Math.sqrt(B*B/(1+ne*ne));K<M&&(oe*=-1);let ue=ne*oe,pe=null;if(K===M)pe={x:ie,y:D+ue};else if((D-P)/(ie-M+PSEUDO_ZERO)===ne)pe={x:ie+oe,y:D+ue};else{let we=0,ke=0;const Qe=this.getLineLength(M,P,K,Y);if(Qe<PSEUDO_ZERO)return null;let Ue=(ie-M)*(K-M)+(D-P)*(Y-P);Ue/=Qe*Qe,we=M+Ue*(K-M),ke=P+Ue*(Y-P);const We=this.getLineLength(ie,D,we,ke),Ne=Math.sqrt(B*B-We*We);oe=Math.sqrt(Ne*Ne/(1+ne*ne)),K<M&&(oe*=-1),ue=ne*oe,pe={x:we+oe,y:ke+ue}}return pe}getPointOnPath(B){const M=this.getPathLength();let P=0,K=null;if(B<-5e-5||B-5e-5>M)return null;const{dataArray:Y}=this;for(const ie of Y){if(ie&&(ie.pathLength<5e-5||P+ie.pathLength+5e-5<B)){P+=ie.pathLength;continue}const D=B-P;let ne=0;switch(ie.type){case PathParser.LINE_TO:K=this.getPointOnLine(D,ie.start.x,ie.start.y,ie.points[0],ie.points[1],ie.start.x,ie.start.y);break;case PathParser.ARC:{const oe=ie.points[4],ue=ie.points[5],pe=ie.points[4]+ue;if(ne=oe+D/ie.pathLength*ue,ue<0&&ne<pe||ue>=0&&ne>pe)break;K=this.getPointOnEllipticalArc(ie.points[0],ie.points[1],ie.points[2],ie.points[3],ne,ie.points[6]);break}case PathParser.CURVE_TO:ne=D/ie.pathLength,ne>1&&(ne=1),K=this.getPointOnCubicBezier(ne,ie.start.x,ie.start.y,ie.points[0],ie.points[1],ie.points[2],ie.points[3],ie.points[4],ie.points[5]);break;case PathParser.QUAD_TO:ne=D/ie.pathLength,ne>1&&(ne=1),K=this.getPointOnQuadraticBezier(ne,ie.start.x,ie.start.y,ie.points[0],ie.points[1],ie.points[2],ie.points[3]);break}if(K)return K;break}return null}getLineLength(B,M,P,K){return Math.sqrt((P-B)*(P-B)+(K-M)*(K-M))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((B,M)=>M.pathLength>0?B+M.pathLength:B,0)),this.pathLength}getPointOnCubicBezier(B,M,P,K,Y,ie,D,ne,oe){const ue=ne*CB1(B)+ie*CB2(B)+K*CB3(B)+M*CB4(B),pe=oe*CB1(B)+D*CB2(B)+Y*CB3(B)+P*CB4(B);return{x:ue,y:pe}}getPointOnQuadraticBezier(B,M,P,K,Y,ie,D){const ne=ie*QB1(B)+K*QB2(B)+M*QB3(B),oe=D*QB1(B)+Y*QB2(B)+P*QB3(B);return{x:ne,y:oe}}getPointOnEllipticalArc(B,M,P,K,Y,ie){const D=Math.cos(ie),ne=Math.sin(ie),oe={x:P*Math.cos(Y),y:K*Math.sin(Y)};return{x:B+(oe.x*D-oe.y*ne),y:M+(oe.x*ne+oe.y*D)}}buildEquidistantCache(B,M){const P=this.getPathLength(),K=M||.25,Y=B||P/100;if(!this.equidistantCache||this.equidistantCache.step!==Y||this.equidistantCache.precision!==K){this.equidistantCache={step:Y,precision:K,points:[]};let ie=0;for(let D=0;D<=P;D+=K){const ne=this.getPointOnPath(D),oe=this.getPointOnPath(D+K);!ne||!oe||(ie+=this.getLineLength(ne.x,ne.y,oe.x,oe.y),ie>=Y&&(this.equidistantCache.points.push({x:ne.x,y:ne.y,distance:D}),ie-=Y))}}}getEquidistantPointOnPath(B,M,P){if(this.buildEquidistantCache(M,P),B<0||B-this.getPathLength()>5e-5)return null;const K=Math.round(B/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[K]||null}constructor(B,M,P){super(B,M,P),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const K=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(K)}}const dataUriRegex=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class ImageElement extends RenderedElement{async loadImage(B){try{const M=await this.document.createImage(B);this.image=M}catch(M){console.error('Error while loading image "'.concat(B,'":'),M)}this.loaded=!0}async loadSvg(B){const M=dataUriRegex.exec(B);if(M){const P=M[5];P&&(M[4]==="base64"?this.image=atob(P):this.image=decodeURIComponent(P))}else try{const K=await(await this.document.fetch(B)).text();this.image=K}catch(P){console.error('Error while loading image "'.concat(B,'":'),P)}this.loaded=!0}renderChildren(B){const{document:M,image:P,loaded:K}=this,Y=this.getAttribute("x").getPixels("x"),ie=this.getAttribute("y").getPixels("y"),D=this.getStyle("width").getPixels("x"),ne=this.getStyle("height").getPixels("y");if(!(!K||!P||!D||!ne)){if(B.save(),B.translate(Y,ie),typeof P=="string"){const oe=M.canvg.forkString(B,P,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:D,scaleHeight:ne}),{documentElement:ue}=oe.document;ue&&(ue.parent=this),oe.render()}else M.setViewBox({ctx:B,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:D,desiredWidth:P.width,height:ne,desiredHeight:P.height}),this.loaded&&(!("complete"in P)||P.complete)&&B.drawImage(P,0,0);B.restore()}}getBoundingBox(){const B=this.getAttribute("x").getPixels("x"),M=this.getAttribute("y").getPixels("y"),P=this.getStyle("width").getPixels("x"),K=this.getStyle("height").getPixels("y");return new BoundingBox(B,M,B+P,M+K)}constructor(B,M,P){super(B,M,P),this.type="image",this.loaded=!1;const K=this.getHrefAttribute().getString();if(!K)return;const Y=K.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(K);B.images.push(this),Y?this.loadSvg(K):this.loadImage(K)}}class SymbolElement extends RenderedElement{render(B){}constructor(...B){super(...B),this.type="symbol"}}class SVGFontLoader{async load(B,M){try{const{document:P}=this,Y=(await P.canvg.parser.load(M)).getElementsByTagName("font");Array.from(Y).forEach(ie=>{const D=P.createElement(ie);P.definitions.set(B,D)})}catch(P){console.error('Error while loading font "'.concat(M,'":'),P)}this.loaded=!0}constructor(B){this.document=B,this.loaded=!1,B.fonts.push(this)}}class StyleElement extends Element{constructor(B,M,P){super(B,M,P),this.type="style",compressSpaces(Array.from(M.childNodes).map(ie=>ie.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(ie=>{const D=ie.trim();if(!D)return;const ne=D.split("{"),oe=ne[0].split(","),ue=ne[1].split(";");oe.forEach(pe=>{const we=pe.trim();if(!we)return;const ke=B.styles.get(we)||new Map;if(ue.forEach(Qe=>{const Ue=Qe.indexOf(":"),We=Qe.substr(0,Ue).trim(),Ne=Qe.substr(Ue+1,Qe.length-Ue).trim();We&&Ne&&ke.set(We,new Property(B,We,Ne))}),B.styles.set(we,ke),B.stylesSpecificity.set(we,getSelectorSpecificity(we)),we==="@font-face"){const Qe=ke.get("font-family").getString().replace(/"|'/g,"");ke.get("src").getString().split(",").forEach(We=>{if(We.indexOf('format("svg")')>0){const Ne=parseExternalUrl(We);Ne&&new SVGFontLoader(B).load(Qe,Ne)}})}})})}}StyleElement.parseExternalUrl=parseExternalUrl;class UseElement extends RenderedElement{setContext(B){super.setContext(B);const M=this.getAttribute("x"),P=this.getAttribute("y");M.hasValue()&&B.translate(M.getPixels("x"),0),P.hasValue()&&B.translate(0,P.getPixels("y"))}path(B){const{element:M}=this;M&&M.path(B)}renderChildren(B){const{document:M,element:P}=this;if(P){let K=P;if(P.type==="symbol"&&(K=new SVGElement(M),K.attributes.set("viewBox",new Property(M,"viewBox",P.getAttribute("viewBox").getString())),K.attributes.set("preserveAspectRatio",new Property(M,"preserveAspectRatio",P.getAttribute("preserveAspectRatio").getString())),K.attributes.set("overflow",new Property(M,"overflow",P.getAttribute("overflow").getString())),K.children=P.children,P.styles.set("opacity",new Property(M,"opacity",this.calculateOpacity()))),K.type==="svg"){const ie=this.getStyle("width",!1,!0),D=this.getStyle("height",!1,!0);ie.hasValue()&&K.attributes.set("width",new Property(M,"width",ie.getString())),D.hasValue()&&K.attributes.set("height",new Property(M,"height",D.getString()))}const Y=K.parent;K.parent=this,K.render(B),K.parent=Y}}getBoundingBox(B){const{element:M}=this;return M?M.getBoundingBox(B):null}elementTransform(){const{document:B,element:M}=this;return M?Transform.fromElement(B,M):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...B){super(...B),this.type="use"}}function imGet(g,B,M,P,K,Y){return g[M*P*4+B*4+Y]}function imSet(g,B,M,P,K,Y,ie){g[M*P*4+B*4+Y]=ie}function m(g,B,M){return g[B]*M}function c(g,B,M,P){return B+Math.cos(g)*M+Math.sin(g)*P}class FeColorMatrixElement extends Element{apply(B,M,P,K,Y){const{includeOpacity:ie,matrix:D}=this,ne=B.getImageData(0,0,K,Y);for(let oe=0;oe<Y;oe++)for(let ue=0;ue<K;ue++){const pe=imGet(ne.data,ue,oe,K,Y,0),we=imGet(ne.data,ue,oe,K,Y,1),ke=imGet(ne.data,ue,oe,K,Y,2),Qe=imGet(ne.data,ue,oe,K,Y,3);let Ue=m(D,0,pe)+m(D,1,we)+m(D,2,ke)+m(D,3,Qe)+m(D,4,1),We=m(D,5,pe)+m(D,6,we)+m(D,7,ke)+m(D,8,Qe)+m(D,9,1),Ne=m(D,10,pe)+m(D,11,we)+m(D,12,ke)+m(D,13,Qe)+m(D,14,1),ut=m(D,15,pe)+m(D,16,we)+m(D,17,ke)+m(D,18,Qe)+m(D,19,1);ie&&(Ue=0,We=0,Ne=0,ut*=Qe/255),imSet(ne.data,ue,oe,K,Y,0,Ue),imSet(ne.data,ue,oe,K,Y,1,We),imSet(ne.data,ue,oe,K,Y,2,Ne),imSet(ne.data,ue,oe,K,Y,3,ut)}B.clearRect(0,0,K,Y),B.putImageData(ne,0,0)}constructor(B,M,P){super(B,M,P),this.type="feColorMatrix";let K=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const Y=K[0];K=[.213+.787*Y,.715-.715*Y,.072-.072*Y,0,0,.213-.213*Y,.715+.285*Y,.072-.072*Y,0,0,.213-.213*Y,.715-.715*Y,.072+.928*Y,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const Y=K[0]*Math.PI/180;K=[c(Y,.213,.787,-.213),c(Y,.715,-.715,-.715),c(Y,.072,-.072,.928),0,0,c(Y,.213,-.213,.143),c(Y,.715,.285,.14),c(Y,.072,-.072,-.283),0,0,c(Y,.213,-.213,-.787),c(Y,.715,-.715,.715),c(Y,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=K,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class MaskElement extends Element{apply(B,M){const{document:P}=this;let K=this.getAttribute("x").getPixels("x"),Y=this.getAttribute("y").getPixels("y"),ie=this.getStyle("width").getPixels("x"),D=this.getStyle("height").getPixels("y");if(!ie&&!D){const ke=new BoundingBox;this.children.forEach(Qe=>{ke.addBoundingBox(Qe.getBoundingBox(B))}),K=Math.floor(ke.x1),Y=Math.floor(ke.y1),ie=Math.floor(ke.width),D=Math.floor(ke.height)}const ne=this.removeStyles(M,MaskElement.ignoreStyles),oe=P.createCanvas(K+ie,Y+D),ue=oe.getContext("2d");P.screen.setDefaults(ue),this.renderChildren(ue),new FeColorMatrixElement(P,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(ue,0,0,K+ie,Y+D);const pe=P.createCanvas(K+ie,Y+D),we=pe.getContext("2d");P.screen.setDefaults(we),M.render(we),we.globalCompositeOperation="destination-in",we.fillStyle=ue.createPattern(oe,"no-repeat"),we.fillRect(0,0,K+ie,Y+D),B.fillStyle=we.createPattern(pe,"no-repeat"),B.fillRect(0,0,K+ie,Y+D),this.restoreStyles(M,ne)}render(B){}constructor(...B){super(...B),this.type="mask"}}MaskElement.ignoreStyles=["mask","transform","clip-path"];const noop=()=>{};class ClipPathElement extends Element{apply(B){const{document:M}=this,P=Reflect.getPrototypeOf(B),{beginPath:K,closePath:Y}=B;P&&(P.beginPath=noop,P.closePath=noop),Reflect.apply(K,B,[]),this.children.forEach(ie=>{if(!("path"in ie))return;let D="elementTransform"in ie?ie.elementTransform():null;D||(D=Transform.fromElement(M,ie)),D&&D.apply(B),ie.path(B),P&&(P.closePath=Y),D&&D.unapply(B)}),Reflect.apply(Y,B,[]),B.clip(),P&&(P.beginPath=K,P.closePath=Y)}render(B){}constructor(...B){super(...B),this.type="clipPath"}}class FilterElement extends Element{apply(B,M){const{document:P,children:K}=this,Y="getBoundingBox"in M?M.getBoundingBox(B):null;if(!Y)return;let ie=0,D=0;K.forEach(Ne=>{const ut=Ne.extraFilterDistance||0;ie=Math.max(ie,ut),D=Math.max(D,ut)});const ne=Math.floor(Y.width),oe=Math.floor(Y.height),ue=ne+2*ie,pe=oe+2*D;if(ue<1||pe<1)return;const we=Math.floor(Y.x),ke=Math.floor(Y.y),Qe=this.removeStyles(M,FilterElement.ignoreStyles),Ue=P.createCanvas(ue,pe),We=Ue.getContext("2d");P.screen.setDefaults(We),We.translate(-we+ie,-ke+D),M.render(We),K.forEach(Ne=>{typeof Ne.apply=="function"&&Ne.apply(We,0,0,ue,pe)}),B.drawImage(Ue,0,0,ue,pe,we-ie,ke-D,ue,pe),this.restoreStyles(M,Qe)}render(B){}constructor(...B){super(...B),this.type="filter"}}FilterElement.ignoreStyles=["filter","transform","clip-path"];class FeDropShadowElement extends Element{apply(B,M,P,K,Y){}constructor(B,M,P){super(B,M,P),this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class FeMorphologyElement extends Element{apply(B,M,P,K,Y){}constructor(...B){super(...B),this.type="feMorphology"}}class FeCompositeElement extends Element{apply(B,M,P,K,Y){}constructor(...B){super(...B),this.type="feComposite"}}class FeGaussianBlurElement extends Element{apply(B,M,P,K,Y){const{document:ie,blurRadius:D}=this,ne=ie.window?ie.window.document.body:null,oe=B.canvas;oe.id=ie.getUniqueId(),ne&&(oe.style.display="none",ne.appendChild(oe)),processCanvasRGBA(oe,M,P,K,Y,D),ne&&ne.removeChild(oe)}constructor(B,M,P){super(B,M,P),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class TitleElement extends Element{constructor(...B){super(...B),this.type="title"}}class DescElement extends Element{constructor(...B){super(...B),this.type="desc"}}const elements={svg:SVGElement,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};function createCanvas(g,B){const M=document.createElement("canvas");return M.width=g,M.height=B,M}async function createImage(g){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const M=document.createElement("img");return B&&(M.crossOrigin="Anonymous"),new Promise((P,K)=>{M.onload=()=>{P(M)},M.onerror=(Y,ie,D,ne,oe)=>{K(oe)},M.src=g})}const DEFAULT_EM_SIZE=12;class Document{bindCreateImage(B,M){return typeof M=="boolean"?(P,K)=>B(P,typeof K=="boolean"?K:M):B}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:B}=this;return B[B.length-1]||DEFAULT_EM_SIZE}set emSize(B){const{emSizeStack:M}=this;M.push(B)}popEmSize(){const{emSizeStack:B}=this;B.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(B=>B.loaded)}isFontsLoaded(){return this.fonts.every(B=>B.loaded)}createDocumentElement(B){const M=this.createElement(B.documentElement);return M.root=!0,M.addStylesFromStyleDefinition(),this.documentElement=M,M}createElement(B){const M=B.nodeName.replace(/^[^:]+:/,""),P=Document.elementTypes[M];return P?new P(this,B):new UnknownElement(this,B)}createTextNode(B){return new TextNode(this,B)}setViewBox(B){this.screen.setViewBox({document:this,...B})}constructor(B,{rootEmSize:M=DEFAULT_EM_SIZE,emSize:P=DEFAULT_EM_SIZE,createCanvas:K=Document.createCanvas,createImage:Y=Document.createImage,anonymousCrossOrigin:ie}={}){this.canvg=B,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=B.screen,this.rootEmSize=M,this.emSize=P,this.createCanvas=K,this.createImage=this.bindCreateImage(Y,ie),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}Document.createCanvas=createCanvas;Document.createImage=createImage;Document.elementTypes=elements;class Canvg{static async from(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Y=await new Parser(P).parse(M);return new Canvg(B,Y,P)}static fromString(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Y=new Parser(P).parseFromString(M);return new Canvg(B,Y,P)}fork(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.from(B,M,{...this.options,...P})}forkString(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.fromString(B,M,{...this.options,...P})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...B}),await this.ready(),this.stop()}start(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:M,screen:P,options:K}=this;P.start(M,{enableRedraw:!0,...K,...B})}stop(){this.screen.stop()}resize(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(B,M,P)}constructor(B,M,P={}){this.parser=new Parser(P),this.screen=new Screen(B,P),this.options=P;const K=new Document(this,P),Y=K.createDocumentElement(M);this.document=K,this.documentElement=Y}}var colorScale,hasRequiredColorScale;function requireColorScale(){return hasRequiredColorScale||(hasRequiredColorScale=1,colorScale={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}),colorScale}var lerp_1,hasRequiredLerp;function requireLerp(){if(hasRequiredLerp)return lerp_1;hasRequiredLerp=1;function g(B,M,P){return B*(1-P)+M*P}return lerp_1=g,lerp_1}var colormap$1,hasRequiredColormap;function requireColormap(){if(hasRequiredColormap)return colormap$1;hasRequiredColormap=1;var g=requireColorScale(),B=requireLerp();colormap$1=M;function M(ie){var D,ne,oe,ue,pe,we,ke,Qe,ut,Ue,We;if(ie||(ie={}),Qe=(ie.nshades||72)-1,ke=ie.format||"hex",we=ie.colormap,we||(we="jet"),typeof we=="string"){if(we=we.toLowerCase(),!g[we])throw Error(we+" not a supported colorscale");pe=g[we]}else if(Array.isArray(we))pe=we.slice();else throw Error("unsupported colormap option",we);if(pe.length>Qe+1)throw new Error(we+" map requires nshades to be at least size "+pe.length);Array.isArray(ie.alpha)?ie.alpha.length!==2?Ue=[1,1]:Ue=ie.alpha.slice():typeof ie.alpha=="number"?Ue=[ie.alpha,ie.alpha]:Ue=[1,1],D=pe.map(function(rt){return Math.round(rt.index*Qe)}),Ue[0]=Math.min(Math.max(Ue[0],0),1),Ue[1]=Math.min(Math.max(Ue[1],0),1);var Ne=pe.map(function(rt,ft){var Ze=pe[ft].index,wt=pe[ft].rgb.slice();return wt.length===4&&wt[3]>=0&&wt[3]<=1||(wt[3]=Ue[0]+(Ue[1]-Ue[0])*Ze),wt}),ut=[];for(We=0;We<D.length-1;++We){ue=D[We+1]-D[We],ne=Ne[We],oe=Ne[We+1];for(var Ye=0;Ye<ue;Ye++){var et=Ye/ue;ut.push([Math.round(B(ne[0],oe[0],et)),Math.round(B(ne[1],oe[1],et)),Math.round(B(ne[2],oe[2],et)),B(ne[3],oe[3],et)])}}return ut.push(pe[pe.length-1].rgb.concat(Ue[1])),ke==="hex"?ut=ut.map(K):ke==="rgbaString"?ut=ut.map(Y):ke==="float"&&(ut=ut.map(P)),ut}function P(ie){return[ie[0]/255,ie[1]/255,ie[2]/255,ie[3]]}function K(ie){for(var D,ne="#",oe=0;oe<3;++oe)D=ie[oe],D=D.toString(16),ne+=("00"+D).substr(D.length);return ne}function Y(ie){return"rgba("+ie.join(",")+")"}return colormap$1}var colormapExports=requireColormap();const colormap=getDefaultExportFromCjs(colormapExports);var strxml={},hasRequiredStrxml;function requireStrxml(){if(hasRequiredStrxml)return strxml;hasRequiredStrxml=1,strxml.attr=g,strxml.tagClose=B,strxml.tag=M,strxml.encode=P;function g(K){return K&&K.length?" "+K.map(function(Y){return Y[0]+'="'+Y[1]+'"'}).join(" "):""}function B(K,Y){return"<"+K+g(Y)+"/>"}function M(K,Y,ie){return"<"+K+g(ie)+">"+Y+"</"+K+">"}function P(K){return(K===null?"":K.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}return strxml}var tokml$1,hasRequiredTokml;function requireTokml(){if(hasRequiredTokml)return tokml$1;hasRequiredTokml=1;var g=requireStrxml(),B=g.tag,M=g.encode;tokml$1=function(wt,Ft){return Ft=Ft||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+B("kml",B("Document",Y(Ft)+ie(Ft)+K(wt,Ft)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function P(Ze,wt){return function(Ft){if(!Ft.properties||!ue.valid(Ft.geometry))return"";var _t=ue.any(Ft.geometry);if(!_t)return"";var Pt="",Mt="";if(Ze.simplestyle){var Vt=et(Ft.properties);Vt&&(ue.isPoint(Ft.geometry)&&Qe(Ft.properties)?(wt.indexOf(Vt)===-1&&(Pt=Ue(Ft.properties,Vt),wt.push(Vt)),Mt=B("styleUrl","#"+Vt)):(ue.isPolygon(Ft.geometry)||ue.isLine(Ft.geometry))&&ut(Ft.properties)&&(wt.indexOf(Vt)===-1&&(Pt=Ye(Ft.properties,Vt),wt.push(Vt)),Mt=B("styleUrl","#"+Vt)))}return Pt+B("Placemark",D(Ft.properties,Ze)+ne(Ft.properties,Ze)+we(Ft.properties)+oe(Ft.properties,Ze)+_t+Mt)}}function K(Ze,wt){if(!Ze.type)return"";var Ft=[];switch(Ze.type){case"FeatureCollection":return Ze.features?Ze.features.map(P(wt,Ft)).join(""):"";case"Feature":return P(wt,Ft)(Ze);default:return P(wt,Ft)({type:"Feature",geometry:Ze,properties:{}})}}function Y(Ze){return Ze.documentName!==void 0?B("name",Ze.documentName):""}function ie(Ze){return Ze.documentDescription!==void 0?B("description",Ze.documentDescription):""}function D(Ze,wt){return Ze[wt.name]?B("name",M(Ze[wt.name])):""}function ne(Ze,wt){return Ze[wt.description]?B("description",M(Ze[wt.description])):""}function oe(Ze,wt){return Ze[wt.timestamp]?B("TimeStamp",B("when",M(Ze[wt.timestamp]))):""}var ue={Point:function(Ze){return B("Point",B("coordinates",Ze.coordinates.join(",")))},LineString:function(Ze){return B("LineString",B("coordinates",pe(Ze.coordinates)))},Polygon:function(Ze){if(!Ze.coordinates.length)return"";var wt=Ze.coordinates[0],Ft=Ze.coordinates.slice(1),_t=B("outerBoundaryIs",B("LinearRing",B("coordinates",pe(wt)))),Pt=Ft.map(function(Mt){return B("innerBoundaryIs",B("LinearRing",B("coordinates",pe(Mt))))}).join("");return B("Polygon",_t+Pt)},MultiPoint:function(Ze){return Ze.coordinates.length?B("MultiGeometry",Ze.coordinates.map(function(wt){return ue.Point({coordinates:wt})}).join("")):""},MultiPolygon:function(Ze){return Ze.coordinates.length?B("MultiGeometry",Ze.coordinates.map(function(wt){return ue.Polygon({coordinates:wt})}).join("")):""},MultiLineString:function(Ze){return Ze.coordinates.length?B("MultiGeometry",Ze.coordinates.map(function(wt){return ue.LineString({coordinates:wt})}).join("")):""},GeometryCollection:function(Ze){return B("MultiGeometry",Ze.geometries.map(ue.any).join(""))},valid:function(Ze){return Ze&&Ze.type&&(Ze.coordinates||Ze.type==="GeometryCollection"&&Ze.geometries&&Ze.geometries.every(ue.valid))},any:function(Ze){return ue[Ze.type]?ue[Ze.type](Ze):""},isPoint:function(Ze){return Ze.type==="Point"||Ze.type==="MultiPoint"},isPolygon:function(Ze){return Ze.type==="Polygon"||Ze.type==="MultiPolygon"},isLine:function(Ze){return Ze.type==="LineString"||Ze.type==="MultiLineString"}};function pe(Ze){return Ze.map(function(wt){return wt.join(",")}).join(" ")}function we(Ze){return B("ExtendedData",ft(Ze).map(ke).join(""))}function ke(Ze){return B("Data",B("value",M(Ze[1])),[["name",M(Ze[0])]])}function Qe(Ze){return!!(Ze["marker-size"]||Ze["marker-symbol"]||Ze["marker-color"])}function Ue(Ze,wt){return B("Style",B("IconStyle",B("Icon",B("href",We(Ze))))+Ne(),[["id",wt]])}function We(Ze){var wt=Ze["marker-size"]||"medium",Ft=Ze["marker-symbol"]?"-"+Ze["marker-symbol"]:"",_t=(Ze["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+wt.charAt(0)+Ft+"+"+_t+".png"}function Ne(Ze){return B("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function ut(Ze){for(var wt in Ze)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[wt])return!0}function Ye(Ze,wt){var Ft=B("LineStyle",[B("color",rt(Ze.stroke,Ze["stroke-opacity"])||"ff555555")+B("width",Ze["stroke-width"]===void 0?2:Ze["stroke-width"])]),_t="";return(Ze.fill||Ze["fill-opacity"])&&(_t=B("PolyStyle",[B("color",rt(Ze.fill,Ze["fill-opacity"])||"88555555")])),B("Style",Ft+_t,[["id",wt]])}function et(Ze){var wt="";return Ze["marker-symbol"]&&(wt=wt+"ms"+Ze["marker-symbol"]),Ze["marker-color"]&&(wt=wt+"mc"+Ze["marker-color"].replace("#","")),Ze["marker-size"]&&(wt=wt+"ms"+Ze["marker-size"]),Ze.stroke&&(wt=wt+"s"+Ze.stroke.replace("#","")),Ze["stroke-width"]&&(wt=wt+"sw"+Ze["stroke-width"].toString().replace(".","")),Ze["stroke-opacity"]&&(wt=wt+"mo"+Ze["stroke-opacity"].toString().replace(".","")),Ze.fill&&(wt=wt+"f"+Ze.fill.replace("#","")),Ze["fill-opacity"]&&(wt=wt+"fo"+Ze["fill-opacity"].toString().replace(".","")),wt}function rt(Ze,wt){if(typeof Ze!="string")return"";if(Ze=Ze.replace("#","").toLowerCase(),Ze.length===3)Ze=Ze[0]+Ze[0]+Ze[1]+Ze[1]+Ze[2]+Ze[2];else if(Ze.length!==6)return"";var Ft=Ze[0]+Ze[1],_t=Ze[2]+Ze[3],Pt=Ze[4]+Ze[5],Mt="ff";return typeof wt=="number"&&wt>=0&&wt<=1&&(Mt=(wt*255).toString(16),Mt.indexOf(".")>-1&&(Mt=Mt.substr(0,Mt.indexOf("."))),Mt.length<2&&(Mt="0"+Mt)),Mt+Pt+_t+Ft}function ft(Ze){var wt=[];for(var Ft in Ze)wt.push([Ft,Ze[Ft]]);return wt}return tokml$1}var tokmlExports=requireTokml();const tokml=getDefaultExportFromCjs(tokmlExports);var jxon$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var jxon=jxon$1.exports,hasRequiredJxon;function requireJxon(){return hasRequiredJxon||(hasRequiredJxon=1,function(g,B){(function(M,P){typeof window=="object"&&window.DOMImplementation&&window.XMLSerializer&&window.DOMParser?g.exports=P(window):g.exports=P(require$$0,!0)})(jxon,function(M,P){var K={valueKey:"_",attrKey:"$",attrPrefix:"$",lowerCaseTags:!1,trueIsEmpty:!1,autoDate:!1,ignorePrefixedNodes:!1,parseValues:!1},Y=[],ie=/^\s*$/,D=/^(?:true|false)$/i,ne;return new function(){this.config=function(Qe){for(var Ue in Qe)K[Ue]=Qe[Ue];K.parserErrorHandler&&(ne=new M.DOMParser({errorHandler:K.parserErrorHandler,locator:{}}))};function oe(Qe){return K.parseValues?ie.test(Qe)?null:D.test(Qe)?Qe.toLowerCase()==="true":isFinite(Qe)?parseFloat(Qe):K.autoDate&&isFinite(Date.parse(Qe))?new Date(Qe):Qe:Qe}function ue(){}ue.prototype.toString=function(){return"null"},ue.prototype.valueOf=function(){return null};function pe(Qe){return Qe===null?new ue:Qe instanceof Object?Qe:new Qe.constructor(Qe)}function we(Qe,Ue,We,Ne){var ut=4,Ye=3,et=1,rt=Y.length,ft=Qe.hasChildNodes(),Ze=Qe.nodeType===Qe.ELEMENT_NODE&&Qe.hasAttributes(),wt=!!(Ue&2),Ft=0,_t="",Pt=wt?{}:K.trueIsEmpty?!0:"",Mt,Vt;if(ft)for(var Ai,Ri=0;Ri<Qe.childNodes.length;Ri++)Ai=Qe.childNodes.item(Ri),Ai.nodeType===ut?_t+=Ai.nodeValue:Ai.nodeType===Ye?_t+=Ai.nodeValue.trim():Ai.nodeType===et&&!(K.ignorePrefixedNodes&&Ai.prefix)&&Y.push(Ai);var Ei=Y.length,Li=oe(_t);!wt&&(ft||Ze)&&(Pt=Ue===0?pe(Li):{});for(var Yi=rt;Yi<Ei;Yi++)Mt=Y[Yi].nodeName,K.lowerCaseTags&&(Mt=Mt.toLowerCase()),Vt=we(Y[Yi],Ue,We,Ne),Pt.hasOwnProperty(Mt)?(Pt[Mt].constructor!==Array&&(Pt[Mt]=[Pt[Mt]]),Pt[Mt].push(Vt)):(Pt[Mt]=Vt,Ft++);if(Ze){for(var vi=Qe.attributes.length,d=Ne?"":K.attrPrefix,w=Ne?{}:Pt,S,k,R=0;R<vi;Ft++,R++)S=Qe.attributes.item(R),k=S.name,K.lowerCaseTags&&(k=k.toLowerCase()),w[d+k]=oe(S.value.trim());Ne&&(We&&Object.freeze(w),Pt[K.attrKey]=w,Ft-=vi-1)}return Ue===3||(Ue===2||Ue===1&&Ft>0)&&_t?Pt[K.valueKey]=Li:!wt&&Ft===0&&_t&&(Pt=Li),We&&(wt||Ft>0)&&Object.freeze(Pt),Y.length=rt,Pt}function ke(Qe,Ue,We){var Ne,ut,Ye;if(We.constructor===String||We.constructor===Number||We.constructor===Boolean){if(Ue.appendChild(Qe.createTextNode(We.toString())),We===We.valueOf())return}else We.constructor===Date&&Ue.appendChild(Qe.createTextNode(We.toISOString()));for(var et in We)if(Ne=We[et],Ne!==void 0&&(Ne===null&&(Ne={}),!(isFinite(et)||Ne instanceof Function)))if(et===K.valueKey)Ne!==null&&Ne!==!0&&Ue.appendChild(Qe.createTextNode(Ne.constructor===Date?Ne.toISOString():String(Ne)));else if(et===K.attrKey)for(var rt in Ne)Ue.setAttribute(rt,Ne[rt]);else if(et===K.attrPrefix+"xmlns")P&&Ue.setAttribute(et.slice(1),Ne);else if(et.charAt(0)===K.attrPrefix)Ue.setAttribute(et.slice(1),Ne);else if(Ne.constructor===Array)for(var ft in Ne)Ne.hasOwnProperty(ft)&&(Ye=Ne[ft]&&Ne[ft][K.attrPrefix+"xmlns"]||Ue.namespaceURI,Ye?ut=Qe.createElementNS(Ye,et):ut=Qe.createElement(et),ke(Qe,ut,Ne[ft]||{}),Ue.appendChild(ut));else Ye=(Ne||{})[K.attrPrefix+"xmlns"]||Ue.namespaceURI,Ye?ut=Qe.createElementNS(Ye,et):ut=Qe.createElement(et),Ne instanceof Object?ke(Qe,ut,Ne):Ne!==null&&(Ne!==!0||!K.trueIsEmpty)&&ut.appendChild(Qe.createTextNode(Ne.toString())),Ue.appendChild(ut)}this.xmlToJs=this.build=function(Qe,Ue,We,Ne){var ut=arguments.length>1&&typeof Ue=="number"?Ue&3:1;return we(Qe,ut,We||!1,arguments.length>3?Ne:ut===3)},this.jsToXml=this.unbuild=function(Qe,Ue,We,Ne){var ut=M.document&&M.document.implementation||new M.DOMImplementation,Ye=ut.createDocument(Ue||null,We||"",Ne||null);return ke(Ye,Ye.documentElement||Ye,Qe),Ye},this.stringToXml=function(Qe){return ne||(ne=new M.DOMParser),ne.parseFromString(Qe,"application/xml")},this.xmlToString=function(Qe){return typeof Qe.xml<"u"?Qe.xml:new M.XMLSerializer().serializeToString(Qe)},this.stringToJs=function(Qe){var Ue=this.stringToXml(Qe);return this.xmlToJs(Ue)},this.jsToString=this.stringify=function(Qe,Ue,We,Ne){return this.xmlToString(this.jsToXml(Qe,Ue,We,Ne))},this.each=function(Qe,Ue,We){Qe instanceof Array?Qe.forEach(Ue,We):[Qe].forEach(Ue,We)}}})}(jxon$1)),jxon$1.exports}var togpx_1,hasRequiredTogpx;function requireTogpx(){if(hasRequiredTogpx)return togpx_1;hasRequiredTogpx=1;const g=requireJxon();g.config({attrPrefix:"@"});function B(M,P){if(P=function(ue,pe){for(const we in ue)pe.hasOwnProperty(we)&&(ue[we]=pe[we]);return ue}({creator:"togpx",metadata:void 0,featureTitle:K,featureDescription:Y,featureLink:void 0,featureCoordTimes:ie},P||{}),typeof P.featureCoordTimes=="string"){const ue=P.featureCoordTimes;P.featureCoordTimes=function(pe){return pe.properties[ue]}}function K(ue){if(!ue)return"";if(typeof ue.tags=="object"){const pe=K(ue.tags);if(pe!=="")return pe}return ue.name?ue.name:ue.ref?ue.ref:ue.id?ue.id:""}function Y(ue){if(!ue)return"";if(typeof ue.tags=="object")return Y(ue.tags);let pe="";for(const we in ue)typeof ue[we]!="object"&&(pe+=we+"="+ue[we]+`
`);return pe.substring(0,pe.length-1)}function ie(ue){return ue.properties&&(ue.properties.times||ue.properties.coordTimes)||null}function D(ue,pe){P.featureLink&&(ue.link={"@href":P.featureLink(pe.properties)})}const ne={gpx:{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1",metadata:null,wpt:[],trk:[]}};P.creator&&(ne.gpx["@creator"]=P.creator),P.metadata?ne.gpx.metadata=P.metadata:delete P.metadata;let oe;return M.type==="FeatureCollection"?oe=M.features:M.type==="Feature"?oe=[M]:oe=[{type:"Feature",properties:{},geometry:M}],oe.forEach(function ue(pe){let we,ke,Qe;switch(pe.geometry.type){case"Point":case"MultiPoint":we=pe.geometry.coordinates,pe.geometry.type=="Point"&&(we=[we]),we.forEach(function(Ue){let We={"@lat":Ue[1],"@lon":Ue[0],name:P.featureTitle(pe.properties),desc:P.featureDescription(pe.properties)};Ue[2]!==void 0&&(We.ele=Ue[2]),D(We,pe),ne.gpx.wpt.push(We)});break;case"LineString":case"MultiLineString":we=pe.geometry.coordinates,ke=P.featureCoordTimes(pe),pe.geometry.type=="LineString"&&(we=[we]),Qe={name:P.featureTitle(pe.properties),desc:P.featureDescription(pe.properties)},D(Qe,pe),Qe.trkseg=[],we.forEach(function(Ue){const We={trkpt:[]};Ue.forEach(function(Ne,ut){const Ye={"@lat":Ne[1],"@lon":Ne[0]};Ne[2]!==void 0&&(Ye.ele=Ne[2]),ke&&ke[ut]&&(Ye.time=ke[ut]),We.trkpt.push(Ye)}),Qe.trkseg.push(We)}),ne.gpx.trk.push(Qe);break;case"Polygon":case"MultiPolygon":Qe={name:P.featureTitle(pe.properties),desc:P.featureDescription(pe.properties)},D(Qe,pe),Qe.trkseg=[],we=pe.geometry.coordinates,ke=P.featureCoordTimes(pe),pe.geometry.type=="Polygon"&&(we=[we]),we.forEach(function(Ue){Ue.forEach(function(We){const Ne={trkpt:[]};let ut=0;We.forEach(function(Ye){const et={"@lat":Ye[1],"@lon":Ye[0]};Ye[2]!==void 0&&(et.ele=Ye[2]),ke&&ke[ut]&&(et.time=ke[ut]),ut++,Ne.trkpt.push(et)}),Qe.trkseg.push(Ne)})}),ne.gpx.trk.push(Qe);break;case"GeometryCollection":pe.geometry.geometries.forEach(function(Ue){const We={properties:pe.properties,geometry:Ue};ue(We)});break;default:console.log("warning: unsupported geometry type: "+pe.geometry.type)}}),g.stringify(ne)}return togpx_1=B,togpx_1}var togpxExports=requireTogpx();const togpx=getDefaultExportFromCjs(togpxExports);var index={YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]}};function autorepair(g,B){const M={},P={};return function(){let Y,ie;if(B=="xml"){Y=g.match(/<!--[\s\S]*?-->/g)||[];for(const D of Y)ie=`<!--${Base64.encode(Math.random().toString())}-->`,g=g.replace(D,ie),P[ie]=D}else{Y=g.match(/\/\*[\s\S]*?\*\//g)||[];for(const D of Y)ie=`/*${Base64.encode(Math.random().toString())}*/`,g=g.replace(D,ie),P[ie]=D;Y=g.match(/\/\/[^\n]*/g)||[];for(const D of Y)ie=`/*${Base64.encode(Math.random().toString())}*/`,g=g.replace(D,ie),P[ie]=D}}(),M.getQuery=()=>{for(const K in P)g=g.replace(K,P[K]);return g},M.recurse=()=>{if(B=="xml"){const K=g.match(/(\n?[^\S\n]*<print[\s\S]*?(\/>|<\/print>))/g)||[];for(let Y=0;Y<K.length;Y++){const ie=K[Y].match(/^\n?(\s*)/)[1],D=$("print",$.parseXML(K[Y])).attr("from");let ne,oe,ue;D?(ne=` into="${D}"`,oe=` set="${D}"`,ue=` from="${D}"`):(ne="",oe="",ue=""),g=g.replace(K[Y],`
${ie}<!-- added by auto repair -->
${ie}<union${ne}>
${ie}  <item${oe}/>
${ie}  <recurse${ue} type="down"/>
${ie}</union>
${ie}<!-- end of auto repair --><autorepair>${Y}</autorepair>`)}for(let Y=0;Y<K.length;Y++)g=g.replace(`<autorepair>${Y}</autorepair>`,K[Y])}else{const K=g.match(/(\n?[^\S\n]*(\.[^.;]+)?out[^:;"\]]*;)/g)||[];for(let Y=0;Y<K.length;Y++){const ie=K[Y].match(/^\n?(\s*)/)[0],D=K[Y].match(/\.([^;.]+?)\s+out/);let ne;D?ne=`(.${D[1]};.${D[1]} >;)->.${D[1]};`:ne="(._;>;);",g=g.replace(K[Y],`${ie}/*added by auto repair*/${ie}${ne}${ie}/*end of auto repair*/<autorepair>${Y}</autorepair>`)}for(let Y=0;Y<K.length;Y++)g=g.replace(`<autorepair>${Y}</autorepair>`,K[Y])}return!0},M.editors=()=>{if(B=="xml"){const K=g.match(/<osm-script([^>]*)>/);if(K){const ie=$("osm-script",$.parseXML(`${K[0]}</osm-script>`)).attr("output");if(ie&&ie!="xml"){const D=K[0].replace(ie,"xml");g=g.replace(K[0],`${D}<!-- fixed by auto repair -->`)}}const Y=g.match(/(<print[\s\S]*?(\/>|<\/print>))/g)||[];for(const ie of Y){const D=$("print",$.parseXML(ie)),ne=D.attr("mode"),oe=D.attr("geometry");let ue="",pe,we=!1;if(ne!=="meta"&&(D.attr("mode","meta"),we=!0),oe&&oe!=="skeleton"){D.attr("geometry",null);const ke=D.attr("from");ke?ue=`<union into="${ke}"><item set="${ke}"/><recurse from="${ke}" type="down"/></union>`:ue='<union><item/><recurse type="down"/></union>',we=!0}we&&(pe=ue+new XMLSerializer().serializeToString(D[0]),pe+="<!-- fixed by auto repair -->",g=g.replace(ie,pe))}}else{const K=g.match(/\[\s*out\s*:\s*([^\]\s]+)\s*\]\s*;?/);K&&K[1]!="xml"&&(g=g.replace(/(\[\s*out\s*:\s*)([^\]\s]+)(\s*\]\s*;?)/,"$1xml$3/*fixed by auto repair*/"));const Y=g.match(/(\.([^;.]+?)\s+)?(\bout\b[^:;"\]]*;)/g)||[];for(const ie of Y){let[D,,ne,oe]=ie.match(/(\.([^;.]+?)\s+)?(\bout[^:;"\]]*;)/),ue=D,pe;(oe.match(/\s(body|skel|ids|tags|count)/)||!oe.match(/\s(meta)/))&&(pe=oe.replace(/\s(body|skel|ids|tags|count|meta)/g,"").replace(/^out/,"out meta"),ue=ue.replace(oe,pe),oe=pe),oe.match(/\s(center|bb|geom)/)&&(pe=oe.replace(/\s(center|bb|geom)/g,""),ue=ue.replace(oe,pe),oe=pe,ne?ue=`(.${ne};.${ne} >;)->.${ne}; ${ue}`:ue=`(._;>;); ${ue}`),ue!=D&&(g=g.replace(D,`${ue}/*fixed by auto repair*/`))}}return!0},M}autorepair.detect={};autorepair.detect.editors=(g,B)=>{g=g.replace(/{{.*?}}/g,"");const M={};if(B=="xml")try{const P=$.parseXML(`<x>${g}</x>`),K=$("osm-script",P).attr("output");K!==void 0&&K!=="xml"&&(M.output=!0),$("print",P).each((Y,ie)=>{$(ie).attr("mode")!=="meta"&&(M.meta=!0)}),$("print",P).each((Y,ie)=>{$(ie).attr("geometry").match(/(center|bounds|full)/)&&(M.geometry=!0)})}catch{}else{g=g.replace(/\/\*[\s\S]*?\*\//g,""),g=g.replace(/\/\/[^\n]*/g,"");const P=g.match(/\[\s*out\s*:\s*([^\]\s]+)\s*\]/);P&&P[1]!="xml"&&(M.output=!0);const K=g.match(/out([^:;]*);/g);$(K).each((Y,ie)=>{(ie.match(/\s(body|skel|ids|tags)/)||!ie.match(/meta/))&&(M.meta=!0)}),$(K).each((Y,ie)=>{ie.match(/\s(center|bb|geom)/)&&(M.geometry=!0)})}return $.isEmptyObject(M)};var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var g=K(),B=Y(),M=ie(),P=typeof window<"u"?window:commonjsGlobal;util={assign:g,create:B,trim:M,bind:D,slice:ne,each:oe,map:ue,pluck:pe,isList:we,isFunction:ke,isObject:Qe,Global:P};function K(){return Object.assign?Object.assign:function(We,Ne,ut,Ye){for(var et=1;et<arguments.length;et++)oe(Object(arguments[et]),function(rt,ft){We[ft]=rt});return We}}function Y(){if(Object.create)return function(We,Ne,ut,Ye){var et=ne(arguments,1);return g.apply(this,[Object.create(We)].concat(et))};{let Ue=function(){};return function(Ne,ut,Ye,et){var rt=ne(arguments,1);return Ue.prototype=Ne,g.apply(this,[new Ue].concat(rt))}}}function ie(){return String.prototype.trim?function(We){return String.prototype.trim.call(We)}:function(We){return We.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function D(Ue,We){return function(){return We.apply(Ue,Array.prototype.slice.call(arguments,0))}}function ne(Ue,We){return Array.prototype.slice.call(Ue,We||0)}function oe(Ue,We){pe(Ue,function(Ne,ut){return We(Ne,ut),!1})}function ue(Ue,We){var Ne=we(Ue)?[]:{};return pe(Ue,function(ut,Ye){return Ne[Ye]=We(ut,Ye),!1}),Ne}function pe(Ue,We){if(we(Ue)){for(var Ne=0;Ne<Ue.length;Ne++)if(We(Ue[Ne],Ne))return Ue[Ne]}else for(var ut in Ue)if(Ue.hasOwnProperty(ut)&&We(Ue[ut],ut))return Ue[ut]}function we(Ue){return Ue!=null&&typeof Ue!="function"&&typeof Ue.length=="number"}function ke(Ue){return Ue&&{}.toString.call(Ue)==="[object Function]"}function Qe(Ue){return Ue&&{}.toString.call(Ue)==="[object Object]"}return util}var storeEngine,hasRequiredStoreEngine;function requireStoreEngine(){if(hasRequiredStoreEngine)return storeEngine;hasRequiredStoreEngine=1;var g=requireUtil(),B=g.slice,M=g.pluck,P=g.each,K=g.bind,Y=g.create,ie=g.isList,D=g.isFunction,ne=g.isObject;storeEngine={createStore:pe};var oe={version:"2.0.12",enabled:!1,get:function(we,ke){var Qe=this.storage.read(this._namespacePrefix+we);return this._deserialize(Qe,ke)},set:function(we,ke){return ke===void 0?this.remove(we):(this.storage.write(this._namespacePrefix+we,this._serialize(ke)),ke)},remove:function(we){this.storage.remove(this._namespacePrefix+we)},each:function(we){var ke=this;this.storage.each(function(Qe,Ue){we.call(ke,ke._deserialize(Qe),(Ue||"").replace(ke._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(we){return this._namespacePrefix=="__storejs_"+we+"_"},createStore:function(){return pe.apply(this,arguments)},addPlugin:function(we){this._addPlugin(we)},namespace:function(we){return pe(this.storage,this.plugins,we)}};function ue(){var we=typeof console>"u"?null:console;if(we){var ke=we.warn?we.warn:we.log;ke.apply(we,arguments)}}function pe(we,ke,Qe){Qe||(Qe=""),we&&!ie(we)&&(we=[we]),ke&&!ie(ke)&&(ke=[ke]);var Ue=Qe?"__storejs_"+Qe+"_":"",We=Qe?new RegExp("^"+Ue):null,Ne=/^[a-zA-Z0-9_\-]*$/;if(!Ne.test(Qe))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var ut={_namespacePrefix:Ue,_namespaceRegexp:We,_testStorage:function(et){try{var rt="__storejs__test__";et.write(rt,rt);var ft=et.read(rt)===rt;return et.remove(rt),ft}catch{return!1}},_assignPluginFnProp:function(et,rt){var ft=this[rt];this[rt]=function(){var wt=B(arguments,0),Ft=this;function _t(){if(ft)return P(arguments,function(Mt,Vt){wt[Vt]=Mt}),ft.apply(Ft,wt)}var Pt=[_t].concat(wt);return et.apply(Ft,Pt)}},_serialize:function(et){return JSON.stringify(et)},_deserialize:function(et,rt){if(!et)return rt;var ft="";try{ft=JSON.parse(et)}catch{ft=et}return ft!==void 0?ft:rt},_addStorage:function(et){this.enabled||this._testStorage(et)&&(this.storage=et,this.enabled=!0)},_addPlugin:function(et){var rt=this;if(ie(et)){P(et,function(wt){rt._addPlugin(wt)});return}var ft=M(this.plugins,function(wt){return et===wt});if(!ft){if(this.plugins.push(et),!D(et))throw new Error("Plugins must be function values that return objects");var Ze=et.call(this);if(!ne(Ze))throw new Error("Plugins must return an object of function properties");P(Ze,function(wt,Ft){if(!D(wt))throw new Error("Bad plugin property: "+Ft+" from plugin "+et.name+". Plugins should only return functions.");rt._assignPluginFnProp(wt,Ft)})}},addStorage:function(et){ue("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(et)}},Ye=Y(ut,oe,{plugins:[]});return Ye.raw={},P(Ye,function(et,rt){D(et)&&(Ye.raw[rt]=K(Ye,et))}),P(we,function(et){Ye._addStorage(et)}),P(ke,function(et){Ye._addPlugin(et)}),Ye}return storeEngine}var localStorage_1,hasRequiredLocalStorage;function requireLocalStorage(){if(hasRequiredLocalStorage)return localStorage_1;hasRequiredLocalStorage=1;var g=requireUtil(),B=g.Global;localStorage_1={name:"localStorage",read:P,write:K,each:Y,remove:ie,clearAll:D};function M(){return B.localStorage}function P(ne){return M().getItem(ne)}function K(ne,oe){return M().setItem(ne,oe)}function Y(ne){for(var oe=M().length-1;oe>=0;oe--){var ue=M().key(oe);ne(P(ue),ue)}}function ie(ne){return M().removeItem(ne)}function D(){return M().clear()}return localStorage_1}var oldFFGlobalStorage,hasRequiredOldFFGlobalStorage;function requireOldFFGlobalStorage(){if(hasRequiredOldFFGlobalStorage)return oldFFGlobalStorage;hasRequiredOldFFGlobalStorage=1;var g=requireUtil(),B=g.Global;oldFFGlobalStorage={name:"oldFF-globalStorage",read:P,write:K,each:Y,remove:ie,clearAll:D};var M=B.globalStorage;function P(ne){return M[ne]}function K(ne,oe){M[ne]=oe}function Y(ne){for(var oe=M.length-1;oe>=0;oe--){var ue=M.key(oe);ne(M[ue],ue)}}function ie(ne){return M.removeItem(ne)}function D(){Y(function(ne,oe){delete M[ne]})}return oldFFGlobalStorage}var oldIEUserDataStorage,hasRequiredOldIEUserDataStorage;function requireOldIEUserDataStorage(){if(hasRequiredOldIEUserDataStorage)return oldIEUserDataStorage;hasRequiredOldIEUserDataStorage=1;var g=requireUtil(),B=g.Global;oldIEUserDataStorage={name:"oldIE-userDataStorage",write:ie,read:D,each:ne,remove:oe,clearAll:ue};var M="storejs",P=B.document,K=ke(),Y=(B.navigator?B.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function ie(Qe,Ue){if(!Y){var We=we(Qe);K(function(Ne){Ne.setAttribute(We,Ue),Ne.save(M)})}}function D(Qe){if(!Y){var Ue=we(Qe),We=null;return K(function(Ne){We=Ne.getAttribute(Ue)}),We}}function ne(Qe){K(function(Ue){for(var We=Ue.XMLDocument.documentElement.attributes,Ne=We.length-1;Ne>=0;Ne--){var ut=We[Ne];Qe(Ue.getAttribute(ut.name),ut.name)}})}function oe(Qe){var Ue=we(Qe);K(function(We){We.removeAttribute(Ue),We.save(M)})}function ue(){K(function(Qe){var Ue=Qe.XMLDocument.documentElement.attributes;Qe.load(M);for(var We=Ue.length-1;We>=0;We--)Qe.removeAttribute(Ue[We].name);Qe.save(M)})}var pe=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function we(Qe){return Qe.replace(/^\d/,"___$&").replace(pe,"___")}function ke(){if(!P||!P.documentElement||!P.documentElement.addBehavior)return null;var Qe="script",Ue,We,Ne;try{We=new ActiveXObject("htmlfile"),We.open(),We.write("<"+Qe+">document.w=window</"+Qe+'><iframe src="/favicon.ico"></iframe>'),We.close(),Ue=We.w.frames[0].document,Ne=Ue.createElement("div")}catch{Ne=P.createElement("div"),Ue=P.body}return function(ut){var Ye=[].slice.call(arguments,0);Ye.unshift(Ne),Ue.appendChild(Ne),Ne.addBehavior("#default#userData"),Ne.load(M),ut.apply(this,Ye),Ue.removeChild(Ne)}}return oldIEUserDataStorage}var cookieStorage,hasRequiredCookieStorage;function requireCookieStorage(){if(hasRequiredCookieStorage)return cookieStorage;hasRequiredCookieStorage=1;var g=requireUtil(),B=g.Global,M=g.trim;cookieStorage={name:"cookieStorage",read:K,write:ie,each:Y,remove:D,clearAll:ne};var P=B.document;function K(ue){if(!ue||!oe(ue))return null;var pe="(?:^|.*;\\s*)"+escape(ue).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(P.cookie.replace(new RegExp(pe),"$1"))}function Y(ue){for(var pe=P.cookie.split(/; ?/g),we=pe.length-1;we>=0;we--)if(M(pe[we])){var ke=pe[we].split("="),Qe=unescape(ke[0]),Ue=unescape(ke[1]);ue(Ue,Qe)}}function ie(ue,pe){ue&&(P.cookie=escape(ue)+"="+escape(pe)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function D(ue){!ue||!oe(ue)||(P.cookie=escape(ue)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function ne(){Y(function(ue,pe){D(pe)})}function oe(ue){return new RegExp("(?:^|;\\s*)"+escape(ue).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(P.cookie)}return cookieStorage}var sessionStorage_1,hasRequiredSessionStorage;function requireSessionStorage(){if(hasRequiredSessionStorage)return sessionStorage_1;hasRequiredSessionStorage=1;var g=requireUtil(),B=g.Global;sessionStorage_1={name:"sessionStorage",read:P,write:K,each:Y,remove:ie,clearAll:D};function M(){return B.sessionStorage}function P(ne){return M().getItem(ne)}function K(ne,oe){return M().setItem(ne,oe)}function Y(ne){for(var oe=M().length-1;oe>=0;oe--){var ue=M().key(oe);ne(P(ue),ue)}}function ie(ne){return M().removeItem(ne)}function D(){return M().clear()}return sessionStorage_1}var memoryStorage_1,hasRequiredMemoryStorage;function requireMemoryStorage(){if(hasRequiredMemoryStorage)return memoryStorage_1;hasRequiredMemoryStorage=1,memoryStorage_1={name:"memoryStorage",read:B,write:M,each:P,remove:K,clearAll:Y};var g={};function B(ie){return g[ie]}function M(ie,D){g[ie]=D}function P(ie){for(var D in g)g.hasOwnProperty(D)&&ie(g[D],D)}function K(ie){delete g[ie]}function Y(ie){g={}}return memoryStorage_1}var all,hasRequiredAll;function requireAll(){return hasRequiredAll||(hasRequiredAll=1,all=[requireLocalStorage(),requireOldFFGlobalStorage(),requireOldIEUserDataStorage(),requireCookieStorage(),requireSessionStorage(),requireMemoryStorage()]),all}var json2$1={},hasRequiredJson2$1;function requireJson2$1(){return hasRequiredJson2$1||(hasRequiredJson2$1=1,typeof JSON!="object"&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(g){return g<10?"0"+g:g}function this_value(){return this.valueOf()}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;function quote(g){return rx_escapable.lastIndex=0,rx_escapable.test(g)?'"'+g.replace(rx_escapable,function(B){var M=meta[B];return typeof M=="string"?M:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function str(g,B){var M,P,K,Y,ie=gap,D,ne=B[g];switch(ne&&typeof ne=="object"&&typeof ne.toJSON=="function"&&(ne=ne.toJSON(g)),typeof rep=="function"&&(ne=rep.call(B,g,ne)),typeof ne){case"string":return quote(ne);case"number":return isFinite(ne)?String(ne):"null";case"boolean":case"null":return String(ne);case"object":if(!ne)return"null";if(gap+=indent,D=[],Object.prototype.toString.apply(ne)==="[object Array]"){for(Y=ne.length,M=0;M<Y;M+=1)D[M]=str(M,ne)||"null";return K=D.length===0?"[]":gap?`[
`+gap+D.join(`,
`+gap)+`
`+ie+"]":"["+D.join(",")+"]",gap=ie,K}if(rep&&typeof rep=="object")for(Y=rep.length,M=0;M<Y;M+=1)typeof rep[M]=="string"&&(P=rep[M],K=str(P,ne),K&&D.push(quote(P)+(gap?": ":":")+K));else for(P in ne)Object.prototype.hasOwnProperty.call(ne,P)&&(K=str(P,ne),K&&D.push(quote(P)+(gap?": ":":")+K));return K=D.length===0?"{}":gap?`{
`+gap+D.join(`,
`+gap)+`
`+ie+"}":"{"+D.join(",")+"}",gap=ie,K}}typeof JSON.stringify!="function"&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(g,B,M){var P;if(gap="",indent="",typeof M=="number")for(P=0;P<M;P+=1)indent+=" ";else typeof M=="string"&&(indent=M);if(rep=B,B&&typeof B!="function"&&(typeof B!="object"||typeof B.length!="number"))throw new Error("JSON.stringify");return str("",{"":g})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){var j;function walk(g,B){var M,P,K=g[B];if(K&&typeof K=="object")for(M in K)Object.prototype.hasOwnProperty.call(K,M)&&(P=walk(K,M),P!==void 0?K[M]=P:delete K[M]);return reviver.call(g,B,K)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),json2$1}var json2,hasRequiredJson2;function requireJson2(){if(hasRequiredJson2)return json2;hasRequiredJson2=1,json2=g;function g(){return requireJson2$1(),{}}return json2}var store_legacy,hasRequiredStore_legacy;function requireStore_legacy(){if(hasRequiredStore_legacy)return store_legacy;hasRequiredStore_legacy=1;var g=requireStoreEngine(),B=requireAll(),M=[requireJson2()];return store_legacy=g.createStore(B,M),store_legacy}var store_legacyExports=requireStore_legacy();const store=getDefaultExportFromCjs(store_legacyExports);function osmAuth(g){var B={};B.authenticated=function(){return!!K("oauth2_access_token")},B.logout=function(){return K("oauth2_access_token",""),K("oauth_token",""),K("oauth_token_secret",""),K("oauth_request_token_secret",""),B},B.authenticate=function(ie){if(B.authenticated()){ie(null,B);return}B.logout(),_generatePkceChallenge(function(D){M(D,ie)})},B.authenticateAsync=function(){return B.authenticated()?Promise.resolve(B):(B.logout(),new Promise((ie,D)=>{var ne=(oe,ue)=>{oe?D(new Error(oe)):ie(ue)};_generatePkceChallenge(oe=>M(oe,ne))}))};function M(ie,D){var ne=generateState(),oe=g.url+"/oauth2/authorize?"+utilQsString({client_id:g.client_id,redirect_uri:g.redirect_uri,response_type:"code",scope:g.scope,state:ne,code_challenge:ie.code_challenge,code_challenge_method:ie.code_challenge_method});if(g.singlepage){if(!store.enabled){var ue=new Error("local storage unavailable, but require in singlepage mode");ue.status="pkce-localstorage-unavailable",D(ue);return}var pe=utilStringQs(window.location.search.slice(1));pe.code?B.bootstrapToken(pe.code,D):(K("oauth2_state",ne),K("oauth2_pkce_code_verifier",ie.code_verifier),window.location=oe)}else{var we=600,ke=550,Qe=[["width",we],["height",ke],["left",window.screen.width/2-we/2],["top",window.screen.height/2-ke/2]].map(function(Ne){return Ne.join("=")}).join(","),Ue=window.open("about:blank","oauth_window",Qe);B.popupWindow=Ue,Ue.location=oe,Ue||(ue=new Error("Popup was blocked"),ue.status="popup-blocked",D(ue))}window.authComplete=function(Ne){var ut=utilStringQs(Ne.split("?")[1]);if(ut.state!==ne){ue=new Error("Invalid state"),ue.status="invalid-state",D(ue);return}P(ut.code,ie.code_verifier,We),delete window.authComplete};function We(Ne,ut){if(g.done(),Ne){D(Ne);return}var Ye=JSON.parse(ut.response);K("oauth2_access_token",Ye.access_token),D(null,B)}}function P(ie,D,ne){var oe=g.url+"/oauth2/token?"+utilQsString({client_id:g.client_id,redirect_uri:g.redirect_uri,grant_type:"authorization_code",code:ie,code_verifier:D});B.rawxhr("POST",oe,null,null,null,ne),g.loading()}B.bringPopupWindowToFront=function(){var ie=!1;try{B.popupWindow&&!B.popupWindow.closed&&(B.popupWindow.focus(),ie=!0)}catch{}return ie},B.bootstrapToken=function(ie,D){var ne=K("oauth2_state");K("oauth2_state","");var oe=utilStringQs(window.location.search.slice(1));if(oe.state!==ne){var ue=new Error("Invalid state");ue.status="invalid-state",D(ue);return}var pe=K("oauth2_pkce_code_verifier");K("oauth2_pkce_code_verifier",""),P(ie,pe,we);function we(ke,Qe){if(g.done(),ke){D(ke);return}var Ue=JSON.parse(Qe.response);K("oauth2_access_token",Ue.access_token),D(null,B)}},B.fetch=function(ie,D){if(B.authenticated())return ne();return g.auto?B.authenticateAsync().then(ne):Promise.reject(new Error("not authenticated"));function ne(){return D=D||{},D.headers||(D.headers={"Content-Type":"application/x-www-form-urlencoded"}),D.headers.Authorization="Bearer "+K("oauth2_access_token"),fetch(ie,D)}},B.xhr=function(ie,D){if(B.authenticated())return ne();if(g.auto){B.authenticate(ne);return}else{D("not authenticated",null);return}function ne(){var ue=ie.prefix!==!1?g.url+ie.path:ie.path;return B.rawxhr(ie.method,ue,K("oauth2_access_token"),ie.content,ie.headers,oe)}function oe(ue,pe){ue?D(ue):pe.responseXML?D(ue,pe.responseXML):D(ue,pe.response)}},B.rawxhr=function(ie,D,ne,oe,ue,pe){ue=ue||{"Content-Type":"application/x-www-form-urlencoded"},ne&&(ue.Authorization="Bearer "+ne);var we=new XMLHttpRequest;we.onreadystatechange=function(){we.readyState===4&&we.status!==0&&(/^20\d$/.test(we.status)?pe(null,we):pe(we,null))},we.onerror=function(Qe){pe(Qe,null)},we.open(ie,D,!0);for(var ke in ue)we.setRequestHeader(ke,ue[ke]);return we.send(oe),we},B.preauth=function(ie){return ie&&ie.access_token&&K("oauth2_access_token",ie.access_token),B},B.options=function(ie){return arguments.length?(g=ie,g.url=g.url||"https://www.openstreetmap.org",g.auto=g.auto||!1,g.singlepage=g.singlepage||!1,g.loading=g.loading||function(){},g.done=g.done||function(){},B.preauth(g)):g};var K;if(store.enabled)K=function(ie,D){if(arguments.length===1)return store.get(g.url+ie);if(arguments.length===2)return store.set(g.url+ie,D)};else{var Y={};K=function(ie,D){if(arguments.length===1)return Y[g.url+ie];if(arguments.length===2)return Y[g.url+ie]=D}}return B.options(g),B}function utilQsString(g){return Object.keys(g).filter(function(B){return g[B]!==void 0}).sort().map(function(B){return encodeURIComponent(B)+"="+encodeURIComponent(g[B])}).join("&")}function utilStringQs(g){for(var B=0;B<g.length&&(g[B]==="?"||g[B]==="#");)B++;return g=g.slice(B),g.split("&").reduce(function(M,P){var K=P.split("=");return K.length===2&&(M[K[0]]=decodeURIComponent(K[1])),M},{})}function supportsWebCryptoAPI(){return window&&window.crypto&&window.crypto.getRandomValues&&window.crypto.subtle&&window.crypto.subtle.digest}function _generatePkceChallenge(g){var B;if(supportsWebCryptoAPI()){var M=window.crypto.getRandomValues(new Uint8Array(32));B=base64(M.buffer);var P=Uint8Array.from(Array.from(B).map(function(ie){return ie.charCodeAt(0)}));window.crypto.subtle.digest("SHA-256",P).then(function(ie){var D=base64(ie);g({code_challenge:D,code_verifier:B,code_challenge_method:"S256"})})}else{var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";B="";for(var Y=0;Y<64;Y++)B+=K[Math.floor(Math.random()*K.length)];g({code_verifier:B,code_challenge:B,code_challenge_method:"plain"})}}function generateState(){var g;if(supportsWebCryptoAPI()){var B=window.crypto.getRandomValues(new Uint8Array(32));g=base64(B.buffer)}else{var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";g="";for(var P=0;P<64;P++)g+=M[Math.floor(Math.random()*M.length)]}return g}function base64(g){return btoa(String.fromCharCode.apply(null,new Uint8Array(g))).replace(/\//g,"_").replace(/\+/g,"-").replace(/[=]/g,"")}const enabled=configs.osmAuth&&configs.osmAuth.client_id;configs.osmAuth.redirect_uri||(configs.osmAuth.redirect_uri=`${window.location.origin}${window.location.pathname}land.html`);configs.osmAuth.scope="read_prefs write_prefs";let auth;enabled&&(auth=osmAuth(configs.osmAuth));const sync={enabled,load(g){auth.authenticated()?loadQueries(g):auth.authenticate(B=>{if(B)return g(B);loadQueries(g)})},save(g,B){auth.authenticated()?saveQuery(g,B):auth.authenticate(M=>{if(M)return B(M);saveQuery(g,B)})},delete(g,B){if(!auth.authenticated())return B(new Error("must be logged in to delete a synced query"));g={name:g,deleteMe:!0},saveQuery(g,B)},logout(){auth.authenticated()&&auth.logout()},authenticated(){return enabled&&auth.authenticated()}};function loadQueries(g){auth.xhr({method:"GET",path:"/api/0.6/user/preferences"},(B,M)=>{if(B)return g(B);let P=0,K;(K=M.querySelector(`preference[k="${configs.settingNamespace}_query-count"]`))&&(P=+K.getAttribute("v"));const Y=[];for(let ie=0;ie<P;ie++){const D=M.querySelector(`preference[k="${configs.settingNamespace}_query_${ie}_0"]`);if(!D)continue;const ne=D.getAttribute("v").split("&"),oe=+ne[0].slice(2),ue=ne[1].slice(2);let pe=ne[2].slice(2);for(let we=1;we<oe;we++)pe+=M.querySelector(`preference[k="${configs.settingNamespace}_query_${ie}_${we}"]`).getAttribute("v");Y.push({name:ue,query:pe})}g(null,Y,M)})}function saveQuery(g,B){loadQueries((M,P,K)=>{if(M)return B(M);const Y=K.querySelector("preferences"),ie=Y.querySelectorAll(`preference[k^="${configs.settingNamespace}_query"]`);for(const oe of ie)oe.remove();let D=!0;P.forEach((oe,ue)=>{oe.name==g.name&&(oe.query=g.query,D=ue)}),D===!0?P.push(g):g.deleteMe&&P.splice(D,1);const ne=K.createElement("preference");ne.setAttribute("k",`${configs.settingNamespace}_query-count`),ne.setAttribute("v",P.length),Y.appendChild(ne);for(let oe=0;oe<P.length;oe++){const ue=P[oe];if(ue.name.length>200)return B(new Error("query name too long to be saved on osm.org"));const pe=Math.ceil((ue.query.length+ue.name.length+8)/255);if(pe>9)return B(new Error("query too long to be saved on osm.org"));let we=`p=${pe}`;we+=`&n=${ue.name}`,we+=`&q=${ue.query}`,we=we.match(/.{1,255}/g);for(let ke=0;ke<pe;ke++){const Qe=K.createElement("preference");Qe.setAttribute("k",`${configs.settingNamespace}_query_${oe}_${ke}`),Qe.setAttribute("v",we[ke]),Y.appendChild(Qe)}}auth.xhr({method:"PUT",path:"/api/0.6/user/preferences",headers:{"Content-Type":"text/xml"},content:K.firstChild.outerHTML},oe=>{if(oe)return B(oe);B(null,P)})})}const cache={};class nominatim{static request(B,M){$.ajax(`https://nominatim.openhistoricalmap.org/search?X-Requested-With=${configs.appname}`,{data:{format:"json",q:B},success(P){if(typeof P=="string")try{P=JSON.parse(P)}catch{}cache[B]=P,M(void 0,P)},error(){const P="An error occurred while contacting the osm search server nominatim.openhistoricalmap.org :(";console.log(P),M(P,null)}})}static get(B,M){return cache[B]===void 0?this.request(B,M):M(void 0,cache[B]),this}static getBest(B,M,P){return P||(P=M,M=null),this.get(B,(K,Y)=>{if(K){P(K,null);return}M&&(Y=Y.filter(M)),Y.length===0?P("No result found",null):P(K,Y[0])}),this}}function map2bbox(g){let B;ide.map.bboxfilter&&ide.map.bboxfilter.isEnabled()?B=ide.map.bboxfilter.getBounds():B=ide.map.getBounds();const M=Math.min(Math.max(B.getSouthWest().lat,-90),90),P=Math.min(Math.max(B.getNorthEast().lat,-90),90),K=Math.min(Math.max(B.getSouthWest().lng,-180),180),Y=Math.min(Math.max(B.getNorthEast().lng,-180),180);if(g=="OverpassQL")return`${M},${K},${P},${Y}`;if(g=="xml")return`s="${M}" w="${K}" n="${P}" e="${Y}"`}function map2coord(g){const B=ide.map.getCenter();if(g=="OverpassQL")return`${B.lat},${B.lng}`;if(g=="xml")return`lat="${B.lat}" lon="${B.lng}"`}function relativeTime(g,B){const M=Date.now();if(g==""&&(g="0 seconds"),g=g.toLowerCase().match(/(-?[0-9]+) ?(seconds?|minutes?|hours?|days?|weeks?|months?|years?)?/),g===null){B("");return}const P=parseInt(g[1]);let K;switch(g[2]){case"second":case"seconds":K=1;break;case"minute":case"minutes":K=60;break;case"hour":case"hours":K=3600;break;case"day":case"days":default:K=86400;break;case"week":case"weeks":K=604800;break;case"month":case"months":K=2628e3;break;case"year":case"years":K=31536e3;break}const Y=M-P*K*1e3;B(new Date(Y).toISOString())}function geocodeId(g,B){const M=ide.getQueryLang();function P(K){return K.osm_type&&K.osm_id}nominatim.getBest(g,P,(K,Y)=>{if(K)return ide.onNominatimError(g,"Id");M=="OverpassQL"?Y=`${Y.osm_type}(${Y.osm_id})`:M=="xml"&&(Y=`type="${Y.osm_type}" ref="${Y.osm_id}"`),B(Y)})}function geocodeArea(g,B){const M=ide.getQueryLang();function P(K){return K.osm_type&&K.osm_id&&K.osm_type!=="node"}nominatim.getBest(g,P,(K,Y)=>{if(K)return ide.onNominatimError(g,"Area");let ie=1*Y.osm_id;if(Y.osm_type=="way"&&(ie+=24e8),Y.osm_type=="relation"&&(ie+=36e8),M=="OverpassQL")return Y.osm_type==="way"&&(ie+=`,${Y.osm_id}`),B(`area(id:${ie})`);if(M=="xml")return Y.osm_type==="way"&&(ie+=`" ref_1="${Y.osm_id}`),B(`type="area" ref="${ie}"`)})}function geocodeBbox(g,B){const M=ide.getQueryLang();nominatim.getBest(g,(P,K)=>{if(P)return ide.onNominatimError(g,"Bbox");const Y=Math.min(Math.max(K.boundingbox[0],-90),90),ie=Math.min(Math.max(K.boundingbox[1],-90),90),D=Math.min(Math.max(K.boundingbox[2],-180),180),ne=Math.min(Math.max(K.boundingbox[3],-180),180);M=="OverpassQL"?K=`${Y},${D},${ie},${ne}`:M=="xml"&&(K=`s="${Y}" w="${D}" n="${ie}" e="${ne}"`),B(K)})}function geocodeCoords(g,B){const M=ide.getQueryLang();nominatim.getBest(g,(P,K)=>{if(P)return ide.onNominatimError(g,"Coords");M=="OverpassQL"?K=`${K.lat},${K.lon}`:M=="xml"&&(K=`lat="${K.lat}" lon="${K.lon}"`),B(K)})}function shortcuts(){const g=ide.getQueryLang();return{bbox:map2bbox(g),center:map2coord(g),__bbox__global_bbox_xml__ezs4K8__:map2bbox("OverpassQL"),date:relativeTime,geocodeId,geocodeArea,geocodeBbox,geocodeCoords,nominatimId:g=="xml"?geocodeId:(B,M)=>geocodeId(B,P=>M(`${P};`)),nominatimArea:g=="xml"?geocodeArea:(B,M)=>geocodeArea(B,P=>M(`${P};`)),nominatimBbox:geocodeBbox,nominatimCoords:geocodeCoords}}var maplibreGl$1={exports:{}},maplibreGl=maplibreGl$1.exports,hasRequiredMaplibreGl;function requireMaplibreGl(){return hasRequiredMaplibreGl||(hasRequiredMaplibreGl=1,function(g,B){(function(M,P){g.exports=P()})(maplibreGl,function(){var M,P,K;function Y(D,ne){if(!M)M=ne;else if(!P)P=ne;else{var oe="var sharedChunk = {}; ("+M+")(sharedChunk); ("+P+")(sharedChunk);",ue={};M(ue),K=ne(ue),typeof window<"u"&&(K.workerUrl=window.URL.createObjectURL(new Blob([oe],{type:"text/javascript"})))}}Y(["exports"],function(D){function ne(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var oe=ue;function ue(C,b){this.x=C,this.y=b}ue.prototype={clone:function(){return new ue(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,b){return this.clone()._rotateAround(C,b)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var b=C.x-this.x,I=C.y-this.y;return b*b+I*I},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,b){return Math.atan2(this.x*b-this.y*C,this.x*C+this.y*b)},_matMult:function(C){var b=C[2]*this.x+C[3]*this.y;return this.x=C[0]*this.x+C[1]*this.y,this.y=b,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var b=Math.cos(C),I=Math.sin(C),H=I*this.x+b*this.y;return this.x=b*this.x-I*this.y,this.y=H,this},_rotateAround:function(C,b){var I=Math.cos(C),H=Math.sin(C),q=b.y+H*(this.x-b.x)+I*(this.y-b.y);return this.x=b.x+I*(this.x-b.x)-H*(this.y-b.y),this.y=q,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ue.convert=function(C){return C instanceof ue?C:Array.isArray(C)?new ue(C[0],C[1]):C};var pe=ne(oe),we=ke;function ke(C,b,I,H){this.cx=3*C,this.bx=3*(I-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(H-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=b,this.p2x=I,this.p2y=H}ke.prototype={sampleCurveX:function(C){return((this.ax*C+this.bx)*C+this.cx)*C},sampleCurveY:function(C){return((this.ay*C+this.by)*C+this.cy)*C},sampleCurveDerivativeX:function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},solveCurveX:function(C,b){if(b===void 0&&(b=1e-6),C<0)return 0;if(C>1)return 1;for(var I=C,H=0;H<8;H++){var q=this.sampleCurveX(I)-C;if(Math.abs(q)<b)return I;var ee=this.sampleCurveDerivativeX(I);if(Math.abs(ee)<1e-6)break;I-=q/ee}var re=0,ae=1;for(I=C,H=0;H<20&&(q=this.sampleCurveX(I),!(Math.abs(q-C)<b));H++)C>q?re=I:ae=I,I=.5*(ae-re)+re;return I},solve:function(C,b){return this.sampleCurveY(this.solveCurveX(C,b))}};var Qe=ne(we);function Ue(C,b,I,H){const q=new Qe(C,b,I,H);return function(ee){return q.solve(ee)}}const We=Ue(.25,.1,.25,1);function Ne(C,b,I){return Math.min(I,Math.max(b,C))}function ut(C,b,I){const H=I-b,q=((C-b)%H+H)%H+b;return q===b?I:q}function Ye(C,...b){for(const I of b)for(const H in I)C[H]=I[H];return C}let et=1;function rt(C,b,I){const H={};for(const q in C)H[q]=b.call(I||this,C[q],q,C);return H}function ft(C,b,I){const H={};for(const q in C)b.call(I||this,C[q],q,C)&&(H[q]=C[q]);return H}function Ze(C){return Array.isArray(C)?C.map(Ze):typeof C=="object"&&C?rt(C,Ze):C}const wt={};function Ft(C){wt[C]||(typeof console<"u"&&console.warn(C),wt[C]=!0)}function _t(C,b,I){return(I.y-C.y)*(b.x-C.x)>(b.y-C.y)*(I.x-C.x)}function Pt(C){let b=0;for(let I,H,q=0,ee=C.length,re=ee-1;q<ee;re=q++)I=C[q],H=C[re],b+=(H.x-I.x)*(I.y+H.y);return b}function Mt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Vt=null;function Ai(C){if(Vt==null){const b=C.navigator?C.navigator.userAgent:null;Vt=!!C.safari||!(!b||!(/\b(iPad|iPhone|iPod)\b/.test(b)||b.match("Safari")&&!b.match("Chrome")))}return Vt}function Ri(C){return typeof ImageBitmap<"u"&&C instanceof ImageBitmap}const Ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Li,Yi;const vi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(C){const b=requestAnimationFrame(C);return{cancel:()=>cancelAnimationFrame(b)}},getImageData(C,b=0){return this.getImageCanvasContext(C).getImageData(-b,-b,C.width+2*b,C.height+2*b)},getImageCanvasContext(C){const b=window.document.createElement("canvas"),I=b.getContext("2d",{willReadFrequently:!0});if(!I)throw new Error("failed to create canvas 2d context");return b.width=C.width,b.height=C.height,I.drawImage(C,0,0,C.width,C.height),I},resolveURL:C=>(Li||(Li=document.createElement("a")),Li.href=C,Li.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Yi==null&&(Yi=matchMedia("(prefers-reduced-motion: reduce)")),Yi.matches)}},d={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class w extends Error{constructor(b,I,H,q){super(`AJAXError: ${I} (${b}): ${H}`),this.status=b,this.statusText=I,this.url=H,this.body=q}}const S=Mt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,k=C=>d.REGISTERED_PROTOCOLS[C.substring(0,C.indexOf("://"))];function R(C,b){const I=new AbortController,H=new Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,cache:C.cache,referrer:S(),signal:I.signal});let q=!1,ee=!1;return C.type==="json"&&H.headers.set("Accept","application/json"),ee||fetch(H).then(re=>re.ok?(ae=>{(C.type==="arrayBuffer"||C.type==="image"?ae.arrayBuffer():C.type==="json"?ae.json():ae.text()).then(de=>{ee||(q=!0,b(null,de,ae.headers.get("Cache-Control"),ae.headers.get("Expires")))}).catch(de=>{ee||b(new Error(de.message))})})(re):re.blob().then(ae=>b(new w(re.status,re.statusText,C.url,ae)))).catch(re=>{re.code!==20&&b(new Error(re.message))}),{cancel:()=>{ee=!0,q||I.abort()}}}const W=function(C,b){if(/:\/\//.test(C.url)&&!/^https?:|^file:/.test(C.url)){if(Mt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",C,b);if(!Mt())return(k(C.url)||R)(C,b)}if(!(/^file:/.test(I=C.url)||/^file:/.test(S())&&!/^\w+:/.test(I))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return R(C,b);if(Mt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",C,b,void 0,!0)}var I;return function(H,q){const ee=new XMLHttpRequest;ee.open(H.method||"GET",H.url,!0),H.type!=="arrayBuffer"&&H.type!=="image"||(ee.responseType="arraybuffer");for(const re in H.headers)ee.setRequestHeader(re,H.headers[re]);return H.type==="json"&&(ee.responseType="text",ee.setRequestHeader("Accept","application/json")),ee.withCredentials=H.credentials==="include",ee.onerror=()=>{q(new Error(ee.statusText))},ee.onload=()=>{if((ee.status>=200&&ee.status<300||ee.status===0)&&ee.response!==null){let re=ee.response;if(H.type==="json")try{re=JSON.parse(ee.response)}catch(ae){return q(ae)}q(null,re,ee.getResponseHeader("Cache-Control"),ee.getResponseHeader("Expires"))}else{const re=new Blob([ee.response],{type:ee.getResponseHeader("Content-Type")});q(new w(ee.status,ee.statusText,H.url,re))}},ee.send(H.body),{cancel:()=>ee.abort()}}(C,b)},se=function(C,b){return W(Ye(C,{type:"arrayBuffer"}),b)};function le(C){if(!C||C.indexOf("://")<=0||C.indexOf("data:image/")===0||C.indexOf("blob:")===0)return!0;const b=new URL(C),I=window.location;return b.protocol===I.protocol&&b.host===I.host}function fe(C,b,I){I[C]&&I[C].indexOf(b)!==-1||(I[C]=I[C]||[],I[C].push(b))}function be(C,b,I){if(I&&I[C]){const H=I[C].indexOf(b);H!==-1&&I[C].splice(H,1)}}class Te{constructor(b,I={}){Ye(this,I),this.type=b}}class Ke extends Te{constructor(b,I={}){super("error",Ye({error:b},I))}}class Me{on(b,I){return this._listeners=this._listeners||{},fe(b,I,this._listeners),this}off(b,I){return be(b,I,this._listeners),be(b,I,this._oneTimeListeners),this}once(b,I){return I?(this._oneTimeListeners=this._oneTimeListeners||{},fe(b,I,this._oneTimeListeners),this):new Promise(H=>this.once(b,H))}fire(b,I){typeof b=="string"&&(b=new Te(b,I||{}));const H=b.type;if(this.listens(H)){b.target=this;const q=this._listeners&&this._listeners[H]?this._listeners[H].slice():[];for(const ae of q)ae.call(this,b);const ee=this._oneTimeListeners&&this._oneTimeListeners[H]?this._oneTimeListeners[H].slice():[];for(const ae of ee)be(H,ae,this._oneTimeListeners),ae.call(this,b);const re=this._eventedParent;re&&(Ye(b,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),re.fire(b))}else b instanceof Ke&&console.error(b.error);return this}listens(b){return this._listeners&&this._listeners[b]&&this._listeners[b].length>0||this._oneTimeListeners&&this._oneTimeListeners[b]&&this._oneTimeListeners[b].length>0||this._eventedParent&&this._eventedParent.listens(b)}setEventedParent(b,I){return this._eventedParent=b,this._eventedParentData=I,this}}var me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const De=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Xe(C,b){const I={};for(const H in C)H!=="ref"&&(I[H]=C[H]);return De.forEach(H=>{H in b&&(I[H]=b[H])}),I}function ct(C,b){if(Array.isArray(C)){if(!Array.isArray(b)||C.length!==b.length)return!1;for(let I=0;I<C.length;I++)if(!ct(C[I],b[I]))return!1;return!0}if(typeof C=="object"&&C!==null&&b!==null){if(typeof b!="object"||Object.keys(C).length!==Object.keys(b).length)return!1;for(const I in C)if(!ct(C[I],b[I]))return!1;return!0}return C===b}const gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Dt(C,b,I){I.push({command:gt.addSource,args:[C,b[C]]})}function Kt(C,b,I){b.push({command:gt.removeSource,args:[C]}),I[C]=!0}function Gt(C,b,I,H){Kt(C,I,H),Dt(C,b,I)}function Qt(C,b,I){let H;for(H in C[I])if(Object.prototype.hasOwnProperty.call(C[I],H)&&H!=="data"&&!ct(C[I][H],b[I][H]))return!1;for(H in b[I])if(Object.prototype.hasOwnProperty.call(b[I],H)&&H!=="data"&&!ct(C[I][H],b[I][H]))return!1;return!0}function $t(C,b,I,H,q,ee){let re;for(re in b=b||{},C=C||{})Object.prototype.hasOwnProperty.call(C,re)&&(ct(C[re],b[re])||I.push({command:ee,args:[H,re,b[re],q]}));for(re in b)Object.prototype.hasOwnProperty.call(b,re)&&!Object.prototype.hasOwnProperty.call(C,re)&&(ct(C[re],b[re])||I.push({command:ee,args:[H,re,b[re],q]}))}function ri(C){return C.id}function ci(C,b){return C[b.id]=b,C}class Bt{constructor(b,I,H,q){this.message=(b?`${b}: `:"")+H,q&&(this.identifier=q),I!=null&&I.__line__&&(this.line=I.__line__)}}function di(C,...b){for(const I of b)for(const H in I)C[H]=I[H];return C}class ii extends Error{constructor(b,I){super(I),this.message=I,this.key=b}}class Hi{constructor(b,I=[]){this.parent=b,this.bindings={};for(const[H,q]of I)this.bindings[H]=q}concat(b){return new Hi(this,b)}get(b){if(this.bindings[b])return this.bindings[b];if(this.parent)return this.parent.get(b);throw new Error(`${b} not found in scope.`)}has(b){return!!this.bindings[b]||!!this.parent&&this.parent.has(b)}}const Vi={kind:"null"},Ht={kind:"number"},_i={kind:"string"},Ti={kind:"boolean"},Wi={kind:"color"},Zt={kind:"object"},mi={kind:"value"},wi={kind:"collator"},$i={kind:"formatted"},tr={kind:"padding"},Ar={kind:"resolvedImage"},Tr={kind:"variableAnchorOffsetCollection"};function ji(C,b){return{kind:"array",itemType:C,N:b}}function Ii(C){if(C.kind==="array"){const b=Ii(C.itemType);return typeof C.N=="number"?`array<${b}, ${C.N}>`:C.itemType.kind==="value"?"array":`array<${b}>`}return C.kind}const Qs=[Vi,Ht,_i,Ti,Wi,$i,Zt,ji(mi),tr,Ar,Tr];function $r(C,b){if(b.kind==="error")return null;if(C.kind==="array"){if(b.kind==="array"&&(b.N===0&&b.itemType.kind==="value"||!$r(C.itemType,b.itemType))&&(typeof C.N!="number"||C.N===b.N))return null}else{if(C.kind===b.kind)return null;if(C.kind==="value"){for(const I of Qs)if(!$r(I,b))return null}}return`Expected ${Ii(C)} but found ${Ii(b)} instead.`}function nt(C,b){return b.some(I=>I.kind===C.kind)}function Ie(C,b){return b.some(I=>I==="null"?C===null:I==="array"?Array.isArray(C):I==="object"?C&&!Array.isArray(C)&&typeof C=="object":I===typeof C)}function ce(C,b){return C.kind==="array"&&b.kind==="array"?C.itemType.kind===b.itemType.kind&&typeof C.N=="number":C.kind===b.kind}const ye=.96422,Be=.82521,Pe=4/29,qe=6/29,Oe=3*qe*qe,Ge=qe*qe*qe,ot=Math.PI/180,vt=180/Math.PI;function Ct(C){return(C%=360)<0&&(C+=360),C}function Ut([C,b,I,H]){let q,ee;const re=Di((.2225045*(C=ai(C))+.7168786*(b=ai(b))+.0606169*(I=ai(I)))/1);C===b&&b===I?q=ee=re:(q=Di((.4360747*C+.3850649*b+.1430804*I)/ye),ee=Di((.0139322*C+.0971045*b+.7141733*I)/Be));const ae=116*re-16;return[ae<0?0:ae,500*(q-re),200*(re-ee),H]}function ai(C){return C<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Di(C){return C>Ge?Math.pow(C,1/3):C/Oe+Pe}function ni([C,b,I,H]){let q=(C+16)/116,ee=isNaN(b)?q:q+b/500,re=isNaN(I)?q:q-I/200;return q=1*Ui(q),ee=ye*Ui(ee),re=Be*Ui(re),[ei(3.1338561*ee-1.6168667*q-.4906146*re),ei(-.9787684*ee+1.9161415*q+.033454*re),ei(.0719453*ee-.2289914*q+1.4052427*re),H]}function ei(C){return(C=C<=.00304?12.92*C:1.055*Math.pow(C,1/2.4)-.055)<0?0:C>1?1:C}function Ui(C){return C>qe?C*C*C:Oe*(C-Pe)}function Qi(C){return parseInt(C.padEnd(2,C),16)/255}function hr(C,b){return Ki(b?C/100:C,0,1)}function Ki(C,b,I){return Math.min(Math.max(b,C),I)}function Yt(C){return!C.some(Number.isNaN)}const wr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class bi{constructor(b,I,H,q=1,ee=!0){this.r=b,this.g=I,this.b=H,this.a=q,ee||(this.r*=q,this.g*=q,this.b*=q,q||this.overwriteGetter("rgb",[b,I,H,q]))}static parse(b){if(b instanceof bi)return b;if(typeof b!="string")return;const I=function(H){if((H=H.toLowerCase().trim())==="transparent")return[0,0,0,0];const q=wr[H];if(q){const[re,ae,de]=q;return[re/255,ae/255,de/255,1]}if(H.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(H)){const re=H.length<6?1:2;let ae=1;return[Qi(H.slice(ae,ae+=re)),Qi(H.slice(ae,ae+=re)),Qi(H.slice(ae,ae+=re)),Qi(H.slice(ae,ae+re)||"ff")]}if(H.startsWith("rgb")){const re=H.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(re){const[ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht,yt]=re,dt=[Ee||" ",ze||" ",lt].join("");if(dt==="  "||dt==="  /"||dt===",,"||dt===",,,"){const xt=[_e,Le,st].join(""),Tt=xt==="%%%"?100:xt===""?255:0;if(Tt){const Rt=[Ki(+de/Tt,0,1),Ki(+Fe/Tt,0,1),Ki(+Ve/Tt,0,1),ht?hr(+ht,yt):1];if(Yt(Rt))return Rt}}return}}const ee=H.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ee){const[re,ae,de,_e,Ee,Fe,Le,ze,Ve]=ee,st=[de||" ",Ee||" ",Le].join("");if(st==="  "||st==="  /"||st===",,"||st===",,,"){const lt=[+ae,Ki(+_e,0,100),Ki(+Fe,0,100),ze?hr(+ze,Ve):1];if(Yt(lt))return function([ht,yt,dt,xt]){function Tt(Rt){const fi=(Rt+ht/30)%12,Ci=yt*Math.min(dt,1-dt);return dt-Ci*Math.max(-1,Math.min(fi-3,9-fi,1))}return ht=Ct(ht),yt/=100,dt/=100,[Tt(0),Tt(8),Tt(4),xt]}(lt)}}}(b);return I?new bi(...I,!1):void 0}get rgb(){const{r:b,g:I,b:H,a:q}=this,ee=q||1/0;return this.overwriteGetter("rgb",[b/ee,I/ee,H/ee,q])}get hcl(){return this.overwriteGetter("hcl",function(b){const[I,H,q,ee]=Ut(b),re=Math.sqrt(H*H+q*q);return[Math.round(1e4*re)?Ct(Math.atan2(q,H)*vt):NaN,re,I,ee]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ut(this.rgb))}overwriteGetter(b,I){return Object.defineProperty(this,b,{value:I}),I}toString(){const[b,I,H,q]=this.rgb;return`rgba(${[b,I,H].map(ee=>Math.round(255*ee)).join(",")},${q})`}}bi.black=new bi(0,0,0,1),bi.white=new bi(1,1,1,1),bi.transparent=new bi(0,0,0,0),bi.red=new bi(1,0,0,1);class Ir{constructor(b,I,H){this.sensitivity=b?I?"variant":"case":I?"accent":"base",this.locale=H,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(b,I){return this.collator.compare(b,I)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pr{constructor(b,I,H,q,ee){this.text=b,this.image=I,this.scale=H,this.fontStack=q,this.textColor=ee}}class Zi{constructor(b){this.sections=b}static fromString(b){return new Zi([new Pr(b,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(b=>b.text.length!==0||b.image&&b.image.name.length!==0)}static factory(b){return b instanceof Zi?b:Zi.fromString(b)}toString(){return this.sections.length===0?"":this.sections.map(b=>b.text).join("")}}class pi{constructor(b){this.values=b.slice()}static parse(b){if(b instanceof pi)return b;if(typeof b=="number")return new pi([b,b,b,b]);if(Array.isArray(b)&&!(b.length<1||b.length>4)){for(const I of b)if(typeof I!="number")return;switch(b.length){case 1:b=[b[0],b[0],b[0],b[0]];break;case 2:b=[b[0],b[1],b[0],b[1]];break;case 3:b=[b[0],b[1],b[2],b[1]]}return new pi(b)}}toString(){return JSON.stringify(this.values)}}const _s=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class dr{constructor(b){this.values=b.slice()}static parse(b){if(b instanceof dr)return b;if(Array.isArray(b)&&!(b.length<1)&&b.length%2==0){for(let I=0;I<b.length;I+=2){const H=b[I],q=b[I+1];if(typeof H!="string"||!_s.has(H)||!Array.isArray(q)||q.length!==2||typeof q[0]!="number"||typeof q[1]!="number")return}return new dr(b)}}toString(){return JSON.stringify(this.values)}}class Lt{constructor(b){this.name=b.name,this.available=b.available}toString(){return this.name}static fromString(b){return b?new Lt({name:b,available:!1}):null}}function Yr(C,b,I,H){return typeof C=="number"&&C>=0&&C<=255&&typeof b=="number"&&b>=0&&b<=255&&typeof I=="number"&&I>=0&&I<=255?H===void 0||typeof H=="number"&&H>=0&&H<=1?null:`Invalid rgba value [${[C,b,I,H].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof H=="number"?[C,b,I,H]:[C,b,I]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ys(C){if(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number"||C instanceof bi||C instanceof Ir||C instanceof Zi||C instanceof pi||C instanceof dr||C instanceof Lt)return!0;if(Array.isArray(C)){for(const b of C)if(!Ys(b))return!1;return!0}if(typeof C=="object"){for(const b in C)if(!Ys(C[b]))return!1;return!0}return!1}function _r(C){if(C===null)return Vi;if(typeof C=="string")return _i;if(typeof C=="boolean")return Ti;if(typeof C=="number")return Ht;if(C instanceof bi)return Wi;if(C instanceof Ir)return wi;if(C instanceof Zi)return $i;if(C instanceof pi)return tr;if(C instanceof dr)return Tr;if(C instanceof Lt)return Ar;if(Array.isArray(C)){const b=C.length;let I;for(const H of C){const q=_r(H);if(I){if(I===q)continue;I=mi;break}I=q}return ji(I||mi,b)}return Zt}function Br(C){const b=typeof C;return C===null?"":b==="string"||b==="number"||b==="boolean"?String(C):C instanceof bi||C instanceof Zi||C instanceof pi||C instanceof dr||C instanceof Lt?C.toString():JSON.stringify(C)}class Cr{constructor(b,I){this.type=b,this.value=I}static parse(b,I){if(b.length!==2)return I.error(`'literal' expression requires exactly one argument, but found ${b.length-1} instead.`);if(!Ys(b[1]))return I.error("invalid value");const H=b[1];let q=_r(H);const ee=I.expectedType;return q.kind!=="array"||q.N!==0||!ee||ee.kind!=="array"||typeof ee.N=="number"&&ee.N!==0||(q=ee),new Cr(q,H)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class rr{constructor(b){this.name="ExpressionEvaluationError",this.message=b}toJSON(){return this.message}}const Lr={string:_i,number:Ht,boolean:Ti,object:Zt};class sr{constructor(b,I){this.type=b,this.args=I}static parse(b,I){if(b.length<2)return I.error("Expected at least one argument.");let H,q=1;const ee=b[0];if(ee==="array"){let ae,de;if(b.length>2){const _e=b[1];if(typeof _e!="string"||!(_e in Lr)||_e==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);ae=Lr[_e],q++}else ae=mi;if(b.length>3){if(b[2]!==null&&(typeof b[2]!="number"||b[2]<0||b[2]!==Math.floor(b[2])))return I.error('The length argument to "array" must be a positive integer literal',2);de=b[2],q++}H=ji(ae,de)}else{if(!Lr[ee])throw new Error(`Types doesn't contain name = ${ee}`);H=Lr[ee]}const re=[];for(;q<b.length;q++){const ae=I.parse(b[q],q,mi);if(!ae)return null;re.push(ae)}return new sr(H,re)}evaluate(b){for(let I=0;I<this.args.length;I++){const H=this.args[I].evaluate(b);if(!$r(this.type,_r(H)))return H;if(I===this.args.length-1)throw new rr(`Expected value to be of type ${Ii(this.type)}, but found ${Ii(_r(H))} instead.`)}throw new Error}eachChild(b){this.args.forEach(b)}outputDefined(){return this.args.every(b=>b.outputDefined())}}const jr={"to-boolean":Ti,"to-color":Wi,"to-number":Ht,"to-string":_i};class ss{constructor(b,I){this.type=b,this.args=I}static parse(b,I){if(b.length<2)return I.error("Expected at least one argument.");const H=b[0];if(!jr[H])throw new Error(`Can't parse ${H} as it is not part of the known types`);if((H==="to-boolean"||H==="to-string")&&b.length!==2)return I.error("Expected one argument.");const q=jr[H],ee=[];for(let re=1;re<b.length;re++){const ae=I.parse(b[re],re,mi);if(!ae)return null;ee.push(ae)}return new ss(q,ee)}evaluate(b){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(b);case"color":{let I,H;for(const q of this.args){if(I=q.evaluate(b),H=null,I instanceof bi)return I;if(typeof I=="string"){const ee=b.parseColor(I);if(ee)return ee}else if(Array.isArray(I)&&(H=I.length<3||I.length>4?`Invalid rbga value ${JSON.stringify(I)}: expected an array containing either three or four numeric values.`:Yr(I[0],I[1],I[2],I[3]),!H))return new bi(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new rr(H||`Could not parse color from value '${typeof I=="string"?I:JSON.stringify(I)}'`)}case"padding":{let I;for(const H of this.args){I=H.evaluate(b);const q=pi.parse(I);if(q)return q}throw new rr(`Could not parse padding from value '${typeof I=="string"?I:JSON.stringify(I)}'`)}case"variableAnchorOffsetCollection":{let I;for(const H of this.args){I=H.evaluate(b);const q=dr.parse(I);if(q)return q}throw new rr(`Could not parse variableAnchorOffsetCollection from value '${typeof I=="string"?I:JSON.stringify(I)}'`)}case"number":{let I=null;for(const H of this.args){if(I=H.evaluate(b),I===null)return 0;const q=Number(I);if(!isNaN(q))return q}throw new rr(`Could not convert ${JSON.stringify(I)} to number.`)}case"formatted":return Zi.fromString(Br(this.args[0].evaluate(b)));case"resolvedImage":return Lt.fromString(Br(this.args[0].evaluate(b)));default:return Br(this.args[0].evaluate(b))}}eachChild(b){this.args.forEach(b)}outputDefined(){return this.args.every(b=>b.outputDefined())}}const ps=["Unknown","Point","LineString","Polygon"];class cr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ps[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(b){let I=this._parseColorCache[b];return I||(I=this._parseColorCache[b]=bi.parse(b)),I}}class js{constructor(b,I,H=[],q,ee=new Hi,re=[]){this.registry=b,this.path=H,this.key=H.map(ae=>`[${ae}]`).join(""),this.scope=ee,this.errors=re,this.expectedType=q,this._isConstant=I}parse(b,I,H,q,ee={}){return I?this.concat(I,H,q)._parse(b,ee):this._parse(b,ee)}_parse(b,I){function H(q,ee,re){return re==="assert"?new sr(ee,[q]):re==="coerce"?new ss(ee,[q]):q}if(b!==null&&typeof b!="string"&&typeof b!="boolean"&&typeof b!="number"||(b=["literal",b]),Array.isArray(b)){if(b.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const q=b[0];if(typeof q!="string")return this.error(`Expression name must be a string, but found ${typeof q} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const ee=this.registry[q];if(ee){let re=ee.parse(b,this);if(!re)return null;if(this.expectedType){const ae=this.expectedType,de=re.type;if(ae.kind!=="string"&&ae.kind!=="number"&&ae.kind!=="boolean"&&ae.kind!=="object"&&ae.kind!=="array"||de.kind!=="value")if(ae.kind!=="color"&&ae.kind!=="formatted"&&ae.kind!=="resolvedImage"||de.kind!=="value"&&de.kind!=="string")if(ae.kind!=="padding"||de.kind!=="value"&&de.kind!=="number"&&de.kind!=="array")if(ae.kind!=="variableAnchorOffsetCollection"||de.kind!=="value"&&de.kind!=="array"){if(this.checkSubtype(ae,de))return null}else re=H(re,ae,I.typeAnnotation||"coerce");else re=H(re,ae,I.typeAnnotation||"coerce");else re=H(re,ae,I.typeAnnotation||"coerce");else re=H(re,ae,I.typeAnnotation||"assert")}if(!(re instanceof Cr)&&re.type.kind!=="resolvedImage"&&this._isConstant(re)){const ae=new cr;try{re=new Cr(re.type,re.evaluate(ae))}catch(de){return this.error(de.message),null}}return re}return this.error(`Unknown expression "${q}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(b===void 0?"'undefined' value invalid. Use null instead.":typeof b=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof b} instead.`)}concat(b,I,H){const q=typeof b=="number"?this.path.concat(b):this.path,ee=H?this.scope.concat(H):this.scope;return new js(this.registry,this._isConstant,q,I||null,ee,this.errors)}error(b,...I){const H=`${this.key}${I.map(q=>`[${q}]`).join("")}`;this.errors.push(new ii(H,b))}checkSubtype(b,I){const H=$r(b,I);return H&&this.error(H),H}}class ys{constructor(b,I,H){this.type=wi,this.locale=H,this.caseSensitive=b,this.diacriticSensitive=I}static parse(b,I){if(b.length!==2)return I.error("Expected one argument.");const H=b[1];if(typeof H!="object"||Array.isArray(H))return I.error("Collator options argument must be an object.");const q=I.parse(H["case-sensitive"]!==void 0&&H["case-sensitive"],1,Ti);if(!q)return null;const ee=I.parse(H["diacritic-sensitive"]!==void 0&&H["diacritic-sensitive"],1,Ti);if(!ee)return null;let re=null;return H.locale&&(re=I.parse(H.locale,1,_i),!re)?null:new ys(q,ee,re)}evaluate(b){return new Ir(this.caseSensitive.evaluate(b),this.diacriticSensitive.evaluate(b),this.locale?this.locale.evaluate(b):null)}eachChild(b){b(this.caseSensitive),b(this.diacriticSensitive),this.locale&&b(this.locale)}outputDefined(){return!1}}const Os=8192;function pn(C,b){C[0]=Math.min(C[0],b[0]),C[1]=Math.min(C[1],b[1]),C[2]=Math.max(C[2],b[0]),C[3]=Math.max(C[3],b[1])}function Qr(C,b){return!(C[0]<=b[0]||C[2]>=b[2]||C[1]<=b[1]||C[3]>=b[3])}function es(C,b){const I=(180+C[0])/360,H=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C[1]*Math.PI/360)))/360,q=Math.pow(2,b.z);return[Math.round(I*q*Os),Math.round(H*q*Os)]}function xo(C,b,I){const H=C[0]-b[0],q=C[1]-b[1],ee=C[0]-I[0],re=C[1]-I[1];return H*re-ee*q==0&&H*ee<=0&&q*re<=0}function Zs(C,b){let I=!1;for(let re=0,ae=b.length;re<ae;re++){const de=b[re];for(let _e=0,Ee=de.length;_e<Ee-1;_e++){if(xo(C,de[_e],de[_e+1]))return!1;(q=de[_e])[1]>(H=C)[1]!=(ee=de[_e+1])[1]>H[1]&&H[0]<(ee[0]-q[0])*(H[1]-q[1])/(ee[1]-q[1])+q[0]&&(I=!I)}}var H,q,ee;return I}function An(C,b){for(let I=0;I<b.length;I++)if(Zs(C,b[I]))return!0;return!1}function ta(C,b,I,H){const q=H[0]-I[0],ee=H[1]-I[1],re=(C[0]-I[0])*ee-q*(C[1]-I[1]),ae=(b[0]-I[0])*ee-q*(b[1]-I[1]);return re>0&&ae<0||re<0&&ae>0}function ja(C,b,I){for(const _e of I)for(let Ee=0;Ee<_e.length-1;++Ee)if((ae=[(re=_e[Ee+1])[0]-(ee=_e[Ee])[0],re[1]-ee[1]])[0]*(de=[(q=b)[0]-(H=C)[0],q[1]-H[1]])[1]-ae[1]*de[0]!=0&&ta(H,q,ee,re)&&ta(ee,re,H,q))return!0;var H,q,ee,re,ae,de;return!1}function Qn(C,b){for(let I=0;I<C.length;++I)if(!Zs(C[I],b))return!1;for(let I=0;I<C.length-1;++I)if(ja(C[I],C[I+1],b))return!1;return!0}function wa(C,b){for(let I=0;I<b.length;I++)if(Qn(C,b[I]))return!0;return!1}function Nr(C,b,I){const H=[];for(let q=0;q<C.length;q++){const ee=[];for(let re=0;re<C[q].length;re++){const ae=es(C[q][re],I);pn(b,ae),ee.push(ae)}H.push(ee)}return H}function Vo(C,b,I){const H=[];for(let q=0;q<C.length;q++){const ee=Nr(C[q],b,I);H.push(ee)}return H}function Bo(C,b,I,H){if(C[0]<I[0]||C[0]>I[2]){const q=.5*H;let ee=C[0]-I[0]>q?-H:I[0]-C[0]>q?H:0;ee===0&&(ee=C[0]-I[2]>q?-H:I[2]-C[0]>q?H:0),C[0]+=ee}pn(b,C)}function ba(C,b,I,H){const q=Math.pow(2,H.z)*Os,ee=[H.x*Os,H.y*Os],re=[];for(const ae of C)for(const de of ae){const _e=[de.x+ee[0],de.y+ee[1]];Bo(_e,b,I,q),re.push(_e)}return re}function Tn(C,b,I,H){const q=Math.pow(2,H.z)*Os,ee=[H.x*Os,H.y*Os],re=[];for(const de of C){const _e=[];for(const Ee of de){const Fe=[Ee.x+ee[0],Ee.y+ee[1]];pn(b,Fe),_e.push(Fe)}re.push(_e)}if(b[2]-b[0]<=q/2){(ae=b)[0]=ae[1]=1/0,ae[2]=ae[3]=-1/0;for(const de of re)for(const _e of de)Bo(_e,b,I,q)}var ae;return re}class br{constructor(b,I){this.type=Ti,this.geojson=b,this.geometries=I}static parse(b,I){if(b.length!==2)return I.error(`'within' expression requires exactly one argument, but found ${b.length-1} instead.`);if(Ys(b[1])){const H=b[1];if(H.type==="FeatureCollection")for(let q=0;q<H.features.length;++q){const ee=H.features[q].geometry.type;if(ee==="Polygon"||ee==="MultiPolygon")return new br(H,H.features[q].geometry)}else if(H.type==="Feature"){const q=H.geometry.type;if(q==="Polygon"||q==="MultiPolygon")return new br(H,H.geometry)}else if(H.type==="Polygon"||H.type==="MultiPolygon")return new br(H,H)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(b){if(b.geometry()!=null&&b.canonicalID()!=null){if(b.geometryType()==="Point")return function(I,H){const q=[1/0,1/0,-1/0,-1/0],ee=[1/0,1/0,-1/0,-1/0],re=I.canonicalID();if(H.type==="Polygon"){const ae=Nr(H.coordinates,ee,re),de=ba(I.geometry(),q,ee,re);if(!Qr(q,ee))return!1;for(const _e of de)if(!Zs(_e,ae))return!1}if(H.type==="MultiPolygon"){const ae=Vo(H.coordinates,ee,re),de=ba(I.geometry(),q,ee,re);if(!Qr(q,ee))return!1;for(const _e of de)if(!An(_e,ae))return!1}return!0}(b,this.geometries);if(b.geometryType()==="LineString")return function(I,H){const q=[1/0,1/0,-1/0,-1/0],ee=[1/0,1/0,-1/0,-1/0],re=I.canonicalID();if(H.type==="Polygon"){const ae=Nr(H.coordinates,ee,re),de=Tn(I.geometry(),q,ee,re);if(!Qr(q,ee))return!1;for(const _e of de)if(!Qn(_e,ae))return!1}if(H.type==="MultiPolygon"){const ae=Vo(H.coordinates,ee,re),de=Tn(I.geometry(),q,ee,re);if(!Qr(q,ee))return!1;for(const _e of de)if(!wa(_e,ae))return!1}return!0}(b,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class er{constructor(b,I){this.type=I.type,this.name=b,this.boundExpression=I}static parse(b,I){if(b.length!==2||typeof b[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");const H=b[1];return I.scope.has(H)?new er(H,I.scope.get(H)):I.error(`Unknown variable "${H}". Make sure "${H}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(b){return this.boundExpression.evaluate(b)}eachChild(){}outputDefined(){return!1}}class As{constructor(b,I,H,q){this.name=b,this.type=I,this._evaluate=H,this.args=q}evaluate(b){return this._evaluate(b,this.args)}eachChild(b){this.args.forEach(b)}outputDefined(){return!1}static parse(b,I){const H=b[0],q=As.definitions[H];if(!q)return I.error(`Unknown expression "${H}". If you wanted a literal array, use ["literal", [...]].`,0);const ee=Array.isArray(q)?q[0]:q.type,re=Array.isArray(q)?[[q[1],q[2]]]:q.overloads,ae=re.filter(([_e])=>!Array.isArray(_e)||_e.length===b.length-1);let de=null;for(const[_e,Ee]of ae){de=new js(I.registry,ia,I.path,null,I.scope);const Fe=[];let Le=!1;for(let ze=1;ze<b.length;ze++){const Ve=b[ze],st=Array.isArray(_e)?_e[ze-1]:_e.type,lt=de.parse(Ve,1+Fe.length,st);if(!lt){Le=!0;break}Fe.push(lt)}if(!Le)if(Array.isArray(_e)&&_e.length!==Fe.length)de.error(`Expected ${_e.length} arguments, but found ${Fe.length} instead.`);else{for(let ze=0;ze<Fe.length;ze++){const Ve=Array.isArray(_e)?_e[ze]:_e.type,st=Fe[ze];de.concat(ze+1).checkSubtype(Ve,st.type)}if(de.errors.length===0)return new As(H,ee,Ee,Fe)}}if(ae.length===1)I.errors.push(...de.errors);else{const _e=(ae.length?ae:re).map(([Fe])=>{return Le=Fe,Array.isArray(Le)?`(${Le.map(Ii).join(", ")})`:`(${Ii(Le.type)}...)`;var Le}).join(" | "),Ee=[];for(let Fe=1;Fe<b.length;Fe++){const Le=I.parse(b[Fe],1+Ee.length);if(!Le)return null;Ee.push(Ii(Le.type))}I.error(`Expected arguments of type ${_e}, but found (${Ee.join(", ")}) instead.`)}return null}static register(b,I){As.definitions=I;for(const H in I)b[H]=As}}function ia(C){if(C instanceof er)return ia(C.boundExpression);if(C instanceof As&&C.name==="error"||C instanceof ys||C instanceof br)return!1;const b=C instanceof ss||C instanceof sr;let I=!0;return C.eachChild(H=>{I=b?I&&ia(H):I&&H instanceof Cr}),!!I&&xa(C)&&Ca(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function xa(C){if(C instanceof As&&(C.name==="get"&&C.args.length===1||C.name==="feature-state"||C.name==="has"&&C.args.length===1||C.name==="properties"||C.name==="geometry-type"||C.name==="id"||/^filter-/.test(C.name))||C instanceof br)return!1;let b=!0;return C.eachChild(I=>{b&&!xa(I)&&(b=!1)}),b}function Ba(C){if(C instanceof As&&C.name==="feature-state")return!1;let b=!0;return C.eachChild(I=>{b&&!Ba(I)&&(b=!1)}),b}function Ca(C,b){if(C instanceof As&&b.indexOf(C.name)>=0)return!1;let I=!0;return C.eachChild(H=>{I&&!Ca(H,b)&&(I=!1)}),I}function Ea(C,b){const I=C.length-1;let H,q,ee=0,re=I,ae=0;for(;ee<=re;)if(ae=Math.floor((ee+re)/2),H=C[ae],q=C[ae+1],H<=b){if(ae===I||b<q)return ae;ee=ae+1}else{if(!(H>b))throw new rr("Input is not a number.");re=ae-1}return 0}class Ta{constructor(b,I,H){this.type=b,this.input=I,this.labels=[],this.outputs=[];for(const[q,ee]of H)this.labels.push(q),this.outputs.push(ee)}static parse(b,I){if(b.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${b.length-1}.`);if((b.length-1)%2!=0)return I.error("Expected an even number of arguments.");const H=I.parse(b[1],1,Ht);if(!H)return null;const q=[];let ee=null;I.expectedType&&I.expectedType.kind!=="value"&&(ee=I.expectedType);for(let re=1;re<b.length;re+=2){const ae=re===1?-1/0:b[re],de=b[re+1],_e=re,Ee=re+1;if(typeof ae!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(q.length&&q[q.length-1][0]>=ae)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const Fe=I.parse(de,Ee,ee);if(!Fe)return null;ee=ee||Fe.type,q.push([ae,Fe])}return new Ta(ee,H,q)}evaluate(b){const I=this.labels,H=this.outputs;if(I.length===1)return H[0].evaluate(b);const q=this.input.evaluate(b);if(q<=I[0])return H[0].evaluate(b);const ee=I.length;return q>=I[ee-1]?H[ee-1].evaluate(b):H[Ea(I,q)].evaluate(b)}eachChild(b){b(this.input);for(const I of this.outputs)b(I)}outputDefined(){return this.outputs.every(b=>b.outputDefined())}}function On(C,b,I){return C+I*(b-C)}function Za(C,b,I){return C.map((H,q)=>On(H,b[q],I))}const ks={number:On,color:function(C,b,I,H="rgb"){switch(H){case"rgb":{const[q,ee,re,ae]=Za(C.rgb,b.rgb,I);return new bi(q,ee,re,ae,!1)}case"hcl":{const[q,ee,re,ae]=C.hcl,[de,_e,Ee,Fe]=b.hcl;let Le,ze;if(isNaN(q)||isNaN(de))isNaN(q)?isNaN(de)?Le=NaN:(Le=de,re!==1&&re!==0||(ze=_e)):(Le=q,Ee!==1&&Ee!==0||(ze=ee));else{let yt=de-q;de>q&&yt>180?yt-=360:de<q&&q-de>180&&(yt+=360),Le=q+I*yt}const[Ve,st,lt,ht]=function([yt,dt,xt,Tt]){return yt=isNaN(yt)?0:yt*ot,ni([xt,Math.cos(yt)*dt,Math.sin(yt)*dt,Tt])}([Le,ze??On(ee,_e,I),On(re,Ee,I),On(ae,Fe,I)]);return new bi(Ve,st,lt,ht,!1)}case"lab":{const[q,ee,re,ae]=ni(Za(C.lab,b.lab,I));return new bi(q,ee,re,ae,!1)}}},array:Za,padding:function(C,b,I){return new pi(Za(C.values,b.values,I))},variableAnchorOffsetCollection:function(C,b,I){const H=C.values,q=b.values;if(H.length!==q.length)throw new rr(`Cannot interpolate values of different length. from: ${C.toString()}, to: ${b.toString()}`);const ee=[];for(let re=0;re<H.length;re+=2){if(H[re]!==q[re])throw new rr(`Cannot interpolate values containing mismatched anchors. from[${re}]: ${H[re]}, to[${re}]: ${q[re]}`);ee.push(H[re]);const[ae,de]=H[re+1],[_e,Ee]=q[re+1];ee.push([On(ae,_e,I),On(de,Ee,I)])}return new dr(ee)}};class gs{constructor(b,I,H,q,ee){this.type=b,this.operator=I,this.interpolation=H,this.input=q,this.labels=[],this.outputs=[];for(const[re,ae]of ee)this.labels.push(re),this.outputs.push(ae)}static interpolationFactor(b,I,H,q){let ee=0;if(b.name==="exponential")ee=Ja(I,b.base,H,q);else if(b.name==="linear")ee=Ja(I,1,H,q);else if(b.name==="cubic-bezier"){const re=b.controlPoints;ee=new Qe(re[0],re[1],re[2],re[3]).solve(Ja(I,1,H,q))}return ee}static parse(b,I){let[H,q,ee,...re]=b;if(!Array.isArray(q)||q.length===0)return I.error("Expected an interpolation type expression.",1);if(q[0]==="linear")q={name:"linear"};else if(q[0]==="exponential"){const _e=q[1];if(typeof _e!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);q={name:"exponential",base:_e}}else{if(q[0]!=="cubic-bezier")return I.error(`Unknown interpolation type ${String(q[0])}`,1,0);{const _e=q.slice(1);if(_e.length!==4||_e.some(Ee=>typeof Ee!="number"||Ee<0||Ee>1))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);q={name:"cubic-bezier",controlPoints:_e}}}if(b.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${b.length-1}.`);if((b.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(ee=I.parse(ee,2,Ht),!ee)return null;const ae=[];let de=null;H==="interpolate-hcl"||H==="interpolate-lab"?de=Wi:I.expectedType&&I.expectedType.kind!=="value"&&(de=I.expectedType);for(let _e=0;_e<re.length;_e+=2){const Ee=re[_e],Fe=re[_e+1],Le=_e+3,ze=_e+4;if(typeof Ee!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Le);if(ae.length&&ae[ae.length-1][0]>=Ee)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Le);const Ve=I.parse(Fe,ze,de);if(!Ve)return null;de=de||Ve.type,ae.push([Ee,Ve])}return ce(de,Ht)||ce(de,Wi)||ce(de,tr)||ce(de,Tr)||ce(de,ji(Ht))?new gs(de,H,q,ee,ae):I.error(`Type ${Ii(de)} is not interpolatable.`)}evaluate(b){const I=this.labels,H=this.outputs;if(I.length===1)return H[0].evaluate(b);const q=this.input.evaluate(b);if(q<=I[0])return H[0].evaluate(b);const ee=I.length;if(q>=I[ee-1])return H[ee-1].evaluate(b);const re=Ea(I,q),ae=gs.interpolationFactor(this.interpolation,q,I[re],I[re+1]),de=H[re].evaluate(b),_e=H[re+1].evaluate(b);switch(this.operator){case"interpolate":return ks[this.type.kind](de,_e,ae);case"interpolate-hcl":return ks.color(de,_e,ae,"hcl");case"interpolate-lab":return ks.color(de,_e,ae,"lab")}}eachChild(b){b(this.input);for(const I of this.outputs)b(I)}outputDefined(){return this.outputs.every(b=>b.outputDefined())}}function Ja(C,b,I,H){const q=H-I,ee=C-I;return q===0?0:b===1?ee/q:(Math.pow(b,ee)-1)/(Math.pow(b,q)-1)}class Sa{constructor(b,I){this.type=b,this.args=I}static parse(b,I){if(b.length<2)return I.error("Expectected at least one argument.");let H=null;const q=I.expectedType;q&&q.kind!=="value"&&(H=q);const ee=[];for(const ae of b.slice(1)){const de=I.parse(ae,1+ee.length,H,void 0,{typeAnnotation:"omit"});if(!de)return null;H=H||de.type,ee.push(de)}if(!H)throw new Error("No output type");const re=q&&ee.some(ae=>$r(q,ae.type));return new Sa(re?mi:H,ee)}evaluate(b){let I,H=null,q=0;for(const ee of this.args)if(q++,H=ee.evaluate(b),H&&H instanceof Lt&&!H.available&&(I||(I=H.name),H=null,q===this.args.length&&(H=I)),H!==null)break;return H}eachChild(b){this.args.forEach(b)}outputDefined(){return this.args.every(b=>b.outputDefined())}}class ra{constructor(b,I){this.type=I.type,this.bindings=[].concat(b),this.result=I}evaluate(b){return this.result.evaluate(b)}eachChild(b){for(const I of this.bindings)b(I[1]);b(this.result)}static parse(b,I){if(b.length<4)return I.error(`Expected at least 3 arguments, but found ${b.length-1} instead.`);const H=[];for(let ee=1;ee<b.length-1;ee+=2){const re=b[ee];if(typeof re!="string")return I.error(`Expected string, but found ${typeof re} instead.`,ee);if(/[^a-zA-Z0-9_]/.test(re))return I.error("Variable names must contain only alphanumeric characters or '_'.",ee);const ae=I.parse(b[ee+1],ee+1);if(!ae)return null;H.push([re,ae])}const q=I.parse(b[b.length-1],b.length-1,I.expectedType,H);return q?new ra(H,q):null}outputDefined(){return this.result.outputDefined()}}class Sn{constructor(b,I,H){this.type=b,this.index=I,this.input=H}static parse(b,I){if(b.length!==3)return I.error(`Expected 2 arguments, but found ${b.length-1} instead.`);const H=I.parse(b[1],1,Ht),q=I.parse(b[2],2,ji(I.expectedType||mi));return H&&q?new Sn(q.type.itemType,H,q):null}evaluate(b){const I=this.index.evaluate(b),H=this.input.evaluate(b);if(I<0)throw new rr(`Array index out of bounds: ${I} < 0.`);if(I>=H.length)throw new rr(`Array index out of bounds: ${I} > ${H.length-1}.`);if(I!==Math.floor(I))throw new rr(`Array index must be an integer, but found ${I} instead.`);return H[I]}eachChild(b){b(this.index),b(this.input)}outputDefined(){return!1}}class pr{constructor(b,I){this.type=Ti,this.needle=b,this.haystack=I}static parse(b,I){if(b.length!==3)return I.error(`Expected 2 arguments, but found ${b.length-1} instead.`);const H=I.parse(b[1],1,mi),q=I.parse(b[2],2,mi);return H&&q?nt(H.type,[Ti,_i,Ht,Vi,mi])?new pr(H,q):I.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ii(H.type)} instead`):null}evaluate(b){const I=this.needle.evaluate(b),H=this.haystack.evaluate(b);if(!H)return!1;if(!Ie(I,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${Ii(_r(I))} instead.`);if(!Ie(H,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${Ii(_r(H))} instead.`);return H.indexOf(I)>=0}eachChild(b){b(this.needle),b(this.haystack)}outputDefined(){return!0}}class $a{constructor(b,I,H){this.type=Ht,this.needle=b,this.haystack=I,this.fromIndex=H}static parse(b,I){if(b.length<=2||b.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${b.length-1} instead.`);const H=I.parse(b[1],1,mi),q=I.parse(b[2],2,mi);if(!H||!q)return null;if(!nt(H.type,[Ti,_i,Ht,Vi,mi]))return I.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ii(H.type)} instead`);if(b.length===4){const ee=I.parse(b[3],3,Ht);return ee?new $a(H,q,ee):null}return new $a(H,q)}evaluate(b){const I=this.needle.evaluate(b),H=this.haystack.evaluate(b);if(!Ie(I,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${Ii(_r(I))} instead.`);if(!Ie(H,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${Ii(_r(H))} instead.`);if(this.fromIndex){const q=this.fromIndex.evaluate(b);return H.indexOf(I,q)}return H.indexOf(I)}eachChild(b){b(this.needle),b(this.haystack),this.fromIndex&&b(this.fromIndex)}outputDefined(){return!1}}class Co{constructor(b,I,H,q,ee,re){this.inputType=b,this.type=I,this.input=H,this.cases=q,this.outputs=ee,this.otherwise=re}static parse(b,I){if(b.length<5)return I.error(`Expected at least 4 arguments, but found only ${b.length-1}.`);if(b.length%2!=1)return I.error("Expected an even number of arguments.");let H,q;I.expectedType&&I.expectedType.kind!=="value"&&(q=I.expectedType);const ee={},re=[];for(let _e=2;_e<b.length-1;_e+=2){let Ee=b[_e];const Fe=b[_e+1];Array.isArray(Ee)||(Ee=[Ee]);const Le=I.concat(_e);if(Ee.length===0)return Le.error("Expected at least one branch label.");for(const Ve of Ee){if(typeof Ve!="number"&&typeof Ve!="string")return Le.error("Branch labels must be numbers or strings.");if(typeof Ve=="number"&&Math.abs(Ve)>Number.MAX_SAFE_INTEGER)return Le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ve=="number"&&Math.floor(Ve)!==Ve)return Le.error("Numeric branch labels must be integer values.");if(H){if(Le.checkSubtype(H,_r(Ve)))return null}else H=_r(Ve);if(ee[String(Ve)]!==void 0)return Le.error("Branch labels must be unique.");ee[String(Ve)]=re.length}const ze=I.parse(Fe,_e,q);if(!ze)return null;q=q||ze.type,re.push(ze)}const ae=I.parse(b[1],1,mi);if(!ae)return null;const de=I.parse(b[b.length-1],b.length-1,q);return de?ae.type.kind!=="value"&&I.concat(1).checkSubtype(H,ae.type)?null:new Co(H,q,ae,ee,re,de):null}evaluate(b){const I=this.input.evaluate(b);return(_r(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(b)}eachChild(b){b(this.input),this.outputs.forEach(b),b(this.otherwise)}outputDefined(){return this.outputs.every(b=>b.outputDefined())&&this.otherwise.outputDefined()}}class In{constructor(b,I,H){this.type=b,this.branches=I,this.otherwise=H}static parse(b,I){if(b.length<4)return I.error(`Expected at least 3 arguments, but found only ${b.length-1}.`);if(b.length%2!=0)return I.error("Expected an odd number of arguments.");let H;I.expectedType&&I.expectedType.kind!=="value"&&(H=I.expectedType);const q=[];for(let re=1;re<b.length-1;re+=2){const ae=I.parse(b[re],re,Ti);if(!ae)return null;const de=I.parse(b[re+1],re+1,H);if(!de)return null;q.push([ae,de]),H=H||de.type}const ee=I.parse(b[b.length-1],b.length-1,H);if(!ee)return null;if(!H)throw new Error("Can't infer output type");return new In(H,q,ee)}evaluate(b){for(const[I,H]of this.branches)if(I.evaluate(b))return H.evaluate(b);return this.otherwise.evaluate(b)}eachChild(b){for(const[I,H]of this.branches)b(I),b(H);b(this.otherwise)}outputDefined(){return this.branches.every(([b,I])=>I.outputDefined())&&this.otherwise.outputDefined()}}class sa{constructor(b,I,H,q){this.type=b,this.input=I,this.beginIndex=H,this.endIndex=q}static parse(b,I){if(b.length<=2||b.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${b.length-1} instead.`);const H=I.parse(b[1],1,mi),q=I.parse(b[2],2,Ht);if(!H||!q)return null;if(!nt(H.type,[ji(mi),_i,mi]))return I.error(`Expected first argument to be of type array or string, but found ${Ii(H.type)} instead`);if(b.length===4){const ee=I.parse(b[3],3,Ht);return ee?new sa(H.type,H,q,ee):null}return new sa(H.type,H,q)}evaluate(b){const I=this.input.evaluate(b),H=this.beginIndex.evaluate(b);if(!Ie(I,["string","array"]))throw new rr(`Expected first argument to be of type array or string, but found ${Ii(_r(I))} instead.`);if(this.endIndex){const q=this.endIndex.evaluate(b);return I.slice(H,q)}return I.slice(H)}eachChild(b){b(this.input),b(this.beginIndex),this.endIndex&&b(this.endIndex)}outputDefined(){return!1}}function Eo(C,b){return C==="=="||C==="!="?b.kind==="boolean"||b.kind==="string"||b.kind==="number"||b.kind==="null"||b.kind==="value":b.kind==="string"||b.kind==="number"||b.kind==="value"}function To(C,b,I,H){return H.compare(b,I)===0}function na(C,b,I){const H=C!=="=="&&C!=="!=";return class Mh{constructor(ee,re,ae){this.type=Ti,this.lhs=ee,this.rhs=re,this.collator=ae,this.hasUntypedArgument=ee.type.kind==="value"||re.type.kind==="value"}static parse(ee,re){if(ee.length!==3&&ee.length!==4)return re.error("Expected two or three arguments.");const ae=ee[0];let de=re.parse(ee[1],1,mi);if(!de)return null;if(!Eo(ae,de.type))return re.concat(1).error(`"${ae}" comparisons are not supported for type '${Ii(de.type)}'.`);let _e=re.parse(ee[2],2,mi);if(!_e)return null;if(!Eo(ae,_e.type))return re.concat(2).error(`"${ae}" comparisons are not supported for type '${Ii(_e.type)}'.`);if(de.type.kind!==_e.type.kind&&de.type.kind!=="value"&&_e.type.kind!=="value")return re.error(`Cannot compare types '${Ii(de.type)}' and '${Ii(_e.type)}'.`);H&&(de.type.kind==="value"&&_e.type.kind!=="value"?de=new sr(_e.type,[de]):de.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new sr(de.type,[_e])));let Ee=null;if(ee.length===4){if(de.type.kind!=="string"&&_e.type.kind!=="string"&&de.type.kind!=="value"&&_e.type.kind!=="value")return re.error("Cannot use collator to compare non-string types.");if(Ee=re.parse(ee[3],3,wi),!Ee)return null}return new Mh(de,_e,Ee)}evaluate(ee){const re=this.lhs.evaluate(ee),ae=this.rhs.evaluate(ee);if(H&&this.hasUntypedArgument){const de=_r(re),_e=_r(ae);if(de.kind!==_e.kind||de.kind!=="string"&&de.kind!=="number")throw new rr(`Expected arguments for "${C}" to be (string, string) or (number, number), but found (${de.kind}, ${_e.kind}) instead.`)}if(this.collator&&!H&&this.hasUntypedArgument){const de=_r(re),_e=_r(ae);if(de.kind!=="string"||_e.kind!=="string")return b(ee,re,ae)}return this.collator?I(ee,re,ae,this.collator.evaluate(ee)):b(ee,re,ae)}eachChild(ee){ee(this.lhs),ee(this.rhs),this.collator&&ee(this.collator)}outputDefined(){return!0}}}const dl=na("==",function(C,b,I){return b===I},To),Ko=na("!=",function(C,b,I){return b!==I},function(C,b,I,H){return!To(0,b,I,H)}),Go=na("<",function(C,b,I){return b<I},function(C,b,I,H){return H.compare(b,I)<0}),So=na(">",function(C,b,I){return b>I},function(C,b,I,H){return H.compare(b,I)>0}),Wo=na("<=",function(C,b,I){return b<=I},function(C,b,I,H){return H.compare(b,I)<=0}),cn=na(">=",function(C,b,I){return b>=I},function(C,b,I,H){return H.compare(b,I)>=0});class Rn{constructor(b,I,H,q,ee){this.type=_i,this.number=b,this.locale=I,this.currency=H,this.minFractionDigits=q,this.maxFractionDigits=ee}static parse(b,I){if(b.length!==3)return I.error("Expected two arguments.");const H=I.parse(b[1],1,Ht);if(!H)return null;const q=b[2];if(typeof q!="object"||Array.isArray(q))return I.error("NumberFormat options argument must be an object.");let ee=null;if(q.locale&&(ee=I.parse(q.locale,1,_i),!ee))return null;let re=null;if(q.currency&&(re=I.parse(q.currency,1,_i),!re))return null;let ae=null;if(q["min-fraction-digits"]&&(ae=I.parse(q["min-fraction-digits"],1,Ht),!ae))return null;let de=null;return q["max-fraction-digits"]&&(de=I.parse(q["max-fraction-digits"],1,Ht),!de)?null:new Rn(H,ee,re,ae,de)}evaluate(b){return new Intl.NumberFormat(this.locale?this.locale.evaluate(b):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(b):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(b):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(b):void 0}).format(this.number.evaluate(b))}eachChild(b){b(this.number),this.locale&&b(this.locale),this.currency&&b(this.currency),this.minFractionDigits&&b(this.minFractionDigits),this.maxFractionDigits&&b(this.maxFractionDigits)}outputDefined(){return!1}}class Ia{constructor(b){this.type=$i,this.sections=b}static parse(b,I){if(b.length<2)return I.error("Expected at least one argument.");const H=b[1];if(!Array.isArray(H)&&typeof H=="object")return I.error("First argument must be an image or text section.");const q=[];let ee=!1;for(let re=1;re<=b.length-1;++re){const ae=b[re];if(ee&&typeof ae=="object"&&!Array.isArray(ae)){ee=!1;let de=null;if(ae["font-scale"]&&(de=I.parse(ae["font-scale"],1,Ht),!de))return null;let _e=null;if(ae["text-font"]&&(_e=I.parse(ae["text-font"],1,ji(_i)),!_e))return null;let Ee=null;if(ae["text-color"]&&(Ee=I.parse(ae["text-color"],1,Wi),!Ee))return null;const Fe=q[q.length-1];Fe.scale=de,Fe.font=_e,Fe.textColor=Ee}else{const de=I.parse(b[re],1,mi);if(!de)return null;const _e=de.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ee=!0,q.push({content:de,scale:null,font:null,textColor:null})}}return new Ia(q)}evaluate(b){return new Zi(this.sections.map(I=>{const H=I.content.evaluate(b);return _r(H)===Ar?new Pr("",H,null,null,null):new Pr(Br(H),null,I.scale?I.scale.evaluate(b):null,I.font?I.font.evaluate(b).join(","):null,I.textColor?I.textColor.evaluate(b):null)}))}eachChild(b){for(const I of this.sections)b(I.content),I.scale&&b(I.scale),I.font&&b(I.font),I.textColor&&b(I.textColor)}outputDefined(){return!1}}class eo{constructor(b){this.type=Ar,this.input=b}static parse(b,I){if(b.length!==2)return I.error("Expected two arguments.");const H=I.parse(b[1],1,_i);return H?new eo(H):I.error("No image name provided.")}evaluate(b){const I=this.input.evaluate(b),H=Lt.fromString(I);return H&&b.availableImages&&(H.available=b.availableImages.indexOf(I)>-1),H}eachChild(b){b(this.input)}outputDefined(){return!1}}class Fa{constructor(b){this.type=Ht,this.input=b}static parse(b,I){if(b.length!==2)return I.error(`Expected 1 argument, but found ${b.length-1} instead.`);const H=I.parse(b[1],1);return H?H.type.kind!=="array"&&H.type.kind!=="string"&&H.type.kind!=="value"?I.error(`Expected argument of type string or array, but found ${Ii(H.type)} instead.`):new Fa(H):null}evaluate(b){const I=this.input.evaluate(b);if(typeof I=="string"||Array.isArray(I))return I.length;throw new rr(`Expected value to be of type string or array, but found ${Ii(_r(I))} instead.`)}eachChild(b){b(this.input)}outputDefined(){return!1}}const gn={"==":dl,"!=":Ko,">":So,"<":Go,">=":cn,"<=":Wo,array:sr,at:Sn,boolean:sr,case:In,coalesce:Sa,collator:ys,format:Ia,image:eo,in:pr,"index-of":$a,interpolate:gs,"interpolate-hcl":gs,"interpolate-lab":gs,length:Fa,let:ra,literal:Cr,match:Co,number:sr,"number-format":Rn,object:sr,slice:sa,step:Ta,string:sr,"to-boolean":ss,"to-color":ss,"to-number":ss,"to-string":ss,var:er,within:br};function aa(C,[b,I,H,q]){b=b.evaluate(C),I=I.evaluate(C),H=H.evaluate(C);const ee=q?q.evaluate(C):1,re=Yr(b,I,H,ee);if(re)throw new rr(re);return new bi(b/255,I/255,H/255,ee,!1)}function Ds(C,b){return C in b}function oa(C,b){const I=b[C];return I===void 0?null:I}function hn(C){return{type:C}}function Rs(C){return{result:"success",value:C}}function la(C){return{result:"error",value:C}}function Hn(C){return C["property-type"]==="data-driven"||C["property-type"]==="cross-faded-data-driven"}function to(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function io(C){return!!C.expression&&C.expression.interpolated}function gr(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":C===null?"null":typeof C}function Js(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function pl(C){return C}function qo(C,b){const I=b.type==="color",H=C.stops&&typeof C.stops[0][0]=="object",q=H||!(H||C.property!==void 0),ee=C.type||(io(b)?"exponential":"interval");if(I||b.type==="padding"){const Ee=I?bi.parse:pi.parse;(C=di({},C)).stops&&(C.stops=C.stops.map(Fe=>[Fe[0],Ee(Fe[1])])),C.default=Ee(C.default?C.default:b.default)}if(C.colorSpace&&(re=C.colorSpace)!=="rgb"&&re!=="hcl"&&re!=="lab")throw new Error(`Unknown color space: "${C.colorSpace}"`);var re;let ae,de,_e;if(ee==="exponential")ae=Hs;else if(ee==="interval")ae=Xo;else if(ee==="categorical"){ae=Io,de=Object.create(null);for(const Ee of C.stops)de[Ee[0]]=Ee[1];_e=typeof C.stops[0][0]}else{if(ee!=="identity")throw new Error(`Unknown function type "${ee}"`);ae=ka}if(H){const Ee={},Fe=[];for(let Ve=0;Ve<C.stops.length;Ve++){const st=C.stops[Ve],lt=st[0].zoom;Ee[lt]===void 0&&(Ee[lt]={zoom:lt,type:C.type,property:C.property,default:C.default,stops:[]},Fe.push(lt)),Ee[lt].stops.push([st[0].value,st[1]])}const Le=[];for(const Ve of Fe)Le.push([Ee[Ve].zoom,qo(Ee[Ve],b)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:gs.interpolationFactor.bind(void 0,ze),zoomStops:Le.map(Ve=>Ve[0]),evaluate:({zoom:Ve},st)=>Hs({stops:Le,base:C.base},b,Ve).evaluate(Ve,st)}}if(q){const Ee=ee==="exponential"?{name:"exponential",base:C.base!==void 0?C.base:1}:null;return{kind:"camera",interpolationType:Ee,interpolationFactor:gs.interpolationFactor.bind(void 0,Ee),zoomStops:C.stops.map(Fe=>Fe[0]),evaluate:({zoom:Fe})=>ae(C,b,Fe,de,_e)}}return{kind:"source",evaluate(Ee,Fe){const Le=Fe&&Fe.properties?Fe.properties[C.property]:void 0;return Le===void 0?mn(C.default,b.default):ae(C,b,Le,de,_e)}}}function mn(C,b,I){return C!==void 0?C:b!==void 0?b:I!==void 0?I:void 0}function Io(C,b,I,H,q){return mn(typeof I===q?H[I]:void 0,C.default,b.default)}function Xo(C,b,I){if(gr(I)!=="number")return mn(C.default,b.default);const H=C.stops.length;if(H===1||I<=C.stops[0][0])return C.stops[0][1];if(I>=C.stops[H-1][0])return C.stops[H-1][1];const q=Ea(C.stops.map(ee=>ee[0]),I);return C.stops[q][1]}function Hs(C,b,I){const H=C.base!==void 0?C.base:1;if(gr(I)!=="number")return mn(C.default,b.default);const q=C.stops.length;if(q===1||I<=C.stops[0][0])return C.stops[0][1];if(I>=C.stops[q-1][0])return C.stops[q-1][1];const ee=Ea(C.stops.map(Ee=>Ee[0]),I),re=function(Ee,Fe,Le,ze){const Ve=ze-Le,st=Ee-Le;return Ve===0?0:Fe===1?st/Ve:(Math.pow(Fe,st)-1)/(Math.pow(Fe,Ve)-1)}(I,H,C.stops[ee][0],C.stops[ee+1][0]),ae=C.stops[ee][1],de=C.stops[ee+1][1],_e=ks[b.type]||pl;return typeof ae.evaluate=="function"?{evaluate(...Ee){const Fe=ae.evaluate.apply(void 0,Ee),Le=de.evaluate.apply(void 0,Ee);if(Fe!==void 0&&Le!==void 0)return _e(Fe,Le,re,C.colorSpace)}}:_e(ae,de,re,C.colorSpace)}function ka(C,b,I){switch(b.type){case"color":I=bi.parse(I);break;case"formatted":I=Zi.fromString(I.toString());break;case"resolvedImage":I=Lt.fromString(I.toString());break;case"padding":I=pi.parse(I);break;default:gr(I)===b.type||b.type==="enum"&&b.values[I]||(I=void 0)}return mn(I,C.default,b.default)}As.register(gn,{error:[{kind:"error"},[_i],(C,[b])=>{throw new rr(b.evaluate(C))}],typeof:[_i,[mi],(C,[b])=>Ii(_r(b.evaluate(C)))],"to-rgba":[ji(Ht,4),[Wi],(C,[b])=>{const[I,H,q,ee]=b.evaluate(C).rgb;return[255*I,255*H,255*q,ee]}],rgb:[Wi,[Ht,Ht,Ht],aa],rgba:[Wi,[Ht,Ht,Ht,Ht],aa],has:{type:Ti,overloads:[[[_i],(C,[b])=>Ds(b.evaluate(C),C.properties())],[[_i,Zt],(C,[b,I])=>Ds(b.evaluate(C),I.evaluate(C))]]},get:{type:mi,overloads:[[[_i],(C,[b])=>oa(b.evaluate(C),C.properties())],[[_i,Zt],(C,[b,I])=>oa(b.evaluate(C),I.evaluate(C))]]},"feature-state":[mi,[_i],(C,[b])=>oa(b.evaluate(C),C.featureState||{})],properties:[Zt,[],C=>C.properties()],"geometry-type":[_i,[],C=>C.geometryType()],id:[mi,[],C=>C.id()],zoom:[Ht,[],C=>C.globals.zoom],"heatmap-density":[Ht,[],C=>C.globals.heatmapDensity||0],"line-progress":[Ht,[],C=>C.globals.lineProgress||0],accumulated:[mi,[],C=>C.globals.accumulated===void 0?null:C.globals.accumulated],"+":[Ht,hn(Ht),(C,b)=>{let I=0;for(const H of b)I+=H.evaluate(C);return I}],"*":[Ht,hn(Ht),(C,b)=>{let I=1;for(const H of b)I*=H.evaluate(C);return I}],"-":{type:Ht,overloads:[[[Ht,Ht],(C,[b,I])=>b.evaluate(C)-I.evaluate(C)],[[Ht],(C,[b])=>-b.evaluate(C)]]},"/":[Ht,[Ht,Ht],(C,[b,I])=>b.evaluate(C)/I.evaluate(C)],"%":[Ht,[Ht,Ht],(C,[b,I])=>b.evaluate(C)%I.evaluate(C)],ln2:[Ht,[],()=>Math.LN2],pi:[Ht,[],()=>Math.PI],e:[Ht,[],()=>Math.E],"^":[Ht,[Ht,Ht],(C,[b,I])=>Math.pow(b.evaluate(C),I.evaluate(C))],sqrt:[Ht,[Ht],(C,[b])=>Math.sqrt(b.evaluate(C))],log10:[Ht,[Ht],(C,[b])=>Math.log(b.evaluate(C))/Math.LN10],ln:[Ht,[Ht],(C,[b])=>Math.log(b.evaluate(C))],log2:[Ht,[Ht],(C,[b])=>Math.log(b.evaluate(C))/Math.LN2],sin:[Ht,[Ht],(C,[b])=>Math.sin(b.evaluate(C))],cos:[Ht,[Ht],(C,[b])=>Math.cos(b.evaluate(C))],tan:[Ht,[Ht],(C,[b])=>Math.tan(b.evaluate(C))],asin:[Ht,[Ht],(C,[b])=>Math.asin(b.evaluate(C))],acos:[Ht,[Ht],(C,[b])=>Math.acos(b.evaluate(C))],atan:[Ht,[Ht],(C,[b])=>Math.atan(b.evaluate(C))],min:[Ht,hn(Ht),(C,b)=>Math.min(...b.map(I=>I.evaluate(C)))],max:[Ht,hn(Ht),(C,b)=>Math.max(...b.map(I=>I.evaluate(C)))],abs:[Ht,[Ht],(C,[b])=>Math.abs(b.evaluate(C))],round:[Ht,[Ht],(C,[b])=>{const I=b.evaluate(C);return I<0?-Math.round(-I):Math.round(I)}],floor:[Ht,[Ht],(C,[b])=>Math.floor(b.evaluate(C))],ceil:[Ht,[Ht],(C,[b])=>Math.ceil(b.evaluate(C))],"filter-==":[Ti,[_i,mi],(C,[b,I])=>C.properties()[b.value]===I.value],"filter-id-==":[Ti,[mi],(C,[b])=>C.id()===b.value],"filter-type-==":[Ti,[_i],(C,[b])=>C.geometryType()===b.value],"filter-<":[Ti,[_i,mi],(C,[b,I])=>{const H=C.properties()[b.value],q=I.value;return typeof H==typeof q&&H<q}],"filter-id-<":[Ti,[mi],(C,[b])=>{const I=C.id(),H=b.value;return typeof I==typeof H&&I<H}],"filter->":[Ti,[_i,mi],(C,[b,I])=>{const H=C.properties()[b.value],q=I.value;return typeof H==typeof q&&H>q}],"filter-id->":[Ti,[mi],(C,[b])=>{const I=C.id(),H=b.value;return typeof I==typeof H&&I>H}],"filter-<=":[Ti,[_i,mi],(C,[b,I])=>{const H=C.properties()[b.value],q=I.value;return typeof H==typeof q&&H<=q}],"filter-id-<=":[Ti,[mi],(C,[b])=>{const I=C.id(),H=b.value;return typeof I==typeof H&&I<=H}],"filter->=":[Ti,[_i,mi],(C,[b,I])=>{const H=C.properties()[b.value],q=I.value;return typeof H==typeof q&&H>=q}],"filter-id->=":[Ti,[mi],(C,[b])=>{const I=C.id(),H=b.value;return typeof I==typeof H&&I>=H}],"filter-has":[Ti,[mi],(C,[b])=>b.value in C.properties()],"filter-has-id":[Ti,[],C=>C.id()!==null&&C.id()!==void 0],"filter-type-in":[Ti,[ji(_i)],(C,[b])=>b.value.indexOf(C.geometryType())>=0],"filter-id-in":[Ti,[ji(mi)],(C,[b])=>b.value.indexOf(C.id())>=0],"filter-in-small":[Ti,[_i,ji(mi)],(C,[b,I])=>I.value.indexOf(C.properties()[b.value])>=0],"filter-in-large":[Ti,[_i,ji(mi)],(C,[b,I])=>function(H,q,ee,re){for(;ee<=re;){const ae=ee+re>>1;if(q[ae]===H)return!0;q[ae]>H?re=ae-1:ee=ae+1}return!1}(C.properties()[b.value],I.value,0,I.value.length-1)],all:{type:Ti,overloads:[[[Ti,Ti],(C,[b,I])=>b.evaluate(C)&&I.evaluate(C)],[hn(Ti),(C,b)=>{for(const I of b)if(!I.evaluate(C))return!1;return!0}]]},any:{type:Ti,overloads:[[[Ti,Ti],(C,[b,I])=>b.evaluate(C)||I.evaluate(C)],[hn(Ti),(C,b)=>{for(const I of b)if(I.evaluate(C))return!0;return!1}]]},"!":[Ti,[Ti],(C,[b])=>!b.evaluate(C)],"is-supported-script":[Ti,[_i],(C,[b])=>{const I=C.globals&&C.globals.isSupportedScript;return!I||I(b.evaluate(C))}],upcase:[_i,[_i],(C,[b])=>b.evaluate(C).toUpperCase()],downcase:[_i,[_i],(C,[b])=>b.evaluate(C).toLowerCase()],concat:[_i,hn(mi),(C,b)=>b.map(I=>Br(I.evaluate(C))).join("")],"resolved-locale":[_i,[wi],(C,[b])=>b.evaluate(C).resolvedLocale()]});class Ur{constructor(b,I){var H;this.expression=b,this._warningHistory={},this._evaluator=new cr,this._defaultValue=I?(H=I).type==="color"&&Js(H.default)?new bi(0,0,0,0):H.type==="color"?bi.parse(H.default)||null:H.type==="padding"?pi.parse(H.default)||null:H.type==="variableAnchorOffsetCollection"?dr.parse(H.default)||null:H.default===void 0?null:H.default:null,this._enumValues=I&&I.type==="enum"?I.values:null}evaluateWithoutErrorHandling(b,I,H,q,ee,re){return this._evaluator.globals=b,this._evaluator.feature=I,this._evaluator.featureState=H,this._evaluator.canonical=q,this._evaluator.availableImages=ee||null,this._evaluator.formattedSection=re,this.expression.evaluate(this._evaluator)}evaluate(b,I,H,q,ee,re){this._evaluator.globals=b,this._evaluator.feature=I||null,this._evaluator.featureState=H||null,this._evaluator.canonical=q,this._evaluator.availableImages=ee||null,this._evaluator.formattedSection=re||null;try{const ae=this.expression.evaluate(this._evaluator);if(ae==null||typeof ae=="number"&&ae!=ae)return this._defaultValue;if(this._enumValues&&!(ae in this._enumValues))throw new rr(`Expected value to be one of ${Object.keys(this._enumValues).map(de=>JSON.stringify(de)).join(", ")}, but found ${JSON.stringify(ae)} instead.`);return ae}catch(ae){return this._warningHistory[ae.message]||(this._warningHistory[ae.message]=!0,typeof console<"u"&&console.warn(ae.message)),this._defaultValue}}}function $s(C){return Array.isArray(C)&&C.length>0&&typeof C[0]=="string"&&C[0]in gn}function Ji(C,b){const I=new js(gn,ia,[],b?function(q){const ee={color:Wi,string:_i,number:Ht,enum:_i,boolean:Ti,formatted:$i,padding:tr,resolvedImage:Ar,variableAnchorOffsetCollection:Tr};return q.type==="array"?ji(ee[q.value]||mi,q.length):ee[q.type]}(b):void 0),H=I.parse(C,void 0,void 0,void 0,b&&b.type==="string"?{typeAnnotation:"coerce"}:void 0);return H?Rs(new Ur(H,b)):la(I.errors)}class yr{constructor(b,I){this.kind=b,this._styleExpression=I,this.isStateDependent=b!=="constant"&&!Ba(I.expression)}evaluateWithoutErrorHandling(b,I,H,q,ee,re){return this._styleExpression.evaluateWithoutErrorHandling(b,I,H,q,ee,re)}evaluate(b,I,H,q,ee,re){return this._styleExpression.evaluate(b,I,H,q,ee,re)}}class Fr{constructor(b,I,H,q){this.kind=b,this.zoomStops=H,this._styleExpression=I,this.isStateDependent=b!=="camera"&&!Ba(I.expression),this.interpolationType=q}evaluateWithoutErrorHandling(b,I,H,q,ee,re){return this._styleExpression.evaluateWithoutErrorHandling(b,I,H,q,ee,re)}evaluate(b,I,H,q,ee,re){return this._styleExpression.evaluate(b,I,H,q,ee,re)}interpolationFactor(b,I,H){return this.interpolationType?gs.interpolationFactor(this.interpolationType,b,I,H):0}}function Mr(C,b){const I=Ji(C,b);if(I.result==="error")return I;const H=I.value.expression,q=xa(H);if(!q&&!Hn(b))return la([new ii("","data expressions not supported")]);const ee=Ca(H,["zoom"]);if(!ee&&!to(b))return la([new ii("","zoom expressions not supported")]);const re=Da(H);return re||ee?re instanceof ii?la([re]):re instanceof gs&&!io(b)?la([new ii("",'"interpolate" expressions cannot be used with this property')]):Rs(re?new Fr(q?"camera":"composite",I.value,re.labels,re instanceof gs?re.interpolation:void 0):new yr(q?"constant":"source",I.value)):la([new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class zn{constructor(b,I){this._parameters=b,this._specification=I,di(this,qo(this._parameters,this._specification))}static deserialize(b){return new zn(b._parameters,b._specification)}static serialize(b){return{_parameters:b._parameters,_specification:b._specification}}}function Da(C){let b=null;if(C instanceof ra)b=Da(C.result);else if(C instanceof Sa){for(const I of C.args)if(b=Da(I),b)break}else(C instanceof Ta||C instanceof gs)&&C.input instanceof As&&C.input.name==="zoom"&&(b=C);return b instanceof ii||C.eachChild(I=>{const H=Da(I);H instanceof ii?b=H:!b&&H?b=new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):b&&H&&b!==H&&(b=new ii("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),b}function ro(C){if(C===!0||C===!1)return!0;if(!Array.isArray(C)||C.length===0)return!1;switch(C[0]){case"has":return C.length>=2&&C[1]!=="$id"&&C[1]!=="$type";case"in":return C.length>=3&&(typeof C[1]!="string"||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return C.length!==3||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(const b of C.slice(1))if(!ro(b)&&typeof b!="boolean")return!1;return!0;default:return!0}}const gl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fo(C){if(C==null)return{filter:()=>!0,needGeometry:!1};ro(C)||(C=Ua(C));const b=Ji(C,gl);if(b.result==="error")throw new Error(b.value.map(I=>`${I.key}: ${I.message}`).join(", "));return{filter:(I,H,q)=>b.value.evaluate(I,H,{},q),needGeometry:no(C)}}function so(C,b){return C<b?-1:C>b?1:0}function no(C){if(!Array.isArray(C))return!1;if(C[0]==="within")return!0;for(let b=1;b<C.length;b++)if(no(C[b]))return!0;return!1}function Ua(C){if(!C)return!0;const b=C[0];return C.length<=1?b!=="any":b==="=="?ao(C[1],C[2],"=="):b==="!="?Nn(ao(C[1],C[2],"==")):b==="<"||b===">"||b==="<="||b===">="?ao(C[1],C[2],b):b==="any"?(I=C.slice(1),["any"].concat(I.map(Ua))):b==="all"?["all"].concat(C.slice(1).map(Ua)):b==="none"?["all"].concat(C.slice(1).map(Ua).map(Nn)):b==="in"?oo(C[1],C.slice(2)):b==="!in"?Nn(oo(C[1],C.slice(2))):b==="has"?Ma(C[1]):b==="!has"?Nn(Ma(C[1])):b!=="within"||C;var I}function ao(C,b,I){switch(C){case"$type":return[`filter-type-${I}`,b];case"$id":return[`filter-id-${I}`,b];default:return[`filter-${I}`,C,b]}}function oo(C,b){if(b.length===0)return!1;switch(C){case"$type":return["filter-type-in",["literal",b]];case"$id":return["filter-id-in",["literal",b]];default:return b.length>200&&!b.some(I=>typeof I!=typeof b[0])?["filter-in-large",C,["literal",b.sort(so)]]:["filter-in-small",C,["literal",b]]}}function Ma(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function Nn(C){return["!",C]}function Pa(C){const b=typeof C;if(b==="number"||b==="boolean"||b==="string"||C==null)return JSON.stringify(C);if(Array.isArray(C)){let q="[";for(const ee of C)q+=`${Pa(ee)},`;return`${q}]`}const I=Object.keys(C).sort();let H="{";for(let q=0;q<I.length;q++)H+=`${JSON.stringify(I[q])}:${Pa(C[I[q]])},`;return`${H}}`}function ml(C){let b="";for(const I of De)b+=`/${Pa(C[I])}`;return b}function Yo(C){const b=C.value;return b?[new Bt(C.key,b,"constants have been deprecated as of v8")]:[]}function Wr(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function Vn(C){if(Array.isArray(C))return C.map(Vn);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){const b={};for(const I in C)b[I]=Vn(C[I]);return b}return Wr(C)}function Us(C){const b=C.key,I=C.value,H=C.valueSpec||{},q=C.objectElementValidators||{},ee=C.style,re=C.styleSpec,ae=C.validateSpec;let de=[];const _e=gr(I);if(_e!=="object")return[new Bt(b,I,`object expected, ${_e} found`)];for(const Ee in I){const Fe=Ee.split(".")[0],Le=H[Fe]||H["*"];let ze;if(q[Fe])ze=q[Fe];else if(H[Fe])ze=ae;else if(q["*"])ze=q["*"];else{if(!H["*"]){de.push(new Bt(b,I[Ee],`unknown property "${Ee}"`));continue}ze=ae}de=de.concat(ze({key:(b&&`${b}.`)+Ee,value:I[Ee],valueSpec:Le,style:ee,styleSpec:re,object:I,objectKey:Ee,validateSpec:ae},I))}for(const Ee in H)q[Ee]||H[Ee].required&&H[Ee].default===void 0&&I[Ee]===void 0&&de.push(new Bt(b,I,`missing required property "${Ee}"`));return de}function ko(C){const b=C.value,I=C.valueSpec,H=C.style,q=C.styleSpec,ee=C.key,re=C.arrayElementValidator||C.validateSpec;if(gr(b)!=="array")return[new Bt(ee,b,`array expected, ${gr(b)} found`)];if(I.length&&b.length!==I.length)return[new Bt(ee,b,`array length ${I.length} expected, length ${b.length} found`)];if(I["min-length"]&&b.length<I["min-length"])return[new Bt(ee,b,`array length at least ${I["min-length"]} expected, length ${b.length} found`)];let ae={type:I.value,values:I.values};q.$version<7&&(ae.function=I.function),gr(I.value)==="object"&&(ae=I.value);let de=[];for(let _e=0;_e<b.length;_e++)de=de.concat(re({array:b,arrayIndex:_e,value:b[_e],valueSpec:ae,validateSpec:C.validateSpec,style:H,styleSpec:q,key:`${ee}[${_e}]`}));return de}function Aa(C){const b=C.key,I=C.value,H=C.valueSpec;let q=gr(I);return q==="number"&&I!=I&&(q="NaN"),q!=="number"?[new Bt(b,I,`number expected, ${q} found`)]:"minimum"in H&&I<H.minimum?[new Bt(b,I,`${I} is less than the minimum value ${H.minimum}`)]:"maximum"in H&&I>H.maximum?[new Bt(b,I,`${I} is greater than the maximum value ${H.maximum}`)]:[]}function Do(C){const b=C.valueSpec,I=Wr(C.value.type);let H,q,ee,re={};const ae=I!=="categorical"&&C.value.property===void 0,de=!ae,_e=gr(C.value.stops)==="array"&&gr(C.value.stops[0])==="array"&&gr(C.value.stops[0][0])==="object",Ee=Us({key:C.key,value:C.value,valueSpec:C.styleSpec.function,validateSpec:C.validateSpec,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:function(ze){if(I==="identity")return[new Bt(ze.key,ze.value,'identity function may not have a "stops" property')];let Ve=[];const st=ze.value;return Ve=Ve.concat(ko({key:ze.key,value:st,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:Fe})),gr(st)==="array"&&st.length===0&&Ve.push(new Bt(ze.key,st,"array must have at least one stop")),Ve},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:b,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return I==="identity"&&ae&&Ee.push(new Bt(C.key,C.value,'missing required property "property"')),I==="identity"||C.value.stops||Ee.push(new Bt(C.key,C.value,'missing required property "stops"')),I==="exponential"&&C.valueSpec.expression&&!io(C.valueSpec)&&Ee.push(new Bt(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(de&&!Hn(C.valueSpec)?Ee.push(new Bt(C.key,C.value,"property functions not supported")):ae&&!to(C.valueSpec)&&Ee.push(new Bt(C.key,C.value,"zoom functions not supported"))),I!=="categorical"&&!_e||C.value.property!==void 0||Ee.push(new Bt(C.key,C.value,'"property" property is required')),Ee;function Fe(ze){let Ve=[];const st=ze.value,lt=ze.key;if(gr(st)!=="array")return[new Bt(lt,st,`array expected, ${gr(st)} found`)];if(st.length!==2)return[new Bt(lt,st,`array length 2 expected, length ${st.length} found`)];if(_e){if(gr(st[0])!=="object")return[new Bt(lt,st,`object expected, ${gr(st[0])} found`)];if(st[0].zoom===void 0)return[new Bt(lt,st,"object stop key must have zoom")];if(st[0].value===void 0)return[new Bt(lt,st,"object stop key must have value")];if(ee&&ee>Wr(st[0].zoom))return[new Bt(lt,st[0].zoom,"stop zoom values must appear in ascending order")];Wr(st[0].zoom)!==ee&&(ee=Wr(st[0].zoom),q=void 0,re={}),Ve=Ve.concat(Us({key:`${lt}[0]`,value:st[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:Aa,value:Le}}))}else Ve=Ve.concat(Le({key:`${lt}[0]`,value:st[0],validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},st));return $s(Vn(st[1]))?Ve.concat([new Bt(`${lt}[1]`,st[1],"expressions are not allowed in function stops.")]):Ve.concat(ze.validateSpec({key:`${lt}[1]`,value:st[1],valueSpec:b,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Le(ze,Ve){const st=gr(ze.value),lt=Wr(ze.value),ht=ze.value!==null?ze.value:Ve;if(H){if(st!==H)return[new Bt(ze.key,ht,`${st} stop domain type must match previous stop domain type ${H}`)]}else H=st;if(st!=="number"&&st!=="string"&&st!=="boolean")return[new Bt(ze.key,ht,"stop domain value must be a number, string, or boolean")];if(st!=="number"&&I!=="categorical"){let yt=`number expected, ${st} found`;return Hn(b)&&I===void 0&&(yt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt(ze.key,ht,yt)]}return I!=="categorical"||st!=="number"||isFinite(lt)&&Math.floor(lt)===lt?I!=="categorical"&&st==="number"&&q!==void 0&&lt<q?[new Bt(ze.key,ht,"stop domain values must appear in ascending order")]:(q=lt,I==="categorical"&&lt in re?[new Bt(ze.key,ht,"stop domain values must be unique")]:(re[lt]=!0,[])):[new Bt(ze.key,ht,`integer expected, found ${lt}`)]}}function en(C){const b=(C.expressionContext==="property"?Mr:Ji)(Vn(C.value),C.valueSpec);if(b.result==="error")return b.value.map(H=>new Bt(`${C.key}${H.key}`,C.value,H.message));const I=b.value.expression||b.value._styleExpression.expression;if(C.expressionContext==="property"&&C.propertyKey==="text-font"&&!I.outputDefined())return[new Bt(C.key,C.value,`Invalid data expression for "${C.propertyKey}". Output values must be contained as literals within the expression.`)];if(C.expressionContext==="property"&&C.propertyType==="layout"&&!Ba(I))return[new Bt(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if(C.expressionContext==="filter"&&!Ba(I))return[new Bt(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&C.expressionContext.indexOf("cluster")===0){if(!Ca(I,["zoom","feature-state"]))return[new Bt(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(C.expressionContext==="cluster-initial"&&!xa(I))return[new Bt(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xs(C){const b=C.key,I=C.value,H=C.valueSpec,q=[];return Array.isArray(H.values)?H.values.indexOf(Wr(I))===-1&&q.push(new Bt(b,I,`expected one of [${H.values.join(", ")}], ${JSON.stringify(I)} found`)):Object.keys(H.values).indexOf(Wr(I))===-1&&q.push(new Bt(b,I,`expected one of [${Object.keys(H.values).join(", ")}], ${JSON.stringify(I)} found`)),q}function Kn(C){return ro(Vn(C.value))?en(di({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):jo(C)}function jo(C){const b=C.value,I=C.key;if(gr(b)!=="array")return[new Bt(I,b,`array expected, ${gr(b)} found`)];const H=C.styleSpec;let q,ee=[];if(b.length<1)return[new Bt(I,b,"filter array must have at least 1 element")];switch(ee=ee.concat(xs({key:`${I}[0]`,value:b[0],valueSpec:H.filter_operator,style:C.style,styleSpec:C.styleSpec})),Wr(b[0])){case"<":case"<=":case">":case">=":b.length>=2&&Wr(b[1])==="$type"&&ee.push(new Bt(I,b,`"$type" cannot be use with operator "${b[0]}"`));case"==":case"!=":b.length!==3&&ee.push(new Bt(I,b,`filter array for operator "${b[0]}" must have 3 elements`));case"in":case"!in":b.length>=2&&(q=gr(b[1]),q!=="string"&&ee.push(new Bt(`${I}[1]`,b[1],`string expected, ${q} found`)));for(let re=2;re<b.length;re++)q=gr(b[re]),Wr(b[1])==="$type"?ee=ee.concat(xs({key:`${I}[${re}]`,value:b[re],valueSpec:H.geometry_type,style:C.style,styleSpec:C.styleSpec})):q!=="string"&&q!=="number"&&q!=="boolean"&&ee.push(new Bt(`${I}[${re}]`,b[re],`string, number, or boolean expected, ${q} found`));break;case"any":case"all":case"none":for(let re=1;re<b.length;re++)ee=ee.concat(jo({key:`${I}[${re}]`,value:b[re],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":q=gr(b[1]),b.length!==2?ee.push(new Bt(I,b,`filter array for "${b[0]}" operator must have 2 elements`)):q!=="string"&&ee.push(new Bt(`${I}[1]`,b[1],`string expected, ${q} found`));break;case"within":q=gr(b[1]),b.length!==2?ee.push(new Bt(I,b,`filter array for "${b[0]}" operator must have 2 elements`)):q!=="object"&&ee.push(new Bt(`${I}[1]`,b[1],`object expected, ${q} found`))}return ee}function ca(C,b){const I=C.key,H=C.validateSpec,q=C.style,ee=C.styleSpec,re=C.value,ae=C.objectKey,de=ee[`${b}_${C.layerType}`];if(!de)return[];const _e=ae.match(/^(.*)-transition$/);if(b==="paint"&&_e&&de[_e[1]]&&de[_e[1]].transition)return H({key:I,value:re,valueSpec:ee.transition,style:q,styleSpec:ee});const Ee=C.valueSpec||de[ae];if(!Ee)return[new Bt(I,re,`unknown property "${ae}"`)];let Fe;if(gr(re)==="string"&&Hn(Ee)&&!Ee.tokens&&(Fe=/^{([^}]+)}$/.exec(re)))return[new Bt(I,re,`"${ae}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Fe[1])} }\`.`)];const Le=[];return C.layerType==="symbol"&&(ae==="text-field"&&q&&!q.glyphs&&Le.push(new Bt(I,re,'use of "text-field" requires a style "glyphs" property')),ae==="text-font"&&Js(Vn(re))&&Wr(re.type)==="identity"&&Le.push(new Bt(I,re,'"text-font" does not support identity functions'))),Le.concat(H({key:C.key,value:re,valueSpec:Ee,style:q,styleSpec:ee,expressionContext:"property",propertyType:b,propertyKey:ae}))}function ha(C){return ca(C,"paint")}function _n(C){return ca(C,"layout")}function Bs(C){let b=[];const I=C.value,H=C.key,q=C.style,ee=C.styleSpec;I.type||I.ref||b.push(new Bt(H,I,'either "type" or "ref" is required'));let re=Wr(I.type);const ae=Wr(I.ref);if(I.id){const de=Wr(I.id);for(let _e=0;_e<C.arrayIndex;_e++){const Ee=q.layers[_e];Wr(Ee.id)===de&&b.push(new Bt(H,I.id,`duplicate layer id "${I.id}", previously used at line ${Ee.id.__line__}`))}}if("ref"in I){let de;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in I&&b.push(new Bt(H,I[_e],`"${_e}" is prohibited for ref layers`))}),q.layers.forEach(_e=>{Wr(_e.id)===ae&&(de=_e)}),de?de.ref?b.push(new Bt(H,I.ref,"ref cannot reference another ref layer")):re=Wr(de.type):b.push(new Bt(H,I.ref,`ref layer "${ae}" not found`))}else if(re!=="background")if(I.source){const de=q.sources&&q.sources[I.source],_e=de&&Wr(de.type);de?_e==="vector"&&re==="raster"?b.push(new Bt(H,I.source,`layer "${I.id}" requires a raster source`)):_e==="raster"&&re!=="raster"?b.push(new Bt(H,I.source,`layer "${I.id}" requires a vector source`)):_e!=="vector"||I["source-layer"]?_e==="raster-dem"&&re!=="hillshade"?b.push(new Bt(H,I.source,"raster-dem source can only be used with layer type 'hillshade'.")):re!=="line"||!I.paint||!I.paint["line-gradient"]||_e==="geojson"&&de.lineMetrics||b.push(new Bt(H,I,`layer "${I.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):b.push(new Bt(H,I,`layer "${I.id}" must specify a "source-layer"`)):b.push(new Bt(H,I.source,`source "${I.source}" not found`))}else b.push(new Bt(H,I,'missing required property "source"'));return b=b.concat(Us({key:H,value:I,valueSpec:ee.layer,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":()=>[],type:()=>C.validateSpec({key:`${H}.type`,value:I.type,valueSpec:ee.layer.type,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,object:I,objectKey:"type"}),filter:Kn,layout:de=>Us({layer:I,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,validateSpec:de.validateSpec,objectElementValidators:{"*":_e=>_n(di({layerType:re},_e))}}),paint:de=>Us({layer:I,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,validateSpec:de.validateSpec,objectElementValidators:{"*":_e=>ha(di({layerType:re},_e))}})}})),b}function yn(C){const b=C.value,I=C.key,H=gr(b);return H!=="string"?[new Bt(I,b,`string expected, ${H} found`)]:[]}const Uo={promoteId:function({key:C,value:b}){if(gr(b)==="string")return yn({key:C,value:b});{const I=[];for(const H in b)I.push(...yn({key:`${C}.${H}`,value:b[H]}));return I}}};function Gn(C){const b=C.value,I=C.key,H=C.styleSpec,q=C.style,ee=C.validateSpec;if(!b.type)return[new Bt(I,b,'"type" is required')];const re=Wr(b.type);let ae;switch(re){case"vector":case"raster":case"raster-dem":return ae=Us({key:I,value:b,valueSpec:H[`source_${re.replace("-","_")}`],style:C.style,styleSpec:H,objectElementValidators:Uo,validateSpec:ee}),ae;case"geojson":if(ae=Us({key:I,value:b,valueSpec:H.source_geojson,style:q,styleSpec:H,validateSpec:ee,objectElementValidators:Uo}),b.cluster)for(const de in b.clusterProperties){const[_e,Ee]=b.clusterProperties[de],Fe=typeof _e=="string"?[_e,["accumulated"],["get",de]]:_e;ae.push(...en({key:`${I}.${de}.map`,value:Ee,expressionContext:"cluster-map"})),ae.push(...en({key:`${I}.${de}.reduce`,value:Fe,expressionContext:"cluster-reduce"}))}return ae;case"video":return Us({key:I,value:b,valueSpec:H.source_video,style:q,validateSpec:ee,styleSpec:H});case"image":return Us({key:I,value:b,valueSpec:H.source_image,style:q,validateSpec:ee,styleSpec:H});case"canvas":return[new Bt(I,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xs({key:`${I}.type`,value:b.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function La(C){const b=C.value,I=C.styleSpec,H=I.light,q=C.style;let ee=[];const re=gr(b);if(b===void 0)return ee;if(re!=="object")return ee=ee.concat([new Bt("light",b,`object expected, ${re} found`)]),ee;for(const ae in b){const de=ae.match(/^(.*)-transition$/);ee=ee.concat(de&&H[de[1]]&&H[de[1]].transition?C.validateSpec({key:ae,value:b[ae],valueSpec:I.transition,validateSpec:C.validateSpec,style:q,styleSpec:I}):H[ae]?C.validateSpec({key:ae,value:b[ae],valueSpec:H[ae],validateSpec:C.validateSpec,style:q,styleSpec:I}):[new Bt(ae,b[ae],`unknown property "${ae}"`)])}return ee}function lo(C){const b=C.value,I=C.styleSpec,H=I.terrain,q=C.style;let ee=[];const re=gr(b);if(b===void 0)return ee;if(re!=="object")return ee=ee.concat([new Bt("terrain",b,`object expected, ${re} found`)]),ee;for(const ae in b)ee=ee.concat(H[ae]?C.validateSpec({key:ae,value:b[ae],valueSpec:H[ae],validateSpec:C.validateSpec,style:q,styleSpec:I}):[new Bt(ae,b[ae],`unknown property "${ae}"`)]);return ee}function ua(C){let b=[];const I=C.value,H=C.key;if(Array.isArray(I)){const q=[],ee=[];for(const re in I)I[re].id&&q.includes(I[re].id)&&b.push(new Bt(H,I,`all the sprites' ids must be unique, but ${I[re].id} is duplicated`)),q.push(I[re].id),I[re].url&&ee.includes(I[re].url)&&b.push(new Bt(H,I,`all the sprites' URLs must be unique, but ${I[re].url} is duplicated`)),ee.push(I[re].url),b=b.concat(Us({key:`${H}[${re}]`,value:I[re],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:C.validateSpec}));return b}return yn({key:H,value:I})}const Ao={"*":()=>[],array:ko,boolean:function(C){const b=C.value,I=C.key,H=gr(b);return H!=="boolean"?[new Bt(I,b,`boolean expected, ${H} found`)]:[]},number:Aa,color:function(C){const b=C.key,I=C.value,H=gr(I);return H!=="string"?[new Bt(b,I,`color expected, ${H} found`)]:bi.parse(String(I))?[]:[new Bt(b,I,`color expected, "${I}" found`)]},constants:Yo,enum:xs,filter:Kn,function:Do,layer:Bs,object:Us,source:Gn,light:La,terrain:lo,string:yn,formatted:function(C){return yn(C).length===0?[]:en(C)},resolvedImage:function(C){return yn(C).length===0?[]:en(C)},padding:function(C){const b=C.key,I=C.value;if(gr(I)==="array"){if(I.length<1||I.length>4)return[new Bt(b,I,`padding requires 1 to 4 values; ${I.length} values found`)];const H={type:"number"};let q=[];for(let ee=0;ee<I.length;ee++)q=q.concat(C.validateSpec({key:`${b}[${ee}]`,value:I[ee],validateSpec:C.validateSpec,valueSpec:H}));return q}return Aa({key:b,value:I,valueSpec:{}})},variableAnchorOffsetCollection:function(C){const b=C.key,I=C.value,H=gr(I),q=C.styleSpec;if(H!=="array"||I.length<1||I.length%2!=0)return[new Bt(b,I,"variableAnchorOffsetCollection requires a non-empty array of even length")];let ee=[];for(let re=0;re<I.length;re+=2)ee=ee.concat(xs({key:`${b}[${re}]`,value:I[re],valueSpec:q.layout_symbol["text-anchor"]})),ee=ee.concat(ko({key:`${b}[${re+1}]`,value:I[re+1],valueSpec:{length:2,value:"number"},validateSpec:C.validateSpec,style:C.style,styleSpec:q}));return ee},sprite:ua};function Qa(C){const b=C.value,I=C.valueSpec,H=C.styleSpec;return C.validateSpec=Qa,I.expression&&Js(Wr(b))?Do(C):I.expression&&$s(Vn(b))?en(C):I.type&&Ao[I.type]?Ao[I.type](C):Us(di({},C,{valueSpec:I.type?H[I.type]:I}))}function Fn(C){const b=C.value,I=C.key,H=yn(C);return H.length||(b.indexOf("{fontstack}")===-1&&H.push(new Bt(I,b,'"glyphs" url must include a "{fontstack}" token')),b.indexOf("{range}")===-1&&H.push(new Bt(I,b,'"glyphs" url must include a "{range}" token'))),H}function vs(C,b=me){let I=[];return I=I.concat(Qa({key:"",value:C,valueSpec:b.$root,styleSpec:b,style:C,validateSpec:Qa,objectElementValidators:{glyphs:Fn,"*":()=>[]}})),C.constants&&(I=I.concat(Yo({key:"constants",value:C.constants}))),Oa(I)}function qr(C){return function(b){return C({...b,validateSpec:Qa})}}function Oa(C){return[].concat(C).sort((b,I)=>b.line-I.line)}function Ms(C){return function(...b){return Oa(C.apply(this,b))}}vs.source=Ms(qr(Gn)),vs.sprite=Ms(qr(ua)),vs.glyphs=Ms(qr(Fn)),vs.light=Ms(qr(La)),vs.terrain=Ms(qr(lo)),vs.layer=Ms(qr(Bs)),vs.filter=Ms(qr(Kn)),vs.paintProperty=Ms(qr(ha)),vs.layoutProperty=Ms(qr(_n));const Ra=vs,co=Ra.light,fa=Ra.paintProperty,Zo=Ra.layoutProperty;function Wn(C,b){let I=!1;if(b&&b.length)for(const H of b)C.fire(new Ke(new Error(H.message))),I=!0;return I}class qi{constructor(b,I,H){const q=this.cells=[];if(b instanceof ArrayBuffer){this.arrayBuffer=b;const re=new Int32Array(this.arrayBuffer);b=re[0],this.d=(I=re[1])+2*(H=re[2]);for(let de=0;de<this.d*this.d;de++){const _e=re[3+de],Ee=re[3+de+1];q.push(_e===Ee?null:re.subarray(_e,Ee))}const ae=re[3+q.length+1];this.keys=re.subarray(re[3+q.length],ae),this.bboxes=re.subarray(ae),this.insert=this._insertReadonly}else{this.d=I+2*H;for(let re=0;re<this.d*this.d;re++)q.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=b,this.padding=H,this.scale=I/b,this.uid=0;const ee=H/I*b;this.min=-ee,this.max=b+ee}insert(b,I,H,q,ee){this._forEachCell(I,H,q,ee,this._insertCell,this.uid++,void 0,void 0),this.keys.push(b),this.bboxes.push(I),this.bboxes.push(H),this.bboxes.push(q),this.bboxes.push(ee)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(b,I,H,q,ee,re){this.cells[ee].push(re)}query(b,I,H,q,ee){const re=this.min,ae=this.max;if(b<=re&&I<=re&&ae<=H&&ae<=q&&!ee)return Array.prototype.slice.call(this.keys);{const de=[];return this._forEachCell(b,I,H,q,this._queryCell,de,{},ee),de}}_queryCell(b,I,H,q,ee,re,ae,de){const _e=this.cells[ee];if(_e!==null){const Ee=this.keys,Fe=this.bboxes;for(let Le=0;Le<_e.length;Le++){const ze=_e[Le];if(ae[ze]===void 0){const Ve=4*ze;(de?de(Fe[Ve+0],Fe[Ve+1],Fe[Ve+2],Fe[Ve+3]):b<=Fe[Ve+2]&&I<=Fe[Ve+3]&&H>=Fe[Ve+0]&&q>=Fe[Ve+1])?(ae[ze]=!0,re.push(Ee[ze])):ae[ze]=!1}}}}_forEachCell(b,I,H,q,ee,re,ae,de){const _e=this._convertToCellCoord(b),Ee=this._convertToCellCoord(I),Fe=this._convertToCellCoord(H),Le=this._convertToCellCoord(q);for(let ze=_e;ze<=Fe;ze++)for(let Ve=Ee;Ve<=Le;Ve++){const st=this.d*Ve+ze;if((!de||de(this._convertFromCellCoord(ze),this._convertFromCellCoord(Ve),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(Ve+1)))&&ee.call(this,b,I,H,q,st,re,ae,de))return}}_convertFromCellCoord(b){return(b-this.padding)/this.scale}_convertToCellCoord(b){return Math.max(0,Math.min(this.d-1,Math.floor(b*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const b=this.cells,I=3+this.cells.length+1+1;let H=0;for(let re=0;re<this.cells.length;re++)H+=this.cells[re].length;const q=new Int32Array(I+H+this.keys.length+this.bboxes.length);q[0]=this.extent,q[1]=this.n,q[2]=this.padding;let ee=I;for(let re=0;re<b.length;re++){const ae=b[re];q[3+re]=ee,q.set(ae,ee),ee+=ae.length}return q[3+b.length]=ee,q.set(this.keys,ee),ee+=this.keys.length,q[3+b.length+1]=ee,q.set(this.bboxes,ee),ee+=this.bboxes.length,q.buffer}static serialize(b,I){const H=b.toArrayBuffer();return I&&I.push(H),{buffer:H}}static deserialize(b){return new qi(b.buffer)}}const tn={};function gi(C,b,I={}){if(tn[C])throw new Error(`${C} is already registered.`);Object.defineProperty(b,"_classRegistryKey",{value:C,writeable:!1}),tn[C]={klass:b,omit:I.omit||[],shallow:I.shallow||[]}}gi("Object",Object),gi("TransferableGridIndex",qi),gi("Color",bi),gi("Error",Error),gi("AJAXError",w),gi("ResolvedImage",Lt),gi("StylePropertyFunction",zn),gi("StyleExpression",Ur,{omit:["_evaluator"]}),gi("ZoomDependentExpression",Fr),gi("ZoomConstantExpression",yr),gi("CompoundExpression",As,{omit:["_evaluate"]});for(const C in gn)gn[C]._classRegistryKey||gi(`Expression_${C}`,gn[C]);function kn(C){return C&&typeof ArrayBuffer<"u"&&(C instanceof ArrayBuffer||C.constructor&&C.constructor.name==="ArrayBuffer")}function xe(C,b){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||C instanceof Blob)return C;if(kn(C)||Ri(C))return b&&b.push(C),C;if(ArrayBuffer.isView(C)){const I=C;return b&&b.push(I.buffer),I}if(C instanceof ImageData)return b&&b.push(C.data.buffer),C;if(Array.isArray(C)){const I=[];for(const H of C)I.push(xe(H,b));return I}if(typeof C=="object"){const I=C.constructor,H=I._classRegistryKey;if(!H)throw new Error("can't serialize object of unregistered class");if(!tn[H])throw new Error(`${H} is not registered.`);const q=I.serialize?I.serialize(C,b):{};if(I.serialize){if(b&&q===b[b.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const ee in C){if(!C.hasOwnProperty(ee)||tn[H].omit.indexOf(ee)>=0)continue;const re=C[ee];q[ee]=tn[H].shallow.indexOf(ee)>=0?re:xe(re,b)}C instanceof Error&&(q.message=C.message)}if(q.$name)throw new Error("$name property is reserved for worker serialization logic.");return H!=="Object"&&(q.$name=H),q}throw new Error("can't serialize object of type "+typeof C)}function He(C){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||C instanceof Blob||kn(C)||Ri(C)||ArrayBuffer.isView(C)||C instanceof ImageData)return C;if(Array.isArray(C))return C.map(He);if(typeof C=="object"){const b=C.$name||"Object";if(!tn[b])throw new Error(`can't deserialize unregistered class ${b}`);const{klass:I}=tn[b];if(!I)throw new Error(`can't deserialize unregistered class ${b}`);if(I.deserialize)return I.deserialize(C);const H=Object.create(I.prototype);for(const q of Object.keys(C)){if(q==="$name")continue;const ee=C[q];H[q]=tn[b].shallow.indexOf(q)>=0?ee:He(ee)}return H}throw new Error("can't deserialize object of type "+typeof C)}class je{constructor(){this.first=!0}update(b,I){const H=Math.floor(b);return this.first?(this.first=!1,this.lastIntegerZoom=H,this.lastIntegerZoomTime=0,this.lastZoom=b,this.lastFloorZoom=H,!0):(this.lastFloorZoom>H?(this.lastIntegerZoom=H+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<H&&(this.lastIntegerZoom=H,this.lastIntegerZoomTime=I),b!==this.lastZoom&&(this.lastZoom=b,this.lastFloorZoom=H,!0))}}const $e={"Latin-1 Supplement":C=>C>=128&&C<=255,Arabic:C=>C>=1536&&C<=1791,"Arabic Supplement":C=>C>=1872&&C<=1919,"Arabic Extended-A":C=>C>=2208&&C<=2303,"Hangul Jamo":C=>C>=4352&&C<=4607,"Unified Canadian Aboriginal Syllabics":C=>C>=5120&&C<=5759,Khmer:C=>C>=6016&&C<=6143,"Unified Canadian Aboriginal Syllabics Extended":C=>C>=6320&&C<=6399,"General Punctuation":C=>C>=8192&&C<=8303,"Letterlike Symbols":C=>C>=8448&&C<=8527,"Number Forms":C=>C>=8528&&C<=8591,"Miscellaneous Technical":C=>C>=8960&&C<=9215,"Control Pictures":C=>C>=9216&&C<=9279,"Optical Character Recognition":C=>C>=9280&&C<=9311,"Enclosed Alphanumerics":C=>C>=9312&&C<=9471,"Geometric Shapes":C=>C>=9632&&C<=9727,"Miscellaneous Symbols":C=>C>=9728&&C<=9983,"Miscellaneous Symbols and Arrows":C=>C>=11008&&C<=11263,"CJK Radicals Supplement":C=>C>=11904&&C<=12031,"Kangxi Radicals":C=>C>=12032&&C<=12255,"Ideographic Description Characters":C=>C>=12272&&C<=12287,"CJK Symbols and Punctuation":C=>C>=12288&&C<=12351,Hiragana:C=>C>=12352&&C<=12447,Katakana:C=>C>=12448&&C<=12543,Bopomofo:C=>C>=12544&&C<=12591,"Hangul Compatibility Jamo":C=>C>=12592&&C<=12687,Kanbun:C=>C>=12688&&C<=12703,"Bopomofo Extended":C=>C>=12704&&C<=12735,"CJK Strokes":C=>C>=12736&&C<=12783,"Katakana Phonetic Extensions":C=>C>=12784&&C<=12799,"Enclosed CJK Letters and Months":C=>C>=12800&&C<=13055,"CJK Compatibility":C=>C>=13056&&C<=13311,"CJK Unified Ideographs Extension A":C=>C>=13312&&C<=19903,"Yijing Hexagram Symbols":C=>C>=19904&&C<=19967,"CJK Unified Ideographs":C=>C>=19968&&C<=40959,"Yi Syllables":C=>C>=40960&&C<=42127,"Yi Radicals":C=>C>=42128&&C<=42191,"Hangul Jamo Extended-A":C=>C>=43360&&C<=43391,"Hangul Syllables":C=>C>=44032&&C<=55215,"Hangul Jamo Extended-B":C=>C>=55216&&C<=55295,"Private Use Area":C=>C>=57344&&C<=63743,"CJK Compatibility Ideographs":C=>C>=63744&&C<=64255,"Arabic Presentation Forms-A":C=>C>=64336&&C<=65023,"Vertical Forms":C=>C>=65040&&C<=65055,"CJK Compatibility Forms":C=>C>=65072&&C<=65103,"Small Form Variants":C=>C>=65104&&C<=65135,"Arabic Presentation Forms-B":C=>C>=65136&&C<=65279,"Halfwidth and Fullwidth Forms":C=>C>=65280&&C<=65519};function bt(C){for(const b of C)if(jt(b.charCodeAt(0)))return!0;return!1}function St(C){for(const b of C)if(!Nt(b.charCodeAt(0)))return!1;return!0}function Nt(C){return!($e.Arabic(C)||$e["Arabic Supplement"](C)||$e["Arabic Extended-A"](C)||$e["Arabic Presentation Forms-A"](C)||$e["Arabic Presentation Forms-B"](C))}function jt(C){return!(C!==746&&C!==747&&(C<4352||!($e["Bopomofo Extended"](C)||$e.Bopomofo(C)||$e["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||$e["CJK Compatibility Ideographs"](C)||$e["CJK Compatibility"](C)||$e["CJK Radicals Supplement"](C)||$e["CJK Strokes"](C)||!(!$e["CJK Symbols and Punctuation"](C)||C>=12296&&C<=12305||C>=12308&&C<=12319||C===12336)||$e["CJK Unified Ideographs Extension A"](C)||$e["CJK Unified Ideographs"](C)||$e["Enclosed CJK Letters and Months"](C)||$e["Hangul Compatibility Jamo"](C)||$e["Hangul Jamo Extended-A"](C)||$e["Hangul Jamo Extended-B"](C)||$e["Hangul Jamo"](C)||$e["Hangul Syllables"](C)||$e.Hiragana(C)||$e["Ideographic Description Characters"](C)||$e.Kanbun(C)||$e["Kangxi Radicals"](C)||$e["Katakana Phonetic Extensions"](C)||$e.Katakana(C)&&C!==12540||!(!$e["Halfwidth and Fullwidth Forms"](C)||C===65288||C===65289||C===65293||C>=65306&&C<=65310||C===65339||C===65341||C===65343||C>=65371&&C<=65503||C===65507||C>=65512&&C<=65519)||!(!$e["Small Form Variants"](C)||C>=65112&&C<=65118||C>=65123&&C<=65126)||$e["Unified Canadian Aboriginal Syllabics"](C)||$e["Unified Canadian Aboriginal Syllabics Extended"](C)||$e["Vertical Forms"](C)||$e["Yijing Hexagram Symbols"](C)||$e["Yi Syllables"](C)||$e["Yi Radicals"](C))))}function hi(C){return!(jt(C)||function(b){return!!($e["Latin-1 Supplement"](b)&&(b===167||b===169||b===174||b===177||b===188||b===189||b===190||b===215||b===247)||$e["General Punctuation"](b)&&(b===8214||b===8224||b===8225||b===8240||b===8241||b===8251||b===8252||b===8258||b===8263||b===8264||b===8265||b===8273)||$e["Letterlike Symbols"](b)||$e["Number Forms"](b)||$e["Miscellaneous Technical"](b)&&(b>=8960&&b<=8967||b>=8972&&b<=8991||b>=8996&&b<=9e3||b===9003||b>=9085&&b<=9114||b>=9150&&b<=9165||b===9167||b>=9169&&b<=9179||b>=9186&&b<=9215)||$e["Control Pictures"](b)&&b!==9251||$e["Optical Character Recognition"](b)||$e["Enclosed Alphanumerics"](b)||$e["Geometric Shapes"](b)||$e["Miscellaneous Symbols"](b)&&!(b>=9754&&b<=9759)||$e["Miscellaneous Symbols and Arrows"](b)&&(b>=11026&&b<=11055||b>=11088&&b<=11097||b>=11192&&b<=11243)||$e["CJK Symbols and Punctuation"](b)||$e.Katakana(b)||$e["Private Use Area"](b)||$e["CJK Compatibility Forms"](b)||$e["Small Form Variants"](b)||$e["Halfwidth and Fullwidth Forms"](b)||b===8734||b===8756||b===8757||b>=9984&&b<=10087||b>=10102&&b<=10131||b===65532||b===65533)}(C))}function Xt(C){return C>=1424&&C<=2303||$e["Arabic Presentation Forms-A"](C)||$e["Arabic Presentation Forms-B"](C)}function Gi(C,b){return!(!b&&Xt(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||$e.Khmer(C))}function zi(C){for(const b of C)if(Xt(b.charCodeAt(0)))return!0;return!1}const Oi="deferred",mr="loading",ur="loaded";let vr=null,nr="unavailable",Xi=null;const Or=function(C){C&&typeof C=="string"&&C.indexOf("NetworkError")>-1&&(nr="error"),vr&&vr(C)};function Sr(){ws.fire(new Te("pluginStateChange",{pluginStatus:nr,pluginURL:Xi}))}const ws=new Me,Ha=function(){return nr},da=function(){if(nr!==Oi||!Xi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nr=mr,Sr(),Xi&&se({url:Xi},C=>{C?Or(C):(nr=ur,Sr())})},ns={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>nr===ur||ns.applyArabicShaping!=null,isLoading:()=>nr===mr,setState(C){if(!Mt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");nr=C.pluginStatus,Xi=C.pluginURL},isParsed(){if(!Mt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ns.applyArabicShaping!=null&&ns.processBidirectionalText!=null&&ns.processStyledBidirectionalText!=null},getPluginURL(){if(!Mt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Xi}};class Er{constructor(b,I){this.zoom=b,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new je,this.transition={})}isSupportedScript(b){return function(I,H){for(const q of I)if(!Gi(q.charCodeAt(0),H))return!1;return!0}(b,ns.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const b=this.zoom,I=b-Math.floor(b),H=this.crossFadingFactor();return b>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*H}:{fromScale:.5,toScale:1,t:1-(1-H)*I}}}class pa{constructor(b,I){this.property=b,this.value=I,this.expression=function(H,q){if(Js(H))return new zn(H,q);if($s(H)){const ee=Mr(H,q);if(ee.result==="error")throw new Error(ee.value.map(re=>`${re.key}: ${re.message}`).join(", "));return ee.value}{let ee=H;return q.type==="color"&&typeof H=="string"?ee=bi.parse(H):q.type!=="padding"||typeof H!="number"&&!Array.isArray(H)?q.type==="variableAnchorOffsetCollection"&&Array.isArray(H)&&(ee=dr.parse(H)):ee=pi.parse(H),{kind:"constant",evaluate:()=>ee}}}(I===void 0?b.specification.default:I,b.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(b,I,H){return this.property.possiblyEvaluate(this,b,I,H)}}class vn{constructor(b){this.property=b,this.value=new pa(b,void 0)}transitioned(b,I){return new qn(this.property,this.value,I,Ye({},b.transition,this.transition),b.now)}untransitioned(){return new qn(this.property,this.value,null,{},0)}}class Jo{constructor(b){this._properties=b,this._values=Object.create(b.defaultTransitionablePropertyValues)}getValue(b){return Ze(this._values[b].value.value)}setValue(b,I){Object.prototype.hasOwnProperty.call(this._values,b)||(this._values[b]=new vn(this._values[b].property)),this._values[b].value=new pa(this._values[b].property,I===null?void 0:Ze(I))}getTransition(b){return Ze(this._values[b].transition)}setTransition(b,I){Object.prototype.hasOwnProperty.call(this._values,b)||(this._values[b]=new vn(this._values[b].property)),this._values[b].transition=Ze(I)||void 0}serialize(){const b={};for(const I of Object.keys(this._values)){const H=this.getValue(I);H!==void 0&&(b[I]=H);const q=this.getTransition(I);q!==void 0&&(b[`${I}-transition`]=q)}return b}transitioned(b,I){const H=new ho(this._properties);for(const q of Object.keys(this._values))H._values[q]=this._values[q].transitioned(b,I._values[q]);return H}untransitioned(){const b=new ho(this._properties);for(const I of Object.keys(this._values))b._values[I]=this._values[I].untransitioned();return b}}class qn{constructor(b,I,H,q,ee){this.property=b,this.value=I,this.begin=ee+q.delay||0,this.end=this.begin+q.duration||0,b.specification.transition&&(q.delay||q.duration)&&(this.prior=H)}possiblyEvaluate(b,I,H){const q=b.now||0,ee=this.value.possiblyEvaluate(b,I,H),re=this.prior;if(re){if(q>this.end)return this.prior=null,ee;if(this.value.isDataDriven())return this.prior=null,ee;if(q<this.begin)return re.possiblyEvaluate(b,I,H);{const ae=(q-this.begin)/(this.end-this.begin);return this.property.interpolate(re.possiblyEvaluate(b,I,H),ee,function(de){if(de<=0)return 0;if(de>=1)return 1;const _e=de*de,Ee=_e*de;return 4*(de<.5?Ee:3*(de-_e)+Ee-.75)}(ae))}}return ee}}class ho{constructor(b){this._properties=b,this._values=Object.create(b.defaultTransitioningPropertyValues)}possiblyEvaluate(b,I,H){const q=new Mo(this._properties);for(const ee of Object.keys(this._values))q._values[ee]=this._values[ee].possiblyEvaluate(b,I,H);return q}hasTransition(){for(const b of Object.keys(this._values))if(this._values[b].prior)return!0;return!1}}class _l{constructor(b){this._properties=b,this._values=Object.create(b.defaultPropertyValues)}hasValue(b){return this._values[b].value!==void 0}getValue(b){return Ze(this._values[b].value)}setValue(b,I){this._values[b]=new pa(this._values[b].property,I===null?void 0:Ze(I))}serialize(){const b={};for(const I of Object.keys(this._values)){const H=this.getValue(I);H!==void 0&&(b[I]=H)}return b}possiblyEvaluate(b,I,H){const q=new Mo(this._properties);for(const ee of Object.keys(this._values))q._values[ee]=this._values[ee].possiblyEvaluate(b,I,H);return q}}class zs{constructor(b,I,H){this.property=b,this.value=I,this.parameters=H}isConstant(){return this.value.kind==="constant"}constantOr(b){return this.value.kind==="constant"?this.value.value:b}evaluate(b,I,H,q){return this.property.evaluate(this.value,this.parameters,b,I,H,q)}}class Mo{constructor(b){this._properties=b,this._values=Object.create(b.defaultPossiblyEvaluatedValues)}get(b){return this._values[b]}}class Fi{constructor(b){this.specification=b}possiblyEvaluate(b,I){if(b.isDataDriven())throw new Error("Value should not be data driven");return b.expression.evaluate(I)}interpolate(b,I,H){const q=ks[this.specification.type];return q?q(b,I,H):b}}class Ni{constructor(b,I){this.specification=b,this.overrides=I}possiblyEvaluate(b,I,H,q){return new zs(this,b.expression.kind==="constant"||b.expression.kind==="camera"?{kind:"constant",value:b.expression.evaluate(I,null,{},H,q)}:b.expression,I)}interpolate(b,I,H){if(b.value.kind!=="constant"||I.value.kind!=="constant")return b;if(b.value.value===void 0||I.value.value===void 0)return new zs(this,{kind:"constant",value:void 0},b.parameters);const q=ks[this.specification.type];if(q){const ee=q(b.value.value,I.value.value,H);return new zs(this,{kind:"constant",value:ee},b.parameters)}return b}evaluate(b,I,H,q,ee,re){return b.kind==="constant"?b.value:b.evaluate(I,H,q,ee,re)}}class $o extends Ni{possiblyEvaluate(b,I,H,q){if(b.value===void 0)return new zs(this,{kind:"constant",value:void 0},I);if(b.expression.kind==="constant"){const ee=b.expression.evaluate(I,null,{},H,q),re=b.property.specification.type==="resolvedImage"&&typeof ee!="string"?ee.name:ee,ae=this._calculate(re,re,re,I);return new zs(this,{kind:"constant",value:ae},I)}if(b.expression.kind==="camera"){const ee=this._calculate(b.expression.evaluate({zoom:I.zoom-1}),b.expression.evaluate({zoom:I.zoom}),b.expression.evaluate({zoom:I.zoom+1}),I);return new zs(this,{kind:"constant",value:ee},I)}return new zs(this,b.expression,I)}evaluate(b,I,H,q,ee,re){if(b.kind==="source"){const ae=b.evaluate(I,H,q,ee,re);return this._calculate(ae,ae,ae,I)}return b.kind==="composite"?this._calculate(b.evaluate({zoom:Math.floor(I.zoom)-1},H,q),b.evaluate({zoom:Math.floor(I.zoom)},H,q),b.evaluate({zoom:Math.floor(I.zoom)+1},H,q),I):b.value}_calculate(b,I,H,q){return q.zoom>q.zoomHistory.lastIntegerZoom?{from:b,to:I}:{from:H,to:I}}interpolate(b){return b}}class yl{constructor(b){this.specification=b}possiblyEvaluate(b,I,H,q){if(b.value!==void 0){if(b.expression.kind==="constant"){const ee=b.expression.evaluate(I,null,{},H,q);return this._calculate(ee,ee,ee,I)}return this._calculate(b.expression.evaluate(new Er(Math.floor(I.zoom-1),I)),b.expression.evaluate(new Er(Math.floor(I.zoom),I)),b.expression.evaluate(new Er(Math.floor(I.zoom+1),I)),I)}}_calculate(b,I,H,q){return q.zoom>q.zoomHistory.lastIntegerZoom?{from:b,to:I}:{from:H,to:I}}interpolate(b){return b}}class vl{constructor(b){this.specification=b}possiblyEvaluate(b,I,H,q){return!!b.expression.evaluate(I,null,{},H,q)}interpolate(){return!1}}class Ns{constructor(b){this.properties=b,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const I in b){const H=b[I];H.specification.overridable&&this.overridableProperties.push(I);const q=this.defaultPropertyValues[I]=new pa(H,void 0),ee=this.defaultTransitionablePropertyValues[I]=new vn(H);this.defaultTransitioningPropertyValues[I]=ee.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=q.possiblyEvaluate({})}}}gi("DataDrivenProperty",Ni),gi("DataConstantProperty",Fi),gi("CrossFadedDataDrivenProperty",$o),gi("CrossFadedProperty",yl),gi("ColorRampProperty",vl);const za="-transition";class Dn extends Me{constructor(b,I){if(super(),this.id=b.id,this.type=b.type,this._featureFilter={filter:()=>!0,needGeometry:!1},b.type!=="custom"&&(this.metadata=b.metadata,this.minzoom=b.minzoom,this.maxzoom=b.maxzoom,b.type!=="background"&&(this.source=b.source,this.sourceLayer=b["source-layer"],this.filter=b.filter),I.layout&&(this._unevaluatedLayout=new _l(I.layout)),I.paint)){this._transitionablePaint=new Jo(I.paint);for(const H in b.paint)this.setPaintProperty(H,b.paint[H],{validate:!1});for(const H in b.layout)this.setLayoutProperty(H,b.layout[H],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Mo(I.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(b){return b==="visibility"?this.visibility:this._unevaluatedLayout.getValue(b)}setLayoutProperty(b,I,H={}){I!=null&&this._validate(Zo,`layers.${this.id}.layout.${b}`,b,I,H)||(b!=="visibility"?this._unevaluatedLayout.setValue(b,I):this.visibility=I)}getPaintProperty(b){return b.endsWith(za)?this._transitionablePaint.getTransition(b.slice(0,-11)):this._transitionablePaint.getValue(b)}setPaintProperty(b,I,H={}){if(I!=null&&this._validate(fa,`layers.${this.id}.paint.${b}`,b,I,H))return!1;if(b.endsWith(za))return this._transitionablePaint.setTransition(b.slice(0,-11),I||void 0),!1;{const q=this._transitionablePaint._values[b],ee=q.property.specification["property-type"]==="cross-faded-data-driven",re=q.value.isDataDriven(),ae=q.value;this._transitionablePaint.setValue(b,I),this._handleSpecialPaintPropertyUpdate(b);const de=this._transitionablePaint._values[b].value;return de.isDataDriven()||re||ee||this._handleOverridablePaintPropertyUpdate(b,ae,de)}}_handleSpecialPaintPropertyUpdate(b){}_handleOverridablePaintPropertyUpdate(b,I,H){return!1}isHidden(b){return!!(this.minzoom&&b<this.minzoom)||!!(this.maxzoom&&b>=this.maxzoom)||this.visibility==="none"}updateTransitions(b){this._transitioningPaint=this._transitionablePaint.transitioned(b,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(b,I){b.getCrossfadeParameters&&(this._crossfadeParameters=b.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(b,void 0,I)),this.paint=this._transitioningPaint.possiblyEvaluate(b,void 0,I)}serialize(){const b={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(b.layout=b.layout||{},b.layout.visibility=this.visibility),ft(b,(I,H)=>!(I===void 0||H==="layout"&&!Object.keys(I).length||H==="paint"&&!Object.keys(I).length))}_validate(b,I,H,q,ee={}){return(!ee||ee.validate!==!1)&&Wn(this,b.call(Ra,{key:I,layerType:this.type,objectKey:H,value:q,styleSpec:me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const b in this.paint._values){const I=this.paint.get(b);if(I instanceof zs&&Hn(I.property.specification)&&(I.value.kind==="source"||I.value.kind==="composite")&&I.value.isStateDependent)return!0}return!1}}const uA={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Po{constructor(b,I){this._structArray=b,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(b,I){return b._trim(),I&&(b.isTransferred=!0,I.push(b.arrayBuffer)),{length:b.length,arrayBuffer:b.arrayBuffer}}static deserialize(b){const I=Object.create(this.prototype);return I.arrayBuffer=b.arrayBuffer,I.length=b.length,I.capacity=b.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(b){this.reserve(b),this.length=b}reserve(b){if(b>this.capacity){this.capacity=Math.max(b,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ts(C,b=1){let I=0,H=0;return{members:C.map(q=>{const ee=uA[q.type].BYTES_PER_ELEMENT,re=I=Kl(I,Math.max(b,ee)),ae=q.components||1;return H=Math.max(H,ee),I+=ee*ae,{name:q.name,type:q.type,components:ae,offset:re}}),size:Kl(I,Math.max(H,b)),alignment:b}}function Kl(C,b){return Math.ceil(C/b)*b}class un extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I){const H=this.length;return this.resize(H+1),this.emplace(H,b,I)}emplace(b,I,H){const q=2*b;return this.int16[q+0]=I,this.int16[q+1]=H,b}}un.prototype.bytesPerElement=4,gi("StructArrayLayout2i4",un);class Lo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,I,H)}emplace(b,I,H,q){const ee=3*b;return this.int16[ee+0]=I,this.int16[ee+1]=H,this.int16[ee+2]=q,b}}Lo.prototype.bytesPerElement=6,gi("StructArrayLayout3i6",Lo);class Qo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I,H,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,b,I,H,q)}emplace(b,I,H,q,ee){const re=4*b;return this.int16[re+0]=I,this.int16[re+1]=H,this.int16[re+2]=q,this.int16[re+3]=ee,b}}Qo.prototype.bytesPerElement=8,gi("StructArrayLayout4i8",Qo);class el extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re){const ae=this.length;return this.resize(ae+1),this.emplace(ae,b,I,H,q,ee,re)}emplace(b,I,H,q,ee,re,ae){const de=6*b;return this.int16[de+0]=I,this.int16[de+1]=H,this.int16[de+2]=q,this.int16[de+3]=ee,this.int16[de+4]=re,this.int16[de+5]=ae,b}}el.prototype.bytesPerElement=12,gi("StructArrayLayout2i4i12",el);class Oo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re){const ae=this.length;return this.resize(ae+1),this.emplace(ae,b,I,H,q,ee,re)}emplace(b,I,H,q,ee,re,ae){const de=4*b,_e=8*b;return this.int16[de+0]=I,this.int16[de+1]=H,this.uint8[_e+4]=q,this.uint8[_e+5]=ee,this.uint8[_e+6]=re,this.uint8[_e+7]=ae,b}}Oo.prototype.bytesPerElement=8,gi("StructArrayLayout2i4ub8",Oo);class Ro extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I){const H=this.length;return this.resize(H+1),this.emplace(H,b,I)}emplace(b,I,H){const q=2*b;return this.float32[q+0]=I,this.float32[q+1]=H,b}}Ro.prototype.bytesPerElement=8,gi("StructArrayLayout2f8",Ro);class uo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re,ae,de,_e,Ee){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,b,I,H,q,ee,re,ae,de,_e,Ee)}emplace(b,I,H,q,ee,re,ae,de,_e,Ee,Fe){const Le=10*b;return this.uint16[Le+0]=I,this.uint16[Le+1]=H,this.uint16[Le+2]=q,this.uint16[Le+3]=ee,this.uint16[Le+4]=re,this.uint16[Le+5]=ae,this.uint16[Le+6]=de,this.uint16[Le+7]=_e,this.uint16[Le+8]=Ee,this.uint16[Le+9]=Fe,b}}uo.prototype.bytesPerElement=20,gi("StructArrayLayout10ui20",uo);class Na extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le){const ze=this.length;return this.resize(ze+1),this.emplace(ze,b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le)}emplace(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze){const Ve=12*b;return this.int16[Ve+0]=I,this.int16[Ve+1]=H,this.int16[Ve+2]=q,this.int16[Ve+3]=ee,this.uint16[Ve+4]=re,this.uint16[Ve+5]=ae,this.uint16[Ve+6]=de,this.uint16[Ve+7]=_e,this.int16[Ve+8]=Ee,this.int16[Ve+9]=Fe,this.int16[Ve+10]=Le,this.int16[Ve+11]=ze,b}}Na.prototype.bytesPerElement=24,gi("StructArrayLayout4i4ui4i24",Na);class wl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,I,H)}emplace(b,I,H,q){const ee=3*b;return this.float32[ee+0]=I,this.float32[ee+1]=H,this.float32[ee+2]=q,b}}wl.prototype.bytesPerElement=12,gi("StructArrayLayout3f12",wl);class tl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(b){const I=this.length;return this.resize(I+1),this.emplace(I,b)}emplace(b,I){return this.uint32[1*b+0]=I,b}}tl.prototype.bytesPerElement=4,gi("StructArrayLayout1ul4",tl);class Va extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re,ae,de,_e){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,b,I,H,q,ee,re,ae,de,_e)}emplace(b,I,H,q,ee,re,ae,de,_e,Ee){const Fe=10*b,Le=5*b;return this.int16[Fe+0]=I,this.int16[Fe+1]=H,this.int16[Fe+2]=q,this.int16[Fe+3]=ee,this.int16[Fe+4]=re,this.int16[Fe+5]=ae,this.uint32[Le+3]=de,this.uint16[Fe+8]=_e,this.uint16[Fe+9]=Ee,b}}Va.prototype.bytesPerElement=20,gi("StructArrayLayout6i1ul2ui20",Va);class bl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re){const ae=this.length;return this.resize(ae+1),this.emplace(ae,b,I,H,q,ee,re)}emplace(b,I,H,q,ee,re,ae){const de=6*b;return this.int16[de+0]=I,this.int16[de+1]=H,this.int16[de+2]=q,this.int16[de+3]=ee,this.int16[de+4]=re,this.int16[de+5]=ae,b}}bl.prototype.bytesPerElement=12,gi("StructArrayLayout2i2i2i12",bl);class xl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee){const re=this.length;return this.resize(re+1),this.emplace(re,b,I,H,q,ee)}emplace(b,I,H,q,ee,re){const ae=4*b,de=8*b;return this.float32[ae+0]=I,this.float32[ae+1]=H,this.float32[ae+2]=q,this.int16[de+6]=ee,this.int16[de+7]=re,b}}xl.prototype.bytesPerElement=16,gi("StructArrayLayout2f1f2i16",xl);class il extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I,H,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,b,I,H,q)}emplace(b,I,H,q,ee){const re=12*b,ae=3*b;return this.uint8[re+0]=I,this.uint8[re+1]=H,this.float32[ae+1]=q,this.float32[ae+2]=ee,b}}il.prototype.bytesPerElement=12,gi("StructArrayLayout2ub2f12",il);class rl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,I,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,I,H)}emplace(b,I,H,q){const ee=3*b;return this.uint16[ee+0]=I,this.uint16[ee+1]=H,this.uint16[ee+2]=q,b}}rl.prototype.bytesPerElement=6,gi("StructArrayLayout3ui6",rl);class Bl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht){const yt=this.length;return this.resize(yt+1),this.emplace(yt,b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht)}emplace(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht,yt){const dt=24*b,xt=12*b,Tt=48*b;return this.int16[dt+0]=I,this.int16[dt+1]=H,this.uint16[dt+2]=q,this.uint16[dt+3]=ee,this.uint32[xt+2]=re,this.uint32[xt+3]=ae,this.uint32[xt+4]=de,this.uint16[dt+10]=_e,this.uint16[dt+11]=Ee,this.uint16[dt+12]=Fe,this.float32[xt+7]=Le,this.float32[xt+8]=ze,this.uint8[Tt+36]=Ve,this.uint8[Tt+37]=st,this.uint8[Tt+38]=lt,this.uint32[xt+10]=ht,this.int16[dt+22]=yt,b}}Bl.prototype.bytesPerElement=48,gi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bl);class xr extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht,yt,dt,xt,Tt,Rt,fi,Ci,ui,li,ti,yi){const si=this.length;return this.resize(si+1),this.emplace(si,b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht,yt,dt,xt,Tt,Rt,fi,Ci,ui,li,ti,yi)}emplace(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st,lt,ht,yt,dt,xt,Tt,Rt,fi,Ci,ui,li,ti,yi,si){const qt=32*b,Pi=16*b;return this.int16[qt+0]=I,this.int16[qt+1]=H,this.int16[qt+2]=q,this.int16[qt+3]=ee,this.int16[qt+4]=re,this.int16[qt+5]=ae,this.int16[qt+6]=de,this.int16[qt+7]=_e,this.uint16[qt+8]=Ee,this.uint16[qt+9]=Fe,this.uint16[qt+10]=Le,this.uint16[qt+11]=ze,this.uint16[qt+12]=Ve,this.uint16[qt+13]=st,this.uint16[qt+14]=lt,this.uint16[qt+15]=ht,this.uint16[qt+16]=yt,this.uint16[qt+17]=dt,this.uint16[qt+18]=xt,this.uint16[qt+19]=Tt,this.uint16[qt+20]=Rt,this.uint16[qt+21]=fi,this.uint16[qt+22]=Ci,this.uint32[Pi+12]=ui,this.float32[Pi+13]=li,this.float32[Pi+14]=ti,this.uint16[qt+30]=yi,this.uint16[qt+31]=si,b}}xr.prototype.bytesPerElement=64,gi("StructArrayLayout8i15ui1ul2f2ui64",xr);class J extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b){const I=this.length;return this.resize(I+1),this.emplace(I,b)}emplace(b,I){return this.float32[1*b+0]=I,b}}J.prototype.bytesPerElement=4,gi("StructArrayLayout1f4",J);class x extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,I,H)}emplace(b,I,H,q){const ee=3*b;return this.uint16[6*b+0]=I,this.float32[ee+1]=H,this.float32[ee+2]=q,b}}x.prototype.bytesPerElement=12,gi("StructArrayLayout1ui2f12",x);class Q extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,I,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,I,H)}emplace(b,I,H,q){const ee=4*b;return this.uint32[2*b+0]=I,this.uint16[ee+2]=H,this.uint16[ee+3]=q,b}}Q.prototype.bytesPerElement=8,gi("StructArrayLayout1ul2ui8",Q);class G extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,I){const H=this.length;return this.resize(H+1),this.emplace(H,b,I)}emplace(b,I,H){const q=2*b;return this.uint16[q+0]=I,this.uint16[q+1]=H,b}}G.prototype.bytesPerElement=4,gi("StructArrayLayout2ui4",G);class X extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b){const I=this.length;return this.resize(I+1),this.emplace(I,b)}emplace(b,I){return this.uint16[1*b+0]=I,b}}X.prototype.bytesPerElement=2,gi("StructArrayLayout1ui2",X);class te extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,I,H,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,b,I,H,q)}emplace(b,I,H,q,ee){const re=4*b;return this.float32[re+0]=I,this.float32[re+1]=H,this.float32[re+2]=q,this.float32[re+3]=ee,b}}te.prototype.bytesPerElement=16,gi("StructArrayLayout4f16",te);class Ae extends Po{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new pe(this.anchorPointX,this.anchorPointY)}}Ae.prototype.size=20;class he extends Va{get(b){return new Ae(this,b)}}gi("CollisionBoxArray",he);class ge extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(b){this._structArray.uint8[this._pos1+37]=b}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(b){this._structArray.uint8[this._pos1+38]=b}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(b){this._structArray.uint32[this._pos4+10]=b}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class ve extends Bl{get(b){return new ge(this,b)}}gi("PlacedSymbolArray",ve);class Ce extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(b){this._structArray.uint32[this._pos4+12]=b}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ce.prototype.size=64;class Se extends xr{get(b){return new Ce(this,b)}}gi("SymbolInstanceArray",Se);class Re extends J{getoffsetX(b){return this.float32[1*b+0]}}gi("GlyphOffsetArray",Re);class it extends Lo{getx(b){return this.int16[3*b+0]}gety(b){return this.int16[3*b+1]}gettileUnitDistanceFromAnchor(b){return this.int16[3*b+2]}}gi("SymbolLineVertexArray",it);class tt extends Po{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}tt.prototype.size=12;class at extends x{get(b){return new tt(this,b)}}gi("TextAnchorOffsetArray",at);class Je extends Po{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Je.prototype.size=8;class pt extends Q{get(b){return new Je(this,b)}}gi("FeatureIndexArray",pt);class Et extends un{}class At extends un{}class mt extends un{}class It extends el{}class kt extends Oo{}class Ot extends Ro{}class Wt extends uo{}class zt extends Na{}class Jt extends wl{}class Bi extends tl{}class ar extends bl{}class oi extends il{}class ki extends rl{}class xi extends G{}const Hr=ts([{name:"a_pos",components:2,type:"Int16"}],4),{members:or}=Hr;class Mi{constructor(b=[]){this.segments=b}prepareSegment(b,I,H,q){let ee=this.segments[this.segments.length-1];return b>Mi.MAX_VERTEX_ARRAY_LENGTH&&Ft(`Max vertices per segment is ${Mi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${b}`),(!ee||ee.vertexLength+b>Mi.MAX_VERTEX_ARRAY_LENGTH||ee.sortKey!==q)&&(ee={vertexOffset:I.length,primitiveOffset:H.length,vertexLength:0,primitiveLength:0},q!==void 0&&(ee.sortKey=q),this.segments.push(ee)),ee}get(){return this.segments}destroy(){for(const b of this.segments)for(const I in b.vaos)b.vaos[I].destroy()}static simpleSegment(b,I,H,q){return new Mi([{vertexOffset:b,primitiveOffset:I,vertexLength:H,primitiveLength:q,vaos:{},sortKey:0}])}}function lr(C,b){return 256*(C=Ne(Math.floor(C),0,255))+Ne(Math.floor(b),0,255)}Mi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gi("SegmentVector",Mi);const Kr=ts([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var kr={exports:{}},rn={exports:{}};rn.exports=function(C,b){var I,H,q,ee,re,ae,de,_e;for(H=C.length-(I=3&C.length),q=b,re=3432918353,ae=461845907,_e=0;_e<H;)de=255&C.charCodeAt(_e)|(255&C.charCodeAt(++_e))<<8|(255&C.charCodeAt(++_e))<<16|(255&C.charCodeAt(++_e))<<24,++_e,q=27492+(65535&(ee=5*(65535&(q=(q^=de=(65535&(de=(de=(65535&de)*re+(((de>>>16)*re&65535)<<16)&4294967295)<<15|de>>>17))*ae+(((de>>>16)*ae&65535)<<16)&4294967295)<<13|q>>>19))+((5*(q>>>16)&65535)<<16)&4294967295))+((58964+(ee>>>16)&65535)<<16);switch(de=0,I){case 3:de^=(255&C.charCodeAt(_e+2))<<16;case 2:de^=(255&C.charCodeAt(_e+1))<<8;case 1:q^=de=(65535&(de=(de=(65535&(de^=255&C.charCodeAt(_e)))*re+(((de>>>16)*re&65535)<<16)&4294967295)<<15|de>>>17))*ae+(((de>>>16)*ae&65535)<<16)&4294967295}return q^=C.length,q=2246822507*(65535&(q^=q>>>16))+((2246822507*(q>>>16)&65535)<<16)&4294967295,q=3266489909*(65535&(q^=q>>>13))+((3266489909*(q>>>16)&65535)<<16)&4294967295,(q^=q>>>16)>>>0};var bs=rn.exports,Zr={exports:{}};Zr.exports=function(C,b){for(var I,H=C.length,q=b^H,ee=0;H>=4;)I=1540483477*(65535&(I=255&C.charCodeAt(ee)|(255&C.charCodeAt(++ee))<<8|(255&C.charCodeAt(++ee))<<16|(255&C.charCodeAt(++ee))<<24))+((1540483477*(I>>>16)&65535)<<16),q=1540483477*(65535&q)+((1540483477*(q>>>16)&65535)<<16)^(I=1540483477*(65535&(I^=I>>>24))+((1540483477*(I>>>16)&65535)<<16)),H-=4,++ee;switch(H){case 3:q^=(255&C.charCodeAt(ee+2))<<16;case 2:q^=(255&C.charCodeAt(ee+1))<<8;case 1:q=1540483477*(65535&(q^=255&C.charCodeAt(ee)))+((1540483477*(q>>>16)&65535)<<16)}return q=1540483477*(65535&(q^=q>>>13))+((1540483477*(q>>>16)&65535)<<16),(q^=q>>>15)>>>0};var Vs=bs,Un=Zr.exports;kr.exports=Vs,kr.exports.murmur3=Vs,kr.exports.murmur2=Un;var wn=ne(kr.exports);class Mn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(b,I,H,q){this.ids.push(fo(b)),this.positions.push(I,H,q)}getPositions(b){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const I=fo(b);let H=0,q=this.ids.length-1;for(;H<q;){const re=H+q>>1;this.ids[re]>=I?q=re:H=re+1}const ee=[];for(;this.ids[H]===I;)ee.push({index:this.positions[3*H],start:this.positions[3*H+1],end:this.positions[3*H+2]}),H++;return ee}static serialize(b,I){const H=new Float64Array(b.ids),q=new Uint32Array(b.positions);return ga(H,q,0,H.length-1),I&&I.push(H.buffer,q.buffer),{ids:H,positions:q}}static deserialize(b){const I=new Mn;return I.ids=b.ids,I.positions=b.positions,I.indexed=!0,I}}function fo(C){const b=+C;return!isNaN(b)&&b<=Number.MAX_SAFE_INTEGER?b:wn(String(C))}function ga(C,b,I,H){for(;I<H;){const q=C[I+H>>1];let ee=I-1,re=H+1;for(;;){do ee++;while(C[ee]<q);do re--;while(C[re]>q);if(ee>=re)break;Xn(C,ee,re),Xn(b,3*ee,3*re),Xn(b,3*ee+1,3*re+1),Xn(b,3*ee+2,3*re+2)}re-I<H-re?(ga(C,b,I,re),I=re+1):(ga(C,b,re+1,H),H=re)}}function Xn(C,b,I){const H=C[b];C[b]=C[I],C[I]=H}gi("FeaturePositionMap",Mn);class is{constructor(b,I){this.gl=b.gl,this.location=I}}class cs extends is{constructor(b,I){super(b,I),this.current=0}set(b){this.current!==b&&(this.current=b,this.gl.uniform1f(this.location,b))}}class Cs extends is{constructor(b,I){super(b,I),this.current=[0,0,0,0]}set(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]&&b[3]===this.current[3]||(this.current=b,this.gl.uniform4f(this.location,b[0],b[1],b[2],b[3]))}}class po extends is{constructor(b,I){super(b,I),this.current=bi.transparent}set(b){b.r===this.current.r&&b.g===this.current.g&&b.b===this.current.b&&b.a===this.current.a||(this.current=b,this.gl.uniform4f(this.location,b.r,b.g,b.b,b.a))}}const hs=new Float32Array(16);function as(C){return[lr(255*C.r,255*C.g),lr(255*C.b,255*C.a)]}class Es{constructor(b,I,H){this.value=b,this.uniformNames=I.map(q=>`u_${q}`),this.type=H}setUniform(b,I,H){b.set(H.constantOr(this.value))}getBinding(b,I,H){return this.type==="color"?new po(b,I):new cs(b,I)}}class Gr{constructor(b,I){this.uniformNames=I.map(H=>`u_${H}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(b,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=b.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=b.tlbr}setUniform(b,I,H,q){const ee=q==="u_pattern_to"?this.patternTo:q==="u_pattern_from"?this.patternFrom:q==="u_pixel_ratio_to"?this.pixelRatioTo:q==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ee&&b.set(ee)}getBinding(b,I,H){return H.substr(0,9)==="u_pattern"?new Cs(b,I):new cs(b,I)}}class Yn{constructor(b,I,H,q){this.expression=b,this.type=H,this.maxValue=0,this.paintVertexAttributes=I.map(ee=>({name:`a_${ee}`,type:"Float32",components:H==="color"?2:1,offset:0})),this.paintVertexArray=new q}populatePaintArray(b,I,H,q,ee){const re=this.paintVertexArray.length,ae=this.expression.evaluate(new Er(0),I,{},q,[],ee);this.paintVertexArray.resize(b),this._setPaintValue(re,b,ae)}updatePaintArray(b,I,H,q){const ee=this.expression.evaluate({zoom:0},H,q);this._setPaintValue(b,I,ee)}_setPaintValue(b,I,H){if(this.type==="color"){const q=as(H);for(let ee=b;ee<I;ee++)this.paintVertexArray.emplace(ee,q[0],q[1])}else{for(let q=b;q<I;q++)this.paintVertexArray.emplace(q,H);this.maxValue=Math.max(this.maxValue,Math.abs(H))}}upload(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bn{constructor(b,I,H,q,ee,re){this.expression=b,this.uniformNames=I.map(ae=>`u_${ae}_t`),this.type=H,this.useIntegerZoom=q,this.zoom=ee,this.maxValue=0,this.paintVertexAttributes=I.map(ae=>({name:`a_${ae}`,type:"Float32",components:H==="color"?4:2,offset:0})),this.paintVertexArray=new re}populatePaintArray(b,I,H,q,ee){const re=this.expression.evaluate(new Er(this.zoom),I,{},q,[],ee),ae=this.expression.evaluate(new Er(this.zoom+1),I,{},q,[],ee),de=this.paintVertexArray.length;this.paintVertexArray.resize(b),this._setPaintValue(de,b,re,ae)}updatePaintArray(b,I,H,q){const ee=this.expression.evaluate({zoom:this.zoom},H,q),re=this.expression.evaluate({zoom:this.zoom+1},H,q);this._setPaintValue(b,I,ee,re)}_setPaintValue(b,I,H,q){if(this.type==="color"){const ee=as(H),re=as(q);for(let ae=b;ae<I;ae++)this.paintVertexArray.emplace(ae,ee[0],ee[1],re[0],re[1])}else{for(let ee=b;ee<I;ee++)this.paintVertexArray.emplace(ee,H,q);this.maxValue=Math.max(this.maxValue,Math.abs(H),Math.abs(q))}}upload(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(b,I){const H=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,q=Ne(this.expression.interpolationFactor(H,this.zoom,this.zoom+1),0,1);b.set(q)}getBinding(b,I,H){return new cs(b,I)}}class ma{constructor(b,I,H,q,ee,re){this.expression=b,this.type=I,this.useIntegerZoom=H,this.zoom=q,this.layerId=re,this.zoomInPaintVertexArray=new ee,this.zoomOutPaintVertexArray=new ee}populatePaintArray(b,I,H){const q=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(b),this.zoomOutPaintVertexArray.resize(b),this._setPaintValues(q,b,I.patterns&&I.patterns[this.layerId],H)}updatePaintArray(b,I,H,q,ee){this._setPaintValues(b,I,H.patterns&&H.patterns[this.layerId],ee)}_setPaintValues(b,I,H,q){if(!q||!H)return;const{min:ee,mid:re,max:ae}=H,de=q[ee],_e=q[re],Ee=q[ae];if(de&&_e&&Ee)for(let Fe=b;Fe<I;Fe++)this.zoomInPaintVertexArray.emplace(Fe,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],_e.pixelRatio,de.pixelRatio),this.zoomOutPaintVertexArray.emplace(Fe,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],Ee.tl[0],Ee.tl[1],Ee.br[0],Ee.br[1],_e.pixelRatio,Ee.pixelRatio)}upload(b){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=b.createVertexBuffer(this.zoomInPaintVertexArray,Kr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=b.createVertexBuffer(this.zoomOutPaintVertexArray,Kr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gl{constructor(b,I,H){this.binders={},this._buffers=[];const q=[];for(const ee in b.paint._values){if(!H(ee))continue;const re=b.paint.get(ee);if(!(re instanceof zs&&Hn(re.property.specification)))continue;const ae=fA(ee,b.type),de=re.value,_e=re.property.specification.type,Ee=re.property.useIntegerZoom,Fe=re.property.specification["property-type"],Le=Fe==="cross-faded"||Fe==="cross-faded-data-driven";if(de.kind==="constant")this.binders[ee]=Le?new Gr(de.value,ae):new Es(de.value,ae,_e),q.push(`/u_${ee}`);else if(de.kind==="source"||Le){const ze=Ga(ee,_e,"source");this.binders[ee]=Le?new ma(de,_e,Ee,I,ze,b.id):new Yn(de,ae,_e,ze),q.push(`/a_${ee}`)}else{const ze=Ga(ee,_e,"composite");this.binders[ee]=new bn(de,ae,_e,Ee,I,ze),q.push(`/z_${ee}`)}}this.cacheKey=q.sort().join("")}getMaxValue(b){const I=this.binders[b];return I instanceof Yn||I instanceof bn?I.maxValue:0}populatePaintArrays(b,I,H,q,ee){for(const re in this.binders){const ae=this.binders[re];(ae instanceof Yn||ae instanceof bn||ae instanceof ma)&&ae.populatePaintArray(b,I,H,q,ee)}}setConstantPatternPositions(b,I){for(const H in this.binders){const q=this.binders[H];q instanceof Gr&&q.setConstantPatternPositions(b,I)}}updatePaintArrays(b,I,H,q,ee){let re=!1;for(const ae in b){const de=I.getPositions(ae);for(const _e of de){const Ee=H.feature(_e.index);for(const Fe in this.binders){const Le=this.binders[Fe];if((Le instanceof Yn||Le instanceof bn||Le instanceof ma)&&Le.expression.isStateDependent===!0){const ze=q.paint.get(Fe);Le.expression=ze.value,Le.updatePaintArray(_e.start,_e.end,Ee,b[ae],ee),re=!0}}}}return re}defines(){const b=[];for(const I in this.binders){const H=this.binders[I];(H instanceof Es||H instanceof Gr)&&b.push(...H.uniformNames.map(q=>`#define HAS_UNIFORM_${q}`))}return b}getBinderAttributes(){const b=[];for(const I in this.binders){const H=this.binders[I];if(H instanceof Yn||H instanceof bn)for(let q=0;q<H.paintVertexAttributes.length;q++)b.push(H.paintVertexAttributes[q].name);else if(H instanceof ma)for(let q=0;q<Kr.members.length;q++)b.push(Kr.members[q].name)}return b}getBinderUniforms(){const b=[];for(const I in this.binders){const H=this.binders[I];if(H instanceof Es||H instanceof Gr||H instanceof bn)for(const q of H.uniformNames)b.push(q)}return b}getPaintVertexBuffers(){return this._buffers}getUniforms(b,I){const H=[];for(const q in this.binders){const ee=this.binders[q];if(ee instanceof Es||ee instanceof Gr||ee instanceof bn){for(const re of ee.uniformNames)if(I[re]){const ae=ee.getBinding(b,I[re],re);H.push({name:re,property:q,binding:ae})}}}return H}setUniforms(b,I,H,q){for(const{name:ee,property:re,binding:ae}of I)this.binders[re].setUniform(ae,q,H.get(re),ee)}updatePaintBuffers(b){this._buffers=[];for(const I in this.binders){const H=this.binders[I];if(b&&H instanceof ma){const q=b.fromScale===2?H.zoomInPaintVertexBuffer:H.zoomOutPaintVertexBuffer;q&&this._buffers.push(q)}else(H instanceof Yn||H instanceof bn)&&H.paintVertexBuffer&&this._buffers.push(H.paintVertexBuffer)}}upload(b){for(const I in this.binders){const H=this.binders[I];(H instanceof Yn||H instanceof bn||H instanceof ma)&&H.upload(b)}this.updatePaintBuffers()}destroy(){for(const b in this.binders){const I=this.binders[b];(I instanceof Yn||I instanceof bn||I instanceof ma)&&I.destroy()}}}class Ka{constructor(b,I,H=()=>!0){this.programConfigurations={};for(const q of b)this.programConfigurations[q.id]=new Gl(q,I,H);this.needsUpload=!1,this._featureMap=new Mn,this._bufferOffset=0}populatePaintArrays(b,I,H,q,ee,re){for(const ae in this.programConfigurations)this.programConfigurations[ae].populatePaintArrays(b,I,q,ee,re);I.id!==void 0&&this._featureMap.add(I.id,H,this._bufferOffset,b),this._bufferOffset=b,this.needsUpload=!0}updatePaintArrays(b,I,H,q){for(const ee of H)this.needsUpload=this.programConfigurations[ee.id].updatePaintArrays(b,this._featureMap,I,ee,q)||this.needsUpload}get(b){return this.programConfigurations[b]}upload(b){if(this.needsUpload){for(const I in this.programConfigurations)this.programConfigurations[I].upload(b);this.needsUpload=!1}}destroy(){for(const b in this.programConfigurations)this.programConfigurations[b].destroy()}}function fA(C,b){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[C]||[C.replace(`${b}-`,"").replace(/-/g,"_")]}function Ga(C,b,I){const H={color:{source:Ro,composite:te},number:{source:J,composite:Ro}},q=function(ee){return{"line-pattern":{source:Wt,composite:Wt},"fill-pattern":{source:Wt,composite:Wt},"fill-extrusion-pattern":{source:Wt,composite:Wt}}[ee]}(C);return q&&q[I]||H[b][I]}gi("ConstantBinder",Es),gi("CrossFadedConstantBinder",Gr),gi("SourceExpressionBinder",Yn),gi("CrossFadedCompositeBinder",ma),gi("CompositeExpressionBinder",bn),gi("ProgramConfiguration",Gl,{omit:["_buffers"]}),gi("ProgramConfigurationSet",Ka);const Xr=8192,sl=Math.pow(2,14)-1,Cl=-sl-1;function jn(C){const b=Xr/C.extent,I=C.loadGeometry();for(let H=0;H<I.length;H++){const q=I[H];for(let ee=0;ee<q.length;ee++){const re=q[ee],ae=Math.round(re.x*b),de=Math.round(re.y*b);re.x=Ne(ae,Cl,sl),re.y=Ne(de,Cl,sl),(ae<re.x||ae>re.x+1||de<re.y||de>re.y+1)&&Ft("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return I}function _a(C,b){return{type:C.type,id:C.id,properties:C.properties,geometry:b?jn(C):[]}}function go(C,b,I,H,q){C.emplaceBack(2*b+(H+1)/2,2*I+(q+1)/2)}class dA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(I=>I.id),this.index=b.index,this.hasPattern=!1,this.layoutVertexArray=new At,this.indexArray=new ki,this.segments=new Mi,this.programConfigurations=new Ka(b.layers,b.zoom),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(b,I,H){const q=this.layers[0],ee=[];let re=null,ae=!1;q.type==="circle"&&(re=q.layout.get("circle-sort-key"),ae=!re.isConstant());for(const{feature:de,id:_e,index:Ee,sourceLayerIndex:Fe}of b){const Le=this.layers[0]._featureFilter.needGeometry,ze=_a(de,Le);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),ze,H))continue;const Ve=ae?re.evaluate(ze,{},H):void 0,st={id:_e,properties:de.properties,type:de.type,sourceLayerIndex:Fe,index:Ee,geometry:Le?ze.geometry:jn(de),patterns:{},sortKey:Ve};ee.push(st)}ae&&ee.sort((de,_e)=>de.sortKey-_e.sortKey);for(const de of ee){const{geometry:_e,index:Ee,sourceLayerIndex:Fe}=de,Le=b[Ee].feature;this.addFeature(de,_e,Ee,H),I.featureIndex.insert(Le,_e,Ee,Fe,this.index)}}update(b,I,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,I,this.stateDependentLayers,H)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,or),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(b,I,H,q){for(const ee of I)for(const re of ee){const ae=re.x,de=re.y;if(ae<0||ae>=Xr||de<0||de>=Xr)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,b.sortKey),Ee=_e.vertexLength;go(this.layoutVertexArray,ae,de,-1,-1),go(this.layoutVertexArray,ae,de,1,-1),go(this.layoutVertexArray,ae,de,1,1),go(this.layoutVertexArray,ae,de,-1,1),this.indexArray.emplaceBack(Ee,Ee+1,Ee+2),this.indexArray.emplaceBack(Ee,Ee+3,Ee+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,{},q)}}function sc(C,b){for(let I=0;I<C.length;I++)if(nl(b,C[I]))return!0;for(let I=0;I<b.length;I++)if(nl(C,b[I]))return!0;return!!pA(C,b)}function Ph(C,b,I){return!!nl(C,b)||!!gA(b,C,I)}function nc(C,b){if(C.length===1)return oc(b,C[0]);for(let I=0;I<b.length;I++){const H=b[I];for(let q=0;q<H.length;q++)if(nl(C,H[q]))return!0}for(let I=0;I<C.length;I++)if(oc(b,C[I]))return!0;for(let I=0;I<b.length;I++)if(pA(C,b[I]))return!0;return!1}function Lh(C,b,I){if(C.length>1){if(pA(C,b))return!0;for(let H=0;H<b.length;H++)if(gA(b[H],C,I))return!0}for(let H=0;H<C.length;H++)if(gA(C[H],b,I))return!0;return!1}function pA(C,b){if(C.length===0||b.length===0)return!1;for(let I=0;I<C.length-1;I++){const H=C[I],q=C[I+1];for(let ee=0;ee<b.length-1;ee++)if(Qh(H,q,b[ee],b[ee+1]))return!0}return!1}function Qh(C,b,I,H){return _t(C,I,H)!==_t(b,I,H)&&_t(C,b,I)!==_t(C,b,H)}function gA(C,b,I){const H=I*I;if(b.length===1)return C.distSqr(b[0])<H;for(let q=1;q<b.length;q++)if(ac(C,b[q-1],b[q])<H)return!0;return!1}function ac(C,b,I){const H=b.distSqr(I);if(H===0)return C.distSqr(b);const q=((C.x-b.x)*(I.x-b.x)+(C.y-b.y)*(I.y-b.y))/H;return C.distSqr(q<0?b:q>1?I:I.sub(b)._mult(q)._add(b))}function oc(C,b){let I,H,q,ee=!1;for(let re=0;re<C.length;re++){I=C[re];for(let ae=0,de=I.length-1;ae<I.length;de=ae++)H=I[ae],q=I[de],H.y>b.y!=q.y>b.y&&b.x<(q.x-H.x)*(b.y-H.y)/(q.y-H.y)+H.x&&(ee=!ee)}return ee}function nl(C,b){let I=!1;for(let H=0,q=C.length-1;H<C.length;q=H++){const ee=C[H],re=C[q];ee.y>b.y!=re.y>b.y&&b.x<(re.x-ee.x)*(b.y-ee.y)/(re.y-ee.y)+ee.x&&(I=!I)}return I}function Oh(C,b,I){const H=I[0],q=I[2];if(C.x<H.x&&b.x<H.x||C.x>q.x&&b.x>q.x||C.y<H.y&&b.y<H.y||C.y>q.y&&b.y>q.y)return!1;const ee=_t(C,b,I[0]);return ee!==_t(C,b,I[1])||ee!==_t(C,b,I[2])||ee!==_t(C,b,I[3])}function El(C,b,I){const H=b.paint.get(C).value;return H.kind==="constant"?H.value:I.programConfigurations.get(b.id).getMaxValue(C)}function Wl(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function ql(C,b,I,H,q){if(!b[0]&&!b[1])return C;const ee=pe.convert(b)._mult(q);I==="viewport"&&ee._rotate(-H);const re=[];for(let ae=0;ae<C.length;ae++)re.push(C[ae].sub(ee));return re}let lc,Ac;gi("CircleBucket",dA,{omit:["layers"]});var Rh={get paint(){return Ac=Ac||new Ns({"circle-radius":new Ni(me.paint_circle["circle-radius"]),"circle-color":new Ni(me.paint_circle["circle-color"]),"circle-blur":new Ni(me.paint_circle["circle-blur"]),"circle-opacity":new Ni(me.paint_circle["circle-opacity"]),"circle-translate":new Fi(me.paint_circle["circle-translate"]),"circle-translate-anchor":new Fi(me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fi(me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fi(me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ni(me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ni(me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ni(me.paint_circle["circle-stroke-opacity"])})},get layout(){return lc=lc||new Ns({"circle-sort-key":new Ni(me.layout_circle["circle-sort-key"])})}},Ks=1e-6,al=typeof Float32Array<"u"?Float32Array:Array;function mA(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function cc(C,b,I){var H=b[0],q=b[1],ee=b[2],re=b[3],ae=b[4],de=b[5],_e=b[6],Ee=b[7],Fe=b[8],Le=b[9],ze=b[10],Ve=b[11],st=b[12],lt=b[13],ht=b[14],yt=b[15],dt=I[0],xt=I[1],Tt=I[2],Rt=I[3];return C[0]=dt*H+xt*ae+Tt*Fe+Rt*st,C[1]=dt*q+xt*de+Tt*Le+Rt*lt,C[2]=dt*ee+xt*_e+Tt*ze+Rt*ht,C[3]=dt*re+xt*Ee+Tt*Ve+Rt*yt,C[4]=(dt=I[4])*H+(xt=I[5])*ae+(Tt=I[6])*Fe+(Rt=I[7])*st,C[5]=dt*q+xt*de+Tt*Le+Rt*lt,C[6]=dt*ee+xt*_e+Tt*ze+Rt*ht,C[7]=dt*re+xt*Ee+Tt*Ve+Rt*yt,C[8]=(dt=I[8])*H+(xt=I[9])*ae+(Tt=I[10])*Fe+(Rt=I[11])*st,C[9]=dt*q+xt*de+Tt*Le+Rt*lt,C[10]=dt*ee+xt*_e+Tt*ze+Rt*ht,C[11]=dt*re+xt*Ee+Tt*Ve+Rt*yt,C[12]=(dt=I[12])*H+(xt=I[13])*ae+(Tt=I[14])*Fe+(Rt=I[15])*st,C[13]=dt*q+xt*de+Tt*Le+Rt*lt,C[14]=dt*ee+xt*_e+Tt*ze+Rt*ht,C[15]=dt*re+xt*Ee+Tt*Ve+Rt*yt,C}Math.hypot||(Math.hypot=function(){for(var C=0,b=arguments.length;b--;)C+=arguments[b]*arguments[b];return Math.sqrt(C)});var Tl,Hh=cc;function Xl(C,b,I){var H=b[0],q=b[1],ee=b[2],re=b[3];return C[0]=I[0]*H+I[4]*q+I[8]*ee+I[12]*re,C[1]=I[1]*H+I[5]*q+I[9]*ee+I[13]*re,C[2]=I[2]*H+I[6]*q+I[10]*ee+I[14]*re,C[3]=I[3]*H+I[7]*q+I[11]*ee+I[15]*re,C}Tl=new al(4),al!=Float32Array&&(Tl[0]=0,Tl[1]=0,Tl[2]=0,Tl[3]=0);class zh extends Dn{constructor(b){super(b,Rh)}createBucket(b){return new dA(b)}queryRadius(b){const I=b;return El("circle-radius",this,I)+El("circle-stroke-width",this,I)+Wl(this.paint.get("circle-translate"))}queryIntersectsFeature(b,I,H,q,ee,re,ae,de){const _e=ql(b,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),re.angle,ae),Ee=this.paint.get("circle-radius").evaluate(I,H)+this.paint.get("circle-stroke-width").evaluate(I,H),Fe=this.paint.get("circle-pitch-alignment")==="map",Le=Fe?_e:function(Ve,st){return Ve.map(lt=>hc(lt,st))}(_e,de),ze=Fe?Ee*ae:Ee;for(const Ve of q)for(const st of Ve){const lt=Fe?st:hc(st,de);let ht=ze;const yt=Xl([],[st.x,st.y,0,1],de);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ht*=yt[3]/re.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ht*=re.cameraToCenterDistance/yt[3]),Ph(Le,lt,ht))return!0}return!1}}function hc(C,b){const I=Xl([],[C.x,C.y,0,1],b);return new pe(I[0]/I[3],I[1]/I[3])}class uc extends dA{}let fc;gi("HeatmapBucket",uc,{omit:["layers"]});var Nh={get paint(){return fc=fc||new Ns({"heatmap-radius":new Ni(me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ni(me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fi(me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vl(me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fi(me.paint_heatmap["heatmap-opacity"])})}};function _A(C,{width:b,height:I},H,q){if(q){if(q instanceof Uint8ClampedArray)q=new Uint8Array(q.buffer);else if(q.length!==b*I*H)throw new RangeError(`mismatched image size. expected: ${q.length} but got: ${b*I*H}`)}else q=new Uint8Array(b*I*H);return C.width=b,C.height=I,C.data=q,C}function dc(C,{width:b,height:I},H){if(b===C.width&&I===C.height)return;const q=_A({},{width:b,height:I},H);yA(C,q,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,b),height:Math.min(C.height,I)},H),C.width=b,C.height=I,C.data=q.data}function yA(C,b,I,H,q,ee){if(q.width===0||q.height===0)return b;if(q.width>C.width||q.height>C.height||I.x>C.width-q.width||I.y>C.height-q.height)throw new RangeError("out of range source coordinates for image copy");if(q.width>b.width||q.height>b.height||H.x>b.width-q.width||H.y>b.height-q.height)throw new RangeError("out of range destination coordinates for image copy");const re=C.data,ae=b.data;if(re===ae)throw new Error("srcData equals dstData, so image is already copied");for(let de=0;de<q.height;de++){const _e=((I.y+de)*C.width+I.x)*ee,Ee=((H.y+de)*b.width+H.x)*ee;for(let Fe=0;Fe<q.width*ee;Fe++)ae[Ee+Fe]=re[_e+Fe]}return b}class Sl{constructor(b,I){_A(this,b,1,I)}resize(b){dc(this,b,1)}clone(){return new Sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(b,I,H,q,ee){yA(b,I,H,q,ee,1)}}class xn{constructor(b,I){_A(this,b,4,I)}resize(b){dc(this,b,4)}replace(b,I){I?this.data.set(b):this.data=b instanceof Uint8ClampedArray?new Uint8Array(b.buffer):b}clone(){return new xn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(b,I,H,q,ee){yA(b,I,H,q,ee,4)}}function pc(C){const b={},I=C.resolution||256,H=C.clips?C.clips.length:1,q=C.image||new xn({width:I,height:H});if(Math.log(I)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${I}`);const ee=(re,ae,de)=>{b[C.evaluationKey]=de;const _e=C.expression.evaluate(b);q.data[re+ae+0]=Math.floor(255*_e.r/_e.a),q.data[re+ae+1]=Math.floor(255*_e.g/_e.a),q.data[re+ae+2]=Math.floor(255*_e.b/_e.a),q.data[re+ae+3]=Math.floor(255*_e.a)};if(C.clips)for(let re=0,ae=0;re<H;++re,ae+=4*I)for(let de=0,_e=0;de<I;de++,_e+=4){const Ee=de/(I-1),{start:Fe,end:Le}=C.clips[re];ee(ae,_e,Fe*(1-Ee)+Le*Ee)}else for(let re=0,ae=0;re<I;re++,ae+=4)ee(0,ae,re/(I-1));return q}gi("AlphaImage",Sl),gi("RGBAImage",xn);class Vh extends Dn{createBucket(b){return new uc(b)}constructor(b){super(b,Nh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(b){b==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gc;var Kh={get paint(){return gc=gc||new Ns({"hillshade-illumination-direction":new Fi(me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fi(me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fi(me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fi(me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fi(me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fi(me.paint_hillshade["hillshade-accent-color"])})}};class Gh extends Dn{constructor(b){super(b,Kh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Wh=ts([{name:"a_pos",components:2,type:"Int16"}],4),{members:qh}=Wh;var vA={exports:{}};function Yl(C,b,I){I=I||2;var H,q,ee,re,ae,de,_e,Ee=b&&b.length,Fe=Ee?b[0]*I:C.length,Le=mc(C,0,Fe,I,!0),ze=[];if(!Le||Le.next===Le.prev)return ze;if(Ee&&(Le=function(st,lt,ht,yt){var dt,xt,Tt,Rt=[];for(dt=0,xt=lt.length;dt<xt;dt++)(Tt=mc(st,lt[dt]*yt,dt<xt-1?lt[dt+1]*yt:st.length,yt,!1))===Tt.next&&(Tt.steiner=!0),Rt.push(tu(Tt));for(Rt.sort(Jh),dt=0;dt<Rt.length;dt++)ht=$h(Rt[dt],ht);return ht}(C,b,Le,I)),C.length>80*I){H=ee=C[0],q=re=C[1];for(var Ve=I;Ve<Fe;Ve+=I)(ae=C[Ve])<H&&(H=ae),(de=C[Ve+1])<q&&(q=de),ae>ee&&(ee=ae),de>re&&(re=de);_e=(_e=Math.max(ee-H,re-q))!==0?32767/_e:0}return Il(Le,ze,I,H,q,_e,0),ze}function mc(C,b,I,H,q){var ee,re;if(q===xA(C,b,I,H)>0)for(ee=b;ee<I;ee+=H)re=vc(ee,C[ee],C[ee+1],re);else for(ee=I-H;ee>=b;ee-=H)re=vc(ee,C[ee],C[ee+1],re);return re&&jl(re,re.next)&&(kl(re),re=re.next),re}function Ho(C,b){if(!C)return C;b||(b=C);var I,H=C;do if(I=!1,H.steiner||!jl(H,H.next)&&rs(H.prev,H,H.next)!==0)H=H.next;else{if(kl(H),(H=b=H.prev)===H.next)break;I=!0}while(I||H!==b);return b}function Il(C,b,I,H,q,ee,re){if(C){!re&&ee&&function(Ee,Fe,Le,ze){var Ve=Ee;do Ve.z===0&&(Ve.z=wA(Ve.x,Ve.y,Fe,Le,ze)),Ve.prevZ=Ve.prev,Ve.nextZ=Ve.next,Ve=Ve.next;while(Ve!==Ee);Ve.prevZ.nextZ=null,Ve.prevZ=null,function(st){var lt,ht,yt,dt,xt,Tt,Rt,fi,Ci=1;do{for(ht=st,st=null,xt=null,Tt=0;ht;){for(Tt++,yt=ht,Rt=0,lt=0;lt<Ci&&(Rt++,yt=yt.nextZ);lt++);for(fi=Ci;Rt>0||fi>0&&yt;)Rt!==0&&(fi===0||!yt||ht.z<=yt.z)?(dt=ht,ht=ht.nextZ,Rt--):(dt=yt,yt=yt.nextZ,fi--),xt?xt.nextZ=dt:st=dt,dt.prevZ=xt,xt=dt;ht=yt}xt.nextZ=null,Ci*=2}while(Tt>1)}(Ve)}(C,H,q,ee);for(var ae,de,_e=C;C.prev!==C.next;)if(ae=C.prev,de=C.next,ee?Yh(C,H,q,ee):Xh(C))b.push(ae.i/I|0),b.push(C.i/I|0),b.push(de.i/I|0),kl(C),C=de.next,_e=de.next;else if((C=de)===_e){re?re===1?Il(C=jh(Ho(C),b,I),b,I,H,q,ee,2):re===2&&Zh(C,b,I,H,q,ee):Il(Ho(C),b,I,H,q,ee,1);break}}}function Xh(C){var b=C.prev,I=C,H=C.next;if(rs(b,I,H)>=0)return!1;for(var q=b.x,ee=I.x,re=H.x,ae=b.y,de=I.y,_e=H.y,Ee=q<ee?q<re?q:re:ee<re?ee:re,Fe=ae<de?ae<_e?ae:_e:de<_e?de:_e,Le=q>ee?q>re?q:re:ee>re?ee:re,ze=ae>de?ae>_e?ae:_e:de>_e?de:_e,Ve=H.next;Ve!==b;){if(Ve.x>=Ee&&Ve.x<=Le&&Ve.y>=Fe&&Ve.y<=ze&&ol(q,ae,ee,de,re,_e,Ve.x,Ve.y)&&rs(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.next}return!0}function Yh(C,b,I,H){var q=C.prev,ee=C,re=C.next;if(rs(q,ee,re)>=0)return!1;for(var ae=q.x,de=ee.x,_e=re.x,Ee=q.y,Fe=ee.y,Le=re.y,ze=ae<de?ae<_e?ae:_e:de<_e?de:_e,Ve=Ee<Fe?Ee<Le?Ee:Le:Fe<Le?Fe:Le,st=ae>de?ae>_e?ae:_e:de>_e?de:_e,lt=Ee>Fe?Ee>Le?Ee:Le:Fe>Le?Fe:Le,ht=wA(ze,Ve,b,I,H),yt=wA(st,lt,b,I,H),dt=C.prevZ,xt=C.nextZ;dt&&dt.z>=ht&&xt&&xt.z<=yt;){if(dt.x>=ze&&dt.x<=st&&dt.y>=Ve&&dt.y<=lt&&dt!==q&&dt!==re&&ol(ae,Ee,de,Fe,_e,Le,dt.x,dt.y)&&rs(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,xt.x>=ze&&xt.x<=st&&xt.y>=Ve&&xt.y<=lt&&xt!==q&&xt!==re&&ol(ae,Ee,de,Fe,_e,Le,xt.x,xt.y)&&rs(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;dt&&dt.z>=ht;){if(dt.x>=ze&&dt.x<=st&&dt.y>=Ve&&dt.y<=lt&&dt!==q&&dt!==re&&ol(ae,Ee,de,Fe,_e,Le,dt.x,dt.y)&&rs(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;xt&&xt.z<=yt;){if(xt.x>=ze&&xt.x<=st&&xt.y>=Ve&&xt.y<=lt&&xt!==q&&xt!==re&&ol(ae,Ee,de,Fe,_e,Le,xt.x,xt.y)&&rs(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function jh(C,b,I){var H=C;do{var q=H.prev,ee=H.next.next;!jl(q,ee)&&_c(q,H,H.next,ee)&&Fl(q,ee)&&Fl(ee,q)&&(b.push(q.i/I|0),b.push(H.i/I|0),b.push(ee.i/I|0),kl(H),kl(H.next),H=C=ee),H=H.next}while(H!==C);return Ho(H)}function Zh(C,b,I,H,q,ee){var re=C;do{for(var ae=re.next.next;ae!==re.prev;){if(re.i!==ae.i&&iu(re,ae)){var de=yc(re,ae);return re=Ho(re,re.next),de=Ho(de,de.next),Il(re,b,I,H,q,ee,0),void Il(de,b,I,H,q,ee,0)}ae=ae.next}re=re.next}while(re!==C)}function Jh(C,b){return C.x-b.x}function $h(C,b){var I=function(q,ee){var re,ae=ee,de=q.x,_e=q.y,Ee=-1/0;do{if(_e<=ae.y&&_e>=ae.next.y&&ae.next.y!==ae.y){var Fe=ae.x+(_e-ae.y)*(ae.next.x-ae.x)/(ae.next.y-ae.y);if(Fe<=de&&Fe>Ee&&(Ee=Fe,re=ae.x<ae.next.x?ae:ae.next,Fe===de))return re}ae=ae.next}while(ae!==ee);if(!re)return null;var Le,ze=re,Ve=re.x,st=re.y,lt=1/0;ae=re;do de>=ae.x&&ae.x>=Ve&&de!==ae.x&&ol(_e<st?de:Ee,_e,Ve,st,_e<st?Ee:de,_e,ae.x,ae.y)&&(Le=Math.abs(_e-ae.y)/(de-ae.x),Fl(ae,q)&&(Le<lt||Le===lt&&(ae.x>re.x||ae.x===re.x&&eu(re,ae)))&&(re=ae,lt=Le)),ae=ae.next;while(ae!==ze);return re}(C,b);if(!I)return b;var H=yc(I,C);return Ho(H,H.next),Ho(I,I.next)}function eu(C,b){return rs(C.prev,C,b.prev)<0&&rs(b.next,C,C.next)<0}function wA(C,b,I,H,q){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=(C-I)*q|0)|C<<8))|C<<4))|C<<2))|C<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=(b-H)*q|0)|b<<8))|b<<4))|b<<2))|b<<1))<<1}function tu(C){var b=C,I=C;do(b.x<I.x||b.x===I.x&&b.y<I.y)&&(I=b),b=b.next;while(b!==C);return I}function ol(C,b,I,H,q,ee,re,ae){return(q-re)*(b-ae)>=(C-re)*(ee-ae)&&(C-re)*(H-ae)>=(I-re)*(b-ae)&&(I-re)*(ee-ae)>=(q-re)*(H-ae)}function iu(C,b){return C.next.i!==b.i&&C.prev.i!==b.i&&!function(I,H){var q=I;do{if(q.i!==I.i&&q.next.i!==I.i&&q.i!==H.i&&q.next.i!==H.i&&_c(q,q.next,I,H))return!0;q=q.next}while(q!==I);return!1}(C,b)&&(Fl(C,b)&&Fl(b,C)&&function(I,H){var q=I,ee=!1,re=(I.x+H.x)/2,ae=(I.y+H.y)/2;do q.y>ae!=q.next.y>ae&&q.next.y!==q.y&&re<(q.next.x-q.x)*(ae-q.y)/(q.next.y-q.y)+q.x&&(ee=!ee),q=q.next;while(q!==I);return ee}(C,b)&&(rs(C.prev,C,b.prev)||rs(C,b.prev,b))||jl(C,b)&&rs(C.prev,C,C.next)>0&&rs(b.prev,b,b.next)>0)}function rs(C,b,I){return(b.y-C.y)*(I.x-b.x)-(b.x-C.x)*(I.y-b.y)}function jl(C,b){return C.x===b.x&&C.y===b.y}function _c(C,b,I,H){var q=Jl(rs(C,b,I)),ee=Jl(rs(C,b,H)),re=Jl(rs(I,H,C)),ae=Jl(rs(I,H,b));return q!==ee&&re!==ae||!(q!==0||!Zl(C,I,b))||!(ee!==0||!Zl(C,H,b))||!(re!==0||!Zl(I,C,H))||!(ae!==0||!Zl(I,b,H))}function Zl(C,b,I){return b.x<=Math.max(C.x,I.x)&&b.x>=Math.min(C.x,I.x)&&b.y<=Math.max(C.y,I.y)&&b.y>=Math.min(C.y,I.y)}function Jl(C){return C>0?1:C<0?-1:0}function Fl(C,b){return rs(C.prev,C,C.next)<0?rs(C,b,C.next)>=0&&rs(C,C.prev,b)>=0:rs(C,b,C.prev)<0||rs(C,C.next,b)<0}function yc(C,b){var I=new bA(C.i,C.x,C.y),H=new bA(b.i,b.x,b.y),q=C.next,ee=b.prev;return C.next=b,b.prev=C,I.next=q,q.prev=I,H.next=I,I.prev=H,ee.next=H,H.prev=ee,H}function vc(C,b,I,H){var q=new bA(C,b,I);return H?(q.next=H.next,q.prev=H,H.next.prev=q,H.next=q):(q.prev=q,q.next=q),q}function kl(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function bA(C,b,I){this.i=C,this.x=b,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xA(C,b,I,H){for(var q=0,ee=b,re=I-H;ee<I;ee+=H)q+=(C[re]-C[ee])*(C[ee+1]+C[re+1]),re=ee;return q}vA.exports=Yl,vA.exports.default=Yl,Yl.deviation=function(C,b,I,H){var q=b&&b.length,ee=Math.abs(xA(C,0,q?b[0]*I:C.length,I));if(q)for(var re=0,ae=b.length;re<ae;re++)ee-=Math.abs(xA(C,b[re]*I,re<ae-1?b[re+1]*I:C.length,I));var de=0;for(re=0;re<H.length;re+=3){var _e=H[re]*I,Ee=H[re+1]*I,Fe=H[re+2]*I;de+=Math.abs((C[_e]-C[Fe])*(C[Ee+1]-C[_e+1])-(C[_e]-C[Ee])*(C[Fe+1]-C[_e+1]))}return ee===0&&de===0?0:Math.abs((de-ee)/ee)},Yl.flatten=function(C){for(var b=C[0][0].length,I={vertices:[],holes:[],dimensions:b},H=0,q=0;q<C.length;q++){for(var ee=0;ee<C[q].length;ee++)for(var re=0;re<b;re++)I.vertices.push(C[q][ee][re]);q>0&&I.holes.push(H+=C[q-1].length)}return I};var wc=ne(vA.exports);function ru(C,b,I,H,q){bc(C,b,I,H||C.length-1,q||su)}function bc(C,b,I,H,q){for(;H>I;){if(H-I>600){var ee=H-I+1,re=b-I+1,ae=Math.log(ee),de=.5*Math.exp(2*ae/3),_e=.5*Math.sqrt(ae*de*(ee-de)/ee)*(re-ee/2<0?-1:1);bc(C,b,Math.max(I,Math.floor(b-re*de/ee+_e)),Math.min(H,Math.floor(b+(ee-re)*de/ee+_e)),q)}var Ee=C[b],Fe=I,Le=H;for(Dl(C,I,b),q(C[H],Ee)>0&&Dl(C,I,H);Fe<Le;){for(Dl(C,Fe,Le),Fe++,Le--;q(C[Fe],Ee)<0;)Fe++;for(;q(C[Le],Ee)>0;)Le--}q(C[I],Ee)===0?Dl(C,I,Le):Dl(C,++Le,H),Le<=b&&(I=Le+1),b<=Le&&(H=Le-1)}}function Dl(C,b,I){var H=C[b];C[b]=C[I],C[I]=H}function su(C,b){return C<b?-1:C>b?1:0}function CA(C,b){const I=C.length;if(I<=1)return[C];const H=[];let q,ee;for(let re=0;re<I;re++){const ae=Pt(C[re]);ae!==0&&(C[re].area=Math.abs(ae),ee===void 0&&(ee=ae<0),ee===ae<0?(q&&H.push(q),q=[C[re]]):q.push(C[re]))}if(q&&H.push(q),b>1)for(let re=0;re<H.length;re++)H[re].length<=b||(ru(H[re],b,1,H[re].length-1,nu),H[re]=H[re].slice(0,b));return H}function nu(C,b){return b.area-C.area}function EA(C,b,I){const H=I.patternDependencies;let q=!1;for(const ee of b){const re=ee.paint.get(`${C}-pattern`);re.isConstant()||(q=!0);const ae=re.constantOr(null);ae&&(q=!0,H[ae.to]=!0,H[ae.from]=!0)}return q}function TA(C,b,I,H,q){const ee=q.patternDependencies;for(const re of b){const ae=re.paint.get(`${C}-pattern`).value;if(ae.kind!=="constant"){let de=ae.evaluate({zoom:H-1},I,{},q.availableImages),_e=ae.evaluate({zoom:H},I,{},q.availableImages),Ee=ae.evaluate({zoom:H+1},I,{},q.availableImages);de=de&&de.name?de.name:de,_e=_e&&_e.name?_e.name:_e,Ee=Ee&&Ee.name?Ee.name:Ee,ee[de]=!0,ee[_e]=!0,ee[Ee]=!0,I.patterns[re.id]={min:de,mid:_e,max:Ee}}}return I}class IA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(I=>I.id),this.index=b.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mt,this.indexArray=new ki,this.indexArray2=new xi,this.programConfigurations=new Ka(b.layers,b.zoom),this.segments=new Mi,this.segments2=new Mi,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(b,I,H){this.hasPattern=EA("fill",this.layers,I);const q=this.layers[0].layout.get("fill-sort-key"),ee=!q.isConstant(),re=[];for(const{feature:ae,id:de,index:_e,sourceLayerIndex:Ee}of b){const Fe=this.layers[0]._featureFilter.needGeometry,Le=_a(ae,Fe);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Le,H))continue;const ze=ee?q.evaluate(Le,{},H,I.availableImages):void 0,Ve={id:de,properties:ae.properties,type:ae.type,sourceLayerIndex:Ee,index:_e,geometry:Fe?Le.geometry:jn(ae),patterns:{},sortKey:ze};re.push(Ve)}ee&&re.sort((ae,de)=>ae.sortKey-de.sortKey);for(const ae of re){const{geometry:de,index:_e,sourceLayerIndex:Ee}=ae;if(this.hasPattern){const Fe=TA("fill",this.layers,ae,this.zoom,I);this.patternFeatures.push(Fe)}else this.addFeature(ae,de,_e,H,{});I.featureIndex.insert(b[_e].feature,de,_e,Ee,this.index)}}update(b,I,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,I,this.stateDependentLayers,H)}addFeatures(b,I,H){for(const q of this.patternFeatures)this.addFeature(q,q.geometry,q.index,I,H)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,qh),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.indexBuffer2=b.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(b,I,H,q,ee){for(const re of CA(I,500)){let ae=0;for(const ze of re)ae+=ze.length;const de=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray),_e=de.vertexLength,Ee=[],Fe=[];for(const ze of re){if(ze.length===0)continue;ze!==re[0]&&Fe.push(Ee.length/2);const Ve=this.segments2.prepareSegment(ze.length,this.layoutVertexArray,this.indexArray2),st=Ve.vertexLength;this.layoutVertexArray.emplaceBack(ze[0].x,ze[0].y),this.indexArray2.emplaceBack(st+ze.length-1,st),Ee.push(ze[0].x),Ee.push(ze[0].y);for(let lt=1;lt<ze.length;lt++)this.layoutVertexArray.emplaceBack(ze[lt].x,ze[lt].y),this.indexArray2.emplaceBack(st+lt-1,st+lt),Ee.push(ze[lt].x),Ee.push(ze[lt].y);Ve.vertexLength+=ze.length,Ve.primitiveLength+=ze.length}const Le=wc(Ee,Fe);for(let ze=0;ze<Le.length;ze+=3)this.indexArray.emplaceBack(_e+Le[ze],_e+Le[ze+1],_e+Le[ze+2]);de.vertexLength+=ae,de.primitiveLength+=Le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,ee,q)}}let xc,Bc;gi("FillBucket",IA,{omit:["layers","patternFeatures"]});var au={get paint(){return Bc=Bc||new Ns({"fill-antialias":new Fi(me.paint_fill["fill-antialias"]),"fill-opacity":new Ni(me.paint_fill["fill-opacity"]),"fill-color":new Ni(me.paint_fill["fill-color"]),"fill-outline-color":new Ni(me.paint_fill["fill-outline-color"]),"fill-translate":new Fi(me.paint_fill["fill-translate"]),"fill-translate-anchor":new Fi(me.paint_fill["fill-translate-anchor"]),"fill-pattern":new $o(me.paint_fill["fill-pattern"])})},get layout(){return xc=xc||new Ns({"fill-sort-key":new Ni(me.layout_fill["fill-sort-key"])})}};class ou extends Dn{constructor(b){super(b,au)}recalculate(b,I){super.recalculate(b,I);const H=this.paint._values["fill-outline-color"];H.value.kind==="constant"&&H.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(b){return new IA(b)}queryRadius(){return Wl(this.paint.get("fill-translate"))}queryIntersectsFeature(b,I,H,q,ee,re,ae){return nc(ql(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),re.angle,ae),q)}isTileClipped(){return!0}}const lu=ts([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Au=ts([{name:"a_centroid",components:2,type:"Int16"}],4),{members:cu}=lu;var mo={},hu=oe,Cc=ll;function ll(C,b,I,H,q){this.properties={},this.extent=I,this.type=0,this._pbf=C,this._geometry=-1,this._keys=H,this._values=q,C.readFields(uu,this,b)}function uu(C,b,I){C==1?b.id=I.readVarint():C==2?function(H,q){for(var ee=H.readVarint()+H.pos;H.pos<ee;){var re=q._keys[H.readVarint()],ae=q._values[H.readVarint()];q.properties[re]=ae}}(I,b):C==3?b.type=I.readVarint():C==4&&(b._geometry=I.pos)}function fu(C){for(var b,I,H=0,q=0,ee=C.length,re=ee-1;q<ee;re=q++)H+=((I=C[re]).x-(b=C[q]).x)*(b.y+I.y);return H}ll.types=["Unknown","Point","LineString","Polygon"],ll.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var b,I=C.readVarint()+C.pos,H=1,q=0,ee=0,re=0,ae=[];C.pos<I;){if(q<=0){var de=C.readVarint();H=7&de,q=de>>3}if(q--,H===1||H===2)ee+=C.readSVarint(),re+=C.readSVarint(),H===1&&(b&&ae.push(b),b=[]),b.push(new hu(ee,re));else{if(H!==7)throw new Error("unknown command "+H);b&&b.push(b[0].clone())}}return b&&ae.push(b),ae},ll.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var b=C.readVarint()+C.pos,I=1,H=0,q=0,ee=0,re=1/0,ae=-1/0,de=1/0,_e=-1/0;C.pos<b;){if(H<=0){var Ee=C.readVarint();I=7&Ee,H=Ee>>3}if(H--,I===1||I===2)(q+=C.readSVarint())<re&&(re=q),q>ae&&(ae=q),(ee+=C.readSVarint())<de&&(de=ee),ee>_e&&(_e=ee);else if(I!==7)throw new Error("unknown command "+I)}return[re,de,ae,_e]},ll.prototype.toGeoJSON=function(C,b,I){var H,q,ee=this.extent*Math.pow(2,I),re=this.extent*C,ae=this.extent*b,de=this.loadGeometry(),_e=ll.types[this.type];function Ee(ze){for(var Ve=0;Ve<ze.length;Ve++){var st=ze[Ve];ze[Ve]=[360*(st.x+re)/ee-180,360/Math.PI*Math.atan(Math.exp((180-360*(st.y+ae)/ee)*Math.PI/180))-90]}}switch(this.type){case 1:var Fe=[];for(H=0;H<de.length;H++)Fe[H]=de[H][0];Ee(de=Fe);break;case 2:for(H=0;H<de.length;H++)Ee(de[H]);break;case 3:for(de=function(ze){var Ve=ze.length;if(Ve<=1)return[ze];for(var st,lt,ht=[],yt=0;yt<Ve;yt++){var dt=fu(ze[yt]);dt!==0&&(lt===void 0&&(lt=dt<0),lt===dt<0?(st&&ht.push(st),st=[ze[yt]]):st.push(ze[yt]))}return st&&ht.push(st),ht}(de),H=0;H<de.length;H++)for(q=0;q<de[H].length;q++)Ee(de[H][q])}de.length===1?de=de[0]:_e="Multi"+_e;var Le={type:"Feature",geometry:{type:_e,coordinates:de},properties:this.properties};return"id"in this&&(Le.id=this.id),Le};var du=Cc,Ec=Tc;function Tc(C,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(pu,this,b),this.length=this._features.length}function pu(C,b,I){C===15?b.version=I.readVarint():C===1?b.name=I.readString():C===5?b.extent=I.readVarint():C===2?b._features.push(I.pos):C===3?b._keys.push(I.readString()):C===4&&b._values.push(function(H){for(var q=null,ee=H.readVarint()+H.pos;H.pos<ee;){var re=H.readVarint()>>3;q=re===1?H.readString():re===2?H.readFloat():re===3?H.readDouble():re===4?H.readVarint64():re===5?H.readVarint():re===6?H.readSVarint():re===7?H.readBoolean():null}return q}(I))}Tc.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var b=this._pbf.readVarint()+this._pbf.pos;return new du(this._pbf,b,this.extent,this._keys,this._values)};var gu=Ec;function mu(C,b,I){if(C===3){var H=new gu(I,I.readVarint()+I.pos);H.length&&(b[H.name]=H)}}mo.VectorTile=function(C,b){this.layers=C.readFields(mu,{},b)},mo.VectorTileFeature=Cc,mo.VectorTileLayer=Ec;const _u=mo.VectorTileFeature.types,FA=Math.pow(2,13);function Ul(C,b,I,H,q,ee,re,ae){C.emplaceBack(b,I,2*Math.floor(H*FA)+re,q*FA*2,ee*FA*2,Math.round(ae))}class kA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(I=>I.id),this.index=b.index,this.hasPattern=!1,this.layoutVertexArray=new It,this.centroidVertexArray=new Et,this.indexArray=new ki,this.programConfigurations=new Ka(b.layers,b.zoom),this.segments=new Mi,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(b,I,H){this.features=[],this.hasPattern=EA("fill-extrusion",this.layers,I);for(const{feature:q,id:ee,index:re,sourceLayerIndex:ae}of b){const de=this.layers[0]._featureFilter.needGeometry,_e=_a(q,de);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),_e,H))continue;const Ee={id:ee,sourceLayerIndex:ae,index:re,geometry:de?_e.geometry:jn(q),properties:q.properties,type:q.type,patterns:{}};this.hasPattern?this.features.push(TA("fill-extrusion",this.layers,Ee,this.zoom,I)):this.addFeature(Ee,Ee.geometry,re,H,{}),I.featureIndex.insert(q,Ee.geometry,re,ae,this.index,!0)}}addFeatures(b,I,H){for(const q of this.features){const{geometry:ee}=q;this.addFeature(q,ee,q.index,I,H)}}update(b,I,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,I,this.stateDependentLayers,H)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,cu),this.centroidVertexBuffer=b.createVertexBuffer(this.centroidVertexArray,Au.members,!0),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(b,I,H,q,ee){const re={x:0,y:0,vertexCount:0};for(const ae of CA(I,500)){let de=0;for(const Ve of ae)de+=Ve.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ve of ae){if(Ve.length===0||vu(Ve))continue;let st=0;for(let lt=0;lt<Ve.length;lt++){const ht=Ve[lt];if(lt>=1){const yt=Ve[lt-1];if(!yu(ht,yt)){_e.vertexLength+4>Mi.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const dt=ht.sub(yt)._perp()._unit(),xt=yt.dist(ht);st+xt>32768&&(st=0),Ul(this.layoutVertexArray,ht.x,ht.y,dt.x,dt.y,0,0,st),Ul(this.layoutVertexArray,ht.x,ht.y,dt.x,dt.y,0,1,st),re.x+=2*ht.x,re.y+=2*ht.y,re.vertexCount+=2,st+=xt,Ul(this.layoutVertexArray,yt.x,yt.y,dt.x,dt.y,0,0,st),Ul(this.layoutVertexArray,yt.x,yt.y,dt.x,dt.y,0,1,st),re.x+=2*yt.x,re.y+=2*yt.y,re.vertexCount+=2;const Tt=_e.vertexLength;this.indexArray.emplaceBack(Tt,Tt+2,Tt+1),this.indexArray.emplaceBack(Tt+1,Tt+2,Tt+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+de>Mi.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(de,this.layoutVertexArray,this.indexArray)),_u[b.type]!=="Polygon")continue;const Ee=[],Fe=[],Le=_e.vertexLength;for(const Ve of ae)if(Ve.length!==0){Ve!==ae[0]&&Fe.push(Ee.length/2);for(let st=0;st<Ve.length;st++){const lt=Ve[st];Ul(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),re.x+=lt.x,re.y+=lt.y,re.vertexCount+=1,Ee.push(lt.x),Ee.push(lt.y)}}const ze=wc(Ee,Fe);for(let Ve=0;Ve<ze.length;Ve+=3)this.indexArray.emplaceBack(Le+ze[Ve],Le+ze[Ve+2],Le+ze[Ve+1]);_e.primitiveLength+=ze.length/3,_e.vertexLength+=de}for(let ae=0;ae<re.vertexCount;ae++)this.centroidVertexArray.emplaceBack(Math.floor(re.x/re.vertexCount),Math.floor(re.y/re.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,ee,q)}}function yu(C,b){return C.x===b.x&&(C.x<0||C.x>Xr)||C.y===b.y&&(C.y<0||C.y>Xr)}function vu(C){return C.every(b=>b.x<0)||C.every(b=>b.x>Xr)||C.every(b=>b.y<0)||C.every(b=>b.y>Xr)}let Sc;gi("FillExtrusionBucket",kA,{omit:["layers","features"]});var wu={get paint(){return Sc=Sc||new Ns({"fill-extrusion-opacity":new Fi(me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ni(me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fi(me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fi(me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $o(me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ni(me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ni(me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fi(me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class bu extends Dn{constructor(b){super(b,wu)}createBucket(b){return new kA(b)}queryRadius(){return Wl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(b,I,H,q,ee,re,ae,de){const _e=ql(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),re.angle,ae),Ee=this.paint.get("fill-extrusion-height").evaluate(I,H),Fe=this.paint.get("fill-extrusion-base").evaluate(I,H),Le=function(Ve,st,lt,ht){const yt=[];for(const dt of Ve){const xt=[dt.x,dt.y,0,1];Xl(xt,xt,st),yt.push(new pe(xt[0]/xt[3],xt[1]/xt[3]))}return yt}(_e,de),ze=function(Ve,st,lt,ht){const yt=[],dt=[],xt=ht[8]*st,Tt=ht[9]*st,Rt=ht[10]*st,fi=ht[11]*st,Ci=ht[8]*lt,ui=ht[9]*lt,li=ht[10]*lt,ti=ht[11]*lt;for(const yi of Ve){const si=[],qt=[];for(const Pi of yi){const Si=Pi.x,ir=Pi.y,Rr=ht[0]*Si+ht[4]*ir+ht[12],zr=ht[1]*Si+ht[5]*ir+ht[13],fs=ht[2]*Si+ht[6]*ir+ht[14],fn=ht[3]*Si+ht[7]*ir+ht[15],Gs=fs+Rt,os=fn+fi,ms=Rr+Ci,Ss=zr+ui,nn=fs+li,Ws=fn+ti,ls=new pe((Rr+xt)/os,(zr+Tt)/os);ls.z=Gs/os,si.push(ls);const ds=new pe(ms/Ws,Ss/Ws);ds.z=nn/Ws,qt.push(ds)}yt.push(si),dt.push(qt)}return[yt,dt]}(q,Fe,Ee,de);return function(Ve,st,lt){let ht=1/0;nc(lt,st)&&(ht=Ic(lt,st[0]));for(let yt=0;yt<st.length;yt++){const dt=st[yt],xt=Ve[yt];for(let Tt=0;Tt<dt.length-1;Tt++){const Rt=dt[Tt],fi=[Rt,dt[Tt+1],xt[Tt+1],xt[Tt],Rt];sc(lt,fi)&&(ht=Math.min(ht,Ic(lt,fi)))}}return ht!==1/0&&ht}(ze[0],ze[1],Le)}}function Ml(C,b){return C.x*b.x+C.y*b.y}function Ic(C,b){if(C.length===1){let I=0;const H=b[I++];let q;for(;!q||H.equals(q);)if(q=b[I++],!q)return 1/0;for(;I<b.length;I++){const ee=b[I],re=C[0],ae=q.sub(H),de=ee.sub(H),_e=re.sub(H),Ee=Ml(ae,ae),Fe=Ml(ae,de),Le=Ml(de,de),ze=Ml(_e,ae),Ve=Ml(_e,de),st=Ee*Le-Fe*Fe,lt=(Le*ze-Fe*Ve)/st,ht=(Ee*Ve-Fe*ze)/st,yt=H.z*(1-lt-ht)+q.z*lt+ee.z*ht;if(isFinite(yt))return yt}return 1/0}{let I=1/0;for(const H of b)I=Math.min(I,H.z);return I}}const xu=ts([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Bu}=xu,Cu=ts([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Eu}=Cu,Tu=mo.VectorTileFeature.types,Su=Math.cos(Math.PI/180*37.5),Fc=Math.pow(2,14)/.5;class DA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(I=>I.id),this.index=b.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(I=>{this.gradients[I.id]={}}),this.layoutVertexArray=new kt,this.layoutVertexArray2=new Ot,this.indexArray=new ki,this.programConfigurations=new Ka(b.layers,b.zoom),this.segments=new Mi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(b,I,H){this.hasPattern=EA("line",this.layers,I);const q=this.layers[0].layout.get("line-sort-key"),ee=!q.isConstant(),re=[];for(const{feature:ae,id:de,index:_e,sourceLayerIndex:Ee}of b){const Fe=this.layers[0]._featureFilter.needGeometry,Le=_a(ae,Fe);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Le,H))continue;const ze=ee?q.evaluate(Le,{},H):void 0,Ve={id:de,properties:ae.properties,type:ae.type,sourceLayerIndex:Ee,index:_e,geometry:Fe?Le.geometry:jn(ae),patterns:{},sortKey:ze};re.push(Ve)}ee&&re.sort((ae,de)=>ae.sortKey-de.sortKey);for(const ae of re){const{geometry:de,index:_e,sourceLayerIndex:Ee}=ae;if(this.hasPattern){const Fe=TA("line",this.layers,ae,this.zoom,I);this.patternFeatures.push(Fe)}else this.addFeature(ae,de,_e,H,{});I.featureIndex.insert(b[_e].feature,de,_e,Ee,this.index)}}update(b,I,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,I,this.stateDependentLayers,H)}addFeatures(b,I,H){for(const q of this.patternFeatures)this.addFeature(q,q.geometry,q.index,I,H)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=b.createVertexBuffer(this.layoutVertexArray2,Eu)),this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Bu),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(b){if(b.properties&&Object.prototype.hasOwnProperty.call(b.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(b.properties,"mapbox_clip_end"))return{start:+b.properties.mapbox_clip_start,end:+b.properties.mapbox_clip_end}}addFeature(b,I,H,q,ee){const re=this.layers[0].layout,ae=re.get("line-join").evaluate(b,{}),de=re.get("line-cap"),_e=re.get("line-miter-limit"),Ee=re.get("line-round-limit");this.lineClips=this.lineFeatureClips(b);for(const Fe of I)this.addLine(Fe,b,ae,de,_e,Ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,ee,q)}addLine(b,I,H,q,ee,re){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ht=0;ht<b.length-1;ht++)this.totalDistance+=b[ht].dist(b[ht+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ae=Tu[I.type]==="Polygon";let de=b.length;for(;de>=2&&b[de-1].equals(b[de-2]);)de--;let _e=0;for(;_e<de-1&&b[_e].equals(b[_e+1]);)_e++;if(de<(ae?3:2))return;H==="bevel"&&(ee=1.05);const Ee=this.overscaling<=16?15*Xr/(512*this.overscaling):0,Fe=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Le,ze,Ve,st,lt;this.e1=this.e2=-1,ae&&(Le=b[de-2],lt=b[_e].sub(Le)._unit()._perp());for(let ht=_e;ht<de;ht++){if(Ve=ht===de-1?ae?b[_e+1]:void 0:b[ht+1],Ve&&b[ht].equals(Ve))continue;lt&&(st=lt),Le&&(ze=Le),Le=b[ht],lt=Ve?Ve.sub(Le)._unit()._perp():st,st=st||lt;let yt=st.add(lt);yt.x===0&&yt.y===0||yt._unit();const dt=st.x*lt.x+st.y*lt.y,xt=yt.x*lt.x+yt.y*lt.y,Tt=xt!==0?1/xt:1/0,Rt=2*Math.sqrt(2-2*xt),fi=xt<Su&&ze&&Ve,Ci=st.x*lt.y-st.y*lt.x>0;if(fi&&ht>_e){const ti=Le.dist(ze);if(ti>2*Ee){const yi=Le.sub(Le.sub(ze)._mult(Ee/ti)._round());this.updateDistance(ze,yi),this.addCurrentVertex(yi,st,0,0,Fe),ze=yi}}const ui=ze&&Ve;let li=ui?H:ae?"butt":q;if(ui&&li==="round"&&(Tt<re?li="miter":Tt<=2&&(li="fakeround")),li==="miter"&&Tt>ee&&(li="bevel"),li==="bevel"&&(Tt>2&&(li="flipbevel"),Tt<ee&&(li="miter")),ze&&this.updateDistance(ze,Le),li==="miter")yt._mult(Tt),this.addCurrentVertex(Le,yt,0,0,Fe);else if(li==="flipbevel"){if(Tt>100)yt=lt.mult(-1);else{const ti=Tt*st.add(lt).mag()/st.sub(lt).mag();yt._perp()._mult(ti*(Ci?-1:1))}this.addCurrentVertex(Le,yt,0,0,Fe),this.addCurrentVertex(Le,yt.mult(-1),0,0,Fe)}else if(li==="bevel"||li==="fakeround"){const ti=-Math.sqrt(Tt*Tt-1),yi=Ci?ti:0,si=Ci?0:ti;if(ze&&this.addCurrentVertex(Le,st,yi,si,Fe),li==="fakeround"){const qt=Math.round(180*Rt/Math.PI/20);for(let Pi=1;Pi<qt;Pi++){let Si=Pi/qt;if(Si!==.5){const Rr=Si-.5;Si+=Si*Rr*(Si-1)*((1.0904+dt*(dt*(3.55645-1.43519*dt)-3.2452))*Rr*Rr+(.848013+dt*(.215638*dt-1.06021)))}const ir=lt.sub(st)._mult(Si)._add(st)._unit()._mult(Ci?-1:1);this.addHalfVertex(Le,ir.x,ir.y,!1,Ci,0,Fe)}}Ve&&this.addCurrentVertex(Le,lt,-yi,-si,Fe)}else if(li==="butt")this.addCurrentVertex(Le,yt,0,0,Fe);else if(li==="square"){const ti=ze?1:-1;this.addCurrentVertex(Le,yt,ti,ti,Fe)}else li==="round"&&(ze&&(this.addCurrentVertex(Le,st,0,0,Fe),this.addCurrentVertex(Le,st,1,1,Fe,!0)),Ve&&(this.addCurrentVertex(Le,lt,-1,-1,Fe,!0),this.addCurrentVertex(Le,lt,0,0,Fe)));if(fi&&ht<de-1){const ti=Le.dist(Ve);if(ti>2*Ee){const yi=Le.add(Ve.sub(Le)._mult(Ee/ti)._round());this.updateDistance(Le,yi),this.addCurrentVertex(yi,lt,0,0,Fe),Le=yi}}}}addCurrentVertex(b,I,H,q,ee,re=!1){const ae=I.y*q-I.x,de=-I.y-I.x*q;this.addHalfVertex(b,I.x+I.y*H,I.y-I.x*H,re,!1,H,ee),this.addHalfVertex(b,ae,de,re,!0,-q,ee),this.distance>Fc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(b,I,H,q,ee,re))}addHalfVertex({x:b,y:I},H,q,ee,re,ae,de){const _e=.5*(this.lineClips?this.scaledDistance*(Fc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((b<<1)+(ee?1:0),(I<<1)+(re?1:0),Math.round(63*H)+128,Math.round(63*q)+128,1+(ae===0?0:ae<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ee=de.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ee),de.primitiveLength++),re?this.e2=Ee:this.e1=Ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(b,I){this.distance+=b.dist(I),this.updateScaledDistance()}}let kc,Dc;gi("LineBucket",DA,{omit:["layers","patternFeatures"]});var Uc={get paint(){return Dc=Dc||new Ns({"line-opacity":new Ni(me.paint_line["line-opacity"]),"line-color":new Ni(me.paint_line["line-color"]),"line-translate":new Fi(me.paint_line["line-translate"]),"line-translate-anchor":new Fi(me.paint_line["line-translate-anchor"]),"line-width":new Ni(me.paint_line["line-width"]),"line-gap-width":new Ni(me.paint_line["line-gap-width"]),"line-offset":new Ni(me.paint_line["line-offset"]),"line-blur":new Ni(me.paint_line["line-blur"]),"line-dasharray":new yl(me.paint_line["line-dasharray"]),"line-pattern":new $o(me.paint_line["line-pattern"]),"line-gradient":new vl(me.paint_line["line-gradient"])})},get layout(){return kc=kc||new Ns({"line-cap":new Fi(me.layout_line["line-cap"]),"line-join":new Ni(me.layout_line["line-join"]),"line-miter-limit":new Fi(me.layout_line["line-miter-limit"]),"line-round-limit":new Fi(me.layout_line["line-round-limit"]),"line-sort-key":new Ni(me.layout_line["line-sort-key"])})}};class Iu extends Ni{possiblyEvaluate(b,I){return I=new Er(Math.floor(I.zoom),{now:I.now,fadeDuration:I.fadeDuration,zoomHistory:I.zoomHistory,transition:I.transition}),super.possiblyEvaluate(b,I)}evaluate(b,I,H,q){return I=Ye({},I,{zoom:Math.floor(I.zoom)}),super.evaluate(b,I,H,q)}}let $l;class Fu extends Dn{constructor(b){super(b,Uc),this.gradientVersion=0,$l||($l=new Iu(Uc.paint.properties["line-width"].specification),$l.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(b){b==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ta,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(b,I){super.recalculate(b,I),this.paint._values["line-floorwidth"]=$l.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,b)}createBucket(b){return new DA(b)}queryRadius(b){const I=b,H=Mc(El("line-width",this,I),El("line-gap-width",this,I)),q=El("line-offset",this,I);return H/2+Math.abs(q)+Wl(this.paint.get("line-translate"))}queryIntersectsFeature(b,I,H,q,ee,re,ae){const de=ql(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),re.angle,ae),_e=ae/2*Mc(this.paint.get("line-width").evaluate(I,H),this.paint.get("line-gap-width").evaluate(I,H)),Ee=this.paint.get("line-offset").evaluate(I,H);return Ee&&(q=function(Fe,Le){const ze=[];for(let Ve=0;Ve<Fe.length;Ve++){const st=Fe[Ve],lt=[];for(let ht=0;ht<st.length;ht++){const yt=st[ht-1],dt=st[ht],xt=st[ht+1],Tt=ht===0?new pe(0,0):dt.sub(yt)._unit()._perp(),Rt=ht===st.length-1?new pe(0,0):xt.sub(dt)._unit()._perp(),fi=Tt._add(Rt)._unit(),Ci=fi.x*Rt.x+fi.y*Rt.y;Ci!==0&&fi._mult(1/Ci),lt.push(fi._mult(Le)._add(dt))}ze.push(lt)}return ze}(q,Ee*ae)),function(Fe,Le,ze){for(let Ve=0;Ve<Le.length;Ve++){const st=Le[Ve];if(Fe.length>=3){for(let lt=0;lt<st.length;lt++)if(nl(Fe,st[lt]))return!0}if(Lh(Fe,st,ze))return!0}return!1}(de,q,_e)}isTileClipped(){return!0}}function Mc(C,b){return b>0?b+2*C:C}const ku=ts([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Du=ts([{name:"a_projected_pos",components:3,type:"Float32"}],4);ts([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Uu=ts([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ts([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Pc=ts([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Mu=ts([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Pu(C,b,I){return C.sections.forEach(H=>{H.text=function(q,ee,re){const ae=ee.layout.get("text-transform").evaluate(re,{});return ae==="uppercase"?q=q.toLocaleUpperCase():ae==="lowercase"&&(q=q.toLocaleLowerCase()),ns.applyArabicShaping&&(q=ns.applyArabicShaping(q)),q}(H.text,b,I)}),C}ts([{name:"triangle",components:3,type:"Uint16"}]),ts([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ts([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ts([{type:"Float32",name:"offsetX"}]),ts([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ts([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Pl={"!":"ï¸","#":"ï¼",$:"ï¼","%":"ï¼","&":"ï¼","(":"ï¸µ",")":"ï¸¶","*":"ï¼","+":"ï¼",",":"ï¸","-":"ï¸²",".":"ã»","/":"ï¼",":":"ï¸",";":"ï¸","<":"ï¸¿","=":"ï¼",">":"ï¹","?":"ï¸","@":"ï¼ ","[":"ï¹","\\":"ï¼¼","]":"ï¹","^":"ï¼¾",_:"ï¸³","`":"ï½","{":"ï¸·","|":"â","}":"ï¸¸","~":"ï½","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â":"ï¸²","â":"ï¸±","â":"ï¹","â":"ï¹","â":"ï¹","â":"ï¹","â¦":"ï¸","â§":"ã»","â©":"ï¿¦","ã":"ï¸","ã":"ï¸","ã":"ï¸¿","ã":"ï¹","ã":"ï¸½","ã":"ï¸¾","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¸»","ã":"ï¸¼","ã":"ï¸¹","ã":"ï¸º","ã":"ï¸","ã":"ï¸","ï¼":"ï¸","ï¼":"ï¸µ","ï¼":"ï¸¶","ï¼":"ï¸","ï¼":"ï¸²","ï¼":"ã»","ï¼":"ï¸","ï¼":"ï¸","ï¼":"ï¸¿","ï¼":"ï¹","ï¼":"ï¸","ï¼»":"ï¹","ï¼½":"ï¹","ï¼¿":"ï¸³","ï½":"ï¸·","ï½":"â","ï½":"ï¸¸","ï½":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸","ï½¢":"ï¹","ï½£":"ï¹"};var us=24,Lc=Dr,Qc=function(C,b,I,H,q){var ee,re,ae=8*q-H-1,de=(1<<ae)-1,_e=de>>1,Ee=-7,Fe=q-1,Le=-1,ze=C[b+Fe];for(Fe+=Le,ee=ze&(1<<-Ee)-1,ze>>=-Ee,Ee+=ae;Ee>0;ee=256*ee+C[b+Fe],Fe+=Le,Ee-=8);for(re=ee&(1<<-Ee)-1,ee>>=-Ee,Ee+=H;Ee>0;re=256*re+C[b+Fe],Fe+=Le,Ee-=8);if(ee===0)ee=1-_e;else{if(ee===de)return re?NaN:1/0*(ze?-1:1);re+=Math.pow(2,H),ee-=_e}return(ze?-1:1)*re*Math.pow(2,ee-H)},Oc=function(C,b,I,H,q,ee){var re,ae,de,_e=8*ee-q-1,Ee=(1<<_e)-1,Fe=Ee>>1,Le=q===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=0,Ve=1,st=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(ae=isNaN(b)?1:0,re=Ee):(re=Math.floor(Math.log(b)/Math.LN2),b*(de=Math.pow(2,-re))<1&&(re--,de*=2),(b+=re+Fe>=1?Le/de:Le*Math.pow(2,1-Fe))*de>=2&&(re++,de/=2),re+Fe>=Ee?(ae=0,re=Ee):re+Fe>=1?(ae=(b*de-1)*Math.pow(2,q),re+=Fe):(ae=b*Math.pow(2,Fe-1)*Math.pow(2,q),re=0));q>=8;C[I+ze]=255&ae,ze+=Ve,ae/=256,q-=8);for(re=re<<q|ae,_e+=q;_e>0;C[I+ze]=255&re,ze+=Ve,re/=256,_e-=8);C[I+ze-Ve]|=128*st};function Dr(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}Dr.Varint=0,Dr.Fixed64=1,Dr.Bytes=2,Dr.Fixed32=5;var UA=4294967296,Rc=1/UA,Hc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Wa(C){return C.type===Dr.Bytes?C.readVarint()+C.pos:C.pos+1}function Al(C,b,I){return I?4294967296*b+(C>>>0):4294967296*(b>>>0)+(C>>>0)}function zc(C,b,I){var H=b<=16383?1:b<=2097151?2:b<=268435455?3:Math.floor(Math.log(b)/(7*Math.LN2));I.realloc(H);for(var q=I.pos-1;q>=C;q--)I.buf[q+H]=I.buf[q]}function Lu(C,b){for(var I=0;I<C.length;I++)b.writeVarint(C[I])}function Qu(C,b){for(var I=0;I<C.length;I++)b.writeSVarint(C[I])}function Ou(C,b){for(var I=0;I<C.length;I++)b.writeFloat(C[I])}function Ru(C,b){for(var I=0;I<C.length;I++)b.writeDouble(C[I])}function Hu(C,b){for(var I=0;I<C.length;I++)b.writeBoolean(C[I])}function zu(C,b){for(var I=0;I<C.length;I++)b.writeFixed32(C[I])}function Nu(C,b){for(var I=0;I<C.length;I++)b.writeSFixed32(C[I])}function Vu(C,b){for(var I=0;I<C.length;I++)b.writeFixed64(C[I])}function Ku(C,b){for(var I=0;I<C.length;I++)b.writeSFixed64(C[I])}function eA(C,b){return(C[b]|C[b+1]<<8|C[b+2]<<16)+16777216*C[b+3]}function cl(C,b,I){C[I]=b,C[I+1]=b>>>8,C[I+2]=b>>>16,C[I+3]=b>>>24}function Nc(C,b){return(C[b]|C[b+1]<<8|C[b+2]<<16)+(C[b+3]<<24)}Dr.prototype={destroy:function(){this.buf=null},readFields:function(C,b,I){for(I=I||this.length;this.pos<I;){var H=this.readVarint(),q=H>>3,ee=this.pos;this.type=7&H,C(q,b,this),this.pos===ee&&this.skip(H)}return b},readMessage:function(C,b){return this.readFields(C,b,this.readVarint()+this.pos)},readFixed32:function(){var C=eA(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=Nc(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=eA(this.buf,this.pos)+eA(this.buf,this.pos+4)*UA;return this.pos+=8,C},readSFixed64:function(){var C=eA(this.buf,this.pos)+Nc(this.buf,this.pos+4)*UA;return this.pos+=8,C},readFloat:function(){var C=Qc(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=Qc(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var b,I,H=this.buf;return b=127&(I=H[this.pos++]),I<128?b:(b|=(127&(I=H[this.pos++]))<<7,I<128?b:(b|=(127&(I=H[this.pos++]))<<14,I<128?b:(b|=(127&(I=H[this.pos++]))<<21,I<128?b:function(q,ee,re){var ae,de,_e=re.buf;if(ae=(112&(de=_e[re.pos++]))>>4,de<128||(ae|=(127&(de=_e[re.pos++]))<<3,de<128)||(ae|=(127&(de=_e[re.pos++]))<<10,de<128)||(ae|=(127&(de=_e[re.pos++]))<<17,de<128)||(ae|=(127&(de=_e[re.pos++]))<<24,de<128)||(ae|=(1&(de=_e[re.pos++]))<<31,de<128))return Al(q,ae,ee);throw new Error("Expected varint not more than 10 bytes")}(b|=(15&(I=H[this.pos]))<<28,C,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2==1?(C+1)/-2:C/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var C=this.readVarint()+this.pos,b=this.pos;return this.pos=C,C-b>=12&&Hc?function(I,H,q){return Hc.decode(I.subarray(H,q))}(this.buf,b,C):function(I,H,q){for(var ee="",re=H;re<q;){var ae,de,_e,Ee=I[re],Fe=null,Le=Ee>239?4:Ee>223?3:Ee>191?2:1;if(re+Le>q)break;Le===1?Ee<128&&(Fe=Ee):Le===2?(192&(ae=I[re+1]))==128&&(Fe=(31&Ee)<<6|63&ae)<=127&&(Fe=null):Le===3?(de=I[re+2],(192&(ae=I[re+1]))==128&&(192&de)==128&&((Fe=(15&Ee)<<12|(63&ae)<<6|63&de)<=2047||Fe>=55296&&Fe<=57343)&&(Fe=null)):Le===4&&(de=I[re+2],_e=I[re+3],(192&(ae=I[re+1]))==128&&(192&de)==128&&(192&_e)==128&&((Fe=(15&Ee)<<18|(63&ae)<<12|(63&de)<<6|63&_e)<=65535||Fe>=1114112)&&(Fe=null)),Fe===null?(Fe=65533,Le=1):Fe>65535&&(Fe-=65536,ee+=String.fromCharCode(Fe>>>10&1023|55296),Fe=56320|1023&Fe),ee+=String.fromCharCode(Fe),re+=Le}return ee}(this.buf,b,C)},readBytes:function(){var C=this.readVarint()+this.pos,b=this.buf.subarray(this.pos,C);return this.pos=C,b},readPackedVarint:function(C,b){if(this.type!==Dr.Bytes)return C.push(this.readVarint(b));var I=Wa(this);for(C=C||[];this.pos<I;)C.push(this.readVarint(b));return C},readPackedSVarint:function(C){if(this.type!==Dr.Bytes)return C.push(this.readSVarint());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==Dr.Bytes)return C.push(this.readBoolean());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==Dr.Bytes)return C.push(this.readFloat());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==Dr.Bytes)return C.push(this.readDouble());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==Dr.Bytes)return C.push(this.readFixed32());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==Dr.Bytes)return C.push(this.readSFixed32());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==Dr.Bytes)return C.push(this.readFixed64());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==Dr.Bytes)return C.push(this.readSFixed64());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readSFixed64());return C},skip:function(C){var b=7&C;if(b===Dr.Varint)for(;this.buf[this.pos++]>127;);else if(b===Dr.Bytes)this.pos=this.readVarint()+this.pos;else if(b===Dr.Fixed32)this.pos+=4;else{if(b!==Dr.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(C,b){this.writeVarint(C<<3|b)},realloc:function(C){for(var b=this.length||16;b<this.pos+C;)b*=2;if(b!==this.length){var I=new Uint8Array(b);I.set(this.buf),this.buf=I,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),cl(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),cl(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),cl(this.buf,-1&C,this.pos),cl(this.buf,Math.floor(C*Rc),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),cl(this.buf,-1&C,this.pos),cl(this.buf,Math.floor(C*Rc),this.pos+4),this.pos+=8},writeVarint:function(C){(C=+C||0)>268435455||C<0?function(b,I){var H,q;if(b>=0?(H=b%4294967296|0,q=b/4294967296|0):(q=~(-b/4294967296),4294967295^(H=~(-b%4294967296))?H=H+1|0:(H=0,q=q+1|0)),b>=18446744073709552e3||b<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");I.realloc(10),function(ee,re,ae){ae.buf[ae.pos++]=127&ee|128,ee>>>=7,ae.buf[ae.pos++]=127&ee|128,ee>>>=7,ae.buf[ae.pos++]=127&ee|128,ee>>>=7,ae.buf[ae.pos++]=127&ee|128,ae.buf[ae.pos]=127&(ee>>>=7)}(H,0,I),function(ee,re){var ae=(7&ee)<<4;re.buf[re.pos++]|=ae|((ee>>>=3)?128:0),ee&&(re.buf[re.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(re.buf[re.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(re.buf[re.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(re.buf[re.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(re.buf[re.pos++]=127&ee)))))}(q,I)}(C,this):(this.realloc(4),this.buf[this.pos++]=127&C|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=C>>>7&127))))},writeSVarint:function(C){this.writeVarint(C<0?2*-C-1:2*C)},writeBoolean:function(C){this.writeVarint(!!C)},writeString:function(C){C=String(C),this.realloc(4*C.length),this.pos++;var b=this.pos;this.pos=function(H,q,ee){for(var re,ae,de=0;de<q.length;de++){if((re=q.charCodeAt(de))>55295&&re<57344){if(!ae){re>56319||de+1===q.length?(H[ee++]=239,H[ee++]=191,H[ee++]=189):ae=re;continue}if(re<56320){H[ee++]=239,H[ee++]=191,H[ee++]=189,ae=re;continue}re=ae-55296<<10|re-56320|65536,ae=null}else ae&&(H[ee++]=239,H[ee++]=191,H[ee++]=189,ae=null);re<128?H[ee++]=re:(re<2048?H[ee++]=re>>6|192:(re<65536?H[ee++]=re>>12|224:(H[ee++]=re>>18|240,H[ee++]=re>>12&63|128),H[ee++]=re>>6&63|128),H[ee++]=63&re|128)}return ee}(this.buf,C,this.pos);var I=this.pos-b;I>=128&&zc(b,I,this),this.pos=b-1,this.writeVarint(I),this.pos+=I},writeFloat:function(C){this.realloc(4),Oc(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),Oc(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var b=C.length;this.writeVarint(b),this.realloc(b);for(var I=0;I<b;I++)this.buf[this.pos++]=C[I]},writeRawMessage:function(C,b){this.pos++;var I=this.pos;C(b,this);var H=this.pos-I;H>=128&&zc(I,H,this),this.pos=I-1,this.writeVarint(H),this.pos+=H},writeMessage:function(C,b,I){this.writeTag(C,Dr.Bytes),this.writeRawMessage(b,I)},writePackedVarint:function(C,b){b.length&&this.writeMessage(C,Lu,b)},writePackedSVarint:function(C,b){b.length&&this.writeMessage(C,Qu,b)},writePackedBoolean:function(C,b){b.length&&this.writeMessage(C,Hu,b)},writePackedFloat:function(C,b){b.length&&this.writeMessage(C,Ou,b)},writePackedDouble:function(C,b){b.length&&this.writeMessage(C,Ru,b)},writePackedFixed32:function(C,b){b.length&&this.writeMessage(C,zu,b)},writePackedSFixed32:function(C,b){b.length&&this.writeMessage(C,Nu,b)},writePackedFixed64:function(C,b){b.length&&this.writeMessage(C,Vu,b)},writePackedSFixed64:function(C,b){b.length&&this.writeMessage(C,Ku,b)},writeBytesField:function(C,b){this.writeTag(C,Dr.Bytes),this.writeBytes(b)},writeFixed32Field:function(C,b){this.writeTag(C,Dr.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(C,b){this.writeTag(C,Dr.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(C,b){this.writeTag(C,Dr.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(C,b){this.writeTag(C,Dr.Fixed64),this.writeSFixed64(b)},writeVarintField:function(C,b){this.writeTag(C,Dr.Varint),this.writeVarint(b)},writeSVarintField:function(C,b){this.writeTag(C,Dr.Varint),this.writeSVarint(b)},writeStringField:function(C,b){this.writeTag(C,Dr.Bytes),this.writeString(b)},writeFloatField:function(C,b){this.writeTag(C,Dr.Fixed32),this.writeFloat(b)},writeDoubleField:function(C,b){this.writeTag(C,Dr.Fixed64),this.writeDouble(b)},writeBooleanField:function(C,b){this.writeVarintField(C,!!b)}};var MA=ne(Lc);const PA=3;function Gu(C,b,I){C===1&&I.readMessage(Wu,b)}function Wu(C,b,I){if(C===3){const{id:H,bitmap:q,width:ee,height:re,left:ae,top:de,advance:_e}=I.readMessage(qu,{});b.push({id:H,bitmap:new Sl({width:ee+2*PA,height:re+2*PA},q),metrics:{width:ee,height:re,left:ae,top:de,advance:_e}})}}function qu(C,b,I){C===1?b.id=I.readVarint():C===2?b.bitmap=I.readBytes():C===3?b.width=I.readVarint():C===4?b.height=I.readVarint():C===5?b.left=I.readSVarint():C===6?b.top=I.readSVarint():C===7&&(b.advance=I.readVarint())}const Xu=PA;function Vc(C){let b=0,I=0;for(const re of C)b+=re.w*re.h,I=Math.max(I,re.w);C.sort((re,ae)=>ae.h-re.h);const H=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(b/.95)),I),h:1/0}];let q=0,ee=0;for(const re of C)for(let ae=H.length-1;ae>=0;ae--){const de=H[ae];if(!(re.w>de.w||re.h>de.h)){if(re.x=de.x,re.y=de.y,ee=Math.max(ee,re.y+re.h),q=Math.max(q,re.x+re.w),re.w===de.w&&re.h===de.h){const _e=H.pop();ae<H.length&&(H[ae]=_e)}else re.h===de.h?(de.x+=re.w,de.w-=re.w):re.w===de.w?(de.y+=re.h,de.h-=re.h):(H.push({x:de.x+re.w,y:de.y,w:de.w-re.w,h:re.h}),de.y+=re.h,de.h-=re.h);break}}return{w:q,h:ee,fill:b/(q*ee)||0}}const sn=1;class LA{constructor(b,{pixelRatio:I,version:H,stretchX:q,stretchY:ee,content:re}){this.paddedRect=b,this.pixelRatio=I,this.stretchX=q,this.stretchY=ee,this.content=re,this.version=H}get tl(){return[this.paddedRect.x+sn,this.paddedRect.y+sn]}get br(){return[this.paddedRect.x+this.paddedRect.w-sn,this.paddedRect.y+this.paddedRect.h-sn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*sn)/this.pixelRatio,(this.paddedRect.h-2*sn)/this.pixelRatio]}}class Kc{constructor(b,I){const H={},q={};this.haveRenderCallbacks=[];const ee=[];this.addImages(b,H,ee),this.addImages(I,q,ee);const{w:re,h:ae}=Vc(ee),de=new xn({width:re||1,height:ae||1});for(const _e in b){const Ee=b[_e],Fe=H[_e].paddedRect;xn.copy(Ee.data,de,{x:0,y:0},{x:Fe.x+sn,y:Fe.y+sn},Ee.data)}for(const _e in I){const Ee=I[_e],Fe=q[_e].paddedRect,Le=Fe.x+sn,ze=Fe.y+sn,Ve=Ee.data.width,st=Ee.data.height;xn.copy(Ee.data,de,{x:0,y:0},{x:Le,y:ze},Ee.data),xn.copy(Ee.data,de,{x:0,y:st-1},{x:Le,y:ze-1},{width:Ve,height:1}),xn.copy(Ee.data,de,{x:0,y:0},{x:Le,y:ze+st},{width:Ve,height:1}),xn.copy(Ee.data,de,{x:Ve-1,y:0},{x:Le-1,y:ze},{width:1,height:st}),xn.copy(Ee.data,de,{x:0,y:0},{x:Le+Ve,y:ze},{width:1,height:st})}this.image=de,this.iconPositions=H,this.patternPositions=q}addImages(b,I,H){for(const q in b){const ee=b[q],re={x:0,y:0,w:ee.data.width+2*sn,h:ee.data.height+2*sn};H.push(re),I[q]=new LA(re,ee),ee.hasRenderCallback&&this.haveRenderCallbacks.push(q)}}patchUpdatedImages(b,I){b.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const H in b.updatedImages)this.patchUpdatedImage(this.iconPositions[H],b.getImage(H),I),this.patchUpdatedImage(this.patternPositions[H],b.getImage(H),I)}patchUpdatedImage(b,I,H){if(!b||!I||b.version===I.version)return;b.version=I.version;const[q,ee]=b.tl;H.update(I.data,void 0,{x:q,y:ee})}}var _o;gi("ImagePosition",LA),gi("ImageAtlas",Kc),D.WritingMode=void 0,(_o=D.WritingMode||(D.WritingMode={}))[_o.none=0]="none",_o[_o.horizontal=1]="horizontal",_o[_o.vertical=2]="vertical",_o[_o.horizontalOnly=3]="horizontalOnly";const Ll=-17;class Ql{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(b,I){const H=new Ql;return H.scale=b||1,H.fontStack=I,H}static forImage(b){const I=new Ql;return I.imageName=b,I}}class hl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(b,I){const H=new hl;for(let q=0;q<b.sections.length;q++){const ee=b.sections[q];ee.image?H.addImageSection(ee):H.addTextSection(ee,I)}return H}length(){return this.text.length}getSection(b){return this.sections[this.sectionIndex[b]]}getSectionIndex(b){return this.sectionIndex[b]}getCharCode(b){return this.text.charCodeAt(b)}verticalizePunctuation(){this.text=function(b){let I="";for(let H=0;H<b.length;H++){const q=b.charCodeAt(H+1)||null,ee=b.charCodeAt(H-1)||null;I+=q&&hi(q)&&!Pl[b[H+1]]||ee&&hi(ee)&&!Pl[b[H-1]]||!Pl[b[H]]?b[H]:Pl[b[H]]}return I}(this.text)}trim(){let b=0;for(let H=0;H<this.text.length&&iA[this.text.charCodeAt(H)];H++)b++;let I=this.text.length;for(let H=this.text.length-1;H>=0&&H>=b&&iA[this.text.charCodeAt(H)];H--)I--;this.text=this.text.substring(b,I),this.sectionIndex=this.sectionIndex.slice(b,I)}substring(b,I){const H=new hl;return H.text=this.text.substring(b,I),H.sectionIndex=this.sectionIndex.slice(b,I),H.sections=this.sections,H}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((b,I)=>Math.max(b,this.sections[I].scale),0)}addTextSection(b,I){this.text+=b.text,this.sections.push(Ql.forText(b.scale,b.fontStack||I));const H=this.sections.length-1;for(let q=0;q<b.text.length;++q)this.sectionIndex.push(H)}addImageSection(b){const I=b.image?b.image.name:"";if(I.length===0)return void Ft("Can't add FormattedSection with an empty image.");const H=this.getNextImageSectionCharCode();H?(this.text+=String.fromCharCode(H),this.sections.push(Ql.forImage(I)),this.sectionIndex.push(this.sections.length-1)):Ft("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tA(C,b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st){const lt=hl.fromFeature(C,q);let ht;Fe===D.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:yt,processStyledBidirectionalText:dt}=ns;if(yt&&lt.sections.length===1){ht=[];const Rt=yt(lt.toString(),QA(lt,_e,ee,b,H,ze,Ve));for(const fi of Rt){const Ci=new hl;Ci.text=fi,Ci.sections=lt.sections;for(let ui=0;ui<fi.length;ui++)Ci.sectionIndex.push(0);ht.push(Ci)}}else if(dt){ht=[];const Rt=dt(lt.text,lt.sectionIndex,QA(lt,_e,ee,b,H,ze,Ve));for(const fi of Rt){const Ci=new hl;Ci.text=fi[0],Ci.sectionIndex=fi[1],Ci.sections=lt.sections,ht.push(Ci)}}else ht=function(Rt,fi){const Ci=[],ui=Rt.text;let li=0;for(const ti of fi)Ci.push(Rt.substring(li,ti)),li=ti;return li<ui.length&&Ci.push(Rt.substring(li,ui.length)),Ci}(lt,QA(lt,_e,ee,b,H,ze,Ve));const xt=[],Tt={positionedLines:xt,text:lt.toString(),top:Ee[1],bottom:Ee[1],left:Ee[0],right:Ee[0],writingMode:Fe,iconsInText:!1,verticalizable:!1};return function(Rt,fi,Ci,ui,li,ti,yi,si,qt,Pi,Si,ir){let Rr=0,zr=Ll,fs=0,fn=0;const Gs=si==="right"?1:si==="left"?0:.5;let os=0;for(const ls of li){ls.trim();const ds=ls.getMaxScale(),Ps=(ds-1)*us,qs={positionedGlyphs:[],lineOffset:0};Rt.positionedLines[os]=qs;const an=qs.positionedGlyphs;let on=0;if(!ls.length()){zr+=ti,++os;continue}for(let Is=0;Is<ls.length();Is++){const fr=ls.getSection(Is),dn=ls.getSectionIndex(Is),Fs=ls.getCharCode(Is);let Xs=0,Pn=null,Zn=null,Jn=null,qa=us;const Ln=!(qt===D.WritingMode.horizontal||!Si&&!jt(Fs)||Si&&(iA[Fs]||(ms=Fs,$e.Arabic(ms)||$e["Arabic Supplement"](ms)||$e["Arabic Extended-A"](ms)||$e["Arabic Presentation Forms-A"](ms)||$e["Arabic Presentation Forms-B"](ms))));if(fr.imageName){const Cn=ui[fr.imageName];if(!Cn)continue;Jn=fr.imageName,Rt.iconsInText=Rt.iconsInText||!0,Zn=Cn.paddedRect;const ln=Cn.displaySize;fr.scale=fr.scale*us/ir,Pn={width:ln[0],height:ln[1],left:sn,top:-3,advance:Ln?ln[1]:ln[0]},Xs=Ps+(us-ln[1]*fr.scale),qa=Pn.advance;const Xa=Ln?ln[0]*fr.scale-us*ds:ln[1]*fr.scale-us*ds;Xa>0&&Xa>on&&(on=Xa)}else{const Cn=Ci[fr.fontStack],ln=Cn&&Cn[Fs];if(ln&&ln.rect)Zn=ln.rect,Pn=ln.metrics;else{const Xa=fi[fr.fontStack],Vl=Xa&&Xa[Fs];if(!Vl)continue;Pn=Vl.metrics}Xs=(ds-fr.scale)*us}Ln?(Rt.verticalizable=!0,an.push({glyph:Fs,imageName:Jn,x:Rr,y:zr+Xs,vertical:Ln,scale:fr.scale,fontStack:fr.fontStack,sectionIndex:dn,metrics:Pn,rect:Zn}),Rr+=qa*fr.scale+Pi):(an.push({glyph:Fs,imageName:Jn,x:Rr,y:zr+Xs,vertical:Ln,scale:fr.scale,fontStack:fr.fontStack,sectionIndex:dn,metrics:Pn,rect:Zn}),Rr+=Pn.advance*fr.scale+Pi)}an.length!==0&&(fs=Math.max(Rr-Pi,fs),Zu(an,0,an.length-1,Gs,on)),Rr=0;const Jr=ti*ds+on;qs.lineOffset=Math.max(on,Ps),zr+=Jr,fn=Math.max(Jr,fn),++os}var ms;const Ss=zr-Ll,{horizontalAlign:nn,verticalAlign:Ws}=OA(yi);(function(ls,ds,Ps,qs,an,on,Jr,Is,fr){const dn=(ds-Ps)*an;let Fs=0;Fs=on!==Jr?-Is*qs-Ll:(-qs*fr+.5)*Jr;for(const Xs of ls)for(const Pn of Xs.positionedGlyphs)Pn.x+=dn,Pn.y+=Fs})(Rt.positionedLines,Gs,nn,Ws,fs,fn,ti,Ss,li.length),Rt.top+=-Ws*Ss,Rt.bottom=Rt.top+Ss,Rt.left+=-nn*fs,Rt.right=Rt.left+fs}(Tt,b,I,H,ht,re,ae,de,Fe,_e,Le,st),!function(Rt){for(const fi of Rt)if(fi.positionedGlyphs.length!==0)return!1;return!0}(xt)&&Tt}const iA={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gc(C,b,I,H,q,ee){if(b.imageName){const re=H[b.imageName];return re?re.displaySize[0]*b.scale*us/ee+q:0}{const re=I[b.fontStack],ae=re&&re[C];return ae?ae.metrics.advance*b.scale+q:0}}function Wc(C,b,I,H){const q=Math.pow(C-b,2);return H?C<b?q/2:2*q:q+Math.abs(I)*I}function ju(C,b,I){let H=0;return C===10&&(H-=1e4),I&&(H+=150),C!==40&&C!==65288||(H+=50),b!==41&&b!==65289||(H+=50),H}function qc(C,b,I,H,q,ee){let re=null,ae=Wc(b,I,q,ee);for(const de of H){const _e=Wc(b-de.x,I,q,ee)+de.badness;_e<=ae&&(re=de,ae=_e)}return{index:C,x:b,priorBreak:re,badness:ae}}function Xc(C){return C?Xc(C.priorBreak).concat(C.index):[]}function QA(C,b,I,H,q,ee,re){if(ee!=="point")return[];if(!C)return[];const ae=[],de=function(Le,ze,Ve,st,lt,ht){let yt=0;for(let dt=0;dt<Le.length();dt++){const xt=Le.getSection(dt);yt+=Gc(Le.getCharCode(dt),xt,st,lt,ze,ht)}return yt/Math.max(1,Math.ceil(yt/Ve))}(C,b,I,H,q,re),_e=C.text.indexOf("â")>=0;let Ee=0;for(let Le=0;Le<C.length();Le++){const ze=C.getSection(Le),Ve=C.getCharCode(Le);if(iA[Ve]||(Ee+=Gc(Ve,ze,H,q,b,re)),Le<C.length()-1){const st=!((Fe=Ve)<11904||!($e["Bopomofo Extended"](Fe)||$e.Bopomofo(Fe)||$e["CJK Compatibility Forms"](Fe)||$e["CJK Compatibility Ideographs"](Fe)||$e["CJK Compatibility"](Fe)||$e["CJK Radicals Supplement"](Fe)||$e["CJK Strokes"](Fe)||$e["CJK Symbols and Punctuation"](Fe)||$e["CJK Unified Ideographs Extension A"](Fe)||$e["CJK Unified Ideographs"](Fe)||$e["Enclosed CJK Letters and Months"](Fe)||$e["Halfwidth and Fullwidth Forms"](Fe)||$e.Hiragana(Fe)||$e["Ideographic Description Characters"](Fe)||$e["Kangxi Radicals"](Fe)||$e["Katakana Phonetic Extensions"](Fe)||$e.Katakana(Fe)||$e["Vertical Forms"](Fe)||$e["Yi Radicals"](Fe)||$e["Yi Syllables"](Fe)));(Yu[Ve]||st||ze.imageName)&&ae.push(qc(Le+1,Ee,de,ae,ju(Ve,C.getCharCode(Le+1),st&&_e),!1))}}var Fe;return Xc(qc(C.length(),Ee,de,ae,0,!0))}function OA(C){let b=.5,I=.5;switch(C){case"right":case"top-right":case"bottom-right":b=1;break;case"left":case"top-left":case"bottom-left":b=0}switch(C){case"bottom":case"bottom-right":case"bottom-left":I=1;break;case"top":case"top-right":case"top-left":I=0}return{horizontalAlign:b,verticalAlign:I}}function Zu(C,b,I,H,q){if(!H&&!q)return;const ee=C[I],re=(C[I].x+ee.metrics.advance*ee.scale)*H;for(let ae=b;ae<=I;ae++)C[ae].x-=re,C[ae].y+=q}function Ju(C,b,I){const{horizontalAlign:H,verticalAlign:q}=OA(I),ee=b[0]-C.displaySize[0]*H,re=b[1]-C.displaySize[1]*q;return{image:C,top:re,bottom:re+C.displaySize[1],left:ee,right:ee+C.displaySize[0]}}function Yc(C,b,I,H,q,ee){const re=C.image;let ae;if(re.content){const lt=re.content,ht=re.pixelRatio||1;ae=[lt[0]/ht,lt[1]/ht,re.displaySize[0]-lt[2]/ht,re.displaySize[1]-lt[3]/ht]}const de=b.left*ee,_e=b.right*ee;let Ee,Fe,Le,ze;I==="width"||I==="both"?(ze=q[0]+de-H[3],Fe=q[0]+_e+H[1]):(ze=q[0]+(de+_e-re.displaySize[0])/2,Fe=ze+re.displaySize[0]);const Ve=b.top*ee,st=b.bottom*ee;return I==="height"||I==="both"?(Ee=q[1]+Ve-H[0],Le=q[1]+st+H[2]):(Ee=q[1]+(Ve+st-re.displaySize[1])/2,Le=Ee+re.displaySize[1]),{image:re,top:Ee,right:Fe,bottom:Le,left:ze,collisionPadding:ae}}const Ol=255,ya=128,yo=Ol*ya;function jc(C,b){const{expression:I}=b;if(I.kind==="constant")return{kind:"constant",layoutSize:I.evaluate(new Er(C+1))};if(I.kind==="source")return{kind:"source"};{const{zoomStops:H,interpolationType:q}=I;let ee=0;for(;ee<H.length&&H[ee]<=C;)ee++;ee=Math.max(0,ee-1);let re=ee;for(;re<H.length&&H[re]<C+1;)re++;re=Math.min(H.length-1,re);const ae=H[ee],de=H[re];return I.kind==="composite"?{kind:"composite",minZoom:ae,maxZoom:de,interpolationType:q}:{kind:"camera",minZoom:ae,maxZoom:de,minSize:I.evaluate(new Er(ae)),maxSize:I.evaluate(new Er(de)),interpolationType:q}}}function RA(C,b,I){let H="never";const q=C.get(b);return q?H=q:C.get(I)&&(H="always"),H}const $u=mo.VectorTileFeature.types,ef=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rA(C,b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le){const ze=ae?Math.min(yo,Math.round(ae[0])):0,Ve=ae?Math.min(yo,Math.round(ae[1])):0;C.emplaceBack(b,I,Math.round(32*H),Math.round(32*q),ee,re,(ze<<1)+(de?1:0),Ve,16*_e,16*Ee,256*Fe,256*Le)}function HA(C,b,I){C.emplaceBack(b.x,b.y,I),C.emplaceBack(b.x,b.y,I),C.emplaceBack(b.x,b.y,I),C.emplaceBack(b.x,b.y,I)}function tf(C){for(const b of C.sections)if(zi(b.text))return!0;return!1}class zA{constructor(b){this.layoutVertexArray=new zt,this.indexArray=new ki,this.programConfigurations=b,this.segments=new Mi,this.dynamicLayoutVertexArray=new Jt,this.opacityVertexArray=new Bi,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(b,I,H,q){this.isEmpty()||(H&&(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,ku.members),this.indexBuffer=b.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=b.createVertexBuffer(this.dynamicLayoutVertexArray,Du.members,!0),this.opacityVertexBuffer=b.createVertexBuffer(this.opacityVertexArray,ef,!0),this.opacityVertexBuffer.itemSize=1),(H||q)&&this.programConfigurations.upload(b))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}gi("SymbolBuffers",zA);class NA{constructor(b,I,H){this.layoutVertexArray=new b,this.layoutAttributes=I,this.indexArray=new H,this.segments=new Mi,this.collisionVertexArray=new oi}upload(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=b.createVertexBuffer(this.collisionVertexArray,Uu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}gi("CollisionBuffers",NA);class ul{constructor(b){this.collisionBoxArray=b.collisionBoxArray,this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(re=>re.id),this.index=b.index,this.pixelRatio=b.pixelRatio,this.sourceLayerIndex=b.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=mA([]),this.placementViewportMatrix=mA([]);const I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=jc(this.zoom,I["text-size"]),this.iconSizeData=jc(this.zoom,I["icon-size"]);const H=this.layers[0].layout,q=H.get("symbol-sort-key"),ee=H.get("symbol-z-order");this.canOverlap=RA(H,"text-overlap","text-allow-overlap")!=="never"||RA(H,"icon-overlap","icon-allow-overlap")!=="never"||H.get("text-ignore-placement")||H.get("icon-ignore-placement"),this.sortFeaturesByKey=ee!=="viewport-y"&&!q.isConstant(),this.sortFeaturesByY=(ee==="viewport-y"||ee==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,H.get("symbol-placement")==="point"&&(this.writingModes=H.get("text-writing-mode").map(re=>D.WritingMode[re])),this.stateDependentLayerIds=this.layers.filter(re=>re.isStateDependent()).map(re=>re.id),this.sourceID=b.sourceID}createArrays(){this.text=new zA(new Ka(this.layers,this.zoom,b=>/^text/.test(b))),this.icon=new zA(new Ka(this.layers,this.zoom,b=>/^icon/.test(b))),this.glyphOffsetArray=new Re,this.lineVertexArray=new it,this.symbolInstances=new Se,this.textAnchorOffsets=new at}calculateGlyphDependencies(b,I,H,q,ee){for(let re=0;re<b.length;re++)if(I[b.charCodeAt(re)]=!0,(H||q)&&ee){const ae=Pl[b.charAt(re)];ae&&(I[ae.charCodeAt(0)]=!0)}}populate(b,I,H){const q=this.layers[0],ee=q.layout,re=ee.get("text-font"),ae=ee.get("text-field"),de=ee.get("icon-image"),_e=(ae.value.kind!=="constant"||ae.value.value instanceof Zi&&!ae.value.value.isEmpty()||ae.value.value.toString().length>0)&&(re.value.kind!=="constant"||re.value.value.length>0),Ee=de.value.kind!=="constant"||!!de.value.value||Object.keys(de.parameters).length>0,Fe=ee.get("symbol-sort-key");if(this.features=[],!_e&&!Ee)return;const Le=I.iconDependencies,ze=I.glyphDependencies,Ve=I.availableImages,st=new Er(this.zoom);for(const{feature:lt,id:ht,index:yt,sourceLayerIndex:dt}of b){const xt=q._featureFilter.needGeometry,Tt=_a(lt,xt);if(!q._featureFilter.filter(st,Tt,H))continue;let Rt,fi;if(xt||(Tt.geometry=jn(lt)),_e){const ui=q.getValueAndResolveTokens("text-field",Tt,H,Ve),li=Zi.factory(ui);tf(li)&&(this.hasRTLText=!0),(!this.hasRTLText||Ha()==="unavailable"||this.hasRTLText&&ns.isParsed())&&(Rt=Pu(li,q,Tt))}if(Ee){const ui=q.getValueAndResolveTokens("icon-image",Tt,H,Ve);fi=ui instanceof Lt?ui:Lt.fromString(ui)}if(!Rt&&!fi)continue;const Ci=this.sortFeaturesByKey?Fe.evaluate(Tt,{},H):void 0;if(this.features.push({id:ht,text:Rt,icon:fi,index:yt,sourceLayerIndex:dt,geometry:Tt.geometry,properties:lt.properties,type:$u[lt.type],sortKey:Ci}),fi&&(Le[fi.name]=!0),Rt){const ui=re.evaluate(Tt,{},H).join(","),li=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(D.WritingMode.vertical)>=0;for(const ti of Rt.sections)if(ti.image)Le[ti.image.name]=!0;else{const yi=bt(Rt.toString()),si=ti.fontStack||ui,qt=ze[si]=ze[si]||{};this.calculateGlyphDependencies(ti.text,qt,li,this.allowVerticalPlacement,yi)}}}ee.get("symbol-placement")==="line"&&(this.features=function(lt){const ht={},yt={},dt=[];let xt=0;function Tt(ui){dt.push(lt[ui]),xt++}function Rt(ui,li,ti){const yi=yt[ui];return delete yt[ui],yt[li]=yi,dt[yi].geometry[0].pop(),dt[yi].geometry[0]=dt[yi].geometry[0].concat(ti[0]),yi}function fi(ui,li,ti){const yi=ht[li];return delete ht[li],ht[ui]=yi,dt[yi].geometry[0].shift(),dt[yi].geometry[0]=ti[0].concat(dt[yi].geometry[0]),yi}function Ci(ui,li,ti){const yi=ti?li[0][li[0].length-1]:li[0][0];return`${ui}:${yi.x}:${yi.y}`}for(let ui=0;ui<lt.length;ui++){const li=lt[ui],ti=li.geometry,yi=li.text?li.text.toString():null;if(!yi){Tt(ui);continue}const si=Ci(yi,ti),qt=Ci(yi,ti,!0);if(si in yt&&qt in ht&&yt[si]!==ht[qt]){const Pi=fi(si,qt,ti),Si=Rt(si,qt,dt[Pi].geometry);delete ht[si],delete yt[qt],yt[Ci(yi,dt[Si].geometry,!0)]=Si,dt[Pi].geometry=null}else si in yt?Rt(si,qt,ti):qt in ht?fi(si,qt,ti):(Tt(ui),ht[si]=xt-1,yt[qt]=xt-1)}return dt.filter(ui=>ui.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,ht)=>lt.sortKey-ht.sortKey)}update(b,I,H){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(b,I,this.layers,H),this.icon.programConfigurations.updatePaintArrays(b,I,this.layers,H))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(b){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(b),this.iconCollisionBox.upload(b)),this.text.upload(b,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(b,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(b,I){const H=this.lineVertexArray.length;if(b.segment!==void 0){let q=b.dist(I[b.segment+1]),ee=b.dist(I[b.segment]);const re={};for(let ae=b.segment+1;ae<I.length;ae++)re[ae]={x:I[ae].x,y:I[ae].y,tileUnitDistanceFromAnchor:q},ae<I.length-1&&(q+=I[ae+1].dist(I[ae]));for(let ae=b.segment||0;ae>=0;ae--)re[ae]={x:I[ae].x,y:I[ae].y,tileUnitDistanceFromAnchor:ee},ae>0&&(ee+=I[ae-1].dist(I[ae]));for(let ae=0;ae<I.length;ae++){const de=re[ae];this.lineVertexArray.emplaceBack(de.x,de.y,de.tileUnitDistanceFromAnchor)}}return{lineStartIndex:H,lineLength:this.lineVertexArray.length-H}}addSymbols(b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le){const ze=b.indexArray,Ve=b.layoutVertexArray,st=b.segments.prepareSegment(4*I.length,Ve,ze,this.canOverlap?re.sortKey:void 0),lt=this.glyphOffsetArray.length,ht=st.vertexLength,yt=this.allowVerticalPlacement&&ae===D.WritingMode.vertical?Math.PI/2:0,dt=re.text&&re.text.sections;for(let xt=0;xt<I.length;xt++){const{tl:Tt,tr:Rt,bl:fi,br:Ci,tex:ui,pixelOffsetTL:li,pixelOffsetBR:ti,minFontScaleX:yi,minFontScaleY:si,glyphOffset:qt,isSDF:Pi,sectionIndex:Si}=I[xt],ir=st.vertexLength,Rr=qt[1];rA(Ve,de.x,de.y,Tt.x,Rr+Tt.y,ui.x,ui.y,H,Pi,li.x,li.y,yi,si),rA(Ve,de.x,de.y,Rt.x,Rr+Rt.y,ui.x+ui.w,ui.y,H,Pi,ti.x,li.y,yi,si),rA(Ve,de.x,de.y,fi.x,Rr+fi.y,ui.x,ui.y+ui.h,H,Pi,li.x,ti.y,yi,si),rA(Ve,de.x,de.y,Ci.x,Rr+Ci.y,ui.x+ui.w,ui.y+ui.h,H,Pi,ti.x,ti.y,yi,si),HA(b.dynamicLayoutVertexArray,de,yt),ze.emplaceBack(ir,ir+1,ir+2),ze.emplaceBack(ir+1,ir+2,ir+3),st.vertexLength+=4,st.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qt[0]),xt!==I.length-1&&Si===I[xt+1].sectionIndex||b.programConfigurations.populatePaintArrays(Ve.length,re,re.index,{},Le,dt&&dt[Si])}b.placedSymbolArray.emplaceBack(de.x,de.y,lt,this.glyphOffsetArray.length-lt,ht,_e,Ee,de.segment,H?H[0]:0,H?H[1]:0,q[0],q[1],ae,0,!1,0,Fe)}_addCollisionDebugVertex(b,I,H,q,ee,re){return I.emplaceBack(0,0),b.emplaceBack(H.x,H.y,q,ee,Math.round(re.x),Math.round(re.y))}addCollisionDebugVertices(b,I,H,q,ee,re,ae){const de=ee.segments.prepareSegment(4,ee.layoutVertexArray,ee.indexArray),_e=de.vertexLength,Ee=ee.layoutVertexArray,Fe=ee.collisionVertexArray,Le=ae.anchorX,ze=ae.anchorY;this._addCollisionDebugVertex(Ee,Fe,re,Le,ze,new pe(b,I)),this._addCollisionDebugVertex(Ee,Fe,re,Le,ze,new pe(H,I)),this._addCollisionDebugVertex(Ee,Fe,re,Le,ze,new pe(H,q)),this._addCollisionDebugVertex(Ee,Fe,re,Le,ze,new pe(b,q)),de.vertexLength+=4;const Ve=ee.indexArray;Ve.emplaceBack(_e,_e+1),Ve.emplaceBack(_e+1,_e+2),Ve.emplaceBack(_e+2,_e+3),Ve.emplaceBack(_e+3,_e),de.primitiveLength+=4}addDebugCollisionBoxes(b,I,H,q){for(let ee=b;ee<I;ee++){const re=this.collisionBoxArray.get(ee);this.addCollisionDebugVertices(re.x1,re.y1,re.x2,re.y2,q?this.textCollisionBox:this.iconCollisionBox,re.anchorPoint,H)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new NA(ar,Pc.members,xi),this.iconCollisionBox=new NA(ar,Pc.members,xi);for(let b=0;b<this.symbolInstances.length;b++){const I=this.symbolInstances.get(b);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}}_deserializeCollisionBoxesForSymbol(b,I,H,q,ee,re,ae,de,_e){const Ee={};for(let Fe=I;Fe<H;Fe++){const Le=b.get(Fe);Ee.textBox={x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,anchorPointX:Le.anchorPointX,anchorPointY:Le.anchorPointY},Ee.textFeatureIndex=Le.featureIndex;break}for(let Fe=q;Fe<ee;Fe++){const Le=b.get(Fe);Ee.verticalTextBox={x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,anchorPointX:Le.anchorPointX,anchorPointY:Le.anchorPointY},Ee.verticalTextFeatureIndex=Le.featureIndex;break}for(let Fe=re;Fe<ae;Fe++){const Le=b.get(Fe);Ee.iconBox={x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,anchorPointX:Le.anchorPointX,anchorPointY:Le.anchorPointY},Ee.iconFeatureIndex=Le.featureIndex;break}for(let Fe=de;Fe<_e;Fe++){const Le=b.get(Fe);Ee.verticalIconBox={x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,anchorPointX:Le.anchorPointX,anchorPointY:Le.anchorPointY},Ee.verticalIconFeatureIndex=Le.featureIndex;break}return Ee}deserializeCollisionBoxes(b){this.collisionArrays=[];for(let I=0;I<this.symbolInstances.length;I++){const H=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(b,H.textBoxStartIndex,H.textBoxEndIndex,H.verticalTextBoxStartIndex,H.verticalTextBoxEndIndex,H.iconBoxStartIndex,H.iconBoxEndIndex,H.verticalIconBoxStartIndex,H.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(b,I){const H=b.placedSymbolArray.get(I),q=H.vertexStartIndex+4*H.numGlyphs;for(let ee=H.vertexStartIndex;ee<q;ee+=4)b.indexArray.emplaceBack(ee,ee+1,ee+2),b.indexArray.emplaceBack(ee+1,ee+2,ee+3)}getSortedSymbolIndexes(b){if(this.sortedAngle===b&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const I=Math.sin(b),H=Math.cos(b),q=[],ee=[],re=[];for(let ae=0;ae<this.symbolInstances.length;++ae){re.push(ae);const de=this.symbolInstances.get(ae);q.push(0|Math.round(I*de.anchorX+H*de.anchorY)),ee.push(de.featureIndex)}return re.sort((ae,de)=>q[ae]-q[de]||ee[de]-ee[ae]),re}addToSortKeyRanges(b,I){const H=this.sortKeyRanges[this.sortKeyRanges.length-1];H&&H.sortKey===I?H.symbolInstanceEnd=b+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:b,symbolInstanceEnd:b+1})}sortFeatures(b){if(this.sortFeaturesByY&&this.sortedAngle!==b&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(b),this.sortedAngle=b,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const I of this.symbolInstanceIndexes){const H=this.symbolInstances.get(I);this.featureSortOrder.push(H.featureIndex),[H.rightJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.leftJustifiedTextSymbolIndex].forEach((q,ee,re)=>{q>=0&&re.indexOf(q)===ee&&this.addIndicesForPlacedSymbol(this.text,q)}),H.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,H.verticalPlacedTextSymbolIndex),H.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,H.placedIconSymbolIndex),H.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,H.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Zc,Jc;gi("SymbolBucket",ul,{omit:["layers","collisionBoxArray","features","compareText"]}),ul.MAX_GLYPHS=65535,ul.addDynamicAttributes=HA;var VA={get paint(){return Jc=Jc||new Ns({"icon-opacity":new Ni(me.paint_symbol["icon-opacity"]),"icon-color":new Ni(me.paint_symbol["icon-color"]),"icon-halo-color":new Ni(me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ni(me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ni(me.paint_symbol["icon-halo-blur"]),"icon-translate":new Fi(me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fi(me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ni(me.paint_symbol["text-opacity"]),"text-color":new Ni(me.paint_symbol["text-color"],{runtimeType:Wi,getOverride:C=>C.textColor,hasOverride:C=>!!C.textColor}),"text-halo-color":new Ni(me.paint_symbol["text-halo-color"]),"text-halo-width":new Ni(me.paint_symbol["text-halo-width"]),"text-halo-blur":new Ni(me.paint_symbol["text-halo-blur"]),"text-translate":new Fi(me.paint_symbol["text-translate"]),"text-translate-anchor":new Fi(me.paint_symbol["text-translate-anchor"])})},get layout(){return Zc=Zc||new Ns({"symbol-placement":new Fi(me.layout_symbol["symbol-placement"]),"symbol-spacing":new Fi(me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fi(me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ni(me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fi(me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fi(me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Fi(me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Fi(me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fi(me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fi(me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ni(me.layout_symbol["icon-size"]),"icon-text-fit":new Fi(me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fi(me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ni(me.layout_symbol["icon-image"]),"icon-rotate":new Ni(me.layout_symbol["icon-rotate"]),"icon-padding":new Ni(me.layout_symbol["icon-padding"]),"icon-keep-upright":new Fi(me.layout_symbol["icon-keep-upright"]),"icon-offset":new Ni(me.layout_symbol["icon-offset"]),"icon-anchor":new Ni(me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fi(me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fi(me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fi(me.layout_symbol["text-rotation-alignment"]),"text-field":new Ni(me.layout_symbol["text-field"]),"text-font":new Ni(me.layout_symbol["text-font"]),"text-size":new Ni(me.layout_symbol["text-size"]),"text-max-width":new Ni(me.layout_symbol["text-max-width"]),"text-line-height":new Fi(me.layout_symbol["text-line-height"]),"text-letter-spacing":new Ni(me.layout_symbol["text-letter-spacing"]),"text-justify":new Ni(me.layout_symbol["text-justify"]),"text-radial-offset":new Ni(me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fi(me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ni(me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ni(me.layout_symbol["text-anchor"]),"text-max-angle":new Fi(me.layout_symbol["text-max-angle"]),"text-writing-mode":new Fi(me.layout_symbol["text-writing-mode"]),"text-rotate":new Ni(me.layout_symbol["text-rotate"]),"text-padding":new Fi(me.layout_symbol["text-padding"]),"text-keep-upright":new Fi(me.layout_symbol["text-keep-upright"]),"text-transform":new Ni(me.layout_symbol["text-transform"]),"text-offset":new Ni(me.layout_symbol["text-offset"]),"text-allow-overlap":new Fi(me.layout_symbol["text-allow-overlap"]),"text-overlap":new Fi(me.layout_symbol["text-overlap"]),"text-ignore-placement":new Fi(me.layout_symbol["text-ignore-placement"]),"text-optional":new Fi(me.layout_symbol["text-optional"])})}};class $c{constructor(b){if(b.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=b.property.overrides?b.property.overrides.runtimeType:Vi,this.defaultValue=b}evaluate(b){if(b.formattedSection){const I=this.defaultValue.property.overrides;if(I&&I.hasOverride(b.formattedSection))return I.getOverride(b.formattedSection)}return b.feature&&b.featureState?this.defaultValue.evaluate(b.feature,b.featureState):this.defaultValue.property.specification.default}eachChild(b){this.defaultValue.isConstant()||b(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}gi("FormatSectionOverride",$c,{omit:["defaultValue"]});class sA extends Dn{constructor(b){super(b,VA)}recalculate(b,I){if(super.recalculate(b,I),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const H=this.layout.get("text-writing-mode");if(H){const q=[];for(const ee of H)q.indexOf(ee)<0&&q.push(ee);this.layout._values["text-writing-mode"]=q}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(b,I,H,q){const ee=this.layout.get(b).evaluate(I,{},H,q),re=this._unevaluatedLayout._values[b];return re.isDataDriven()||$s(re.value)||!ee?ee:function(ae,de){return de.replace(/{([^{}]+)}/g,(_e,Ee)=>Ee in ae?String(ae[Ee]):"")}(I.properties,ee)}createBucket(b){return new ul(b)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const b of VA.paint.overridableProperties){if(!sA.hasPaintOverride(this.layout,b))continue;const I=this.paint.get(b),H=new $c(I),q=new Ur(H,I.property.specification);let ee=null;ee=I.value.kind==="constant"||I.value.kind==="source"?new yr("source",q):new Fr("composite",q,I.value.zoomStops),this.paint._values[b]=new zs(I.property,ee,I.parameters)}}_handleOverridablePaintPropertyUpdate(b,I,H){return!(!this.layout||I.isDataDriven()||H.isDataDriven())&&sA.hasPaintOverride(this.layout,b)}static hasPaintOverride(b,I){const H=b.get("text-field"),q=VA.paint.properties[I];let ee=!1;const re=ae=>{for(const de of ae)if(q.overrides&&q.overrides.hasOverride(de))return void(ee=!0)};if(H.value.kind==="constant"&&H.value.value instanceof Zi)re(H.value.value.sections);else if(H.value.kind==="source"){const ae=_e=>{ee||(_e instanceof Cr&&_r(_e.value)===$i?re(_e.value.sections):_e instanceof Ia?re(_e.sections):_e.eachChild(ae))},de=H.value;de._styleExpression&&ae(de._styleExpression.expression)}return ee}}let eh;var rf={get paint(){return eh=eh||new Ns({"background-color":new Fi(me.paint_background["background-color"]),"background-pattern":new yl(me.paint_background["background-pattern"]),"background-opacity":new Fi(me.paint_background["background-opacity"])})}};class sf extends Dn{constructor(b){super(b,rf)}}let th;var nf={get paint(){return th=th||new Ns({"raster-opacity":new Fi(me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fi(me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fi(me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fi(me.paint_raster["raster-brightness-max"]),"raster-saturation":new Fi(me.paint_raster["raster-saturation"]),"raster-contrast":new Fi(me.paint_raster["raster-contrast"]),"raster-resampling":new Fi(me.paint_raster["raster-resampling"]),"raster-fade-duration":new Fi(me.paint_raster["raster-fade-duration"])})}};class af extends Dn{constructor(b){super(b,nf)}}class of extends Dn{constructor(b){super(b,{}),this.onAdd=I=>{this.implementation.onAdd&&this.implementation.onAdd(I,I.painter.context.gl)},this.onRemove=I=>{this.implementation.onRemove&&this.implementation.onRemove(I,I.painter.context.gl)},this.implementation=b}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class lf{constructor(b){this._callback=b,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const KA=63710088e-1;class vo{constructor(b,I){if(isNaN(b)||isNaN(I))throw new Error(`Invalid LngLat object: (${b}, ${I})`);if(this.lng=+b,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vo(ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(b){const I=Math.PI/180,H=this.lat*I,q=b.lat*I,ee=Math.sin(H)*Math.sin(q)+Math.cos(H)*Math.cos(q)*Math.cos((b.lng-this.lng)*I);return KA*Math.acos(Math.min(ee,1))}static convert(b){if(b instanceof vo)return b;if(Array.isArray(b)&&(b.length===2||b.length===3))return new vo(Number(b[0]),Number(b[1]));if(!Array.isArray(b)&&typeof b=="object"&&b!==null)return new vo(Number("lng"in b?b.lng:b.lon),Number(b.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ih=2*Math.PI*KA;function rh(C){return ih*Math.cos(C*Math.PI/180)}function sh(C){return(180+C)/360}function nh(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function ah(C,b){return C/rh(b)}function GA(C){return 360/Math.PI*Math.atan(Math.exp((180-360*C)*Math.PI/180))-90}class nA{constructor(b,I,H=0){this.x=+b,this.y=+I,this.z=+H}static fromLngLat(b,I=0){const H=vo.convert(b);return new nA(sh(H.lng),nh(H.lat),ah(I,H.lat))}toLngLat(){return new vo(360*this.x-180,GA(this.y))}toAltitude(){return this.z*rh(GA(this.y))}meterInMercatorCoordinateUnits(){return 1/ih*(b=GA(this.y),1/Math.cos(b*Math.PI/180));var b}}function oh(C,b,I){var H=2*Math.PI*6378137/256/Math.pow(2,I);return[C*H-2*Math.PI*6378137/2,b*H-2*Math.PI*6378137/2]}class WA{constructor(b,I,H){if(b<0||b>25||H<0||H>=Math.pow(2,b)||I<0||I>=Math.pow(2,b))throw new Error(`x=${I}, y=${H}, z=${b} outside of bounds. 0<=x<${Math.pow(2,b)}, 0<=y<${Math.pow(2,b)} 0<=z<=25 `);this.z=b,this.x=I,this.y=H,this.key=Rl(0,b,b,I,H)}equals(b){return this.z===b.z&&this.x===b.x&&this.y===b.y}url(b,I,H){const q=(re=this.y,ae=this.z,de=oh(256*(ee=this.x),256*(re=Math.pow(2,ae)-re-1),ae),_e=oh(256*(ee+1),256*(re+1),ae),de[0]+","+de[1]+","+_e[0]+","+_e[1]);var ee,re,ae,de,_e;const Ee=function(Fe,Le,ze){let Ve,st="";for(let lt=Fe;lt>0;lt--)Ve=1<<lt-1,st+=(Le&Ve?1:0)+(ze&Ve?2:0);return st}(this.z,this.x,this.y);return b[(this.x+this.y)%b.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(H==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,I>1?"@2x":"").replace(/{quadkey}/g,Ee).replace(/{bbox-epsg-3857}/g,q)}isChildOf(b){const I=this.z-b.z;return I>0&&b.x===this.x>>I&&b.y===this.y>>I}getTilePoint(b){const I=Math.pow(2,this.z);return new pe((b.x*I-this.x)*Xr,(b.y*I-this.y)*Xr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lh{constructor(b,I){this.wrap=b,this.canonical=I,this.key=Rl(b,I.z,I.z,I.x,I.y)}}class Bn{constructor(b,I,H,q,ee){if(b<H)throw new Error(`overscaledZ should be >= z; overscaledZ = ${b}; z = ${H}`);this.overscaledZ=b,this.wrap=I,this.canonical=new WA(H,+q,+ee),this.key=Rl(I,b,H,q,ee)}clone(){return new Bn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(b){return this.overscaledZ===b.overscaledZ&&this.wrap===b.wrap&&this.canonical.equals(b.canonical)}scaledTo(b){if(b>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${b}; overscaledZ = ${this.overscaledZ}`);const I=this.canonical.z-b;return b>this.canonical.z?new Bn(b,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bn(b,this.wrap,b,this.canonical.x>>I,this.canonical.y>>I)}calculateScaledKey(b,I){if(b>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${b}; overscaledZ = ${this.overscaledZ}`);const H=this.canonical.z-b;return b>this.canonical.z?Rl(this.wrap*+I,b,this.canonical.z,this.canonical.x,this.canonical.y):Rl(this.wrap*+I,b,b,this.canonical.x>>H,this.canonical.y>>H)}isChildOf(b){if(b.wrap!==this.wrap)return!1;const I=this.canonical.z-b.canonical.z;return b.overscaledZ===0||b.overscaledZ<this.overscaledZ&&b.canonical.x===this.canonical.x>>I&&b.canonical.y===this.canonical.y>>I}children(b){if(this.overscaledZ>=b)return[new Bn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const I=this.canonical.z+1,H=2*this.canonical.x,q=2*this.canonical.y;return[new Bn(I,this.wrap,I,H,q),new Bn(I,this.wrap,I,H+1,q),new Bn(I,this.wrap,I,H,q+1),new Bn(I,this.wrap,I,H+1,q+1)]}isLessThan(b){return this.wrap<b.wrap||!(this.wrap>b.wrap)&&(this.overscaledZ<b.overscaledZ||!(this.overscaledZ>b.overscaledZ)&&(this.canonical.x<b.canonical.x||!(this.canonical.x>b.canonical.x)&&this.canonical.y<b.canonical.y))}wrapped(){return new Bn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(b){return new Bn(this.overscaledZ,b,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(b){return this.canonical.getTilePoint(new nA(b.x-this.wrap,b.y))}}function Rl(C,b,I,H,q){(C*=2)<0&&(C=-1*C-1);const ee=1<<I;return(ee*ee*C+ee*q+H).toString(36)+I.toString(36)+b.toString(36)}gi("CanonicalTileID",WA),gi("OverscaledTileID",Bn,{omit:["posMatrix"]});class Ah{constructor(b,I,H){if(this.uid=b,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(H&&H!=="mapbox"&&H!=="terrarium")return void Ft(`"${H}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=I.height;const q=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=H||"mapbox";for(let ee=0;ee<q;ee++)this.data[this._idx(-1,ee)]=this.data[this._idx(0,ee)],this.data[this._idx(q,ee)]=this.data[this._idx(q-1,ee)],this.data[this._idx(ee,-1)]=this.data[this._idx(ee,0)],this.data[this._idx(ee,q)]=this.data[this._idx(ee,q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(q,-1)]=this.data[this._idx(q-1,0)],this.data[this._idx(-1,q)]=this.data[this._idx(0,q-1)],this.data[this._idx(q,q)]=this.data[this._idx(q-1,q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<q;ee++)for(let re=0;re<q;re++){const ae=this.get(ee,re);ae>this.max&&(this.max=ae),ae<this.min&&(this.min=ae)}}get(b,I){const H=new Uint8Array(this.data.buffer),q=4*this._idx(b,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(H[q],H[q+1],H[q+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(b,I){if(b<-1||b>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(b+1)}_unpackMapbox(b,I,H){return(256*b*256+256*I+H)/10-1e4}_unpackTerrarium(b,I,H){return 256*b+I+H/256-32768}getPixels(){return new xn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(b,I,H){if(this.dim!==b.dim)throw new Error("dem dimension mismatch");let q=I*this.dim,ee=I*this.dim+this.dim,re=H*this.dim,ae=H*this.dim+this.dim;switch(I){case-1:q=ee-1;break;case 1:ee=q+1}switch(H){case-1:re=ae-1;break;case 1:ae=re+1}const de=-I*this.dim,_e=-H*this.dim;for(let Ee=re;Ee<ae;Ee++)for(let Fe=q;Fe<ee;Fe++)this.data[this._idx(Fe,Ee)]=b.data[this._idx(Fe+de,Ee+_e)]}}gi("DEMData",Ah);class ch{constructor(b){this._stringToNumber={},this._numberToString=[];for(let I=0;I<b.length;I++){const H=b[I];this._stringToNumber[H]=I,this._numberToString[I]=H}}encode(b){return this._stringToNumber[b]}decode(b){if(b>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${b} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[b]}}class hh{constructor(b,I,H,q,ee){this.type="Feature",this._vectorTileFeature=b,b._z=I,b._x=H,b._y=q,this.properties=b.properties,this.id=ee}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(b){this._geometry=b}toJSON(){const b={geometry:this.geometry};for(const I in this)I!=="_geometry"&&I!=="_vectorTileFeature"&&(b[I]=this[I]);return b}}class uh{constructor(b,I){this.tileID=b,this.x=b.canonical.x,this.y=b.canonical.y,this.z=b.canonical.z,this.grid=new qi(Xr,16,0),this.grid3D=new qi(Xr,16,0),this.featureIndexArray=new pt,this.promoteId=I}insert(b,I,H,q,ee,re){const ae=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(H,q,ee);const de=re?this.grid3D:this.grid;for(let _e=0;_e<I.length;_e++){const Ee=I[_e],Fe=[1/0,1/0,-1/0,-1/0];for(let Le=0;Le<Ee.length;Le++){const ze=Ee[Le];Fe[0]=Math.min(Fe[0],ze.x),Fe[1]=Math.min(Fe[1],ze.y),Fe[2]=Math.max(Fe[2],ze.x),Fe[3]=Math.max(Fe[3],ze.y)}Fe[0]<Xr&&Fe[1]<Xr&&Fe[2]>=0&&Fe[3]>=0&&de.insert(ae,Fe[0],Fe[1],Fe[2],Fe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new mo.VectorTile(new MA(this.rawTileData)).layers,this.sourceLayerCoder=new ch(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(b,I,H,q){this.loadVTLayers();const ee=b.params||{},re=Xr/b.tileSize/b.scale,ae=Fo(ee.filter),de=b.queryGeometry,_e=b.queryPadding*re,Ee=dh(de),Fe=this.grid.query(Ee.minX-_e,Ee.minY-_e,Ee.maxX+_e,Ee.maxY+_e),Le=dh(b.cameraQueryGeometry),ze=this.grid3D.query(Le.minX-_e,Le.minY-_e,Le.maxX+_e,Le.maxY+_e,(lt,ht,yt,dt)=>function(xt,Tt,Rt,fi,Ci){for(const li of xt)if(Tt<=li.x&&Rt<=li.y&&fi>=li.x&&Ci>=li.y)return!0;const ui=[new pe(Tt,Rt),new pe(Tt,Ci),new pe(fi,Ci),new pe(fi,Rt)];if(xt.length>2){for(const li of ui)if(nl(xt,li))return!0}for(let li=0;li<xt.length-1;li++)if(Oh(xt[li],xt[li+1],ui))return!0;return!1}(b.cameraQueryGeometry,lt-_e,ht-_e,yt+_e,dt+_e));for(const lt of ze)Fe.push(lt);Fe.sort(Af);const Ve={};let st;for(let lt=0;lt<Fe.length;lt++){const ht=Fe[lt];if(ht===st)continue;st=ht;const yt=this.featureIndexArray.get(ht);let dt=null;this.loadMatchingFeature(Ve,yt.bucketIndex,yt.sourceLayerIndex,yt.featureIndex,ae,ee.layers,ee.availableImages,I,H,q,(xt,Tt,Rt)=>(dt||(dt=jn(xt)),Tt.queryIntersectsFeature(de,xt,Rt,dt,this.z,b.transform,re,b.pixelPosMatrix)))}return Ve}loadMatchingFeature(b,I,H,q,ee,re,ae,de,_e,Ee,Fe){const Le=this.bucketLayerIDs[I];if(re&&!function(lt,ht){for(let yt=0;yt<lt.length;yt++)if(ht.indexOf(lt[yt])>=0)return!0;return!1}(re,Le))return;const ze=this.sourceLayerCoder.decode(H),Ve=this.vtLayers[ze].feature(q);if(ee.needGeometry){const lt=_a(Ve,!0);if(!ee.filter(new Er(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!ee.filter(new Er(this.tileID.overscaledZ),Ve))return;const st=this.getId(Ve,ze);for(let lt=0;lt<Le.length;lt++){const ht=Le[lt];if(re&&re.indexOf(ht)<0)continue;const yt=de[ht];if(!yt)continue;let dt={};st&&Ee&&(dt=Ee.getState(yt.sourceLayer||"_geojsonTileLayer",st));const xt=Ye({},_e[ht]);xt.paint=fh(xt.paint,yt.paint,Ve,dt,ae),xt.layout=fh(xt.layout,yt.layout,Ve,dt,ae);const Tt=!Fe||Fe(Ve,yt,dt);if(!Tt)continue;const Rt=new hh(Ve,this.z,this.x,this.y,st);Rt.layer=xt;let fi=b[ht];fi===void 0&&(fi=b[ht]=[]),fi.push({featureIndex:q,feature:Rt,intersectionZ:Tt})}}lookupSymbolFeatures(b,I,H,q,ee,re,ae,de){const _e={};this.loadVTLayers();const Ee=Fo(ee);for(const Fe of b)this.loadMatchingFeature(_e,H,q,Fe,Ee,re,ae,de,I);return _e}hasLayer(b){for(const I of this.bucketLayerIDs)for(const H of I)if(b===H)return!0;return!1}getId(b,I){let H=b.id;return this.promoteId&&(H=b.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[I]],typeof H=="boolean"&&(H=Number(H))),H}}function fh(C,b,I,H,q){return rt(C,(ee,re)=>{const ae=b instanceof Mo?b.get(re):null;return ae&&ae.evaluate?ae.evaluate(I,H,q):ae})}function dh(C){let b=1/0,I=1/0,H=-1/0,q=-1/0;for(const ee of C)b=Math.min(b,ee.x),I=Math.min(I,ee.y),H=Math.max(H,ee.x),q=Math.max(q,ee.y);return{minX:b,minY:I,maxX:H,maxY:q}}function Af(C,b){return b-C}function ph(C,b,I,H,q){const ee=[];for(let re=0;re<C.length;re++){const ae=C[re];let de;for(let _e=0;_e<ae.length-1;_e++){let Ee=ae[_e],Fe=ae[_e+1];Ee.x<b&&Fe.x<b||(Ee.x<b?Ee=new pe(b,Ee.y+(b-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round():Fe.x<b&&(Fe=new pe(b,Ee.y+(b-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round()),Ee.y<I&&Fe.y<I||(Ee.y<I?Ee=new pe(Ee.x+(I-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),I)._round():Fe.y<I&&(Fe=new pe(Ee.x+(I-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),I)._round()),Ee.x>=H&&Fe.x>=H||(Ee.x>=H?Ee=new pe(H,Ee.y+(H-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round():Fe.x>=H&&(Fe=new pe(H,Ee.y+(H-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round()),Ee.y>=q&&Fe.y>=q||(Ee.y>=q?Ee=new pe(Ee.x+(q-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),q)._round():Fe.y>=q&&(Fe=new pe(Ee.x+(q-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),q)._round()),de&&Ee.equals(de[de.length-1])||(de=[Ee],ee.push(de)),de.push(Fe)))))}}return ee}gi("FeatureIndex",uh,{omit:["rawTileData","sourceLayerCoder"]});class wo extends pe{constructor(b,I,H,q){super(b,I),this.angle=H,q!==void 0&&(this.segment=q)}clone(){return new wo(this.x,this.y,this.angle,this.segment)}}function gh(C,b,I,H,q){if(b.segment===void 0||I===0)return!0;let ee=b,re=b.segment+1,ae=0;for(;ae>-I/2;){if(re--,re<0)return!1;ae-=C[re].dist(ee),ee=C[re]}ae+=C[re].dist(C[re+1]),re++;const de=[];let _e=0;for(;ae<I/2;){const Ee=C[re],Fe=C[re+1];if(!Fe)return!1;let Le=C[re-1].angleTo(Ee)-Ee.angleTo(Fe);for(Le=Math.abs((Le+3*Math.PI)%(2*Math.PI)-Math.PI),de.push({distance:ae,angleDelta:Le}),_e+=Le;ae-de[0].distance>H;)_e-=de.shift().angleDelta;if(_e>q)return!1;re++,ae+=Ee.dist(Fe)}return!0}function mh(C){let b=0;for(let I=0;I<C.length-1;I++)b+=C[I].dist(C[I+1]);return b}function _h(C,b,I){return C?.6*b*I:0}function yh(C,b){return Math.max(C?C.right-C.left:0,b?b.right-b.left:0)}function cf(C,b,I,H,q,ee){const re=_h(I,q,ee),ae=yh(I,H)*ee;let de=0;const _e=mh(C)/2;for(let Ee=0;Ee<C.length-1;Ee++){const Fe=C[Ee],Le=C[Ee+1],ze=Fe.dist(Le);if(de+ze>_e){const Ve=(_e-de)/ze,st=ks.number(Fe.x,Le.x,Ve),lt=ks.number(Fe.y,Le.y,Ve),ht=new wo(st,lt,Le.angleTo(Fe),Ee);return ht._round(),!re||gh(C,ht,ae,re,b)?ht:void 0}de+=ze}}function hf(C,b,I,H,q,ee,re,ae,de){const _e=_h(H,ee,re),Ee=yh(H,q),Fe=Ee*re,Le=C[0].x===0||C[0].x===de||C[0].y===0||C[0].y===de;return b-Fe<b/4&&(b=Fe+b/4),vh(C,Le?b/2*ae%b:(Ee/2+2*ee)*re*ae%b,b,_e,I,Fe,Le,!1,de)}function vh(C,b,I,H,q,ee,re,ae,de){const _e=ee/2,Ee=mh(C);let Fe=0,Le=b-I,ze=[];for(let Ve=0;Ve<C.length-1;Ve++){const st=C[Ve],lt=C[Ve+1],ht=st.dist(lt),yt=lt.angleTo(st);for(;Le+I<Fe+ht;){Le+=I;const dt=(Le-Fe)/ht,xt=ks.number(st.x,lt.x,dt),Tt=ks.number(st.y,lt.y,dt);if(xt>=0&&xt<de&&Tt>=0&&Tt<de&&Le-_e>=0&&Le+_e<=Ee){const Rt=new wo(xt,Tt,yt,Ve);Rt._round(),H&&!gh(C,Rt,ee,H,q)||ze.push(Rt)}}Fe+=ht}return ae||ze.length||re||(ze=vh(C,Fe/2,I,H,q,ee,re,!0,de)),ze}gi("Anchor",wo);const Hl=sn;function wh(C,b,I,H){const q=[],ee=C.image,re=ee.pixelRatio,ae=ee.paddedRect.w-2*Hl,de=ee.paddedRect.h-2*Hl,_e=C.right-C.left,Ee=C.bottom-C.top,Fe=ee.stretchX||[[0,ae]],Le=ee.stretchY||[[0,de]],ze=(ti,yi)=>ti+yi[1]-yi[0],Ve=Fe.reduce(ze,0),st=Le.reduce(ze,0),lt=ae-Ve,ht=de-st;let yt=0,dt=Ve,xt=0,Tt=st,Rt=0,fi=lt,Ci=0,ui=ht;if(ee.content&&H){const ti=ee.content;yt=aA(Fe,0,ti[0]),xt=aA(Le,0,ti[1]),dt=aA(Fe,ti[0],ti[2]),Tt=aA(Le,ti[1],ti[3]),Rt=ti[0]-yt,Ci=ti[1]-xt,fi=ti[2]-ti[0]-dt,ui=ti[3]-ti[1]-Tt}const li=(ti,yi,si,qt)=>{const Pi=oA(ti.stretch-yt,dt,_e,C.left),Si=lA(ti.fixed-Rt,fi,ti.stretch,Ve),ir=oA(yi.stretch-xt,Tt,Ee,C.top),Rr=lA(yi.fixed-Ci,ui,yi.stretch,st),zr=oA(si.stretch-yt,dt,_e,C.left),fs=lA(si.fixed-Rt,fi,si.stretch,Ve),fn=oA(qt.stretch-xt,Tt,Ee,C.top),Gs=lA(qt.fixed-Ci,ui,qt.stretch,st),os=new pe(Pi,ir),ms=new pe(zr,ir),Ss=new pe(zr,fn),nn=new pe(Pi,fn),Ws=new pe(Si/re,Rr/re),ls=new pe(fs/re,Gs/re),ds=b*Math.PI/180;if(ds){const an=Math.sin(ds),on=Math.cos(ds),Jr=[on,-an,an,on];os._matMult(Jr),ms._matMult(Jr),nn._matMult(Jr),Ss._matMult(Jr)}const Ps=ti.stretch+ti.fixed,qs=yi.stretch+yi.fixed;return{tl:os,tr:ms,bl:nn,br:Ss,tex:{x:ee.paddedRect.x+Hl+Ps,y:ee.paddedRect.y+Hl+qs,w:si.stretch+si.fixed-Ps,h:qt.stretch+qt.fixed-qs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ws,pixelOffsetBR:ls,minFontScaleX:fi/re/_e,minFontScaleY:ui/re/Ee,isSDF:I}};if(H&&(ee.stretchX||ee.stretchY)){const ti=bh(Fe,lt,Ve),yi=bh(Le,ht,st);for(let si=0;si<ti.length-1;si++){const qt=ti[si],Pi=ti[si+1];for(let Si=0;Si<yi.length-1;Si++)q.push(li(qt,yi[Si],Pi,yi[Si+1]))}}else q.push(li({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ae+1},{fixed:0,stretch:de+1}));return q}function aA(C,b,I){let H=0;for(const q of C)H+=Math.max(b,Math.min(I,q[1]))-Math.max(b,Math.min(I,q[0]));return H}function bh(C,b,I){const H=[{fixed:-1,stretch:0}];for(const[q,ee]of C){const re=H[H.length-1];H.push({fixed:q-re.stretch,stretch:re.stretch}),H.push({fixed:q-re.stretch,stretch:re.stretch+(ee-q)})}return H.push({fixed:b+Hl,stretch:I}),H}function oA(C,b,I,H){return C/b*I+H}function lA(C,b,I,H){return C-b*I/H}class AA{constructor(b,I,H,q,ee,re,ae,de,_e,Ee){if(this.boxStartIndex=b.length,_e){let Fe=re.top,Le=re.bottom;const ze=re.collisionPadding;ze&&(Fe-=ze[1],Le+=ze[3]);let Ve=Le-Fe;Ve>0&&(Ve=Math.max(10,Ve),this.circleDiameter=Ve)}else{let Fe=re.top*ae-de[0],Le=re.bottom*ae+de[2],ze=re.left*ae-de[3],Ve=re.right*ae+de[1];const st=re.collisionPadding;if(st&&(ze-=st[0]*ae,Fe-=st[1]*ae,Ve+=st[2]*ae,Le+=st[3]*ae),Ee){const lt=new pe(ze,Fe),ht=new pe(Ve,Fe),yt=new pe(ze,Le),dt=new pe(Ve,Le),xt=Ee*Math.PI/180;lt._rotate(xt),ht._rotate(xt),yt._rotate(xt),dt._rotate(xt),ze=Math.min(lt.x,ht.x,yt.x,dt.x),Ve=Math.max(lt.x,ht.x,yt.x,dt.x),Fe=Math.min(lt.y,ht.y,yt.y,dt.y),Le=Math.max(lt.y,ht.y,yt.y,dt.y)}b.emplaceBack(I.x,I.y,ze,Fe,Ve,Le,H,q,ee)}this.boxEndIndex=b.length}}class uf{constructor(b=[],I=ff){if(this.data=b,this.length=this.data.length,this.compare=I,this.length>0)for(let H=(this.length>>1)-1;H>=0;H--)this._down(H)}push(b){this.data.push(b),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const b=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),b}peek(){return this.data[0]}_up(b){const{data:I,compare:H}=this,q=I[b];for(;b>0;){const ee=b-1>>1,re=I[ee];if(H(q,re)>=0)break;I[b]=re,b=ee}I[b]=q}_down(b){const{data:I,compare:H}=this,q=this.length>>1,ee=I[b];for(;b<q;){let re=1+(b<<1),ae=I[re];const de=re+1;if(de<this.length&&H(I[de],ae)<0&&(re=de,ae=I[de]),H(ae,ee)>=0)break;I[b]=ae,b=re}I[b]=ee}}function ff(C,b){return C<b?-1:C>b?1:0}function df(C,b=1,I=!1){let H=1/0,q=1/0,ee=-1/0,re=-1/0;const ae=C[0];for(let ze=0;ze<ae.length;ze++){const Ve=ae[ze];(!ze||Ve.x<H)&&(H=Ve.x),(!ze||Ve.y<q)&&(q=Ve.y),(!ze||Ve.x>ee)&&(ee=Ve.x),(!ze||Ve.y>re)&&(re=Ve.y)}const de=Math.min(ee-H,re-q);let _e=de/2;const Ee=new uf([],pf);if(de===0)return new pe(H,q);for(let ze=H;ze<ee;ze+=de)for(let Ve=q;Ve<re;Ve+=de)Ee.push(new fl(ze+_e,Ve+_e,_e,C));let Fe=function(ze){let Ve=0,st=0,lt=0;const ht=ze[0];for(let yt=0,dt=ht.length,xt=dt-1;yt<dt;xt=yt++){const Tt=ht[yt],Rt=ht[xt],fi=Tt.x*Rt.y-Rt.x*Tt.y;st+=(Tt.x+Rt.x)*fi,lt+=(Tt.y+Rt.y)*fi,Ve+=3*fi}return new fl(st/Ve,lt/Ve,0,ze)}(C),Le=Ee.length;for(;Ee.length;){const ze=Ee.pop();(ze.d>Fe.d||!Fe.d)&&(Fe=ze,I&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Le)),ze.max-Fe.d<=b||(_e=ze.h/2,Ee.push(new fl(ze.p.x-_e,ze.p.y-_e,_e,C)),Ee.push(new fl(ze.p.x+_e,ze.p.y-_e,_e,C)),Ee.push(new fl(ze.p.x-_e,ze.p.y+_e,_e,C)),Ee.push(new fl(ze.p.x+_e,ze.p.y+_e,_e,C)),Le+=4)}return I&&(console.log(`num probes: ${Le}`),console.log(`best distance: ${Fe.d}`)),Fe.p}function pf(C,b){return b.max-C.max}function fl(C,b,I,H){this.p=new pe(C,b),this.h=I,this.d=function(q,ee){let re=!1,ae=1/0;for(let de=0;de<ee.length;de++){const _e=ee[de];for(let Ee=0,Fe=_e.length,Le=Fe-1;Ee<Fe;Le=Ee++){const ze=_e[Ee],Ve=_e[Le];ze.y>q.y!=Ve.y>q.y&&q.x<(Ve.x-ze.x)*(q.y-ze.y)/(Ve.y-ze.y)+ze.x&&(re=!re),ae=Math.min(ae,ac(q,ze,Ve))}}return(re?1:-1)*Math.sqrt(ae)}(this.p,H),this.max=this.d+this.h*Math.SQRT2}var Ts;D.TextAnchorEnum=void 0,(Ts=D.TextAnchorEnum||(D.TextAnchorEnum={}))[Ts.center=1]="center",Ts[Ts.left=2]="left",Ts[Ts.right=3]="right",Ts[Ts.top=4]="top",Ts[Ts.bottom=5]="bottom",Ts[Ts["top-left"]=6]="top-left",Ts[Ts["top-right"]=7]="top-right",Ts[Ts["bottom-left"]=8]="bottom-left",Ts[Ts["bottom-right"]=9]="bottom-right";const bo=7,qA=Number.POSITIVE_INFINITY;function xh(C,b){return b[1]!==qA?function(I,H,q){let ee=0,re=0;switch(H=Math.abs(H),q=Math.abs(q),I){case"top-right":case"top-left":case"top":re=q-bo;break;case"bottom-right":case"bottom-left":case"bottom":re=-q+bo}switch(I){case"top-right":case"bottom-right":case"right":ee=-H;break;case"top-left":case"bottom-left":case"left":ee=H}return[ee,re]}(C,b[0],b[1]):function(I,H){let q=0,ee=0;H<0&&(H=0);const re=H/Math.SQRT2;switch(I){case"top-right":case"top-left":ee=re-bo;break;case"bottom-right":case"bottom-left":ee=-re+bo;break;case"bottom":ee=-H+bo;break;case"top":ee=H-bo}switch(I){case"top-right":case"bottom-right":q=-re;break;case"top-left":case"bottom-left":q=re;break;case"left":q=H;break;case"right":q=-H}return[q,ee]}(C,b[0])}function Bh(C,b,I){var H;const q=C.layout,ee=(H=q.get("text-variable-anchor-offset"))===null||H===void 0?void 0:H.evaluate(b,{},I);if(ee){const ae=ee.values,de=[];for(let _e=0;_e<ae.length;_e+=2){const Ee=de[_e]=ae[_e],Fe=ae[_e+1].map(Le=>Le*us);Ee.startsWith("top")?Fe[1]-=bo:Ee.startsWith("bottom")&&(Fe[1]+=bo),de[_e+1]=Fe}return new dr(de)}const re=q.get("text-variable-anchor");if(re){let ae;ae=C._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[q.get("text-radial-offset").evaluate(b,{},I)*us,qA]:q.get("text-offset").evaluate(b,{},I).map(_e=>_e*us);const de=[];for(const _e of re)de.push(_e,xh(_e,ae));return new dr(de)}return null}function XA(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gf(C,b,I,H,q,ee,re,ae,de,_e,Ee){let Fe=ee.textMaxSize.evaluate(b,{});Fe===void 0&&(Fe=re);const Le=C.layers[0].layout,ze=Le.get("icon-offset").evaluate(b,{},Ee),Ve=Eh(I.horizontal),st=re/24,lt=C.tilePixelRatio*st,ht=C.tilePixelRatio*Fe/24,yt=C.tilePixelRatio*ae,dt=C.tilePixelRatio*Le.get("symbol-spacing"),xt=Le.get("text-padding")*C.tilePixelRatio,Tt=function(qt,Pi,Si,ir=1){const Rr=qt.get("icon-padding").evaluate(Pi,{},Si),zr=Rr&&Rr.values;return[zr[0]*ir,zr[1]*ir,zr[2]*ir,zr[3]*ir]}(Le,b,Ee,C.tilePixelRatio),Rt=Le.get("text-max-angle")/180*Math.PI,fi=Le.get("text-rotation-alignment")!=="viewport"&&Le.get("symbol-placement")!=="point",Ci=Le.get("icon-rotation-alignment")==="map"&&Le.get("symbol-placement")!=="point",ui=Le.get("symbol-placement"),li=dt/2,ti=Le.get("icon-text-fit");let yi;H&&ti!=="none"&&(C.allowVerticalPlacement&&I.vertical&&(yi=Yc(H,I.vertical,ti,Le.get("icon-text-fit-padding"),ze,st)),Ve&&(H=Yc(H,Ve,ti,Le.get("icon-text-fit-padding"),ze,st)));const si=(qt,Pi)=>{Pi.x<0||Pi.x>=Xr||Pi.y<0||Pi.y>=Xr||function(Si,ir,Rr,zr,fs,fn,Gs,os,ms,Ss,nn,Ws,ls,ds,Ps,qs,an,on,Jr,Is,fr,dn,Fs,Xs,Pn){const Zn=Si.addToLineVertexArray(ir,Rr);let Jn,qa,Ln,Cn,ln=0,Xa=0,Vl=0,Fh=0,ic=-1,rc=-1;const Ya={};let kh=wn("");if(Si.allowVerticalPlacement&&zr.vertical){const Ls=os.layout.get("text-rotate").evaluate(fr,{},Xs)+90;Ln=new AA(ms,ir,Ss,nn,Ws,zr.vertical,ls,ds,Ps,Ls),Gs&&(Cn=new AA(ms,ir,Ss,nn,Ws,Gs,an,on,Ps,Ls))}if(fs){const Ls=os.layout.get("icon-rotate").evaluate(fr,{}),En=os.layout.get("icon-text-fit")!=="none",zo=wh(fs,Ls,Fs,En),ea=Gs?wh(Gs,Ls,Fs,En):void 0;qa=new AA(ms,ir,Ss,nn,Ws,fs,an,on,!1,Ls),ln=4*zo.length;const No=Si.iconSizeData;let va=null;No.kind==="source"?(va=[ya*os.layout.get("icon-size").evaluate(fr,{})],va[0]>yo&&Ft(`${Si.layerIds[0]}: Value for "icon-size" is >= ${Ol}. Reduce your "icon-size".`)):No.kind==="composite"&&(va=[ya*dn.compositeIconSizes[0].evaluate(fr,{},Xs),ya*dn.compositeIconSizes[1].evaluate(fr,{},Xs)],(va[0]>yo||va[1]>yo)&&Ft(`${Si.layerIds[0]}: Value for "icon-size" is >= ${Ol}. Reduce your "icon-size".`)),Si.addSymbols(Si.icon,zo,va,Is,Jr,fr,D.WritingMode.none,ir,Zn.lineStartIndex,Zn.lineLength,-1,Xs),ic=Si.icon.placedSymbolArray.length-1,ea&&(Xa=4*ea.length,Si.addSymbols(Si.icon,ea,va,Is,Jr,fr,D.WritingMode.vertical,ir,Zn.lineStartIndex,Zn.lineLength,-1,Xs),rc=Si.icon.placedSymbolArray.length-1)}const Dh=Object.keys(zr.horizontal);for(const Ls of Dh){const En=zr.horizontal[Ls];if(!Jn){kh=wn(En.text);const ea=os.layout.get("text-rotate").evaluate(fr,{},Xs);Jn=new AA(ms,ir,Ss,nn,Ws,En,ls,ds,Ps,ea)}const zo=En.positionedLines.length===1;if(Vl+=Ch(Si,ir,En,fn,os,Ps,fr,qs,Zn,zr.vertical?D.WritingMode.horizontal:D.WritingMode.horizontalOnly,zo?Dh:[Ls],Ya,ic,dn,Xs),zo)break}zr.vertical&&(Fh+=Ch(Si,ir,zr.vertical,fn,os,Ps,fr,qs,Zn,D.WritingMode.vertical,["vertical"],Ya,rc,dn,Xs));const yf=Jn?Jn.boxStartIndex:Si.collisionBoxArray.length,vf=Jn?Jn.boxEndIndex:Si.collisionBoxArray.length,wf=Ln?Ln.boxStartIndex:Si.collisionBoxArray.length,bf=Ln?Ln.boxEndIndex:Si.collisionBoxArray.length,xf=qa?qa.boxStartIndex:Si.collisionBoxArray.length,Bf=qa?qa.boxEndIndex:Si.collisionBoxArray.length,Cf=Cn?Cn.boxStartIndex:Si.collisionBoxArray.length,Ef=Cn?Cn.boxEndIndex:Si.collisionBoxArray.length;let $n=-1;const hA=(Ls,En)=>Ls&&Ls.circleDiameter?Math.max(Ls.circleDiameter,En):En;$n=hA(Jn,$n),$n=hA(Ln,$n),$n=hA(qa,$n),$n=hA(Cn,$n);const Uh=$n>-1?1:0;Uh&&($n*=Pn/us),Si.glyphOffsetArray.length>=ul.MAX_GLYPHS&&Ft("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),fr.sortKey!==void 0&&Si.addToSortKeyRanges(Si.symbolInstances.length,fr.sortKey);const Tf=Bh(os,fr,Xs),[Sf,If]=function(Ls,En){const zo=Ls.length,ea=En==null?void 0:En.values;if((ea==null?void 0:ea.length)>0)for(let No=0;No<ea.length;No+=2){const va=ea[No+1];Ls.emplaceBack(D.TextAnchorEnum[ea[No]],va[0],va[1])}return[zo,Ls.length]}(Si.textAnchorOffsets,Tf);Si.symbolInstances.emplaceBack(ir.x,ir.y,Ya.right>=0?Ya.right:-1,Ya.center>=0?Ya.center:-1,Ya.left>=0?Ya.left:-1,Ya.vertical||-1,ic,rc,kh,yf,vf,wf,bf,xf,Bf,Cf,Ef,Ss,Vl,Fh,ln,Xa,Uh,0,ls,$n,Sf,If)}(C,Pi,qt,I,H,q,yi,C.layers[0],C.collisionBoxArray,b.index,b.sourceLayerIndex,C.index,lt,[xt,xt,xt,xt],fi,de,yt,Tt,Ci,ze,b,ee,_e,Ee,re)};if(ui==="line")for(const qt of ph(b.geometry,0,0,Xr,Xr)){const Pi=hf(qt,dt,Rt,I.vertical||Ve,H,24,ht,C.overscaling,Xr);for(const Si of Pi)Ve&&mf(C,Ve.text,li,Si)||si(qt,Si)}else if(ui==="line-center"){for(const qt of b.geometry)if(qt.length>1){const Pi=cf(qt,Rt,I.vertical||Ve,H,24,ht);Pi&&si(qt,Pi)}}else if(b.type==="Polygon")for(const qt of CA(b.geometry,0)){const Pi=df(qt,16);si(qt[0],new wo(Pi.x,Pi.y,0))}else if(b.type==="LineString")for(const qt of b.geometry)si(qt,new wo(qt[0].x,qt[0].y,0));else if(b.type==="Point")for(const qt of b.geometry)for(const Pi of qt)si([Pi],new wo(Pi.x,Pi.y,0))}function Ch(C,b,I,H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve){const st=function(yt,dt,xt,Tt,Rt,fi,Ci,ui){const li=Tt.layout.get("text-rotate").evaluate(fi,{})*Math.PI/180,ti=[];for(const yi of dt.positionedLines)for(const si of yi.positionedGlyphs){if(!si.rect)continue;const qt=si.rect||{};let Pi=Xu+1,Si=!0,ir=1,Rr=0;const zr=(Rt||ui)&&si.vertical,fs=si.metrics.advance*si.scale/2;if(ui&&dt.verticalizable&&(Rr=yi.lineOffset/2-(si.imageName?-(us-si.metrics.width*si.scale)/2:(si.scale-1)*us)),si.imageName){const Jr=Ci[si.imageName];Si=Jr.sdf,ir=Jr.pixelRatio,Pi=sn/ir}const fn=Rt?[si.x+fs,si.y]:[0,0];let Gs=Rt?[0,0]:[si.x+fs+xt[0],si.y+xt[1]-Rr],os=[0,0];zr&&(os=Gs,Gs=[0,0]);const ms=(si.metrics.left-Pi)*si.scale-fs+Gs[0],Ss=(-si.metrics.top-Pi)*si.scale+Gs[1],nn=ms+qt.w*si.scale/ir,Ws=Ss+qt.h*si.scale/ir,ls=new pe(ms,Ss),ds=new pe(nn,Ss),Ps=new pe(ms,Ws),qs=new pe(nn,Ws);if(zr){const Jr=new pe(-fs,fs-Ll),Is=-Math.PI/2,fr=us/2-fs,dn=new pe(5-Ll-fr,-(si.imageName?fr:0)),Fs=new pe(...os);ls._rotateAround(Is,Jr)._add(dn)._add(Fs),ds._rotateAround(Is,Jr)._add(dn)._add(Fs),Ps._rotateAround(Is,Jr)._add(dn)._add(Fs),qs._rotateAround(Is,Jr)._add(dn)._add(Fs)}if(li){const Jr=Math.sin(li),Is=Math.cos(li),fr=[Is,-Jr,Jr,Is];ls._matMult(fr),ds._matMult(fr),Ps._matMult(fr),qs._matMult(fr)}const an=new pe(0,0),on=new pe(0,0);ti.push({tl:ls,tr:ds,bl:Ps,br:qs,tex:qt,writingMode:dt.writingMode,glyphOffset:fn,sectionIndex:si.sectionIndex,isSDF:Si,pixelOffsetTL:an,pixelOffsetBR:on,minFontScaleX:0,minFontScaleY:0})}return ti}(0,I,ae,q,ee,re,H,C.allowVerticalPlacement),lt=C.textSizeData;let ht=null;lt.kind==="source"?(ht=[ya*q.layout.get("text-size").evaluate(re,{})],ht[0]>yo&&Ft(`${C.layerIds[0]}: Value for "text-size" is >= ${Ol}. Reduce your "text-size".`)):lt.kind==="composite"&&(ht=[ya*ze.compositeTextSizes[0].evaluate(re,{},Ve),ya*ze.compositeTextSizes[1].evaluate(re,{},Ve)],(ht[0]>yo||ht[1]>yo)&&Ft(`${C.layerIds[0]}: Value for "text-size" is >= ${Ol}. Reduce your "text-size".`)),C.addSymbols(C.text,st,ht,ae,ee,re,_e,b,de.lineStartIndex,de.lineLength,Le,Ve);for(const yt of Ee)Fe[yt]=C.text.placedSymbolArray.length-1;return 4*st.length}function Eh(C){for(const b in C)return C[b];return null}function mf(C,b,I,H){const q=C.compareText;if(b in q){const ee=q[b];for(let re=ee.length-1;re>=0;re--)if(H.dist(ee[re])<I)return!0}else q[b]=[];return q[b].push(H),!1}const Th=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class YA{static from(b){if(!(b instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[I,H]=new Uint8Array(b,0,2);if(I!==219)throw new Error("Data does not appear to be in a KDBush format.");const q=H>>4;if(q!==1)throw new Error(`Got v${q} data when expected v1.`);const ee=Th[15&H];if(!ee)throw new Error("Unrecognized array type.");const[re]=new Uint16Array(b,2,1),[ae]=new Uint32Array(b,4,1);return new YA(ae,re,ee,b)}constructor(b,I=64,H=Float64Array,q){if(isNaN(b)||b<0)throw new Error(`Unpexpected numItems value: ${b}.`);this.numItems=+b,this.nodeSize=Math.min(Math.max(+I,2),65535),this.ArrayType=H,this.IndexArrayType=b<65536?Uint16Array:Uint32Array;const ee=Th.indexOf(this.ArrayType),re=2*b*this.ArrayType.BYTES_PER_ELEMENT,ae=b*this.IndexArrayType.BYTES_PER_ELEMENT,de=(8-ae%8)%8;if(ee<0)throw new Error(`Unexpected typed array class: ${H}.`);q&&q instanceof ArrayBuffer?(this.data=q,this.ids=new this.IndexArrayType(this.data,8,b),this.coords=new this.ArrayType(this.data,8+ae+de,2*b),this._pos=2*b,this._finished=!0):(this.data=new ArrayBuffer(8+re+ae+de),this.ids=new this.IndexArrayType(this.data,8,b),this.coords=new this.ArrayType(this.data,8+ae+de,2*b),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+ee]),new Uint16Array(this.data,2,1)[0]=I,new Uint32Array(this.data,4,1)[0]=b)}add(b,I){const H=this._pos>>1;return this.ids[H]=H,this.coords[this._pos++]=b,this.coords[this._pos++]=I,H}finish(){const b=this._pos>>1;if(b!==this.numItems)throw new Error(`Added ${b} items when expected ${this.numItems}.`);return jA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(b,I,H,q){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ee,coords:re,nodeSize:ae}=this,de=[0,ee.length-1,0],_e=[];for(;de.length;){const Ee=de.pop()||0,Fe=de.pop()||0,Le=de.pop()||0;if(Fe-Le<=ae){for(let lt=Le;lt<=Fe;lt++){const ht=re[2*lt],yt=re[2*lt+1];ht>=b&&ht<=H&&yt>=I&&yt<=q&&_e.push(ee[lt])}continue}const ze=Le+Fe>>1,Ve=re[2*ze],st=re[2*ze+1];Ve>=b&&Ve<=H&&st>=I&&st<=q&&_e.push(ee[ze]),(Ee===0?b<=Ve:I<=st)&&(de.push(Le),de.push(ze-1),de.push(1-Ee)),(Ee===0?H>=Ve:q>=st)&&(de.push(ze+1),de.push(Fe),de.push(1-Ee))}return _e}within(b,I,H){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:q,coords:ee,nodeSize:re}=this,ae=[0,q.length-1,0],de=[],_e=H*H;for(;ae.length;){const Ee=ae.pop()||0,Fe=ae.pop()||0,Le=ae.pop()||0;if(Fe-Le<=re){for(let lt=Le;lt<=Fe;lt++)Ih(ee[2*lt],ee[2*lt+1],b,I)<=_e&&de.push(q[lt]);continue}const ze=Le+Fe>>1,Ve=ee[2*ze],st=ee[2*ze+1];Ih(Ve,st,b,I)<=_e&&de.push(q[ze]),(Ee===0?b-H<=Ve:I-H<=st)&&(ae.push(Le),ae.push(ze-1),ae.push(1-Ee)),(Ee===0?b+H>=Ve:I+H>=st)&&(ae.push(ze+1),ae.push(Fe),ae.push(1-Ee))}return de}}function jA(C,b,I,H,q,ee){if(q-H<=I)return;const re=H+q>>1;Sh(C,b,re,H,q,ee),jA(C,b,I,H,re-1,1-ee),jA(C,b,I,re+1,q,1-ee)}function Sh(C,b,I,H,q,ee){for(;q>H;){if(q-H>600){const _e=q-H+1,Ee=I-H+1,Fe=Math.log(_e),Le=.5*Math.exp(2*Fe/3),ze=.5*Math.sqrt(Fe*Le*(_e-Le)/_e)*(Ee-_e/2<0?-1:1);Sh(C,b,I,Math.max(H,Math.floor(I-Ee*Le/_e+ze)),Math.min(q,Math.floor(I+(_e-Ee)*Le/_e+ze)),ee)}const re=b[2*I+ee];let ae=H,de=q;for(zl(C,b,H,I),b[2*q+ee]>re&&zl(C,b,H,q);ae<de;){for(zl(C,b,ae,de),ae++,de--;b[2*ae+ee]<re;)ae++;for(;b[2*de+ee]>re;)de--}b[2*H+ee]===re?zl(C,b,H,de):(de++,zl(C,b,de,q)),de<=I&&(H=de+1),I<=de&&(q=de-1)}}function zl(C,b,I,H){ZA(C,I,H),ZA(b,2*I,2*H),ZA(b,2*I+1,2*H+1)}function ZA(C,b,I){const H=C[b];C[b]=C[I],C[I]=H}function Ih(C,b,I,H){const q=C-I,ee=b-H;return q*q+ee*ee}var JA;D.PerformanceMarkers=void 0,(JA=D.PerformanceMarkers||(D.PerformanceMarkers={})).create="create",JA.load="load",JA.fullLoad="fullLoad";let cA=null,Nl=[];const $A=1e3/60,ec="loadTime",tc="fullLoadTime",_f={mark(C){performance.mark(C)},frame(C){const b=C;cA!=null&&Nl.push(b-cA),cA=b},clearMetrics(){cA=null,Nl=[],performance.clearMeasures(ec),performance.clearMeasures(tc);for(const C in D.PerformanceMarkers)performance.clearMarks(D.PerformanceMarkers[C])},getPerformanceMetrics(){performance.measure(ec,D.PerformanceMarkers.create,D.PerformanceMarkers.load),performance.measure(tc,D.PerformanceMarkers.create,D.PerformanceMarkers.fullLoad);const C=performance.getEntriesByName(ec)[0].duration,b=performance.getEntriesByName(tc)[0].duration,I=Nl.length,H=1/(Nl.reduce((ee,re)=>ee+re,0)/I/1e3),q=Nl.filter(ee=>ee>$A).reduce((ee,re)=>ee+(re-$A)/$A,0);return{loadTime:C,fullLoadTime:b,fps:H,percentDroppedFrames:q/(I+q)*100,totalFrames:I}}};D.AJAXError=w,D.ARRAY_TYPE=al,D.Actor=class{constructor(C,b,I){this.receive=H=>{const q=H.data,ee=q.id;if(ee&&(!q.targetMapId||this.mapId===q.targetMapId))if(q.type==="<cancel>"){delete this.tasks[ee];const re=this.cancelCallbacks[ee];delete this.cancelCallbacks[ee],re&&re()}else Mt()||q.mustQueue?(this.tasks[ee]=q,this.taskQueue.push(ee),this.invoker.trigger()):this.processTask(ee,q)},this.process=()=>{if(!this.taskQueue.length)return;const H=this.taskQueue.shift(),q=this.tasks[H];delete this.tasks[H],this.taskQueue.length&&this.invoker.trigger(),q&&this.processTask(H,q)},this.target=C,this.parent=b,this.mapId=I,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new lf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Mt()?C:window}send(C,b,I,H,q=!1){const ee=Math.round(1e18*Math.random()).toString(36).substring(0,10);I&&(this.callbacks[ee]=I);const re=Ai(this.globalScope)?void 0:[];return this.target.postMessage({id:ee,type:C,hasCallback:!!I,targetMapId:H,mustQueue:q,sourceMapId:this.mapId,data:xe(b,re)},re),{cancel:()=>{I&&delete this.callbacks[ee],this.target.postMessage({id:ee,type:"<cancel>",targetMapId:H,sourceMapId:this.mapId})}}}processTask(C,b){if(b.type==="<response>"){const I=this.callbacks[C];delete this.callbacks[C],I&&(b.error?I(He(b.error)):I(null,He(b.data)))}else{let I=!1;const H=Ai(this.globalScope)?void 0:[],q=b.hasCallback?(ae,de)=>{I=!0,delete this.cancelCallbacks[C],this.target.postMessage({id:C,type:"<response>",sourceMapId:this.mapId,error:ae?xe(ae):null,data:xe(de,H)},H)}:ae=>{I=!0};let ee=null;const re=He(b.data);if(this.parent[b.type])ee=this.parent[b.type](b.sourceMapId,re,q);else if(this.parent.getWorkerSource){const ae=b.type.split(".");ee=this.parent.getWorkerSource(b.sourceMapId,ae[0],re.source)[ae[1]](re,q)}else q(new Error(`Could not find function ${b.type}`));!I&&ee&&ee.cancel&&(this.cancelCallbacks[C]=ee.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},D.AlphaImage=Sl,D.CanonicalTileID=WA,D.CollisionBoxArray=he,D.CollisionCircleLayoutArray=class extends xl{},D.Color=bi,D.DEMData=Ah,D.DataConstantProperty=Fi,D.DictionaryCoder=ch,D.EXTENT=Xr,D.ErrorEvent=Ke,D.EvaluationParameters=Er,D.Event=Te,D.Evented=Me,D.FeatureIndex=uh,D.FillBucket=IA,D.FillExtrusionBucket=kA,D.GeoJSONFeature=hh,D.ImageAtlas=Kc,D.ImagePosition=LA,D.KDBush=YA,D.LineBucket=DA,D.LineStripIndexArray=class extends X{},D.LngLat=vo,D.MercatorCoordinate=nA,D.ONE_EM=us,D.OverscaledTileID=Bn,D.PerformanceUtils=_f,D.Point=pe,D.Pos3dArray=class extends Lo{},D.PosArray=Et,D.Properties=Ns,D.Protobuf=MA,D.QuadTriangleArray=class extends rl{},D.RGBAImage=xn,D.RasterBoundsArray=class extends Qo{},D.RequestPerformance=class{constructor(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let C=performance.getEntriesByName(this._marks.measure);return C.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),C=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),C}},D.SegmentVector=Mi,D.SymbolBucket=ul,D.Transitionable=Jo,D.TriangleIndexArray=ki,D.Uniform1f=cs,D.Uniform1i=class extends is{constructor(C,b){super(C,b),this.current=0}set(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))}},D.Uniform2f=class extends is{constructor(C,b){super(C,b),this.current=[0,0]}set(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))}},D.Uniform3f=class extends is{constructor(C,b){super(C,b),this.current=[0,0,0]}set(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))}},D.Uniform4f=Cs,D.UniformColor=po,D.UniformMatrix4f=class extends is{constructor(C,b){super(C,b),this.current=hs}set(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(let b=1;b<16;b++)if(C[b]!==this.current[b]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}}},D.UnwrappedTileID=lh,D.ValidationError=Bt,D.ZoomHistory=je,D.addDynamicAttributes=HA,D.arrayBufferToImage=function(C,b){const I=new Image;I.onload=()=>{b(null,I),URL.revokeObjectURL(I.src),I.onload=null,window.requestAnimationFrame(()=>{I.src=Ei})},I.onerror=()=>b(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new Blob([new Uint8Array(C)],{type:"image/png"});I.src=C.byteLength?URL.createObjectURL(H):Ei},D.arrayBufferToImageBitmap=function(C,b){const I=new Blob([new Uint8Array(C)],{type:"image/png"});createImageBitmap(I).then(H=>{b(null,H)}).catch(H=>{b(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},D.asyncAll=function(C,b,I){if(!C.length)return I(null,[]);let H=C.length;const q=new Array(C.length);let ee=null;C.forEach((re,ae)=>{b(re,(de,_e)=>{de&&(ee=de),q[ae]=_e,--H==0&&I(ee,q)})})},D.bezier=Ue,D.browser=vi,D.clamp=Ne,D.clipLine=ph,D.clone=function(C){var b=new al(16);return b[0]=C[0],b[1]=C[1],b[2]=C[2],b[3]=C[3],b[4]=C[4],b[5]=C[5],b[6]=C[6],b[7]=C[7],b[8]=C[8],b[9]=C[9],b[10]=C[10],b[11]=C[11],b[12]=C[12],b[13]=C[13],b[14]=C[14],b[15]=C[15],b},D.clone$1=Ze,D.collisionCircleLayout=Mu,D.config=d,D.copy=function(C,b){return C[0]=b[0],C[1]=b[1],C[2]=b[2],C[3]=b[3],C[4]=b[4],C[5]=b[5],C[6]=b[6],C[7]=b[7],C[8]=b[8],C[9]=b[9],C[10]=b[10],C[11]=b[11],C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15],C},D.create=function(){var C=new al(16);return al!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},D.createExpression=Ji,D.createFilter=Fo,D.createLayout=ts,D.createStyleLayer=function(C){if(C.type==="custom")return new of(C);switch(C.type){case"background":return new sf(C);case"circle":return new zh(C);case"fill":return new ou(C);case"fill-extrusion":return new bu(C);case"heatmap":return new Vh(C);case"hillshade":return new Gh(C);case"line":return new Fu(C);case"raster":return new af(C);case"symbol":return new sA(C)}},D.deepEqual=function C(b,I){if(Array.isArray(b)){if(!Array.isArray(I)||b.length!==I.length)return!1;for(let H=0;H<b.length;H++)if(!C(b[H],I[H]))return!1;return!0}if(typeof b=="object"&&b!==null&&I!==null){if(typeof I!="object"||Object.keys(b).length!==Object.keys(I).length)return!1;for(const H in b)if(!C(b[H],I[H]))return!1;return!0}return b===I},D.defaultEasing=We,D.derefLayers=function(C){C=C.slice();const b=Object.create(null);for(let I=0;I<C.length;I++)b[C[I].id]=C[I];for(let I=0;I<C.length;I++)"ref"in C[I]&&(C[I]=Xe(C[I],b[C[I].ref]));return C},D.diffStyles=function(C,b){if(!C)return[{command:gt.setStyle,args:[b]}];let I=[];try{if(!ct(C.version,b.version))return[{command:gt.setStyle,args:[b]}];ct(C.center,b.center)||I.push({command:gt.setCenter,args:[b.center]}),ct(C.zoom,b.zoom)||I.push({command:gt.setZoom,args:[b.zoom]}),ct(C.bearing,b.bearing)||I.push({command:gt.setBearing,args:[b.bearing]}),ct(C.pitch,b.pitch)||I.push({command:gt.setPitch,args:[b.pitch]}),ct(C.sprite,b.sprite)||I.push({command:gt.setSprite,args:[b.sprite]}),ct(C.glyphs,b.glyphs)||I.push({command:gt.setGlyphs,args:[b.glyphs]}),ct(C.transition,b.transition)||I.push({command:gt.setTransition,args:[b.transition]}),ct(C.light,b.light)||I.push({command:gt.setLight,args:[b.light]});const H={},q=[];(function(re,ae,de,_e){let Ee;for(Ee in ae=ae||{},re=re||{})Object.prototype.hasOwnProperty.call(re,Ee)&&(Object.prototype.hasOwnProperty.call(ae,Ee)||Kt(Ee,de,_e));for(Ee in ae)Object.prototype.hasOwnProperty.call(ae,Ee)&&(Object.prototype.hasOwnProperty.call(re,Ee)?ct(re[Ee],ae[Ee])||(re[Ee].type==="geojson"&&ae[Ee].type==="geojson"&&Qt(re,ae,Ee)?de.push({command:gt.setGeoJSONSourceData,args:[Ee,ae[Ee].data]}):Gt(Ee,ae,de,_e)):Dt(Ee,ae,de))})(C.sources,b.sources,q,H);const ee=[];C.layers&&C.layers.forEach(re=>{H[re.source]?I.push({command:gt.removeLayer,args:[re.id]}):ee.push(re)}),I=I.concat(q),function(re,ae,de){ae=ae||[];const _e=(re=re||[]).map(ri),Ee=ae.map(ri),Fe=re.reduce(ci,{}),Le=ae.reduce(ci,{}),ze=_e.slice(),Ve=Object.create(null);let st,lt,ht,yt,dt,xt,Tt;for(st=0,lt=0;st<_e.length;st++)ht=_e[st],Object.prototype.hasOwnProperty.call(Le,ht)?lt++:(de.push({command:gt.removeLayer,args:[ht]}),ze.splice(ze.indexOf(ht,lt),1));for(st=0,lt=0;st<Ee.length;st++)ht=Ee[Ee.length-1-st],ze[ze.length-1-st]!==ht&&(Object.prototype.hasOwnProperty.call(Fe,ht)?(de.push({command:gt.removeLayer,args:[ht]}),ze.splice(ze.lastIndexOf(ht,ze.length-lt),1)):lt++,xt=ze[ze.length-st],de.push({command:gt.addLayer,args:[Le[ht],xt]}),ze.splice(ze.length-st,0,ht),Ve[ht]=!0);for(st=0;st<Ee.length;st++)if(ht=Ee[st],yt=Fe[ht],dt=Le[ht],!Ve[ht]&&!ct(yt,dt))if(ct(yt.source,dt.source)&&ct(yt["source-layer"],dt["source-layer"])&&ct(yt.type,dt.type)){for(Tt in $t(yt.layout,dt.layout,de,ht,null,gt.setLayoutProperty),$t(yt.paint,dt.paint,de,ht,null,gt.setPaintProperty),ct(yt.filter,dt.filter)||de.push({command:gt.setFilter,args:[ht,dt.filter]}),ct(yt.minzoom,dt.minzoom)&&ct(yt.maxzoom,dt.maxzoom)||de.push({command:gt.setLayerZoomRange,args:[ht,dt.minzoom,dt.maxzoom]}),yt)Object.prototype.hasOwnProperty.call(yt,Tt)&&Tt!=="layout"&&Tt!=="paint"&&Tt!=="filter"&&Tt!=="metadata"&&Tt!=="minzoom"&&Tt!=="maxzoom"&&(Tt.indexOf("paint.")===0?$t(yt[Tt],dt[Tt],de,ht,Tt.slice(6),gt.setPaintProperty):ct(yt[Tt],dt[Tt])||de.push({command:gt.setLayerProperty,args:[ht,Tt,dt[Tt]]}));for(Tt in dt)Object.prototype.hasOwnProperty.call(dt,Tt)&&!Object.prototype.hasOwnProperty.call(yt,Tt)&&Tt!=="layout"&&Tt!=="paint"&&Tt!=="filter"&&Tt!=="metadata"&&Tt!=="minzoom"&&Tt!=="maxzoom"&&(Tt.indexOf("paint.")===0?$t(yt[Tt],dt[Tt],de,ht,Tt.slice(6),gt.setPaintProperty):ct(yt[Tt],dt[Tt])||de.push({command:gt.setLayerProperty,args:[ht,Tt,dt[Tt]]}))}else de.push({command:gt.removeLayer,args:[ht]}),xt=ze[ze.lastIndexOf(ht)+1],de.push({command:gt.addLayer,args:[dt,xt]})}(ee,b.layers,I)}catch(H){console.warn("Unable to compute style diff:",H),I=[{command:gt.setStyle,args:[b]}]}return I},D.dot=function(C,b){return C[0]*b[0]+C[1]*b[1]+C[2]*b[2]+C[3]*b[3]},D.earthRadius=KA,D.emitValidationErrors=Wn,D.emptyStyle=function(){const C={},b=me.$version;for(const I in me.$root){const H=me.$root[I];if(H.required){let q=null;q=I==="version"?b:H.type==="array"?[]:{},q!=null&&(C[I]=q)}}return C},D.equals=function(C,b){var I=C[0],H=C[1],q=C[2],ee=C[3],re=C[4],ae=C[5],de=C[6],_e=C[7],Ee=C[8],Fe=C[9],Le=C[10],ze=C[11],Ve=C[12],st=C[13],lt=C[14],ht=C[15],yt=b[0],dt=b[1],xt=b[2],Tt=b[3],Rt=b[4],fi=b[5],Ci=b[6],ui=b[7],li=b[8],ti=b[9],yi=b[10],si=b[11],qt=b[12],Pi=b[13],Si=b[14],ir=b[15];return Math.abs(I-yt)<=Ks*Math.max(1,Math.abs(I),Math.abs(yt))&&Math.abs(H-dt)<=Ks*Math.max(1,Math.abs(H),Math.abs(dt))&&Math.abs(q-xt)<=Ks*Math.max(1,Math.abs(q),Math.abs(xt))&&Math.abs(ee-Tt)<=Ks*Math.max(1,Math.abs(ee),Math.abs(Tt))&&Math.abs(re-Rt)<=Ks*Math.max(1,Math.abs(re),Math.abs(Rt))&&Math.abs(ae-fi)<=Ks*Math.max(1,Math.abs(ae),Math.abs(fi))&&Math.abs(de-Ci)<=Ks*Math.max(1,Math.abs(de),Math.abs(Ci))&&Math.abs(_e-ui)<=Ks*Math.max(1,Math.abs(_e),Math.abs(ui))&&Math.abs(Ee-li)<=Ks*Math.max(1,Math.abs(Ee),Math.abs(li))&&Math.abs(Fe-ti)<=Ks*Math.max(1,Math.abs(Fe),Math.abs(ti))&&Math.abs(Le-yi)<=Ks*Math.max(1,Math.abs(Le),Math.abs(yi))&&Math.abs(ze-si)<=Ks*Math.max(1,Math.abs(ze),Math.abs(si))&&Math.abs(Ve-qt)<=Ks*Math.max(1,Math.abs(Ve),Math.abs(qt))&&Math.abs(st-Pi)<=Ks*Math.max(1,Math.abs(st),Math.abs(Pi))&&Math.abs(lt-Si)<=Ks*Math.max(1,Math.abs(lt),Math.abs(Si))&&Math.abs(ht-ir)<=Ks*Math.max(1,Math.abs(ht),Math.abs(ir))},D.evaluateSizeForFeature=function(C,{uSize:b,uSizeT:I},{lowerSize:H,upperSize:q}){return C.kind==="source"?H/ya:C.kind==="composite"?ks.number(H/ya,q/ya,I):b},D.evaluateSizeForZoom=function(C,b){let I=0,H=0;if(C.kind==="constant")H=C.layoutSize;else if(C.kind!=="source"){const{interpolationType:q,minZoom:ee,maxZoom:re}=C,ae=q?Ne(gs.interpolationFactor(q,b,ee,re),0,1):0;C.kind==="camera"?H=ks.number(C.minSize,C.maxSize,ae):I=ae}return{uSizeT:I,uSize:H}},D.evented=ws,D.extend=Ye,D.filterObject=ft,D.findLineIntersection=function(C,b,I,H){const q=b.y-C.y,ee=b.x-C.x,re=H.y-I.y,ae=H.x-I.x,de=re*ee-ae*q;if(de===0)return null;const _e=(ae*(C.y-I.y)-re*(C.x-I.x))/de;return new pe(C.x+_e*ee,C.y+_e*q)},D.fromScaling=function(C,b){return C[0]=b[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=b[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=b[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},D.getAnchorAlignment=OA,D.getAnchorJustification=XA,D.getArrayBuffer=se,D.getDefaultExportFromCjs=ne,D.getJSON=function(C,b){return W(Ye(C,{type:"json"}),b)},D.getOverlapMode=RA,D.getProtocolAction=k,D.getRTLTextPluginStatus=Ha,D.getReferrer=S,D.getVideo=function(C,b){const I=window.document.createElement("video");I.muted=!0,I.onloadstart=function(){b(null,I)};for(let H=0;H<C.length;H++){const q=window.document.createElement("source");le(C[H])||(I.crossOrigin="Anonymous"),q.src=C[H],I.appendChild(q)}return{cancel:()=>{}}},D.groupByLayout=function(C,b){const I={};for(let q=0;q<C.length;q++){const ee=b&&b[C[q].id]||ml(C[q]);b&&(b[C[q].id]=ee);let re=I[ee];re||(re=I[ee]=[]),re.push(C[q])}const H=[];for(const q in I)H.push(I[q]);return H},D.identity=mA,D.interpolate=ks,D.invert=function(C,b){var I=b[0],H=b[1],q=b[2],ee=b[3],re=b[4],ae=b[5],de=b[6],_e=b[7],Ee=b[8],Fe=b[9],Le=b[10],ze=b[11],Ve=b[12],st=b[13],lt=b[14],ht=b[15],yt=I*ae-H*re,dt=I*de-q*re,xt=I*_e-ee*re,Tt=H*de-q*ae,Rt=H*_e-ee*ae,fi=q*_e-ee*de,Ci=Ee*st-Fe*Ve,ui=Ee*lt-Le*Ve,li=Ee*ht-ze*Ve,ti=Fe*lt-Le*st,yi=Fe*ht-ze*st,si=Le*ht-ze*lt,qt=yt*si-dt*yi+xt*ti+Tt*li-Rt*ui+fi*Ci;return qt?(C[0]=(ae*si-de*yi+_e*ti)*(qt=1/qt),C[1]=(q*yi-H*si-ee*ti)*qt,C[2]=(st*fi-lt*Rt+ht*Tt)*qt,C[3]=(Le*Rt-Fe*fi-ze*Tt)*qt,C[4]=(de*li-re*si-_e*ui)*qt,C[5]=(I*si-q*li+ee*ui)*qt,C[6]=(lt*xt-Ve*fi-ht*dt)*qt,C[7]=(Ee*fi-Le*xt+ze*dt)*qt,C[8]=(re*yi-ae*li+_e*Ci)*qt,C[9]=(H*li-I*yi-ee*Ci)*qt,C[10]=(Ve*Rt-st*xt+ht*yt)*qt,C[11]=(Fe*xt-Ee*Rt-ze*yt)*qt,C[12]=(ae*ui-re*ti-de*Ci)*qt,C[13]=(I*ti-H*ui+q*Ci)*qt,C[14]=(st*dt-Ve*Tt-lt*yt)*qt,C[15]=(Ee*Tt-Fe*dt+Le*yt)*qt,C):null},D.isImageBitmap=Ri,D.isSafari=Ai,D.isWorker=Mt,D.keysDifference=function(C,b){const I=[];for(const H in C)H in b||I.push(H);return I},D.lazyLoadRTLTextPlugin=function(){ns.isLoading()||ns.isLoaded()||Ha()!=="deferred"||da()},D.makeRequest=W,D.mapObject=rt,D.mercatorXfromLng=sh,D.mercatorYfromLat=nh,D.mercatorZfromAltitude=ah,D.mul=Hh,D.mul$1=function(C,b,I){return C[0]=b[0]*I[0],C[1]=b[1]*I[1],C[2]=b[2]*I[2],C[3]=b[3]*I[3],C},D.multiply=cc,D.nextPowerOfTwo=function(C){return C<=1?1:Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))},D.operations=gt,D.ortho=function(C,b,I,H,q,ee,re){var ae=1/(b-I),de=1/(H-q),_e=1/(ee-re);return C[0]=-2*ae,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*de,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*_e,C[11]=0,C[12]=(b+I)*ae,C[13]=(q+H)*de,C[14]=(re+ee)*_e,C[15]=1,C},D.parseCacheControl=function(C){const b={};if(C.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(I,H,q,ee)=>{const re=q||ee;return b[H]=!re||re.toLowerCase(),""}),b["max-age"]){const I=parseInt(b["max-age"],10);isNaN(I)?delete b["max-age"]:b["max-age"]=I}return b},D.parseGlyphPbf=function(C){return new MA(C).readFields(Gu,[])},D.pbf=Lc,D.performSymbolLayout=function(C){C.bucket.createArrays(),C.bucket.tilePixelRatio=Xr/(512*C.bucket.overscaling),C.bucket.compareText={},C.bucket.iconsNeedLinear=!1;const b=C.bucket.layers[0],I=b.layout,H=b._unevaluatedLayout._values,q={layoutIconSize:H["icon-size"].possiblyEvaluate(new Er(C.bucket.zoom+1),C.canonical),layoutTextSize:H["text-size"].possiblyEvaluate(new Er(C.bucket.zoom+1),C.canonical),textMaxSize:H["text-size"].possiblyEvaluate(new Er(18))};if(C.bucket.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Ee}=C.bucket.textSizeData;q.compositeTextSizes=[H["text-size"].possiblyEvaluate(new Er(_e),C.canonical),H["text-size"].possiblyEvaluate(new Er(Ee),C.canonical)]}if(C.bucket.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Ee}=C.bucket.iconSizeData;q.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new Er(_e),C.canonical),H["icon-size"].possiblyEvaluate(new Er(Ee),C.canonical)]}const ee=I.get("text-line-height")*us,re=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point",ae=I.get("text-keep-upright"),de=I.get("text-size");for(const _e of C.bucket.features){const Ee=I.get("text-font").evaluate(_e,{},C.canonical).join(","),Fe=de.evaluate(_e,{},C.canonical),Le=q.layoutTextSize.evaluate(_e,{},C.canonical),ze=q.layoutIconSize.evaluate(_e,{},C.canonical),Ve={horizontal:{},vertical:void 0},st=_e.text;let lt,ht=[0,0];if(st){const xt=st.toString(),Tt=I.get("text-letter-spacing").evaluate(_e,{},C.canonical)*us,Rt=St(xt)?Tt:0,fi=I.get("text-anchor").evaluate(_e,{},C.canonical),Ci=Bh(b,_e,C.canonical);if(!Ci){const si=I.get("text-radial-offset").evaluate(_e,{},C.canonical);ht=si?xh(fi,[si*us,qA]):I.get("text-offset").evaluate(_e,{},C.canonical).map(qt=>qt*us)}let ui=re?"center":I.get("text-justify").evaluate(_e,{},C.canonical);const li=I.get("symbol-placement"),ti=li==="point"?I.get("text-max-width").evaluate(_e,{},C.canonical)*us:0,yi=()=>{C.bucket.allowVerticalPlacement&&bt(xt)&&(Ve.vertical=tA(st,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,fi,"left",Rt,ht,D.WritingMode.vertical,!0,li,Le,Fe))};if(!re&&Ci){const si=new Set;if(ui==="auto")for(let Pi=0;Pi<Ci.values.length;Pi+=2)si.add(XA(Ci.values[Pi]));else si.add(ui);let qt=!1;for(const Pi of si)if(!Ve.horizontal[Pi])if(qt)Ve.horizontal[Pi]=Ve.horizontal[0];else{const Si=tA(st,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,"center",Pi,Rt,ht,D.WritingMode.horizontal,!1,li,Le,Fe);Si&&(Ve.horizontal[Pi]=Si,qt=Si.positionedLines.length===1)}yi()}else{ui==="auto"&&(ui=XA(fi));const si=tA(st,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,fi,ui,Rt,ht,D.WritingMode.horizontal,!1,li,Le,Fe);si&&(Ve.horizontal[ui]=si),yi(),bt(xt)&&re&&ae&&(Ve.vertical=tA(st,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,fi,ui,Rt,ht,D.WritingMode.vertical,!1,li,Le,Fe))}}let yt=!1;if(_e.icon&&_e.icon.name){const xt=C.imageMap[_e.icon.name];xt&&(lt=Ju(C.imagePositions[_e.icon.name],I.get("icon-offset").evaluate(_e,{},C.canonical),I.get("icon-anchor").evaluate(_e,{},C.canonical)),yt=!!xt.sdf,C.bucket.sdfIcons===void 0?C.bucket.sdfIcons=yt:C.bucket.sdfIcons!==yt&&Ft("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==C.bucket.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(C.bucket.iconsNeedLinear=!0))}const dt=Eh(Ve.horizontal)||Ve.vertical;C.bucket.iconsInText=!!dt&&dt.iconsInText,(dt||lt)&&gf(C.bucket,_e,Ve,lt,C.imageMap,q,Le,ze,ht,yt,C.canonical)}C.showCollisionBoxes&&C.bucket.generateCollisionDebugBuffers()},D.perspective=function(C,b,I,H,q){var ee,re=1/Math.tan(b/2);return C[0]=re/I,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=re,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,q!=null&&q!==1/0?(C[10]=(q+H)*(ee=1/(H-q)),C[14]=2*q*H*ee):(C[10]=-1,C[14]=-2*H),C},D.pick=function(C,b){const I={};for(let H=0;H<b.length;H++){const q=b[H];q in C&&(I[q]=C[q])}return I},D.plugin=ns,D.pointGeometry=oe,D.polygonIntersectsPolygon=sc,D.potpack=Vc,D.register=gi,D.registerForPluginStateChange=function(C){return C({pluginStatus:nr,pluginURL:Xi}),ws.on("pluginStateChange",C),C},D.renderColorRamp=pc,D.rotateX=function(C,b,I){var H=Math.sin(I),q=Math.cos(I),ee=b[4],re=b[5],ae=b[6],de=b[7],_e=b[8],Ee=b[9],Fe=b[10],Le=b[11];return b!==C&&(C[0]=b[0],C[1]=b[1],C[2]=b[2],C[3]=b[3],C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15]),C[4]=ee*q+_e*H,C[5]=re*q+Ee*H,C[6]=ae*q+Fe*H,C[7]=de*q+Le*H,C[8]=_e*q-ee*H,C[9]=Ee*q-re*H,C[10]=Fe*q-ae*H,C[11]=Le*q-de*H,C},D.rotateZ=function(C,b,I){var H=Math.sin(I),q=Math.cos(I),ee=b[0],re=b[1],ae=b[2],de=b[3],_e=b[4],Ee=b[5],Fe=b[6],Le=b[7];return b!==C&&(C[8]=b[8],C[9]=b[9],C[10]=b[10],C[11]=b[11],C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15]),C[0]=ee*q+_e*H,C[1]=re*q+Ee*H,C[2]=ae*q+Fe*H,C[3]=de*q+Le*H,C[4]=_e*q-ee*H,C[5]=Ee*q-re*H,C[6]=Fe*q-ae*H,C[7]=Le*q-de*H,C},D.sameOrigin=le,D.scale=function(C,b,I){var H=I[0],q=I[1],ee=I[2];return C[0]=b[0]*H,C[1]=b[1]*H,C[2]=b[2]*H,C[3]=b[3]*H,C[4]=b[4]*q,C[5]=b[5]*q,C[6]=b[6]*q,C[7]=b[7]*q,C[8]=b[8]*ee,C[9]=b[9]*ee,C[10]=b[10]*ee,C[11]=b[11]*ee,C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15],C},D.setRTLTextPlugin=function(C,b,I=!1){if(nr===Oi||nr===mr||nr===ur)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xi=vi.resolveURL(C),nr=Oi,vr=b,Sr(),I||da()},D.sphericalToCartesian=function([C,b,I]){return b+=90,b*=Math.PI/180,I*=Math.PI/180,{x:C*Math.cos(b)*Math.sin(I),y:C*Math.sin(b)*Math.sin(I),z:C*Math.cos(I)}},D.toEvaluationFeature=_a,D.transformMat4=Xl,D.translate=function(C,b,I){var H,q,ee,re,ae,de,_e,Ee,Fe,Le,ze,Ve,st=I[0],lt=I[1],ht=I[2];return b===C?(C[12]=b[0]*st+b[4]*lt+b[8]*ht+b[12],C[13]=b[1]*st+b[5]*lt+b[9]*ht+b[13],C[14]=b[2]*st+b[6]*lt+b[10]*ht+b[14],C[15]=b[3]*st+b[7]*lt+b[11]*ht+b[15]):(q=b[1],ee=b[2],re=b[3],ae=b[4],de=b[5],_e=b[6],Ee=b[7],Fe=b[8],Le=b[9],ze=b[10],Ve=b[11],C[0]=H=b[0],C[1]=q,C[2]=ee,C[3]=re,C[4]=ae,C[5]=de,C[6]=_e,C[7]=Ee,C[8]=Fe,C[9]=Le,C[10]=ze,C[11]=Ve,C[12]=H*st+ae*lt+Fe*ht+b[12],C[13]=q*st+de*lt+Le*ht+b[13],C[14]=ee*st+_e*lt+ze*ht+b[14],C[15]=re*st+Ee*lt+Ve*ht+b[15]),C},D.triggerPluginCompletionEvent=Or,D.unicodeBlockLookup=$e,D.uniqueId=function(){return et++},D.v8Spec=me,D.validateCustomStyleLayer=function(C){const b=[],I=C.id;return I===void 0&&b.push({message:`layers.${I}: missing required property "id"`}),C.render===void 0&&b.push({message:`layers.${I}: missing required method "render"`}),C.renderingMode&&C.renderingMode!=="2d"&&C.renderingMode!=="3d"&&b.push({message:`layers.${I}: property "renderingMode" must be either "2d" or "3d"`}),b},D.validateLight=co,D.validateStyle=Ra,D.vectorTile=mo,D.warnOnce=Ft,D.wrap=ut}),Y(["./shared"],function(D){class ne{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,ce){for(const Be of Ie){this._layerConfigs[Be.id]=Be;const Pe=this._layers[Be.id]=D.createStyleLayer(Be);Pe._featureFilter=D.createFilter(Pe.filter),this.keyCache[Be.id]&&delete this.keyCache[Be.id]}for(const Be of ce)delete this.keyCache[Be],delete this._layerConfigs[Be],delete this._layers[Be];this.familiesBySource={};const ye=D.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Be of ye){const Pe=Be.map(Ct=>this._layers[Ct.id]),qe=Pe[0];if(qe.visibility==="none")continue;const Oe=qe.source||"";let Ge=this.familiesBySource[Oe];Ge||(Ge=this.familiesBySource[Oe]={});const ot=qe.sourceLayer||"_geojsonTileLayer";let vt=Ge[ot];vt||(vt=Ge[ot]=[]),vt.push(Pe)}}}class oe{constructor(Ie){const ce={},ye=[];for(const Oe in Ie){const Ge=Ie[Oe],ot=ce[Oe]={};for(const vt in Ge){const Ct=Ge[+vt];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const Ut={x:0,y:0,w:Ct.bitmap.width+2,h:Ct.bitmap.height+2};ye.push(Ut),ot[vt]={rect:Ut,metrics:Ct.metrics}}}const{w:Be,h:Pe}=D.potpack(ye),qe=new D.AlphaImage({width:Be||1,height:Pe||1});for(const Oe in Ie){const Ge=Ie[Oe];for(const ot in Ge){const vt=Ge[+ot];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const Ct=ce[Oe][ot].rect;D.AlphaImage.copy(vt.bitmap,qe,{x:0,y:0},{x:Ct.x+1,y:Ct.y+1},vt.bitmap)}}this.image=qe,this.positions=ce}}D.register("GlyphAtlas",oe);class ue{constructor(Ie){this.tileID=new D.OverscaledTileID(Ie.tileID.overscaledZ,Ie.tileID.wrap,Ie.tileID.canonical.z,Ie.tileID.canonical.x,Ie.tileID.canonical.y),this.uid=Ie.uid,this.zoom=Ie.zoom,this.pixelRatio=Ie.pixelRatio,this.tileSize=Ie.tileSize,this.source=Ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ie.showCollisionBoxes,this.collectResourceTiming=!!Ie.collectResourceTiming,this.returnDependencies=!!Ie.returnDependencies,this.promoteId=Ie.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Ie,ce,ye,Be,Pe){this.status="parsing",this.data=Ie,this.collisionBoxArray=new D.CollisionBoxArray;const qe=new D.DictionaryCoder(Object.keys(Ie.layers).sort()),Oe=new D.FeatureIndex(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Ge={},ot={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},vt=ce.familiesBySource[this.source];for(const Ki in vt){const Yt=Ie.layers[Ki];if(!Yt)continue;Yt.version===1&&D.warnOnce(`Vector tile source "${this.source}" layer "${Ki}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wr=qe.encode(Ki),bi=[];for(let Ir=0;Ir<Yt.length;Ir++){const Pr=Yt.feature(Ir),Zi=Oe.getId(Pr,Ki);bi.push({feature:Pr,id:Zi,index:Ir,sourceLayerIndex:wr})}for(const Ir of vt[Ki]){const Pr=Ir[0];Pr.source!==this.source&&D.warnOnce(`layer.source = ${Pr.source} does not equal this.source = ${this.source}`),Pr.minzoom&&this.zoom<Math.floor(Pr.minzoom)||Pr.maxzoom&&this.zoom>=Pr.maxzoom||Pr.visibility!=="none"&&(pe(Ir,this.zoom,ye),(Ge[Pr.id]=Pr.createBucket({index:Oe.bucketLayerIDs.length,layers:Ir,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wr,sourceID:this.source})).populate(bi,ot,this.tileID.canonical),Oe.bucketLayerIDs.push(Ir.map(Zi=>Zi.id)))}}let Ct,Ut,ai,Di;const ni=D.mapObject(ot.glyphDependencies,Ki=>Object.keys(Ki).map(Number));this.inFlightDependencies.forEach(Ki=>Ki==null?void 0:Ki.cancel()),this.inFlightDependencies=[];const ei=++this.dependencySentinel;Object.keys(ni).length?this.inFlightDependencies.push(Be.send("getGlyphs",{uid:this.uid,stacks:ni,source:this.source,tileID:this.tileID,type:"glyphs"},(Ki,Yt)=>{ei===this.dependencySentinel&&(Ct||(Ct=Ki,Ut=Yt,hr.call(this)))})):Ut={};const Ui=Object.keys(ot.iconDependencies);Ui.length?this.inFlightDependencies.push(Be.send("getImages",{icons:Ui,source:this.source,tileID:this.tileID,type:"icons"},(Ki,Yt)=>{ei===this.dependencySentinel&&(Ct||(Ct=Ki,ai=Yt,hr.call(this)))})):ai={};const Qi=Object.keys(ot.patternDependencies);function hr(){if(Ct)return Pe(Ct);if(Ut&&ai&&Di){const Ki=new oe(Ut),Yt=new D.ImageAtlas(ai,Di);for(const wr in Ge){const bi=Ge[wr];bi instanceof D.SymbolBucket?(pe(bi.layers,this.zoom,ye),D.performSymbolLayout({bucket:bi,glyphMap:Ut,glyphPositions:Ki.positions,imageMap:ai,imagePositions:Yt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):bi.hasPattern&&(bi instanceof D.LineBucket||bi instanceof D.FillBucket||bi instanceof D.FillExtrusionBucket)&&(pe(bi.layers,this.zoom,ye),bi.addFeatures(ot,this.tileID.canonical,Yt.patternPositions))}this.status="done",Pe(null,{buckets:Object.values(Ge).filter(wr=>!wr.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ki.image,imageAtlas:Yt,glyphMap:this.returnDependencies?Ut:null,iconMap:this.returnDependencies?ai:null,glyphPositions:this.returnDependencies?Ki.positions:null})}}Qi.length?this.inFlightDependencies.push(Be.send("getImages",{icons:Qi,source:this.source,tileID:this.tileID,type:"patterns"},(Ki,Yt)=>{ei===this.dependencySentinel&&(Ct||(Ct=Ki,Di=Yt,hr.call(this)))})):Di={},hr.call(this)}}function pe(nt,Ie,ce){const ye=new D.EvaluationParameters(Ie);for(const Be of nt)Be.recalculate(ye,ce)}function we(nt,Ie){const ce=D.getArrayBuffer(nt.request,(ye,Be,Pe,qe)=>{ye?Ie(ye):Be&&Ie(null,{vectorTile:new D.vectorTile.VectorTile(new D.Protobuf(Be)),rawData:Be,cacheControl:Pe,expires:qe})});return()=>{ce.cancel(),Ie()}}class ke{constructor(Ie,ce,ye,Be){this.actor=Ie,this.layerIndex=ce,this.availableImages=ye,this.loadVectorData=Be||we,this.fetching={},this.loading={},this.loaded={}}loadTile(Ie,ce){const ye=Ie.uid;this.loading||(this.loading={});const Be=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new D.RequestPerformance(Ie.request),Pe=this.loading[ye]=new ue(Ie);Pe.abort=this.loadVectorData(Ie,(qe,Oe)=>{if(delete this.loading[ye],qe||!Oe)return Pe.status="done",this.loaded[ye]=Pe,ce(qe);const Ge=Oe.rawData,ot={};Oe.expires&&(ot.expires=Oe.expires),Oe.cacheControl&&(ot.cacheControl=Oe.cacheControl);const vt={};if(Be){const Ct=Be.finish();Ct&&(vt.resourceTiming=JSON.parse(JSON.stringify(Ct)))}Pe.vectorTile=Oe.vectorTile,Pe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ct,Ut)=>{if(delete this.fetching[ye],Ct||!Ut)return ce(Ct);ce(null,D.extend({rawTileData:Ge.slice(0)},Ut,ot,vt))}),this.loaded=this.loaded||{},this.loaded[ye]=Pe,this.fetching[ye]={rawTileData:Ge,cacheControl:ot,resourceTiming:vt}})}reloadTile(Ie,ce){const ye=this.loaded,Be=Ie.uid;if(ye&&ye[Be]){const Pe=ye[Be];Pe.showCollisionBoxes=Ie.showCollisionBoxes,Pe.status==="parsing"?Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(qe,Oe)=>{if(qe||!Oe)return ce(qe,Oe);let Ge;if(this.fetching[Be]){const{rawTileData:ot,cacheControl:vt,resourceTiming:Ct}=this.fetching[Be];delete this.fetching[Be],Ge=D.extend({rawTileData:ot.slice(0)},Oe,vt,Ct)}else Ge=Oe;ce(null,Ge)}):Pe.status==="done"&&(Pe.vectorTile?Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ce):ce())}}abortTile(Ie,ce){const ye=this.loading,Be=Ie.uid;ye&&ye[Be]&&ye[Be].abort&&(ye[Be].abort(),delete ye[Be]),ce()}removeTile(Ie,ce){const ye=this.loaded,Be=Ie.uid;ye&&ye[Be]&&delete ye[Be],ce()}}class Qe{constructor(){this.loaded={}}loadTile(Ie,ce){const{uid:ye,encoding:Be,rawImageData:Pe}=Ie,qe=D.isImageBitmap(Pe)?this.getImageData(Pe):Pe,Oe=new D.DEMData(ye,qe,Be);this.loaded=this.loaded||{},this.loaded[ye]=Oe,ce(null,Oe)}getImageData(Ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const ce=this.offscreenCanvasContext.getImageData(-1,-1,Ie.width+2,Ie.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new D.RGBAImage({width:ce.width,height:ce.height},ce.data)}removeTile(Ie){const ce=this.loaded,ye=Ie.uid;ce&&ce[ye]&&delete ce[ye]}}function Ue(nt,Ie){if(nt.length!==0){We(nt[0],Ie);for(var ce=1;ce<nt.length;ce++)We(nt[ce],!Ie)}}function We(nt,Ie){for(var ce=0,ye=0,Be=0,Pe=nt.length,qe=Pe-1;Be<Pe;qe=Be++){var Oe=(nt[Be][0]-nt[qe][0])*(nt[qe][1]+nt[Be][1]),Ge=ce+Oe;ye+=Math.abs(ce)>=Math.abs(Oe)?ce-Ge+Oe:Oe-Ge+ce,ce=Ge}ce+ye>=0!=!!Ie&&nt.reverse()}var Ne=D.getDefaultExportFromCjs(function nt(Ie,ce){var ye,Be=Ie&&Ie.type;if(Be==="FeatureCollection")for(ye=0;ye<Ie.features.length;ye++)nt(Ie.features[ye],ce);else if(Be==="GeometryCollection")for(ye=0;ye<Ie.geometries.length;ye++)nt(Ie.geometries[ye],ce);else if(Be==="Feature")nt(Ie.geometry,ce);else if(Be==="Polygon")Ue(Ie.coordinates,ce);else if(Be==="MultiPolygon")for(ye=0;ye<Ie.coordinates.length;ye++)Ue(Ie.coordinates[ye],ce);return Ie});const ut=D.vectorTile.VectorTileFeature.prototype.toGeoJSON;var Ye={exports:{}},et=D.pointGeometry,rt=D.vectorTile.VectorTileFeature,ft=Ze;function Ze(nt,Ie){this.options=Ie||{},this.features=nt,this.length=nt.length}function wt(nt,Ie){this.id=typeof nt.id=="number"?nt.id:void 0,this.type=nt.type,this.rawGeometry=nt.type===1?[nt.geometry]:nt.geometry,this.properties=nt.tags,this.extent=Ie||4096}Ze.prototype.feature=function(nt){return new wt(this.features[nt],this.options.extent)},wt.prototype.loadGeometry=function(){var nt=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<nt.length;Ie++){for(var ce=nt[Ie],ye=[],Be=0;Be<ce.length;Be++)ye.push(new et(ce[Be][0],ce[Be][1]));this.geometry.push(ye)}return this.geometry},wt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var nt=this.geometry,Ie=1/0,ce=-1/0,ye=1/0,Be=-1/0,Pe=0;Pe<nt.length;Pe++)for(var qe=nt[Pe],Oe=0;Oe<qe.length;Oe++){var Ge=qe[Oe];Ie=Math.min(Ie,Ge.x),ce=Math.max(ce,Ge.x),ye=Math.min(ye,Ge.y),Be=Math.max(Be,Ge.y)}return[Ie,ye,ce,Be]},wt.prototype.toGeoJSON=rt.prototype.toGeoJSON;var Ft=D.pbf,_t=ft;function Pt(nt){var Ie=new Ft;return function(ce,ye){for(var Be in ce.layers)ye.writeMessage(3,Mt,ce.layers[Be])}(nt,Ie),Ie.finish()}function Mt(nt,Ie){var ce;Ie.writeVarintField(15,nt.version||1),Ie.writeStringField(1,nt.name||""),Ie.writeVarintField(5,nt.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<nt.length;ce++)ye.feature=nt.feature(ce),Ie.writeMessage(2,Vt,ye);var Be=ye.keys;for(ce=0;ce<Be.length;ce++)Ie.writeStringField(3,Be[ce]);var Pe=ye.values;for(ce=0;ce<Pe.length;ce++)Ie.writeMessage(4,Yi,Pe[ce])}function Vt(nt,Ie){var ce=nt.feature;ce.id!==void 0&&Ie.writeVarintField(1,ce.id),Ie.writeMessage(2,Ai,nt),Ie.writeVarintField(3,ce.type),Ie.writeMessage(4,Li,ce)}function Ai(nt,Ie){var ce=nt.feature,ye=nt.keys,Be=nt.values,Pe=nt.keycache,qe=nt.valuecache;for(var Oe in ce.properties){var Ge=ce.properties[Oe],ot=Pe[Oe];if(Ge!==null){ot===void 0&&(ye.push(Oe),Pe[Oe]=ot=ye.length-1),Ie.writeVarint(ot);var vt=typeof Ge;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(Ge=JSON.stringify(Ge));var Ct=vt+":"+Ge,Ut=qe[Ct];Ut===void 0&&(Be.push(Ge),qe[Ct]=Ut=Be.length-1),Ie.writeVarint(Ut)}}}function Ri(nt,Ie){return(Ie<<3)+(7&nt)}function Ei(nt){return nt<<1^nt>>31}function Li(nt,Ie){for(var ce=nt.loadGeometry(),ye=nt.type,Be=0,Pe=0,qe=ce.length,Oe=0;Oe<qe;Oe++){var Ge=ce[Oe],ot=1;ye===1&&(ot=Ge.length),Ie.writeVarint(Ri(1,ot));for(var vt=ye===3?Ge.length-1:Ge.length,Ct=0;Ct<vt;Ct++){Ct===1&&ye!==1&&Ie.writeVarint(Ri(2,vt-1));var Ut=Ge[Ct].x-Be,ai=Ge[Ct].y-Pe;Ie.writeVarint(Ei(Ut)),Ie.writeVarint(Ei(ai)),Be+=Ut,Pe+=ai}ye===3&&Ie.writeVarint(Ri(7,1))}}function Yi(nt,Ie){var ce=typeof nt;ce==="string"?Ie.writeStringField(1,nt):ce==="boolean"?Ie.writeBooleanField(7,nt):ce==="number"&&(nt%1!=0?Ie.writeDoubleField(3,nt):nt<0?Ie.writeSVarintField(6,nt):Ie.writeVarintField(5,nt))}Ye.exports=Pt,Ye.exports.fromVectorTileJs=Pt,Ye.exports.fromGeojsonVt=function(nt,Ie){Ie=Ie||{};var ce={};for(var ye in nt)ce[ye]=new _t(nt[ye].features,Ie),ce[ye].name=ye,ce[ye].version=Ie.version,ce[ye].extent=Ie.extent;return Pt({layers:ce})},Ye.exports.GeoJSONWrapper=_t;var vi=D.getDefaultExportFromCjs(Ye.exports);const d={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:nt=>nt},w=Math.fround||(S=new Float32Array(1),nt=>(S[0]=+nt,S[0]));var S;const k=3,R=5,W=6;class se{constructor(Ie){this.options=Object.assign(Object.create(d),Ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ie){const{log:ce,minZoom:ye,maxZoom:Be}=this.options;ce&&console.time("total time");const Pe=`prepare ${Ie.length} points`;ce&&console.time(Pe),this.points=Ie;const qe=[];for(let Ge=0;Ge<Ie.length;Ge++){const ot=Ie[Ge];if(!ot.geometry)continue;const[vt,Ct]=ot.geometry.coordinates,Ut=w(be(vt)),ai=w(Te(Ct));qe.push(Ut,ai,1/0,Ge,-1,1),this.options.reduce&&qe.push(0)}let Oe=this.trees[Be+1]=this._createTree(qe);ce&&console.timeEnd(Pe);for(let Ge=Be;Ge>=ye;Ge--){const ot=+Date.now();Oe=this.trees[Ge]=this._createTree(this._cluster(Oe,Ge)),ce&&console.log("z%d: %d clusters in %dms",Ge,Oe.numItems,+Date.now()-ot)}return ce&&console.timeEnd("total time"),this}getClusters(Ie,ce){let ye=((Ie[0]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,Ie[1]));let Pe=Ie[2]===180?180:((Ie[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)ye=-180,Pe=180;else if(ye>Pe){const Ct=this.getClusters([ye,Be,180,qe],ce),Ut=this.getClusters([-180,Be,Pe,qe],ce);return Ct.concat(Ut)}const Oe=this.trees[this._limitZoom(ce)],Ge=Oe.range(be(ye),Te(qe),be(Pe),Te(Be)),ot=Oe.data,vt=[];for(const Ct of Ge){const Ut=this.stride*Ct;vt.push(ot[Ut+R]>1?le(ot,Ut,this.clusterProps):this.points[ot[Ut+k]])}return vt}getChildren(Ie){const ce=this._getOriginId(Ie),ye=this._getOriginZoom(Ie),Be="No cluster with the specified id.",Pe=this.trees[ye];if(!Pe)throw new Error(Be);const qe=Pe.data;if(ce*this.stride>=qe.length)throw new Error(Be);const Oe=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ge=Pe.within(qe[ce*this.stride],qe[ce*this.stride+1],Oe),ot=[];for(const vt of Ge){const Ct=vt*this.stride;qe[Ct+4]===Ie&&ot.push(qe[Ct+R]>1?le(qe,Ct,this.clusterProps):this.points[qe[Ct+k]])}if(ot.length===0)throw new Error(Be);return ot}getLeaves(Ie,ce,ye){const Be=[];return this._appendLeaves(Be,Ie,ce=ce||10,ye=ye||0,0),Be}getTile(Ie,ce,ye){const Be=this.trees[this._limitZoom(Ie)],Pe=Math.pow(2,Ie),{extent:qe,radius:Oe}=this.options,Ge=Oe/qe,ot=(ye-Ge)/Pe,vt=(ye+1+Ge)/Pe,Ct={features:[]};return this._addTileFeatures(Be.range((ce-Ge)/Pe,ot,(ce+1+Ge)/Pe,vt),Be.data,ce,ye,Pe,Ct),ce===0&&this._addTileFeatures(Be.range(1-Ge/Pe,ot,1,vt),Be.data,Pe,ye,Pe,Ct),ce===Pe-1&&this._addTileFeatures(Be.range(0,ot,Ge/Pe,vt),Be.data,-1,ye,Pe,Ct),Ct.features.length?Ct:null}getClusterExpansionZoom(Ie){let ce=this._getOriginZoom(Ie)-1;for(;ce<=this.options.maxZoom;){const ye=this.getChildren(Ie);if(ce++,ye.length!==1)break;Ie=ye[0].properties.cluster_id}return ce}_appendLeaves(Ie,ce,ye,Be,Pe){const qe=this.getChildren(ce);for(const Oe of qe){const Ge=Oe.properties;if(Ge&&Ge.cluster?Pe+Ge.point_count<=Be?Pe+=Ge.point_count:Pe=this._appendLeaves(Ie,Ge.cluster_id,ye,Be,Pe):Pe<Be?Pe++:Ie.push(Oe),Ie.length===ye)break}return Pe}_createTree(Ie){const ce=new D.KDBush(Ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<Ie.length;ye+=this.stride)ce.add(Ie[ye],Ie[ye+1]);return ce.finish(),ce.data=Ie,ce}_addTileFeatures(Ie,ce,ye,Be,Pe,qe){for(const Oe of Ie){const Ge=Oe*this.stride,ot=ce[Ge+R]>1;let vt,Ct,Ut;if(ot)vt=fe(ce,Ge,this.clusterProps),Ct=ce[Ge],Ut=ce[Ge+1];else{const ni=this.points[ce[Ge+k]];vt=ni.properties;const[ei,Ui]=ni.geometry.coordinates;Ct=be(ei),Ut=Te(Ui)}const ai={type:1,geometry:[[Math.round(this.options.extent*(Ct*Pe-ye)),Math.round(this.options.extent*(Ut*Pe-Be))]],tags:vt};let Di;Di=ot||this.options.generateId?ce[Ge+k]:this.points[ce[Ge+k]].id,Di!==void 0&&(ai.id=Di),qe.features.push(ai)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,ce){const{radius:ye,extent:Be,reduce:Pe,minPoints:qe}=this.options,Oe=ye/(Be*Math.pow(2,ce)),Ge=Ie.data,ot=[],vt=this.stride;for(let Ct=0;Ct<Ge.length;Ct+=vt){if(Ge[Ct+2]<=ce)continue;Ge[Ct+2]=ce;const Ut=Ge[Ct],ai=Ge[Ct+1],Di=Ie.within(Ge[Ct],Ge[Ct+1],Oe),ni=Ge[Ct+R];let ei=ni;for(const Ui of Di){const Qi=Ui*vt;Ge[Qi+2]>ce&&(ei+=Ge[Qi+R])}if(ei>ni&&ei>=qe){let Ui,Qi=Ut*ni,hr=ai*ni,Ki=-1;const Yt=((Ct/vt|0)<<5)+(ce+1)+this.points.length;for(const wr of Di){const bi=wr*vt;if(Ge[bi+2]<=ce)continue;Ge[bi+2]=ce;const Ir=Ge[bi+R];Qi+=Ge[bi]*Ir,hr+=Ge[bi+1]*Ir,Ge[bi+4]=Yt,Pe&&(Ui||(Ui=this._map(Ge,Ct,!0),Ki=this.clusterProps.length,this.clusterProps.push(Ui)),Pe(Ui,this._map(Ge,bi)))}Ge[Ct+4]=Yt,ot.push(Qi/ei,hr/ei,1/0,Yt,-1,ei),Pe&&ot.push(Ki)}else{for(let Ui=0;Ui<vt;Ui++)ot.push(Ge[Ct+Ui]);if(ei>1)for(const Ui of Di){const Qi=Ui*vt;if(!(Ge[Qi+2]<=ce)){Ge[Qi+2]=ce;for(let hr=0;hr<vt;hr++)ot.push(Ge[Qi+hr])}}}}return ot}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,ce,ye){if(Ie[ce+R]>1){const qe=this.clusterProps[Ie[ce+W]];return ye?Object.assign({},qe):qe}const Be=this.points[Ie[ce+k]].properties,Pe=this.options.map(Be);return ye&&Pe===Be?Object.assign({},Pe):Pe}}function le(nt,Ie,ce){return{type:"Feature",id:nt[Ie+k],properties:fe(nt,Ie,ce),geometry:{type:"Point",coordinates:[(ye=nt[Ie],360*(ye-.5)),Ke(nt[Ie+1])]}};var ye}function fe(nt,Ie,ce){const ye=nt[Ie+R],Be=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Pe=nt[Ie+W],qe=Pe===-1?{}:Object.assign({},ce[Pe]);return Object.assign(qe,{cluster:!0,cluster_id:nt[Ie+k],point_count:ye,point_count_abbreviated:Be})}function be(nt){return nt/360+.5}function Te(nt){const Ie=Math.sin(nt*Math.PI/180),ce=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return ce<0?0:ce>1?1:ce}function Ke(nt){const Ie=(180-360*nt)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Me(nt,Ie,ce,ye){for(var Be,Pe=ye,qe=ce-Ie>>1,Oe=ce-Ie,Ge=nt[Ie],ot=nt[Ie+1],vt=nt[ce],Ct=nt[ce+1],Ut=Ie+3;Ut<ce;Ut+=3){var ai=me(nt[Ut],nt[Ut+1],Ge,ot,vt,Ct);if(ai>Pe)Be=Ut,Pe=ai;else if(ai===Pe){var Di=Math.abs(Ut-qe);Di<Oe&&(Be=Ut,Oe=Di)}}Pe>ye&&(Be-Ie>3&&Me(nt,Ie,Be,ye),nt[Be+2]=Pe,ce-Be>3&&Me(nt,Be,ce,ye))}function me(nt,Ie,ce,ye,Be,Pe){var qe=Be-ce,Oe=Pe-ye;if(qe!==0||Oe!==0){var Ge=((nt-ce)*qe+(Ie-ye)*Oe)/(qe*qe+Oe*Oe);Ge>1?(ce=Be,ye=Pe):Ge>0&&(ce+=qe*Ge,ye+=Oe*Ge)}return(qe=nt-ce)*qe+(Oe=Ie-ye)*Oe}function De(nt,Ie,ce,ye){var Be={id:nt===void 0?null:nt,type:Ie,geometry:ce,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Pe){var qe=Pe.geometry,Oe=Pe.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")Xe(Pe,qe);else if(Oe==="Polygon"||Oe==="MultiLineString")for(var Ge=0;Ge<qe.length;Ge++)Xe(Pe,qe[Ge]);else if(Oe==="MultiPolygon")for(Ge=0;Ge<qe.length;Ge++)for(var ot=0;ot<qe[Ge].length;ot++)Xe(Pe,qe[Ge][ot])}(Be),Be}function Xe(nt,Ie){for(var ce=0;ce<Ie.length;ce+=3)nt.minX=Math.min(nt.minX,Ie[ce]),nt.minY=Math.min(nt.minY,Ie[ce+1]),nt.maxX=Math.max(nt.maxX,Ie[ce]),nt.maxY=Math.max(nt.maxY,Ie[ce+1])}function ct(nt,Ie,ce,ye){if(Ie.geometry){var Be=Ie.geometry.coordinates,Pe=Ie.geometry.type,qe=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),Oe=[],Ge=Ie.id;if(ce.promoteId?Ge=Ie.properties[ce.promoteId]:ce.generateId&&(Ge=ye||0),Pe==="Point")gt(Be,Oe);else if(Pe==="MultiPoint")for(var ot=0;ot<Be.length;ot++)gt(Be[ot],Oe);else if(Pe==="LineString")Dt(Be,Oe,qe,!1);else if(Pe==="MultiLineString"){if(ce.lineMetrics){for(ot=0;ot<Be.length;ot++)Dt(Be[ot],Oe=[],qe,!1),nt.push(De(Ge,"LineString",Oe,Ie.properties));return}Kt(Be,Oe,qe,!1)}else if(Pe==="Polygon")Kt(Be,Oe,qe,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(ot=0;ot<Ie.geometry.geometries.length;ot++)ct(nt,{id:Ge,geometry:Ie.geometry.geometries[ot],properties:Ie.properties},ce,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ot=0;ot<Be.length;ot++){var vt=[];Kt(Be[ot],vt,qe,!0),Oe.push(vt)}}nt.push(De(Ge,Pe,Oe,Ie.properties))}}function gt(nt,Ie){Ie.push(Gt(nt[0])),Ie.push(Qt(nt[1])),Ie.push(0)}function Dt(nt,Ie,ce,ye){for(var Be,Pe,qe=0,Oe=0;Oe<nt.length;Oe++){var Ge=Gt(nt[Oe][0]),ot=Qt(nt[Oe][1]);Ie.push(Ge),Ie.push(ot),Ie.push(0),Oe>0&&(qe+=ye?(Be*ot-Ge*Pe)/2:Math.sqrt(Math.pow(Ge-Be,2)+Math.pow(ot-Pe,2))),Be=Ge,Pe=ot}var vt=Ie.length-3;Ie[2]=1,Me(Ie,0,vt,ce),Ie[vt+2]=1,Ie.size=Math.abs(qe),Ie.start=0,Ie.end=Ie.size}function Kt(nt,Ie,ce,ye){for(var Be=0;Be<nt.length;Be++){var Pe=[];Dt(nt[Be],Pe,ce,ye),Ie.push(Pe)}}function Gt(nt){return nt/360+.5}function Qt(nt){var Ie=Math.sin(nt*Math.PI/180),ce=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return ce<0?0:ce>1?1:ce}function $t(nt,Ie,ce,ye,Be,Pe,qe,Oe){if(ye/=Ie,Pe>=(ce/=Ie)&&qe<ye)return nt;if(qe<ce||Pe>=ye)return null;for(var Ge=[],ot=0;ot<nt.length;ot++){var vt=nt[ot],Ct=vt.geometry,Ut=vt.type,ai=Be===0?vt.minX:vt.minY,Di=Be===0?vt.maxX:vt.maxY;if(ai>=ce&&Di<ye)Ge.push(vt);else if(!(Di<ce||ai>=ye)){var ni=[];if(Ut==="Point"||Ut==="MultiPoint")ri(Ct,ni,ce,ye,Be);else if(Ut==="LineString")ci(Ct,ni,ce,ye,Be,!1,Oe.lineMetrics);else if(Ut==="MultiLineString")di(Ct,ni,ce,ye,Be,!1);else if(Ut==="Polygon")di(Ct,ni,ce,ye,Be,!0);else if(Ut==="MultiPolygon")for(var ei=0;ei<Ct.length;ei++){var Ui=[];di(Ct[ei],Ui,ce,ye,Be,!0),Ui.length&&ni.push(Ui)}if(ni.length){if(Oe.lineMetrics&&Ut==="LineString"){for(ei=0;ei<ni.length;ei++)Ge.push(De(vt.id,Ut,ni[ei],vt.tags));continue}Ut!=="LineString"&&Ut!=="MultiLineString"||(ni.length===1?(Ut="LineString",ni=ni[0]):Ut="MultiLineString"),Ut!=="Point"&&Ut!=="MultiPoint"||(Ut=ni.length===3?"Point":"MultiPoint"),Ge.push(De(vt.id,Ut,ni,vt.tags))}}}return Ge.length?Ge:null}function ri(nt,Ie,ce,ye,Be){for(var Pe=0;Pe<nt.length;Pe+=3){var qe=nt[Pe+Be];qe>=ce&&qe<=ye&&(Ie.push(nt[Pe]),Ie.push(nt[Pe+1]),Ie.push(nt[Pe+2]))}}function ci(nt,Ie,ce,ye,Be,Pe,qe){for(var Oe,Ge,ot=Bt(nt),vt=Be===0?Hi:Vi,Ct=nt.start,Ut=0;Ut<nt.length-3;Ut+=3){var ai=nt[Ut],Di=nt[Ut+1],ni=nt[Ut+2],ei=nt[Ut+3],Ui=nt[Ut+4],Qi=Be===0?ai:Di,hr=Be===0?ei:Ui,Ki=!1;qe&&(Oe=Math.sqrt(Math.pow(ai-ei,2)+Math.pow(Di-Ui,2))),Qi<ce?hr>ce&&(Ge=vt(ot,ai,Di,ei,Ui,ce),qe&&(ot.start=Ct+Oe*Ge)):Qi>ye?hr<ye&&(Ge=vt(ot,ai,Di,ei,Ui,ye),qe&&(ot.start=Ct+Oe*Ge)):ii(ot,ai,Di,ni),hr<ce&&Qi>=ce&&(Ge=vt(ot,ai,Di,ei,Ui,ce),Ki=!0),hr>ye&&Qi<=ye&&(Ge=vt(ot,ai,Di,ei,Ui,ye),Ki=!0),!Pe&&Ki&&(qe&&(ot.end=Ct+Oe*Ge),Ie.push(ot),ot=Bt(nt)),qe&&(Ct+=Oe)}var Yt=nt.length-3;ai=nt[Yt],Di=nt[Yt+1],ni=nt[Yt+2],(Qi=Be===0?ai:Di)>=ce&&Qi<=ye&&ii(ot,ai,Di,ni),Yt=ot.length-3,Pe&&Yt>=3&&(ot[Yt]!==ot[0]||ot[Yt+1]!==ot[1])&&ii(ot,ot[0],ot[1],ot[2]),ot.length&&Ie.push(ot)}function Bt(nt){var Ie=[];return Ie.size=nt.size,Ie.start=nt.start,Ie.end=nt.end,Ie}function di(nt,Ie,ce,ye,Be,Pe){for(var qe=0;qe<nt.length;qe++)ci(nt[qe],Ie,ce,ye,Be,Pe,!1)}function ii(nt,Ie,ce,ye){nt.push(Ie),nt.push(ce),nt.push(ye)}function Hi(nt,Ie,ce,ye,Be,Pe){var qe=(Pe-Ie)/(ye-Ie);return nt.push(Pe),nt.push(ce+(Be-ce)*qe),nt.push(1),qe}function Vi(nt,Ie,ce,ye,Be,Pe){var qe=(Pe-ce)/(Be-ce);return nt.push(Ie+(ye-Ie)*qe),nt.push(Pe),nt.push(1),qe}function Ht(nt,Ie){for(var ce=[],ye=0;ye<nt.length;ye++){var Be,Pe=nt[ye],qe=Pe.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Be=_i(Pe.geometry,Ie);else if(qe==="MultiLineString"||qe==="Polygon"){Be=[];for(var Oe=0;Oe<Pe.geometry.length;Oe++)Be.push(_i(Pe.geometry[Oe],Ie))}else if(qe==="MultiPolygon")for(Be=[],Oe=0;Oe<Pe.geometry.length;Oe++){for(var Ge=[],ot=0;ot<Pe.geometry[Oe].length;ot++)Ge.push(_i(Pe.geometry[Oe][ot],Ie));Be.push(Ge)}ce.push(De(Pe.id,qe,Be,Pe.tags))}return ce}function _i(nt,Ie){var ce=[];ce.size=nt.size,nt.start!==void 0&&(ce.start=nt.start,ce.end=nt.end);for(var ye=0;ye<nt.length;ye+=3)ce.push(nt[ye]+Ie,nt[ye+1],nt[ye+2]);return ce}function Ti(nt,Ie){if(nt.transformed)return nt;var ce,ye,Be,Pe=1<<nt.z,qe=nt.x,Oe=nt.y;for(ce=0;ce<nt.features.length;ce++){var Ge=nt.features[ce],ot=Ge.geometry,vt=Ge.type;if(Ge.geometry=[],vt===1)for(ye=0;ye<ot.length;ye+=2)Ge.geometry.push(Wi(ot[ye],ot[ye+1],Ie,Pe,qe,Oe));else for(ye=0;ye<ot.length;ye++){var Ct=[];for(Be=0;Be<ot[ye].length;Be+=2)Ct.push(Wi(ot[ye][Be],ot[ye][Be+1],Ie,Pe,qe,Oe));Ge.geometry.push(Ct)}}return nt.transformed=!0,nt}function Wi(nt,Ie,ce,ye,Be,Pe){return[Math.round(ce*(nt*ye-Be)),Math.round(ce*(Ie*ye-Pe))]}function Zt(nt,Ie,ce,ye,Be){for(var Pe=Ie===Be.maxZoom?0:Be.tolerance/((1<<Ie)*Be.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:ye,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Oe=0;Oe<nt.length;Oe++){qe.numFeatures++,mi(qe,nt[Oe],Pe,Be);var Ge=nt[Oe].minX,ot=nt[Oe].minY,vt=nt[Oe].maxX,Ct=nt[Oe].maxY;Ge<qe.minX&&(qe.minX=Ge),ot<qe.minY&&(qe.minY=ot),vt>qe.maxX&&(qe.maxX=vt),Ct>qe.maxY&&(qe.maxY=Ct)}return qe}function mi(nt,Ie,ce,ye){var Be=Ie.geometry,Pe=Ie.type,qe=[];if(Pe==="Point"||Pe==="MultiPoint")for(var Oe=0;Oe<Be.length;Oe+=3)qe.push(Be[Oe]),qe.push(Be[Oe+1]),nt.numPoints++,nt.numSimplified++;else if(Pe==="LineString")wi(qe,Be,nt,ce,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(Oe=0;Oe<Be.length;Oe++)wi(qe,Be[Oe],nt,ce,Pe==="Polygon",Oe===0);else if(Pe==="MultiPolygon")for(var Ge=0;Ge<Be.length;Ge++){var ot=Be[Ge];for(Oe=0;Oe<ot.length;Oe++)wi(qe,ot[Oe],nt,ce,!0,Oe===0)}if(qe.length){var vt=Ie.tags||null;if(Pe==="LineString"&&ye.lineMetrics){for(var Ct in vt={},Ie.tags)vt[Ct]=Ie.tags[Ct];vt.mapbox_clip_start=Be.start/Be.size,vt.mapbox_clip_end=Be.end/Be.size}var Ut={geometry:qe,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:vt};Ie.id!==null&&(Ut.id=Ie.id),nt.features.push(Ut)}}function wi(nt,Ie,ce,ye,Be,Pe){var qe=ye*ye;if(ye>0&&Ie.size<(Be?qe:ye))ce.numPoints+=Ie.length/3;else{for(var Oe=[],Ge=0;Ge<Ie.length;Ge+=3)(ye===0||Ie[Ge+2]>qe)&&(ce.numSimplified++,Oe.push(Ie[Ge]),Oe.push(Ie[Ge+1])),ce.numPoints++;Be&&function(ot,vt){for(var Ct=0,Ut=0,ai=ot.length,Di=ai-2;Ut<ai;Di=Ut,Ut+=2)Ct+=(ot[Ut]-ot[Di])*(ot[Ut+1]+ot[Di+1]);if(Ct>0===vt)for(Ut=0,ai=ot.length;Ut<ai/2;Ut+=2){var ni=ot[Ut],ei=ot[Ut+1];ot[Ut]=ot[ai-2-Ut],ot[Ut+1]=ot[ai-1-Ut],ot[ai-2-Ut]=ni,ot[ai-1-Ut]=ei}}(Oe,Pe),nt.push(Oe)}}function $i(nt,Ie){var ce=(Ie=this.options=function(Be,Pe){for(var qe in Pe)Be[qe]=Pe[qe];return Be}(Object.create(this.options),Ie)).debug;if(ce&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Be,Pe){var qe=[];if(Be.type==="FeatureCollection")for(var Oe=0;Oe<Be.features.length;Oe++)ct(qe,Be.features[Oe],Pe,Oe);else ct(qe,Be.type==="Feature"?Be:{geometry:Be},Pe);return qe}(nt,Ie);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Be,Pe){var qe=Pe.buffer/Pe.extent,Oe=Be,Ge=$t(Be,1,-1-qe,qe,0,-1,2,Pe),ot=$t(Be,1,1-qe,2+qe,0,-1,2,Pe);return(Ge||ot)&&(Oe=$t(Be,1,-qe,1+qe,0,-1,2,Pe)||[],Ge&&(Oe=Ht(Ge,1).concat(Oe)),ot&&(Oe=Oe.concat(Ht(ot,-1)))),Oe}(ye,Ie),ye.length&&this.splitTile(ye,0,0,0),ce&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tr(nt,Ie,ce){return 32*((1<<nt)*ce+Ie)+nt}function Ar(nt,Ie){return Ie?nt.properties[Ie]:nt.id}function Tr(nt,Ie){if(nt==null)return!0;if(nt.type==="Feature")return Ar(nt,Ie)!=null;if(nt.type==="FeatureCollection"){const ce=new Set;for(const ye of nt.features){const Be=Ar(ye,Ie);if(Be==null||ce.has(Be))return!1;ce.add(Be)}return!0}return!1}function ji(nt,Ie){const ce=new Map;if(nt!=null)if(nt.type==="Feature")ce.set(Ar(nt,Ie),nt);else for(const ye of nt.features)ce.set(Ar(ye,Ie),ye);return ce}function Ii(nt,Ie){const ce=nt.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const ye=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!ye)return Ie(null,null);const Be=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=D.EXTENT,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(Oe){this._feature=Oe,this.extent=D.EXTENT,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const Ge of this._feature.geometry)Oe.push([new D.Point(Ge[0],Ge[1])]);return Oe}{const Oe=[];for(const Ge of this._feature.geometry){const ot=[];for(const vt of Ge)ot.push(new D.Point(vt[0],vt[1]));Oe.push(ot)}return Oe}}toGeoJSON(Oe,Ge,ot){return ut.call(this,Oe,Ge,ot)}}(this._features[qe])}}(ye.features);let Pe=vi(Be);Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),Ie(null,{vectorTile:Be,rawData:Pe.buffer})}$i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$i.prototype.splitTile=function(nt,Ie,ce,ye,Be,Pe,qe){for(var Oe=[nt,Ie,ce,ye],Ge=this.options,ot=Ge.debug;Oe.length;){ye=Oe.pop(),ce=Oe.pop(),Ie=Oe.pop(),nt=Oe.pop();var vt=1<<Ie,Ct=tr(Ie,ce,ye),Ut=this.tiles[Ct];if(!Ut&&(ot>1&&console.time("creation"),Ut=this.tiles[Ct]=Zt(nt,Ie,ce,ye,Ge),this.tileCoords.push({z:Ie,x:ce,y:ye}),ot)){ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,ce,ye,Ut.numFeatures,Ut.numPoints,Ut.numSimplified),console.timeEnd("creation"));var ai="z"+Ie;this.stats[ai]=(this.stats[ai]||0)+1,this.total++}if(Ut.source=nt,Be){if(Ie===Ge.maxZoom||Ie===Be)continue;var Di=1<<Be-Ie;if(ce!==Math.floor(Pe/Di)||ye!==Math.floor(qe/Di))continue}else if(Ie===Ge.indexMaxZoom||Ut.numPoints<=Ge.indexMaxPoints)continue;if(Ut.source=null,nt.length!==0){ot>1&&console.time("clipping");var ni,ei,Ui,Qi,hr,Ki,Yt=.5*Ge.buffer/Ge.extent,wr=.5-Yt,bi=.5+Yt,Ir=1+Yt;ni=ei=Ui=Qi=null,hr=$t(nt,vt,ce-Yt,ce+bi,0,Ut.minX,Ut.maxX,Ge),Ki=$t(nt,vt,ce+wr,ce+Ir,0,Ut.minX,Ut.maxX,Ge),nt=null,hr&&(ni=$t(hr,vt,ye-Yt,ye+bi,1,Ut.minY,Ut.maxY,Ge),ei=$t(hr,vt,ye+wr,ye+Ir,1,Ut.minY,Ut.maxY,Ge),hr=null),Ki&&(Ui=$t(Ki,vt,ye-Yt,ye+bi,1,Ut.minY,Ut.maxY,Ge),Qi=$t(Ki,vt,ye+wr,ye+Ir,1,Ut.minY,Ut.maxY,Ge),Ki=null),ot>1&&console.timeEnd("clipping"),Oe.push(ni||[],Ie+1,2*ce,2*ye),Oe.push(ei||[],Ie+1,2*ce,2*ye+1),Oe.push(Ui||[],Ie+1,2*ce+1,2*ye),Oe.push(Qi||[],Ie+1,2*ce+1,2*ye+1)}}},$i.prototype.getTile=function(nt,Ie,ce){var ye=this.options,Be=ye.extent,Pe=ye.debug;if(nt<0||nt>24)return null;var qe=1<<nt,Oe=tr(nt,Ie=(Ie%qe+qe)%qe,ce);if(this.tiles[Oe])return Ti(this.tiles[Oe],Be);Pe>1&&console.log("drilling down to z%d-%d-%d",nt,Ie,ce);for(var Ge,ot=nt,vt=Ie,Ct=ce;!Ge&&ot>0;)ot--,vt=Math.floor(vt/2),Ct=Math.floor(Ct/2),Ge=this.tiles[tr(ot,vt,Ct)];return Ge&&Ge.source?(Pe>1&&console.log("found parent tile z%d-%d-%d",ot,vt,Ct),Pe>1&&console.time("drilling down"),this.splitTile(Ge.source,ot,vt,Ct,nt,Ie,ce),Pe>1&&console.timeEnd("drilling down"),this.tiles[Oe]?Ti(this.tiles[Oe],Be):null):null};class Qs extends ke{constructor(Ie,ce,ye,Be){super(Ie,ce,ye,Ii),this._dataUpdateable=new Map,this.loadGeoJSON=(Pe,qe)=>{const{promoteId:Oe}=Pe;if(Pe.request)return D.getJSON(Pe.request,(Ge,ot,vt,Ct)=>{this._dataUpdateable=Tr(ot,Oe)?ji(ot,Oe):void 0,qe(Ge,ot,vt,Ct)});if(typeof Pe.data=="string")try{const Ge=JSON.parse(Pe.data);this._dataUpdateable=Tr(Ge,Oe)?ji(Ge,Oe):void 0,qe(null,Ge)}catch{qe(new Error(`Input data given to '${Pe.source}' is not a valid GeoJSON object.`))}else Pe.dataDiff?this._dataUpdateable?(function(Ge,ot,vt){var Ct,Ut,ai,Di;if(ot.removeAll&&Ge.clear(),ot.remove)for(const ni of ot.remove)Ge.delete(ni);if(ot.add)for(const ni of ot.add){const ei=Ar(ni,vt);ei!=null&&Ge.set(ei,ni)}if(ot.update)for(const ni of ot.update){let ei=Ge.get(ni.id);if(ei==null)continue;const Ui=!ni.removeAllProperties&&(((Ct=ni.removeProperties)===null||Ct===void 0?void 0:Ct.length)>0||((Ut=ni.addOrUpdateProperties)===null||Ut===void 0?void 0:Ut.length)>0);if((ni.newGeometry||ni.removeAllProperties||Ui)&&(ei={...ei},Ge.set(ni.id,ei),Ui&&(ei.properties={...ei.properties})),ni.newGeometry&&(ei.geometry=ni.newGeometry),ni.removeAllProperties)ei.properties={};else if(((ai=ni.removeProperties)===null||ai===void 0?void 0:ai.length)>0)for(const Qi of ni.removeProperties)Object.prototype.hasOwnProperty.call(ei.properties,Qi)&&delete ei.properties[Qi];if(((Di=ni.addOrUpdateProperties)===null||Di===void 0?void 0:Di.length)>0)for(const{key:Qi,value:hr}of ni.addOrUpdateProperties)ei.properties[Qi]=hr}}(this._dataUpdateable,Pe.dataDiff,Oe),qe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):qe(new Error(`Cannot update existing geojson data in ${Pe.source}`)):qe(new Error(`Input data given to '${Pe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Be&&(this.loadGeoJSON=Be)}loadData(Ie,ce){var ye;(ye=this._pendingRequest)===null||ye===void 0||ye.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Be=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new D.RequestPerformance(Ie.request);this._pendingCallback=ce,this._pendingRequest=this.loadGeoJSON(Ie,(Pe,qe)=>{if(delete this._pendingCallback,delete this._pendingRequest,Pe||!qe)return ce(Pe);if(typeof qe!="object")return ce(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{Ne(qe,!0);try{if(Ie.filter){const Ge=D.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ge.result==="error")throw new Error(Ge.value.map(vt=>`${vt.key}: ${vt.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(vt=>Ge.value.evaluate({zoom:0},vt))}}this._geoJSONIndex=Ie.cluster?new se(function({superclusterOptions:Ge,clusterProperties:ot}){if(!ot||!Ge)return Ge;const vt={},Ct={},Ut={accumulated:null,zoom:0},ai={properties:null},Di=Object.keys(ot);for(const ni of Di){const[ei,Ui]=ot[ni],Qi=D.createExpression(Ui),hr=D.createExpression(typeof ei=="string"?[ei,["accumulated"],["get",ni]]:ei);vt[ni]=Qi.value,Ct[ni]=hr.value}return Ge.map=ni=>{ai.properties=ni;const ei={};for(const Ui of Di)ei[Ui]=vt[Ui].evaluate(Ut,ai);return ei},Ge.reduce=(ni,ei)=>{ai.properties=ei;for(const Ui of Di)Ut.accumulated=ni[Ui],ni[Ui]=Ct[Ui].evaluate(Ut,ai)},Ge}(Ie)).load(qe.features):function(Ge,ot){return new $i(Ge,ot)}(qe,Ie.geojsonVtOptions)}catch(Ge){return ce(Ge)}this.loaded={};const Oe={};if(Be){const Ge=Be.finish();Ge&&(Oe.resourceTiming={},Oe.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(Ge)))}ce(null,Oe)}})}reloadTile(Ie,ce){const ye=this.loaded;return ye&&ye[Ie.uid]?super.reloadTile(Ie,ce):this.loadTile(Ie,ce)}removeSource(Ie,ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ce()}getClusterExpansionZoom(Ie,ce){try{ce(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(ye){ce(ye)}}getClusterChildren(Ie,ce){try{ce(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(ye){ce(ye)}}getClusterLeaves(Ie,ce){try{ce(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(ye){ce(ye)}}}class $r{constructor(Ie){this.self=Ie,this.actor=new D.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ke,geojson:Qs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ce,ye)=>{if(this.workerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.workerSourceTypes[ce]=ye},this.self.registerRTLTextPlugin=ce=>{if(D.plugin.isParsed())throw new Error("RTL text plugin already registered.");D.plugin.applyArabicShaping=ce.applyArabicShaping,D.plugin.processBidirectionalText=ce.processBidirectionalText,D.plugin.processStyledBidirectionalText=ce.processStyledBidirectionalText}}setReferrer(Ie,ce){this.referrer=ce}setImages(Ie,ce,ye){this.availableImages[Ie]=ce;for(const Be in this.workerSources[Ie]){const Pe=this.workerSources[Ie][Be];for(const qe in Pe)Pe[qe].availableImages=ce}ye()}setLayers(Ie,ce,ye){this.getLayerIndex(Ie).replace(ce),ye()}updateLayers(Ie,ce,ye){this.getLayerIndex(Ie).update(ce.layers,ce.removedIds),ye()}loadTile(Ie,ce,ye){this.getWorkerSource(Ie,ce.type,ce.source).loadTile(ce,ye)}loadDEMTile(Ie,ce,ye){this.getDEMWorkerSource(Ie,ce.source).loadTile(ce,ye)}reloadTile(Ie,ce,ye){this.getWorkerSource(Ie,ce.type,ce.source).reloadTile(ce,ye)}abortTile(Ie,ce,ye){this.getWorkerSource(Ie,ce.type,ce.source).abortTile(ce,ye)}removeTile(Ie,ce,ye){this.getWorkerSource(Ie,ce.type,ce.source).removeTile(ce,ye)}removeDEMTile(Ie,ce){this.getDEMWorkerSource(Ie,ce.source).removeTile(ce)}removeSource(Ie,ce,ye){if(!this.workerSources[Ie]||!this.workerSources[Ie][ce.type]||!this.workerSources[Ie][ce.type][ce.source])return;const Be=this.workerSources[Ie][ce.type][ce.source];delete this.workerSources[Ie][ce.type][ce.source],Be.removeSource!==void 0?Be.removeSource(ce,ye):ye()}loadWorkerSource(Ie,ce,ye){try{this.self.importScripts(ce.url),ye()}catch(Be){ye(Be.toString())}}syncRTLPluginState(Ie,ce,ye){try{D.plugin.setState(ce);const Be=D.plugin.getPluginURL();if(D.plugin.isLoaded()&&!D.plugin.isParsed()&&Be!=null){this.self.importScripts(Be);const Pe=D.plugin.isParsed();ye(Pe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Be}`),Pe)}}catch(Be){ye(Be.toString())}}getAvailableImages(Ie){let ce=this.availableImages[Ie];return ce||(ce=[]),ce}getLayerIndex(Ie){let ce=this.layerIndexes[Ie];return ce||(ce=this.layerIndexes[Ie]=new ne),ce}getWorkerSource(Ie,ce,ye){if(this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][ce]||(this.workerSources[Ie][ce]={}),!this.workerSources[Ie][ce][ye]){const Be={send:(Pe,qe,Oe)=>{this.actor.send(Pe,qe,Oe,Ie)}};this.workerSources[Ie][ce][ye]=new this.workerSourceTypes[ce](Be,this.getLayerIndex(Ie),this.getAvailableImages(Ie))}return this.workerSources[Ie][ce][ye]}getDEMWorkerSource(Ie,ce){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][ce]||(this.demWorkerSources[Ie][ce]=new Qe),this.demWorkerSources[Ie][ce]}}return D.isWorker()&&(self.worker=new $r(self)),$r}),Y(["./shared"],function(D){var ne="3.3.1";class oe{static testProp(x){if(!oe.docStyle)return x[0];for(let Q=0;Q<x.length;Q++)if(x[Q]in oe.docStyle)return x[Q];return x[0]}static create(x,Q,G){const X=window.document.createElement(x);return Q!==void 0&&(X.className=Q),G&&G.appendChild(X),X}static createNS(x,Q){return window.document.createElementNS(x,Q)}static disableDrag(){oe.docStyle&&oe.selectProp&&(oe.userSelect=oe.docStyle[oe.selectProp],oe.docStyle[oe.selectProp]="none")}static enableDrag(){oe.docStyle&&oe.selectProp&&(oe.docStyle[oe.selectProp]=oe.userSelect)}static setTransform(x,Q){x.style[oe.transformProp]=Q}static addEventListener(x,Q,G,X={}){x.addEventListener(Q,G,"passive"in X?X:X.capture)}static removeEventListener(x,Q,G,X={}){x.removeEventListener(Q,G,"passive"in X?X:X.capture)}static suppressClickInternal(x){x.preventDefault(),x.stopPropagation(),window.removeEventListener("click",oe.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",oe.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",oe.suppressClickInternal,!0)},0)}static mousePos(x,Q){const G=x.getBoundingClientRect();return new D.Point(Q.clientX-G.left-x.clientLeft,Q.clientY-G.top-x.clientTop)}static touchPos(x,Q){const G=x.getBoundingClientRect(),X=[];for(let te=0;te<Q.length;te++)X.push(new D.Point(Q[te].clientX-G.left-x.clientLeft,Q[te].clientY-G.top-x.clientTop));return X}static mouseButton(x){return x.button}static remove(x){x.parentNode&&x.parentNode.removeChild(x)}}oe.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,oe.selectProp=oe.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),oe.transformProp=oe.testProp(["transform","WebkitTransform"]);const ue={supported:!1,testSupport:function(J){!ke&&we&&(Qe?Ue(J):pe=J)}};let pe,we,ke=!1,Qe=!1;function Ue(J){const x=J.createTexture();J.bindTexture(J.TEXTURE_2D,x);try{if(J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,we),J.isContextLost())return;ue.supported=!0}catch{}J.deleteTexture(x),ke=!0}var We,Ne;typeof document<"u"&&(we=document.createElement("img"),we.onload=function(){pe&&Ue(pe),pe=null,Qe=!0},we.onerror=function(){ke=!0,pe=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(J){let x,Q,G,X;J.resetRequestQueue=()=>{x=[],Q=0,G=0,X={}},J.addThrottleControl=ve=>{const Ce=G++;return X[Ce]=ve,Ce},J.removeThrottleControl=ve=>{delete X[ve],he()},J.getImage=(ve,Ce,Se=!0)=>{ue.supported&&(ve.headers||(ve.headers={}),ve.headers.accept="image/webp,*/*");const Re={requestParameters:ve,supportImageRefresh:Se,callback:Ce,cancelled:!1,completed:!1,cancel:()=>{Re.completed||Re.cancelled||(Re.cancelled=!0,Re.innerRequest&&(Re.innerRequest.cancel(),Q--),he())}};return x.push(Re),he(),Re};const te=ve=>{const{requestParameters:Ce,supportImageRefresh:Se,callback:Re}=ve;return D.extend(Ce,{type:"image"}),(Se!==!1||D.isWorker()||D.getProtocolAction(Ce.url)||Ce.headers&&!Object.keys(Ce.headers).reduce((it,tt)=>it&&tt==="accept",!0)?D.makeRequest:ge)(Ce,(it,tt,at,Je)=>{Ae(ve,Re,it,tt,at,Je)})},Ae=(ve,Ce,Se,Re,it,tt)=>{Se?Ce(Se):Re instanceof HTMLImageElement||D.isImageBitmap(Re)?Ce(null,Re):Re&&((at,Je)=>{typeof createImageBitmap=="function"?D.arrayBufferToImageBitmap(at,Je):D.arrayBufferToImage(at,Je)})(Re,(at,Je)=>{at!=null?Ce(at):Je!=null&&Ce(null,Je,{cacheControl:it,expires:tt})}),ve.cancelled||(ve.completed=!0,Q--,he())},he=()=>{const ve=(()=>{const Ce=Object.keys(X);let Se=!1;if(Ce.length>0){for(const Re of Ce)if(Se=X[Re](),Se)break}return Se})()?D.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:D.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Ce=Q;Ce<ve&&x.length>0;Ce++){const Se=x.shift();if(Se.cancelled){Ce--;continue}const Re=te(Se);Q++,Se.innerRequest=Re}},ge=(ve,Ce)=>{const Se=new Image,Re=ve.url;let it=!1;const tt=ve.credentials;return tt&&tt==="include"?Se.crossOrigin="use-credentials":(tt&&tt==="same-origin"||!D.sameOrigin(Re))&&(Se.crossOrigin="anonymous"),Se.fetchPriority="high",Se.onload=()=>{Ce(null,Se),Se.onerror=Se.onload=null},Se.onerror=()=>{it||Ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Se.onerror=Se.onload=null},Se.src=Re,{cancel:()=>{it=!0,Se.src=""}}}}(We||(We={})),We.resetRequestQueue(),function(J){J.Glyphs="Glyphs",J.Image="Image",J.Source="Source",J.SpriteImage="SpriteImage",J.SpriteJSON="SpriteJSON",J.Style="Style",J.Tile="Tile",J.Unknown="Unknown"}(Ne||(Ne={}));class ut{constructor(x){this._transformRequestFn=x}transformRequest(x,Q){return this._transformRequestFn&&this._transformRequestFn(x,Q)||{url:x}}normalizeSpriteURL(x,Q,G){const X=function(te){const Ae=te.match(Ye);if(!Ae)throw new Error(`Unable to parse URL "${te}"`);return{protocol:Ae[1],authority:Ae[2],path:Ae[3]||"/",params:Ae[4]?Ae[4].split("&"):[]}}(x);return X.path+=`${Q}${G}`,function(te){const Ae=te.params.length?`?${te.params.join("&")}`:"";return`${te.protocol}://${te.authority}${te.path}${Ae}`}(X)}setTransformRequest(x){this._transformRequestFn=x}}const Ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function et(J){var x=new D.ARRAY_TYPE(3);return x[0]=J[0],x[1]=J[1],x[2]=J[2],x}var rt,ft=function(J,x,Q){return J[0]=x[0]-Q[0],J[1]=x[1]-Q[1],J[2]=x[2]-Q[2],J};rt=new D.ARRAY_TYPE(3),D.ARRAY_TYPE!=Float32Array&&(rt[0]=0,rt[1]=0,rt[2]=0);var Ze=function(J){var x=J[0],Q=J[1];return x*x+Q*Q};function wt(J){const x=[];if(typeof J=="string")x.push({id:"default",url:J});else if(J&&J.length>0){const Q=[];for(const{id:G,url:X}of J){const te=`${G}${X}`;Q.indexOf(te)===-1&&(Q.push(te),x.push({id:G,url:X}))}}return x}function Ft(J,x,Q,G,X){if(G)return void J(G);if(X!==Object.values(x).length||X!==Object.values(Q).length)return;const te={};for(const Ae in x){te[Ae]={};const he=D.browser.getImageCanvasContext(Q[Ae]),ge=x[Ae];for(const ve in ge){const{width:Ce,height:Se,x:Re,y:it,sdf:tt,pixelRatio:at,stretchX:Je,stretchY:pt,content:Et}=ge[ve];te[Ae][ve]={data:null,pixelRatio:at,sdf:tt,stretchX:Je,stretchY:pt,content:Et,spriteData:{width:Ce,height:Se,x:Re,y:it,context:he}}}}J(null,te)}(function(){var J=new D.ARRAY_TYPE(2);D.ARRAY_TYPE!=Float32Array&&(J[0]=0,J[1]=0)})();class _t{constructor(x,Q,G,X){this.context=x,this.format=G,this.texture=x.gl.createTexture(),this.update(Q,X)}update(x,Q,G){const{width:X,height:te}=x,Ae=!(this.size&&this.size[0]===X&&this.size[1]===te||G),{context:he}=this,{gl:ge}=he;if(this.useMipmap=!!(Q&&Q.useMipmap),ge.bindTexture(ge.TEXTURE_2D,this.texture),he.pixelStoreUnpackFlipY.set(!1),he.pixelStoreUnpack.set(1),he.pixelStoreUnpackPremultiplyAlpha.set(this.format===ge.RGBA&&(!Q||Q.premultiply!==!1)),Ae)this.size=[X,te],x instanceof HTMLImageElement||x instanceof HTMLCanvasElement||x instanceof HTMLVideoElement||x instanceof ImageData||D.isImageBitmap(x)?ge.texImage2D(ge.TEXTURE_2D,0,this.format,this.format,ge.UNSIGNED_BYTE,x):ge.texImage2D(ge.TEXTURE_2D,0,this.format,X,te,0,this.format,ge.UNSIGNED_BYTE,x.data);else{const{x:ve,y:Ce}=G||{x:0,y:0};x instanceof HTMLImageElement||x instanceof HTMLCanvasElement||x instanceof HTMLVideoElement||x instanceof ImageData||D.isImageBitmap(x)?ge.texSubImage2D(ge.TEXTURE_2D,0,ve,Ce,ge.RGBA,ge.UNSIGNED_BYTE,x):ge.texSubImage2D(ge.TEXTURE_2D,0,ve,Ce,X,te,ge.RGBA,ge.UNSIGNED_BYTE,x.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ge.generateMipmap(ge.TEXTURE_2D)}bind(x,Q,G){const{context:X}=this,{gl:te}=X;te.bindTexture(te.TEXTURE_2D,this.texture),G!==te.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(G=te.LINEAR),x!==this.filter&&(te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,x),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,G||x),this.filter=x),Q!==this.wrap&&(te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,Q),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,Q),this.wrap=Q)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:x}=this.context;x.deleteTexture(this.texture),this.texture=null}}function Pt(J){const{userImage:x}=J;return!!(x&&x.render&&x.render())&&(J.data.replace(new Uint8Array(x.data.buffer)),!0)}class Mt extends D.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new D.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(x){if(this.loaded!==x&&(this.loaded=x,x)){for(const{ids:Q,callback:G}of this.requestors)this._notify(Q,G);this.requestors=[]}}getImage(x){const Q=this.images[x];if(Q&&!Q.data&&Q.spriteData){const G=Q.spriteData;Q.data=new D.RGBAImage({width:G.width,height:G.height},G.context.getImageData(G.x,G.y,G.width,G.height).data),Q.spriteData=null}return Q}addImage(x,Q){if(this.images[x])throw new Error(`Image id ${x} already exist, use updateImage instead`);this._validate(x,Q)&&(this.images[x]=Q)}_validate(x,Q){let G=!0;const X=Q.data||Q.spriteData;return this._validateStretch(Q.stretchX,X&&X.width)||(this.fire(new D.ErrorEvent(new Error(`Image "${x}" has invalid "stretchX" value`))),G=!1),this._validateStretch(Q.stretchY,X&&X.height)||(this.fire(new D.ErrorEvent(new Error(`Image "${x}" has invalid "stretchY" value`))),G=!1),this._validateContent(Q.content,Q)||(this.fire(new D.ErrorEvent(new Error(`Image "${x}" has invalid "content" value`))),G=!1),G}_validateStretch(x,Q){if(!x)return!0;let G=0;for(const X of x){if(X[0]<G||X[1]<X[0]||Q<X[1])return!1;G=X[1]}return!0}_validateContent(x,Q){if(!x)return!0;if(x.length!==4)return!1;const G=Q.spriteData,X=G&&G.width||Q.data.width,te=G&&G.height||Q.data.height;return!(x[0]<0||X<x[0]||x[1]<0||te<x[1]||x[2]<0||X<x[2]||x[3]<0||te<x[3]||x[2]<x[0]||x[3]<x[1])}updateImage(x,Q,G=!0){const X=this.getImage(x);if(G&&(X.data.width!==Q.data.width||X.data.height!==Q.data.height))throw new Error(`size mismatch between old image (${X.data.width}x${X.data.height}) and new image (${Q.data.width}x${Q.data.height}).`);Q.version=X.version+1,this.images[x]=Q,this.updatedImages[x]=!0}removeImage(x){const Q=this.images[x];delete this.images[x],delete this.patterns[x],Q.userImage&&Q.userImage.onRemove&&Q.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(x,Q){let G=!0;if(!this.isLoaded())for(const X of x)this.images[X]||(G=!1);this.isLoaded()||G?this._notify(x,Q):this.requestors.push({ids:x,callback:Q})}_notify(x,Q){const G={};for(const X of x){let te=this.getImage(X);te||(this.fire(new D.Event("styleimagemissing",{id:X})),te=this.getImage(X)),te?G[X]={data:te.data.clone(),pixelRatio:te.pixelRatio,sdf:te.sdf,version:te.version,stretchX:te.stretchX,stretchY:te.stretchY,content:te.content,hasRenderCallback:!!(te.userImage&&te.userImage.render)}:D.warnOnce(`Image "${X}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}Q(null,G)}getPixelSize(){const{width:x,height:Q}=this.atlasImage;return{width:x,height:Q}}getPattern(x){const Q=this.patterns[x],G=this.getImage(x);if(!G)return null;if(Q&&Q.position.version===G.version)return Q.position;if(Q)Q.position.version=G.version;else{const X={w:G.data.width+2,h:G.data.height+2,x:0,y:0},te=new D.ImagePosition(X,G);this.patterns[x]={bin:X,position:te}}return this._updatePatternAtlas(),this.patterns[x].position}bind(x){const Q=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _t(x,this.atlasImage,Q.RGBA),this.atlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}_updatePatternAtlas(){const x=[];for(const te in this.patterns)x.push(this.patterns[te].bin);const{w:Q,h:G}=D.potpack(x),X=this.atlasImage;X.resize({width:Q||1,height:G||1});for(const te in this.patterns){const{bin:Ae}=this.patterns[te],he=Ae.x+1,ge=Ae.y+1,ve=this.getImage(te).data,Ce=ve.width,Se=ve.height;D.RGBAImage.copy(ve,X,{x:0,y:0},{x:he,y:ge},{width:Ce,height:Se}),D.RGBAImage.copy(ve,X,{x:0,y:Se-1},{x:he,y:ge-1},{width:Ce,height:1}),D.RGBAImage.copy(ve,X,{x:0,y:0},{x:he,y:ge+Se},{width:Ce,height:1}),D.RGBAImage.copy(ve,X,{x:Ce-1,y:0},{x:he-1,y:ge},{width:1,height:Se}),D.RGBAImage.copy(ve,X,{x:0,y:0},{x:he+Ce,y:ge},{width:1,height:Se})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(x){for(const Q of x){if(this.callbackDispatchedThisFrame[Q])continue;this.callbackDispatchedThisFrame[Q]=!0;const G=this.getImage(Q);G||D.warnOnce(`Image with ID: "${Q}" was not found`),Pt(G)&&this.updateImage(Q,G)}}}const Vt=1e20;function Ai(J,x,Q,G,X,te,Ae,he,ge){for(let ve=x;ve<x+G;ve++)Ri(J,Q*te+ve,te,X,Ae,he,ge);for(let ve=Q;ve<Q+X;ve++)Ri(J,ve*te+x,1,G,Ae,he,ge)}function Ri(J,x,Q,G,X,te,Ae){te[0]=0,Ae[0]=-1e20,Ae[1]=Vt,X[0]=J[x];for(let he=1,ge=0,ve=0;he<G;he++){X[he]=J[x+he*Q];const Ce=he*he;do{const Se=te[ge];ve=(X[he]-X[Se]+Ce-Se*Se)/(he-Se)/2}while(ve<=Ae[ge]&&--ge>-1);ge++,te[ge]=he,Ae[ge]=ve,Ae[ge+1]=Vt}for(let he=0,ge=0;he<G;he++){for(;Ae[ge+1]<he;)ge++;const ve=te[ge],Ce=he-ve;J[x+he*Q]=X[ve]+Ce*Ce}}class Ei{constructor(x,Q){this.requestManager=x,this.localIdeographFontFamily=Q,this.entries={}}setURL(x){this.url=x}getGlyphs(x,Q){const G=[];for(const X in x)for(const te of x[X])G.push({stack:X,id:te});D.asyncAll(G,({stack:X,id:te},Ae)=>{let he=this.entries[X];he||(he=this.entries[X]={glyphs:{},requests:{},ranges:{}});let ge=he.glyphs[te];if(ge!==void 0)return void Ae(null,{stack:X,id:te,glyph:ge});if(ge=this._tinySDF(he,X,te),ge)return he.glyphs[te]=ge,void Ae(null,{stack:X,id:te,glyph:ge});const ve=Math.floor(te/256);if(256*ve>65535)return void Ae(new Error("glyphs > 65535 not supported"));if(he.ranges[ve])return void Ae(null,{stack:X,id:te,glyph:ge});if(!this.url)return void Ae(new Error("glyphsUrl is not set"));let Ce=he.requests[ve];Ce||(Ce=he.requests[ve]=[],Ei.loadGlyphRange(X,ve,this.url,this.requestManager,(Se,Re)=>{if(Re){for(const it in Re)this._doesCharSupportLocalGlyph(+it)||(he.glyphs[+it]=Re[+it]);he.ranges[ve]=!0}for(const it of Ce)it(Se,Re);delete he.requests[ve]})),Ce.push((Se,Re)=>{Se?Ae(Se):Re&&Ae(null,{stack:X,id:te,glyph:Re[te]||null})})},(X,te)=>{if(X)Q(X);else if(te){const Ae={};for(const{stack:he,id:ge,glyph:ve}of te)(Ae[he]||(Ae[he]={}))[ge]=ve&&{id:ve.id,bitmap:ve.bitmap.clone(),metrics:ve.metrics};Q(null,Ae)}})}_doesCharSupportLocalGlyph(x){return!!this.localIdeographFontFamily&&(D.unicodeBlockLookup["CJK Unified Ideographs"](x)||D.unicodeBlockLookup["Hangul Syllables"](x)||D.unicodeBlockLookup.Hiragana(x)||D.unicodeBlockLookup.Katakana(x))}_tinySDF(x,Q,G){const X=this.localIdeographFontFamily;if(!X||!this._doesCharSupportLocalGlyph(G))return;let te=x.tinySDF;if(!te){let he="400";/bold/i.test(Q)?he="900":/medium/i.test(Q)?he="500":/light/i.test(Q)&&(he="200"),te=x.tinySDF=new Ei.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:X,fontWeight:he})}const Ae=te.draw(String.fromCharCode(G));return{id:G,bitmap:new D.AlphaImage({width:Ae.width||30,height:Ae.height||30},Ae.data),metrics:{width:Ae.glyphWidth||24,height:Ae.glyphHeight||24,left:Ae.glyphLeft||0,top:Ae.glyphTop-27||-8,advance:Ae.glyphAdvance||24}}}}Ei.loadGlyphRange=function(J,x,Q,G,X){const te=256*x,Ae=te+255,he=G.transformRequest(Q.replace("{fontstack}",J).replace("{range}",`${te}-${Ae}`),Ne.Glyphs);D.getArrayBuffer(he,(ge,ve)=>{if(ge)X(ge);else if(ve){const Ce={};for(const Se of D.parseGlyphPbf(ve))Ce[Se.id]=Se;X(null,Ce)}})},Ei.TinySDF=class{constructor({fontSize:J=24,buffer:x=3,radius:Q=8,cutoff:G=.25,fontFamily:X="sans-serif",fontWeight:te="normal",fontStyle:Ae="normal"}={}){this.buffer=x,this.cutoff=G,this.radius=Q;const he=this.size=J+4*x,ge=this._createCanvas(he),ve=this.ctx=ge.getContext("2d",{willReadFrequently:!0});ve.font=`${Ae} ${te} ${J}px ${X}`,ve.textBaseline="alphabetic",ve.textAlign="left",ve.fillStyle="black",this.gridOuter=new Float64Array(he*he),this.gridInner=new Float64Array(he*he),this.f=new Float64Array(he),this.z=new Float64Array(he+1),this.v=new Uint16Array(he)}_createCanvas(J){const x=document.createElement("canvas");return x.width=x.height=J,x}draw(J){const{width:x,actualBoundingBoxAscent:Q,actualBoundingBoxDescent:G,actualBoundingBoxLeft:X,actualBoundingBoxRight:te}=this.ctx.measureText(J),Ae=Math.ceil(Q),he=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(te-X))),ge=Math.min(this.size-this.buffer,Ae+Math.ceil(G)),ve=he+2*this.buffer,Ce=ge+2*this.buffer,Se=Math.max(ve*Ce,0),Re=new Uint8ClampedArray(Se),it={data:Re,width:ve,height:Ce,glyphWidth:he,glyphHeight:ge,glyphTop:Ae,glyphLeft:0,glyphAdvance:x};if(he===0||ge===0)return it;const{ctx:tt,buffer:at,gridInner:Je,gridOuter:pt}=this;tt.clearRect(at,at,he,ge),tt.fillText(J,at,at+Ae);const Et=tt.getImageData(at,at,he,ge);pt.fill(Vt,0,Se),Je.fill(0,0,Se);for(let At=0;At<ge;At++)for(let mt=0;mt<he;mt++){const It=Et.data[4*(At*he+mt)+3]/255;if(It===0)continue;const kt=(At+at)*ve+mt+at;if(It===1)pt[kt]=0,Je[kt]=Vt;else{const Ot=.5-It;pt[kt]=Ot>0?Ot*Ot:0,Je[kt]=Ot<0?Ot*Ot:0}}Ai(pt,0,0,ve,Ce,ve,this.f,this.v,this.z),Ai(Je,at,at,he,ge,ve,this.f,this.v,this.z);for(let At=0;At<Se;At++){const mt=Math.sqrt(pt[At])-Math.sqrt(Je[At]);Re[At]=Math.round(255-255*(mt/this.radius+this.cutoff))}return it}};class Li{constructor(){this.specification=D.v8Spec.light.position}possiblyEvaluate(x,Q){return D.sphericalToCartesian(x.expression.evaluate(Q))}interpolate(x,Q,G){return{x:D.interpolate.number(x.x,Q.x,G),y:D.interpolate.number(x.y,Q.y,G),z:D.interpolate.number(x.z,Q.z,G)}}}let Yi,vi;class d extends D.Evented{constructor(x){super(),Yi=Yi||new D.Properties({anchor:new D.DataConstantProperty(D.v8Spec.light.anchor),position:new Li,color:new D.DataConstantProperty(D.v8Spec.light.color),intensity:new D.DataConstantProperty(D.v8Spec.light.intensity)}),this._transitionable=new D.Transitionable(Yi),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(x,Q={}){if(!this._validate(D.validateLight,x,Q))for(const G in x){const X=x[G];G.endsWith("-transition")?this._transitionable.setTransition(G.slice(0,-11),X):this._transitionable.setValue(G,X)}}updateTransitions(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(x){this.properties=this._transitioning.possiblyEvaluate(x)}_validate(x,Q,G){return(!G||G.validate!==!1)&&D.emitValidationErrors(this,x.call(D.validateStyle,D.extend({value:Q,style:{glyphs:!0,sprite:!0},styleSpec:D.v8Spec})))}}class w{constructor(x,Q){this.width=x,this.height=Q,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(x,Q){const G=x.join(",")+String(Q);return this.dashEntry[G]||(this.dashEntry[G]=this.addDash(x,Q)),this.dashEntry[G]}getDashRanges(x,Q,G){const X=[];let te=x.length%2==1?-x[x.length-1]*G:0,Ae=x[0]*G,he=!0;X.push({left:te,right:Ae,isDash:he,zeroLength:x[0]===0});let ge=x[0];for(let ve=1;ve<x.length;ve++){he=!he;const Ce=x[ve];te=ge*G,ge+=Ce,Ae=ge*G,X.push({left:te,right:Ae,isDash:he,zeroLength:Ce===0})}return X}addRoundDash(x,Q,G){const X=Q/2;for(let te=-G;te<=G;te++){const Ae=this.width*(this.nextRow+G+te);let he=0,ge=x[he];for(let ve=0;ve<this.width;ve++){ve/ge.right>1&&(ge=x[++he]);const Ce=Math.abs(ve-ge.left),Se=Math.abs(ve-ge.right),Re=Math.min(Ce,Se);let it;const tt=te/G*(X+1);if(ge.isDash){const at=X-Math.abs(tt);it=Math.sqrt(Re*Re+at*at)}else it=X-Math.sqrt(Re*Re+tt*tt);this.data[Ae+ve]=Math.max(0,Math.min(255,it+128))}}}addRegularDash(x){for(let he=x.length-1;he>=0;--he){const ge=x[he],ve=x[he+1];ge.zeroLength?x.splice(he,1):ve&&ve.isDash===ge.isDash&&(ve.left=ge.left,x.splice(he,1))}const Q=x[0],G=x[x.length-1];Q.isDash===G.isDash&&(Q.left=G.left-this.width,G.right=Q.right+this.width);const X=this.width*this.nextRow;let te=0,Ae=x[te];for(let he=0;he<this.width;he++){he/Ae.right>1&&(Ae=x[++te]);const ge=Math.abs(he-Ae.left),ve=Math.abs(he-Ae.right),Ce=Math.min(ge,ve);this.data[X+he]=Math.max(0,Math.min(255,(Ae.isDash?Ce:-Ce)+128))}}addDash(x,Q){const G=Q?7:0,X=2*G+1;if(this.nextRow+X>this.height)return D.warnOnce("LineAtlas out of space"),null;let te=0;for(let he=0;he<x.length;he++)te+=x[he];if(te!==0){const he=this.width/te,ge=this.getDashRanges(x,this.width,he);Q?this.addRoundDash(ge,he,G):this.addRegularDash(ge)}const Ae={y:(this.nextRow+G+.5)/this.height,height:2*G/this.height,width:te};return this.nextRow+=X,this.dirty=!0,Ae}bind(x){const Q=x.gl;this.texture?(Q.bindTexture(Q.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Q.texSubImage2D(Q.TEXTURE_2D,0,0,0,this.width,this.height,Q.ALPHA,Q.UNSIGNED_BYTE,this.data))):(this.texture=Q.createTexture(),Q.bindTexture(Q.TEXTURE_2D,this.texture),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.REPEAT),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.REPEAT),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),Q.texImage2D(Q.TEXTURE_2D,0,Q.ALPHA,this.width,this.height,0,Q.ALPHA,Q.UNSIGNED_BYTE,this.data))}}class S{constructor(x,Q,G){this.workerPool=x,this.actors=[],this.currentActor=0,this.id=G;const X=this.workerPool.acquire(G);for(let te=0;te<X.length;te++){const Ae=new S.Actor(X[te],Q,G);Ae.name=`Worker ${te}`,this.actors.push(Ae)}if(!this.actors.length)throw new Error("No actors found")}broadcast(x,Q,G){D.asyncAll(this.actors,(X,te)=>{X.send(x,Q,te)},G=G||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(x=!0){this.actors.forEach(Q=>{Q.remove()}),this.actors=[],x&&this.workerPool.release(this.id)}}function k(J,x,Q){const G=function(X,te){if(X)return Q(X);if(te){const Ae=D.pick(D.extend(te,J),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(Ae.vectorLayers=te.vector_layers,Ae.vectorLayerIds=Ae.vectorLayers.map(he=>he.id)),Q(null,Ae)}};return J.url?D.getJSON(x.transformRequest(J.url,Ne.Source),G):D.browser.frame(()=>G(null,J))}S.Actor=D.Actor;class R{constructor(x,Q){x&&(Q?this.setSouthWest(x).setNorthEast(Q):Array.isArray(x)&&(x.length===4?this.setSouthWest([x[0],x[1]]).setNorthEast([x[2],x[3]]):this.setSouthWest(x[0]).setNorthEast(x[1])))}setNorthEast(x){return this._ne=x instanceof D.LngLat?new D.LngLat(x.lng,x.lat):D.LngLat.convert(x),this}setSouthWest(x){return this._sw=x instanceof D.LngLat?new D.LngLat(x.lng,x.lat):D.LngLat.convert(x),this}extend(x){const Q=this._sw,G=this._ne;let X,te;if(x instanceof D.LngLat)X=x,te=x;else{if(!(x instanceof R))return Array.isArray(x)?x.length===4||x.every(Array.isArray)?this.extend(R.convert(x)):this.extend(D.LngLat.convert(x)):x&&("lng"in x||"lon"in x)&&"lat"in x?this.extend(D.LngLat.convert(x)):this;if(X=x._sw,te=x._ne,!X||!te)return this}return Q||G?(Q.lng=Math.min(X.lng,Q.lng),Q.lat=Math.min(X.lat,Q.lat),G.lng=Math.max(te.lng,G.lng),G.lat=Math.max(te.lat,G.lat)):(this._sw=new D.LngLat(X.lng,X.lat),this._ne=new D.LngLat(te.lng,te.lat)),this}getCenter(){return new D.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new D.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new D.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(x){const{lng:Q,lat:G}=D.LngLat.convert(x);let X=this._sw.lng<=Q&&Q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(X=this._sw.lng>=Q&&Q>=this._ne.lng),this._sw.lat<=G&&G<=this._ne.lat&&X}static convert(x){return x instanceof R?x:x&&new R(x)}static fromLngLat(x,Q=0){const G=360*Q/40075017,X=G/Math.cos(Math.PI/180*x.lat);return new R(new D.LngLat(x.lng-X,x.lat-G),new D.LngLat(x.lng+X,x.lat+G))}}class W{constructor(x,Q,G){this.bounds=R.convert(this.validateBounds(x)),this.minzoom=Q||0,this.maxzoom=G||24}validateBounds(x){return Array.isArray(x)&&x.length===4?[Math.max(-180,x[0]),Math.max(-90,x[1]),Math.min(180,x[2]),Math.min(90,x[3])]:[-180,-90,180,90]}contains(x){const Q=Math.pow(2,x.z),G=Math.floor(D.mercatorXfromLng(this.bounds.getWest())*Q),X=Math.floor(D.mercatorYfromLat(this.bounds.getNorth())*Q),te=Math.ceil(D.mercatorXfromLng(this.bounds.getEast())*Q),Ae=Math.ceil(D.mercatorYfromLat(this.bounds.getSouth())*Q);return x.x>=G&&x.x<te&&x.y>=X&&x.y<Ae}}class se extends D.Evented{constructor(x,Q,G,X){if(super(),this.load=()=>{this._loaded=!1,this.fire(new D.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(te,Ae)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),te?this.fire(new D.ErrorEvent(te)):Ae&&(D.extend(this,Ae),Ae.bounds&&(this.tileBounds=new W(Ae.bounds,this.minzoom,this.maxzoom)),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>D.extend({},this._options),this.id=x,this.dispatcher=G,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,D.extend(this,D.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=D.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(X)}loaded(){return this._loaded}hasTile(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)}onAdd(x){this.map=x,this.load()}setSourceProperty(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.load()}setTiles(x){return this.setSourceProperty(()=>{this._options.tiles=x}),this}setUrl(x){return this.setSourceProperty(()=>{this.url=x,this._options.url=x}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(x,Q){const G=x.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),X={request:this.map._requestManager.transformRequest(G,Ne.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function te(Ae,he){return delete x.request,x.aborted?Q(null):Ae&&Ae.status!==404?Q(Ae):(he&&he.resourceTiming&&(x.resourceTiming=he.resourceTiming),this.map._refreshExpiredTiles&&he&&x.setExpiryData(he),x.loadVectorData(he,this.map.painter),Q(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}X.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=Q:x.request=x.actor.send("reloadTile",X,te.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",X,te.bind(this)))}abortTile(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)}unloadTile(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class le extends D.Evented{constructor(x,Q,G,X){super(),this.id=x,this.dispatcher=G,this.setEventedParent(X),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=D.extend({type:"raster"},Q),D.extend(this,D.pick(Q,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new D.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(x,Q)=>{this._tileJSONRequest=null,this._loaded=!0,x?this.fire(new D.ErrorEvent(x)):Q&&(D.extend(this,Q),Q.bounds&&(this.tileBounds=new W(Q.bounds,this.minzoom,this.maxzoom)),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(x){this.map=x,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return D.extend({},this._options)}hasTile(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)}loadTile(x,Q){const G=x.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);x.request=We.getImage(this.map._requestManager.transformRequest(G,Ne.Tile),(X,te,Ae)=>{if(delete x.request,x.aborted)x.state="unloaded",Q(null);else if(X)x.state="errored",Q(X);else if(te){this.map._refreshExpiredTiles&&Ae&&x.setExpiryData(Ae);const he=this.map.painter.context,ge=he.gl;x.texture=this.map.painter.getTileTexture(te.width),x.texture?x.texture.update(te,{useMipmap:!0}):(x.texture=new _t(he,te,ge.RGBA,{useMipmap:!0}),x.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),he.extTextureFilterAnisotropic&&ge.texParameterf(ge.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax)),x.state="loaded",Q(null)}},this.map._refreshExpiredTiles)}abortTile(x,Q){x.request&&(x.request.cancel(),delete x.request),Q()}unloadTile(x,Q){x.texture&&this.map.painter.saveTileTexture(x.texture),Q()}hasTransition(){return!1}}class fe extends le{constructor(x,Q,G,X){super(x,Q,G,X),this.type="raster-dem",this.maxzoom=22,this._options=D.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}loadTile(x,Q){const G=x.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function X(te,Ae){te&&(x.state="errored",Q(te)),Ae&&(x.dem=Ae,x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0,x.state="loaded",Q(null))}x.request=We.getImage(this.map._requestManager.transformRequest(G,Ne.Tile),(function(te,Ae){if(delete x.request,x.aborted)x.state="unloaded",Q(null);else if(te)x.state="errored",Q(te);else if(Ae){this.map._refreshExpiredTiles&&x.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;const he=D.isImageBitmap(Ae)&&(vi==null&&(vi=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),vi)?Ae:D.browser.getImageData(Ae,1),ge={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:he,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",ge,X.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),x.neighboringTiles=this._getNeighboringTiles(x.tileID)}_getNeighboringTiles(x){const Q=x.canonical,G=Math.pow(2,Q.z),X=(Q.x-1+G)%G,te=Q.x===0?x.wrap-1:x.wrap,Ae=(Q.x+1+G)%G,he=Q.x+1===G?x.wrap+1:x.wrap,ge={};return ge[new D.OverscaledTileID(x.overscaledZ,te,Q.z,X,Q.y).key]={backfilled:!1},ge[new D.OverscaledTileID(x.overscaledZ,he,Q.z,Ae,Q.y).key]={backfilled:!1},Q.y>0&&(ge[new D.OverscaledTileID(x.overscaledZ,te,Q.z,X,Q.y-1).key]={backfilled:!1},ge[new D.OverscaledTileID(x.overscaledZ,x.wrap,Q.z,Q.x,Q.y-1).key]={backfilled:!1},ge[new D.OverscaledTileID(x.overscaledZ,he,Q.z,Ae,Q.y-1).key]={backfilled:!1}),Q.y+1<G&&(ge[new D.OverscaledTileID(x.overscaledZ,te,Q.z,X,Q.y+1).key]={backfilled:!1},ge[new D.OverscaledTileID(x.overscaledZ,x.wrap,Q.z,Q.x,Q.y+1).key]={backfilled:!1},ge[new D.OverscaledTileID(x.overscaledZ,he,Q.z,Ae,Q.y+1).key]={backfilled:!1}),ge}unloadTile(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})}}class be extends D.Evented{constructor(x,Q,G,X){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>D.extend({},this._options,{type:this.type,data:this._data}),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=G.getActor(),this.setEventedParent(X),this._data=Q.data,this._options=D.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,Q.maxzoom!==void 0&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;const te=D.EXTENT/this.tileSize;this.workerOptions=D.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(Q.buffer!==void 0?Q.buffer:128)*te,tolerance:(Q.tolerance!==void 0?Q.tolerance:.375)*te,extent:D.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:Q.clusterMaxZoom!==void 0?Q.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,Q.clusterMinPoints||2),extent:D.EXTENT,radius:(Q.clusterRadius||50)*te,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties,filter:Q.filter},Q.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(x){this.map=x,this.load()}setData(x){return this._data=x,this._updateWorkerData(),this}updateData(x){return this._updateWorkerData(x),this}setClusterOptions(x){return this.workerOptions.cluster=x.cluster,x&&(x.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=x.clusterRadius),x.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=x.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(x,Q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},Q),this}getClusterChildren(x,Q){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},Q),this}getClusterLeaves(x,Q,G,X){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:Q,offset:G},X),this}_updateWorkerData(x){const Q=D.extend({},this.workerOptions);x?Q.dataDiff=x:typeof this._data=="string"?(Q.request=this.map._requestManager.transformRequest(D.browser.resolveURL(this._data),Ne.Source),Q.request.collectResourceTiming=this._collectResourceTiming):Q.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new D.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,Q,(G,X)=>{if(this._pendingLoads--,this._removed||X&&X.abandoned)return void this.fire(new D.Event("dataabort",{dataType:"source"}));let te=null;if(X&&X.resourceTiming&&X.resourceTiming[this.id]&&(te=X.resourceTiming[this.id].slice(0)),G)return void this.fire(new D.ErrorEvent(G));const Ae={dataType:"source"};this._collectResourceTiming&&te&&te.length>0&&D.extend(Ae,{resourceTiming:te}),this.fire(new D.Event("data",{...Ae,sourceDataType:"metadata"})),this.fire(new D.Event("data",{...Ae,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(x,Q){const G=x.actor?"reloadTile":"loadTile";x.actor=this.actor;const X={type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};x.request=this.actor.send(G,X,(te,Ae)=>(delete x.request,x.unloadVectorData(),x.aborted?Q(null):te?Q(te):(x.loadVectorData(Ae,this.map.painter,G==="reloadTile"),Q(null))))}abortTile(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0}unloadTile(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Te=D.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ke extends D.Evented{constructor(x,Q,G,X){super(),this.load=(te,Ae)=>{this._loaded=!1,this.fire(new D.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=We.getImage(this.map._requestManager.transformRequest(this.url,Ne.Image),(he,ge)=>{this._request=null,this._loaded=!0,he?this.fire(new D.ErrorEvent(he)):ge&&(this.image=ge,te&&(this.coordinates=te),Ae&&Ae(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const te=this.map.painter.context,Ae=te.gl;this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=D.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _t(te,this.image,Ae.RGBA),this.texture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE));let he=!1;for(const ge in this.tiles){const ve=this.tiles[ge];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture,he=!0)}he&&this.fire(new D.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=x,this.dispatcher=G,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(X),this.options=Q}loaded(){return this._loaded}updateImage(x){return x.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=x.url,this.load(x.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(x){this.map=x,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(x){this.coordinates=x;const Q=x.map(D.MercatorCoordinate.fromLngLat);this.tileID=function(X){let te=1/0,Ae=1/0,he=-1/0,ge=-1/0;for(const Re of X)te=Math.min(te,Re.x),Ae=Math.min(Ae,Re.y),he=Math.max(he,Re.x),ge=Math.max(ge,Re.y);const ve=Math.max(he-te,ge-Ae),Ce=Math.max(0,Math.floor(-Math.log(ve)/Math.LN2)),Se=Math.pow(2,Ce);return new D.CanonicalTileID(Ce,Math.floor((te+he)/2*Se),Math.floor((Ae+ge)/2*Se))}(Q),this.minzoom=this.maxzoom=this.tileID.z;const G=Q.map(X=>this.tileID.getTilePoint(X)._round());return this._boundsArray=new D.RasterBoundsArray,this._boundsArray.emplaceBack(G[0].x,G[0].y,0,0),this._boundsArray.emplaceBack(G[1].x,G[1].y,D.EXTENT,0),this._boundsArray.emplaceBack(G[3].x,G[3].y,0,D.EXTENT),this._boundsArray.emplaceBack(G[2].x,G[2].y,D.EXTENT,D.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(x,Q){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},Q(null)):(x.state="errored",Q(null))}hasTransition(){return!1}}class Me extends Ke{constructor(x,Q,G,X){super(x,Q,G,X),this.load=()=>{this._loaded=!1;const te=this.options;this.urls=[];for(const Ae of te.urls)this.urls.push(this.map._requestManager.transformRequest(Ae,Ne.Source).url);D.getVideo(this.urls,(Ae,he)=>{this._loaded=!0,Ae?this.fire(new D.ErrorEvent(Ae)):he&&(this.video=he,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const te=this.map.painter.context,Ae=te.gl;this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=D.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Ae.texSubImage2D(Ae.TEXTURE_2D,0,0,0,Ae.RGBA,Ae.UNSIGNED_BYTE,this.video)):(this.texture=new _t(te,this.video,Ae.RGBA),this.texture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE));let he=!1;for(const ge in this.tiles){const ve=this.tiles[ge];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture,he=!0)}he&&this.fire(new D.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=Q}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(x){if(this.video){const Q=this.video.seekable;x<Q.start(0)||x>Q.end(0)?this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${Q.start(0)} and ${Q.end(0)}-second mark.`))):this.video.currentTime=x}}getVideo(){return this.video}onAdd(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class me extends Ke{constructor(x,Q,G,X){super(x,Q,G,X),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new D.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let te=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,te=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,te=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const Ae=this.map.painter.context,he=Ae.gl;this.boundsBuffer||(this.boundsBuffer=Ae.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=D.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(te||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _t(Ae,this.canvas,he.RGBA,{premultiply:!0});let ge=!1;for(const ve in this.tiles){const Ce=this.tiles[ve];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture,ge=!0)}ge&&this.fire(new D.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),Q.coordinates?Array.isArray(Q.coordinates)&&Q.coordinates.length===4&&!Q.coordinates.some(te=>!Array.isArray(te)||te.length!==2||te.some(Ae=>typeof Ae!="number"))||this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'missing required property "coordinates"'))),Q.animate&&typeof Q.animate!="boolean"&&this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'optional "animate" property must be a boolean value'))),Q.canvas?typeof Q.canvas=="string"||Q.canvas instanceof HTMLCanvasElement||this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'missing required property "canvas"'))),this.options=Q,this.animate=Q.animate===void 0||Q.animate}getCanvas(){return this.canvas}onAdd(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const x of[this.canvas.width,this.canvas.height])if(isNaN(x)||x<=0)return!0;return!1}}const De={},Xe=J=>{switch(J){case"geojson":return be;case"image":return Ke;case"raster":return le;case"raster-dem":return fe;case"vector":return se;case"video":return Me;case"canvas":return me}return De[J]};function ct(J,x){const Q=D.create();return D.translate(Q,Q,[1,1,0]),D.scale(Q,Q,[.5*J.width,.5*J.height,1]),D.multiply(Q,Q,J.calculatePosMatrix(x.toUnwrapped()))}function gt(J,x,Q,G,X,te){const Ae=function(Se,Re,it){if(Se)for(const tt of Se){const at=Re[tt];if(at&&at.source===it&&at.type==="fill-extrusion")return!0}else for(const tt in Re){const at=Re[tt];if(at.source===it&&at.type==="fill-extrusion")return!0}return!1}(X&&X.layers,x,J.id),he=te.maxPitchScaleFactor(),ge=J.tilesIn(G,he,Ae);ge.sort(Dt);const ve=[];for(const Se of ge)ve.push({wrappedTileID:Se.tileID.wrapped().key,queryResults:Se.tile.queryRenderedFeatures(x,Q,J._state,Se.queryGeometry,Se.cameraQueryGeometry,Se.scale,X,te,he,ct(J.transform,Se.tileID))});const Ce=function(Se){const Re={},it={};for(const tt of Se){const at=tt.queryResults,Je=tt.wrappedTileID,pt=it[Je]=it[Je]||{};for(const Et in at){const At=at[Et],mt=pt[Et]=pt[Et]||{},It=Re[Et]=Re[Et]||[];for(const kt of At)mt[kt.featureIndex]||(mt[kt.featureIndex]=!0,It.push(kt))}}return Re}(ve);for(const Se in Ce)Ce[Se].forEach(Re=>{const it=Re.feature,tt=J.getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=tt});return Ce}function Dt(J,x){const Q=J.tileID,G=x.tileID;return Q.overscaledZ-G.overscaledZ||Q.canonical.y-G.canonical.y||Q.wrap-G.wrap||Q.canonical.x-G.canonical.x}class Kt{constructor(x,Q){this.timeAdded=0,this.fadeEndTime=0,this.tileID=x,this.uid=D.uniqueId(),this.uses=0,this.tileSize=Q,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(x){const Q=x+this.timeAdded;Q<this.fadeEndTime||(this.fadeEndTime=Q)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(x){this.demTexture&&x.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(x,Q,G){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",x){x.featureIndex&&(this.latestFeatureIndex=x.featureIndex,x.rawTileData?(this.latestRawTileData=x.rawTileData,this.latestFeatureIndex.rawTileData=x.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=x.collisionBoxArray,this.buckets=function(X,te){const Ae={};if(!te)return Ae;for(const he of X){const ge=he.layerIds.map(ve=>te.getLayer(ve)).filter(Boolean);if(ge.length!==0){he.layers=ge,he.stateDependentLayerIds&&(he.stateDependentLayers=he.stateDependentLayerIds.map(ve=>ge.filter(Ce=>Ce.id===ve)[0]));for(const ve of ge)Ae[ve.id]=he}}return Ae}(x.buckets,Q.style),this.hasSymbolBuckets=!1;for(const X in this.buckets){const te=this.buckets[X];if(te instanceof D.SymbolBucket){if(this.hasSymbolBuckets=!0,!G)break;te.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const X in this.buckets){const te=this.buckets[X];if(te instanceof D.SymbolBucket&&te.hasRTLText){this.hasRTLText=!0,D.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const X in this.buckets){const te=this.buckets[X];this.queryPadding=Math.max(this.queryPadding,Q.style.getLayer(X).queryRadius(te))}x.imageAtlas&&(this.imageAtlas=x.imageAtlas),x.glyphAtlasImage&&(this.glyphAtlasImage=x.glyphAtlasImage)}else this.collisionBoxArray=new D.CollisionBoxArray}unloadVectorData(){for(const x in this.buckets)this.buckets[x].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(x){return this.buckets[x.id]}upload(x){for(const G in this.buckets){const X=this.buckets[G];X.uploadPending()&&X.upload(x)}const Q=x.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _t(x,this.imageAtlas.image,Q.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _t(x,this.glyphAtlasImage,Q.ALPHA),this.glyphAtlasImage=null)}prepare(x){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(x,this.imageAtlasTexture)}queryRenderedFeatures(x,Q,G,X,te,Ae,he,ge,ve,Ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:X,cameraQueryGeometry:te,scale:Ae,tileSize:this.tileSize,pixelPosMatrix:Ce,transform:ge,params:he,queryPadding:this.queryPadding*ve},x,Q,G):{}}querySourceFeatures(x,Q){const G=this.latestFeatureIndex;if(!G||!G.rawTileData)return;const X=G.loadVTLayers(),te=Q&&Q.sourceLayer?Q.sourceLayer:"",Ae=X._geojsonTileLayer||X[te];if(!Ae)return;const he=D.createFilter(Q&&Q.filter),{z:ge,x:ve,y:Ce}=this.tileID.canonical,Se={z:ge,x:ve,y:Ce};for(let Re=0;Re<Ae.length;Re++){const it=Ae.feature(Re);if(he.needGeometry){const Je=D.toEvaluationFeature(it,!0);if(!he.filter(new D.EvaluationParameters(this.tileID.overscaledZ),Je,this.tileID.canonical))continue}else if(!he.filter(new D.EvaluationParameters(this.tileID.overscaledZ),it))continue;const tt=G.getId(it,te),at=new D.GeoJSONFeature(it,ge,ve,Ce,tt);at.tile=Se,x.push(at)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(x){const Q=this.expirationTime;if(x.cacheControl){const G=D.parseCacheControl(x.cacheControl);G["max-age"]&&(this.expirationTime=Date.now()+1e3*G["max-age"])}else x.expires&&(this.expirationTime=new Date(x.expires).getTime());if(this.expirationTime){const G=Date.now();let X=!1;if(this.expirationTime>G)X=!1;else if(Q)if(this.expirationTime<Q)X=!0;else{const te=this.expirationTime-Q;te?this.expirationTime=G+Math.max(te,3e4):X=!0}else X=!0;X?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(x,Q){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(x).length===0)return;const G=this.latestFeatureIndex.loadVTLayers();for(const X in this.buckets){if(!Q.style.hasLayer(X))continue;const te=this.buckets[X],Ae=te.layers[0].sourceLayer||"_geojsonTileLayer",he=G[Ae],ge=x[Ae];if(!he||!ge||Object.keys(ge).length===0)continue;te.update(ge,he,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ve=Q&&Q.style&&Q.style.getLayer(X);ve&&(this.queryPadding=Math.max(this.queryPadding,ve.queryRadius(te)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(x){this.symbolFadeHoldUntil=D.browser.now()+x}setDependencies(x,Q){const G={};for(const X of Q)G[X]=!0;this.dependencies[x]=G}hasDependency(x,Q){for(const G of x){const X=this.dependencies[G];if(X){for(const te of Q)if(X[te])return!0}}return!1}}class Gt{constructor(x,Q){this.max=x,this.onRemove=Q,this.reset()}reset(){for(const x in this.data)for(const Q of this.data[x])Q.timeout&&clearTimeout(Q.timeout),this.onRemove(Q.value);return this.data={},this.order=[],this}add(x,Q,G){const X=x.wrapped().key;this.data[X]===void 0&&(this.data[X]=[]);const te={value:Q,timeout:void 0};if(G!==void 0&&(te.timeout=setTimeout(()=>{this.remove(x,te)},G)),this.data[X].push(te),this.order.push(X),this.order.length>this.max){const Ae=this._getAndRemoveByKey(this.order[0]);Ae&&this.onRemove(Ae)}return this}has(x){return x.wrapped().key in this.data}getAndRemove(x){return this.has(x)?this._getAndRemoveByKey(x.wrapped().key):null}_getAndRemoveByKey(x){const Q=this.data[x].shift();return Q.timeout&&clearTimeout(Q.timeout),this.data[x].length===0&&delete this.data[x],this.order.splice(this.order.indexOf(x),1),Q.value}getByKey(x){const Q=this.data[x];return Q?Q[0].value:null}get(x){return this.has(x)?this.data[x.wrapped().key][0].value:null}remove(x,Q){if(!this.has(x))return this;const G=x.wrapped().key,X=Q===void 0?0:this.data[G].indexOf(Q),te=this.data[G][X];return this.data[G].splice(X,1),te.timeout&&clearTimeout(te.timeout),this.data[G].length===0&&delete this.data[G],this.onRemove(te.value),this.order.splice(this.order.indexOf(G),1),this}setMaxSize(x){for(this.max=x;this.order.length>this.max;){const Q=this._getAndRemoveByKey(this.order[0]);Q&&this.onRemove(Q)}return this}filter(x){const Q=[];for(const G in this.data)for(const X of this.data[G])x(X.value)||Q.push(X);for(const G of Q)this.remove(G.value.tileID,G)}}class Qt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(x,Q,G){const X=String(Q);if(this.stateChanges[x]=this.stateChanges[x]||{},this.stateChanges[x][X]=this.stateChanges[x][X]||{},D.extend(this.stateChanges[x][X],G),this.deletedStates[x]===null){this.deletedStates[x]={};for(const te in this.state[x])te!==X&&(this.deletedStates[x][te]=null)}else if(this.deletedStates[x]&&this.deletedStates[x][X]===null){this.deletedStates[x][X]={};for(const te in this.state[x][X])G[te]||(this.deletedStates[x][X][te]=null)}else for(const te in G)this.deletedStates[x]&&this.deletedStates[x][X]&&this.deletedStates[x][X][te]===null&&delete this.deletedStates[x][X][te]}removeFeatureState(x,Q,G){if(this.deletedStates[x]===null)return;const X=String(Q);if(this.deletedStates[x]=this.deletedStates[x]||{},G&&Q!==void 0)this.deletedStates[x][X]!==null&&(this.deletedStates[x][X]=this.deletedStates[x][X]||{},this.deletedStates[x][X][G]=null);else if(Q!==void 0)if(this.stateChanges[x]&&this.stateChanges[x][X])for(G in this.deletedStates[x][X]={},this.stateChanges[x][X])this.deletedStates[x][X][G]=null;else this.deletedStates[x][X]=null;else this.deletedStates[x]=null}getState(x,Q){const G=String(Q),X=D.extend({},(this.state[x]||{})[G],(this.stateChanges[x]||{})[G]);if(this.deletedStates[x]===null)return{};if(this.deletedStates[x]){const te=this.deletedStates[x][Q];if(te===null)return{};for(const Ae in te)delete X[Ae]}return X}initializeTileState(x,Q){x.setFeatureState(this.state,Q)}coalesceChanges(x,Q){const G={};for(const X in this.stateChanges){this.state[X]=this.state[X]||{};const te={};for(const Ae in this.stateChanges[X])this.state[X][Ae]||(this.state[X][Ae]={}),D.extend(this.state[X][Ae],this.stateChanges[X][Ae]),te[Ae]=this.state[X][Ae];G[X]=te}for(const X in this.deletedStates){this.state[X]=this.state[X]||{};const te={};if(this.deletedStates[X]===null)for(const Ae in this.state[X])te[Ae]={},this.state[X][Ae]={};else for(const Ae in this.deletedStates[X]){if(this.deletedStates[X][Ae]===null)this.state[X][Ae]={};else for(const he of Object.keys(this.deletedStates[X][Ae]))delete this.state[X][Ae][he];te[Ae]=this.state[X][Ae]}G[X]=G[X]||{},D.extend(G[X],te)}if(this.stateChanges={},this.deletedStates={},Object.keys(G).length!==0)for(const X in x)x[X].setFeatureState(G,Q)}}class $t extends D.Evented{constructor(x,Q,G){super(),this.id=x,this.dispatcher=G,this.on("data",X=>{X.dataType==="source"&&X.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&X.dataType==="source"&&X.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((X,te,Ae,he)=>{const ge=new(Xe(te.type))(X,te,Ae,he);if(ge.id!==X)throw new Error(`Expected Source id to be ${X} instead of ${ge.id}`);return ge})(x,Q,G,this),this._tiles={},this._cache=new Gt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qt,this._didEmitContent=!1,this._updated=!1}onAdd(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._maxTileCacheZoomLevels=x?x._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(x)}onRemove(x){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(x)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const x in this._tiles){const Q=this._tiles[x];if(Q.state!=="loaded"&&Q.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(x,Q){return this._source.loadTile(x,Q)}_unloadTile(x){if(this._source.unloadTile)return this._source.unloadTile(x,()=>{})}_abortTile(x){this._source.abortTile&&this._source.abortTile(x,()=>{}),this._source.fire(new D.Event("dataabort",{tile:x,coord:x.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(x){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const Q in this._tiles){const G=this._tiles[Q];G.upload(x),G.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(x=>x.tileID).sort(ri).map(x=>x.key)}getRenderableIds(x){const Q=[];for(const G in this._tiles)this._isIdRenderable(G,x)&&Q.push(this._tiles[G]);return x?Q.sort((G,X)=>{const te=G.tileID,Ae=X.tileID,he=new D.Point(te.canonical.x,te.canonical.y)._rotate(this.transform.angle),ge=new D.Point(Ae.canonical.x,Ae.canonical.y)._rotate(this.transform.angle);return te.overscaledZ-Ae.overscaledZ||ge.y-he.y||ge.x-he.x}).map(G=>G.tileID.key):Q.map(G=>G.tileID).sort(ri).map(G=>G.key)}hasRenderableParent(x){const Q=this.findLoadedParent(x,0);return!!Q&&this._isIdRenderable(Q.tileID.key)}_isIdRenderable(x,Q){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(Q||!this._tiles[x].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const x in this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")}}_reloadTile(x,Q){const G=this._tiles[x];G&&(G.state!=="loading"&&(G.state=Q),this._loadTile(G,this._tileLoaded.bind(this,G,x,Q)))}_tileLoaded(x,Q,G,X){if(X)return x.state="errored",void(X.status!==404?this._source.fire(new D.ErrorEvent(X,{tile:x})):this.update(this.transform,this.terrain));x.timeAdded=D.browser.now(),G==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(Q,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),x.aborted||this._source.fire(new D.Event("data",{dataType:"source",tile:x,coord:x.tileID}))}_backfillDEM(x){const Q=this.getRenderableIds();for(let X=0;X<Q.length;X++){const te=Q[X];if(x.neighboringTiles&&x.neighboringTiles[te]){const Ae=this.getTileByID(te);G(x,Ae),G(Ae,x)}}function G(X,te){X.needsHillshadePrepare=!0,X.needsTerrainPrepare=!0;let Ae=te.tileID.canonical.x-X.tileID.canonical.x;const he=te.tileID.canonical.y-X.tileID.canonical.y,ge=Math.pow(2,X.tileID.canonical.z),ve=te.tileID.key;Ae===0&&he===0||Math.abs(he)>1||(Math.abs(Ae)>1&&(Math.abs(Ae+ge)===1?Ae+=ge:Math.abs(Ae-ge)===1&&(Ae-=ge)),te.dem&&X.dem&&(X.dem.backfillBorder(te.dem,Ae,he),X.neighboringTiles&&X.neighboringTiles[ve]&&(X.neighboringTiles[ve].backfilled=!0)))}}getTile(x){return this.getTileByID(x.key)}getTileByID(x){return this._tiles[x]}_retainLoadedChildren(x,Q,G,X){for(const te in this._tiles){let Ae=this._tiles[te];if(X[te]||!Ae.hasData()||Ae.tileID.overscaledZ<=Q||Ae.tileID.overscaledZ>G)continue;let he=Ae.tileID;for(;Ae&&Ae.tileID.overscaledZ>Q+1;){const ve=Ae.tileID.scaledTo(Ae.tileID.overscaledZ-1);Ae=this._tiles[ve.key],Ae&&Ae.hasData()&&(he=ve)}let ge=he;for(;ge.overscaledZ>Q;)if(ge=ge.scaledTo(ge.overscaledZ-1),x[ge.key]){X[he.key]=he;break}}}findLoadedParent(x,Q){if(x.key in this._loadedParentTiles){const G=this._loadedParentTiles[x.key];return G&&G.tileID.overscaledZ>=Q?G:null}for(let G=x.overscaledZ-1;G>=Q;G--){const X=x.scaledTo(G),te=this._getLoadedTile(X);if(te)return te}}_getLoadedTile(x){const Q=this._tiles[x.key];return Q&&Q.hasData()?Q:this._cache.getByKey(x.wrapped().key)}updateCacheSize(x){const Q=Math.ceil(x.width/this._source.tileSize)+1,G=Math.ceil(x.height/this._source.tileSize)+1,X=Math.floor(Q*G*(this._maxTileCacheZoomLevels===null?D.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),te=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,X):X;this._cache.setMaxSize(te)}handleWrapJump(x){const Q=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,Q){const G={};for(const X in this._tiles){const te=this._tiles[X];te.tileID=te.tileID.unwrapTo(te.tileID.wrap+Q),G[te.tileID.key]=te}this._tiles=G;for(const X in this._timers)clearTimeout(this._timers[X]),delete this._timers[X];for(const X in this._tiles)this._setTileReloadTimer(X,this._tiles[X])}}update(x,Q){if(this.transform=x,this.terrain=Q,!this._sourceLoaded||this._paused)return;let G;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?G=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ce=>new D.OverscaledTileID(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y)):(G=x.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:Q}),this._source.hasTile&&(G=G.filter(Ce=>this._source.hasTile(Ce)))):G=[];const X=x.coveringZoomLevel(this._source),te=Math.max(X-$t.maxOverzooming,this._source.minzoom),Ae=Math.max(X+$t.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ce={};for(const Se of G)if(Se.canonical.z>this._source.minzoom){const Re=Se.scaledTo(Se.canonical.z-1);Ce[Re.key]=Re;const it=Se.scaledTo(Math.max(this._source.minzoom,Math.min(Se.canonical.z,5)));Ce[it.key]=it}G=G.concat(Object.values(Ce))}const he=G.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,he&&this.fire(new D.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ge=this._updateRetainedTiles(G,X);if(ci(this._source.type)){const Ce={},Se={},Re=Object.keys(ge),it=D.browser.now();for(const tt of Re){const at=ge[tt],Je=this._tiles[tt];if(!Je||Je.fadeEndTime!==0&&Je.fadeEndTime<=it)continue;const pt=this.findLoadedParent(at,te);pt&&(this._addTile(pt.tileID),Ce[pt.tileID.key]=pt.tileID),Se[tt]=at}this._retainLoadedChildren(Se,X,Ae,ge);for(const tt in Ce)ge[tt]||(this._coveredTiles[tt]=!0,ge[tt]=Ce[tt]);if(Q){const tt={},at={};for(const Je of G)this._tiles[Je.key].hasData()?tt[Je.key]=Je:at[Je.key]=Je;for(const Je in at){const pt=at[Je].children(this._source.maxzoom);this._tiles[pt[0].key]&&this._tiles[pt[1].key]&&this._tiles[pt[2].key]&&this._tiles[pt[3].key]&&(tt[pt[0].key]=ge[pt[0].key]=pt[0],tt[pt[1].key]=ge[pt[1].key]=pt[1],tt[pt[2].key]=ge[pt[2].key]=pt[2],tt[pt[3].key]=ge[pt[3].key]=pt[3],delete at[Je])}for(const Je in at){const pt=this.findLoadedParent(at[Je],this._source.minzoom);if(pt){tt[pt.tileID.key]=ge[pt.tileID.key]=pt.tileID;for(const Et in tt)tt[Et].isChildOf(pt.tileID)&&delete tt[Et]}}for(const Je in this._tiles)tt[Je]||(this._coveredTiles[Je]=!0)}}for(const Ce in ge)this._tiles[Ce].clearFadeHold();const ve=D.keysDifference(this._tiles,ge);for(const Ce of ve){const Se=this._tiles[Ce];Se.hasSymbolBuckets&&!Se.holdingForFade()?Se.setHoldDuration(this.map._fadeDuration):Se.hasSymbolBuckets&&!Se.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)}_updateRetainedTiles(x,Q){const G={},X={},te=Math.max(Q-$t.maxOverzooming,this._source.minzoom),Ae=Math.max(Q+$t.maxUnderzooming,this._source.minzoom),he={};for(const ge of x){const ve=this._addTile(ge);G[ge.key]=ge,ve.hasData()||Q<this._source.maxzoom&&(he[ge.key]=ge)}this._retainLoadedChildren(he,Q,Ae,G);for(const ge of x){let ve=this._tiles[ge.key];if(ve.hasData())continue;if(Q+1>this._source.maxzoom){const Se=ge.children(this._source.maxzoom)[0],Re=this.getTile(Se);if(Re&&Re.hasData()){G[Se.key]=Se;continue}}else{const Se=ge.children(this._source.maxzoom);if(G[Se[0].key]&&G[Se[1].key]&&G[Se[2].key]&&G[Se[3].key])continue}let Ce=ve.wasRequested();for(let Se=ge.overscaledZ-1;Se>=te;--Se){const Re=ge.scaledTo(Se);if(X[Re.key])break;if(X[Re.key]=!0,ve=this.getTile(Re),!ve&&Ce&&(ve=this._addTile(Re)),ve){const it=ve.hasData();if((Ce||it)&&(G[Re.key]=Re),Ce=ve.wasRequested(),it)break}}}return G}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const x in this._tiles){const Q=[];let G,X=this._tiles[x].tileID;for(;X.overscaledZ>0;){if(X.key in this._loadedParentTiles){G=this._loadedParentTiles[X.key];break}Q.push(X.key);const te=X.scaledTo(X.overscaledZ-1);if(G=this._getLoadedTile(te),G)break;X=te}for(const te of Q)this._loadedParentTiles[te]=G}}_addTile(x){let Q=this._tiles[x.key];if(Q)return Q;Q=this._cache.getAndRemove(x),Q&&(this._setTileReloadTimer(x.key,Q),Q.tileID=x,this._state.initializeTileState(Q,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,Q)));const G=Q;return Q||(Q=new Kt(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(Q,this._tileLoaded.bind(this,Q,x.key,Q.state))),Q.uses++,this._tiles[x.key]=Q,G||this._source.fire(new D.Event("dataloading",{tile:Q,coord:Q.tileID,dataType:"source"})),Q}_setTileReloadTimer(x,Q){x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);const G=Q.getExpiryTimeout();G&&(this._timers[x]=setTimeout(()=>{this._reloadTile(x,"expired"),delete this._timers[x]},G))}_removeTile(x){const Q=this._tiles[x];Q&&(Q.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),Q.uses>0||(Q.hasData()&&Q.state!=="reloading"?this._cache.add(Q.tileID,Q,Q.getExpiryTimeout()):(Q.aborted=!0,this._abortTile(Q),this._unloadTile(Q))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const x in this._tiles)this._removeTile(x);this._cache.reset()}tilesIn(x,Q,G){const X=[],te=this.transform;if(!te)return X;const Ae=G?te.getCameraQueryGeometry(x):x,he=x.map(tt=>te.pointCoordinate(tt,this.terrain)),ge=Ae.map(tt=>te.pointCoordinate(tt,this.terrain)),ve=this.getIds();let Ce=1/0,Se=1/0,Re=-1/0,it=-1/0;for(const tt of ge)Ce=Math.min(Ce,tt.x),Se=Math.min(Se,tt.y),Re=Math.max(Re,tt.x),it=Math.max(it,tt.y);for(let tt=0;tt<ve.length;tt++){const at=this._tiles[ve[tt]];if(at.holdingForFade())continue;const Je=at.tileID,pt=Math.pow(2,te.zoom-at.tileID.overscaledZ),Et=Q*at.queryPadding*D.EXTENT/at.tileSize/pt,At=[Je.getTilePoint(new D.MercatorCoordinate(Ce,Se)),Je.getTilePoint(new D.MercatorCoordinate(Re,it))];if(At[0].x-Et<D.EXTENT&&At[0].y-Et<D.EXTENT&&At[1].x+Et>=0&&At[1].y+Et>=0){const mt=he.map(kt=>Je.getTilePoint(kt)),It=ge.map(kt=>Je.getTilePoint(kt));X.push({tile:at,tileID:Je,queryGeometry:mt,cameraQueryGeometry:It,scale:pt})}}return X}getVisibleCoordinates(x){const Q=this.getRenderableIds(x).map(G=>this._tiles[G].tileID);for(const G of Q)G.posMatrix=this.transform.calculatePosMatrix(G.toUnwrapped());return Q}hasTransition(){if(this._source.hasTransition())return!0;if(ci(this._source.type)){const x=D.browser.now();for(const Q in this._tiles)if(this._tiles[Q].fadeEndTime>=x)return!0}return!1}setFeatureState(x,Q,G){this._state.updateState(x=x||"_geojsonTileLayer",Q,G)}removeFeatureState(x,Q,G){this._state.removeFeatureState(x=x||"_geojsonTileLayer",Q,G)}getFeatureState(x,Q){return this._state.getState(x=x||"_geojsonTileLayer",Q)}setDependencies(x,Q,G){const X=this._tiles[x];X&&X.setDependencies(Q,G)}reloadTilesForDependencies(x,Q){for(const G in this._tiles)this._tiles[G].hasDependency(x,Q)&&this._reloadTile(G,"reloading");this._cache.filter(G=>!G.hasDependency(x,Q))}}function ri(J,x){const Q=Math.abs(2*J.wrap)-+(J.wrap<0),G=Math.abs(2*x.wrap)-+(x.wrap<0);return J.overscaledZ-x.overscaledZ||G-Q||x.canonical.y-J.canonical.y||x.canonical.x-J.canonical.x}function ci(J){return J==="raster"||J==="image"||J==="video"}$t.maxOverzooming=10,$t.maxUnderzooming=3;const Bt="mapboxgl_preloaded_worker_pool";class di{constructor(){this.active={}}acquire(x){if(!this.workers)for(this.workers=[];this.workers.length<di.workerCount;)this.workers.push(new Worker(D.config.WORKER_URL));return this.active[x]=!0,this.workers.slice()}release(x){delete this.active[x],this.numActive()===0&&(this.workers.forEach(Q=>{Q.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Bt]}numActive(){return Object.keys(this.active).length}}const ii=Math.floor(D.browser.hardwareConcurrency/2);let Hi;function Vi(){return Hi||(Hi=new di),Hi}di.workerCount=D.isSafari(globalThis)?Math.max(Math.min(ii,3),1):1;class Ht{constructor(x,Q){this.reset(x,Q)}reset(x,Q){this.points=x||[],this._distances=[0];for(let G=1;G<this.points.length;G++)this._distances[G]=this._distances[G-1]+this.points[G].dist(this.points[G-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Q||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(x){if(this.points.length===1)return this.points[0];x=D.clamp(x,0,1);let Q=1,G=this._distances[Q];const X=x*this.paddedLength+this.padding;for(;G<X&&Q<this._distances.length;)G=this._distances[++Q];const te=Q-1,Ae=this._distances[te],he=G-Ae,ge=he>0?(X-Ae)/he:0;return this.points[te].mult(1-ge).add(this.points[Q].mult(ge))}}function _i(J,x){let Q=!0;return J==="always"||J!=="never"&&x!=="never"||(Q=!1),Q}class Ti{constructor(x,Q,G){const X=this.boxCells=[],te=this.circleCells=[];this.xCellCount=Math.ceil(x/G),this.yCellCount=Math.ceil(Q/G);for(let Ae=0;Ae<this.xCellCount*this.yCellCount;Ae++)X.push([]),te.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=x,this.height=Q,this.xScale=this.xCellCount/x,this.yScale=this.yCellCount/Q,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(x,Q,G,X,te){this._forEachCell(Q,G,X,te,this._insertBoxCell,this.boxUid++),this.boxKeys.push(x),this.bboxes.push(Q),this.bboxes.push(G),this.bboxes.push(X),this.bboxes.push(te)}insertCircle(x,Q,G,X){this._forEachCell(Q-X,G-X,Q+X,G+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(x),this.circles.push(Q),this.circles.push(G),this.circles.push(X)}_insertBoxCell(x,Q,G,X,te,Ae){this.boxCells[te].push(Ae)}_insertCircleCell(x,Q,G,X,te,Ae){this.circleCells[te].push(Ae)}_query(x,Q,G,X,te,Ae,he){if(G<0||x>this.width||X<0||Q>this.height)return[];const ge=[];if(x<=0&&Q<=0&&this.width<=G&&this.height<=X){if(te)return[{key:null,x1:x,y1:Q,x2:G,y2:X}];for(let ve=0;ve<this.boxKeys.length;ve++)ge.push({key:this.boxKeys[ve],x1:this.bboxes[4*ve],y1:this.bboxes[4*ve+1],x2:this.bboxes[4*ve+2],y2:this.bboxes[4*ve+3]});for(let ve=0;ve<this.circleKeys.length;ve++){const Ce=this.circles[3*ve],Se=this.circles[3*ve+1],Re=this.circles[3*ve+2];ge.push({key:this.circleKeys[ve],x1:Ce-Re,y1:Se-Re,x2:Ce+Re,y2:Se+Re})}}else this._forEachCell(x,Q,G,X,this._queryCell,ge,{hitTest:te,overlapMode:Ae,seenUids:{box:{},circle:{}}},he);return ge}query(x,Q,G,X){return this._query(x,Q,G,X,!1,null)}hitTest(x,Q,G,X,te,Ae){return this._query(x,Q,G,X,!0,te,Ae).length>0}hitTestCircle(x,Q,G,X,te){const Ae=x-G,he=x+G,ge=Q-G,ve=Q+G;if(he<0||Ae>this.width||ve<0||ge>this.height)return!1;const Ce=[];return this._forEachCell(Ae,ge,he,ve,this._queryCellCircle,Ce,{hitTest:!0,overlapMode:X,circle:{x,y:Q,radius:G},seenUids:{box:{},circle:{}}},te),Ce.length>0}_queryCell(x,Q,G,X,te,Ae,he,ge){const{seenUids:ve,hitTest:Ce,overlapMode:Se}=he,Re=this.boxCells[te];if(Re!==null){const tt=this.bboxes;for(const at of Re)if(!ve.box[at]){ve.box[at]=!0;const Je=4*at,pt=this.boxKeys[at];if(x<=tt[Je+2]&&Q<=tt[Je+3]&&G>=tt[Je+0]&&X>=tt[Je+1]&&(!ge||ge(pt))&&(!Ce||!_i(Se,pt.overlapMode))&&(Ae.push({key:pt,x1:tt[Je],y1:tt[Je+1],x2:tt[Je+2],y2:tt[Je+3]}),Ce))return!0}}const it=this.circleCells[te];if(it!==null){const tt=this.circles;for(const at of it)if(!ve.circle[at]){ve.circle[at]=!0;const Je=3*at,pt=this.circleKeys[at];if(this._circleAndRectCollide(tt[Je],tt[Je+1],tt[Je+2],x,Q,G,X)&&(!ge||ge(pt))&&(!Ce||!_i(Se,pt.overlapMode))){const Et=tt[Je],At=tt[Je+1],mt=tt[Je+2];if(Ae.push({key:pt,x1:Et-mt,y1:At-mt,x2:Et+mt,y2:At+mt}),Ce)return!0}}}return!1}_queryCellCircle(x,Q,G,X,te,Ae,he,ge){const{circle:ve,seenUids:Ce,overlapMode:Se}=he,Re=this.boxCells[te];if(Re!==null){const tt=this.bboxes;for(const at of Re)if(!Ce.box[at]){Ce.box[at]=!0;const Je=4*at,pt=this.boxKeys[at];if(this._circleAndRectCollide(ve.x,ve.y,ve.radius,tt[Je+0],tt[Je+1],tt[Je+2],tt[Je+3])&&(!ge||ge(pt))&&!_i(Se,pt.overlapMode))return Ae.push(!0),!0}}const it=this.circleCells[te];if(it!==null){const tt=this.circles;for(const at of it)if(!Ce.circle[at]){Ce.circle[at]=!0;const Je=3*at,pt=this.circleKeys[at];if(this._circlesCollide(tt[Je],tt[Je+1],tt[Je+2],ve.x,ve.y,ve.radius)&&(!ge||ge(pt))&&!_i(Se,pt.overlapMode))return Ae.push(!0),!0}}}_forEachCell(x,Q,G,X,te,Ae,he,ge){const ve=this._convertToXCellCoord(x),Ce=this._convertToYCellCoord(Q),Se=this._convertToXCellCoord(G),Re=this._convertToYCellCoord(X);for(let it=ve;it<=Se;it++)for(let tt=Ce;tt<=Re;tt++)if(te.call(this,x,Q,G,X,this.xCellCount*tt+it,Ae,he,ge))return}_convertToXCellCoord(x){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(x*this.xScale)))}_convertToYCellCoord(x){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(x*this.yScale)))}_circlesCollide(x,Q,G,X,te,Ae){const he=X-x,ge=te-Q,ve=G+Ae;return ve*ve>he*he+ge*ge}_circleAndRectCollide(x,Q,G,X,te,Ae,he){const ge=(Ae-X)/2,ve=Math.abs(x-(X+ge));if(ve>ge+G)return!1;const Ce=(he-te)/2,Se=Math.abs(Q-(te+Ce));if(Se>Ce+G)return!1;if(ve<=ge||Se<=Ce)return!0;const Re=ve-ge,it=Se-Ce;return Re*Re+it*it<=G*G}}function Wi(J,x,Q,G,X){const te=D.create();return x?(D.scale(te,te,[1/X,1/X,1]),Q||D.rotateZ(te,te,G.angle)):D.multiply(te,G.labelPlaneMatrix,J),te}function Zt(J,x,Q,G,X){if(x){const te=D.clone(J);return D.scale(te,te,[X,X,1]),Q||D.rotateZ(te,te,-G.angle),te}return G.glCoordMatrix}function mi(J,x,Q){let G;Q?(G=[J.x,J.y,Q(J.x,J.y),1],D.transformMat4(G,G,x)):(G=[J.x,J.y,0,1],Be(G,G,x));const X=G[3];return{point:new D.Point(G[0]/X,G[1]/X),signedDistanceFromCamera:X}}function wi(J,x){return .5+J/x*.5}function $i(J,x){const Q=J[0]/J[3],G=J[1]/J[3];return Q>=-x[0]&&Q<=x[0]&&G>=-x[1]&&G<=x[1]}function tr(J,x,Q,G,X,te,Ae,he,ge,ve){const Ce=G?J.textSizeData:J.iconSizeData,Se=D.evaluateSizeForZoom(Ce,Q.transform.zoom),Re=[256/Q.width*2+1,256/Q.height*2+1],it=G?J.text.dynamicLayoutVertexArray:J.icon.dynamicLayoutVertexArray;it.clear();const tt=J.lineVertexArray,at=G?J.text.placedSymbolArray:J.icon.placedSymbolArray,Je=Q.transform.width/Q.transform.height;let pt=!1;for(let Et=0;Et<at.length;Et++){const At=at.get(Et);if(At.hidden||At.writingMode===D.WritingMode.vertical&&!pt){ye(At.numGlyphs,it);continue}let mt;if(pt=!1,ve?(mt=[At.anchorX,At.anchorY,ve(At.anchorX,At.anchorY),1],D.transformMat4(mt,mt,x)):(mt=[At.anchorX,At.anchorY,0,1],Be(mt,mt,x)),!$i(mt,Re)){ye(At.numGlyphs,it);continue}const It=wi(Q.transform.cameraToCenterDistance,mt[3]),kt=D.evaluateSizeForFeature(Ce,Se,At),Ot=Ae?kt/It:kt*It,Wt=new D.Point(At.anchorX,At.anchorY),zt=mi(Wt,X,ve).point,Jt={projections:{},offsets:{}},Bi=ji(At,Ot,!1,he,x,X,te,J.glyphOffsetArray,tt,it,zt,Wt,Jt,Je,ge,ve);pt=Bi.useVertical,(Bi.notEnoughRoom||pt||Bi.needsFlipping&&ji(At,Ot,!0,he,x,X,te,J.glyphOffsetArray,tt,it,zt,Wt,Jt,Je,ge,ve).notEnoughRoom)&&ye(At.numGlyphs,it)}G?J.text.dynamicLayoutVertexBuffer.updateData(it):J.icon.dynamicLayoutVertexBuffer.updateData(it)}function Ar(J,x,Q,G,X,te,Ae,he,ge,ve,Ce,Se,Re){const it=he.glyphStartIndex+he.numGlyphs,tt=he.lineStartIndex,at=he.lineStartIndex+he.lineLength,Je=x.getoffsetX(he.glyphStartIndex),pt=x.getoffsetX(it-1),Et=Ie(J*Je,Q,G,X,te,Ae,he.segment,tt,at,ge,ve,Ce,Se,Re);if(!Et)return null;const At=Ie(J*pt,Q,G,X,te,Ae,he.segment,tt,at,ge,ve,Ce,Se,Re);return At?{first:Et,last:At}:null}function Tr(J,x,Q,G){return J===D.WritingMode.horizontal&&Math.abs(Q.y-x.y)>Math.abs(Q.x-x.x)*G?{useVertical:!0}:(J===D.WritingMode.vertical?x.y<Q.y:x.x>Q.x)?{needsFlipping:!0}:null}function ji(J,x,Q,G,X,te,Ae,he,ge,ve,Ce,Se,Re,it,tt,at){const Je=x/24,pt=J.lineOffsetX*Je,Et=J.lineOffsetY*Je;let At;if(J.numGlyphs>1){const mt=J.glyphStartIndex+J.numGlyphs,It=J.lineStartIndex,kt=J.lineStartIndex+J.lineLength,Ot=Ar(Je,he,pt,Et,Q,Ce,Se,J,ge,te,Re,tt,at);if(!Ot)return{notEnoughRoom:!0};const Wt=mi(Ot.first.point,Ae,at).point,zt=mi(Ot.last.point,Ae,at).point;if(G&&!Q){const Jt=Tr(J.writingMode,Wt,zt,it);if(Jt)return Jt}At=[Ot.first];for(let Jt=J.glyphStartIndex+1;Jt<mt-1;Jt++)At.push(Ie(Je*he.getoffsetX(Jt),pt,Et,Q,Ce,Se,J.segment,It,kt,ge,te,Re,tt,at));At.push(Ot.last)}else{if(G&&!Q){const It=mi(Se,X,at).point,kt=J.lineStartIndex+J.segment+1,Ot=new D.Point(ge.getx(kt),ge.gety(kt)),Wt=mi(Ot,X,at),zt=Wt.signedDistanceFromCamera>0?Wt.point:Ii(Se,Ot,It,1,X,at),Jt=Tr(J.writingMode,It,zt,it);if(Jt)return Jt}const mt=Ie(Je*he.getoffsetX(J.glyphStartIndex),pt,Et,Q,Ce,Se,J.segment,J.lineStartIndex,J.lineStartIndex+J.lineLength,ge,te,Re,tt,at);if(!mt)return{notEnoughRoom:!0};At=[mt]}for(const mt of At)D.addDynamicAttributes(ve,mt.point,mt.angle);return{}}function Ii(J,x,Q,G,X,te){const Ae=mi(J.add(J.sub(x)._unit()),X,te).point,he=Q.sub(Ae);return Q.add(he._mult(G/he.mag()))}function Qs(J,x){const{projectionCache:Q,lineVertexArray:G,labelPlaneMatrix:X,tileAnchorPoint:te,distanceFromAnchor:Ae,getElevation:he,previousVertex:ge,direction:ve,absOffsetX:Ce}=x;if(Q.projections[J])return Q.projections[J];const Se=new D.Point(G.getx(J),G.gety(J)),Re=mi(Se,X,he);if(Re.signedDistanceFromCamera>0)return Q.projections[J]=Re.point,Re.point;const it=J-ve;return Ii(Ae===0?te:new D.Point(G.getx(it),G.gety(it)),Se,ge,Ce-Ae+1,X,he)}function $r(J,x,Q){return J._unit()._perp()._mult(x*Q)}function nt(J,x,Q,G,X,te,Ae,he){const{projectionCache:ge,direction:ve}=he;if(ge.offsets[J])return ge.offsets[J];const Ce=Q.add(x);if(J+ve<G||J+ve>=X)return ge.offsets[J]=Ce,Ce;const Se=Qs(J+ve,he),Re=$r(Se.sub(Q),Ae,ve),it=Q.add(Re),tt=Se.add(Re);return ge.offsets[J]=D.findLineIntersection(te,Ce,it,tt)||Ce,ge.offsets[J]}function Ie(J,x,Q,G,X,te,Ae,he,ge,ve,Ce,Se,Re,it){const tt=G?J-x:J+x;let at=tt>0?1:-1,Je=0;G&&(at*=-1,Je=Math.PI),at<0&&(Je+=Math.PI);let pt,Et,At=at>0?he+Ae:he+Ae+1,mt=X,It=X,kt=0,Ot=0;const Wt=Math.abs(tt),zt=[];let Jt;for(;kt+Ot<=Wt;){if(At+=at,At<he||At>=ge)return null;kt+=Ot,It=mt,Et=pt;const oi={projectionCache:Se,lineVertexArray:ve,labelPlaneMatrix:Ce,tileAnchorPoint:te,distanceFromAnchor:kt,getElevation:it,previousVertex:It,direction:at,absOffsetX:Wt};if(mt=Qs(At,oi),Q===0)zt.push(It),Jt=mt.sub(It);else{let ki;const xi=mt.sub(It);ki=xi.mag()===0?$r(Qs(At+at,oi).sub(mt),Q,at):$r(xi,Q,at),Et||(Et=It.add(ki)),pt=nt(At,ki,mt,he,ge,Et,Q,oi),zt.push(Et),Jt=pt.sub(Et)}Ot=Jt.mag()}const Bi=Jt._mult((Wt-kt)/Ot)._add(Et||It),ar=Je+Math.atan2(mt.y-It.y,mt.x-It.x);return zt.push(Bi),{point:Bi,angle:Re?ar:0,path:zt}}const ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ye(J,x){for(let Q=0;Q<J;Q++){const G=x.length;x.resize(G+4),x.float32.set(ce,3*G)}}function Be(J,x,Q){const G=x[0],X=x[1];return J[0]=Q[0]*G+Q[4]*X+Q[12],J[1]=Q[1]*G+Q[5]*X+Q[13],J[3]=Q[3]*G+Q[7]*X+Q[15],J}const Pe=100;class qe{constructor(x,Q=new Ti(x.width+200,x.height+200,25),G=new Ti(x.width+200,x.height+200,25)){this.transform=x,this.grid=Q,this.ignoredGrid=G,this.pitchfactor=Math.cos(x._pitch)*x.cameraToCenterDistance,this.screenRightBoundary=x.width+Pe,this.screenBottomBoundary=x.height+Pe,this.gridRightBoundary=x.width+200,this.gridBottomBoundary=x.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(x,Q,G,X,te,Ae){const he=this.projectAndGetPerspectiveRatio(X,x.anchorPointX,x.anchorPointY,Ae),ge=G*he.perspectiveRatio,ve=x.x1*ge+he.point.x,Ce=x.y1*ge+he.point.y,Se=x.x2*ge+he.point.x,Re=x.y2*ge+he.point.y;return!this.isInsideGrid(ve,Ce,Se,Re)||Q!=="always"&&this.grid.hitTest(ve,Ce,Se,Re,Q,te)||he.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ve,Ce,Se,Re],offscreen:this.isOffscreen(ve,Ce,Se,Re)}}placeCollisionCircles(x,Q,G,X,te,Ae,he,ge,ve,Ce,Se,Re,it,tt){const at=[],Je=new D.Point(Q.anchorX,Q.anchorY),pt=mi(Je,Ae,tt),Et=wi(this.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),At=(Ce?te/Et:te*Et)/D.ONE_EM,mt=mi(Je,he,tt).point,It=Ar(At,X,Q.lineOffsetX*At,Q.lineOffsetY*At,!1,mt,Je,Q,G,he,{projections:{},offsets:{}},!1,tt);let kt=!1,Ot=!1,Wt=!0;if(It){const zt=.5*Re*Et+it,Jt=new D.Point(-100,-100),Bi=new D.Point(this.screenRightBoundary,this.screenBottomBoundary),ar=new Ht,oi=It.first,ki=It.last;let xi=[];for(let Mi=oi.path.length-1;Mi>=1;Mi--)xi.push(oi.path[Mi]);for(let Mi=1;Mi<ki.path.length;Mi++)xi.push(ki.path[Mi]);const Hr=2.5*zt;if(ge){const Mi=xi.map(lr=>mi(lr,ge,tt));xi=Mi.some(lr=>lr.signedDistanceFromCamera<=0)?[]:Mi.map(lr=>lr.point)}let or=[];if(xi.length>0){const Mi=xi[0].clone(),lr=xi[0].clone();for(let Kr=1;Kr<xi.length;Kr++)Mi.x=Math.min(Mi.x,xi[Kr].x),Mi.y=Math.min(Mi.y,xi[Kr].y),lr.x=Math.max(lr.x,xi[Kr].x),lr.y=Math.max(lr.y,xi[Kr].y);or=Mi.x>=Jt.x&&lr.x<=Bi.x&&Mi.y>=Jt.y&&lr.y<=Bi.y?[xi]:lr.x<Jt.x||Mi.x>Bi.x||lr.y<Jt.y||Mi.y>Bi.y?[]:D.clipLine([xi],Jt.x,Jt.y,Bi.x,Bi.y)}for(const Mi of or){ar.reset(Mi,.25*zt);let lr=0;lr=ar.length<=.5*zt?1:Math.ceil(ar.paddedLength/Hr)+1;for(let Kr=0;Kr<lr;Kr++){const kr=Kr/Math.max(lr-1,1),rn=ar.lerp(kr),bs=rn.x+Pe,Zr=rn.y+Pe;at.push(bs,Zr,zt,0);const Vs=bs-zt,Un=Zr-zt,wn=bs+zt,Mn=Zr+zt;if(Wt=Wt&&this.isOffscreen(Vs,Un,wn,Mn),Ot=Ot||this.isInsideGrid(Vs,Un,wn,Mn),x!=="always"&&this.grid.hitTestCircle(bs,Zr,zt,x,Se)&&(kt=!0,!ve))return{circles:[],offscreen:!1,collisionDetected:kt}}}}return{circles:!ve&&kt||!Ot||Et<this.perspectiveRatioCutoff?[]:at,offscreen:Wt,collisionDetected:kt}}queryRenderedSymbols(x){if(x.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const Q=[];let G=1/0,X=1/0,te=-1/0,Ae=-1/0;for(const Ce of x){const Se=new D.Point(Ce.x+Pe,Ce.y+Pe);G=Math.min(G,Se.x),X=Math.min(X,Se.y),te=Math.max(te,Se.x),Ae=Math.max(Ae,Se.y),Q.push(Se)}const he=this.grid.query(G,X,te,Ae).concat(this.ignoredGrid.query(G,X,te,Ae)),ge={},ve={};for(const Ce of he){const Se=Ce.key;if(ge[Se.bucketInstanceId]===void 0&&(ge[Se.bucketInstanceId]={}),ge[Se.bucketInstanceId][Se.featureIndex])continue;const Re=[new D.Point(Ce.x1,Ce.y1),new D.Point(Ce.x2,Ce.y1),new D.Point(Ce.x2,Ce.y2),new D.Point(Ce.x1,Ce.y2)];D.polygonIntersectsPolygon(Q,Re)&&(ge[Se.bucketInstanceId][Se.featureIndex]=!0,ve[Se.bucketInstanceId]===void 0&&(ve[Se.bucketInstanceId]=[]),ve[Se.bucketInstanceId].push(Se.featureIndex))}return ve}insertCollisionBox(x,Q,G,X,te,Ae){(G?this.ignoredGrid:this.grid).insert({bucketInstanceId:X,featureIndex:te,collisionGroupID:Ae,overlapMode:Q},x[0],x[1],x[2],x[3])}insertCollisionCircles(x,Q,G,X,te,Ae){const he=G?this.ignoredGrid:this.grid,ge={bucketInstanceId:X,featureIndex:te,collisionGroupID:Ae,overlapMode:Q};for(let ve=0;ve<x.length;ve+=4)he.insertCircle(ge,x[ve],x[ve+1],x[ve+2])}projectAndGetPerspectiveRatio(x,Q,G,X){let te;return X?(te=[Q,G,X(Q,G),1],D.transformMat4(te,te,x)):(te=[Q,G,0,1],Be(te,te,x)),{point:new D.Point((te[0]/te[3]+1)/2*this.transform.width+Pe,(-te[1]/te[3]+1)/2*this.transform.height+Pe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/te[3]*.5}}isOffscreen(x,Q,G,X){return G<Pe||x>=this.screenRightBoundary||X<Pe||Q>this.screenBottomBoundary}isInsideGrid(x,Q,G,X){return G>=0&&x<this.gridRightBoundary&&X>=0&&Q<this.gridBottomBoundary}getViewportMatrix(){const x=D.identity([]);return D.translate(x,x,[-100,-100,0]),x}}function Oe(J,x,Q){return x*(D.EXTENT/(J.tileSize*Math.pow(2,Q-J.tileID.overscaledZ)))}class Ge{constructor(x,Q,G,X){this.opacity=x?Math.max(0,Math.min(1,x.opacity+(x.placed?Q:-Q))):X&&G?1:0,this.placed=G}isHidden(){return this.opacity===0&&!this.placed}}class ot{constructor(x,Q,G,X,te){this.text=new Ge(x?x.text:null,Q,G,te),this.icon=new Ge(x?x.icon:null,Q,X,te)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class vt{constructor(x,Q,G){this.text=x,this.icon=Q,this.skipFade=G}}class Ct{constructor(){this.invProjMatrix=D.create(),this.viewportMatrix=D.create(),this.circles=[]}}class Ut{constructor(x,Q,G,X,te){this.bucketInstanceId=x,this.featureIndex=Q,this.sourceLayerIndex=G,this.bucketIndex=X,this.tileID=te}}class ai{constructor(x){this.crossSourceCollisions=x,this.maxGroupID=0,this.collisionGroups={}}get(x){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[x]){const Q=++this.maxGroupID;this.collisionGroups[x]={ID:Q,predicate:G=>G.collisionGroupID===Q}}return this.collisionGroups[x]}}function Di(J,x,Q,G,X){const{horizontalAlign:te,verticalAlign:Ae}=D.getAnchorAlignment(J);return new D.Point(-(te-.5)*x+G[0]*X,-(Ae-.5)*Q+G[1]*X)}function ni(J,x,Q,G,X,te){const{x1:Ae,x2:he,y1:ge,y2:ve,anchorPointX:Ce,anchorPointY:Se}=J,Re=new D.Point(x,Q);return G&&Re._rotate(X?te:-te),{x1:Ae+Re.x,y1:ge+Re.y,x2:he+Re.x,y2:ve+Re.y,anchorPointX:Ce,anchorPointY:Se}}class ei{constructor(x,Q,G,X,te){this.transform=x.clone(),this.terrain=Q,this.collisionIndex=new qe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new ai(X),this.collisionCircleArrays={},this.prevPlacement=te,te&&(te.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(x,Q,G,X){const te=G.getBucket(Q),Ae=G.latestFeatureIndex;if(!te||!Ae||Q.id!==te.layerIds[0])return;const he=G.collisionBoxArray,ge=te.layers[0].layout,ve=Math.pow(2,this.transform.zoom-G.tileID.overscaledZ),Ce=G.tileSize/D.EXTENT,Se=this.transform.calculatePosMatrix(G.tileID.toUnwrapped()),Re=ge.get("text-pitch-alignment")==="map",it=ge.get("text-rotation-alignment")==="map",tt=Oe(G,1,this.transform.zoom),at=Wi(Se,Re,it,this.transform,tt);let Je=null;if(Re){const Et=Zt(Se,Re,it,this.transform,tt);Je=D.multiply([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[te.bucketInstanceId]=new Ut(te.bucketInstanceId,Ae,te.sourceLayerIndex,te.index,G.tileID);const pt={bucket:te,layout:ge,posMatrix:Se,textLabelPlaneMatrix:at,labelToScreenMatrix:Je,scale:ve,textPixelRatio:Ce,holdingForFade:G.holdingForFade(),collisionBoxArray:he,partiallyEvaluatedTextSize:D.evaluateSizeForZoom(te.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(te.sourceID)};if(X)for(const Et of te.sortKeyRanges){const{sortKey:At,symbolInstanceStart:mt,symbolInstanceEnd:It}=Et;x.push({sortKey:At,symbolInstanceStart:mt,symbolInstanceEnd:It,parameters:pt})}else x.push({symbolInstanceStart:0,symbolInstanceEnd:te.symbolInstances.length,parameters:pt})}attemptAnchorPlacement(x,Q,G,X,te,Ae,he,ge,ve,Ce,Se,Re,it,tt,at,Je){const pt=D.TextAnchorEnum[x.textAnchor],Et=[x.textOffset0,x.textOffset1],At=Di(pt,G,X,Et,te),mt=this.collisionIndex.placeCollisionBox(ni(Q,At.x,At.y,Ae,he,this.transform.angle),Se,ge,ve,Ce.predicate,Je);if((!at||this.collisionIndex.placeCollisionBox(ni(at,At.x,At.y,Ae,he,this.transform.angle),Se,ge,ve,Ce.predicate,Je).box.length!==0)&&mt.box.length>0){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Re.crossTileID]&&this.prevPlacement.placements[Re.crossTileID]&&this.prevPlacement.placements[Re.crossTileID].text&&(It=this.prevPlacement.variableOffsets[Re.crossTileID].anchor),Re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Re.crossTileID]={textOffset:Et,width:G,height:X,anchor:pt,textBoxScale:te,prevAnchor:It},this.markUsedJustification(it,pt,Re,tt),it.allowVerticalPlacement&&(this.markUsedOrientation(it,tt,Re),this.placedOrientations[Re.crossTileID]=tt),{shift:At,placedGlyphBoxes:mt}}}placeLayerBucketPart(x,Q,G){const{bucket:X,layout:te,posMatrix:Ae,textLabelPlaneMatrix:he,labelToScreenMatrix:ge,textPixelRatio:ve,holdingForFade:Ce,collisionBoxArray:Se,partiallyEvaluatedTextSize:Re,collisionGroup:it}=x.parameters,tt=te.get("text-optional"),at=te.get("icon-optional"),Je=D.getOverlapMode(te,"text-overlap","text-allow-overlap"),pt=Je==="always",Et=D.getOverlapMode(te,"icon-overlap","icon-allow-overlap"),At=Et==="always",mt=te.get("text-rotation-alignment")==="map",It=te.get("text-pitch-alignment")==="map",kt=te.get("icon-text-fit")!=="none",Ot=te.get("symbol-z-order")==="viewport-y",Wt=pt&&(At||!X.hasIconData()||at),zt=At&&(pt||!X.hasTextData()||tt);!X.collisionArrays&&Se&&X.deserializeCollisionBoxes(Se);const Jt=this.retainedQueryData[X.bucketInstanceId].tileID,Bi=this.terrain?(oi,ki)=>this.terrain.getElevation(Jt,oi,ki):null,ar=(oi,ki)=>{var xi,Hr;if(Q[oi.crossTileID])return;if(Ce)return void(this.placements[oi.crossTileID]=new vt(!1,!1,!1));let or=!1,Mi=!1,lr=!0,Kr=null,kr={box:null,offscreen:null},rn={box:null},bs=null,Zr=null,Vs=null,Un=0,wn=0,Mn=0;ki.textFeatureIndex?Un=ki.textFeatureIndex:oi.useRuntimeCollisionCircles&&(Un=oi.featureIndex),ki.verticalTextFeatureIndex&&(wn=ki.verticalTextFeatureIndex);const fo=ki.textBox;if(fo){const is=hs=>{let as=D.WritingMode.horizontal;if(X.allowVerticalPlacement&&!hs&&this.prevPlacement){const Es=this.prevPlacement.placedOrientations[oi.crossTileID];Es&&(this.placedOrientations[oi.crossTileID]=Es,as=Es,this.markUsedOrientation(X,as,oi))}return as},cs=(hs,as)=>{if(X.allowVerticalPlacement&&oi.numVerticalGlyphVertices>0&&ki.verticalTextBox){for(const Es of X.writingModes)if(Es===D.WritingMode.vertical?(kr=as(),rn=kr):kr=hs(),kr&&kr.box&&kr.box.length)break}else kr=hs()},Cs=oi.textAnchorOffsetStartIndex,po=oi.textAnchorOffsetEndIndex;if(po===Cs){const hs=(as,Es)=>{const Gr=this.collisionIndex.placeCollisionBox(as,Je,ve,Ae,it.predicate,Bi);return Gr&&Gr.box&&Gr.box.length&&(this.markUsedOrientation(X,Es,oi),this.placedOrientations[oi.crossTileID]=Es),Gr};cs(()=>hs(fo,D.WritingMode.horizontal),()=>{const as=ki.verticalTextBox;return X.allowVerticalPlacement&&oi.numVerticalGlyphVertices>0&&as?hs(as,D.WritingMode.vertical):{box:null,offscreen:null}}),is(kr&&kr.box&&kr.box.length)}else{let hs=D.TextAnchorEnum[(Hr=(xi=this.prevPlacement)===null||xi===void 0?void 0:xi.variableOffsets[oi.crossTileID])===null||Hr===void 0?void 0:Hr.anchor];const as=(Gr,Yn,bn)=>{const ma=Gr.x2-Gr.x1,Gl=Gr.y2-Gr.y1,Ka=oi.textBoxScale,fA=kt&&Et==="never"?Yn:null;let Ga={box:[],offscreen:!1},Xr=Je==="never"?1:2,sl="never";hs&&Xr++;for(let Cl=0;Cl<Xr;Cl++){for(let jn=Cs;jn<po;jn++){const _a=X.textAnchorOffsets.get(jn);if(hs&&_a.textAnchor!==hs)continue;const go=this.attemptAnchorPlacement(_a,Gr,ma,Gl,Ka,mt,It,ve,Ae,it,sl,oi,X,bn,fA,Bi);if(go&&(Ga=go.placedGlyphBoxes,Ga&&Ga.box&&Ga.box.length))return or=!0,Kr=go.shift,Ga}hs?hs=null:sl=Je}return Ga};cs(()=>as(fo,ki.iconBox,D.WritingMode.horizontal),()=>{const Gr=ki.verticalTextBox;return X.allowVerticalPlacement&&!(kr&&kr.box&&kr.box.length)&&oi.numVerticalGlyphVertices>0&&Gr?as(Gr,ki.verticalIconBox,D.WritingMode.vertical):{box:null,offscreen:null}}),kr&&(or=kr.box,lr=kr.offscreen);const Es=is(kr&&kr.box);if(!or&&this.prevPlacement){const Gr=this.prevPlacement.variableOffsets[oi.crossTileID];Gr&&(this.variableOffsets[oi.crossTileID]=Gr,this.markUsedJustification(X,Gr.anchor,oi,Es))}}}if(bs=kr,or=bs&&bs.box&&bs.box.length>0,lr=bs&&bs.offscreen,oi.useRuntimeCollisionCircles){const is=X.text.placedSymbolArray.get(oi.centerJustifiedTextSymbolIndex),cs=D.evaluateSizeForFeature(X.textSizeData,Re,is),Cs=te.get("text-padding");Zr=this.collisionIndex.placeCollisionCircles(Je,is,X.lineVertexArray,X.glyphOffsetArray,cs,Ae,he,ge,G,It,it.predicate,oi.collisionCircleDiameter,Cs,Bi),Zr.circles.length&&Zr.collisionDetected&&!G&&D.warnOnce("Collisions detected, but collision boxes are not shown"),or=pt||Zr.circles.length>0&&!Zr.collisionDetected,lr=lr&&Zr.offscreen}if(ki.iconFeatureIndex&&(Mn=ki.iconFeatureIndex),ki.iconBox){const is=cs=>{const Cs=kt&&Kr?ni(cs,Kr.x,Kr.y,mt,It,this.transform.angle):cs;return this.collisionIndex.placeCollisionBox(Cs,Et,ve,Ae,it.predicate,Bi)};rn&&rn.box&&rn.box.length&&ki.verticalIconBox?(Vs=is(ki.verticalIconBox),Mi=Vs.box.length>0):(Vs=is(ki.iconBox),Mi=Vs.box.length>0),lr=lr&&Vs.offscreen}const ga=tt||oi.numHorizontalGlyphVertices===0&&oi.numVerticalGlyphVertices===0,Xn=at||oi.numIconVertices===0;if(ga||Xn?Xn?ga||(Mi=Mi&&or):or=Mi&&or:Mi=or=Mi&&or,or&&bs&&bs.box&&this.collisionIndex.insertCollisionBox(bs.box,Je,te.get("text-ignore-placement"),X.bucketInstanceId,rn&&rn.box&&wn?wn:Un,it.ID),Mi&&Vs&&this.collisionIndex.insertCollisionBox(Vs.box,Et,te.get("icon-ignore-placement"),X.bucketInstanceId,Mn,it.ID),Zr&&(or&&this.collisionIndex.insertCollisionCircles(Zr.circles,Je,te.get("text-ignore-placement"),X.bucketInstanceId,Un,it.ID),G)){const is=X.bucketInstanceId;let cs=this.collisionCircleArrays[is];cs===void 0&&(cs=this.collisionCircleArrays[is]=new Ct);for(let Cs=0;Cs<Zr.circles.length;Cs+=4)cs.circles.push(Zr.circles[Cs+0]),cs.circles.push(Zr.circles[Cs+1]),cs.circles.push(Zr.circles[Cs+2]),cs.circles.push(Zr.collisionDetected?1:0)}if(oi.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(X.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[oi.crossTileID]=new vt(or||Wt,Mi||zt,lr||X.justReloaded),Q[oi.crossTileID]=!0};if(Ot){if(x.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const oi=X.getSortedSymbolIndexes(this.transform.angle);for(let ki=oi.length-1;ki>=0;--ki){const xi=oi[ki];ar(X.symbolInstances.get(xi),X.collisionArrays[xi])}}else for(let oi=x.symbolInstanceStart;oi<x.symbolInstanceEnd;oi++)ar(X.symbolInstances.get(oi),X.collisionArrays[oi]);if(G&&X.bucketInstanceId in this.collisionCircleArrays){const oi=this.collisionCircleArrays[X.bucketInstanceId];D.invert(oi.invProjMatrix,Ae),oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}X.justReloaded=!1}markUsedJustification(x,Q,G,X){let te;te=X===D.WritingMode.vertical?G.verticalPlacedTextSymbolIndex:{left:G.leftJustifiedTextSymbolIndex,center:G.centerJustifiedTextSymbolIndex,right:G.rightJustifiedTextSymbolIndex}[D.getAnchorJustification(Q)];const Ae=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex,G.verticalPlacedTextSymbolIndex];for(const he of Ae)he>=0&&(x.text.placedSymbolArray.get(he).crossTileID=te>=0&&he!==te?0:G.crossTileID)}markUsedOrientation(x,Q,G){const X=Q===D.WritingMode.horizontal||Q===D.WritingMode.horizontalOnly?Q:0,te=Q===D.WritingMode.vertical?Q:0,Ae=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex];for(const he of Ae)x.text.placedSymbolArray.get(he).placedOrientation=X;G.verticalPlacedTextSymbolIndex&&(x.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).placedOrientation=te)}commit(x){this.commitTime=x,this.zoomAtLastRecencyCheck=this.transform.zoom;const Q=this.prevPlacement;let G=!1;this.prevZoomAdjustment=Q?Q.zoomAdjustment(this.transform.zoom):0;const X=Q?Q.symbolFadeChange(x):1,te=Q?Q.opacities:{},Ae=Q?Q.variableOffsets:{},he=Q?Q.placedOrientations:{};for(const ge in this.placements){const ve=this.placements[ge],Ce=te[ge];Ce?(this.opacities[ge]=new ot(Ce,X,ve.text,ve.icon),G=G||ve.text!==Ce.text.placed||ve.icon!==Ce.icon.placed):(this.opacities[ge]=new ot(null,X,ve.text,ve.icon,ve.skipFade),G=G||ve.text||ve.icon)}for(const ge in te){const ve=te[ge];if(!this.opacities[ge]){const Ce=new ot(ve,X,!1,!1);Ce.isHidden()||(this.opacities[ge]=Ce,G=G||ve.text.placed||ve.icon.placed)}}for(const ge in Ae)this.variableOffsets[ge]||!this.opacities[ge]||this.opacities[ge].isHidden()||(this.variableOffsets[ge]=Ae[ge]);for(const ge in he)this.placedOrientations[ge]||!this.opacities[ge]||this.opacities[ge].isHidden()||(this.placedOrientations[ge]=he[ge]);if(Q&&Q.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");G?this.lastPlacementChangeTime=x:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=Q?Q.lastPlacementChangeTime:x)}updateLayerOpacities(x,Q){const G={};for(const X of Q){const te=X.getBucket(x);te&&X.latestFeatureIndex&&x.id===te.layerIds[0]&&this.updateBucketOpacities(te,G,X.collisionBoxArray)}}updateBucketOpacities(x,Q,G){x.hasTextData()&&(x.text.opacityVertexArray.clear(),x.text.hasVisibleVertices=!1),x.hasIconData()&&(x.icon.opacityVertexArray.clear(),x.icon.hasVisibleVertices=!1),x.hasIconCollisionBoxData()&&x.iconCollisionBox.collisionVertexArray.clear(),x.hasTextCollisionBoxData()&&x.textCollisionBox.collisionVertexArray.clear();const X=x.layers[0],te=X.layout,Ae=new ot(null,0,!1,!1,!0),he=te.get("text-allow-overlap"),ge=te.get("icon-allow-overlap"),ve=X._unevaluatedLayout.hasValue("text-variable-anchor")||X._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ce=te.get("text-rotation-alignment")==="map",Se=te.get("text-pitch-alignment")==="map",Re=te.get("icon-text-fit")!=="none",it=new ot(null,0,he&&(ge||!x.hasIconData()||te.get("icon-optional")),ge&&(he||!x.hasTextData()||te.get("text-optional")),!0);!x.collisionArrays&&G&&(x.hasIconCollisionBoxData()||x.hasTextCollisionBoxData())&&x.deserializeCollisionBoxes(G);const tt=(at,Je,pt)=>{for(let Et=0;Et<Je/4;Et++)at.opacityVertexArray.emplaceBack(pt);at.hasVisibleVertices=at.hasVisibleVertices||pt!==Zi};for(let at=0;at<x.symbolInstances.length;at++){const Je=x.symbolInstances.get(at),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:Et,crossTileID:At}=Je;let mt=this.opacities[At];Q[At]?mt=Ae:mt||(mt=it,this.opacities[At]=mt),Q[At]=!0;const It=Je.numIconVertices>0,kt=this.placedOrientations[Je.crossTileID],Ot=kt===D.WritingMode.vertical,Wt=kt===D.WritingMode.horizontal||kt===D.WritingMode.horizontalOnly;if(pt>0||Et>0){const zt=Pr(mt.text);tt(x.text,pt,Ot?Zi:zt),tt(x.text,Et,Wt?Zi:zt);const Jt=mt.text.isHidden();[Je.rightJustifiedTextSymbolIndex,Je.centerJustifiedTextSymbolIndex,Je.leftJustifiedTextSymbolIndex].forEach(oi=>{oi>=0&&(x.text.placedSymbolArray.get(oi).hidden=Jt||Ot?1:0)}),Je.verticalPlacedTextSymbolIndex>=0&&(x.text.placedSymbolArray.get(Je.verticalPlacedTextSymbolIndex).hidden=Jt||Wt?1:0);const Bi=this.variableOffsets[Je.crossTileID];Bi&&this.markUsedJustification(x,Bi.anchor,Je,kt);const ar=this.placedOrientations[Je.crossTileID];ar&&(this.markUsedJustification(x,"left",Je,ar),this.markUsedOrientation(x,ar,Je))}if(It){const zt=Pr(mt.icon),Jt=!(Re&&Je.verticalPlacedIconSymbolIndex&&Ot);Je.placedIconSymbolIndex>=0&&(tt(x.icon,Je.numIconVertices,Jt?zt:Zi),x.icon.placedSymbolArray.get(Je.placedIconSymbolIndex).hidden=mt.icon.isHidden()),Je.verticalPlacedIconSymbolIndex>=0&&(tt(x.icon,Je.numVerticalIconVertices,Jt?Zi:zt),x.icon.placedSymbolArray.get(Je.verticalPlacedIconSymbolIndex).hidden=mt.icon.isHidden())}if(x.hasIconCollisionBoxData()||x.hasTextCollisionBoxData()){const zt=x.collisionArrays[at];if(zt){let Jt=new D.Point(0,0);if(zt.textBox||zt.verticalTextBox){let ar=!0;if(ve){const oi=this.variableOffsets[At];oi?(Jt=Di(oi.anchor,oi.width,oi.height,oi.textOffset,oi.textBoxScale),Ce&&Jt._rotate(Se?this.transform.angle:-this.transform.angle)):ar=!1}zt.textBox&&Ui(x.textCollisionBox.collisionVertexArray,mt.text.placed,!ar||Ot,Jt.x,Jt.y),zt.verticalTextBox&&Ui(x.textCollisionBox.collisionVertexArray,mt.text.placed,!ar||Wt,Jt.x,Jt.y)}const Bi=!!(!Wt&&zt.verticalIconBox);zt.iconBox&&Ui(x.iconCollisionBox.collisionVertexArray,mt.icon.placed,Bi,Re?Jt.x:0,Re?Jt.y:0),zt.verticalIconBox&&Ui(x.iconCollisionBox.collisionVertexArray,mt.icon.placed,!Bi,Re?Jt.x:0,Re?Jt.y:0)}}}if(x.sortFeatures(this.transform.angle),this.retainedQueryData[x.bucketInstanceId]&&(this.retainedQueryData[x.bucketInstanceId].featureSortOrder=x.featureSortOrder),x.hasTextData()&&x.text.opacityVertexBuffer&&x.text.opacityVertexBuffer.updateData(x.text.opacityVertexArray),x.hasIconData()&&x.icon.opacityVertexBuffer&&x.icon.opacityVertexBuffer.updateData(x.icon.opacityVertexArray),x.hasIconCollisionBoxData()&&x.iconCollisionBox.collisionVertexBuffer&&x.iconCollisionBox.collisionVertexBuffer.updateData(x.iconCollisionBox.collisionVertexArray),x.hasTextCollisionBoxData()&&x.textCollisionBox.collisionVertexBuffer&&x.textCollisionBox.collisionVertexBuffer.updateData(x.textCollisionBox.collisionVertexArray),x.text.opacityVertexArray.length!==x.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${x.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${x.text.layoutVertexArray.length}) / 4`);if(x.icon.opacityVertexArray.length!==x.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${x.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${x.icon.layoutVertexArray.length}) / 4`);if(x.bucketInstanceId in this.collisionCircleArrays){const at=this.collisionCircleArrays[x.bucketInstanceId];x.placementInvProjMatrix=at.invProjMatrix,x.placementViewportMatrix=at.viewportMatrix,x.collisionCircleArray=at.circles,delete this.collisionCircleArrays[x.bucketInstanceId]}}symbolFadeChange(x){return this.fadeDuration===0?1:(x-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(x){return Math.max(0,(this.transform.zoom-x)/1.5)}hasTransitions(x){return this.stale||x-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(x,Q){const G=this.zoomAtLastRecencyCheck===Q?1-this.zoomAdjustment(Q):1;return this.zoomAtLastRecencyCheck=Q,this.commitTime+this.fadeDuration*G>x}setStale(){this.stale=!0}}function Ui(J,x,Q,G,X){J.emplaceBack(x?1:0,Q?1:0,G||0,X||0),J.emplaceBack(x?1:0,Q?1:0,G||0,X||0),J.emplaceBack(x?1:0,Q?1:0,G||0,X||0),J.emplaceBack(x?1:0,Q?1:0,G||0,X||0)}const Qi=Math.pow(2,25),hr=Math.pow(2,24),Ki=Math.pow(2,17),Yt=Math.pow(2,16),wr=Math.pow(2,9),bi=Math.pow(2,8),Ir=Math.pow(2,1);function Pr(J){if(J.opacity===0&&!J.placed)return 0;if(J.opacity===1&&J.placed)return 4294967295;const x=J.placed?1:0,Q=Math.floor(127*J.opacity);return Q*Qi+x*hr+Q*Ki+x*Yt+Q*wr+x*bi+Q*Ir+x}const Zi=0;class pi{constructor(x){this._sortAcrossTiles=x.layout.get("symbol-z-order")!=="viewport-y"&&!x.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(x,Q,G,X,te){const Ae=this._bucketParts;for(;this._currentTileIndex<x.length;)if(Q.getBucketParts(Ae,X,x[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,te())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ae.sort((he,ge)=>he.sortKey-ge.sortKey));this._currentPartIndex<Ae.length;)if(Q.placeLayerBucketPart(Ae[this._currentPartIndex],this._seenCrossTileIDs,G),this._currentPartIndex++,te())return!0;return!1}}class _s{constructor(x,Q,G,X,te,Ae,he,ge){this.placement=new ei(x,Q,Ae,he,ge),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=X,this._showCollisionBoxes=te,this._done=!1}isDone(){return this._done}continuePlacement(x,Q,G){const X=D.browser.now(),te=()=>!this._forceFullPlacement&&D.browser.now()-X>2;for(;this._currentPlacementIndex>=0;){const Ae=Q[x[this._currentPlacementIndex]],he=this.placement.collisionIndex.transform.zoom;if(Ae.type==="symbol"&&(!Ae.minzoom||Ae.minzoom<=he)&&(!Ae.maxzoom||Ae.maxzoom>he)){if(this._inProgressLayer||(this._inProgressLayer=new pi(Ae)),this._inProgressLayer.continuePlacement(G[Ae.source],this.placement,this._showCollisionBoxes,Ae,te))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(x){return this.placement.commit(x),this.placement}}const dr=512/D.EXTENT/2;class Lt{constructor(x,Q,G){this.tileID=x,this.bucketInstanceId=G,this._symbolsByKey={};const X=new Map;for(let te=0;te<Q.length;te++){const Ae=Q.get(te),he=Ae.key,ge=X.get(he);ge?ge.push(Ae):X.set(he,[Ae])}for(const[te,Ae]of X){const he={positions:Ae.map(ge=>({x:Math.floor(ge.anchorX*dr),y:Math.floor(ge.anchorY*dr)})),crossTileIDs:Ae.map(ge=>ge.crossTileID)};if(he.positions.length>128){const ge=new D.KDBush(he.positions.length,16,Uint16Array);for(const{x:ve,y:Ce}of he.positions)ge.add(ve,Ce);ge.finish(),delete he.positions,he.index=ge}this._symbolsByKey[te]=he}}getScaledCoordinates(x,Q){const{x:G,y:X,z:te}=this.tileID.canonical,{x:Ae,y:he,z:ge}=Q.canonical,ve=dr/Math.pow(2,ge-te),Ce=(he*D.EXTENT+x.anchorY)*ve,Se=X*D.EXTENT*dr;return{x:Math.floor((Ae*D.EXTENT+x.anchorX)*ve-G*D.EXTENT*dr),y:Math.floor(Ce-Se)}}findMatches(x,Q,G){const X=this.tileID.canonical.z<Q.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Q.canonical.z);for(let te=0;te<x.length;te++){const Ae=x.get(te);if(Ae.crossTileID)continue;const he=this._symbolsByKey[Ae.key];if(!he)continue;const ge=this.getScaledCoordinates(Ae,Q);if(he.index){const ve=he.index.range(ge.x-X,ge.y-X,ge.x+X,ge.y+X).sort();for(const Ce of ve){const Se=he.crossTileIDs[Ce];if(!G[Se]){G[Se]=!0,Ae.crossTileID=Se;break}}}else if(he.positions)for(let ve=0;ve<he.positions.length;ve++){const Ce=he.positions[ve],Se=he.crossTileIDs[ve];if(Math.abs(Ce.x-ge.x)<=X&&Math.abs(Ce.y-ge.y)<=X&&!G[Se]){G[Se]=!0,Ae.crossTileID=Se;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:x})=>x)}}class Yr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ys{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(x){const Q=Math.round((x-this.lng)/360);if(Q!==0)for(const G in this.indexes){const X=this.indexes[G],te={};for(const Ae in X){const he=X[Ae];he.tileID=he.tileID.unwrapTo(he.tileID.wrap+Q),te[he.tileID.key]=he}this.indexes[G]=te}this.lng=x}addBucket(x,Q,G){if(this.indexes[x.overscaledZ]&&this.indexes[x.overscaledZ][x.key]){if(this.indexes[x.overscaledZ][x.key].bucketInstanceId===Q.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(x.overscaledZ,this.indexes[x.overscaledZ][x.key])}for(let te=0;te<Q.symbolInstances.length;te++)Q.symbolInstances.get(te).crossTileID=0;this.usedCrossTileIDs[x.overscaledZ]||(this.usedCrossTileIDs[x.overscaledZ]={});const X=this.usedCrossTileIDs[x.overscaledZ];for(const te in this.indexes){const Ae=this.indexes[te];if(Number(te)>x.overscaledZ)for(const he in Ae){const ge=Ae[he];ge.tileID.isChildOf(x)&&ge.findMatches(Q.symbolInstances,x,X)}else{const he=Ae[x.scaledTo(Number(te)).key];he&&he.findMatches(Q.symbolInstances,x,X)}}for(let te=0;te<Q.symbolInstances.length;te++){const Ae=Q.symbolInstances.get(te);Ae.crossTileID||(Ae.crossTileID=G.generate(),X[Ae.crossTileID]=!0)}return this.indexes[x.overscaledZ]===void 0&&(this.indexes[x.overscaledZ]={}),this.indexes[x.overscaledZ][x.key]=new Lt(x,Q.symbolInstances,Q.bucketInstanceId),!0}removeBucketCrossTileIDs(x,Q){for(const G of Q.getCrossTileIDsLists())for(const X of G)delete this.usedCrossTileIDs[x][X]}removeStaleBuckets(x){let Q=!1;for(const G in this.indexes){const X=this.indexes[G];for(const te in X)x[X[te].bucketInstanceId]||(this.removeBucketCrossTileIDs(G,X[te]),delete X[te],Q=!0)}return Q}}class _r{constructor(){this.layerIndexes={},this.crossTileIDs=new Yr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(x,Q,G){let X=this.layerIndexes[x.id];X===void 0&&(X=this.layerIndexes[x.id]=new Ys);let te=!1;const Ae={};X.handleWrapJump(G);for(const he of Q){const ge=he.getBucket(x);ge&&x.id===ge.layerIds[0]&&(ge.bucketInstanceId||(ge.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(he.tileID,ge,this.crossTileIDs)&&(te=!0),Ae[ge.bucketInstanceId]=!0)}return X.removeStaleBuckets(Ae)&&(te=!0),te}pruneUnusedLayers(x){const Q={};x.forEach(G=>{Q[G]=!0});for(const G in this.layerIndexes)Q[G]||delete this.layerIndexes[G]}}const Br=(J,x)=>D.emitValidationErrors(J,x&&x.filter(Q=>Q.identifier!=="source.canvas")),Cr=D.pick(D.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),rr=D.pick(D.operations,["setCenter","setZoom","setBearing","setPitch"]),Lr=D.emptyStyle();class sr extends D.Evented{constructor(x,Q={}){super(),this.map=x,this.dispatcher=new S(Vi(),this,x._getMapId()),this.imageManager=new Mt,this.imageManager.setEventedParent(this),this.glyphManager=new Ei(x._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new _r,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new D.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",D.getReferrer());const G=this;this._rtlTextPluginCallback=sr.registerForPluginStateChange(X=>{G.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:X.pluginStatus,pluginURL:X.pluginURL},(te,Ae)=>{if(D.triggerPluginCompletionEvent(te),Ae&&Ae.every(he=>he))for(const he in G.sourceCaches){const ge=G.sourceCaches[he].getSource().type;ge!=="vector"&&ge!=="geojson"||G.sourceCaches[he].reload()}})}),this.on("data",X=>{if(X.dataType!=="source"||X.sourceDataType!=="metadata")return;const te=this.sourceCaches[X.sourceId];if(!te)return;const Ae=te.getSource();if(Ae&&Ae.vectorLayerIds)for(const he in this._layers){const ge=this._layers[he];ge.source===Ae.id&&this._validateLayer(ge)}})}loadURL(x,Q={},G){this.fire(new D.Event("dataloading",{dataType:"style"})),Q.validate=typeof Q.validate!="boolean"||Q.validate;const X=this.map._requestManager.transformRequest(x,Ne.Style);this._request=D.getJSON(X,(te,Ae)=>{this._request=null,te?this.fire(new D.ErrorEvent(te)):Ae&&this._load(Ae,Q,G)})}loadJSON(x,Q={},G){this.fire(new D.Event("dataloading",{dataType:"style"})),this._request=D.browser.frame(()=>{this._request=null,Q.validate=Q.validate!==!1,this._load(x,Q,G)})}loadEmpty(){this.fire(new D.Event("dataloading",{dataType:"style"})),this._load(Lr,{validate:!1})}_load(x,Q,G){var X;const te=Q.transformStyle?Q.transformStyle(G,x):x;if(!Q.validate||!Br(this,D.validateStyle(te))){this._loaded=!0,this.stylesheet=te;for(const Ae in te.sources)this.addSource(Ae,te.sources[Ae],{validate:!1});te.sprite?this._loadSprite(te.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(te.glyphs),this._createLayers(),this.light=new d(this.stylesheet.light),this.map.setTerrain((X=this.stylesheet.terrain)!==null&&X!==void 0?X:null),this.fire(new D.Event("data",{dataType:"style"})),this.fire(new D.Event("style.load"))}}_createLayers(){const x=D.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",x),this._order=x.map(Q=>Q.id),this._layers={},this._serializedLayers=null;for(const Q of x){const G=D.createStyleLayer(Q);G.setEventedParent(this,{layer:{id:Q.id}}),this._layers[Q.id]=G}}_loadSprite(x,Q=!1,G=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(X,te,Ae,he){const ge=wt(X),ve=ge.length,Ce=Ae>1?"@2x":"",Se={},Re={},it={};for(const{id:tt,url:at}of ge){const Je=te.transformRequest(te.normalizeSpriteURL(at,Ce,".json"),Ne.SpriteJSON),pt=`${tt}_${Je.url}`;Se[pt]=D.getJSON(Je,(mt,It)=>{delete Se[pt],Re[tt]=It,Ft(he,Re,it,mt,ve)});const Et=te.transformRequest(te.normalizeSpriteURL(at,Ce,".png"),Ne.SpriteImage),At=`${tt}_${Et.url}`;Se[At]=We.getImage(Et,(mt,It)=>{delete Se[At],it[tt]=It,Ft(he,Re,it,mt,ve)})}return{cancel(){for(const tt of Object.values(Se))tt.cancel()}}}(x,this.map._requestManager,this.map.getPixelRatio(),(X,te)=>{if(this._spriteRequest=null,X)this.fire(new D.ErrorEvent(X));else if(te)for(const Ae in te){this._spritesImagesIds[Ae]=[];const he=this._spritesImagesIds[Ae]?this._spritesImagesIds[Ae].filter(ge=>!(ge in te)):[];for(const ge of he)this.imageManager.removeImage(ge),this._changedImages[ge]=!0;for(const ge in te[Ae]){const ve=Ae==="default"?ge:`${Ae}:${ge}`;this._spritesImagesIds[Ae].push(ve),ve in this.imageManager.images?this.imageManager.updateImage(ve,te[Ae][ge],!1):this.imageManager.addImage(ve,te[Ae][ge]),Q&&(this._changedImages[ve]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),Q&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"})),G&&G(X)})}_unloadSprite(){for(const x of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(x),this._changedImages[x]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"}))}_validateLayer(x){const Q=this.sourceCaches[x.source];if(!Q)return;const G=x.sourceLayer;if(!G)return;const X=Q.getSource();(X.type==="geojson"||X.vectorLayerIds&&X.vectorLayerIds.indexOf(G)===-1)&&this.fire(new D.ErrorEvent(new Error(`Source layer "${G}" does not exist on source "${X.id}" as specified by style layer "${x.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(x){const Q=this._serializedAllLayers();if(!x||x.length===0)return Object.values(Q);const G=[];for(const X of x)Q[X]&&G.push(Q[X]);return G}_serializedAllLayers(){let x=this._serializedLayers;if(x)return x;x=this._serializedLayers={};const Q=Object.keys(this._layers);for(const G of Q){const X=this._layers[G];X.type!=="custom"&&(x[G]=X.serialize())}return x}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(const x in this._layers)if(this._layers[x].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(x){if(!this._loaded)return;const Q=this._changed;if(this._changed){const X=Object.keys(this._updatedLayers),te=Object.keys(this._removedLayers);(X.length||te.length)&&this._updateWorkerLayers(X,te);for(const Ae in this._updatedSources){const he=this._updatedSources[Ae];if(he==="reload")this._reloadSource(Ae);else{if(he!=="clear")throw new Error(`Invalid action ${he}`);this._clearSource(Ae)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const Ae in this._updatedPaintProps)this._layers[Ae].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}const G={};for(const X in this.sourceCaches){const te=this.sourceCaches[X];G[X]=te.used,te.used=!1}for(const X of this._order){const te=this._layers[X];te.recalculate(x,this._availableImages),!te.isHidden(x.zoom)&&te.source&&(this.sourceCaches[te.source].used=!0)}for(const X in G){const te=this.sourceCaches[X];G[X]!==te.used&&te.fire(new D.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:X}))}this.light.recalculate(x),this.z=x.zoom,Q&&this.fire(new D.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const x=Object.keys(this._changedImages);if(x.length){for(const Q in this.sourceCaches)this.sourceCaches[Q].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const x in this.sourceCaches)this.sourceCaches[x].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(x,Q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(x),removedIds:Q})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(x,Q={}){this._checkLoaded();const G=this.serialize();if(x=Q.transformStyle?Q.transformStyle(G,x):x,Br(this,D.validateStyle(x)))return!1;(x=D.clone$1(x)).layers=D.derefLayers(x.layers);const X=D.diffStyles(G,x).filter(Ae=>!(Ae.command in rr));if(X.length===0)return!1;const te=X.filter(Ae=>!(Ae.command in Cr));if(te.length>0)throw new Error(`Unimplemented: ${te.map(Ae=>Ae.command).join(", ")}.`);for(const Ae of X)Ae.command!=="setTransition"&&this[Ae.command].apply(this,Ae.args);return this.stylesheet=x,!0}addImage(x,Q){if(this.getImage(x))return this.fire(new D.ErrorEvent(new Error(`An image named "${x}" already exists.`)));this.imageManager.addImage(x,Q),this._afterImageUpdated(x)}updateImage(x,Q){this.imageManager.updateImage(x,Q)}getImage(x){return this.imageManager.getImage(x)}removeImage(x){if(!this.getImage(x))return this.fire(new D.ErrorEvent(new Error(`An image named "${x}" does not exist.`)));this.imageManager.removeImage(x),this._afterImageUpdated(x)}_afterImageUpdated(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(x,Q,G={}){if(this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error(`Source "${x}" already exists.`);if(!Q.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(Q).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(Q.type)>=0&&this._validate(D.validateStyle.source,`sources.${x}`,Q,null,G))return;this.map&&this.map._collectResourceTiming&&(Q.collectResourceTiming=!0);const X=this.sourceCaches[x]=new $t(x,Q,this.dispatcher);X.style=this,X.setEventedParent(this,()=>({isSourceLoaded:X.loaded(),source:X.serialize(),sourceId:x})),X.onAdd(this.map),this._changed=!0}removeSource(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(const G in this._layers)if(this._layers[G].source===x)return this.fire(new D.ErrorEvent(new Error(`Source "${x}" cannot be removed while layer "${G}" is using it.`)));const Q=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],Q.fire(new D.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),Q.setEventedParent(null),Q.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(x,Q){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error(`There is no source with this ID=${x}`);const G=this.sourceCaches[x].getSource();if(G.type!=="geojson")throw new Error(`geojsonSource.type is ${G.type}, which is !== 'geojson`);G.setData(Q),this._changed=!0}getSource(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()}addLayer(x,Q,G={}){this._checkLoaded();const X=x.id;if(this.getLayer(X))return void this.fire(new D.ErrorEvent(new Error(`Layer "${X}" already exists on this map.`)));let te;if(x.type==="custom"){if(Br(this,D.validateCustomStyleLayer(x)))return;te=D.createStyleLayer(x)}else{if("source"in x&&typeof x.source=="object"&&(this.addSource(X,x.source),x=D.clone$1(x),x=D.extend(x,{source:X})),this._validate(D.validateStyle.layer,`layers.${X}`,x,{arrayIndex:-1},G))return;te=D.createStyleLayer(x),this._validateLayer(te),te.setEventedParent(this,{layer:{id:X}})}const Ae=Q?this._order.indexOf(Q):this._order.length;if(Q&&Ae===-1)this.fire(new D.ErrorEvent(new Error(`Cannot add layer "${X}" before non-existing layer "${Q}".`)));else{if(this._order.splice(Ae,0,X),this._layerOrderChanged=!0,this._layers[X]=te,this._removedLayers[X]&&te.source&&te.type!=="custom"){const he=this._removedLayers[X];delete this._removedLayers[X],he.type!==te.type?this._updatedSources[te.source]="clear":(this._updatedSources[te.source]="reload",this.sourceCaches[te.source].pause())}this._updateLayer(te),te.onAdd&&te.onAdd(this.map)}}moveLayer(x,Q){if(this._checkLoaded(),this._changed=!0,!this._layers[x])return void this.fire(new D.ErrorEvent(new Error(`The layer '${x}' does not exist in the map's style and cannot be moved.`)));if(x===Q)return;const G=this._order.indexOf(x);this._order.splice(G,1);const X=Q?this._order.indexOf(Q):this._order.length;Q&&X===-1?this.fire(new D.ErrorEvent(new Error(`Cannot move layer "${x}" before non-existing layer "${Q}".`))):(this._order.splice(X,0,x),this._layerOrderChanged=!0)}removeLayer(x){this._checkLoaded();const Q=this._layers[x];if(!Q)return void this.fire(new D.ErrorEvent(new Error(`Cannot remove non-existing layer "${x}".`)));Q.setEventedParent(null);const G=this._order.indexOf(x);this._order.splice(G,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=Q,delete this._layers[x],this._serializedLayers&&delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],Q.onRemove&&Q.onRemove(this.map)}getLayer(x){return this._layers[x]}hasLayer(x){return x in this._layers}setLayerZoomRange(x,Q,G){this._checkLoaded();const X=this.getLayer(x);X?X.minzoom===Q&&X.maxzoom===G||(Q!=null&&(X.minzoom=Q),G!=null&&(X.maxzoom=G),this._updateLayer(X)):this.fire(new D.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${x}".`)))}setFilter(x,Q,G={}){this._checkLoaded();const X=this.getLayer(x);if(X){if(!D.deepEqual(X.filter,Q))return Q==null?(X.filter=void 0,void this._updateLayer(X)):void(this._validate(D.validateStyle.filter,`layers.${X.id}.filter`,Q,null,G)||(X.filter=D.clone$1(Q),this._updateLayer(X)))}else this.fire(new D.ErrorEvent(new Error(`Cannot filter non-existing layer "${x}".`)))}getFilter(x){return D.clone$1(this.getLayer(x).filter)}setLayoutProperty(x,Q,G,X={}){this._checkLoaded();const te=this.getLayer(x);te?D.deepEqual(te.getLayoutProperty(Q),G)||(te.setLayoutProperty(Q,G,X),this._updateLayer(te)):this.fire(new D.ErrorEvent(new Error(`Cannot style non-existing layer "${x}".`)))}getLayoutProperty(x,Q){const G=this.getLayer(x);if(G)return G.getLayoutProperty(Q);this.fire(new D.ErrorEvent(new Error(`Cannot get style of non-existing layer "${x}".`)))}setPaintProperty(x,Q,G,X={}){this._checkLoaded();const te=this.getLayer(x);te?D.deepEqual(te.getPaintProperty(Q),G)||(te.setPaintProperty(Q,G,X)&&this._updateLayer(te),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new D.ErrorEvent(new Error(`Cannot style non-existing layer "${x}".`)))}getPaintProperty(x,Q){return this.getLayer(x).getPaintProperty(Q)}setFeatureState(x,Q){this._checkLoaded();const G=x.source,X=x.sourceLayer,te=this.sourceCaches[G];if(te===void 0)return void this.fire(new D.ErrorEvent(new Error(`The source '${G}' does not exist in the map's style.`)));const Ae=te.getSource().type;Ae==="geojson"&&X?this.fire(new D.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Ae!=="vector"||X?(x.id===void 0&&this.fire(new D.ErrorEvent(new Error("The feature id parameter must be provided."))),te.setFeatureState(X,x.id,Q)):this.fire(new D.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(x,Q){this._checkLoaded();const G=x.source,X=this.sourceCaches[G];if(X===void 0)return void this.fire(new D.ErrorEvent(new Error(`The source '${G}' does not exist in the map's style.`)));const te=X.getSource().type,Ae=te==="vector"?x.sourceLayer:void 0;te!=="vector"||Ae?Q&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new D.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):X.removeFeatureState(Ae,x.id,Q):this.fire(new D.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(x){this._checkLoaded();const Q=x.source,G=x.sourceLayer,X=this.sourceCaches[Q];if(X!==void 0)return X.getSource().type!=="vector"||G?(x.id===void 0&&this.fire(new D.ErrorEvent(new Error("The feature id parameter must be provided."))),X.getFeatureState(G,x.id)):void this.fire(new D.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new D.ErrorEvent(new Error(`The source '${Q}' does not exist in the map's style.`)))}getTransition(){return D.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const x=D.mapObject(this.sourceCaches,X=>X.serialize()),Q=this._serializeByIds(this._order),G=this.stylesheet;return D.filterObject({version:G.version,name:G.name,metadata:G.metadata,light:G.light,center:G.center,zoom:G.zoom,bearing:G.bearing,pitch:G.pitch,sprite:G.sprite,glyphs:G.glyphs,transition:G.transition,sources:x,layers:Q},X=>X!==void 0)}_updateLayer(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(x){const Q=Ae=>this._layers[Ae].type==="fill-extrusion",G={},X=[];for(let Ae=this._order.length-1;Ae>=0;Ae--){const he=this._order[Ae];if(Q(he)){G[he]=Ae;for(const ge of x){const ve=ge[he];if(ve)for(const Ce of ve)X.push(Ce)}}}X.sort((Ae,he)=>he.intersectionZ-Ae.intersectionZ);const te=[];for(let Ae=this._order.length-1;Ae>=0;Ae--){const he=this._order[Ae];if(Q(he))for(let ge=X.length-1;ge>=0;ge--){const ve=X[ge].feature;if(G[ve.layer.id]<Ae)break;te.push(ve),X.pop()}else for(const ge of x){const ve=ge[he];if(ve)for(const Ce of ve)te.push(Ce.feature)}}return te}queryRenderedFeatures(x,Q,G){Q&&Q.filter&&this._validate(D.validateStyle.filter,"queryRenderedFeatures.filter",Q.filter,null,Q);const X={};if(Q&&Q.layers){if(!Array.isArray(Q.layers))return this.fire(new D.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const he of Q.layers){const ge=this._layers[he];if(!ge)return this.fire(new D.ErrorEvent(new Error(`The layer '${he}' does not exist in the map's style and cannot be queried for features.`))),[];X[ge.source]=!0}}const te=[];Q.availableImages=this._availableImages;const Ae=this._serializedAllLayers();for(const he in this.sourceCaches)Q.layers&&!X[he]||te.push(gt(this.sourceCaches[he],this._layers,Ae,x,Q,G));return this.placement&&te.push(function(he,ge,ve,Ce,Se,Re,it){const tt={},at=Re.queryRenderedSymbols(Ce),Je=[];for(const pt of Object.keys(at).map(Number))Je.push(it[pt]);Je.sort(Dt);for(const pt of Je){const Et=pt.featureIndex.lookupSymbolFeatures(at[pt.bucketInstanceId],ge,pt.bucketIndex,pt.sourceLayerIndex,Se.filter,Se.layers,Se.availableImages,he);for(const At in Et){const mt=tt[At]=tt[At]||[],It=Et[At];It.sort((kt,Ot)=>{const Wt=pt.featureSortOrder;if(Wt){const zt=Wt.indexOf(kt.featureIndex);return Wt.indexOf(Ot.featureIndex)-zt}return Ot.featureIndex-kt.featureIndex});for(const kt of It)mt.push(kt)}}for(const pt in tt)tt[pt].forEach(Et=>{const At=Et.feature,mt=ve[he[pt].source].getFeatureState(At.layer["source-layer"],At.id);At.source=At.layer.source,At.layer["source-layer"]&&(At.sourceLayer=At.layer["source-layer"]),At.state=mt});return tt}(this._layers,Ae,this.sourceCaches,x,Q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(te)}querySourceFeatures(x,Q){Q&&Q.filter&&this._validate(D.validateStyle.filter,"querySourceFeatures.filter",Q.filter,null,Q);const G=this.sourceCaches[x];return G?function(X,te){const Ae=X.getRenderableIds().map(ve=>X.getTileByID(ve)),he=[],ge={};for(let ve=0;ve<Ae.length;ve++){const Ce=Ae[ve],Se=Ce.tileID.canonical.key;ge[Se]||(ge[Se]=!0,Ce.querySourceFeatures(he,te))}return he}(G,Q):[]}addSourceType(x,Q,G){return Xe(x)?G(new Error(`A source type called "${x}" already exists.`)):(((X,te)=>{De[X]=te})(x,Q),Q.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:Q.workerSourceURL},G):G(null,null))}getLight(){return this.light.getLight()}setLight(x,Q={}){this._checkLoaded();const G=this.light.getLight();let X=!1;for(const Ae in x)if(!D.deepEqual(x[Ae],G[Ae])){X=!0;break}if(!X)return;const te={now:D.browser.now(),transition:D.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,Q),this.light.updateTransitions(te)}_validate(x,Q,G,X,te={}){return(!te||te.validate!==!1)&&Br(this,x.call(D.validateStyle,D.extend({key:Q,style:this.serialize(),value:G,styleSpec:D.v8Spec},X)))}_remove(x=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),D.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const Q in this._layers)this._layers[Q].setEventedParent(null);for(const Q in this.sourceCaches){const G=this.sourceCaches[Q];G.setEventedParent(null),G.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(x)}_clearSource(x){this.sourceCaches[x].clearTiles()}_reloadSource(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()}_updateSources(x){for(const Q in this.sourceCaches)this.sourceCaches[Q].update(x,this.map.terrain)}_generateCollisionBoxes(){for(const x in this.sourceCaches)this._reloadSource(x)}_updatePlacement(x,Q,G,X,te=!1){let Ae=!1,he=!1;const ge={};for(const ve of this._order){const Ce=this._layers[ve];if(Ce.type!=="symbol")continue;if(!ge[Ce.source]){const Re=this.sourceCaches[Ce.source];ge[Ce.source]=Re.getRenderableIds(!0).map(it=>Re.getTileByID(it)).sort((it,tt)=>tt.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(tt.tileID)?-1:1))}const Se=this.crossTileSymbolIndex.addLayer(Ce,ge[Ce.source],x.center.lng);Ae=Ae||Se}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((te=te||this._layerOrderChanged||G===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.browser.now(),x.zoom))&&(this.pauseablePlacement=new _s(x,this.map.terrain,this._order,te,Q,G,X,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.browser.now()),he=!0),Ae&&this.pauseablePlacement.placement.setStale()),he||Ae)for(const ve of this._order){const Ce=this._layers[ve];Ce.type==="symbol"&&this.placement.updateLayerOpacities(Ce,ge[Ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.browser.now())}_releaseSymbolFadeTiles(){for(const x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()}getImages(x,Q,G){this.imageManager.getImages(Q.icons,G),this._updateTilesForChangedImages();const X=this.sourceCaches[Q.source];X&&X.setDependencies(Q.tileID.key,Q.type,Q.icons)}getGlyphs(x,Q,G){this.glyphManager.getGlyphs(Q.stacks,G);const X=this.sourceCaches[Q.source];X&&X.setDependencies(Q.tileID.key,Q.type,[""])}getResource(x,Q,G){return D.makeRequest(Q,G)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(x,Q={}){this._checkLoaded(),x&&this._validate(D.validateStyle.glyphs,"glyphs",x,null,Q)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=x,this.glyphManager.entries={},this.glyphManager.setURL(x))}addSprite(x,Q,G={},X){this._checkLoaded();const te=[{id:x,url:Q}],Ae=[...wt(this.stylesheet.sprite),...te];this._validate(D.validateStyle.sprite,"sprite",Ae,null,G)||(this.stylesheet.sprite=Ae,this._loadSprite(te,!0,X))}removeSprite(x){this._checkLoaded();const Q=wt(this.stylesheet.sprite);if(Q.find(G=>G.id===x)){if(this._spritesImagesIds[x])for(const G of this._spritesImagesIds[x])this.imageManager.removeImage(G),this._changedImages[G]=!0;Q.splice(Q.findIndex(G=>G.id===x),1),this.stylesheet.sprite=Q.length>0?Q:void 0,delete this._spritesImagesIds[x],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"}))}else this.fire(new D.ErrorEvent(new Error(`Sprite "${x}" doesn't exists on this map.`)))}getSprite(){return wt(this.stylesheet.sprite)}setSprite(x,Q={},G){this._checkLoaded(),x&&this._validate(D.validateStyle.sprite,"sprite",x,null,Q)||(this.stylesheet.sprite=x,x?this._loadSprite(x,!0,G):(this._unloadSprite(),G&&G(null)))}}sr.registerForPluginStateChange=D.registerForPluginStateChange;var jr=D.createLayout([{name:"a_pos",type:"Int16",components:2}]),ss="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ps={prelude:cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:cr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:cr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:cr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:cr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:cr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:cr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:cr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:cr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:cr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:cr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:cr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ss),terrainDepth:cr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ss),terrainCoords:cr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ss)};function cr(J,x){const Q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,G=x.match(/attribute ([\w]+) ([\w]+)/g),X=J.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Ae=te?te.concat(X):X,he={};return{fragmentSource:J=J.replace(Q,(ge,ve,Ce,Se,Re)=>(he[Re]=!0,ve==="define"?`
#ifndef HAS_UNIFORM_u_${Re}
varying ${Ce} ${Se} ${Re};
#else
uniform ${Ce} ${Se} u_${Re};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Re}
    ${Ce} ${Se} ${Re} = u_${Re};
#endif
`)),vertexSource:x=x.replace(Q,(ge,ve,Ce,Se,Re)=>{const it=Se==="float"?"vec2":"vec4",tt=Re.match(/color/)?"color":it;return he[Re]?ve==="define"?`
#ifndef HAS_UNIFORM_u_${Re}
uniform lowp float u_${Re}_t;
attribute ${Ce} ${it} a_${Re};
varying ${Ce} ${Se} ${Re};
#else
uniform ${Ce} ${Se} u_${Re};
#endif
`:tt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Re}
    ${Re} = a_${Re};
#else
    ${Ce} ${Se} ${Re} = u_${Re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Re}
    ${Re} = unpack_mix_${tt}(a_${Re}, u_${Re}_t);
#else
    ${Ce} ${Se} ${Re} = u_${Re};
#endif
`:ve==="define"?`
#ifndef HAS_UNIFORM_u_${Re}
uniform lowp float u_${Re}_t;
attribute ${Ce} ${it} a_${Re};
#else
uniform ${Ce} ${Se} u_${Re};
#endif
`:tt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Re}
    ${Ce} ${Se} ${Re} = a_${Re};
#else
    ${Ce} ${Se} ${Re} = u_${Re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Re}
    ${Ce} ${Se} ${Re} = unpack_mix_${tt}(a_${Re}, u_${Re}_t);
#else
    ${Ce} ${Se} ${Re} = u_${Re};
#endif
`}),staticAttributes:G,staticUniforms:Ae}}class js{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(x,Q,G,X,te,Ae,he,ge,ve){this.context=x;let Ce=this.boundPaintVertexBuffers.length!==X.length;for(let Se=0;!Ce&&Se<X.length;Se++)this.boundPaintVertexBuffers[Se]!==X[Se]&&(Ce=!0);!this.vao||this.boundProgram!==Q||this.boundLayoutVertexBuffer!==G||Ce||this.boundIndexBuffer!==te||this.boundVertexOffset!==Ae||this.boundDynamicVertexBuffer!==he||this.boundDynamicVertexBuffer2!==ge||this.boundDynamicVertexBuffer3!==ve?this.freshBind(Q,G,X,te,Ae,he,ge,ve):(x.bindVertexArray.set(this.vao),he&&he.bind(),te&&te.dynamicDraw&&te.bind(),ge&&ge.bind(),ve&&ve.bind())}freshBind(x,Q,G,X,te,Ae,he,ge){const ve=x.numAttributes,Ce=this.context,Se=Ce.gl;this.vao&&this.destroy(),this.vao=Ce.createVertexArray(),Ce.bindVertexArray.set(this.vao),this.boundProgram=x,this.boundLayoutVertexBuffer=Q,this.boundPaintVertexBuffers=G,this.boundIndexBuffer=X,this.boundVertexOffset=te,this.boundDynamicVertexBuffer=Ae,this.boundDynamicVertexBuffer2=he,this.boundDynamicVertexBuffer3=ge,Q.enableAttributes(Se,x);for(const Re of G)Re.enableAttributes(Se,x);Ae&&Ae.enableAttributes(Se,x),he&&he.enableAttributes(Se,x),ge&&ge.enableAttributes(Se,x),Q.bind(),Q.setVertexAttribPointers(Se,x,te);for(const Re of G)Re.bind(),Re.setVertexAttribPointers(Se,x,te);Ae&&(Ae.bind(),Ae.setVertexAttribPointers(Se,x,te)),X&&X.bind(),he&&(he.bind(),he.setVertexAttribPointers(Se,x,te)),ge&&(ge.bind(),ge.setVertexAttribPointers(Se,x,te)),Ce.currentNumAttributes=ve}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ys(J){const x=[];for(let Q=0;Q<J.length;Q++){if(J[Q]===null)continue;const G=J[Q].split(" ");x.push(G.pop())}return x}class Os{constructor(x,Q,G,X,te,Ae){const he=x.gl;this.program=he.createProgram();const ge=ys(Q.staticAttributes),ve=G?G.getBinderAttributes():[],Ce=ge.concat(ve),Se=ps.prelude.staticUniforms?ys(ps.prelude.staticUniforms):[],Re=Q.staticUniforms?ys(Q.staticUniforms):[],it=G?G.getBinderUniforms():[],tt=Se.concat(Re).concat(it),at=[];for(const kt of tt)at.indexOf(kt)<0&&at.push(kt);const Je=G?G.defines():[];te&&Je.push("#define OVERDRAW_INSPECTOR;"),Ae&&Je.push("#define TERRAIN3D;");const pt=Je.concat(ps.prelude.fragmentSource,Q.fragmentSource).join(`
`),Et=Je.concat(ps.prelude.vertexSource,Q.vertexSource).join(`
`),At=he.createShader(he.FRAGMENT_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);if(he.shaderSource(At,pt),he.compileShader(At),!he.getShaderParameter(At,he.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${he.getShaderInfoLog(At)}`);he.attachShader(this.program,At);const mt=he.createShader(he.VERTEX_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);if(he.shaderSource(mt,Et),he.compileShader(mt),!he.getShaderParameter(mt,he.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${he.getShaderInfoLog(mt)}`);he.attachShader(this.program,mt),this.attributes={};const It={};this.numAttributes=Ce.length;for(let kt=0;kt<this.numAttributes;kt++)Ce[kt]&&(he.bindAttribLocation(this.program,kt,Ce[kt]),this.attributes[Ce[kt]]=kt);if(he.linkProgram(this.program),!he.getProgramParameter(this.program,he.LINK_STATUS))throw new Error(`Program failed to link: ${he.getProgramInfoLog(this.program)}`);he.deleteShader(mt),he.deleteShader(At);for(let kt=0;kt<at.length;kt++){const Ot=at[kt];if(Ot&&!It[Ot]){const Wt=he.getUniformLocation(this.program,Ot);Wt&&(It[Ot]=Wt)}}this.fixedUniforms=X(x,It),this.terrainUniforms=((kt,Ot)=>({u_depth:new D.Uniform1i(kt,Ot.u_depth),u_terrain:new D.Uniform1i(kt,Ot.u_terrain),u_terrain_dim:new D.Uniform1f(kt,Ot.u_terrain_dim),u_terrain_matrix:new D.UniformMatrix4f(kt,Ot.u_terrain_matrix),u_terrain_unpack:new D.Uniform4f(kt,Ot.u_terrain_unpack),u_terrain_exaggeration:new D.Uniform1f(kt,Ot.u_terrain_exaggeration)}))(x,It),this.binderUniforms=G?G.getUniforms(x,It):[]}draw(x,Q,G,X,te,Ae,he,ge,ve,Ce,Se,Re,it,tt,at,Je,pt,Et){const At=x.gl;if(this.failedToCreate)return;if(x.program.set(this.program),x.setDepthMode(G),x.setStencilMode(X),x.setColorMode(te),x.setCullFace(Ae),ge){x.activeTexture.set(At.TEXTURE2),At.bindTexture(At.TEXTURE_2D,ge.depthTexture),x.activeTexture.set(At.TEXTURE3),At.bindTexture(At.TEXTURE_2D,ge.texture);for(const It in this.terrainUniforms)this.terrainUniforms[It].set(ge[It])}for(const It in this.fixedUniforms)this.fixedUniforms[It].set(he[It]);at&&at.setUniforms(x,this.binderUniforms,it,{zoom:tt});let mt=0;switch(Q){case At.LINES:mt=2;break;case At.TRIANGLES:mt=3;break;case At.LINE_STRIP:mt=1}for(const It of Re.get()){const kt=It.vaos||(It.vaos={});(kt[ve]||(kt[ve]=new js)).bind(x,this,Ce,at?at.getPaintVertexBuffers():[],Se,It.vertexOffset,Je,pt,Et),At.drawElements(Q,It.primitiveLength*mt,At.UNSIGNED_SHORT,It.primitiveOffset*mt*2)}}}function pn(J,x,Q){const G=1/Oe(Q,1,x.transform.tileZoom),X=Math.pow(2,Q.tileID.overscaledZ),te=Q.tileSize*Math.pow(2,x.transform.tileZoom)/X,Ae=te*(Q.tileID.canonical.x+Q.tileID.wrap*X),he=te*Q.tileID.canonical.y;return{u_image:0,u_texsize:Q.imageAtlasTexture.size,u_scale:[G,J.fromScale,J.toScale],u_fade:J.t,u_pixel_coord_upper:[Ae>>16,he>>16],u_pixel_coord_lower:[65535&Ae,65535&he]}}const Qr=(J,x,Q,G)=>{const X=x.style.light,te=X.properties.get("position"),Ae=[te.x,te.y,te.z],he=function(){var ve=new D.ARRAY_TYPE(9);return D.ARRAY_TYPE!=Float32Array&&(ve[1]=0,ve[2]=0,ve[3]=0,ve[5]=0,ve[6]=0,ve[7]=0),ve[0]=1,ve[4]=1,ve[8]=1,ve}();X.properties.get("anchor")==="viewport"&&function(ve,Ce){var Se=Math.sin(Ce),Re=Math.cos(Ce);ve[0]=Re,ve[1]=Se,ve[2]=0,ve[3]=-Se,ve[4]=Re,ve[5]=0,ve[6]=0,ve[7]=0,ve[8]=1}(he,-x.transform.angle),function(ve,Ce,Se){var Re=Ce[0],it=Ce[1],tt=Ce[2];ve[0]=Re*Se[0]+it*Se[3]+tt*Se[6],ve[1]=Re*Se[1]+it*Se[4]+tt*Se[7],ve[2]=Re*Se[2]+it*Se[5]+tt*Se[8]}(Ae,Ae,he);const ge=X.properties.get("color");return{u_matrix:J,u_lightpos:Ae,u_lightintensity:X.properties.get("intensity"),u_lightcolor:[ge.r,ge.g,ge.b],u_vertical_gradient:+Q,u_opacity:G}},es=(J,x,Q,G,X,te,Ae)=>D.extend(Qr(J,x,Q,G),pn(te,x,Ae),{u_height_factor:-Math.pow(2,X.overscaledZ)/Ae.tileSize/8}),xo=J=>({u_matrix:J}),Zs=(J,x,Q,G)=>D.extend(xo(J),pn(Q,x,G)),An=(J,x)=>({u_matrix:J,u_world:x}),ta=(J,x,Q,G,X)=>D.extend(Zs(J,x,Q,G),{u_world:X}),ja=(J,x,Q,G)=>{const X=J.transform;let te,Ae;if(G.paint.get("circle-pitch-alignment")==="map"){const he=Oe(Q,1,X.zoom);te=!0,Ae=[he,he]}else te=!1,Ae=X.pixelsToGLUnits;return{u_camera_to_center_distance:X.cameraToCenterDistance,u_scale_with_map:+(G.paint.get("circle-pitch-scale")==="map"),u_matrix:J.translatePosMatrix(x.posMatrix,Q,G.paint.get("circle-translate"),G.paint.get("circle-translate-anchor")),u_pitch_with_map:+te,u_device_pixel_ratio:J.pixelRatio,u_extrude_scale:Ae}},Qn=(J,x,Q)=>{const G=Oe(Q,1,x.zoom),X=Math.pow(2,x.zoom-Q.tileID.overscaledZ),te=Q.tileID.overscaleFactor();return{u_matrix:J,u_camera_to_center_distance:x.cameraToCenterDistance,u_pixels_to_tile_units:G,u_extrude_scale:[x.pixelsToGLUnits[0]/(G*X),x.pixelsToGLUnits[1]/(G*X)],u_overscale_factor:te}},wa=(J,x,Q=1)=>({u_matrix:J,u_color:x,u_overlay:0,u_overlay_scale:Q}),Nr=J=>({u_matrix:J}),Vo=(J,x,Q,G)=>({u_matrix:J,u_extrude_scale:Oe(x,1,Q),u_intensity:G});function Bo(J,x){const Q=Math.pow(2,x.canonical.z),G=x.canonical.y;return[new D.MercatorCoordinate(0,G/Q).toLngLat().lat,new D.MercatorCoordinate(0,(G+1)/Q).toLngLat().lat]}const ba=(J,x,Q,G)=>{const X=J.transform;return{u_matrix:ia(J,x,Q,G),u_ratio:1/Oe(x,1,X.zoom),u_device_pixel_ratio:J.pixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},Tn=(J,x,Q,G,X)=>D.extend(ba(J,x,Q,X),{u_image:0,u_image_height:G}),br=(J,x,Q,G,X)=>{const te=J.transform,Ae=As(x,te);return{u_matrix:ia(J,x,Q,X),u_texsize:x.imageAtlasTexture.size,u_ratio:1/Oe(x,1,te.zoom),u_device_pixel_ratio:J.pixelRatio,u_image:0,u_scale:[Ae,G.fromScale,G.toScale],u_fade:G.t,u_units_to_pixels:[1/te.pixelsToGLUnits[0],1/te.pixelsToGLUnits[1]]}},er=(J,x,Q,G,X,te)=>{const Ae=J.lineAtlas,he=As(x,J.transform),ge=Q.layout.get("line-cap")==="round",ve=Ae.getDash(G.from,ge),Ce=Ae.getDash(G.to,ge),Se=ve.width*X.fromScale,Re=Ce.width*X.toScale;return D.extend(ba(J,x,Q,te),{u_patternscale_a:[he/Se,-ve.height/2],u_patternscale_b:[he/Re,-Ce.height/2],u_sdfgamma:Ae.width/(256*Math.min(Se,Re)*J.pixelRatio)/2,u_image:0,u_tex_y_a:ve.y,u_tex_y_b:Ce.y,u_mix:X.t})};function As(J,x){return 1/Oe(J,1,x.tileZoom)}function ia(J,x,Q,G){return J.translatePosMatrix(G?G.posMatrix:x.tileID.posMatrix,x,Q.paint.get("line-translate"),Q.paint.get("line-translate-anchor"))}const xa=(J,x,Q,G,X)=>{return{u_matrix:J,u_tl_parent:x,u_scale_parent:Q,u_buffer_scale:1,u_fade_t:G.mix,u_opacity:G.opacity*X.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:X.paint.get("raster-brightness-min"),u_brightness_high:X.paint.get("raster-brightness-max"),u_saturation_factor:(Ae=X.paint.get("raster-saturation"),Ae>0?1-1/(1.001-Ae):-Ae),u_contrast_factor:(te=X.paint.get("raster-contrast"),te>0?1/(1-te):1+te),u_spin_weights:Ba(X.paint.get("raster-hue-rotate"))};var te,Ae};function Ba(J){J*=Math.PI/180;const x=Math.sin(J),Q=Math.cos(J);return[(2*Q+1)/3,(-Math.sqrt(3)*x-Q+1)/3,(Math.sqrt(3)*x-Q+1)/3]}const Ca=(J,x,Q,G,X,te,Ae,he,ge,ve)=>{const Ce=X.transform;return{u_is_size_zoom_constant:+(J==="constant"||J==="source"),u_is_size_feature_constant:+(J==="constant"||J==="camera"),u_size_t:x?x.uSizeT:0,u_size:x?x.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_pitch:Ce.pitch/360*2*Math.PI,u_rotate_symbol:+Q,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:X.options.fadeDuration?X.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:Ae,u_coord_matrix:he,u_is_text:+ge,u_pitch_with_map:+G,u_texsize:ve,u_texture:0}},Ea=(J,x,Q,G,X,te,Ae,he,ge,ve,Ce)=>{const Se=X.transform;return D.extend(Ca(J,x,Q,G,X,te,Ae,he,ge,ve),{u_gamma_scale:G?Math.cos(Se._pitch)*Se.cameraToCenterDistance:1,u_device_pixel_ratio:X.pixelRatio,u_is_halo:1})},Ta=(J,x,Q,G,X,te,Ae,he,ge,ve)=>D.extend(Ea(J,x,Q,G,X,te,Ae,he,!0,ge),{u_texsize_icon:ve,u_texture_icon:1}),On=(J,x,Q)=>({u_matrix:J,u_opacity:x,u_color:Q}),Za=(J,x,Q,G,X,te)=>D.extend(function(Ae,he,ge,ve){const Ce=ge.imageManager.getPattern(Ae.from.toString()),Se=ge.imageManager.getPattern(Ae.to.toString()),{width:Re,height:it}=ge.imageManager.getPixelSize(),tt=Math.pow(2,ve.tileID.overscaledZ),at=ve.tileSize*Math.pow(2,ge.transform.tileZoom)/tt,Je=at*(ve.tileID.canonical.x+ve.tileID.wrap*tt),pt=at*ve.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ce.tl,u_pattern_br_a:Ce.br,u_pattern_tl_b:Se.tl,u_pattern_br_b:Se.br,u_texsize:[Re,it],u_mix:he.t,u_pattern_size_a:Ce.displaySize,u_pattern_size_b:Se.displaySize,u_scale_a:he.fromScale,u_scale_b:he.toScale,u_tile_units_to_pixels:1/Oe(ve,1,ge.transform.tileZoom),u_pixel_coord_upper:[Je>>16,pt>>16],u_pixel_coord_lower:[65535&Je,65535&pt]}}(G,te,Q,X),{u_matrix:J,u_opacity:x}),ks={fillExtrusion:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_lightpos:new D.Uniform3f(J,x.u_lightpos),u_lightintensity:new D.Uniform1f(J,x.u_lightintensity),u_lightcolor:new D.Uniform3f(J,x.u_lightcolor),u_vertical_gradient:new D.Uniform1f(J,x.u_vertical_gradient),u_opacity:new D.Uniform1f(J,x.u_opacity)}),fillExtrusionPattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_lightpos:new D.Uniform3f(J,x.u_lightpos),u_lightintensity:new D.Uniform1f(J,x.u_lightintensity),u_lightcolor:new D.Uniform3f(J,x.u_lightcolor),u_vertical_gradient:new D.Uniform1f(J,x.u_vertical_gradient),u_height_factor:new D.Uniform1f(J,x.u_height_factor),u_image:new D.Uniform1i(J,x.u_image),u_texsize:new D.Uniform2f(J,x.u_texsize),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade),u_opacity:new D.Uniform1f(J,x.u_opacity)}),fill:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),fillPattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_image:new D.Uniform1i(J,x.u_image),u_texsize:new D.Uniform2f(J,x.u_texsize),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade)}),fillOutline:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_world:new D.Uniform2f(J,x.u_world)}),fillOutlinePattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_world:new D.Uniform2f(J,x.u_world),u_image:new D.Uniform1i(J,x.u_image),u_texsize:new D.Uniform2f(J,x.u_texsize),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade)}),circle:(J,x)=>({u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_scale_with_map:new D.Uniform1i(J,x.u_scale_with_map),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_extrude_scale:new D.Uniform2f(J,x.u_extrude_scale),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),collisionBox:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pixels_to_tile_units:new D.Uniform1f(J,x.u_pixels_to_tile_units),u_extrude_scale:new D.Uniform2f(J,x.u_extrude_scale),u_overscale_factor:new D.Uniform1f(J,x.u_overscale_factor)}),collisionCircle:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_inv_matrix:new D.UniformMatrix4f(J,x.u_inv_matrix),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_viewport_size:new D.Uniform2f(J,x.u_viewport_size)}),debug:(J,x)=>({u_color:new D.UniformColor(J,x.u_color),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_overlay:new D.Uniform1i(J,x.u_overlay),u_overlay_scale:new D.Uniform1f(J,x.u_overlay_scale)}),clippingMask:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),heatmap:(J,x)=>({u_extrude_scale:new D.Uniform1f(J,x.u_extrude_scale),u_intensity:new D.Uniform1f(J,x.u_intensity),u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),heatmapTexture:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_world:new D.Uniform2f(J,x.u_world),u_image:new D.Uniform1i(J,x.u_image),u_color_ramp:new D.Uniform1i(J,x.u_color_ramp),u_opacity:new D.Uniform1f(J,x.u_opacity)}),hillshade:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_image:new D.Uniform1i(J,x.u_image),u_latrange:new D.Uniform2f(J,x.u_latrange),u_light:new D.Uniform2f(J,x.u_light),u_shadow:new D.UniformColor(J,x.u_shadow),u_highlight:new D.UniformColor(J,x.u_highlight),u_accent:new D.UniformColor(J,x.u_accent)}),hillshadePrepare:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_image:new D.Uniform1i(J,x.u_image),u_dimension:new D.Uniform2f(J,x.u_dimension),u_zoom:new D.Uniform1f(J,x.u_zoom),u_unpack:new D.Uniform4f(J,x.u_unpack)}),line:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels)}),lineGradient:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels),u_image:new D.Uniform1i(J,x.u_image),u_image_height:new D.Uniform1f(J,x.u_image_height)}),linePattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_texsize:new D.Uniform2f(J,x.u_texsize),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_image:new D.Uniform1i(J,x.u_image),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade)}),lineSDF:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels),u_patternscale_a:new D.Uniform2f(J,x.u_patternscale_a),u_patternscale_b:new D.Uniform2f(J,x.u_patternscale_b),u_sdfgamma:new D.Uniform1f(J,x.u_sdfgamma),u_image:new D.Uniform1i(J,x.u_image),u_tex_y_a:new D.Uniform1f(J,x.u_tex_y_a),u_tex_y_b:new D.Uniform1f(J,x.u_tex_y_b),u_mix:new D.Uniform1f(J,x.u_mix)}),raster:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_tl_parent:new D.Uniform2f(J,x.u_tl_parent),u_scale_parent:new D.Uniform1f(J,x.u_scale_parent),u_buffer_scale:new D.Uniform1f(J,x.u_buffer_scale),u_fade_t:new D.Uniform1f(J,x.u_fade_t),u_opacity:new D.Uniform1f(J,x.u_opacity),u_image0:new D.Uniform1i(J,x.u_image0),u_image1:new D.Uniform1i(J,x.u_image1),u_brightness_low:new D.Uniform1f(J,x.u_brightness_low),u_brightness_high:new D.Uniform1f(J,x.u_brightness_high),u_saturation_factor:new D.Uniform1f(J,x.u_saturation_factor),u_contrast_factor:new D.Uniform1f(J,x.u_contrast_factor),u_spin_weights:new D.Uniform3f(J,x.u_spin_weights)}),symbolIcon:(J,x)=>({u_is_size_zoom_constant:new D.Uniform1i(J,x.u_is_size_zoom_constant),u_is_size_feature_constant:new D.Uniform1i(J,x.u_is_size_feature_constant),u_size_t:new D.Uniform1f(J,x.u_size_t),u_size:new D.Uniform1f(J,x.u_size),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pitch:new D.Uniform1f(J,x.u_pitch),u_rotate_symbol:new D.Uniform1i(J,x.u_rotate_symbol),u_aspect_ratio:new D.Uniform1f(J,x.u_aspect_ratio),u_fade_change:new D.Uniform1f(J,x.u_fade_change),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_label_plane_matrix:new D.UniformMatrix4f(J,x.u_label_plane_matrix),u_coord_matrix:new D.UniformMatrix4f(J,x.u_coord_matrix),u_is_text:new D.Uniform1i(J,x.u_is_text),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_texsize:new D.Uniform2f(J,x.u_texsize),u_texture:new D.Uniform1i(J,x.u_texture)}),symbolSDF:(J,x)=>({u_is_size_zoom_constant:new D.Uniform1i(J,x.u_is_size_zoom_constant),u_is_size_feature_constant:new D.Uniform1i(J,x.u_is_size_feature_constant),u_size_t:new D.Uniform1f(J,x.u_size_t),u_size:new D.Uniform1f(J,x.u_size),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pitch:new D.Uniform1f(J,x.u_pitch),u_rotate_symbol:new D.Uniform1i(J,x.u_rotate_symbol),u_aspect_ratio:new D.Uniform1f(J,x.u_aspect_ratio),u_fade_change:new D.Uniform1f(J,x.u_fade_change),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_label_plane_matrix:new D.UniformMatrix4f(J,x.u_label_plane_matrix),u_coord_matrix:new D.UniformMatrix4f(J,x.u_coord_matrix),u_is_text:new D.Uniform1i(J,x.u_is_text),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_texsize:new D.Uniform2f(J,x.u_texsize),u_texture:new D.Uniform1i(J,x.u_texture),u_gamma_scale:new D.Uniform1f(J,x.u_gamma_scale),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_is_halo:new D.Uniform1i(J,x.u_is_halo)}),symbolTextAndIcon:(J,x)=>({u_is_size_zoom_constant:new D.Uniform1i(J,x.u_is_size_zoom_constant),u_is_size_feature_constant:new D.Uniform1i(J,x.u_is_size_feature_constant),u_size_t:new D.Uniform1f(J,x.u_size_t),u_size:new D.Uniform1f(J,x.u_size),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pitch:new D.Uniform1f(J,x.u_pitch),u_rotate_symbol:new D.Uniform1i(J,x.u_rotate_symbol),u_aspect_ratio:new D.Uniform1f(J,x.u_aspect_ratio),u_fade_change:new D.Uniform1f(J,x.u_fade_change),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_label_plane_matrix:new D.UniformMatrix4f(J,x.u_label_plane_matrix),u_coord_matrix:new D.UniformMatrix4f(J,x.u_coord_matrix),u_is_text:new D.Uniform1i(J,x.u_is_text),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_texsize:new D.Uniform2f(J,x.u_texsize),u_texsize_icon:new D.Uniform2f(J,x.u_texsize_icon),u_texture:new D.Uniform1i(J,x.u_texture),u_texture_icon:new D.Uniform1i(J,x.u_texture_icon),u_gamma_scale:new D.Uniform1f(J,x.u_gamma_scale),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_is_halo:new D.Uniform1i(J,x.u_is_halo)}),background:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_opacity:new D.Uniform1f(J,x.u_opacity),u_color:new D.UniformColor(J,x.u_color)}),backgroundPattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_opacity:new D.Uniform1f(J,x.u_opacity),u_image:new D.Uniform1i(J,x.u_image),u_pattern_tl_a:new D.Uniform2f(J,x.u_pattern_tl_a),u_pattern_br_a:new D.Uniform2f(J,x.u_pattern_br_a),u_pattern_tl_b:new D.Uniform2f(J,x.u_pattern_tl_b),u_pattern_br_b:new D.Uniform2f(J,x.u_pattern_br_b),u_texsize:new D.Uniform2f(J,x.u_texsize),u_mix:new D.Uniform1f(J,x.u_mix),u_pattern_size_a:new D.Uniform2f(J,x.u_pattern_size_a),u_pattern_size_b:new D.Uniform2f(J,x.u_pattern_size_b),u_scale_a:new D.Uniform1f(J,x.u_scale_a),u_scale_b:new D.Uniform1f(J,x.u_scale_b),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_tile_units_to_pixels:new D.Uniform1f(J,x.u_tile_units_to_pixels)}),terrain:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_texture:new D.Uniform1i(J,x.u_texture),u_ele_delta:new D.Uniform1f(J,x.u_ele_delta)}),terrainDepth:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ele_delta:new D.Uniform1f(J,x.u_ele_delta)}),terrainCoords:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_texture:new D.Uniform1i(J,x.u_texture),u_terrain_coords_id:new D.Uniform1f(J,x.u_terrain_coords_id),u_ele_delta:new D.Uniform1f(J,x.u_ele_delta)})};class gs{constructor(x,Q,G){this.context=x;const X=x.gl;this.buffer=X.createBuffer(),this.dynamicDraw=!!G,this.context.unbindVAO(),x.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,Q.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete Q.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(x){const Q=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),Q.bufferSubData(Q.ELEMENT_ARRAY_BUFFER,0,x.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ja={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Sa{constructor(x,Q,G,X){this.length=Q.length,this.attributes=G,this.itemSize=Q.bytesPerElement,this.dynamicDraw=X,this.context=x;const te=x.gl;this.buffer=te.createBuffer(),x.bindVertexBuffer.set(this.buffer),te.bufferData(te.ARRAY_BUFFER,Q.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete Q.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(x){if(x.length!==this.length)throw new Error(`Length of new data is ${x.length}, which doesn't match current length of ${this.length}`);const Q=this.context.gl;this.bind(),Q.bufferSubData(Q.ARRAY_BUFFER,0,x.arrayBuffer)}enableAttributes(x,Q){for(let G=0;G<this.attributes.length;G++){const X=Q.attributes[this.attributes[G].name];X!==void 0&&x.enableVertexAttribArray(X)}}setVertexAttribPointers(x,Q,G){for(let X=0;X<this.attributes.length;X++){const te=this.attributes[X],Ae=Q.attributes[te.name];Ae!==void 0&&x.vertexAttribPointer(Ae,te.components,x[Ja[te.type]],!1,this.itemSize,te.offset+this.itemSize*(G||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ra=new WeakMap;function Sn(J){if(ra.has(J))return ra.get(J);{const x=J.getParameter(J.VERSION).startsWith("WebGL 2.0");return ra.set(J,x),x}}class pr{constructor(x){this.gl=x.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(x){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $a extends pr{getDefault(){return D.Color.transparent}set(x){const Q=this.current;(x.r!==Q.r||x.g!==Q.g||x.b!==Q.b||x.a!==Q.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)}}class Co extends pr{getDefault(){return 1}set(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)}}class In extends pr{getDefault(){return 0}set(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)}}class sa extends pr{getDefault(){return[!0,!0,!0,!0]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||x[2]!==Q[2]||x[3]!==Q[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)}}class Eo extends pr{getDefault(){return!0}set(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)}}class To extends pr{getDefault(){return 255}set(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)}}class na extends pr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(x){const Q=this.current;(x.func!==Q.func||x.ref!==Q.ref||x.mask!==Q.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)}}class dl extends pr{getDefault(){const x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||x[2]!==Q[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)}}class Ko extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.STENCIL_TEST):Q.disable(Q.STENCIL_TEST),this.current=x,this.dirty=!1}}class Go extends pr{getDefault(){return[0,1]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)}}class So extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.DEPTH_TEST):Q.disable(Q.DEPTH_TEST),this.current=x,this.dirty=!1}}class Wo extends pr{getDefault(){return this.gl.LESS}set(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)}}class cn extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.BLEND):Q.disable(Q.BLEND),this.current=x,this.dirty=!1}}class Rn extends pr{getDefault(){const x=this.gl;return[x.ONE,x.ZERO]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)}}class Ia extends pr{getDefault(){return D.Color.transparent}set(x){const Q=this.current;(x.r!==Q.r||x.g!==Q.g||x.b!==Q.b||x.a!==Q.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)}}class eo extends pr{getDefault(){return this.gl.FUNC_ADD}set(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)}}class Fa extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.CULL_FACE):Q.disable(Q.CULL_FACE),this.current=x,this.dirty=!1}}class gn extends pr{getDefault(){return this.gl.BACK}set(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)}}class aa extends pr{getDefault(){return this.gl.CCW}set(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)}}class Ds extends pr{getDefault(){return null}set(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)}}class oa extends pr{getDefault(){return this.gl.TEXTURE0}set(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)}}class hn extends pr{getDefault(){const x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||x[2]!==Q[2]||x[3]!==Q[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)}}class Rs extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindFramebuffer(Q.FRAMEBUFFER,x),this.current=x,this.dirty=!1}}class la extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindRenderbuffer(Q.RENDERBUFFER,x),this.current=x,this.dirty=!1}}class Hn extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindTexture(Q.TEXTURE_2D,x),this.current=x,this.dirty=!1}}class to extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindBuffer(Q.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}}class io extends pr{getDefault(){return null}set(x){const Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1}}class gr extends pr{getDefault(){return null}set(x){var Q;if(x===this.current&&!this.dirty)return;const G=this.gl;Sn(G)?G.bindVertexArray(x):(Q=G.getExtension("OES_vertex_array_object"))===null||Q===void 0||Q.bindVertexArrayOES(x),this.current=x,this.dirty=!1}}class Js extends pr{getDefault(){return 4}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.pixelStorei(Q.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}}class pl extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}}class qo extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}}class mn extends pr{constructor(x,Q){super(x),this.context=x,this.parent=Q}getDefault(){return null}}class Io extends mn{setDirty(){this.dirty=!0}set(x){if(x===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Q=this.gl;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}}class Xo extends mn{set(x){if(x===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Q=this.gl;Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_ATTACHMENT,Q.RENDERBUFFER,x),this.current=x,this.dirty=!1}}class Hs extends mn{set(x){if(x===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Q=this.gl;Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_STENCIL_ATTACHMENT,Q.RENDERBUFFER,x),this.current=x,this.dirty=!1}}class ka{constructor(x,Q,G,X,te){this.context=x,this.width=Q,this.height=G;const Ae=x.gl,he=this.framebuffer=Ae.createFramebuffer();if(this.colorAttachment=new Io(x,he),X)this.depthAttachment=te?new Hs(x,he):new Xo(x,he);else if(te)throw new Error("Stencil cannot be setted without depth");if(Ae.checkFramebufferStatus(Ae.FRAMEBUFFER)!==Ae.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const x=this.context.gl,Q=this.colorAttachment.get();if(Q&&x.deleteTexture(Q),this.depthAttachment){const G=this.depthAttachment.get();G&&x.deleteRenderbuffer(G)}x.deleteFramebuffer(this.framebuffer)}}class Ur{constructor(x,Q,G){this.blendFunction=x,this.blendColor=Q,this.mask=G}}Ur.Replace=[1,0],Ur.disabled=new Ur(Ur.Replace,D.Color.transparent,[!1,!1,!1,!1]),Ur.unblended=new Ur(Ur.Replace,D.Color.transparent,[!0,!0,!0,!0]),Ur.alphaBlended=new Ur([1,771],D.Color.transparent,[!0,!0,!0,!0]);class $s{constructor(x){var Q,G;if(this.gl=x,this.clearColor=new $a(this),this.clearDepth=new Co(this),this.clearStencil=new In(this),this.colorMask=new sa(this),this.depthMask=new Eo(this),this.stencilMask=new To(this),this.stencilFunc=new na(this),this.stencilOp=new dl(this),this.stencilTest=new Ko(this),this.depthRange=new Go(this),this.depthTest=new So(this),this.depthFunc=new Wo(this),this.blend=new cn(this),this.blendFunc=new Rn(this),this.blendColor=new Ia(this),this.blendEquation=new eo(this),this.cullFace=new Fa(this),this.cullFaceSide=new gn(this),this.frontFace=new aa(this),this.program=new Ds(this),this.activeTexture=new oa(this),this.viewport=new hn(this),this.bindFramebuffer=new Rs(this),this.bindRenderbuffer=new la(this),this.bindTexture=new Hn(this),this.bindVertexBuffer=new to(this),this.bindElementBuffer=new io(this),this.bindVertexArray=new gr(this),this.pixelStoreUnpack=new Js(this),this.pixelStoreUnpackPremultiplyAlpha=new pl(this),this.pixelStoreUnpackFlipY=new qo(this),this.extTextureFilterAnisotropic=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=x.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=x.getParameter(x.MAX_TEXTURE_SIZE),Sn(x)){this.HALF_FLOAT=x.HALF_FLOAT;const X=x.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(Q=x.RGBA16F)!==null&&Q!==void 0?Q:X==null?void 0:X.RGBA16F_EXT,this.RGB16F=(G=x.RGB16F)!==null&&G!==void 0?G:X==null?void 0:X.RGB16F_EXT,x.getExtension("EXT_color_buffer_float")}else{x.getExtension("EXT_color_buffer_half_float"),x.getExtension("OES_texture_half_float_linear");const X=x.getExtension("OES_texture_half_float");this.HALF_FLOAT=X==null?void 0:X.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(x,Q){return new gs(this,x,Q)}createVertexBuffer(x,Q,G){return new Sa(this,x,Q,G)}createRenderbuffer(x,Q,G){const X=this.gl,te=X.createRenderbuffer();return this.bindRenderbuffer.set(te),X.renderbufferStorage(X.RENDERBUFFER,x,Q,G),this.bindRenderbuffer.set(null),te}createFramebuffer(x,Q,G,X){return new ka(this,x,Q,G,X)}clear({color:x,depth:Q,stencil:G}){const X=this.gl;let te=0;x&&(te|=X.COLOR_BUFFER_BIT,this.clearColor.set(x),this.colorMask.set([!0,!0,!0,!0])),Q!==void 0&&(te|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),G!==void 0&&(te|=X.STENCIL_BUFFER_BIT,this.clearStencil.set(G),this.stencilMask.set(255)),X.clear(te)}setCullFace(x){x.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(x.mode),this.frontFace.set(x.frontFace))}setDepthMode(x){x.func!==this.gl.ALWAYS||x.mask?(this.depthTest.set(!0),this.depthFunc.set(x.func),this.depthMask.set(x.mask),this.depthRange.set(x.range)):this.depthTest.set(!1)}setStencilMode(x){x.test.func!==this.gl.ALWAYS||x.mask?(this.stencilTest.set(!0),this.stencilMask.set(x.mask),this.stencilOp.set([x.fail,x.depthFail,x.pass]),this.stencilFunc.set({func:x.test.func,ref:x.ref,mask:x.test.mask})):this.stencilTest.set(!1)}setColorMode(x){D.deepEqual(x.blendFunction,Ur.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(x.blendFunction),this.blendColor.set(x.blendColor)),this.colorMask.set(x.mask)}createVertexArray(){var x;return Sn(this.gl)?this.gl.createVertexArray():(x=this.gl.getExtension("OES_vertex_array_object"))===null||x===void 0?void 0:x.createVertexArrayOES()}deleteVertexArray(x){var Q;return Sn(this.gl)?this.gl.deleteVertexArray(x):(Q=this.gl.getExtension("OES_vertex_array_object"))===null||Q===void 0?void 0:Q.deleteVertexArrayOES(x)}unbindVAO(){this.bindVertexArray.set(null)}}class Ji{constructor(x,Q,G){this.func=x,this.mask=Q,this.range=G}}Ji.ReadOnly=!1,Ji.ReadWrite=!0,Ji.disabled=new Ji(519,Ji.ReadOnly,[0,1]);const yr=7680;class Fr{constructor(x,Q,G,X,te,Ae){this.test=x,this.ref=Q,this.mask=G,this.fail=X,this.depthFail=te,this.pass=Ae}}Fr.disabled=new Fr({func:519,mask:0},0,0,yr,yr,yr);class Mr{constructor(x,Q,G){this.enable=x,this.mode=Q,this.frontFace=G}}let zn;function Da(J,x,Q,G,X,te,Ae){const he=J.context,ge=he.gl,ve=J.useProgram("collisionBox"),Ce=[];let Se=0,Re=0;for(let At=0;At<G.length;At++){const mt=G[At],It=x.getTile(mt),kt=It.getBucket(Q);if(!kt)continue;let Ot=mt.posMatrix;X[0]===0&&X[1]===0||(Ot=J.translatePosMatrix(mt.posMatrix,It,X,te));const Wt=Ae?kt.textCollisionBox:kt.iconCollisionBox,zt=kt.collisionCircleArray;if(zt.length>0){const Jt=D.create(),Bi=Ot;D.mul(Jt,kt.placementInvProjMatrix,J.transform.glCoordMatrix),D.mul(Jt,Jt,kt.placementViewportMatrix),Ce.push({circleArray:zt,circleOffset:Re,transform:Bi,invTransform:Jt,coord:mt}),Se+=zt.length/4,Re=Se}Wt&&ve.draw(he,ge.LINES,Ji.disabled,Fr.disabled,J.colorModeForRenderPass(),Mr.disabled,Qn(Ot,J.transform,It),J.style.map.terrain&&J.style.map.terrain.getTerrainData(mt),Q.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,null,J.transform.zoom,null,null,Wt.collisionVertexBuffer)}if(!Ae||!Ce.length)return;const it=J.useProgram("collisionCircle"),tt=new D.CollisionCircleLayoutArray;tt.resize(4*Se),tt._trim();let at=0;for(const At of Ce)for(let mt=0;mt<At.circleArray.length/4;mt++){const It=4*mt,kt=At.circleArray[It+0],Ot=At.circleArray[It+1],Wt=At.circleArray[It+2],zt=At.circleArray[It+3];tt.emplace(at++,kt,Ot,Wt,zt,0),tt.emplace(at++,kt,Ot,Wt,zt,1),tt.emplace(at++,kt,Ot,Wt,zt,2),tt.emplace(at++,kt,Ot,Wt,zt,3)}(!zn||zn.length<2*Se)&&(zn=function(At){const mt=2*At,It=new D.QuadTriangleArray;It.resize(mt),It._trim();for(let kt=0;kt<mt;kt++){const Ot=6*kt;It.uint16[Ot+0]=4*kt+0,It.uint16[Ot+1]=4*kt+1,It.uint16[Ot+2]=4*kt+2,It.uint16[Ot+3]=4*kt+2,It.uint16[Ot+4]=4*kt+3,It.uint16[Ot+5]=4*kt+0}return It}(Se));const Je=he.createIndexBuffer(zn,!0),pt=he.createVertexBuffer(tt,D.collisionCircleLayout.members,!0);for(const At of Ce){const mt={u_matrix:At.transform,u_inv_matrix:At.invTransform,u_camera_to_center_distance:(Et=J.transform).cameraToCenterDistance,u_viewport_size:[Et.width,Et.height]};it.draw(he,ge.TRIANGLES,Ji.disabled,Fr.disabled,J.colorModeForRenderPass(),Mr.disabled,mt,J.style.map.terrain&&J.style.map.terrain.getTerrainData(At.coord),Q.id,pt,Je,D.SegmentVector.simpleSegment(0,2*At.circleOffset,At.circleArray.length,At.circleArray.length/2),null,J.transform.zoom,null,null,null)}var Et;pt.destroy(),Je.destroy()}Mr.disabled=new Mr(!1,1029,2305),Mr.backCCW=new Mr(!0,1029,2305);const ro=D.identity(new Float32Array(16));function gl(J,x,Q,G,X,te){const{horizontalAlign:Ae,verticalAlign:he}=D.getAnchorAlignment(J);return new D.Point((-(Ae-.5)*x/X+G[0])*te,(-(he-.5)*Q/X+G[1])*te)}function Fo(J,x,Q,G,X,te,Ae,he,ge,ve,Ce){const Se=J.text.placedSymbolArray,Re=J.text.dynamicLayoutVertexArray,it=J.icon.dynamicLayoutVertexArray,tt={};Re.clear();for(let at=0;at<Se.length;at++){const Je=Se.get(at),pt=Je.hidden||!Je.crossTileID||J.allowVerticalPlacement&&!Je.placedOrientation?null:G[Je.crossTileID];if(pt){const Et=new D.Point(Je.anchorX,Je.anchorY),At=mi(Et,Q?Ae:te,Ce),mt=wi(X.cameraToCenterDistance,At.signedDistanceFromCamera);let It=D.evaluateSizeForFeature(J.textSizeData,ge,Je)*mt/D.ONE_EM;Q&&(It*=J.tilePixelRatio/he);const{width:kt,height:Ot,anchor:Wt,textOffset:zt,textBoxScale:Jt}=pt,Bi=gl(Wt,kt,Ot,zt,Jt,It),ar=Q?mi(Et.add(Bi),te,Ce).point:At.point.add(x?Bi.rotate(-X.angle):Bi),oi=J.allowVerticalPlacement&&Je.placedOrientation===D.WritingMode.vertical?Math.PI/2:0;for(let ki=0;ki<Je.numGlyphs;ki++)D.addDynamicAttributes(Re,ar,oi);ve&&Je.associatedIconIndex>=0&&(tt[Je.associatedIconIndex]={shiftedAnchor:ar,angle:oi})}else ye(Je.numGlyphs,Re)}if(ve){it.clear();const at=J.icon.placedSymbolArray;for(let Je=0;Je<at.length;Je++){const pt=at.get(Je);if(pt.hidden)ye(pt.numGlyphs,it);else{const Et=tt[Je];if(Et)for(let At=0;At<pt.numGlyphs;At++)D.addDynamicAttributes(it,Et.shiftedAnchor,Et.angle);else ye(pt.numGlyphs,it)}}J.icon.dynamicLayoutVertexBuffer.updateData(it)}J.text.dynamicLayoutVertexBuffer.updateData(Re)}function so(J,x,Q){return Q.iconsInText&&x?"symbolTextAndIcon":J?"symbolSDF":"symbolIcon"}function no(J,x,Q,G,X,te,Ae,he,ge,ve,Ce,Se){const Re=J.context,it=Re.gl,tt=J.transform,at=he==="map",Je=ge==="map",pt=he!=="viewport"&&Q.layout.get("symbol-placement")!=="point",Et=at&&!Je&&!pt,At=!Q.layout.get("symbol-sort-key").isConstant();let mt=!1;const It=J.depthModeForSublayer(0,Ji.ReadOnly),kt=Q._unevaluatedLayout.hasValue("text-variable-anchor")||Q._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ot=[];for(const Wt of G){const zt=x.getTile(Wt),Jt=zt.getBucket(Q);if(!Jt)continue;const Bi=X?Jt.text:Jt.icon;if(!Bi||!Bi.segments.get().length||!Bi.hasVisibleVertices)continue;const ar=Bi.programConfigurations.get(Q.id),oi=X||Jt.sdfIcons,ki=X?Jt.textSizeData:Jt.iconSizeData,xi=Je||tt.pitch!==0,Hr=J.useProgram(so(oi,X,Jt),ar),or=D.evaluateSizeForZoom(ki,tt.zoom),Mi=J.style.map.terrain&&J.style.map.terrain.getTerrainData(Wt);let lr,Kr,kr,rn,bs=[0,0],Zr=null;if(X)Kr=zt.glyphAtlasTexture,kr=it.LINEAR,lr=zt.glyphAtlasTexture.size,Jt.iconsInText&&(bs=zt.imageAtlasTexture.size,Zr=zt.imageAtlasTexture,rn=xi||J.options.rotating||J.options.zooming||ki.kind==="composite"||ki.kind==="camera"?it.LINEAR:it.NEAREST);else{const hs=Q.layout.get("icon-size").constantOr(0)!==1||Jt.iconsNeedLinear;Kr=zt.imageAtlasTexture,kr=oi||J.options.rotating||J.options.zooming||hs||xi?it.LINEAR:it.NEAREST,lr=zt.imageAtlasTexture.size}const Vs=Oe(zt,1,J.transform.zoom),Un=Wi(Wt.posMatrix,Je,at,J.transform,Vs),wn=Zt(Wt.posMatrix,Je,at,J.transform,Vs),Mn=kt&&Jt.hasTextData(),fo=Q.layout.get("icon-text-fit")!=="none"&&Mn&&Jt.hasIconData();if(pt){const hs=J.style.map.terrain?(Es,Gr)=>J.style.map.terrain.getElevation(Wt,Es,Gr):null,as=Q.layout.get("text-rotation-alignment")==="map";tr(Jt,Wt.posMatrix,J,X,Un,wn,Je,ve,as,hs)}const ga=J.translatePosMatrix(Wt.posMatrix,zt,te,Ae),Xn=pt||X&&kt||fo?ro:Un,is=J.translatePosMatrix(wn,zt,te,Ae,!0),cs=oi&&Q.paint.get(X?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Cs;Cs=oi?Jt.iconsInText?Ta(ki.kind,or,Et,Je,J,ga,Xn,is,lr,bs):Ea(ki.kind,or,Et,Je,J,ga,Xn,is,X,lr):Ca(ki.kind,or,Et,Je,J,ga,Xn,is,X,lr);const po={program:Hr,buffers:Bi,uniformValues:Cs,atlasTexture:Kr,atlasTextureIcon:Zr,atlasInterpolation:kr,atlasInterpolationIcon:rn,isSDF:oi,hasHalo:cs};if(At&&Jt.canOverlap){mt=!0;const hs=Bi.segments.get();for(const as of hs)Ot.push({segments:new D.SegmentVector([as]),sortKey:as.sortKey,state:po,terrainData:Mi})}else Ot.push({segments:Bi.segments,sortKey:0,state:po,terrainData:Mi})}mt&&Ot.sort((Wt,zt)=>Wt.sortKey-zt.sortKey);for(const Wt of Ot){const zt=Wt.state;if(Re.activeTexture.set(it.TEXTURE0),zt.atlasTexture.bind(zt.atlasInterpolation,it.CLAMP_TO_EDGE),zt.atlasTextureIcon&&(Re.activeTexture.set(it.TEXTURE1),zt.atlasTextureIcon&&zt.atlasTextureIcon.bind(zt.atlasInterpolationIcon,it.CLAMP_TO_EDGE)),zt.isSDF){const Jt=zt.uniformValues;zt.hasHalo&&(Jt.u_is_halo=1,Ua(zt.buffers,Wt.segments,Q,J,zt.program,It,Ce,Se,Jt,Wt.terrainData)),Jt.u_is_halo=0}Ua(zt.buffers,Wt.segments,Q,J,zt.program,It,Ce,Se,zt.uniformValues,Wt.terrainData)}}function Ua(J,x,Q,G,X,te,Ae,he,ge,ve){const Ce=G.context;X.draw(Ce,Ce.gl.TRIANGLES,te,Ae,he,Mr.disabled,ge,ve,Q.id,J.layoutVertexBuffer,J.indexBuffer,x,Q.paint,G.transform.zoom,J.programConfigurations.get(Q.id),J.dynamicLayoutVertexBuffer,J.opacityVertexBuffer)}function ao(J,x,Q,G,X){if(!Q||!G||!G.imageAtlas)return;const te=G.imageAtlas.patternPositions;let Ae=te[Q.to.toString()],he=te[Q.from.toString()];if(!Ae||!he){const ge=X.getPaintProperty(x);Ae=te[ge],he=te[ge]}Ae&&he&&J.setConstantPatternPositions(Ae,he)}function oo(J,x,Q,G,X,te,Ae){const he=J.context.gl,ge="fill-pattern",ve=Q.paint.get(ge),Ce=ve&&ve.constantOr(1),Se=Q.getCrossfadeParameters();let Re,it,tt,at,Je;Ae?(it=Ce&&!Q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Re=he.LINES):(it=Ce?"fillPattern":"fill",Re=he.TRIANGLES);const pt=ve.constantOr(null);for(const Et of G){const At=x.getTile(Et);if(Ce&&!At.patternsLoaded())continue;const mt=At.getBucket(Q);if(!mt)continue;const It=mt.programConfigurations.get(Q.id),kt=J.useProgram(it,It),Ot=J.style.map.terrain&&J.style.map.terrain.getTerrainData(Et);Ce&&(J.context.activeTexture.set(he.TEXTURE0),At.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),It.updatePaintBuffers(Se)),ao(It,ge,pt,At,Q);const Wt=Ot?Et:null,zt=J.translatePosMatrix(Wt?Wt.posMatrix:Et.posMatrix,At,Q.paint.get("fill-translate"),Q.paint.get("fill-translate-anchor"));if(Ae){at=mt.indexBuffer2,Je=mt.segments2;const Jt=[he.drawingBufferWidth,he.drawingBufferHeight];tt=it==="fillOutlinePattern"&&Ce?ta(zt,J,Se,At,Jt):An(zt,Jt)}else at=mt.indexBuffer,Je=mt.segments,tt=Ce?Zs(zt,J,Se,At):xo(zt);kt.draw(J.context,Re,X,J.stencilModeForClipping(Et),te,Mr.disabled,tt,Ot,Q.id,mt.layoutVertexBuffer,at,Je,Q.paint,J.transform.zoom,It)}}function Ma(J,x,Q,G,X,te,Ae){const he=J.context,ge=he.gl,ve="fill-extrusion-pattern",Ce=Q.paint.get(ve),Se=Ce.constantOr(1),Re=Q.getCrossfadeParameters(),it=Q.paint.get("fill-extrusion-opacity"),tt=Ce.constantOr(null);for(const at of G){const Je=x.getTile(at),pt=Je.getBucket(Q);if(!pt)continue;const Et=J.style.map.terrain&&J.style.map.terrain.getTerrainData(at),At=pt.programConfigurations.get(Q.id),mt=J.useProgram(Se?"fillExtrusionPattern":"fillExtrusion",At);Se&&(J.context.activeTexture.set(ge.TEXTURE0),Je.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),At.updatePaintBuffers(Re)),ao(At,ve,tt,Je,Q);const It=J.translatePosMatrix(at.posMatrix,Je,Q.paint.get("fill-extrusion-translate"),Q.paint.get("fill-extrusion-translate-anchor")),kt=Q.paint.get("fill-extrusion-vertical-gradient"),Ot=Se?es(It,J,kt,it,at,Re,Je):Qr(It,J,kt,it);mt.draw(he,he.gl.TRIANGLES,X,te,Ae,Mr.backCCW,Ot,Et,Q.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,Q.paint,J.transform.zoom,At,J.style.map.terrain&&pt.centroidVertexBuffer)}}function Nn(J,x,Q,G,X,te,Ae){const he=J.context,ge=he.gl,ve=Q.fbo;if(!ve)return;const Ce=J.useProgram("hillshade"),Se=J.style.map.terrain&&J.style.map.terrain.getTerrainData(x);he.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,ve.colorAttachment.get()),Ce.draw(he,ge.TRIANGLES,X,te,Ae,Mr.disabled,((Re,it,tt,at)=>{const Je=tt.paint.get("hillshade-shadow-color"),pt=tt.paint.get("hillshade-highlight-color"),Et=tt.paint.get("hillshade-accent-color");let At=tt.paint.get("hillshade-illumination-direction")*(Math.PI/180);tt.paint.get("hillshade-illumination-anchor")==="viewport"&&(At-=Re.transform.angle);const mt=!Re.options.moving;return{u_matrix:at?at.posMatrix:Re.transform.calculatePosMatrix(it.tileID.toUnwrapped(),mt),u_image:0,u_latrange:Bo(0,it.tileID),u_light:[tt.paint.get("hillshade-exaggeration"),At],u_shadow:Je,u_highlight:pt,u_accent:Et}})(J,Q,G,Se?x:null),Se,G.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments)}function Pa(J,x,Q,G,X,te){const Ae=J.context,he=Ae.gl,ge=x.dem;if(ge&&ge.data){const ve=ge.dim,Ce=ge.stride,Se=ge.getPixels();if(Ae.activeTexture.set(he.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),x.demTexture=x.demTexture||J.getTileTexture(Ce),x.demTexture){const it=x.demTexture;it.update(Se,{premultiply:!1}),it.bind(he.NEAREST,he.CLAMP_TO_EDGE)}else x.demTexture=new _t(Ae,Se,he.RGBA,{premultiply:!1}),x.demTexture.bind(he.NEAREST,he.CLAMP_TO_EDGE);Ae.activeTexture.set(he.TEXTURE0);let Re=x.fbo;if(!Re){const it=new _t(Ae,{width:ve,height:ve,data:null},he.RGBA);it.bind(he.LINEAR,he.CLAMP_TO_EDGE),Re=x.fbo=Ae.createFramebuffer(ve,ve,!0,!1),Re.colorAttachment.set(it.texture)}Ae.bindFramebuffer.set(Re.framebuffer),Ae.viewport.set([0,0,ve,ve]),J.useProgram("hillshadePrepare").draw(Ae,he.TRIANGLES,G,X,te,Mr.disabled,((it,tt)=>{const at=tt.stride,Je=D.create();return D.ortho(Je,0,D.EXTENT,-D.EXTENT,0,0,1),D.translate(Je,Je,[0,-D.EXTENT,0]),{u_matrix:Je,u_image:1,u_dimension:[at,at],u_zoom:it.overscaledZ,u_unpack:tt.getUnpackVector()}})(x.tileID,ge),null,Q.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments),x.needsHillshadePrepare=!1}}function ml(J,x,Q,G,X,te){const Ae=G.paint.get("raster-fade-duration");if(!te&&Ae>0){const he=D.browser.now(),ge=(he-J.timeAdded)/Ae,ve=x?(he-x.timeAdded)/Ae:-1,Ce=Q.getSource(),Se=X.coveringZoomLevel({tileSize:Ce.tileSize,roundZoom:Ce.roundZoom}),Re=!x||Math.abs(x.tileID.overscaledZ-Se)>Math.abs(J.tileID.overscaledZ-Se),it=Re&&J.refreshedUponExpiration?1:D.clamp(Re?ge:1-ve,0,1);return J.refreshedUponExpiration&&ge>=1&&(J.refreshedUponExpiration=!1),x?{opacity:1,mix:1-it}:{opacity:it,mix:0}}return{opacity:1,mix:0}}const Yo=new D.Color(1,0,0,1),Wr=new D.Color(0,1,0,1),Vn=new D.Color(0,0,1,1),Us=new D.Color(1,0,1,1),ko=new D.Color(0,1,1,1);function Aa(J,x,Q,G){en(J,0,x+Q/2,J.transform.width,Q,G)}function Do(J,x,Q,G){en(J,x-Q/2,0,Q,J.transform.height,G)}function en(J,x,Q,G,X,te){const Ae=J.context,he=Ae.gl;he.enable(he.SCISSOR_TEST),he.scissor(x*J.pixelRatio,Q*J.pixelRatio,G*J.pixelRatio,X*J.pixelRatio),Ae.clear({color:te}),he.disable(he.SCISSOR_TEST)}function xs(J,x,Q){const G=J.context,X=G.gl,te=Q.posMatrix,Ae=J.useProgram("debug"),he=Ji.disabled,ge=Fr.disabled,ve=J.colorModeForRenderPass(),Ce="$debug",Se=J.style.map.terrain&&J.style.map.terrain.getTerrainData(Q);G.activeTexture.set(X.TEXTURE0);const Re=x.getTileByID(Q.key).latestRawTileData,it=Math.floor((Re&&Re.byteLength||0)/1024),tt=x.getTile(Q).tileSize,at=512/Math.min(tt,512)*(Q.overscaledZ/J.transform.zoom)*.5;let Je=Q.canonical.toString();Q.overscaledZ!==Q.canonical.z&&(Je+=` => ${Q.overscaledZ}`),function(pt,Et){pt.initDebugOverlayCanvas();const At=pt.debugOverlayCanvas,mt=pt.context.gl,It=pt.debugOverlayCanvas.getContext("2d");It.clearRect(0,0,At.width,At.height),It.shadowColor="white",It.shadowBlur=2,It.lineWidth=1.5,It.strokeStyle="white",It.textBaseline="top",It.font="bold 36px Open Sans, sans-serif",It.fillText(Et,5,5),It.strokeText(Et,5,5),pt.debugOverlayTexture.update(At),pt.debugOverlayTexture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE)}(J,`${Je} ${it}kB`),Ae.draw(G,X.TRIANGLES,he,ge,Ur.alphaBlended,Mr.disabled,wa(te,D.Color.transparent,at),null,Ce,J.debugBuffer,J.quadTriangleIndexBuffer,J.debugSegments),Ae.draw(G,X.LINE_STRIP,he,ge,ve,Mr.disabled,wa(te,D.Color.red),Se,Ce,J.debugBuffer,J.tileBorderIndexBuffer,J.debugSegments)}function Kn(J,x,Q){const G=J.context,X=G.gl,te=J.colorModeForRenderPass(),Ae=new Ji(X.LEQUAL,Ji.ReadWrite,J.depthRangeFor3D),he=J.useProgram("terrain"),ge=x.getTerrainMesh();G.bindFramebuffer.set(null),G.viewport.set([0,0,J.width,J.height]);for(const ve of Q){const Ce=J.renderToTexture.getTexture(ve),Se=x.getTerrainData(ve.tileID);G.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Ce.texture);const Re={u_matrix:J.transform.calculatePosMatrix(ve.tileID.toUnwrapped()),u_texture:0,u_ele_delta:x.getMeshFrameDelta(J.transform.zoom)};he.draw(G,X.TRIANGLES,Ae,Fr.disabled,te,Mr.backCCW,Re,Se,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}class jo{constructor(x,Q){this.context=new $s(x),this.transform=Q,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:D.create(),renderTime:0},this.setup(),this.numSublayers=$t.maxUnderzooming+$t.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _r}resize(x,Q,G){if(this.width=Math.floor(x*G),this.height=Math.floor(Q*G),this.pixelRatio=G,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const X of this.style._order)this.style._layers[X].resize()}setup(){const x=this.context,Q=new D.PosArray;Q.emplaceBack(0,0),Q.emplaceBack(D.EXTENT,0),Q.emplaceBack(0,D.EXTENT),Q.emplaceBack(D.EXTENT,D.EXTENT),this.tileExtentBuffer=x.createVertexBuffer(Q,jr.members),this.tileExtentSegments=D.SegmentVector.simpleSegment(0,0,4,2);const G=new D.PosArray;G.emplaceBack(0,0),G.emplaceBack(D.EXTENT,0),G.emplaceBack(0,D.EXTENT),G.emplaceBack(D.EXTENT,D.EXTENT),this.debugBuffer=x.createVertexBuffer(G,jr.members),this.debugSegments=D.SegmentVector.simpleSegment(0,0,4,5);const X=new D.RasterBoundsArray;X.emplaceBack(0,0,0,0),X.emplaceBack(D.EXTENT,0,D.EXTENT,0),X.emplaceBack(0,D.EXTENT,0,D.EXTENT),X.emplaceBack(D.EXTENT,D.EXTENT,D.EXTENT,D.EXTENT),this.rasterBoundsBuffer=x.createVertexBuffer(X,Te.members),this.rasterBoundsSegments=D.SegmentVector.simpleSegment(0,0,4,2);const te=new D.PosArray;te.emplaceBack(0,0),te.emplaceBack(1,0),te.emplaceBack(0,1),te.emplaceBack(1,1),this.viewportBuffer=x.createVertexBuffer(te,jr.members),this.viewportSegments=D.SegmentVector.simpleSegment(0,0,4,2);const Ae=new D.LineStripIndexArray;Ae.emplaceBack(0),Ae.emplaceBack(1),Ae.emplaceBack(3),Ae.emplaceBack(2),Ae.emplaceBack(0),this.tileBorderIndexBuffer=x.createIndexBuffer(Ae);const he=new D.TriangleIndexArray;he.emplaceBack(0,1,2),he.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=x.createIndexBuffer(he);const ge=this.context.gl;this.stencilClearMode=new Fr({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)}clearStencil(){const x=this.context,Q=x.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const G=D.create();D.ortho(G,0,this.width,this.height,0,0,1),D.scale(G,G,[Q.drawingBufferWidth,Q.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(x,Q.TRIANGLES,Ji.disabled,this.stencilClearMode,Ur.disabled,Mr.disabled,Nr(G),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(x,Q){if(this.currentStencilSource===x.source||!x.isTileClipped()||!Q||!Q.length)return;this.currentStencilSource=x.source;const G=this.context,X=G.gl;this.nextStencilID+Q.length>256&&this.clearStencil(),G.setColorMode(Ur.disabled),G.setDepthMode(Ji.disabled);const te=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Ae of Q){const he=this._tileClippingMaskIDs[Ae.key]=this.nextStencilID++,ge=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Ae);te.draw(G,X.TRIANGLES,Ji.disabled,new Fr({func:X.ALWAYS,mask:0},he,255,X.KEEP,X.KEEP,X.REPLACE),Ur.disabled,Mr.disabled,Nr(Ae.posMatrix),ge,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const x=this.nextStencilID++,Q=this.context.gl;return new Fr({func:Q.NOTEQUAL,mask:255},x,255,Q.KEEP,Q.KEEP,Q.REPLACE)}stencilModeForClipping(x){const Q=this.context.gl;return new Fr({func:Q.EQUAL,mask:255},this._tileClippingMaskIDs[x.key],0,Q.KEEP,Q.KEEP,Q.REPLACE)}stencilConfigForOverlap(x){const Q=this.context.gl,G=x.sort((Ae,he)=>he.overscaledZ-Ae.overscaledZ),X=G[G.length-1].overscaledZ,te=G[0].overscaledZ-X+1;if(te>1){this.currentStencilSource=void 0,this.nextStencilID+te>256&&this.clearStencil();const Ae={};for(let he=0;he<te;he++)Ae[he+X]=new Fr({func:Q.GEQUAL,mask:255},he+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=te,[Ae,G]}return[{[X]:Fr.disabled},G]}colorModeForRenderPass(){const x=this.context.gl;return this._showOverdrawInspector?new Ur([x.CONSTANT_COLOR,x.ONE],new D.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ur.unblended:Ur.alphaBlended}depthModeForSublayer(x,Q,G){if(!this.opaquePassEnabledForLayer())return Ji.disabled;const X=1-((1+this.currentLayer)*this.numSublayers+x)*this.depthEpsilon;return new Ji(G||this.context.gl.LEQUAL,Q,[X,X])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(x,Q){this.style=x,this.options=Q,this.lineAtlas=x.lineAtlas,this.imageManager=x.imageManager,this.glyphManager=x.glyphManager,this.symbolFadeChange=x.placement.symbolFadeChange(D.browser.now()),this.imageManager.beginFrame();const G=this.style._order,X=this.style.sourceCaches,te={},Ae={},he={};for(const ge in X){const ve=X[ge];ve.used&&ve.prepare(this.context),te[ge]=ve.getVisibleCoordinates(),Ae[ge]=te[ge].slice().reverse(),he[ge]=ve.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ge=0;ge<G.length;ge++)if(this.style._layers[G[ge]].is3D()){this.opaquePassCutoff=ge;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const ge=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!D.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||ge.length)&&(D.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ve,Ce){const Se=ve.context,Re=Se.gl,it=Ur.unblended,tt=new Ji(Re.LEQUAL,Ji.ReadWrite,[0,1]),at=Ce.getTerrainMesh(),Je=Ce.sourceCache.getRenderableTiles(),pt=ve.useProgram("terrainDepth");Se.bindFramebuffer.set(Ce.getFramebuffer("depth").framebuffer),Se.viewport.set([0,0,ve.width/devicePixelRatio,ve.height/devicePixelRatio]),Se.clear({color:D.Color.transparent,depth:1});for(const Et of Je){const At=Ce.getTerrainData(Et.tileID),mt={u_matrix:ve.transform.calculatePosMatrix(Et.tileID.toUnwrapped()),u_ele_delta:Ce.getMeshFrameDelta(ve.transform.zoom)};pt.draw(Se,Re.TRIANGLES,tt,Fr.disabled,it,Mr.backCCW,mt,At,"terrain",at.vertexBuffer,at.indexBuffer,at.segments)}Se.bindFramebuffer.set(null),Se.viewport.set([0,0,ve.width,ve.height])}(this,this.style.map.terrain),function(ve,Ce){const Se=ve.context,Re=Se.gl,it=Ur.unblended,tt=new Ji(Re.LEQUAL,Ji.ReadWrite,[0,1]),at=Ce.getTerrainMesh(),Je=Ce.getCoordsTexture(),pt=Ce.sourceCache.getRenderableTiles(),Et=ve.useProgram("terrainCoords");Se.bindFramebuffer.set(Ce.getFramebuffer("coords").framebuffer),Se.viewport.set([0,0,ve.width/devicePixelRatio,ve.height/devicePixelRatio]),Se.clear({color:D.Color.transparent,depth:1}),Ce.coordsIndex=[];for(const At of pt){const mt=Ce.getTerrainData(At.tileID);Se.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,Je.texture);const It={u_matrix:ve.transform.calculatePosMatrix(At.tileID.toUnwrapped()),u_terrain_coords_id:(255-Ce.coordsIndex.length)/255,u_texture:0,u_ele_delta:Ce.getMeshFrameDelta(ve.transform.zoom)};Et.draw(Se,Re.TRIANGLES,tt,Fr.disabled,it,Mr.backCCW,It,mt,"terrain",at.vertexBuffer,at.indexBuffer,at.segments),Ce.coordsIndex.push(At.tileID.key)}Se.bindFramebuffer.set(null),Se.viewport.set([0,0,ve.width,ve.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const ge of G){const ve=this.style._layers[ge];if(!ve.hasOffscreenPass()||ve.isHidden(this.transform.zoom))continue;const Ce=Ae[ve.source];(ve.type==="custom"||Ce.length)&&this.renderLayer(this,X[ve.source],ve,Ce)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:Q.showOverdrawInspector?D.Color.black:D.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Q.showOverdrawInspector,this.depthRangeFor3D=[0,1-(x._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=G.length-1;this.currentLayer>=0;this.currentLayer--){const ge=this.style._layers[G[this.currentLayer]],ve=X[ge.source],Ce=te[ge.source];this._renderTileClippingMasks(ge,Ce),this.renderLayer(this,ve,ge,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<G.length;this.currentLayer++){const ge=this.style._layers[G[this.currentLayer]],ve=X[ge.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ge))continue;const Ce=(ge.type==="symbol"?he:Ae)[ge.source];this._renderTileClippingMasks(ge,te[ge.source]),this.renderLayer(this,ve,ge,Ce)}if(this.options.showTileBoundaries){const ge=function(ve,Ce){let Se=null;const Re=Object.values(ve._layers).flatMap(Je=>Je.source&&!Je.isHidden(Ce)?[ve.sourceCaches[Je.source]]:[]),it=Re.filter(Je=>Je.getSource().type==="vector"),tt=Re.filter(Je=>Je.getSource().type!=="vector"),at=Je=>{(!Se||Se.getSource().maxzoom<Je.getSource().maxzoom)&&(Se=Je)};return it.forEach(Je=>at(Je)),Se||tt.forEach(Je=>at(Je)),Se}(this.style,this.transform.zoom);ge&&function(ve,Ce,Se){for(let Re=0;Re<Se.length;Re++)xs(ve,Ce,Se[Re])}(this,ge,ge.getVisibleCoordinates())}this.options.showPadding&&function(ge){const ve=ge.transform.padding;Aa(ge,ge.transform.height-(ve.top||0),3,Yo),Aa(ge,ve.bottom||0,3,Wr),Do(ge,ve.left||0,3,Vn),Do(ge,ge.transform.width-(ve.right||0),3,Us);const Ce=ge.transform.centerPoint;(function(Se,Re,it,tt){en(Se,Re-1,it-10,2,20,tt),en(Se,Re-10,it-1,20,2,tt)})(ge,Ce.x,ge.transform.height-Ce.y,ko)}(this),this.context.setDefault()}renderLayer(x,Q,G,X){if(!G.isHidden(this.transform.zoom)&&(G.type==="background"||G.type==="custom"||(X||[]).length))switch(this.id=G.id,G.type){case"symbol":(function(te,Ae,he,ge,ve){if(te.renderPass!=="translucent")return;const Ce=Fr.disabled,Se=te.colorModeForRenderPass();(he._unevaluatedLayout.hasValue("text-variable-anchor")||he._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Re,it,tt,at,Je,pt,Et){const At=it.transform,mt=Je==="map",It=pt==="map";for(const kt of Re){const Ot=at.getTile(kt),Wt=Ot.getBucket(tt);if(!Wt||!Wt.text||!Wt.text.segments.get().length)continue;const zt=D.evaluateSizeForZoom(Wt.textSizeData,At.zoom),Jt=Oe(Ot,1,it.transform.zoom),Bi=Wi(kt.posMatrix,It,mt,it.transform,Jt),ar=tt.layout.get("icon-text-fit")!=="none"&&Wt.hasIconData();if(zt){const oi=Math.pow(2,At.zoom-Ot.tileID.overscaledZ);Fo(Wt,mt,It,Et,At,Bi,kt.posMatrix,oi,zt,ar,it.style.map.terrain?(ki,xi)=>it.style.map.terrain.getElevation(kt,ki,xi):null)}}}(ge,te,he,Ae,he.layout.get("text-rotation-alignment"),he.layout.get("text-pitch-alignment"),ve),he.paint.get("icon-opacity").constantOr(1)!==0&&no(te,Ae,he,ge,!1,he.paint.get("icon-translate"),he.paint.get("icon-translate-anchor"),he.layout.get("icon-rotation-alignment"),he.layout.get("icon-pitch-alignment"),he.layout.get("icon-keep-upright"),Ce,Se),he.paint.get("text-opacity").constantOr(1)!==0&&no(te,Ae,he,ge,!0,he.paint.get("text-translate"),he.paint.get("text-translate-anchor"),he.layout.get("text-rotation-alignment"),he.layout.get("text-pitch-alignment"),he.layout.get("text-keep-upright"),Ce,Se),Ae.map.showCollisionBoxes&&(Da(te,Ae,he,ge,he.paint.get("text-translate"),he.paint.get("text-translate-anchor"),!0),Da(te,Ae,he,ge,he.paint.get("icon-translate"),he.paint.get("icon-translate-anchor"),!1))})(x,Q,G,X,this.style.placement.variableOffsets);break;case"circle":(function(te,Ae,he,ge){if(te.renderPass!=="translucent")return;const ve=he.paint.get("circle-opacity"),Ce=he.paint.get("circle-stroke-width"),Se=he.paint.get("circle-stroke-opacity"),Re=!he.layout.get("circle-sort-key").isConstant();if(ve.constantOr(1)===0&&(Ce.constantOr(1)===0||Se.constantOr(1)===0))return;const it=te.context,tt=it.gl,at=te.depthModeForSublayer(0,Ji.ReadOnly),Je=Fr.disabled,pt=te.colorModeForRenderPass(),Et=[];for(let At=0;At<ge.length;At++){const mt=ge[At],It=Ae.getTile(mt),kt=It.getBucket(he);if(!kt)continue;const Ot=kt.programConfigurations.get(he.id),Wt=te.useProgram("circle",Ot),zt=kt.layoutVertexBuffer,Jt=kt.indexBuffer,Bi=te.style.map.terrain&&te.style.map.terrain.getTerrainData(mt),ar={programConfiguration:Ot,program:Wt,layoutVertexBuffer:zt,indexBuffer:Jt,uniformValues:ja(te,mt,It,he),terrainData:Bi};if(Re){const oi=kt.segments.get();for(const ki of oi)Et.push({segments:new D.SegmentVector([ki]),sortKey:ki.sortKey,state:ar})}else Et.push({segments:kt.segments,sortKey:0,state:ar})}Re&&Et.sort((At,mt)=>At.sortKey-mt.sortKey);for(const At of Et){const{programConfiguration:mt,program:It,layoutVertexBuffer:kt,indexBuffer:Ot,uniformValues:Wt,terrainData:zt}=At.state;It.draw(it,tt.TRIANGLES,at,Je,pt,Mr.disabled,Wt,zt,he.id,kt,Ot,At.segments,he.paint,te.transform.zoom,mt)}})(x,Q,G,X);break;case"heatmap":(function(te,Ae,he,ge){if(he.paint.get("heatmap-opacity")!==0)if(te.renderPass==="offscreen"){const ve=te.context,Ce=ve.gl,Se=Fr.disabled,Re=new Ur([Ce.ONE,Ce.ONE],D.Color.transparent,[!0,!0,!0,!0]);(function(it,tt,at){const Je=it.gl;it.activeTexture.set(Je.TEXTURE1),it.viewport.set([0,0,tt.width/4,tt.height/4]);let pt=at.heatmapFbo;if(pt)Je.bindTexture(Je.TEXTURE_2D,pt.colorAttachment.get()),it.bindFramebuffer.set(pt.framebuffer);else{const Et=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,Et),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),pt=at.heatmapFbo=it.createFramebuffer(tt.width/4,tt.height/4,!1,!1),function(At,mt,It,kt){var Ot,Wt;const zt=At.gl,Jt=(Ot=At.HALF_FLOAT)!==null&&Ot!==void 0?Ot:zt.UNSIGNED_BYTE,Bi=(Wt=At.RGBA16F)!==null&&Wt!==void 0?Wt:zt.RGBA;zt.texImage2D(zt.TEXTURE_2D,0,Bi,mt.width/4,mt.height/4,0,zt.RGBA,Jt,null),kt.colorAttachment.set(It)}(it,tt,Et,pt)}})(ve,te,he),ve.clear({color:D.Color.transparent});for(let it=0;it<ge.length;it++){const tt=ge[it];if(Ae.hasRenderableParent(tt))continue;const at=Ae.getTile(tt),Je=at.getBucket(he);if(!Je)continue;const pt=Je.programConfigurations.get(he.id),Et=te.useProgram("heatmap",pt),{zoom:At}=te.transform;Et.draw(ve,Ce.TRIANGLES,Ji.disabled,Se,Re,Mr.disabled,Vo(tt.posMatrix,at,At,he.paint.get("heatmap-intensity")),null,he.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,he.paint,te.transform.zoom,pt)}ve.viewport.set([0,0,te.width,te.height])}else te.renderPass==="translucent"&&(te.context.setColorMode(te.colorModeForRenderPass()),function(ve,Ce){const Se=ve.context,Re=Se.gl,it=Ce.heatmapFbo;if(!it)return;Se.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,it.colorAttachment.get()),Se.activeTexture.set(Re.TEXTURE1);let tt=Ce.colorRampTexture;tt||(tt=Ce.colorRampTexture=new _t(Se,Ce.colorRamp,Re.RGBA)),tt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(Se,Re.TRIANGLES,Ji.disabled,Fr.disabled,ve.colorModeForRenderPass(),Mr.disabled,((at,Je,pt,Et)=>{const At=D.create();D.ortho(At,0,at.width,at.height,0,0,1);const mt=at.context.gl;return{u_matrix:At,u_world:[mt.drawingBufferWidth,mt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Je.paint.get("heatmap-opacity")}})(ve,Ce),null,Ce.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,Ce.paint,ve.transform.zoom)}(te,he))})(x,Q,G,X);break;case"line":(function(te,Ae,he,ge){if(te.renderPass!=="translucent")return;const ve=he.paint.get("line-opacity"),Ce=he.paint.get("line-width");if(ve.constantOr(1)===0||Ce.constantOr(1)===0)return;const Se=te.depthModeForSublayer(0,Ji.ReadOnly),Re=te.colorModeForRenderPass(),it=he.paint.get("line-dasharray"),tt=he.paint.get("line-pattern"),at=tt.constantOr(1),Je=he.paint.get("line-gradient"),pt=he.getCrossfadeParameters(),Et=at?"linePattern":it?"lineSDF":Je?"lineGradient":"line",At=te.context,mt=At.gl;let It=!0;for(const kt of ge){const Ot=Ae.getTile(kt);if(at&&!Ot.patternsLoaded())continue;const Wt=Ot.getBucket(he);if(!Wt)continue;const zt=Wt.programConfigurations.get(he.id),Jt=te.context.program.get(),Bi=te.useProgram(Et,zt),ar=It||Bi.program!==Jt,oi=te.style.map.terrain&&te.style.map.terrain.getTerrainData(kt),ki=tt.constantOr(null);if(ki&&Ot.imageAtlas){const or=Ot.imageAtlas,Mi=or.patternPositions[ki.to.toString()],lr=or.patternPositions[ki.from.toString()];Mi&&lr&&zt.setConstantPatternPositions(Mi,lr)}const xi=oi?kt:null,Hr=at?br(te,Ot,he,pt,xi):it?er(te,Ot,he,it,pt,xi):Je?Tn(te,Ot,he,Wt.lineClipsArray.length,xi):ba(te,Ot,he,xi);if(at)At.activeTexture.set(mt.TEXTURE0),Ot.imageAtlasTexture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE),zt.updatePaintBuffers(pt);else if(it&&(ar||te.lineAtlas.dirty))At.activeTexture.set(mt.TEXTURE0),te.lineAtlas.bind(At);else if(Je){const or=Wt.gradients[he.id];let Mi=or.texture;if(he.gradientVersion!==or.version){let lr=256;if(he.stepInterpolant){const Kr=Ae.getSource().maxzoom,kr=kt.canonical.z===Kr?Math.ceil(1<<te.transform.maxZoom-kt.canonical.z):1;lr=D.clamp(D.nextPowerOfTwo(Wt.maxLineLength/D.EXTENT*1024*kr),256,At.maxTextureSize)}or.gradient=D.renderColorRamp({expression:he.gradientExpression(),evaluationKey:"lineProgress",resolution:lr,image:or.gradient||void 0,clips:Wt.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new _t(At,or.gradient,mt.RGBA),or.version=he.gradientVersion,Mi=or.texture}At.activeTexture.set(mt.TEXTURE0),Mi.bind(he.stepInterpolant?mt.NEAREST:mt.LINEAR,mt.CLAMP_TO_EDGE)}Bi.draw(At,mt.TRIANGLES,Se,te.stencilModeForClipping(kt),Re,Mr.disabled,Hr,oi,he.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,he.paint,te.transform.zoom,zt,Wt.layoutVertexBuffer2),It=!1}})(x,Q,G,X);break;case"fill":(function(te,Ae,he,ge){const ve=he.paint.get("fill-color"),Ce=he.paint.get("fill-opacity");if(Ce.constantOr(1)===0)return;const Se=te.colorModeForRenderPass(),Re=he.paint.get("fill-pattern"),it=te.opaquePassEnabledForLayer()&&!Re.constantOr(1)&&ve.constantOr(D.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(te.renderPass===it){const tt=te.depthModeForSublayer(1,te.renderPass==="opaque"?Ji.ReadWrite:Ji.ReadOnly);oo(te,Ae,he,ge,tt,Se,!1)}if(te.renderPass==="translucent"&&he.paint.get("fill-antialias")){const tt=te.depthModeForSublayer(he.getPaintProperty("fill-outline-color")?2:0,Ji.ReadOnly);oo(te,Ae,he,ge,tt,Se,!0)}})(x,Q,G,X);break;case"fill-extrusion":(function(te,Ae,he,ge){const ve=he.paint.get("fill-extrusion-opacity");if(ve!==0&&te.renderPass==="translucent"){const Ce=new Ji(te.context.gl.LEQUAL,Ji.ReadWrite,te.depthRangeFor3D);if(ve!==1||he.paint.get("fill-extrusion-pattern").constantOr(1))Ma(te,Ae,he,ge,Ce,Fr.disabled,Ur.disabled),Ma(te,Ae,he,ge,Ce,te.stencilModeFor3D(),te.colorModeForRenderPass());else{const Se=te.colorModeForRenderPass();Ma(te,Ae,he,ge,Ce,Fr.disabled,Se)}}})(x,Q,G,X);break;case"hillshade":(function(te,Ae,he,ge){if(te.renderPass!=="offscreen"&&te.renderPass!=="translucent")return;const ve=te.context,Ce=te.depthModeForSublayer(0,Ji.ReadOnly),Se=te.colorModeForRenderPass(),[Re,it]=te.renderPass==="translucent"?te.stencilConfigForOverlap(ge):[{},ge];for(const tt of it){const at=Ae.getTile(tt);at.needsHillshadePrepare!==void 0&&at.needsHillshadePrepare&&te.renderPass==="offscreen"?Pa(te,at,he,Ce,Fr.disabled,Se):te.renderPass==="translucent"&&Nn(te,tt,at,he,Ce,Re[tt.overscaledZ],Se)}ve.viewport.set([0,0,te.width,te.height])})(x,Q,G,X);break;case"raster":(function(te,Ae,he,ge){if(te.renderPass!=="translucent"||he.paint.get("raster-opacity")===0||!ge.length)return;const ve=te.context,Ce=ve.gl,Se=Ae.getSource(),Re=te.useProgram("raster"),it=te.colorModeForRenderPass(),[tt,at]=Se instanceof Ke?[{},ge]:te.stencilConfigForOverlap(ge),Je=at[at.length-1].overscaledZ,pt=!te.options.moving;for(const Et of at){const At=te.depthModeForSublayer(Et.overscaledZ-Je,he.paint.get("raster-opacity")===1?Ji.ReadWrite:Ji.ReadOnly,Ce.LESS),mt=Ae.getTile(Et);mt.registerFadeDuration(he.paint.get("raster-fade-duration"));const It=Ae.findLoadedParent(Et,0),kt=ml(mt,It,Ae,he,te.transform,te.style.map.terrain);let Ot,Wt;const zt=he.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;ve.activeTexture.set(Ce.TEXTURE0),mt.texture.bind(zt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ce.TEXTURE1),It?(It.texture.bind(zt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Ot=Math.pow(2,It.tileID.overscaledZ-mt.tileID.overscaledZ),Wt=[mt.tileID.canonical.x*Ot%1,mt.tileID.canonical.y*Ot%1]):mt.texture.bind(zt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);const Jt=te.style.map.terrain&&te.style.map.terrain.getTerrainData(Et),Bi=Jt?Et:null,ar=Bi?Bi.posMatrix:te.transform.calculatePosMatrix(Et.toUnwrapped(),pt),oi=xa(ar,Wt||[0,0],Ot||1,kt,he);Se instanceof Ke?Re.draw(ve,Ce.TRIANGLES,At,Fr.disabled,it,Mr.disabled,oi,Jt,he.id,Se.boundsBuffer,te.quadTriangleIndexBuffer,Se.boundsSegments):Re.draw(ve,Ce.TRIANGLES,At,tt[Et.overscaledZ],it,Mr.disabled,oi,Jt,he.id,te.rasterBoundsBuffer,te.quadTriangleIndexBuffer,te.rasterBoundsSegments)}})(x,Q,G,X);break;case"background":(function(te,Ae,he,ge){const ve=he.paint.get("background-color"),Ce=he.paint.get("background-opacity");if(Ce===0)return;const Se=te.context,Re=Se.gl,it=te.transform,tt=it.tileSize,at=he.paint.get("background-pattern");if(te.isPatternMissing(at))return;const Je=!at&&ve.a===1&&Ce===1&&te.opaquePassEnabledForLayer()?"opaque":"translucent";if(te.renderPass!==Je)return;const pt=Fr.disabled,Et=te.depthModeForSublayer(0,Je==="opaque"?Ji.ReadWrite:Ji.ReadOnly),At=te.colorModeForRenderPass(),mt=te.useProgram(at?"backgroundPattern":"background"),It=ge||it.coveringTiles({tileSize:tt,terrain:te.style.map.terrain});at&&(Se.activeTexture.set(Re.TEXTURE0),te.imageManager.bind(te.context));const kt=he.getCrossfadeParameters();for(const Ot of It){const Wt=ge?Ot.posMatrix:te.transform.calculatePosMatrix(Ot.toUnwrapped()),zt=at?Za(Wt,Ce,te,at,{tileID:Ot,tileSize:tt},kt):On(Wt,Ce,ve),Jt=te.style.map.terrain&&te.style.map.terrain.getTerrainData(Ot);mt.draw(Se,Re.TRIANGLES,Et,pt,At,Mr.disabled,zt,Jt,he.id,te.tileExtentBuffer,te.quadTriangleIndexBuffer,te.tileExtentSegments)}})(x,0,G,X);break;case"custom":(function(te,Ae,he){const ge=te.context,ve=he.implementation;if(te.renderPass==="offscreen"){const Ce=ve.prerender;Ce&&(te.setCustomLayerDefaults(),ge.setColorMode(te.colorModeForRenderPass()),Ce.call(ve,ge.gl,te.transform.customLayerMatrix()),ge.setDirty(),te.setBaseState())}else if(te.renderPass==="translucent"){te.setCustomLayerDefaults(),ge.setColorMode(te.colorModeForRenderPass()),ge.setStencilMode(Fr.disabled);const Ce=ve.renderingMode==="3d"?new Ji(te.context.gl.LEQUAL,Ji.ReadWrite,te.depthRangeFor3D):te.depthModeForSublayer(0,Ji.ReadOnly);ge.setDepthMode(Ce),ve.render(ge.gl,te.transform.customLayerMatrix()),ge.setDirty(),te.setBaseState(),ge.bindFramebuffer.set(null)}})(x,0,G)}}translatePosMatrix(x,Q,G,X,te){if(!G[0]&&!G[1])return x;const Ae=te?X==="map"?this.transform.angle:0:X==="viewport"?-this.transform.angle:0;if(Ae){const ve=Math.sin(Ae),Ce=Math.cos(Ae);G=[G[0]*Ce-G[1]*ve,G[0]*ve+G[1]*Ce]}const he=[te?G[0]:Oe(Q,G[0],this.transform.zoom),te?G[1]:Oe(Q,G[1],this.transform.zoom),0],ge=new Float32Array(16);return D.translate(ge,x,he),ge}saveTileTexture(x){const Q=this._tileTextures[x.size[0]];Q?Q.push(x):this._tileTextures[x.size[0]]=[x]}getTileTexture(x){const Q=this._tileTextures[x];return Q&&Q.length>0?Q.pop():null}isPatternMissing(x){if(!x)return!1;if(!x.from||!x.to)return!0;const Q=this.imageManager.getPattern(x.from.toString()),G=this.imageManager.getPattern(x.to.toString());return!Q||!G}useProgram(x,Q){this.cache=this.cache||{};const G=x+(Q?Q.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[G]||(this.cache[G]=new Os(this.context,ps[x],Q,ks[x],this._showOverdrawInspector,this.style.map.terrain)),this.cache[G]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const x=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(x.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _t(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:x,drawingBufferHeight:Q}=this.context.gl;return this.width!==x||this.height!==Q}}class ca{constructor(x,Q){this.points=x,this.planes=Q}static fromInvProjectionMatrix(x,Q,G){const X=Math.pow(2,G),te=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(he=>{const ge=1/(he=D.transformMat4([],he,x))[3]/Q*X;return D.mul$1(he,he,[ge,ge,1/he[3],ge])}),Ae=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(he=>{const ge=function(Re,it){var tt=it[0],at=it[1],Je=it[2],pt=tt*tt+at*at+Je*Je;return pt>0&&(pt=1/Math.sqrt(pt)),Re[0]=it[0]*pt,Re[1]=it[1]*pt,Re[2]=it[2]*pt,Re}([],function(Re,it,tt){var at=it[0],Je=it[1],pt=it[2],Et=tt[0],At=tt[1],mt=tt[2];return Re[0]=Je*mt-pt*At,Re[1]=pt*Et-at*mt,Re[2]=at*At-Je*Et,Re}([],ft([],te[he[0]],te[he[1]]),ft([],te[he[2]],te[he[1]]))),ve=-((Ce=ge)[0]*(Se=te[he[1]])[0]+Ce[1]*Se[1]+Ce[2]*Se[2]);var Ce,Se;return ge.concat(ve)});return new ca(te,Ae)}}class ha{constructor(x,Q){this.min=x,this.max=Q,this.center=function(G,X,te){return G[0]=.5*X[0],G[1]=.5*X[1],G[2]=.5*X[2],G}([],function(G,X,te){return G[0]=X[0]+te[0],G[1]=X[1]+te[1],G[2]=X[2]+te[2],G}([],this.min,this.max))}quadrant(x){const Q=[x%2==0,x<2],G=et(this.min),X=et(this.max);for(let te=0;te<Q.length;te++)G[te]=Q[te]?this.min[te]:this.center[te],X[te]=Q[te]?this.center[te]:this.max[te];return X[2]=this.max[2],new ha(G,X)}distanceX(x){return Math.max(Math.min(this.max[0],x[0]),this.min[0])-x[0]}distanceY(x){return Math.max(Math.min(this.max[1],x[1]),this.min[1])-x[1]}intersects(x){const Q=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let G=!0;for(let X=0;X<x.planes.length;X++){const te=x.planes[X];let Ae=0;for(let he=0;he<Q.length;he++)D.dot(te,Q[he])>=0&&Ae++;if(Ae===0)return 0;Ae!==Q.length&&(G=!1)}if(G)return 2;for(let X=0;X<3;X++){let te=Number.MAX_VALUE,Ae=-Number.MAX_VALUE;for(let he=0;he<x.points.length;he++){const ge=x.points[he][X]-this.min[X];te=Math.min(te,ge),Ae=Math.max(Ae,ge)}if(Ae<0||te>this.max[X]-this.min[X])return 0}return 1}}class _n{constructor(x=0,Q=0,G=0,X=0){if(isNaN(x)||x<0||isNaN(Q)||Q<0||isNaN(G)||G<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=x,this.bottom=Q,this.left=G,this.right=X}interpolate(x,Q,G){return Q.top!=null&&x.top!=null&&(this.top=D.interpolate.number(x.top,Q.top,G)),Q.bottom!=null&&x.bottom!=null&&(this.bottom=D.interpolate.number(x.bottom,Q.bottom,G)),Q.left!=null&&x.left!=null&&(this.left=D.interpolate.number(x.left,Q.left,G)),Q.right!=null&&x.right!=null&&(this.right=D.interpolate.number(x.right,Q.right,G)),this}getCenter(x,Q){const G=D.clamp((this.left+x-this.right)/2,0,x),X=D.clamp((this.top+Q-this.bottom)/2,0,Q);return new D.Point(G,X)}equals(x){return this.top===x.top&&this.bottom===x.bottom&&this.left===x.left&&this.right===x.right}clone(){return new _n(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Bs{constructor(x,Q,G,X,te){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=te===void 0||!!te,this._minZoom=x||0,this._maxZoom=Q||22,this._minPitch=G??0,this._maxPitch=X??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new D.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const x=new Bs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return x.apply(this),x}apply(x){this.tileSize=x.tileSize,this.latRange=x.latRange,this.width=x.width,this.height=x.height,this._center=x._center,this._elevation=x._elevation,this._minEleveationForCurrentTile=x._minEleveationForCurrentTile,this.zoom=x.zoom,this.angle=x.angle,this._fov=x._fov,this._pitch=x._pitch,this._unmodified=x._unmodified,this._edgeInsets=x._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(x){this._minZoom!==x&&(this._minZoom=x,this.zoom=Math.max(this.zoom,x))}get maxZoom(){return this._maxZoom}set maxZoom(x){this._maxZoom!==x&&(this._maxZoom=x,this.zoom=Math.min(this.zoom,x))}get minPitch(){return this._minPitch}set minPitch(x){this._minPitch!==x&&(this._minPitch=x,this.pitch=Math.max(this.pitch,x))}get maxPitch(){return this._maxPitch}set maxPitch(x){this._maxPitch!==x&&(this._maxPitch=x,this.pitch=Math.min(this.pitch,x))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(x){x===void 0?x=!0:x===null&&(x=!1),this._renderWorldCopies=x}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new D.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(x){const Q=-D.wrap(x,-180,180)*Math.PI/180;this.angle!==Q&&(this._unmodified=!1,this.angle=Q,this._calcMatrices(),this.rotationMatrix=function(){var G=new D.ARRAY_TYPE(4);return D.ARRAY_TYPE!=Float32Array&&(G[1]=0,G[2]=0),G[0]=1,G[3]=1,G}(),function(G,X,te){var Ae=X[0],he=X[1],ge=X[2],ve=X[3],Ce=Math.sin(te),Se=Math.cos(te);G[0]=Ae*Se+ge*Ce,G[1]=he*Se+ve*Ce,G[2]=Ae*-Ce+ge*Se,G[3]=he*-Ce+ve*Se}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(x){const Q=D.clamp(x,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Q&&(this._unmodified=!1,this._pitch=Q,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(x){x=Math.max(.01,Math.min(60,x)),this._fov!==x&&(this._unmodified=!1,this._fov=x/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(x){const Q=Math.min(Math.max(x,this.minZoom),this.maxZoom);this._zoom!==Q&&(this._unmodified=!1,this._zoom=Q,this.tileZoom=Math.max(0,Math.floor(Q)),this.scale=this.zoomScale(Q),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(x){x.lat===this._center.lat&&x.lng===this._center.lng||(this._unmodified=!1,this._center=x,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(x){x!==this._elevation&&(this._elevation=x,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(x){this._edgeInsets.equals(x)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,x,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(x){return this._edgeInsets.equals(x)}interpolatePadding(x,Q,G){this._unmodified=!1,this._edgeInsets.interpolate(x,Q,G),this._constrain(),this._calcMatrices()}coveringZoomLevel(x){const Q=(x.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/x.tileSize));return Math.max(0,Q)}getVisibleUnwrappedCoordinates(x){const Q=[new D.UnwrappedTileID(0,x)];if(this._renderWorldCopies){const G=this.pointCoordinate(new D.Point(0,0)),X=this.pointCoordinate(new D.Point(this.width,0)),te=this.pointCoordinate(new D.Point(this.width,this.height)),Ae=this.pointCoordinate(new D.Point(0,this.height)),he=Math.floor(Math.min(G.x,X.x,te.x,Ae.x)),ge=Math.floor(Math.max(G.x,X.x,te.x,Ae.x)),ve=1;for(let Ce=he-ve;Ce<=ge+ve;Ce++)Ce!==0&&Q.push(new D.UnwrappedTileID(Ce,x))}return Q}coveringTiles(x){var Q,G;let X=this.coveringZoomLevel(x);const te=X;if(x.minzoom!==void 0&&X<x.minzoom)return[];x.maxzoom!==void 0&&X>x.maxzoom&&(X=x.maxzoom);const Ae=this.pointCoordinate(this.getCameraPoint()),he=D.MercatorCoordinate.fromLngLat(this.center),ge=Math.pow(2,X),ve=[ge*Ae.x,ge*Ae.y,0],Ce=[ge*he.x,ge*he.y,0],Se=ca.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,X);let Re=x.minzoom||0;!x.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Re=X);const it=x.terrain?2/Math.min(this.tileSize,x.tileSize)*this.tileSize:3,tt=At=>({aabb:new ha([At*ge,0,0],[(At+1)*ge,ge,0]),zoom:0,x:0,y:0,wrap:At,fullyVisible:!1}),at=[],Je=[],pt=X,Et=x.reparseOverscaled?te:X;if(this._renderWorldCopies)for(let At=1;At<=3;At++)at.push(tt(-At)),at.push(tt(At));for(at.push(tt(0));at.length>0;){const At=at.pop(),mt=At.x,It=At.y;let kt=At.fullyVisible;if(!kt){const Bi=At.aabb.intersects(Se);if(Bi===0)continue;kt=Bi===2}const Ot=x.terrain?ve:Ce,Wt=At.aabb.distanceX(Ot),zt=At.aabb.distanceY(Ot),Jt=Math.max(Math.abs(Wt),Math.abs(zt));if(At.zoom===pt||Jt>it+(1<<pt-At.zoom)-2&&At.zoom>=Re){const Bi=pt-At.zoom,ar=ve[0]-.5-(mt<<Bi),oi=ve[1]-.5-(It<<Bi);Je.push({tileID:new D.OverscaledTileID(At.zoom===pt?Et:At.zoom,At.wrap,At.zoom,mt,It),distanceSq:Ze([Ce[0]-.5-mt,Ce[1]-.5-It]),tileDistanceToCamera:Math.sqrt(ar*ar+oi*oi)})}else for(let Bi=0;Bi<4;Bi++){const ar=(mt<<1)+Bi%2,oi=(It<<1)+(Bi>>1),ki=At.zoom+1;let xi=At.aabb.quadrant(Bi);if(x.terrain){const Hr=new D.OverscaledTileID(ki,At.wrap,ki,ar,oi),or=x.terrain.getMinMaxElevation(Hr),Mi=(Q=or.minElevation)!==null&&Q!==void 0?Q:this.elevation,lr=(G=or.maxElevation)!==null&&G!==void 0?G:this.elevation;xi=new ha([xi.min[0],xi.min[1],Mi],[xi.max[0],xi.max[1],lr])}at.push({aabb:xi,zoom:ki,x:ar,y:oi,wrap:At.wrap,fullyVisible:kt})}}return Je.sort((At,mt)=>At.distanceSq-mt.distanceSq).map(At=>At.tileID)}resize(x,Q){this.width=x,this.height=Q,this.pixelsToGLUnits=[2/x,-2/Q],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(x){return Math.pow(2,x)}scaleZoom(x){return Math.log(x)/Math.LN2}project(x){const Q=D.clamp(x.lat,-this.maxValidLatitude,this.maxValidLatitude);return new D.Point(D.mercatorXfromLng(x.lng)*this.worldSize,D.mercatorYfromLat(Q)*this.worldSize)}unproject(x){return new D.MercatorCoordinate(x.x/this.worldSize,x.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(x){const Q=this.pointLocation(this.centerPoint,x),G=x.getElevationForLngLatZoom(Q,this.tileZoom);if(!(this.elevation-G))return;const X=this.getCameraPosition(),te=D.MercatorCoordinate.fromLngLat(X.lngLat,X.altitude),Ae=D.MercatorCoordinate.fromLngLat(Q,G),he=te.x-Ae.x,ge=te.y-Ae.y,ve=te.z-Ae.z,Ce=Math.sqrt(he*he+ge*ge+ve*ve),Se=this.scaleZoom(this.cameraToCenterDistance/Ce/this.tileSize);this._elevation=G,this._center=Q,this.zoom=Se}setLocationAtPoint(x,Q){const G=this.pointCoordinate(Q),X=this.pointCoordinate(this.centerPoint),te=this.locationCoordinate(x),Ae=new D.MercatorCoordinate(te.x-(G.x-X.x),te.y-(G.y-X.y));this.center=this.coordinateLocation(Ae),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(x,Q){return Q?this.coordinatePoint(this.locationCoordinate(x),Q.getElevationForLngLatZoom(x,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(x))}pointLocation(x,Q){return this.coordinateLocation(this.pointCoordinate(x,Q))}locationCoordinate(x){return D.MercatorCoordinate.fromLngLat(x)}coordinateLocation(x){return x&&x.toLngLat()}pointCoordinate(x,Q){if(Q){const Re=Q.pointCoordinate(x);if(Re!=null)return Re}const G=[x.x,x.y,0,1],X=[x.x,x.y,1,1];D.transformMat4(G,G,this.pixelMatrixInverse),D.transformMat4(X,X,this.pixelMatrixInverse);const te=G[3],Ae=X[3],he=G[1]/te,ge=X[1]/Ae,ve=G[2]/te,Ce=X[2]/Ae,Se=ve===Ce?0:(0-ve)/(Ce-ve);return new D.MercatorCoordinate(D.interpolate.number(G[0]/te,X[0]/Ae,Se)/this.worldSize,D.interpolate.number(he,ge,Se)/this.worldSize)}coordinatePoint(x,Q=0,G=this.pixelMatrix){const X=[x.x*this.worldSize,x.y*this.worldSize,Q,1];return D.transformMat4(X,X,G),new D.Point(X[0]/X[3],X[1]/X[3])}getBounds(){const x=Math.max(0,this.height/2-this.getHorizon());return new R().extend(this.pointLocation(new D.Point(0,x))).extend(this.pointLocation(new D.Point(this.width,x))).extend(this.pointLocation(new D.Point(this.width,this.height))).extend(this.pointLocation(new D.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new R([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(x){x?(this.lngRange=[x.getWest(),x.getEast()],this.latRange=[x.getSouth(),x.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(x,Q=!1){const G=x.key,X=Q?this._alignedPosMatrixCache:this._posMatrixCache;if(X[G])return X[G];const te=x.canonical,Ae=this.worldSize/this.zoomScale(te.z),he=te.x+Math.pow(2,te.z)*x.wrap,ge=D.identity(new Float64Array(16));return D.translate(ge,ge,[he*Ae,te.y*Ae,0]),D.scale(ge,ge,[Ae/D.EXTENT,Ae/D.EXTENT,1]),D.multiply(ge,Q?this.alignedProjMatrix:this.projMatrix,ge),X[G]=new Float32Array(ge),X[G]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let x,Q,G,X,te=-90,Ae=90,he=-180,ge=180;const ve=this.size,Ce=this._unmodified;if(this.latRange){const it=this.latRange;te=D.mercatorYfromLat(it[1])*this.worldSize,Ae=D.mercatorYfromLat(it[0])*this.worldSize,x=Ae-te<ve.y?ve.y/(Ae-te):0}if(this.lngRange){const it=this.lngRange;he=D.wrap(D.mercatorXfromLng(it[0])*this.worldSize,0,this.worldSize),ge=D.wrap(D.mercatorXfromLng(it[1])*this.worldSize,0,this.worldSize),ge<he&&(ge+=this.worldSize),Q=ge-he<ve.x?ve.x/(ge-he):0}const Se=this.point,Re=Math.max(Q||0,x||0);if(Re)return this.center=this.unproject(new D.Point(Q?(ge+he)/2:Se.x,x?(Ae+te)/2:Se.y)),this.zoom+=this.scaleZoom(Re),this._unmodified=Ce,void(this._constraining=!1);if(this.latRange){const it=Se.y,tt=ve.y/2;it-tt<te&&(X=te+tt),it+tt>Ae&&(X=Ae-tt)}if(this.lngRange){const it=(he+ge)/2,tt=D.wrap(Se.x,it-this.worldSize/2,it+this.worldSize/2),at=ve.x/2;tt-at<he&&(G=he+at),tt+at>ge&&(G=ge-at)}G===void 0&&X===void 0||(this.center=this.unproject(new D.Point(G!==void 0?G:Se.x,X!==void 0?X:Se.y)).wrap()),this._unmodified=Ce,this._constraining=!1}_calcMatrices(){if(!this.height)return;const x=this.centerOffset,Q=this.point.x,G=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=D.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let X=D.identity(new Float64Array(16));D.scale(X,X,[this.width/2,-this.height/2,1]),D.translate(X,X,[1,-1,0]),this.labelPlaneMatrix=X,X=D.identity(new Float64Array(16)),D.scale(X,X,[1,-1,1]),D.translate(X,X,[-1,-1,0]),D.scale(X,X,[2/this.width,2/this.height,1]),this.glCoordMatrix=X;const te=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),Ae=Math.min(this.elevation,this._minEleveationForCurrentTile),he=te-Ae*this._pixelPerMeter/Math.cos(this._pitch),ge=Ae<0?he:te,ve=Math.PI/2+this._pitch,Ce=this._fov*(.5+x.y/this.height),Se=Math.sin(Ce)*ge/Math.sin(D.clamp(Math.PI-ve-Ce,.01,Math.PI-.01)),Re=this.getHorizon(),it=2*Math.atan(Re/this.cameraToCenterDistance)*(.5+x.y/(2*Re)),tt=Math.sin(it)*ge/Math.sin(D.clamp(Math.PI-ve-it,.01,Math.PI-.01)),at=Math.min(Se,tt),Je=1.01*(Math.cos(Math.PI/2-this._pitch)*at+ge),pt=this.height/50;X=new Float64Array(16),D.perspective(X,this._fov,this.width/this.height,pt,Je),X[8]=2*-x.x/this.width,X[9]=2*x.y/this.height,D.scale(X,X,[1,-1,1]),D.translate(X,X,[0,0,-this.cameraToCenterDistance]),D.rotateX(X,X,this._pitch),D.rotateZ(X,X,this.angle),D.translate(X,X,[-Q,-G,0]),this.mercatorMatrix=D.scale([],X,[this.worldSize,this.worldSize,this.worldSize]),D.scale(X,X,[1,1,this._pixelPerMeter]),this.pixelMatrix=D.multiply(new Float64Array(16),this.labelPlaneMatrix,X),D.translate(X,X,[0,0,-this.elevation]),this.projMatrix=X,this.invProjMatrix=D.invert([],X),this.pixelMatrix3D=D.multiply(new Float64Array(16),this.labelPlaneMatrix,X);const Et=this.width%2/2,At=this.height%2/2,mt=Math.cos(this.angle),It=Math.sin(this.angle),kt=Q-Math.round(Q)+mt*Et+It*At,Ot=G-Math.round(G)+mt*At+It*Et,Wt=new Float64Array(X);if(D.translate(Wt,Wt,[kt>.5?kt-1:kt,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Wt,X=D.invert(new Float64Array(16),this.pixelMatrix),!X)throw new Error("failed to invert matrix");this.pixelMatrixInverse=X,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const x=this.pointCoordinate(new D.Point(0,0)),Q=[x.x*this.worldSize,x.y*this.worldSize,0,1];return D.transformMat4(Q,Q,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const x=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new D.Point(0,x))}getCameraQueryGeometry(x){const Q=this.getCameraPoint();if(x.length===1)return[x[0],Q];{let G=Q.x,X=Q.y,te=Q.x,Ae=Q.y;for(const he of x)G=Math.min(G,he.x),X=Math.min(X,he.y),te=Math.max(te,he.x),Ae=Math.max(Ae,he.y);return[new D.Point(G,X),new D.Point(te,X),new D.Point(te,Ae),new D.Point(G,Ae),new D.Point(G,X)]}}}function yn(J,x){let Q,G=!1,X=null,te=null;const Ae=()=>{X=null,G&&(J.apply(te,Q),X=setTimeout(Ae,x),G=!1)};return(...he)=>(G=!0,te=this,Q=he,X||Ae(),X)}class Uo{constructor(x){this._getCurrentHash=()=>{const Q=window.location.hash.replace("#","");if(this._hashName){let G;return Q.split("&").map(X=>X.split("=")).forEach(X=>{X[0]===this._hashName&&(G=X)}),(G&&G[1]||"").split("/")}return Q.split("/")},this._onHashChange=()=>{const Q=this._getCurrentHash();if(Q.length>=3&&!Q.some(G=>isNaN(G))){const G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Q[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Q[2],+Q[1]],zoom:+Q[0],bearing:G,pitch:+(Q[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const Q=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,Q)}catch{}},this._updateHash=yn(this._updateHashUnthrottled,300),this._hashName=x&&encodeURIComponent(x)}addTo(x){return this._map=x,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(x){const Q=this._map.getCenter(),G=Math.round(100*this._map.getZoom())/100,X=Math.ceil((G*Math.LN2+Math.log(512/360/.5))/Math.LN10),te=Math.pow(10,X),Ae=Math.round(Q.lng*te)/te,he=Math.round(Q.lat*te)/te,ge=this._map.getBearing(),ve=this._map.getPitch();let Ce="";if(Ce+=x?`/${Ae}/${he}/${G}`:`${G}/${he}/${Ae}`,(ge||ve)&&(Ce+="/"+Math.round(10*ge)/10),ve&&(Ce+=`/${Math.round(ve)}`),this._hashName){const Se=this._hashName;let Re=!1;const it=window.location.hash.slice(1).split("&").map(tt=>{const at=tt.split("=")[0];return at===Se?(Re=!0,`${at}=${Ce}`):tt}).filter(tt=>tt);return Re||it.push(`${Se}=${Ce}`),`#${it.join("&")}`}return`#${Ce}`}}const Gn={linearity:.3,easing:D.bezier(0,0,.3,1)},La=D.extend({deceleration:2500,maxSpeed:1400},Gn),lo=D.extend({deceleration:20,maxSpeed:1400},Gn),ua=D.extend({deceleration:1e3,maxSpeed:360},Gn),Ao=D.extend({deceleration:1e3,maxSpeed:90},Gn);class Qa{constructor(x){this._map=x,this.clear()}clear(){this._inertiaBuffer=[]}record(x){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.browser.now(),settings:x})}_drainInertiaBuffer(){const x=this._inertiaBuffer,Q=D.browser.now();for(;x.length>0&&Q-x[0].time>160;)x.shift()}_onMoveEnd(x){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const Q={zoom:0,bearing:0,pitch:0,pan:new D.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:te}of this._inertiaBuffer)Q.zoom+=te.zoomDelta||0,Q.bearing+=te.bearingDelta||0,Q.pitch+=te.pitchDelta||0,te.panDelta&&Q.pan._add(te.panDelta),te.around&&(Q.around=te.around),te.pinchAround&&(Q.pinchAround=te.pinchAround);const G=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,X={};if(Q.pan.mag()){const te=vs(Q.pan.mag(),G,D.extend({},La,x||{}));X.offset=Q.pan.mult(te.amount/Q.pan.mag()),X.center=this._map.transform.center,Fn(X,te)}if(Q.zoom){const te=vs(Q.zoom,G,lo);X.zoom=this._map.transform.zoom+te.amount,Fn(X,te)}if(Q.bearing){const te=vs(Q.bearing,G,ua);X.bearing=this._map.transform.bearing+D.clamp(te.amount,-179,179),Fn(X,te)}if(Q.pitch){const te=vs(Q.pitch,G,Ao);X.pitch=this._map.transform.pitch+te.amount,Fn(X,te)}if(X.zoom||X.bearing){const te=Q.pinchAround===void 0?Q.around:Q.pinchAround;X.around=te?this._map.unproject(te):this._map.getCenter()}return this.clear(),D.extend(X,{noMoveStart:!0})}}function Fn(J,x){(!J.duration||J.duration<x.duration)&&(J.duration=x.duration,J.easing=x.easing)}function vs(J,x,Q){const{maxSpeed:G,linearity:X,deceleration:te}=Q,Ae=D.clamp(J*X/(x/1e3),-G,G),he=Math.abs(Ae)/(te*X);return{easing:Q.easing,duration:1e3*he,amount:Ae*(he/2)}}class qr extends D.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(x,Q,G,X={}){const te=oe.mousePos(Q.getCanvasContainer(),G),Ae=Q.unproject(te);super(x,D.extend({point:te,lngLat:Ae,originalEvent:G},X)),this._defaultPrevented=!1,this.target=Q}}class Oa extends D.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(x,Q,G){const X=x==="touchend"?G.changedTouches:G.touches,te=oe.touchPos(Q.getCanvasContainer(),X),Ae=te.map(ge=>Q.unproject(ge)),he=te.reduce((ge,ve,Ce,Se)=>ge.add(ve.div(Se.length)),new D.Point(0,0));super(x,{points:te,point:he,lngLats:Ae,lngLat:Q.unproject(he),originalEvent:G}),this._defaultPrevented=!1}}class Ms extends D.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(x,Q,G){super(x,{originalEvent:G}),this._defaultPrevented=!1}}class Ra{constructor(x,Q){this._map=x,this._clickTolerance=Q.clickTolerance}reset(){delete this._mousedownPos}wheel(x){return this._firePreventable(new Ms(x.type,this._map,x))}mousedown(x,Q){return this._mousedownPos=Q,this._firePreventable(new qr(x.type,this._map,x))}mouseup(x){this._map.fire(new qr(x.type,this._map,x))}click(x,Q){this._mousedownPos&&this._mousedownPos.dist(Q)>=this._clickTolerance||this._map.fire(new qr(x.type,this._map,x))}dblclick(x){return this._firePreventable(new qr(x.type,this._map,x))}mouseover(x){this._map.fire(new qr(x.type,this._map,x))}mouseout(x){this._map.fire(new qr(x.type,this._map,x))}touchstart(x){return this._firePreventable(new Oa(x.type,this._map,x))}touchmove(x){this._map.fire(new Oa(x.type,this._map,x))}touchend(x){this._map.fire(new Oa(x.type,this._map,x))}touchcancel(x){this._map.fire(new Oa(x.type,this._map,x))}_firePreventable(x){if(this._map.fire(x),x.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class co{constructor(x){this._map=x}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(x){this._map.fire(new qr(x.type,this._map,x))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(x){this._delayContextMenu?this._contextMenuEvent=x:this._ignoreContextMenu||this._map.fire(new qr(x.type,this._map,x)),this._map.listens("contextmenu")&&x.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fa{constructor(x){this._map=x}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(x){return this.transform.pointLocation(D.Point.convert(x),this._map.terrain)}}class Zo{constructor(x,Q){this._map=x,this._tr=new fa(x),this._el=x.getCanvasContainer(),this._container=x.getContainer(),this._clickTolerance=Q.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(x,Q){this.isEnabled()&&x.shiftKey&&x.button===0&&(oe.disableDrag(),this._startPos=this._lastPos=Q,this._active=!0)}mousemoveWindow(x,Q){if(!this._active)return;const G=Q;if(this._lastPos.equals(G)||!this._box&&G.dist(this._startPos)<this._clickTolerance)return;const X=this._startPos;this._lastPos=G,this._box||(this._box=oe.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",x));const te=Math.min(X.x,G.x),Ae=Math.max(X.x,G.x),he=Math.min(X.y,G.y),ge=Math.max(X.y,G.y);oe.setTransform(this._box,`translate(${te}px,${he}px)`),this._box.style.width=Ae-te+"px",this._box.style.height=ge-he+"px"}mouseupWindow(x,Q){if(!this._active||x.button!==0)return;const G=this._startPos,X=Q;if(this.reset(),oe.suppressClick(),G.x!==X.x||G.y!==X.y)return this._map.fire(new D.Event("boxzoomend",{originalEvent:x})),{cameraAnimation:te=>te.fitScreenCoordinates(G,X,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",x)}keydown(x){this._active&&x.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",x))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(oe.remove(this._box),this._box=null),oe.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(x,Q){return this._map.fire(new D.Event(x,{originalEvent:Q}))}}function Wn(J,x){if(J.length!==x.length)throw new Error(`The number of touches and points are not equal - touches ${J.length}, points ${x.length}`);const Q={};for(let G=0;G<J.length;G++)Q[J[G].identifier]=x[G];return Q}class qi{constructor(x){this.reset(),this.numTouches=x.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(x,Q,G){(this.centroid||G.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=x.timeStamp),G.length===this.numTouches&&(this.centroid=function(X){const te=new D.Point(0,0);for(const Ae of X)te._add(Ae);return te.div(X.length)}(Q),this.touches=Wn(G,Q)))}touchmove(x,Q,G){if(this.aborted||!this.centroid)return;const X=Wn(G,Q);for(const te in this.touches){const Ae=X[te];(!Ae||Ae.dist(this.touches[te])>30)&&(this.aborted=!0)}}touchend(x,Q,G){if((!this.centroid||x.timeStamp-this.startTime>500)&&(this.aborted=!0),G.length===0){const X=!this.aborted&&this.centroid;if(this.reset(),X)return X}}}class tn{constructor(x){this.singleTap=new qi(x),this.numTaps=x.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(x,Q,G){this.singleTap.touchstart(x,Q,G)}touchmove(x,Q,G){this.singleTap.touchmove(x,Q,G)}touchend(x,Q,G){const X=this.singleTap.touchend(x,Q,G);if(X){const te=x.timeStamp-this.lastTime<500,Ae=!this.lastTap||this.lastTap.dist(X)<30;if(te&&Ae||this.reset(),this.count++,this.lastTime=x.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}}}class gi{constructor(x){this._tr=new fa(x),this._zoomIn=new tn({numTouches:1,numTaps:2}),this._zoomOut=new tn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(x,Q,G){this._zoomIn.touchstart(x,Q,G),this._zoomOut.touchstart(x,Q,G)}touchmove(x,Q,G){this._zoomIn.touchmove(x,Q,G),this._zoomOut.touchmove(x,Q,G)}touchend(x,Q,G){const X=this._zoomIn.touchend(x,Q,G),te=this._zoomOut.touchend(x,Q,G),Ae=this._tr;return X?(this._active=!0,x.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:he=>he.easeTo({duration:300,zoom:Ae.zoom+1,around:Ae.unproject(X)},{originalEvent:x})}):te?(this._active=!0,x.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:he=>he.easeTo({duration:300,zoom:Ae.zoom-1,around:Ae.unproject(te)},{originalEvent:x})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kn{constructor(x){this._enabled=!!x.enable,this._moveStateManager=x.moveStateManager,this._clickTolerance=x.clickTolerance||1,this._moveFunction=x.move,this._activateOnStart=!!x.activateOnStart,x.assignEvents(this),this.reset()}reset(x){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(x)}_move(...x){const Q=this._moveFunction(...x);if(Q.bearingDelta||Q.pitchDelta||Q.around||Q.panDelta)return this._active=!0,Q}dragStart(x,Q){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(x)&&(this._moveStateManager.startMove(x),this._lastPoint=Q.length?Q[0]:Q,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(x,Q){if(!this.isEnabled())return;const G=this._lastPoint;if(!G)return;if(x.preventDefault(),!this._moveStateManager.isValidMoveEvent(x))return void this.reset(x);const X=Q.length?Q[0]:Q;return!this._moved&&X.dist(G)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=X,this._move(G,X))}dragEnd(x){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(x)&&(this._moved&&oe.suppressClick(),this.reset(x))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const xe={0:1,2:2};class He{constructor(x){this._correctEvent=x.checkCorrectEvent}startMove(x){const Q=oe.mouseButton(x);this._eventButton=Q}endMove(x){delete this._eventButton}isValidStartEvent(x){return this._correctEvent(x)}isValidMoveEvent(x){return!function(Q,G){const X=xe[G];return Q.buttons===void 0||(Q.buttons&X)!==X}(x,this._eventButton)}isValidEndEvent(x){return oe.mouseButton(x)===this._eventButton}}class je{constructor(){this._firstTouch=void 0}_isOneFingerTouch(x){return x.targetTouches.length===1}_isSameTouchEvent(x){return x.targetTouches[0].identifier===this._firstTouch}startMove(x){this._firstTouch=x.targetTouches[0].identifier}endMove(x){delete this._firstTouch}isValidStartEvent(x){return this._isOneFingerTouch(x)}isValidMoveEvent(x){return this._isOneFingerTouch(x)&&this._isSameTouchEvent(x)}isValidEndEvent(x){return this._isOneFingerTouch(x)&&this._isSameTouchEvent(x)}}const $e=J=>{J.mousedown=J.dragStart,J.mousemoveWindow=J.dragMove,J.mouseup=J.dragEnd,J.contextmenu=function(x){x.preventDefault()}},bt=({enable:J,clickTolerance:x,bearingDegreesPerPixelMoved:Q=.8})=>{const G=new He({checkCorrectEvent:X=>oe.mouseButton(X)===0&&X.ctrlKey||oe.mouseButton(X)===2});return new kn({clickTolerance:x,move:(X,te)=>({bearingDelta:(te.x-X.x)*Q}),moveStateManager:G,enable:J,assignEvents:$e})},St=({enable:J,clickTolerance:x,pitchDegreesPerPixelMoved:Q=-.5})=>{const G=new He({checkCorrectEvent:X=>oe.mouseButton(X)===0&&X.ctrlKey||oe.mouseButton(X)===2});return new kn({clickTolerance:x,move:(X,te)=>({pitchDelta:(te.y-X.y)*Q}),moveStateManager:G,enable:J,assignEvents:$e})};class Nt{constructor(x,Q){this._minTouches=x.cooperativeGestures?2:1,this._clickTolerance=x.clickTolerance||1,this._map=Q,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new D.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(x,Q,G){return this._calculateTransform(x,Q,G)}touchmove(x,Q,G){if(this._map._cooperativeGestures&&(this._minTouches===2&&G.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(x,!1,G.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(G.length<this._minTouches))return x.preventDefault(),this._calculateTransform(x,Q,G)}touchend(x,Q,G){this._calculateTransform(x,Q,G),this._active&&G.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(x,Q,G){G.length>0&&(this._active=!0);const X=Wn(G,Q),te=new D.Point(0,0),Ae=new D.Point(0,0);let he=0;for(const ve in X){const Ce=X[ve],Se=this._touches[ve];Se&&(te._add(Ce),Ae._add(Ce.sub(Se)),he++,X[ve]=Ce)}if(this._touches=X,he<this._minTouches||!Ae.mag())return;const ge=Ae.div(he);return this._sum._add(ge),this._sum.mag()<this._clickTolerance?void 0:{around:te.div(he),panDelta:ge}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(x,Q,G){this._firstTwoTouches||G.length<2||(this._firstTwoTouches=[G[0].identifier,G[1].identifier],this._start([Q[0],Q[1]]))}touchmove(x,Q,G){if(!this._firstTwoTouches)return;x.preventDefault();const[X,te]=this._firstTwoTouches,Ae=hi(G,Q,X),he=hi(G,Q,te);if(!Ae||!he)return;const ge=this._aroundCenter?null:Ae.add(he).div(2);return this._move([Ae,he],ge,x)}touchend(x,Q,G){if(!this._firstTwoTouches)return;const[X,te]=this._firstTwoTouches,Ae=hi(G,Q,X),he=hi(G,Q,te);Ae&&he||(this._active&&oe.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(x){this._enabled=!0,this._aroundCenter=!!x&&x.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function hi(J,x,Q){for(let G=0;G<J.length;G++)if(J[G].identifier===Q)return x[G]}function Xt(J,x){return Math.log(J/x)/Math.LN2}class Gi extends jt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(x){this._startDistance=this._distance=x[0].dist(x[1])}_move(x,Q){const G=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(Xt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xt(this._distance,G),pinchAround:Q}}}function zi(J,x){return 180*J.angleWith(x)/Math.PI}class Oi extends jt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])}_move(x,Q){const G=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zi(this._vector,G),pinchAround:Q}}_isBelowThreshold(x){this._minDiameter=Math.min(this._minDiameter,x.mag());const Q=25/(Math.PI*this._minDiameter)*360,G=zi(x,this._startVector);return Math.abs(G)<Q}}function mr(J){return Math.abs(J.y)>Math.abs(J.x)}class ur extends jt{constructor(x){super(),this._map=x}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(x,Q,G){super.touchstart(x,Q,G),this._currentTouchCount=G.length}_start(x){this._lastPoints=x,mr(x[0].sub(x[1]))&&(this._valid=!1)}_move(x,Q,G){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const X=x[0].sub(this._lastPoints[0]),te=x[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(X,te,G.timeStamp),this._valid?(this._lastPoints=x,this._active=!0,{pitchDelta:(X.y+te.y)/2*-.5}):void 0}gestureBeginsVertically(x,Q,G){if(this._valid!==void 0)return this._valid;const X=x.mag()>=2,te=Q.mag()>=2;if(!X&&!te)return;if(!X||!te)return this._firstMove===void 0&&(this._firstMove=G),G-this._firstMove<100&&void 0;const Ae=x.y>0==Q.y>0;return mr(x)&&mr(Q)&&Ae}}const vr={panStep:100,bearingStep:15,pitchStep:10};class nr{constructor(x){this._tr=new fa(x);const Q=vr;this._panStep=Q.panStep,this._bearingStep=Q.bearingStep,this._pitchStep=Q.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(x){if(x.altKey||x.ctrlKey||x.metaKey)return;let Q=0,G=0,X=0,te=0,Ae=0;switch(x.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:x.shiftKey?G=-1:(x.preventDefault(),te=-1);break;case 39:x.shiftKey?G=1:(x.preventDefault(),te=1);break;case 38:x.shiftKey?X=1:(x.preventDefault(),Ae=-1);break;case 40:x.shiftKey?X=-1:(x.preventDefault(),Ae=1);break;default:return}return this._rotationDisabled&&(G=0,X=0),{cameraAnimation:he=>{const ge=this._tr;he.easeTo({duration:300,easeId:"keyboardHandler",easing:Xi,zoom:Q?Math.round(ge.zoom)+Q*(x.shiftKey?2:1):ge.zoom,bearing:ge.bearing+G*this._bearingStep,pitch:ge.pitch+X*this._pitchStep,offset:[-te*this._panStep,-Ae*this._panStep],center:ge.center},{originalEvent:x})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xi(J){return J*(2-J)}const Or=4.000244140625;class Sr{constructor(x,Q){this._onTimeout=G=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(G)},this._map=x,this._tr=new fa(x),this._el=x.getCanvasContainer(),this._triggerRenderFrame=Q,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(x){this._defaultZoomRate=x}setWheelZoomRate(x){this._wheelZoomRate=x}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(x){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!x&&x.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(x){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!x[this._map._metaKey])return;x.preventDefault()}let Q=x.deltaMode===WheelEvent.DOM_DELTA_LINE?40*x.deltaY:x.deltaY;const G=D.browser.now(),X=G-(this._lastWheelEventTime||0);this._lastWheelEventTime=G,Q!==0&&Q%Or==0?this._type="wheel":Q!==0&&Math.abs(Q)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=Q,this._timeout=setTimeout(this._onTimeout,40,x)):this._type||(this._type=Math.abs(X*Q)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Q+=this._lastValue)),x.shiftKey&&Q&&(Q/=4),this._type&&(this._lastWheelEvent=x,this._delta-=Q,this._active||this._start(x)),x.preventDefault()}_start(x){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const Q=oe.mousePos(this._el,x),G=this._tr;this._around=D.LngLat.convert(this._aroundCenter?G.center:G.unproject(Q)),this._aroundPoint=G.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const x=this._tr.transform;if(this._delta!==0){const he=this._type==="wheel"&&Math.abs(this._delta)>Or?this._wheelZoomRate:this._defaultZoomRate;let ge=2/(1+Math.exp(-Math.abs(this._delta*he)));this._delta<0&&ge!==0&&(ge=1/ge);const ve=typeof this._targetZoom=="number"?x.zoomScale(this._targetZoom):x.scale;this._targetZoom=Math.min(x.maxZoom,Math.max(x.minZoom,x.scaleZoom(ve*ge))),this._type==="wheel"&&(this._startZoom=x.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const Q=typeof this._targetZoom=="number"?this._targetZoom:x.zoom,G=this._startZoom,X=this._easing;let te,Ae=!1;if(this._type==="wheel"&&G&&X){const he=Math.min((D.browser.now()-this._lastWheelEventTime)/200,1),ge=X(he);te=D.interpolate.number(G,Q,ge),he<1?this._frameId||(this._frameId=!0):Ae=!0}else te=Q,Ae=!0;return this._active=!0,Ae&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ae,zoomDelta:te-x.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(x){let Q=D.defaultEasing;if(this._prevEase){const G=this._prevEase,X=(D.browser.now()-G.start)/G.duration,te=G.easing(X+.01)-G.easing(X),Ae=.27/Math.sqrt(te*te+1e-4)*.01,he=Math.sqrt(.0729-Ae*Ae);Q=D.bezier(Ae,he,.25,1)}return this._prevEase={start:D.browser.now(),duration:x,easing:Q},Q}reset(){this._active=!1}}class ws{constructor(x,Q){this._clickZoom=x,this._tapZoom=Q}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ha{constructor(x){this._tr=new fa(x),this.reset()}reset(){this._active=!1}dblclick(x,Q){return x.preventDefault(),{cameraAnimation:G=>{G.easeTo({duration:300,zoom:this._tr.zoom+(x.shiftKey?-1:1),around:this._tr.unproject(Q)},{originalEvent:x})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class da{constructor(){this._tap=new tn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(x,Q,G){if(!this._swipePoint)if(this._tapTime){const X=Q[0],te=x.timeStamp-this._tapTime<500,Ae=this._tapPoint.dist(X)<30;te&&Ae?G.length>0&&(this._swipePoint=X,this._swipeTouch=G[0].identifier):this.reset()}else this._tap.touchstart(x,Q,G)}touchmove(x,Q,G){if(this._tapTime){if(this._swipePoint){if(G[0].identifier!==this._swipeTouch)return;const X=Q[0],te=X.y-this._swipePoint.y;return this._swipePoint=X,x.preventDefault(),this._active=!0,{zoomDelta:te/128}}}else this._tap.touchmove(x,Q,G)}touchend(x,Q,G){if(this._tapTime)this._swipePoint&&G.length===0&&this.reset();else{const X=this._tap.touchend(x,Q,G);X&&(this._tapTime=x.timeStamp,this._tapPoint=X)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ns{constructor(x,Q,G){this._el=x,this._mousePan=Q,this._touchPan=G}enable(x){this._inertiaOptions=x||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Er{constructor(x,Q,G){this._pitchWithRotate=x.pitchWithRotate,this._mouseRotate=Q,this._mousePitch=G}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class pa{constructor(x,Q,G,X){this._el=x,this._touchZoom=Q,this._touchRotate=G,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0}enable(x){this._touchZoom.enable(x),this._rotationDisabled||this._touchRotate.enable(x),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const vn=J=>J.zoom||J.drag||J.pitch||J.rotate;class Jo extends D.Event{}function qn(J){return J.panDelta&&J.panDelta.mag()||J.zoomDelta||J.bearingDelta||J.pitchDelta}class ho{constructor(x,Q){this.handleWindowEvent=X=>{this.handleEvent(X,`${X.type}Window`)},this.handleEvent=(X,te)=>{if(X.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const Ae=X.type==="renderFrame"?void 0:X,he={needsRenderFrame:!1},ge={},ve={},Ce=X.touches,Se=Ce?this._getMapTouches(Ce):void 0,Re=Se?oe.touchPos(this._el,Se):oe.mousePos(this._el,X);for(const{handlerName:at,handler:Je,allowed:pt}of this._handlers){if(!Je.isEnabled())continue;let Et;this._blockedByActive(ve,pt,at)?Je.reset():Je[te||X.type]&&(Et=Je[te||X.type](X,Re,Se),this.mergeHandlerResult(he,ge,Et,at,Ae),Et&&Et.needsRenderFrame&&this._triggerRenderFrame()),(Et||Je.isActive())&&(ve[at]=Je)}const it={};for(const at in this._previousActiveHandlers)ve[at]||(it[at]=Ae);this._previousActiveHandlers=ve,(Object.keys(it).length||qn(he))&&(this._changes.push([he,ge,it]),this._triggerRenderFrame()),(Object.keys(ve).length||qn(he))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:tt}=he;tt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],tt(this._map))},this._map=x,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qa(x),this._bearingSnap=Q.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Q);const G=this._el;this._listeners=[[G,"touchstart",{passive:!0}],[G,"touchmove",{passive:!1}],[G,"touchend",void 0],[G,"touchcancel",void 0],[G,"mousedown",void 0],[G,"mousemove",void 0],[G,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[G,"mouseover",void 0],[G,"mouseout",void 0],[G,"dblclick",void 0],[G,"click",void 0],[G,"keydown",{capture:!1}],[G,"keyup",void 0],[G,"wheel",{passive:!1}],[G,"contextmenu",void 0],[window,"blur",void 0]];for(const[X,te,Ae]of this._listeners)oe.addEventListener(X,te,X===document?this.handleWindowEvent:this.handleEvent,Ae)}destroy(){for(const[x,Q,G]of this._listeners)oe.removeEventListener(x,Q,x===document?this.handleWindowEvent:this.handleEvent,G)}_addDefaultHandlers(x){const Q=this._map,G=Q.getCanvasContainer();this._add("mapEvent",new Ra(Q,x));const X=Q.boxZoom=new Zo(Q,x);this._add("boxZoom",X),x.interactive&&x.boxZoom&&X.enable();const te=new gi(Q),Ae=new Ha(Q);Q.doubleClickZoom=new ws(Ae,te),this._add("tapZoom",te),this._add("clickZoom",Ae),x.interactive&&x.doubleClickZoom&&Q.doubleClickZoom.enable();const he=new da;this._add("tapDragZoom",he);const ge=Q.touchPitch=new ur(Q);this._add("touchPitch",ge),x.interactive&&x.touchPitch&&Q.touchPitch.enable(x.touchPitch);const ve=bt(x),Ce=St(x);Q.dragRotate=new Er(x,ve,Ce),this._add("mouseRotate",ve,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate"]),x.interactive&&x.dragRotate&&Q.dragRotate.enable();const Se=(({enable:pt,clickTolerance:Et})=>{const At=new He({checkCorrectEvent:mt=>oe.mouseButton(mt)===0&&!mt.ctrlKey});return new kn({clickTolerance:Et,move:(mt,It)=>({around:It,panDelta:It.sub(mt)}),activateOnStart:!0,moveStateManager:At,enable:pt,assignEvents:$e})})(x),Re=new Nt(x,Q);Q.dragPan=new ns(G,Se,Re),this._add("mousePan",Se),this._add("touchPan",Re,["touchZoom","touchRotate"]),x.interactive&&x.dragPan&&Q.dragPan.enable(x.dragPan);const it=new Oi,tt=new Gi;Q.touchZoomRotate=new pa(G,tt,it,he),this._add("touchRotate",it,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),x.interactive&&x.touchZoomRotate&&Q.touchZoomRotate.enable(x.touchZoomRotate);const at=Q.scrollZoom=new Sr(Q,()=>this._triggerRenderFrame());this._add("scrollZoom",at,["mousePan"]),x.interactive&&x.scrollZoom&&Q.scrollZoom.enable(x.scrollZoom);const Je=Q.keyboard=new nr(Q);this._add("keyboard",Je),x.interactive&&x.keyboard&&Q.keyboard.enable(),this._add("blockableMapEvent",new co(Q))}_add(x,Q,G){this._handlers.push({handlerName:x,handler:Q,allowed:G}),this._handlersById[x]=Q}stop(x){if(!this._updatingCamera){for(const{handler:Q}of this._handlers)Q.reset();this._inertia.clear(),this._fireEvents({},{},x),this._changes=[]}}isActive(){for(const{handler:x}of this._handlers)if(x.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vn(this._eventsInProgress)||this.isZooming()}_blockedByActive(x,Q,G){for(const X in x)if(X!==G&&(!Q||Q.indexOf(X)<0))return!0;return!1}_getMapTouches(x){const Q=[];for(const G of x)this._el.contains(G.target)&&Q.push(G);return Q}mergeHandlerResult(x,Q,G,X,te){if(!G)return;D.extend(x,G);const Ae={handlerName:X,originalEvent:G.originalEvent||te};G.zoomDelta!==void 0&&(Q.zoom=Ae),G.panDelta!==void 0&&(Q.drag=Ae),G.pitchDelta!==void 0&&(Q.pitch=Ae),G.bearingDelta!==void 0&&(Q.rotate=Ae)}_applyChanges(){const x={},Q={},G={};for(const[X,te,Ae]of this._changes)X.panDelta&&(x.panDelta=(x.panDelta||new D.Point(0,0))._add(X.panDelta)),X.zoomDelta&&(x.zoomDelta=(x.zoomDelta||0)+X.zoomDelta),X.bearingDelta&&(x.bearingDelta=(x.bearingDelta||0)+X.bearingDelta),X.pitchDelta&&(x.pitchDelta=(x.pitchDelta||0)+X.pitchDelta),X.around!==void 0&&(x.around=X.around),X.pinchAround!==void 0&&(x.pinchAround=X.pinchAround),X.noInertia&&(x.noInertia=X.noInertia),D.extend(Q,te),D.extend(G,Ae);this._updateMapTransform(x,Q,G),this._changes=[]}_updateMapTransform(x,Q,G){const X=this._map,te=X._getTransformForUpdate(),Ae=X.terrain;if(!(qn(x)||Ae&&this._terrainMovement))return this._fireEvents(Q,G,!0);let{panDelta:he,zoomDelta:ge,bearingDelta:ve,pitchDelta:Ce,around:Se,pinchAround:Re}=x;Re!==void 0&&(Se=Re),X._stop(!0),Se=Se||X.transform.centerPoint;const it=te.pointLocation(he?Se.sub(he):Se);ve&&(te.bearing+=ve),Ce&&(te.pitch+=Ce),ge&&(te.zoom+=ge),Ae?this._terrainMovement||!Q.drag&&!Q.zoom?Q.drag&&this._terrainMovement?te.center=te.pointLocation(te.centerPoint.sub(he)):te.setLocationAtPoint(it,Se):(this._terrainMovement=!0,this._map._elevationFreeze=!0,te.setLocationAtPoint(it,Se),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,te.recalculateZoom(X.terrain)})):te.setLocationAtPoint(it,Se),X._applyUpdatedTransform(te),this._map._update(),x.noInertia||this._inertia.record(x),this._fireEvents(Q,G,!0)}_fireEvents(x,Q,G){const X=vn(this._eventsInProgress),te=vn(x),Ae={};for(const Ce in x){const{originalEvent:Se}=x[Ce];this._eventsInProgress[Ce]||(Ae[`${Ce}start`]=Se),this._eventsInProgress[Ce]=x[Ce]}!X&&te&&this._fireEvent("movestart",te.originalEvent);for(const Ce in Ae)this._fireEvent(Ce,Ae[Ce]);te&&this._fireEvent("move",te.originalEvent);for(const Ce in x){const{originalEvent:Se}=x[Ce];this._fireEvent(Ce,Se)}const he={};let ge;for(const Ce in this._eventsInProgress){const{handlerName:Se,originalEvent:Re}=this._eventsInProgress[Ce];this._handlersById[Se].isActive()||(delete this._eventsInProgress[Ce],ge=Q[Se]||Re,he[`${Ce}end`]=ge)}for(const Ce in he)this._fireEvent(Ce,he[Ce]);const ve=vn(this._eventsInProgress);if(G&&(X||te)&&!ve){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Se=Re=>Re!==0&&-this._bearingSnap<Re&&Re<this._bearingSnap;Ce?(Se(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),Ce.freezeElevation=!0,this._map.easeTo(Ce,{originalEvent:ge})):(this._map.fire(new D.Event("moveend",{originalEvent:ge})),Se(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(x,Q){this._map.fire(new D.Event(x,Q?{originalEvent:Q}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(x=>{delete this._frameId,this.handleEvent(new Jo("renderFrame",{timeStamp:x})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class _l extends D.Evented{constructor(x,Q){super(),this._renderFrameCallback=()=>{const G=Math.min((D.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(G)),G<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=Q.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new D.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(x,Q){return this.jumpTo({center:x},Q)}panBy(x,Q,G){return x=D.Point.convert(x).mult(-1),this.panTo(this.transform.center,D.extend({offset:x},Q),G)}panTo(x,Q,G){return this.easeTo(D.extend({center:x},Q),G)}getZoom(){return this.transform.zoom}setZoom(x,Q){return this.jumpTo({zoom:x},Q),this}zoomTo(x,Q,G){return this.easeTo(D.extend({zoom:x},Q),G)}zoomIn(x,Q){return this.zoomTo(this.getZoom()+1,x,Q),this}zoomOut(x,Q){return this.zoomTo(this.getZoom()-1,x,Q),this}getBearing(){return this.transform.bearing}setBearing(x,Q){return this.jumpTo({bearing:x},Q),this}getPadding(){return this.transform.padding}setPadding(x,Q){return this.jumpTo({padding:x},Q),this}rotateTo(x,Q,G){return this.easeTo(D.extend({bearing:x},Q),G)}resetNorth(x,Q){return this.rotateTo(0,D.extend({duration:1e3},x),Q),this}resetNorthPitch(x,Q){return this.easeTo(D.extend({bearing:0,pitch:0,duration:1e3},x),Q),this}snapToNorth(x,Q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,Q):this}getPitch(){return this.transform.pitch}setPitch(x,Q){return this.jumpTo({pitch:x},Q),this}cameraForBounds(x,Q){x=R.convert(x);const G=Q&&Q.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),G,Q)}_cameraForBoxAndBearing(x,Q,G,X){const te={top:0,bottom:0,right:0,left:0};if(typeof(X=D.extend({padding:te,offset:[0,0],maxZoom:this.transform.maxZoom},X)).padding=="number"){const It=X.padding;X.padding={top:It,bottom:It,right:It,left:It}}X.padding=D.extend(te,X.padding);const Ae=this.transform,he=Ae.padding,ge=Ae.project(D.LngLat.convert(x)),ve=Ae.project(D.LngLat.convert(Q)),Ce=ge.rotate(-G*Math.PI/180),Se=ve.rotate(-G*Math.PI/180),Re=new D.Point(Math.max(Ce.x,Se.x),Math.max(Ce.y,Se.y)),it=new D.Point(Math.min(Ce.x,Se.x),Math.min(Ce.y,Se.y)),tt=Re.sub(it),at=(Ae.width-(he.left+he.right+X.padding.left+X.padding.right))/tt.x,Je=(Ae.height-(he.top+he.bottom+X.padding.top+X.padding.bottom))/tt.y;if(Je<0||at<0)return void D.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const pt=Math.min(Ae.scaleZoom(Ae.scale*Math.min(at,Je)),X.maxZoom),Et=D.Point.convert(X.offset),At=new D.Point((X.padding.left-X.padding.right)/2,(X.padding.top-X.padding.bottom)/2).rotate(G*Math.PI/180),mt=Et.add(At).mult(Ae.scale/Ae.zoomScale(pt));return{center:Ae.unproject(ge.add(ve).div(2).sub(mt)),zoom:pt,bearing:G}}fitBounds(x,Q,G){return this._fitInternal(this.cameraForBounds(x,Q),Q,G)}fitScreenCoordinates(x,Q,G,X,te){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(D.Point.convert(x)),this.transform.pointLocation(D.Point.convert(Q)),G,X),X,te)}_fitInternal(x,Q,G){return x?(delete(Q=D.extend(x,Q)).padding,Q.linear?this.easeTo(Q,G):this.flyTo(Q,G)):this}jumpTo(x,Q){this.stop();const G=this._getTransformForUpdate();let X=!1,te=!1,Ae=!1;return"zoom"in x&&G.zoom!==+x.zoom&&(X=!0,G.zoom=+x.zoom),x.center!==void 0&&(G.center=D.LngLat.convert(x.center)),"bearing"in x&&G.bearing!==+x.bearing&&(te=!0,G.bearing=+x.bearing),"pitch"in x&&G.pitch!==+x.pitch&&(Ae=!0,G.pitch=+x.pitch),x.padding==null||G.isPaddingEqual(x.padding)||(G.padding=x.padding),this._applyUpdatedTransform(G),this.fire(new D.Event("movestart",Q)).fire(new D.Event("move",Q)),X&&this.fire(new D.Event("zoomstart",Q)).fire(new D.Event("zoom",Q)).fire(new D.Event("zoomend",Q)),te&&this.fire(new D.Event("rotatestart",Q)).fire(new D.Event("rotate",Q)).fire(new D.Event("rotateend",Q)),Ae&&this.fire(new D.Event("pitchstart",Q)).fire(new D.Event("pitch",Q)).fire(new D.Event("pitchend",Q)),this.fire(new D.Event("moveend",Q))}calculateCameraOptionsFromTo(x,Q,G,X=0){const te=D.MercatorCoordinate.fromLngLat(x,Q),Ae=D.MercatorCoordinate.fromLngLat(G,X),he=Ae.x-te.x,ge=Ae.y-te.y,ve=Ae.z-te.z,Ce=Math.hypot(he,ge,ve);if(Ce===0)throw new Error("Can't calculate camera options with same From and To");const Se=Math.hypot(he,ge),Re=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ce/this.transform.tileSize),it=180*Math.atan2(he,-ge)/Math.PI;let tt=180*Math.acos(Se/Ce)/Math.PI;return tt=ve<0?90-tt:90+tt,{center:Ae.toLngLat(),zoom:Re,pitch:tt,bearing:it}}easeTo(x,Q){this._stop(!1,x.easeId),((x=D.extend({offset:[0,0],duration:500,easing:D.defaultEasing},x)).animate===!1||!x.essential&&D.browser.prefersReducedMotion)&&(x.duration=0);const G=this._getTransformForUpdate(),X=this.getZoom(),te=this.getBearing(),Ae=this.getPitch(),he=this.getPadding(),ge="zoom"in x?+x.zoom:X,ve="bearing"in x?this._normalizeBearing(x.bearing,te):te,Ce="pitch"in x?+x.pitch:Ae,Se="padding"in x?x.padding:G.padding,Re=D.Point.convert(x.offset);let it=G.centerPoint.add(Re);const tt=G.pointLocation(it),at=D.LngLat.convert(x.center||tt);this._normalizeCenter(at);const Je=G.project(tt),pt=G.project(at).sub(Je),Et=G.zoomScale(ge-X);let At,mt;x.around&&(At=D.LngLat.convert(x.around),mt=G.locationPoint(At));const It={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==X,this._rotating=this._rotating||te!==ve,this._pitching=this._pitching||Ce!==Ae,this._padding=!G.isPaddingEqual(Se),this._easeId=x.easeId,this._prepareEase(Q,x.noMoveStart,It),this.terrain&&this._prepareElevation(at),this._ease(kt=>{if(this._zooming&&(G.zoom=D.interpolate.number(X,ge,kt)),this._rotating&&(G.bearing=D.interpolate.number(te,ve,kt)),this._pitching&&(G.pitch=D.interpolate.number(Ae,Ce,kt)),this._padding&&(G.interpolatePadding(he,Se,kt),it=G.centerPoint.add(Re)),this.terrain&&!x.freezeElevation&&this._updateElevation(kt),At)G.setLocationAtPoint(At,mt);else{const Ot=G.zoomScale(G.zoom-X),Wt=ge>X?Math.min(2,Et):Math.max(.5,Et),zt=Math.pow(Wt,1-kt),Jt=G.unproject(Je.add(pt.mult(kt*zt)).mult(Ot));G.setLocationAtPoint(G.renderWorldCopies?Jt.wrap():Jt,it)}this._applyUpdatedTransform(G),this._fireMoveEvents(Q)},kt=>{this.terrain&&this._finalizeElevation(),this._afterEase(Q,kt)},x),this}_prepareEase(x,Q,G={}){this._moving=!0,Q||G.moving||this.fire(new D.Event("movestart",x)),this._zooming&&!G.zooming&&this.fire(new D.Event("zoomstart",x)),this._rotating&&!G.rotating&&this.fire(new D.Event("rotatestart",x)),this._pitching&&!G.pitching&&this.fire(new D.Event("pitchstart",x))}_prepareElevation(x){this._elevationCenter=x,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(x,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(x){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const Q=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(x<1&&Q!==this._elevationTarget){const G=this._elevationTarget-this._elevationStart;this._elevationStart+=x*(G-(Q-(G*x+this._elevationStart))/(1-x)),this._elevationTarget=Q}this.transform.elevation=D.interpolate.number(this._elevationStart,this._elevationTarget,x)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(x){if(!this.transformCameraUpdate)return;const Q=x.clone(),{center:G,zoom:X,pitch:te,bearing:Ae,elevation:he}=this.transformCameraUpdate(Q);G&&(Q.center=G),X!==void 0&&(Q.zoom=X),te!==void 0&&(Q.pitch=te),Ae!==void 0&&(Q.bearing=Ae),he!==void 0&&(Q.elevation=he),this.transform.apply(Q)}_fireMoveEvents(x){this.fire(new D.Event("move",x)),this._zooming&&this.fire(new D.Event("zoom",x)),this._rotating&&this.fire(new D.Event("rotate",x)),this._pitching&&this.fire(new D.Event("pitch",x))}_afterEase(x,Q){if(this._easeId&&Q&&this._easeId===Q)return;delete this._easeId;const G=this._zooming,X=this._rotating,te=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,G&&this.fire(new D.Event("zoomend",x)),X&&this.fire(new D.Event("rotateend",x)),te&&this.fire(new D.Event("pitchend",x)),this.fire(new D.Event("moveend",x))}flyTo(x,Q){if(!x.essential&&D.browser.prefersReducedMotion){const xi=D.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xi,Q)}this.stop(),x=D.extend({offset:[0,0],speed:1.2,curve:1.42,easing:D.defaultEasing},x);const G=this._getTransformForUpdate(),X=this.getZoom(),te=this.getBearing(),Ae=this.getPitch(),he=this.getPadding(),ge="zoom"in x?D.clamp(+x.zoom,G.minZoom,G.maxZoom):X,ve="bearing"in x?this._normalizeBearing(x.bearing,te):te,Ce="pitch"in x?+x.pitch:Ae,Se="padding"in x?x.padding:G.padding,Re=G.zoomScale(ge-X),it=D.Point.convert(x.offset);let tt=G.centerPoint.add(it);const at=G.pointLocation(tt),Je=D.LngLat.convert(x.center||at);this._normalizeCenter(Je);const pt=G.project(at),Et=G.project(Je).sub(pt);let At=x.curve;const mt=Math.max(G.width,G.height),It=mt/Re,kt=Et.mag();if("minZoom"in x){const xi=D.clamp(Math.min(x.minZoom,X,ge),G.minZoom,G.maxZoom),Hr=mt/G.zoomScale(xi-X);At=Math.sqrt(Hr/kt*2)}const Ot=At*At;function Wt(xi){const Hr=(It*It-mt*mt+(xi?-1:1)*Ot*Ot*kt*kt)/(2*(xi?It:mt)*Ot*kt);return Math.log(Math.sqrt(Hr*Hr+1)-Hr)}function zt(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function Jt(xi){return(Math.exp(xi)+Math.exp(-xi))/2}const Bi=Wt(!1);let ar=function(xi){return Jt(Bi)/Jt(Bi+At*xi)},oi=function(xi){return mt*((Jt(Bi)*(zt(Hr=Bi+At*xi)/Jt(Hr))-zt(Bi))/Ot)/kt;var Hr},ki=(Wt(!0)-Bi)/At;if(Math.abs(kt)<1e-6||!isFinite(ki)){if(Math.abs(mt-It)<1e-6)return this.easeTo(x,Q);const xi=It<mt?-1:1;ki=Math.abs(Math.log(It/mt))/At,oi=function(){return 0},ar=function(Hr){return Math.exp(xi*At*Hr)}}return x.duration="duration"in x?+x.duration:1e3*ki/("screenSpeed"in x?+x.screenSpeed/At:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=te!==ve,this._pitching=Ce!==Ae,this._padding=!G.isPaddingEqual(Se),this._prepareEase(Q,!1),this.terrain&&this._prepareElevation(Je),this._ease(xi=>{const Hr=xi*ki,or=1/ar(Hr);G.zoom=xi===1?ge:X+G.scaleZoom(or),this._rotating&&(G.bearing=D.interpolate.number(te,ve,xi)),this._pitching&&(G.pitch=D.interpolate.number(Ae,Ce,xi)),this._padding&&(G.interpolatePadding(he,Se,xi),tt=G.centerPoint.add(it)),this.terrain&&!x.freezeElevation&&this._updateElevation(xi);const Mi=xi===1?Je:G.unproject(pt.add(Et.mult(oi(Hr))).mult(or));G.setLocationAtPoint(G.renderWorldCopies?Mi.wrap():Mi,tt),this._applyUpdatedTransform(G),this._fireMoveEvents(Q)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(Q)},x),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(x,Q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const G=this._onEaseEnd;delete this._onEaseEnd,G.call(this,Q)}if(!x){const G=this.handlers;G&&G.stop(!1)}return this}_ease(x,Q,G){G.animate===!1||G.duration===0?(x(1),Q()):(this._easeStart=D.browser.now(),this._easeOptions=G,this._onEaseFrame=x,this._onEaseEnd=Q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(x,Q){x=D.wrap(x,-180,180);const G=Math.abs(x-Q);return Math.abs(x-360-Q)<G&&(x-=360),Math.abs(x+360-Q)<G&&(x+=360),x}_normalizeCenter(x){const Q=this.transform;if(!Q.renderWorldCopies||Q.lngRange)return;const G=x.lng-Q.center.lng;x.lng+=G>180?-360:G<-180?360:0}queryTerrainElevation(x){return this.terrain?this.terrain.getElevationForLngLatZoom(D.LngLat.convert(x),this.transform.tileZoom)-this.transform.elevation:null}}class zs{constructor(x={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=Q=>{!Q||Q.sourceDataType!=="metadata"&&Q.sourceDataType!=="visibility"&&Q.dataType!=="style"&&Q.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=x}getDefaultPosition(){return"bottom-right"}onAdd(x){return this._map=x,this._compact=this.options&&this.options.compact,this._container=oe.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=oe.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=oe.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){oe.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(x,Q){const G=this._map._getUIString(`AttributionControl.${Q}`);x.title=G,x.setAttribute("aria-label",G)}_updateAttributions(){if(!this._map.style)return;let x=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?x=x.concat(this.options.customAttribution.map(X=>typeof X!="string"?"":X)):typeof this.options.customAttribution=="string"&&x.push(this.options.customAttribution)),this._map.style.stylesheet){const X=this._map.style.stylesheet;this.styleOwner=X.owner,this.styleId=X.id}const Q=this._map.style.sourceCaches;for(const X in Q){const te=Q[X];if(te.used||te.usedForTerrain){const Ae=te.getSource();Ae.attribution&&x.indexOf(Ae.attribution)<0&&x.push(Ae.attribution)}}x=x.filter(X=>String(X).trim()),x.sort((X,te)=>X.length-te.length),x=x.filter((X,te)=>{for(let Ae=te+1;Ae<x.length;Ae++)if(x[Ae].indexOf(X)>=0)return!1;return!0});const G=x.join(" | ");G!==this._attribHTML&&(this._attribHTML=G,x.length?(this._innerContainer.innerHTML=G,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mo{constructor(x={}){this._updateCompact=()=>{const Q=this._container.children;if(Q.length){const G=Q[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&G.classList.add("maplibregl-compact"):G.classList.remove("maplibregl-compact")}},this.options=x}getDefaultPosition(){return"bottom-left"}onAdd(x){this._map=x,this._compact=this.options&&this.options.compact,this._container=oe.create("div","maplibregl-ctrl");const Q=oe.create("a","maplibregl-ctrl-logo");return Q.target="_blank",Q.rel="noopener nofollow",Q.href="https://maplibre.org/",Q.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Q.setAttribute("rel","noopener nofollow"),this._container.appendChild(Q),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){oe.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(x){const Q=++this._id;return this._queue.push({callback:x,id:Q,cancelled:!1}),Q}remove(x){const Q=this._currentlyRunning,G=Q?this._queue.concat(Q):this._queue;for(const X of G)if(X.id===x)return void(X.cancelled=!0)}run(x=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const Q=this._currentlyRunning=this._queue;this._queue=[];for(const G of Q)if(!G.cancelled&&(G.callback(x),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ni={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var $o=D.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class yl extends D.Evented{constructor(x){super(),this.sourceCache=x,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,x.usedForTerrain=!0,x.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(x,Q){this.sourceCache.update(x,Q),this._renderableTilesKeys=[];const G={};for(const X of x.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:Q}))G[X.key]=!0,this._renderableTilesKeys.push(X.key),this._tiles[X.key]||(X.posMatrix=new Float64Array(16),D.ortho(X.posMatrix,0,D.EXTENT,0,D.EXTENT,0,1),this._tiles[X.key]=new Kt(X,this.tileSize));for(const X in this._tiles)G[X]||delete this._tiles[X]}freeRtt(x){for(const Q in this._tiles){const G=this._tiles[Q];(!x||G.tileID.equals(x)||G.tileID.isChildOf(x)||x.isChildOf(G.tileID))&&(G.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(x=>this.getTileByID(x))}getTileByID(x){return this._tiles[x]}getTerrainCoords(x){const Q={};for(const G of this._renderableTilesKeys){const X=this._tiles[G].tileID;if(X.canonical.equals(x.canonical)){const te=x.clone();te.posMatrix=new Float64Array(16),D.ortho(te.posMatrix,0,D.EXTENT,0,D.EXTENT,0,1),Q[G]=te}else if(X.canonical.isChildOf(x.canonical)){const te=x.clone();te.posMatrix=new Float64Array(16);const Ae=X.canonical.z-x.canonical.z,he=X.canonical.x-(X.canonical.x>>Ae<<Ae),ge=X.canonical.y-(X.canonical.y>>Ae<<Ae),ve=D.EXTENT>>Ae;D.ortho(te.posMatrix,0,ve,0,ve,0,1),D.translate(te.posMatrix,te.posMatrix,[-he*ve,-ge*ve,0]),Q[G]=te}else if(x.canonical.isChildOf(X.canonical)){const te=x.clone();te.posMatrix=new Float64Array(16);const Ae=x.canonical.z-X.canonical.z,he=x.canonical.x-(x.canonical.x>>Ae<<Ae),ge=x.canonical.y-(x.canonical.y>>Ae<<Ae),ve=D.EXTENT>>Ae;D.ortho(te.posMatrix,0,D.EXTENT,0,D.EXTENT,0,1),D.translate(te.posMatrix,te.posMatrix,[he*ve,ge*ve,0]),D.scale(te.posMatrix,te.posMatrix,[1/2**Ae,1/2**Ae,0]),Q[G]=te}}return Q}getSourceTile(x,Q){const G=this.sourceCache._source;let X=x.overscaledZ-this.deltaZoom;if(X>G.maxzoom&&(X=G.maxzoom),X<G.minzoom)return null;this._sourceTileCache[x.key]||(this._sourceTileCache[x.key]=x.scaledTo(X).key);let te=this.sourceCache.getTileByID(this._sourceTileCache[x.key]);if((!te||!te.dem)&&Q)for(;X>=G.minzoom&&(!te||!te.dem);)te=this.sourceCache.getTileByID(x.scaledTo(X--).key);return te}tilesAfterTime(x=Date.now()){return Object.values(this._tiles).filter(Q=>Q.timeAdded>=x)}}class vl{constructor(x,Q,G){this.painter=x,this.sourceCache=new yl(Q),this.options=G,this.exaggeration=typeof G.exaggeration=="number"?G.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(x,Q,G,X=D.EXTENT){var te;if(!(Q>=0&&Q<X&&G>=0&&G<X))return 0;const Ae=this.getTerrainData(x),he=(te=Ae.tile)===null||te===void 0?void 0:te.dem;if(!he)return 0;const ge=function(tt,at,Je){var pt=at[0],Et=at[1];return tt[0]=Je[0]*pt+Je[4]*Et+Je[12],tt[1]=Je[1]*pt+Je[5]*Et+Je[13],tt}([],[Q/X*D.EXTENT,G/X*D.EXTENT],Ae.u_terrain_matrix),ve=[ge[0]*he.dim,ge[1]*he.dim],Ce=Math.floor(ve[0]),Se=Math.floor(ve[1]),Re=ve[0]-Ce,it=ve[1]-Se;return he.get(Ce,Se)*(1-Re)*(1-it)+he.get(Ce+1,Se)*Re*(1-it)+he.get(Ce,Se+1)*(1-Re)*it+he.get(Ce+1,Se+1)*Re*it}getElevationForLngLatZoom(x,Q){const{tileID:G,mercatorX:X,mercatorY:te}=this._getOverscaledTileIDFromLngLatZoom(x,Q);return this.getElevation(G,X%D.EXTENT,te%D.EXTENT,D.EXTENT)}getElevation(x,Q,G,X=D.EXTENT){return this.getDEMElevation(x,Q,G,X)*this.exaggeration}getTerrainData(x){if(!this._emptyDemTexture){const X=this.painter.context,te=new D.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _t(X,te,X.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _t(X,new D.RGBAImage({width:1,height:1}),X.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(X.gl.NEAREST,X.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=D.identity([])}const Q=this.sourceCache.getSourceTile(x,!0);if(Q&&Q.dem&&(!Q.demTexture||Q.needsTerrainPrepare)){const X=this.painter.context;Q.demTexture=this.painter.getTileTexture(Q.dem.stride),Q.demTexture?Q.demTexture.update(Q.dem.getPixels(),{premultiply:!1}):Q.demTexture=new _t(X,Q.dem.getPixels(),X.gl.RGBA,{premultiply:!1}),Q.demTexture.bind(X.gl.NEAREST,X.gl.CLAMP_TO_EDGE),Q.needsTerrainPrepare=!1}const G=Q&&Q+Q.tileID.key+x.key;if(G&&!this._demMatrixCache[G]){const X=this.sourceCache.sourceCache._source.maxzoom;let te=x.canonical.z-Q.tileID.canonical.z;x.overscaledZ>x.canonical.z&&(x.canonical.z>=X?te=x.canonical.z-X:D.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const Ae=x.canonical.x-(x.canonical.x>>te<<te),he=x.canonical.y-(x.canonical.y>>te<<te),ge=D.fromScaling(new Float64Array(16),[1/(D.EXTENT<<te),1/(D.EXTENT<<te),0]);D.translate(ge,ge,[Ae*D.EXTENT,he*D.EXTENT,0]),this._demMatrixCache[x.key]={matrix:ge,coord:x}}return{u_depth:2,u_terrain:3,u_terrain_dim:Q&&Q.dem&&Q.dem.dim||1,u_terrain_matrix:G?this._demMatrixCache[x.key].matrix:this._emptyDemMatrix,u_terrain_unpack:Q&&Q.dem&&Q.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(Q&&Q.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:Q}}getFramebuffer(x){const Q=this.painter,G=Q.width/devicePixelRatio,X=Q.height/devicePixelRatio;return!this._fbo||this._fbo.width===G&&this._fbo.height===X||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _t(Q.context,{width:G,height:X,data:null},Q.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(Q.context.gl.NEAREST,Q.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _t(Q.context,{width:G,height:X,data:null},Q.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(Q.context.gl.NEAREST,Q.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=Q.context.createFramebuffer(G,X,!0,!1),this._fbo.depthAttachment.set(Q.context.createRenderbuffer(Q.context.gl.DEPTH_COMPONENT16,G,X))),this._fbo.colorAttachment.set(x==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const x=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const Q=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let te=0,Ae=0;te<this._coordsTextureSize;te++)for(let he=0;he<this._coordsTextureSize;he++,Ae+=4)Q[Ae+0]=255&he,Q[Ae+1]=255&te,Q[Ae+2]=he>>8<<4|te>>8,Q[Ae+3]=0;const G=new D.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(Q.buffer)),X=new _t(x,G,x.gl.RGBA,{premultiply:!1});return X.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._coordsTexture=X,X}pointCoordinate(x){const Q=new Uint8Array(4),G=this.painter.context,X=G.gl;G.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),X.readPixels(x.x,this.painter.height/devicePixelRatio-x.y-1,1,1,X.RGBA,X.UNSIGNED_BYTE,Q),G.bindFramebuffer.set(null);const te=Q[0]+(Q[2]>>4<<8),Ae=Q[1]+((15&Q[2])<<8),he=this.coordsIndex[255-Q[3]],ge=he&&this.sourceCache.getTileByID(he);if(!ge)return null;const ve=this._coordsTextureSize,Ce=(1<<ge.tileID.canonical.z)*ve;return new D.MercatorCoordinate((ge.tileID.canonical.x*ve+te)/Ce,(ge.tileID.canonical.y*ve+Ae)/Ce,this.getElevation(ge.tileID,te,Ae,ve))}getTerrainMesh(){if(this._mesh)return this._mesh;const x=this.painter.context,Q=new D.Pos3dArray,G=new D.TriangleIndexArray,X=this.meshSize,te=D.EXTENT/X,Ae=X*X;for(let Se=0;Se<=X;Se++)for(let Re=0;Re<=X;Re++)Q.emplaceBack(Re*te,Se*te,0);for(let Se=0;Se<Ae;Se+=X+1)for(let Re=0;Re<X;Re++)G.emplaceBack(Re+Se,X+Re+Se+1,X+Re+Se+2),G.emplaceBack(Re+Se,X+Re+Se+2,Re+Se+1);const he=Q.length,ge=he+2*(X+1);for(const Se of[0,1])for(let Re=0;Re<=X;Re++)for(const it of[0,1])Q.emplaceBack(Re*te,Se*D.EXTENT,it);for(let Se=0;Se<2*X;Se+=2)G.emplaceBack(ge+Se,ge+Se+1,ge+Se+3),G.emplaceBack(ge+Se,ge+Se+3,ge+Se+2),G.emplaceBack(he+Se,he+Se+3,he+Se+1),G.emplaceBack(he+Se,he+Se+2,he+Se+3);const ve=Q.length,Ce=ve+2*(X+1);for(const Se of[0,1])for(let Re=0;Re<=X;Re++)for(const it of[0,1])Q.emplaceBack(Se*D.EXTENT,Re*te,it);for(let Se=0;Se<2*X;Se+=2)G.emplaceBack(ve+Se,ve+Se+1,ve+Se+3),G.emplaceBack(ve+Se,ve+Se+3,ve+Se+2),G.emplaceBack(Ce+Se,Ce+Se+3,Ce+Se+1),G.emplaceBack(Ce+Se,Ce+Se+2,Ce+Se+3);return this._mesh={indexBuffer:x.createIndexBuffer(G),vertexBuffer:x.createVertexBuffer(Q,$o.members),segments:D.SegmentVector.simpleSegment(0,0,Q.length,G.length)},this._mesh}getMeshFrameDelta(x){return 2*Math.PI*D.earthRadius/Math.pow(2,x)/5}getMinTileElevationForLngLatZoom(x,Q){var G;const{tileID:X}=this._getOverscaledTileIDFromLngLatZoom(x,Q);return(G=this.getMinMaxElevation(X).minElevation)!==null&&G!==void 0?G:0}getMinMaxElevation(x){const Q=this.getTerrainData(x).tile,G={minElevation:null,maxElevation:null};return Q&&Q.dem&&(G.minElevation=Q.dem.min*this.exaggeration,G.maxElevation=Q.dem.max*this.exaggeration),G}_getOverscaledTileIDFromLngLatZoom(x,Q){const G=D.MercatorCoordinate.fromLngLat(x.wrap()),X=(1<<Q)*D.EXTENT,te=G.x*X,Ae=G.y*X,he=Math.floor(te/D.EXTENT),ge=Math.floor(Ae/D.EXTENT);return{tileID:new D.OverscaledTileID(Q,0,Q,he,ge),mercatorX:te,mercatorY:Ae}}}class Ns{constructor(x,Q,G){this._context=x,this._size=Q,this._tileSize=G,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const x of this._objects)x.texture.destroy(),x.fbo.destroy()}_createObject(x){const Q=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),G=new _t(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return G.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),Q.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),Q.colorAttachment.set(G.texture),{id:x,fbo:Q,texture:G,stamp:-1,inUse:!1}}getObjectForId(x){return this._objects[x]}useObject(x){x.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(Q=>x.id!==Q),this._recentlyUsed.push(x.id)}stampObject(x){x.stamp=++this._stamp}getOrCreateFreeObject(){for(const Q of this._recentlyUsed)if(!this._objects[Q].inUse)return this._objects[Q];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const x=this._createObject(this._objects.length);return this._objects.push(x),x}freeObject(x){x.inUse=!1}freeAllObjects(){for(const x of this._objects)this.freeObject(x)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(x=>!x.inUse)===!1}}const za={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Dn{constructor(x,Q){this.painter=x,this.terrain=Q,this.pool=new Ns(x.context,30,Q.sourceCache.tileSize*Q.qualityFactor)}destruct(){this.pool.destruct()}getTexture(x){return this.pool.getObjectForId(x.rtt[this._stacks.length-1].id).texture}prepareForRender(x,Q){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=x._order.filter(G=>!x._layers[G].isHidden(Q)),this._coordsDescendingInv={};for(const G in x.sourceCaches){this._coordsDescendingInv[G]={};const X=x.sourceCaches[G].getVisibleCoordinates();for(const te of X){const Ae=this.terrain.sourceCache.getTerrainCoords(te);for(const he in Ae)this._coordsDescendingInv[G][he]||(this._coordsDescendingInv[G][he]=[]),this._coordsDescendingInv[G][he].push(Ae[he])}}this._coordsDescendingInvStr={};for(const G of x._order){const X=x._layers[G],te=X.source;if(za[X.type]&&!this._coordsDescendingInvStr[te]){this._coordsDescendingInvStr[te]={};for(const Ae in this._coordsDescendingInv[te])this._coordsDescendingInvStr[te][Ae]=this._coordsDescendingInv[te][Ae].map(he=>he.key).sort().join()}}for(const G of this._renderableTiles)for(const X in this._coordsDescendingInvStr){const te=this._coordsDescendingInvStr[X][G.tileID.key];te&&te!==G.rttCoords[X]&&(G.rtt=[])}}renderLayer(x){if(x.isHidden(this.painter.transform.zoom))return!1;const Q=x.type,G=this.painter,X=this._renderableLayerIds[this._renderableLayerIds.length-1]===x.id;if(za[Q]&&(this._prevType&&za[this._prevType]||this._stacks.push([]),this._prevType=Q,this._stacks[this._stacks.length-1].push(x.id),!X))return!0;if(za[this._prevType]||za[Q]&&X){this._prevType=Q;const te=this._stacks.length-1,Ae=this._stacks[te]||[];for(const he of this._renderableTiles){if(this.pool.isFull()&&(Kn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(he),he.rtt[te]){const ve=this.pool.getObjectForId(he.rtt[te].id);if(ve.stamp===he.rtt[te].stamp){this.pool.useObject(ve);continue}}const ge=this.pool.getOrCreateFreeObject();this.pool.useObject(ge),this.pool.stampObject(ge),he.rtt[te]={id:ge.id,stamp:ge.stamp},G.context.bindFramebuffer.set(ge.fbo.framebuffer),G.context.clear({color:D.Color.transparent,stencil:0}),G.currentStencilSource=void 0;for(let ve=0;ve<Ae.length;ve++){const Ce=G.style._layers[Ae[ve]],Se=Ce.source?this._coordsDescendingInv[Ce.source][he.tileID.key]:[he.tileID];G.context.viewport.set([0,0,ge.fbo.width,ge.fbo.height]),G._renderTileClippingMasks(Ce,Se),G.renderLayer(G,G.style.sourceCaches[Ce.source],Ce,Se),Ce.source&&(he.rttCoords[Ce.source]=this._coordsDescendingInvStr[Ce.source][he.tileID.key])}}return Kn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),za[Q]}return!1}}const uA=ne,Po={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:D.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Vr=J=>{J.touchstart=J.dragStart,J.touchmoveWindow=J.dragMove,J.touchend=J.dragEnd},ts={showCompass:!0,showZoom:!0,visualizePitch:!1};class Kl{constructor(x,Q,G=!1){this.mousedown=Ae=>{this.startMouse(D.extend({},Ae,{ctrlKey:!0,preventDefault:()=>Ae.preventDefault()}),oe.mousePos(this.element,Ae)),oe.addEventListener(window,"mousemove",this.mousemove),oe.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=Ae=>{this.moveMouse(Ae,oe.mousePos(this.element,Ae))},this.mouseup=Ae=>{this.mouseRotate.dragEnd(Ae),this.mousePitch&&this.mousePitch.dragEnd(Ae),this.offTemp()},this.touchstart=Ae=>{Ae.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=oe.touchPos(this.element,Ae.targetTouches)[0],this.startTouch(Ae,this._startPos),oe.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),oe.addEventListener(window,"touchend",this.touchend))},this.touchmove=Ae=>{Ae.targetTouches.length!==1?this.reset():(this._lastPos=oe.touchPos(this.element,Ae.targetTouches)[0],this.moveTouch(Ae,this._lastPos))},this.touchend=Ae=>{Ae.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const X=x.dragRotate._mouseRotate.getClickTolerance(),te=x.dragRotate._mousePitch.getClickTolerance();this.element=Q,this.mouseRotate=bt({clickTolerance:X,enable:!0}),this.touchRotate=(({enable:Ae,clickTolerance:he,bearingDegreesPerPixelMoved:ge=.8})=>{const ve=new je;return new kn({clickTolerance:he,move:(Ce,Se)=>({bearingDelta:(Se.x-Ce.x)*ge}),moveStateManager:ve,enable:Ae,assignEvents:Vr})})({clickTolerance:X,enable:!0}),this.map=x,G&&(this.mousePitch=St({clickTolerance:te,enable:!0}),this.touchPitch=(({enable:Ae,clickTolerance:he,pitchDegreesPerPixelMoved:ge=-.5})=>{const ve=new je;return new kn({clickTolerance:he,move:(Ce,Se)=>({pitchDelta:(Se.y-Ce.y)*ge}),moveStateManager:ve,enable:Ae,assignEvents:Vr})})({clickTolerance:te,enable:!0})),oe.addEventListener(Q,"mousedown",this.mousedown),oe.addEventListener(Q,"touchstart",this.touchstart,{passive:!1}),oe.addEventListener(Q,"touchcancel",this.reset)}startMouse(x,Q){this.mouseRotate.dragStart(x,Q),this.mousePitch&&this.mousePitch.dragStart(x,Q),oe.disableDrag()}startTouch(x,Q){this.touchRotate.dragStart(x,Q),this.touchPitch&&this.touchPitch.dragStart(x,Q),oe.disableDrag()}moveMouse(x,Q){const G=this.map,{bearingDelta:X}=this.mouseRotate.dragMove(x,Q)||{};if(X&&G.setBearing(G.getBearing()+X),this.mousePitch){const{pitchDelta:te}=this.mousePitch.dragMove(x,Q)||{};te&&G.setPitch(G.getPitch()+te)}}moveTouch(x,Q){const G=this.map,{bearingDelta:X}=this.touchRotate.dragMove(x,Q)||{};if(X&&G.setBearing(G.getBearing()+X),this.touchPitch){const{pitchDelta:te}=this.touchPitch.dragMove(x,Q)||{};te&&G.setPitch(G.getPitch()+te)}}off(){const x=this.element;oe.removeEventListener(x,"mousedown",this.mousedown),oe.removeEventListener(x,"touchstart",this.touchstart,{passive:!1}),oe.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),oe.removeEventListener(window,"touchend",this.touchend),oe.removeEventListener(x,"touchcancel",this.reset),this.offTemp()}offTemp(){oe.enableDrag(),oe.removeEventListener(window,"mousemove",this.mousemove),oe.removeEventListener(window,"mouseup",this.mouseup),oe.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),oe.removeEventListener(window,"touchend",this.touchend)}}let un;function Lo(J,x,Q){if(J=new D.LngLat(J.lng,J.lat),x){const G=new D.LngLat(J.lng-360,J.lat),X=new D.LngLat(J.lng+360,J.lat),te=Q.locationPoint(J).distSqr(x);Q.locationPoint(G).distSqr(x)<te?J=G:Q.locationPoint(X).distSqr(x)<te&&(J=X)}for(;Math.abs(J.lng-Q.center.lng)>180;){const G=Q.locationPoint(J);if(G.x>=0&&G.y>=0&&G.x<=Q.width&&G.y<=Q.height)break;J.lng>Q.center.lng?J.lng-=360:J.lng+=360}return J}const Qo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function el(J,x,Q){const G=J.classList;for(const X in Qo)G.remove(`maplibregl-${Q}-anchor-${X}`);G.add(`maplibregl-${Q}-anchor-${x}`)}class Oo extends D.Evented{constructor(x){if(super(),this._onKeyPress=Q=>{const G=Q.code,X=Q.charCode||Q.keyCode;G!=="Space"&&G!=="Enter"&&X!==32&&X!==13||this.togglePopup()},this._onMapClick=Q=>{const G=Q.originalEvent.target,X=this._element;this._popup&&(G===X||X.contains(G))&&this.togglePopup()},this._update=Q=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Lo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let G="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?G=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(G=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let X="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?X="rotateX(0deg)":this._pitchAlignment==="map"&&(X=`rotateX(${this._map.getPitch()}deg)`),Q&&Q.type!=="moveend"||(this._pos=this._pos.round()),oe.setTransform(this._element,`${Qo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${X} ${G}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const te=this._map.unproject(this._pos),Ae=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=te.distanceTo(this._lngLat)>20*Ae?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=Q=>{if(!this._isDragging){const G=this._clickTolerance||this._map._clickTolerance;this._isDragging=Q.point.dist(this._pointerdownPos)>=G}this._isDragging&&(this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new D.Event("dragstart"))),this.fire(new D.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new D.Event("dragend")),this._state="inactive"},this._addDragHandler=Q=>{this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._pointerdownPos=Q.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=D.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=oe.create("div"),this._element.setAttribute("aria-label","Map marker");const Q=oe.createNS("http://www.w3.org/2000/svg","svg"),G=41,X=27;Q.setAttributeNS(null,"display","block"),Q.setAttributeNS(null,"height",`${G}px`),Q.setAttributeNS(null,"width",`${X}px`),Q.setAttributeNS(null,"viewBox",`0 0 ${X} ${G}`);const te=oe.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");const Ae=oe.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill-rule","nonzero");const he=oe.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(3.0, 29.0)"),he.setAttributeNS(null,"fill","#000000");const ge=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pt of ge){const Et=oe.createNS("http://www.w3.org/2000/svg","ellipse");Et.setAttributeNS(null,"opacity","0.04"),Et.setAttributeNS(null,"cx","10.5"),Et.setAttributeNS(null,"cy","5.80029008"),Et.setAttributeNS(null,"rx",pt.rx),Et.setAttributeNS(null,"ry",pt.ry),he.appendChild(Et)}const ve=oe.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"fill",this._color);const Ce=oe.createNS("http://www.w3.org/2000/svg","path");Ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ve.appendChild(Ce);const Se=oe.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"fill","#000000");const Re=oe.createNS("http://www.w3.org/2000/svg","path");Re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Se.appendChild(Re);const it=oe.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"transform","translate(6.0, 7.0)"),it.setAttributeNS(null,"fill","#FFFFFF");const tt=oe.createNS("http://www.w3.org/2000/svg","g");tt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const at=oe.createNS("http://www.w3.org/2000/svg","circle");at.setAttributeNS(null,"fill","#000000"),at.setAttributeNS(null,"opacity","0.25"),at.setAttributeNS(null,"cx","5.5"),at.setAttributeNS(null,"cy","5.5"),at.setAttributeNS(null,"r","5.4999962");const Je=oe.createNS("http://www.w3.org/2000/svg","circle");Je.setAttributeNS(null,"fill","#FFFFFF"),Je.setAttributeNS(null,"cx","5.5"),Je.setAttributeNS(null,"cy","5.5"),Je.setAttributeNS(null,"r","5.4999962"),tt.appendChild(at),tt.appendChild(Je),Ae.appendChild(he),Ae.appendChild(ve),Ae.appendChild(Se),Ae.appendChild(it),Ae.appendChild(tt),Q.appendChild(Ae),Q.setAttributeNS(null,"height",G*this._scale+"px"),Q.setAttributeNS(null,"width",X*this._scale+"px"),this._element.appendChild(Q),this._offset=D.Point.convert(x&&x.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",Q=>{Q.preventDefault()}),this._element.addEventListener("mousedown",Q=>{Q.preventDefault()}),el(this._element,this._anchor,"marker"),x&&x.className)for(const Q of x.className.split(" "))this._element.classList.add(Q);this._popup=null}addTo(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),oe.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=D.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){const X=Math.abs(13.5)/Math.SQRT2;x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[X,-1*(38.1-13.5+X)],"bottom-right":[-X,-1*(38.1-13.5+X)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(x){return this._offset=D.Point.convert(x),this._update(),this}addClassName(x){this._element.classList.add(x)}removeClassName(x){this._element.classList.remove(x)}toggleClassName(x){return this._element.classList.toggle(x)}setDraggable(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(x){return this._rotation=x||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(x){return this._rotationAlignment=x||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ro={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let uo=0,Na=!1;const wl={maxWidth:100,unit:"metric"};function tl(J,x,Q){const G=Q&&Q.maxWidth||100,X=J._container.clientHeight/2,te=J.unproject([0,X]),Ae=J.unproject([G,X]),he=te.distanceTo(Ae);if(Q&&Q.unit==="imperial"){const ge=3.2808*he;ge>5280?Va(x,G,ge/5280,J._getUIString("ScaleControl.Miles")):Va(x,G,ge,J._getUIString("ScaleControl.Feet"))}else Q&&Q.unit==="nautical"?Va(x,G,he/1852,J._getUIString("ScaleControl.NauticalMiles")):he>=1e3?Va(x,G,he/1e3,J._getUIString("ScaleControl.Kilometers")):Va(x,G,he,J._getUIString("ScaleControl.Meters"))}function Va(J,x,Q,G){const X=function(te){const Ae=Math.pow(10,`${Math.floor(te)}`.length-1);let he=te/Ae;return he=he>=10?10:he>=5?5:he>=3?3:he>=2?2:he>=1?1:function(ge){const ve=Math.pow(10,Math.ceil(-Math.log(ge)/Math.LN10));return Math.round(ge*ve)/ve}(he),Ae*he}(Q);J.style.width=x*(X/Q)+"px",J.innerHTML=`${X}&nbsp;${G}`}const bl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function il(J){if(J){if(typeof J=="number"){const x=Math.round(Math.abs(J)/Math.SQRT2);return{center:new D.Point(0,0),top:new D.Point(0,J),"top-left":new D.Point(x,x),"top-right":new D.Point(-x,x),bottom:new D.Point(0,-J),"bottom-left":new D.Point(x,-x),"bottom-right":new D.Point(-x,-x),left:new D.Point(J,0),right:new D.Point(-J,0)}}if(J instanceof D.Point||Array.isArray(J)){const x=D.Point.convert(J);return{center:x,top:x,"top-left":x,"top-right":x,bottom:x,"bottom-left":x,"bottom-right":x,left:x,right:x}}return{center:D.Point.convert(J.center||[0,0]),top:D.Point.convert(J.top||[0,0]),"top-left":D.Point.convert(J["top-left"]||[0,0]),"top-right":D.Point.convert(J["top-right"]||[0,0]),bottom:D.Point.convert(J.bottom||[0,0]),"bottom-left":D.Point.convert(J["bottom-left"]||[0,0]),"bottom-right":D.Point.convert(J["bottom-right"]||[0,0]),left:D.Point.convert(J.left||[0,0]),right:D.Point.convert(J.right||[0,0])}}return il(new D.Point(0,0))}const rl={extend:(J,...x)=>D.extend(J,...x),run(J){J()},logToElement(J,x=!1,Q="log"){const G=window.document.getElementById(Q);G&&(x&&(G.innerHTML=""),G.innerHTML+=`<br>${J}`)}},Bl=ne;class xr{static get version(){return Bl}static get workerCount(){return di.workerCount}static set workerCount(x){di.workerCount=x}static get maxParallelImageRequests(){return D.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(x){D.config.MAX_PARALLEL_IMAGE_REQUESTS=x}static get workerUrl(){return D.config.WORKER_URL}static set workerUrl(x){D.config.WORKER_URL=x}static addProtocol(x,Q){D.config.REGISTERED_PROTOCOLS[x]=Q}static removeProtocol(x){delete D.config.REGISTERED_PROTOCOLS[x]}}return xr.Map=class extends _l{constructor(J){if(D.PerformanceUtils.mark(D.PerformanceMarkers.create),(J=D.extend({},Po,J)).minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(J.maxPitch!=null&&J.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Bs(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies),{bearingSnap:J.bearingSnap}),this._cooperativeGesturesOnWheel=x=>{this._onCooperativeGesture(x,x[this._metaKey],1)},this._contextLost=x=>{x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new D.Event("webglcontextlost",{originalEvent:x}))},this._contextRestored=x=>{this._setupPainter(),this.resize(),this._update(),this.fire(new D.Event("webglcontextrestored",{originalEvent:x}))},this._onMapScroll=x=>{if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=J.interactive,this._cooperativeGestures=J.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=J.maxTileCacheSize,this._maxTileCacheZoomLevels=J.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new Fi,this._controls=[],this._mapId=D.uniqueId(),this._locale=D.extend({},Ni,J.locale),this._clickTolerance=J.clickTolerance,this._overridePixelRatio=J.pixelRatio,this._maxCanvasSize=J.maxCanvasSize,this.transformCameraUpdate=J.transformCameraUpdate,this._imageQueueHandle=We.addThrottleControl(()=>this.isMoving()),this._requestManager=new ut(J.transformRequest),typeof J.container=="string"){if(this._container=document.getElementById(J.container),!this._container)throw new Error(`Container '${J.container}' not found.`)}else{if(!(J.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=J.container}if(J.maxBounds&&this.setMaxBounds(J.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let x=!1;const Q=yn(G=>{this._trackResize&&!this._removed&&this.resize(G)._update()},50);this._resizeObserver=new ResizeObserver(G=>{x?Q(G):x=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ho(this,J),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=J.hash&&new Uo(typeof J.hash=="string"&&J.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,D.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,this._validateStyle=J.validateStyle,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new zs({customAttribution:J.customAttribution})),J.maplibreLogo&&this.addControl(new Mo,J.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",x=>{this._update(x.dataType==="style"),this.fire(new D.Event(`${x.dataType}data`,x))}),this.on("dataloading",x=>{this.fire(new D.Event(`${x.dataType}dataloading`,x))}),this.on("dataabort",x=>{this.fire(new D.Event("sourcedataabort",x))})}_getMapId(){return this._mapId}addControl(J,x){if(x===void 0&&(x=J.getDefaultPosition?J.getDefaultPosition():"top-right"),!J||!J.onAdd)return this.fire(new D.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const Q=J.onAdd(this);this._controls.push(J);const G=this._controlPositions[x];return x.indexOf("bottom")!==-1?G.insertBefore(Q,G.firstChild):G.appendChild(Q),this}removeControl(J){if(!J||!J.onRemove)return this.fire(new D.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const x=this._controls.indexOf(J);return x>-1&&this._controls.splice(x,1),J.onRemove(this),this}hasControl(J){return this._controls.indexOf(J)>-1}calculateCameraOptionsFromTo(J,x,Q,G){return G==null&&this.terrain&&(G=this.terrain.getElevationForLngLatZoom(Q,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(J,x,Q,G)}resize(J){var x;const Q=this._containerDimensions(),G=Q[0],X=Q[1],te=this._getClampedPixelRatio(G,X);if(this._resizeCanvas(G,X,te),this.painter.resize(G,X,te),this.painter.overLimit()){const he=this.painter.context.gl;this._maxCanvasSize=[he.drawingBufferWidth,he.drawingBufferHeight];const ge=this._getClampedPixelRatio(G,X);this._resizeCanvas(G,X,ge),this.painter.resize(G,X,ge)}this.transform.resize(G,X),(x=this._requestedCameraState)===null||x===void 0||x.resize(G,X);const Ae=!this._moving;return Ae&&(this.stop(),this.fire(new D.Event("movestart",J)).fire(new D.Event("move",J))),this.fire(new D.Event("resize",J)),Ae&&this.fire(new D.Event("moveend",J)),this}_getClampedPixelRatio(J,x){const{0:Q,1:G}=this._maxCanvasSize,X=this.getPixelRatio(),te=J*X,Ae=x*X;return Math.min(te>Q?Q/te:1,Ae>G?G/Ae:1)*X}getPixelRatio(){var J;return(J=this._overridePixelRatio)!==null&&J!==void 0?J:devicePixelRatio}setPixelRatio(J){this._overridePixelRatio=J,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(J){return this.transform.setMaxBounds(R.convert(J)),this._update()}setMinZoom(J){if((J=J??-2)>=-2&&J<=this.transform.maxZoom)return this.transform.minZoom=J,this._update(),this.getZoom()<J&&this.setZoom(J),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(J){if((J=J??22)>=this.transform.minZoom)return this.transform.maxZoom=J,this._update(),this.getZoom()>J&&this.setZoom(J),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(J){if((J=J??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(J>=0&&J<=this.transform.maxPitch)return this.transform.minPitch=J,this._update(),this.getPitch()<J&&this.setPitch(J),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(J){if((J=J??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(J>=this.transform.minPitch)return this.transform.maxPitch=J,this._update(),this.getPitch()>J&&this.setPitch(J),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(J){return this.transform.renderWorldCopies=J,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(J){return this._cooperativeGestures=J,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(J){return this.transform.locationPoint(D.LngLat.convert(J),this.style&&this.terrain)}unproject(J){return this.transform.pointLocation(D.Point.convert(J),this.terrain)}isMoving(){var J;return this._moving||((J=this.handlers)===null||J===void 0?void 0:J.isMoving())}isZooming(){var J;return this._zooming||((J=this.handlers)===null||J===void 0?void 0:J.isZooming())}isRotating(){var J;return this._rotating||((J=this.handlers)===null||J===void 0?void 0:J.isRotating())}_createDelegatedListener(J,x,Q){if(J==="mouseenter"||J==="mouseover"){let G=!1;return{layer:x,listener:Q,delegates:{mousemove:te=>{const Ae=this.getLayer(x)?this.queryRenderedFeatures(te.point,{layers:[x]}):[];Ae.length?G||(G=!0,Q.call(this,new qr(J,this,te.originalEvent,{features:Ae}))):G=!1},mouseout:()=>{G=!1}}}}if(J==="mouseleave"||J==="mouseout"){let G=!1;return{layer:x,listener:Q,delegates:{mousemove:Ae=>{(this.getLayer(x)?this.queryRenderedFeatures(Ae.point,{layers:[x]}):[]).length?G=!0:G&&(G=!1,Q.call(this,new qr(J,this,Ae.originalEvent)))},mouseout:Ae=>{G&&(G=!1,Q.call(this,new qr(J,this,Ae.originalEvent)))}}}}{const G=X=>{const te=this.getLayer(x)?this.queryRenderedFeatures(X.point,{layers:[x]}):[];te.length&&(X.features=te,Q.call(this,X),delete X.features)};return{layer:x,listener:Q,delegates:{[J]:G}}}}on(J,x,Q){if(Q===void 0)return super.on(J,x);const G=this._createDelegatedListener(J,x,Q);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[J]=this._delegatedListeners[J]||[],this._delegatedListeners[J].push(G);for(const X in G.delegates)this.on(X,G.delegates[X]);return this}once(J,x,Q){if(Q===void 0)return super.once(J,x);const G=this._createDelegatedListener(J,x,Q);for(const X in G.delegates)this.once(X,G.delegates[X]);return this}off(J,x,Q){return Q===void 0?super.off(J,x):(this._delegatedListeners&&this._delegatedListeners[J]&&(G=>{const X=this._delegatedListeners[J];for(let te=0;te<X.length;te++){const Ae=X[te];if(Ae.layer===x&&Ae.listener===Q){for(const he in Ae.delegates)this.off(he,Ae.delegates[he]);return X.splice(te,1),this}}})(),this)}queryRenderedFeatures(J,x){if(!this.style)return[];let Q;const G=J instanceof D.Point||Array.isArray(J),X=G?J:[[0,0],[this.transform.width,this.transform.height]];if(x=x||(G?{}:J)||{},X instanceof D.Point||typeof X[0]=="number")Q=[D.Point.convert(X)];else{const te=D.Point.convert(X[0]),Ae=D.Point.convert(X[1]);Q=[te,new D.Point(Ae.x,te.y),Ae,new D.Point(te.x,Ae.y),te]}return this.style.queryRenderedFeatures(Q,x,this.transform)}querySourceFeatures(J,x){return this.style.querySourceFeatures(J,x)}setStyle(J,x){return(x=D.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},x)).diff!==!1&&x.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&J?(this._diffStyle(J,x),this):(this._localIdeographFontFamily=x.localIdeographFontFamily,this._updateStyle(J,x))}setTransformRequest(J){return this._requestManager.setTransformRequest(J),this}_getUIString(J){const x=this._locale[J];if(x==null)throw new Error(`Missing UI string '${J}'`);return x}_updateStyle(J,x){if(x.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(J,x));const Q=this.style&&x.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!J)),J?(this.style=new sr(this,x||{}),this.style.setEventedParent(this,{style:this.style}),typeof J=="string"?this.style.loadURL(J,x,Q):this.style.loadJSON(J,x,Q),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new sr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(J,x){if(typeof J=="string"){const Q=this._requestManager.transformRequest(J,Ne.Style);D.getJSON(Q,(G,X)=>{G?this.fire(new D.ErrorEvent(G)):X&&this._updateDiff(X,x)})}else typeof J=="object"&&this._updateDiff(J,x)}_updateDiff(J,x){try{this.style.setState(J,x)&&this._update(!0)}catch(Q){D.warnOnce(`Unable to perform style diff: ${Q.message||Q.error||Q}.  Rebuilding the style from scratch.`),this._updateStyle(J,x)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():D.warnOnce("There is no style added to the map.")}addSource(J,x){return this._lazyInitEmptyStyle(),this.style.addSource(J,x),this._update(!0)}isSourceLoaded(J){const x=this.style&&this.style.sourceCaches[J];if(x!==void 0)return x.loaded();this.fire(new D.ErrorEvent(new Error(`There is no source with ID '${J}'`)))}setTerrain(J){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),J){const x=this.style.sourceCaches[J.source];if(!x)throw new Error(`cannot load terrain, because there exists no source with ID: ${J.source}`);for(const Q in this.style._layers){const G=this.style._layers[Q];G.type==="hillshade"&&G.source===J.source&&D.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vl(this.painter,x,J),this.painter.renderToTexture=new Dn(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=Q=>{Q.dataType==="style"?this.terrain.sourceCache.freeRtt():Q.dataType==="source"&&Q.tile&&(Q.sourceId!==J.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(Q.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new D.Event("terrain",{terrain:J})),this}getTerrain(){var J,x;return(x=(J=this.terrain)===null||J===void 0?void 0:J.options)!==null&&x!==void 0?x:null}areTilesLoaded(){const J=this.style&&this.style.sourceCaches;for(const x in J){const Q=J[x]._tiles;for(const G in Q){const X=Q[G];if(X.state!=="loaded"&&X.state!=="errored")return!1}}return!0}addSourceType(J,x,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(J,x,Q)}removeSource(J){return this.style.removeSource(J),this._update(!0)}getSource(J){return this.style.getSource(J)}addImage(J,x,Q={}){const{pixelRatio:G=1,sdf:X=!1,stretchX:te,stretchY:Ae,content:he}=Q;if(this._lazyInitEmptyStyle(),!(x instanceof HTMLImageElement||D.isImageBitmap(x))){if(x.width===void 0||x.height===void 0)return this.fire(new D.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ge,height:ve,data:Ce}=x,Se=x;return this.style.addImage(J,{data:new D.RGBAImage({width:ge,height:ve},new Uint8Array(Ce)),pixelRatio:G,stretchX:te,stretchY:Ae,content:he,sdf:X,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,J),this}}{const{width:ge,height:ve,data:Ce}=D.browser.getImageData(x);this.style.addImage(J,{data:new D.RGBAImage({width:ge,height:ve},Ce),pixelRatio:G,stretchX:te,stretchY:Ae,content:he,sdf:X,version:0})}}updateImage(J,x){const Q=this.style.getImage(J);if(!Q)return this.fire(new D.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const G=x instanceof HTMLImageElement||D.isImageBitmap(x)?D.browser.getImageData(x):x,{width:X,height:te,data:Ae}=G;if(X===void 0||te===void 0)return this.fire(new D.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(X!==Q.data.width||te!==Q.data.height)return this.fire(new D.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const he=!(x instanceof HTMLImageElement||D.isImageBitmap(x));return Q.data.replace(Ae,he),this.style.updateImage(J,Q),this}getImage(J){return this.style.getImage(J)}hasImage(J){return J?!!this.style.getImage(J):(this.fire(new D.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(J){this.style.removeImage(J)}loadImage(J,x){We.getImage(this._requestManager.transformRequest(J,Ne.Image),x)}listImages(){return this.style.listImages()}addLayer(J,x){return this._lazyInitEmptyStyle(),this.style.addLayer(J,x),this._update(!0)}moveLayer(J,x){return this.style.moveLayer(J,x),this._update(!0)}removeLayer(J){return this.style.removeLayer(J),this._update(!0)}getLayer(J){return this.style.getLayer(J)}setLayerZoomRange(J,x,Q){return this.style.setLayerZoomRange(J,x,Q),this._update(!0)}setFilter(J,x,Q={}){return this.style.setFilter(J,x,Q),this._update(!0)}getFilter(J){return this.style.getFilter(J)}setPaintProperty(J,x,Q,G={}){return this.style.setPaintProperty(J,x,Q,G),this._update(!0)}getPaintProperty(J,x){return this.style.getPaintProperty(J,x)}setLayoutProperty(J,x,Q,G={}){return this.style.setLayoutProperty(J,x,Q,G),this._update(!0)}getLayoutProperty(J,x){return this.style.getLayoutProperty(J,x)}setGlyphs(J,x={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(J,x),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(J,x,Q={}){return this._lazyInitEmptyStyle(),this.style.addSprite(J,x,Q,G=>{G||this._update(!0)}),this}removeSprite(J){return this._lazyInitEmptyStyle(),this.style.removeSprite(J),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(J,x={}){return this._lazyInitEmptyStyle(),this.style.setSprite(J,x,Q=>{Q||this._update(!0)}),this}setLight(J,x={}){return this._lazyInitEmptyStyle(),this.style.setLight(J,x),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(J,x){return this.style.setFeatureState(J,x),this._update()}removeFeatureState(J,x){return this.style.removeFeatureState(J,x),this._update()}getFeatureState(J){return this.style.getFeatureState(J)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let J=0,x=0;return this._container&&(J=this._container.clientWidth||400,x=this._container.clientHeight||300),[J,x]}_setupContainer(){const J=this._container;J.classList.add("maplibregl-map");const x=this._canvasContainer=oe.create("div","maplibregl-canvas-container",J);this._interactive&&x.classList.add("maplibregl-interactive"),this._canvas=oe.create("canvas","maplibregl-canvas",x),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const Q=this._containerDimensions(),G=this._getClampedPixelRatio(Q[0],Q[1]);this._resizeCanvas(Q[0],Q[1],G);const X=this._controlContainer=oe.create("div","maplibregl-control-container",J),te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Ae=>{te[Ae]=oe.create("div",`maplibregl-ctrl-${Ae} `,X)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=oe.create("div","maplibregl-cooperative-gesture-screen",this._container);let J=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(J=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use â + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${J}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){oe.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(J,x,Q){this._canvas.width=Math.floor(Q*J),this._canvas.height=Math.floor(Q*x),this._canvas.style.width=`${J}px`,this._canvas.style.height=`${x}px`}_setupPainter(){const J={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let x=null;this._canvas.addEventListener("webglcontextcreationerror",G=>{x={requestedAttributes:J},G&&(x.statusMessage=G.statusMessage,x.type=G.type)},{once:!0});const Q=this._canvas.getContext("webgl2",J)||this._canvas.getContext("webgl",J);if(!Q){const G="Failed to initialize WebGL";throw x?(x.message=G,new Error(JSON.stringify(x))):new Error(G)}this.painter=new jo(Q,this.transform),ue.testSupport(Q)}_onCooperativeGesture(J,x,Q){return!x&&Q<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(J){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||J,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(J){return this._update(),this._renderTaskQueue.add(J)}_cancelRenderFrame(J){this._renderTaskQueue.remove(J)}_render(J){const x=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(J),this._removed)return;let Q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,te=D.browser.now();this.style.zoomHistory.update(X,te);const Ae=new D.EvaluationParameters(X,{now:te,fadeDuration:x,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),he=Ae.crossFadingFactor();he===1&&he===this._crossFadingFactor||(Q=!0,this._crossFadingFactor=he),this.style.update(Ae)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,showPadding:this.showPadding}),this.fire(new D.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,D.PerformanceUtils.mark(D.PerformanceMarkers.load),this.fire(new D.Event("load"))),this.style&&(this.style.hasTransitions()||Q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const G=this._sourcesDirty||this._styleDirty||this._placementDirty;return G||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new D.Event("idle")),!this._loaded||this._fullyLoaded||G||(this._fullyLoaded=!0,D.PerformanceUtils.mark(D.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var J;this._hash&&this._hash.remove();for(const Q of this._controls)Q.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),We.removeThrottleControl(this._imageQueueHandle),(J=this._resizeObserver)===null||J===void 0||J.disconnect();const x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),oe.remove(this._canvasContainer),oe.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),D.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new D.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=D.browser.frame(J=>{D.PerformanceUtils.frame(J),this._frame=null,this._render(J)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())}get showPadding(){return!!this._showPadding}set showPadding(J){this._showPadding!==J&&(this._showPadding=J,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())}get repaint(){return!!this._repaint}set repaint(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(J){this._vertices=J,this._update()}get version(){return uA}getCameraTargetElevation(){return this.transform.elevation}},xr.NavigationControl=class{constructor(J){this._updateZoomButtons=()=>{const x=this._map.getZoom(),Q=x===this._map.getMaxZoom(),G=x===this._map.getMinZoom();this._zoomInButton.disabled=Q,this._zoomOutButton.disabled=G,this._zoomInButton.setAttribute("aria-disabled",Q.toString()),this._zoomOutButton.setAttribute("aria-disabled",G.toString())},this._rotateCompassArrow=()=>{const x=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=x},this._setButtonTitle=(x,Q)=>{const G=this._map._getUIString(`NavigationControl.${Q}`);x.title=G,x.setAttribute("aria-label",G)},this.options=D.extend({},ts,J),this._container=oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",x=>x.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",x=>this._map.zoomIn({},{originalEvent:x})),oe.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",x=>this._map.zoomOut({},{originalEvent:x})),oe.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",x=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:x}):this._map.resetNorth({},{originalEvent:x})}),this._compassIcon=oe.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(J){return this._map=J,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Kl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){oe.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(J,x){const Q=oe.create("button",J,this._container);return Q.type="button",Q.addEventListener("click",x),Q}},xr.GeolocateControl=class extends D.Evented{constructor(J){super(),this._onSuccess=x=>{if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new D.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new D.Event("geolocate",x)),this._finish()}},this._updateCamera=x=>{const Q=new D.LngLat(x.coords.longitude,x.coords.latitude),G=x.coords.accuracy,X=this._map.getBearing(),te=D.extend({bearing:X},this.options.fitBoundsOptions),Ae=R.fromLngLat(Q,G);this._map.fitBounds(Ae,te,{geolocateSource:!0})},this._updateMarker=x=>{if(x){const Q=new D.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(Q).addTo(this._map),this._userLocationDotMarker.setLngLat(Q).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=x=>{if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const Q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&Na)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new D.Event("error",x)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=x=>{if(this._map){if(this._container.addEventListener("contextmenu",Q=>Q.preventDefault()),this._geolocateButton=oe.create("button","maplibregl-ctrl-geolocate",this._container),oe.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",x===!1){D.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const Q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}else{const Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=oe.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Oo({element:this._dotElement}),this._circleElement=oe.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",Q=>{Q.geolocateSource||this._watchState!=="ACTIVE_LOCK"||Q.originalEvent&&Q.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new D.Event("trackuserlocationend")))})}},this.options=D.extend({},Ro,J)}onAdd(J){return this._map=J,this._container=oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(x,Q=!1){un===void 0||Q?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(G=>{un=G.state!=="denied",x(un)}).catch(()=>{un=!!window.navigator.geolocation,x(un)}):(un=!!window.navigator.geolocation,x(un)):x(un)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),oe.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uo=0,Na=!1}_isOutOfMapMaxBounds(J){const x=this._map.getMaxBounds(),Q=J.coords;return x&&(Q.longitude<x.getWest()||Q.longitude>x.getEast()||Q.latitude<x.getSouth()||Q.latitude>x.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const J=this._map.getBounds(),x=J.getSouthEast(),Q=J.getNorthEast(),G=x.distanceTo(Q),X=Math.ceil(this._accuracy/(G/this._map._container.clientHeight)*2);this._circleElement.style.width=`${X}px`,this._circleElement.style.height=`${X}px`}trigger(){if(!this._setup)return D.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new D.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uo--,Na=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new D.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new D.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let J;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),uo++,uo>1?(J={maximumAge:6e5,timeout:0},Na=!0):(J=this.options.positionOptions,Na=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},xr.AttributionControl=zs,xr.LogoControl=Mo,xr.ScaleControl=class{constructor(J){this._onMove=()=>{tl(this._map,this._container,this.options)},this.setUnit=x=>{this.options.unit=x,tl(this._map,this._container,this.options)},this.options=D.extend({},wl,J)}getDefaultPosition(){return"bottom-left"}onAdd(J){return this._map=J,this._container=oe.create("div","maplibregl-ctrl maplibregl-ctrl-scale",J.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){oe.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},xr.FullscreenControl=class extends D.Evented{constructor(J={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,J&&J.container&&(J.container instanceof HTMLElement?this._container=J.container:D.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(J){return this._map=J,this._container||(this._container=this._map.getContainer()),this._controlContainer=oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){oe.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const J=this._fullscreenButton=oe.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);oe.create("span","maplibregl-ctrl-icon",J).setAttribute("aria-hidden","true"),J.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const J=this._getTitle();this._fullscreenButton.setAttribute("aria-label",J),this._fullscreenButton.title=J}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new D.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new D.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},xr.TerrainControl=class{constructor(J){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=J}onAdd(J){return this._map=J,this._container=oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=oe.create("button","maplibregl-ctrl-terrain",this._container),oe.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){oe.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},xr.Popup=class extends D.Evented{constructor(J){super(),this.remove=()=>(this._content&&oe.remove(this._content),this._container&&(oe.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new D.Event("close")),this),this._onMouseUp=x=>{this._update(x.point)},this._onMouseMove=x=>{this._update(x.point)},this._onDrag=x=>{this._update(x.point)},this._update=x=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=oe.create("div","maplibregl-popup",this._map.getContainer()),this._tip=oe.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const Ae of this.options.className.split(" "))this._container.classList.add(Ae);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lo(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!x)return;const Q=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat);let G=this.options.anchor;const X=il(this.options.offset);if(!G){const Ae=this._container.offsetWidth,he=this._container.offsetHeight;let ge;ge=Q.y+X.bottom.y<he?["top"]:Q.y>this._map.transform.height-he?["bottom"]:[],Q.x<Ae/2?ge.push("left"):Q.x>this._map.transform.width-Ae/2&&ge.push("right"),G=ge.length===0?"bottom":ge.join("-")}const te=Q.add(X[G]).round();oe.setTransform(this._container,`${Qo[G]} translate(${te.x}px,${te.y}px)`),el(this._container,G,"popup")},this._onClose=()=>{this.remove()},this.options=D.extend(Object.create(bl),J)}addTo(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new D.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(J){return this._lngLat=D.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(J){return this.setDOMContent(document.createTextNode(J))}setHTML(J){const x=document.createDocumentFragment(),Q=document.createElement("body");let G;for(Q.innerHTML=J;G=Q.firstChild,G;)x.appendChild(G);return this.setDOMContent(x)}getMaxWidth(){var J;return(J=this._container)===null||J===void 0?void 0:J.style.maxWidth}setMaxWidth(J){return this.options.maxWidth=J,this._update(),this}setDOMContent(J){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=oe.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(J),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(J){this._container&&this._container.classList.add(J)}removeClassName(J){this._container&&this._container.classList.remove(J)}setOffset(J){return this.options.offset=J,this._update(),this}toggleClassName(J){if(this._container)return this._container.classList.toggle(J)}_createCloseButton(){this.options.closeButton&&(this._closeButton=oe.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const J=this._container.querySelector(xl);J&&J.focus()}},xr.Marker=Oo,xr.Style=sr,xr.LngLat=D.LngLat,xr.LngLatBounds=R,xr.Point=D.Point,xr.MercatorCoordinate=D.MercatorCoordinate,xr.Evented=D.Evented,xr.AJAXError=D.AJAXError,xr.config=D.config,xr.CanvasSource=me,xr.GeoJSONSource=be,xr.ImageSource=Ke,xr.RasterDEMTileSource=fe,xr.RasterTileSource=le,xr.VectorTileSource=se,xr.VideoSource=Me,xr.setRTLTextPlugin=D.setRTLTextPlugin,xr.getRTLTextPluginStatus=D.getRTLTextPluginStatus,xr.prewarm=function(){Vi().acquire(Bt)},xr.clearPrewarmedResources=function(){const J=Hi;J&&(J.isPreloaded()&&J.numActive()===1?(J.release(Bt),Hi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},rl.extend(xr,{isSafari:D.isSafari,getPerformanceMetrics:D.PerformanceUtils.getPerformanceMetrics}),xr});var ie=K;return ie})}(maplibreGl$1)),maplibreGl$1.exports}var maplibreGlExports=requireMaplibreGl();const mapLibre=getDefaultExportFromCjs(maplibreGlExports),MaplibreLayer=L.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(g){L.setOptions(this,g),this._throttledUpdate=L.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(g){this._container||this._initContainer();const B=this.getPaneName();g.getPane(B).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),g.options.zoomAnimation&&L.DomEvent.on(g._proxy,L.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(g){this._map._proxy&&this._map.options.zoomAnimation&&L.DomEvent.off(this._map._proxy,L.DomUtil.TRANSITION_END,this._transitionEnd,this);const B=this.getPaneName();g.getPane(B).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){const g=this.getSize().multiplyBy(.5),B=this._map.latLngToContainerPoint(this._map.getCenter());return latLngBounds(this._map.containerPointToLatLng(B.subtract(g)),this._map.containerPointToLatLng(B.add(g)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(g){return{x:Math.round(g.x),y:Math.round(g.y)}},_initContainer:function(){const g=this._container=L.DomUtil.create("div","leaflet-gl-layer"),B=this.getSize(),M=this._map.getSize().multiplyBy(this.options.padding);g.style.width=`${B.x}px`,g.style.height=`${B.y}px`;const P=this._map.containerPointToLayerPoint([0,0]).subtract(M);L.DomUtil.setPosition(g,this._roundPoint(P))},_initGL:function(){const g=this._map.getCenter(),B=L.extend({},this.options,{container:this._container,center:[g.lng,g.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new mapLibre.Map(B),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;const M=this._glMap._actualCanvas;L.DomUtil.addClass(M,"leaflet-image-layer"),L.DomUtil.addClass(M,"leaflet-zoom-animated"),this.options.interactive&&L.DomUtil.addClass(M,"leaflet-interactive"),this.options.className&&L.DomUtil.addClass(M,this.options.className)},_update:function(g){if(this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming)return;const B=this.getSize(),M=this._container,P=this._glMap,K=this._map.getSize().multiplyBy(this.options.padding),Y=this._map.containerPointToLayerPoint([0,0]).subtract(K);L.DomUtil.setPosition(M,this._roundPoint(Y)),this._transformGL(P),P.transform.width!==B.x||P.transform.height!==B.y?(M.style.width=`${B.x}px`,M.style.height=`${B.y}px`,P._resize!==null&&P._resize!==void 0?P._resize():P.resize()):P._update!==null&&P._update!==void 0?P._update():P.update()},_transformGL:function(g){const B=this._map.getCenter(),M=g.transform;M.center=mapLibre.LngLat.convert([B.lng,B.lat]),M.zoom=this._map.getZoom()-1},_pinchZoom:function(g){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(g){const B=this._map.getZoomScale(g.zoom),M=this._map.getSize().multiplyBy(this.options.padding*B),P=this.getSize()._divideBy(2),K=this._map.project(g.center,g.zoom)._subtract(P)._add(this._map._getMapPanePos().add(M))._round(),Y=this._map.project(this._map.getBounds().getNorthWest(),g.zoom)._subtract(K);L.DomUtil.setTransform(this._glMap._actualCanvas,Y.subtract(this._offset),B)},_zoomStart:function(g){this._zooming=!0},_zoomEnd:function(){const g=this._map.getZoomScale(this._map.getZoom());L.DomUtil.setTransform(this._glMap._actualCanvas,new L.Point(0,0),g),this._zooming=!1,this._update()},_transitionEnd:function(g){L.Util.requestAnimFrame(function(){const B=this._map.getZoom(),M=this._map.getCenter(),P=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());L.DomUtil.setTransform(this._glMap._actualCanvas,P,1),this._glMap.once("moveend",L.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:M,zoom:B-1})},this)},_resize:function(g){this._transitionEnd(g)}});function maplibreLayer(g){return new MaplibreLayer(g)}let copyData;$(document).on("copy",g=>{copyData&&g.originalEvent&&g.originalEvent.clipboardData?(Object.keys(copyData).forEach(B=>{g.originalEvent.clipboardData.setData(B,copyData[B])}),g.originalEvent.preventDefault(),copyData=void 0):copyData&&copyData["text/plain"]&&(prompt(i18n.t("export.copy_to_clipboard"),copyData["text/plain"]),copyData=null)});function make_combobox(g,B,M,P){if(g[0].is_combobox){g.autocomplete("option",{source:B});return}const K=g.wrap("<span>").parent().addClass("ui-combobox");g.autocomplete({source:B,minLength:0}).addClass("ui-widget ui-widget-content ui-corner-left ui-state-default").autocomplete("instance")._renderItem=(Y,ie)=>$("<li>").append(M&&M.indexOf(ie.value)!==-1?`<div title="shift-click to remove from list" style="font-style:italic;">${ie.label}</div>`:`<div>${ie.label}</div>`).on("click",function(D){if(D.shiftKey&&M.indexOf(ie.value)!==-1){P(ie.value),$(this).remove();const ne=g.autocomplete("option","source");return ne.splice(ne.indexOf(ie),1),g.autocomplete("option","source",ne),!1}}).appendTo(Y),$("<a>").attr("tabIndex",-1).attr("title","show all items").appendTo(K).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle").click(()=>{if(g.autocomplete("widget").is(":visible")){g.autocomplete("close");return}g.autocomplete("search",""),g.focus()}),g[0].is_combobox=!0}function showDialog(g,B,M){const P=`      <div class="modal is-active">        <div class="modal-background"></div>        <div class="modal-card">          <header class="modal-card-head">            <p class="modal-card-title">${g}</p>            <button class="delete" aria-label="close"></button>          </header>          <section class="modal-card-body">            ${B}          </section>          <footer class="modal-card-foot">            <div class="level">              <div class="level-right">                <div class="level-item">                </div>              </div>            </div>          </footer>        </div>      </div>    `,K=$(P);$(".delete",K).click(()=>$(K).remove());for(const Y in M){const ie=M[Y];$(`<button class="button">${ie.name}</button>`).click(()=>{var D;(D=ie.callback)==null||D.call(ie),$(K).remove()}).appendTo($("footer .level-item",K))}K.appendTo("body")}class IDE{constructor(){this.attribControl=null,this.scaleControl=null,this.queryParser=new parser,this.run_query_on_startup=!1,this.codeEditor=null,this.dataViewer=null,this.map=null,this.waiter=new class{constructor(){this.opened=!0,this.frames=["â´","â·","â¶","âµ"],this.frameDelay=250,this.onAbort=void 0,this.interval=0,this._initialTitle=document.title}open(M){M?($(".modal .wait-info h4").text(M),$(".wait-info").show()):$(".wait-info").hide(),$("#loading-dialog").addClass("is-active"),document.title=`${this.frames[0]} ${this._initialTitle}`;let P=0;this.interval=setInterval(()=>{const K=this.isAlert?this.alertFrame:this.frames[++P%this.frames.length];document.title=`${K} ${this._initialTitle}`},this.frameDelay),this.opened=!0}close(M=""){this.opened&&(clearInterval(this.interval),document.title=`${M}${this._initialTitle}`,$("#loading-dialog").removeClass("is-active"),$(".wait-info ul li").remove(),delete this.onAbort,this.opened=!1)}addInfo(M,P){$("#aborter").remove(),$(".wait-info ul li:nth-child(n+1)").css("opacity",.5),$(".wait-info ul li span.fas").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-check"),$(".wait-info ul li:nth-child(n+4)").hide();const K=$(`<li><span class="fas fa-spinner fa-spin" style="display:inline-block; margin-bottom:-2px; margin-right:3px;"></span>${M}</li>`);if(typeof P=="function"){this.onAbort=P;const Y=$('<span id="aborter">&nbsp;(<a href="#">abort</a>)</span>').on("click",()=>(this.abort(),!1));K.append(Y)}$(".wait-info ul").prepend(K)}abort(){typeof this.onAbort=="function"&&(this.addInfo("aborting"),this.onAbort(this.close))}}}init(){this.waiter.addInfo("ide starting up"),$("#overpass-turbo-version").html("overpass-turbo <code>2025-04-23/1e78c2d</code>"),$("#overpass-turbo-dependencies").html('<a href="https://www.npmjs.com/package/@fortawesome/fontawesome-free/v/5.15.4">@fortawesome/fontawesome-free</a> 5.15.4 ((CC-BY-4.0 AND OFL-1.1 AND MIT)), <a href="https://www.npmjs.com/package/@maplibre/maplibre-gl-leaflet/v/0.0.20">@maplibre/maplibre-gl-leaflet</a> 0.0.20 (ISC), <a href="https://www.npmjs.com/package/@openstreetmap/id-tagging-schema/v/3.5.1">@openstreetmap/id-tagging-schema</a> 3.5.1 (ISC), <a href="https://www.npmjs.com/package/bulma/v/0.9.4">bulma</a> 0.9.4 (MIT), <a href="https://www.npmjs.com/package/canvg/v/4.0.3">canvg</a> 4.0.3 (MIT), <a href="https://www.npmjs.com/package/codemirror/v/2.38.00">codemirror</a> 2.38.00 (undefined), <a href="https://www.npmjs.com/package/colorbrewer/v/1.5.7">colorbrewer</a> 1.5.7 ([object Object]), <a href="https://www.npmjs.com/package/colormap/v/2.3.2">colormap</a> 2.3.2 (MIT), <a href="https://www.npmjs.com/package/html2canvas/v/1.4.1">html2canvas</a> 1.4.1 (MIT), <a href="https://www.npmjs.com/package/jquery/v/3.7.1">jquery</a> 3.7.1 (MIT), <a href="https://www.npmjs.com/package/jquery-ui/v/1.13.2">jquery-ui</a> 1.13.2 (MIT), <a href="https://www.npmjs.com/package/jquery-ui-dist/v/1.13.2">jquery-ui-dist</a> 1.13.2 (MIT), <a href="https://www.npmjs.com/package/leaflet/v/1.9.4">leaflet</a> 1.9.4 (BSD-2-Clause), <a href="https://www.npmjs.com/package/leaflet-polylineoffset/v/1.1.1">leaflet-polylineoffset</a> 1.1.1 (MIT), <a href="https://www.npmjs.com/package/leaflet-locationfilter/v/0.1.3">leaflet-locationfilter</a> 0.1.3 (MIT), <a href="https://www.npmjs.com/package/lodash/v/4.17.21">lodash</a> 4.17.21 (MIT), <a href="https://www.npmjs.com/package/maplibre-gl/v/3.3.1">maplibre-gl</a> 3.3.1 (BSD-3-Clause), <a href="https://www.npmjs.com/package/osm-auth/v/2.2.0">osm-auth</a> 2.2.0 (ISC), <a href="https://www.npmjs.com/package/osmtogeojson/v/3.0.0-beta.5">osmtogeojson</a> 3.0.0-beta.5 (MIT), <a href="https://www.npmjs.com/package/rgbcolor/v/1.0.1">rgbcolor</a> 1.0.1 (MIT OR SEE LICENSE IN FEEL-FREE.md), <a href="https://www.npmjs.com/package/stackblur/v/1.0.0">stackblur</a> 1.0.0 (BSD-2-Clause), <a href="https://www.npmjs.com/package/tag2link/v/2024.05.21">tag2link</a> 2024.05.21 (ISC), <a href="https://www.npmjs.com/package/togpx/v/0.5.4">togpx</a> 0.5.4 (MIT), <a href="https://www.npmjs.com/package/tokml/v/0.4.0">tokml</a> 0.4.0 (BSD-2-Clause)'),($.support.cors!=!0||typeof function(){let B;try{localStorage.setItem("startup_localstorage_quota_test",123),localStorage.removeItem("startup_localstorage_quota_test"),B=localStorage}catch{}return B}()!="object")&&(this.not_supported=!0,$("#warning-unsupported-browser").addClass("is-active")),this.waiter.addInfo("load settings"),settings.load(),this.waiter.addInfo("translate ui"),i18n.translate().then(()=>this.initAfterI18n()),sync.enabled&&($("#load-dialog .osm").show(),sync.authenticated()&&($("#logout").show(),$("#logout").appendTo($("#logout").parent())))}initAfterI18n(){const B=this;B.waiter.addInfo("parse url parameters");const M=urlParameters();M.has_coords&&(settings.coords_lat=M.coords.lat,settings.coords_lon=M.coords.lng),M.has_zoom&&(settings.coords_zoom=M.zoom),M.run_query&&(B.run_query_on_startup=!0),settings.save(),B.waiter.addInfo("initialize page");const P=$(window).width()/$(window).height()<.8;if(settings.editor_width!=""&&!P&&($("#editor").css("width",settings.editor_width),$("#dataviewer").css("left",settings.editor_width)),P&&$("#editor, #dataviewer").addClass("portrait"),$("#editor").resizable({handles:P?"s":"e",minWidth:P?void 0:"200",resize(){if(!P)$(this).next().css("left",`${$(this).outerWidth()}px`);else{const ue=$(this).offset().top+$(this).outerHeight();$(this).next().css("top",`${ue}px`)}B.map.invalidateSize(!1)},stop(){P||(settings.editor_width=$("#editor").css("width"),settings.save())}}),$("#editor").prepend("<span class='ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'/>"),$("#editor textarea")[0].value=settings.code.overpass,settings.use_rich_editor){let ue=0;CodeMirror.defineMIME("text/x-overpassQL",{name:"clike",keywords:function(pe){const we={},ke=pe.split(" ");for(const Qe of ke)we[Qe]=!0;return we}("out json xml custom popup timeout maxsize bbox date diff adiff foreach relation rel way node is_in area around user uid newer changed poly pivot nwr nw nr wr derived out meta body skel tags ids count qt asc center bb geom")}),CodeMirror.defineMIME("text/x-overpassXML","xml"),CodeMirror.defineMode("xml+mustache",pe=>CodeMirror.multiplexingMode(CodeMirror.multiplexingMode(CodeMirror.getMode(pe,"xml"),{open:"{{",close:"}}",mode:CodeMirror.getMode(pe,"text/plain"),delimStyle:"mustache"}),{open:"{{style:",close:"}}",mode:CodeMirror.getMode(pe,"text/css"),delimStyle:"mustache"})),CodeMirror.defineMode("ql+mustache",pe=>CodeMirror.multiplexingMode(CodeMirror.multiplexingMode(CodeMirror.getMode(pe,"text/x-overpassQL"),{open:"{{",close:"}}",mode:CodeMirror.getMode(pe,"text/plain"),delimStyle:"mustache"}),{open:"{{style:",close:"}}",mode:CodeMirror.getMode(pe,"text/css"),delimStyle:"mustache"})),B.codeEditor=CodeMirror.fromTextArea($("#editor textarea")[0],{lineNumbers:!0,lineWrapping:!0,mode:"text/plain",onChange(pe){clearTimeout(ue),ue=setTimeout(()=>{B.getQueryLang()=="xml"?pe.getOption("mode")!="xml+mustache"&&(pe.closeTagEnabled=!0,pe.setOption("matchBrackets",!1),pe.setOption("mode","xml+mustache")):pe.getOption("mode")!="ql+mustache"&&(pe.closeTagEnabled=!1,pe.setOption("matchBrackets",!0),pe.setOption("mode","ql+mustache"));const we=$(".leaflet-control-buttons-bboxfilter");B.getRawQuery().match(/\{\{bbox\}\}/)?we.hasClass("disabled")&&(we.removeClass("disabled"),we.attr("data-t","[title]map_controlls.select_bbox"),i18n.translate_ui(we[0])):we.hasClass("disabled")||(we.addClass("disabled"),we.attr("data-t","[title]map_controlls.select_bbox_disabled"),i18n.translate_ui(we[0]))},500),settings.code.overpass=pe.getValue(),settings.save()},closeTagEnabled:!0,closeTagIndent:["osm-script","query","union","foreach","difference"],extraKeys:{"'>'"(pe){pe.closeTag(pe,">")},"'/'"(pe){pe.closeTag(pe,"/")}}}),B.codeEditor.getOption("onChange")(B.codeEditor)}else B.codeEditor=$("#editor textarea")[0],B.codeEditor.getValue=function(){return this.value},B.codeEditor.setValue=function(ue){this.value=ue},B.codeEditor.lineCount=function(){return this.value.split(/\r\n|\r|\n/).length},B.codeEditor.setLineClass=function(){},$("#editor textarea").bind("input change",ue=>{settings.code.overpass=ue.target.getValue(),settings.save()});M.has_query&&B.codeEditor.setValue(M.query),B.dataViewer=CodeMirror($("#data")[0],{value:"no data loaded yet",lineNumbers:!0,readOnly:!0,mode:"javascript"}),B.map=new L.Map("map",{attributionControl:!1,minZoom:0,maxZoom:configs.maxMapZoom,worldCopyJump:!1});const K=settings.tile_server,Y=configs.vectorTileAttribution;new L.TileLayer(K,{attribution:Y,noWrap:!0,maxNativeZoom:19,maxZoom:B.map.options.maxZoom});const ie=new L.Control.Attribution({position:"bottomright"});ie.addAttribution(Y),ie.addTo(B.map);const D=new L.LatLng(settings.coords_lat,settings.coords_lon);B.map.setView(D,settings.coords_zoom),B.map.createPane("ohm_vectortiles"),B.map.getPane("ohm_vectortiles").style.zIndex="210",B.map.getPane("ohm_vectortiles").style.pointerEvents="none",maplibreLayer({style:configs.vectorTileStyleUrl,pane:"ohm_vectortiles"}).addTo(B.map),B.map.inv_opacity_layer=L.tileLayer("data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==").setOpacity(1-settings.background_opacity),settings.background_opacity!=1&&B.map.inv_opacity_layer.addTo(B.map),B.scaleControl=new L.Control.Scale({metric:!0,imperial:!1}),B.scaleControl.addTo(B.map),B.map.on("moveend",()=>{settings.coords_lat=B.map.getCenter().lat,settings.coords_lon=B.map.getCenter().lng,settings.coords_zoom=B.map.getZoom(),settings.save()}),$("#dataviewer > div#data")[0].style.zIndex=-1001,$(".tabs li").bind("click",ue=>{$(ue.target).hasClass("is-active")||($("#dataviewer > div#data")[0].style.zIndex=-1*$("#dataviewer > div#data")[0].style.zIndex,$(".tabs li").toggleClass("is-active"))}),$(document).keydown(ue=>B.onKeyPress(ue));const ne=L.Control.extend({options:{position:"topleft"},onAdd(){const ue=L.DomUtil.create("div","leaflet-control-buttons leaflet-bar");let pe=L.DomUtil.create("a","leaflet-control-buttons-fitdata leaflet-bar-part leaflet-bar-part-top",ue);return $('<span class="fas fa-search"/>').appendTo($(pe)),pe.href="#",pe.className+=" t",pe.setAttribute("data-t","[title]map_controlls.zoom_to_data"),i18n.translate_ui(pe),L.DomEvent.addListener(pe,"click",()=>{try{B.map.fitBounds(overpass.osmLayer.getBaseLayer().getBounds(),{maxZoom:18})}catch{}return!1},B.map),pe=L.DomUtil.create("a","leaflet-control-buttons-myloc leaflet-bar-part",ue),$('<span class="fas fa-crosshairs"/>').appendTo($(pe)),pe.href="#",pe.className+=" t",pe.setAttribute("data-t","[title]map_controlls.localize_user"),window.isSecureContext||(pe.className+=" disabled",pe.setAttribute("data-t","[title]map_controlls.localize_user_disabled")),i18n.translate_ui(pe),L.DomEvent.addListener(pe,"click",()=>{try{navigator.geolocation.getCurrentPosition(we=>{const ke=new L.LatLng(we.coords.latitude,we.coords.longitude);B.map.setView(ke,settings.coords_zoom)})}catch{}return!1},B.map),pe=L.DomUtil.create("a","leaflet-control-buttons-bboxfilter leaflet-bar-part",ue),$('<span class="fas fa-image"/>').appendTo($(pe)),pe.href="#",pe.className+=" t",pe.setAttribute("data-t","[title]map_controlls.select_bbox"),i18n.translate_ui(pe),L.DomEvent.addListener(pe,"click",we=>($(we.target).parent().hasClass("disabled")||(B.map.bboxfilter.isEnabled()?B.map.bboxfilter.disable():(B.map.bboxfilter.setBounds(B.map.getBounds().pad(-.2)),B.map.bboxfilter.enable()),$(we.target).toggleClass("fa-times-circle").toggleClass("fa-image")),!1),B.map),pe=L.DomUtil.create("a","leaflet-control-buttons-fullscreen leaflet-bar-part",ue),$('<span class="fas fa-step-backward"/>').appendTo($(pe)),pe.href="#",pe.className+=" t",pe.setAttribute("data-t","[title]map_controlls.toggle_wide_map"),i18n.translate_ui(pe),L.DomEvent.addListener(pe,"click",we=>($("#dataviewer").toggleClass("fullscreen"),B.map.invalidateSize(),$(we.target).toggleClass("fa-step-forward").toggleClass("fa-step-backward"),$("#editor").toggleClass("hidden"),$("#editor").resizable("option","disabled")?$("#editor").resizable("enable"):$("#editor").resizable("disable"),!1),B.map),pe=L.DomUtil.create("a","leaflet-control-buttons-clearoverlay leaflet-bar-part leaflet-bar-part-bottom",ue),$('<span class="fas fa-ban"/>').appendTo($(pe)),pe.href="#",pe.className+=" t",pe.setAttribute("data-t","[title]map_controlls.toggle_data"),i18n.translate_ui(pe),L.DomEvent.addListener(pe,"click",we=>(we.preventDefault(),B.map.hasLayer(overpass.osmLayer)?B.map.removeLayer(overpass.osmLayer):B.map.addLayer(overpass.osmLayer),!1),B.map),ue}});B.map.addControl(new ne),$(".leaflet-control-buttons > a").bind("dblclick",ue=>ue.stopPropagation()),$(".leaflet-control-buttons > a").tooltip({items:"a[title]",hide:{effect:"fadeOut",duration:100},position:{my:"left+5 center",at:"right center"}});const oe=L.Control.extend({options:{position:"topright"},onAdd(){const ue=L.DomUtil.create("div","leaflet-control-search control has-icons-left");ue.style.position="absolute",ue.style.right="0";const pe=L.DomUtil.create("input","input is-rounded",ue);return $('<span class="icon is-left"><span class="fas fa-search"/></span>').click(function(){$(this).prev().autocomplete("search")}).insertAfter(pe),pe.id="search",pe.type="search",pe.onclick=function(){this.focus()},ue.ondblclick=function(we){we.stopPropagation()},$(pe).autocomplete({source(we,ke){$.ajax(`https://search.osmnames.org/q/${encodeURIComponent(we.term)}.js?key=${configs.osmnamesApiKey}`,{success(Qe){if(typeof Qe=="string")try{Qe=$.parseJSON(Qe)}catch{}ke($.map(Qe.results.slice(0,10),Ue=>({label:Ue.display_name,value:Ue.display_name,lat:Ue.lat,lon:Ue.lon,boundingbox:Ue.boundingbox})))},error(){console.error("An error occurred while contacting the search server osmnames.org :(")}})},minLength:2,autoFocus:!0,select(we,ke){return ke.item.boundingbox&&ke.item.boundingbox instanceof Array?B.map.fitBounds(L.latLngBounds([[ke.item.boundingbox[1],ke.item.boundingbox[0]],[ke.item.boundingbox[3],ke.item.boundingbox[2]]]),{maxZoom:18}):B.map.panTo(new L.LatLng(ke.item.lat,ke.item.lon)),this.value="",!1},open(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close(){$(this).addClass("ui-corner-all").removeClass("ui-corner-top")}}),$(pe).autocomplete("option","delay",20),ue}});B.map.addControl(new oe),$('<span class="fas fa-plus" />').addClass("crosshairs").hide().appendTo("#map"),settings.enable_crosshairs&&$(".crosshairs").show(),B.map.bboxfilter=new L.LocationFilter({enable:!1,adjustButton:!1,enableButton:!1}).addTo(B.map),B.map.on("popupopen popupclose",ue=>{if(typeof ue.popup.layer<"u"){const pe=ue.popup.layer.placeholder||ue.popup.layer,we=overpass.osmLayer._baseLayer.options.style(pe.feature,ue.type=="popupopen");typeof pe.eachLayer!="function"?typeof pe.setStyle=="function"&&pe.setStyle(we):pe.eachLayer(ke=>{typeof ke.setStyle=="function"&&ke.setStyle(we)})}}),overpass.init(),overpass.handlers.onProgress=function(ue,pe){B.waiter.addInfo(ue,pe)},overpass.handlers.onDone=function(){const ue=B.getRawQuery().match(/@name ([^\n]+)/),pe=ue?`${ue[1]} | `:"";B.waiter.close(pe);const we=B.map.getBounds(),ke=overpass.osmLayer.getBaseLayer().getBounds();if(ke.isValid()&&!we.intersects(ke)){const Qe=$(".leaflet-control-buttons-fitdata").tooltip("option","content");$(".leaflet-control-buttons-fitdata").tooltip("option","content",`â ${i18n.t("map_controlls.suggest_zoom_to_data")}`),$(".leaflet-control-buttons-fitdata").tooltip("open"),$(".leaflet-control-buttons-fitdata").tooltip("option","hide",{effect:"fadeOut",duration:1e3}),setTimeout(()=>{$(".leaflet-control-buttons-fitdata").tooltip("option","content",Qe),$(".leaflet-control-buttons-fitdata").tooltip("close"),$(".leaflet-control-buttons-fitdata").tooltip("option","hide",{effect:"fadeOut",duration:100})},2600)}},overpass.handlers.onEmptyMap=function(ue,pe){const we=B.getRawQuery(),ke=/out[^;]+?count/.test(we);if(ue=="no visible data")if(!ke&&!settings.no_autorepair){const Qe=`<p>${i18n.t("warning.incomplete.expl.1")}</p><p>${i18n.t("warning.incomplete.expl.2")}</p><p><input type="checkbox" name="hide_incomplete_data_warning"/>&nbsp;${i18n.t("warning.incomplete.not_again")}</p>`,Ue=[{name:i18n.t("dialog.repair_query"),callback(){B.repairQuery("no visible data")}},{name:i18n.t("dialog.show_data"),callback(){var We,Ne;(Ne=(We=$("input[name=hide_incomplete_data_warning]"))==null?void 0:We[0])!=null&&Ne.checked&&(settings.no_autorepair=!0,settings.save()),B.switchTab("Data")}}];showDialog(i18n.t("warning.incomplete.title"),Qe,Ue)}else ke&&B.switchTab("Data");ue=="only areas returned"&&B.switchTab("Data"),ue=="no coordinates returned"&&B.switchTab("Data"),pe=="unknown"&&B.switchTab("Data"),$(`<div id="map_blank" style="z-index:700; display:block; position:relative; top:50px; width:100%; text-align:center; background-color:#eee; opacity: 0.8;">${i18n.t("map.intentionally_blank")} <small>(${ue})</small></div>`).appendTo("#map")},overpass.handlers.onDataReceived=function(ue,pe,we,ke){if(ue>1e6){B.waiter.close();const Qe=document.title;document.title=`â ${Qe}`;const Ue=[{name:i18n.t("dialog.abort"),callback(){document.title=Qe,we()}},{name:i18n.t("dialog.continue_anyway"),callback(){document.title=Qe,ke()}}],We=`<p>${i18n.t("warning.huge_data.expl.1").replace("{{amount_txt}}",pe)}</p><p>${i18n.t("warning.huge_data.expl.2")}</p>`;showDialog(i18n.t("warning.huge_data.title"),We,Ue)}else ke()},overpass.handlers.onAbort=function(){B.waiter.close()},overpass.handlers.onAjaxError=function(ue){B.waiter.close();const pe=document.title;document.title=`â ${pe}`;const we=[{name:i18n.t("dialog.dismiss"),callback(){document.title=pe}}],ke=`<p style="color:red;">${i18n.t("error.ajax.expl")}</p>${ue}`;showDialog(i18n.t("error.ajax.title"),ke,we),overpass.resultText&&B.dataViewer.setValue(overpass.resultText)},overpass.handlers.onQueryError=function(ue){B.waiter.close();const pe=document.title;document.title=`â ${pe}`;const we=[{name:i18n.t("dialog.dismiss"),callback(){document.title=pe}}],ke=`<div class="notification is-danger is-light">${i18n.t("error.query.expl")}<br>${ue}</div>`;showDialog(i18n.t("error.query.title"),ke,we)},overpass.handlers.onStyleError=function(ue){const pe=[{name:i18n.t("dialog.dismiss")}],we=`<p style="color:red;">${i18n.t("error.mapcss.expl")}</p>${ue}`;showDialog(i18n.t("error.mapcss.title"),we,pe)},overpass.handlers.onQueryErrorLine=function(ue){B.highlightError(ue)},overpass.handlers.onRawDataPresent=function(){B.dataViewer.setOption("mode",overpass.resultType),B.dataViewer.setValue(overpass.resultText)},overpass.handlers.onGeoJsonReady=function(){if(B.map.addLayer(overpass.osmLayer),typeof B.run_query_on_startup=="function"&&B.run_query_on_startup(),$("#styler-button").show(),settings.show_data_stats){const ue=overpass.stats,pe=`<small>${i18n.t("data_stats.loaded")}</small>&nbsp;&ndash;&nbsp;${i18n.t("data_stats.nodes")}:&nbsp;${ue.data.nodes}, ${i18n.t("data_stats.ways")}:&nbsp;${ue.data.ways}, ${i18n.t("data_stats.relations")}:&nbsp;${ue.data.relations}${ue.data.areas>0?`, ${i18n.t("data_stats.areas")}:&nbsp;${ue.data.areas}`:""}<br/><small>${i18n.t("data_stats.displayed")}</small>&nbsp;&ndash;&nbsp;${i18n.t("data_stats.pois")}:&nbsp;${ue.geojson.pois}, ${i18n.t("data_stats.lines")}:&nbsp;${ue.geojson.lines}, ${i18n.t("data_stats.polygons")}:&nbsp;${ue.geojson.polys}</small>`;$(`<div id="data_stats" class="stats leaflet-control">${pe}</div>`).insertAfter("#map .leaflet-control-attribution");const we=overpass.timestamp&&Date.now()-Date.parse(overpass.timestamp),ke=overpass.timestampAreas&&Date.now()-Date.parse(overpass.timestampAreas);$("#data_stats").tooltip({items:"div",tooltipClass:"stats",content(){let Qe="<div>";if(overpass.ajax_request_duration){let Ue=overpass.ajax_request_duration;Ue.toLocaleString&&(Ue=Ue.toLocaleString()),Qe+=`${i18n.t("data_stats.request_duration")}: ${Ue}ms<br>`}return overpass.timestamp&&(Qe+=`${i18n.t("data_stats.lag")}: ${Math.floor(we/1e3)}s <small>${i18n.t("data_stats.lag.expl")}</small>`),overpass.timestampAreas&&(Qe+=`<br>${i18n.t("data_stats.lag_areas")}: ${Math.floor(ke/1e3)}s <small>${i18n.t("data_stats.lag.expl")}</small>`),Qe+="</div>",Qe},hide:{effect:"fadeOut",duration:100},position:{my:"right bottom-5",at:"right top"}}),(we>24*60*60*1e3||ke>96*60*60*1e3)&&$("#data_stats").css("background-color","yellow")}},overpass.handlers.onPopupReady=function(ue){ue.openOn(B.map)},B.waiter.close(),B.run_query_on_startup===!0&&(B.update_map(),!M.has_coords&&M.has_query&&M.query.match(/\{\{(bbox|center)\}\}/)===null&&(B.run_query_on_startup=function(){B.run_query_on_startup=null;try{B.map.fitBounds(overpass.osmLayer.getBaseLayer().getBounds(),{maxZoom:18})}catch{}}))}onNominatimError(B,M){this.waiter.close();let P=this.getRawQuery();P=P.split(`
`),P.forEach((ie,D)=>{ie.indexOf(`{{geocode${M}:${B}}}`)!==-1&&this.highlightError(D+1)});const K=[{name:i18n.t("dialog.dismiss")}],Y=`<p style="color:red;">${i18n.t("error.nominatim.expl")}</p><p><i>${htmlentities(B)}</i></p>`;showDialog(i18n.t("error.nominatim.title"),Y,K)}getRawQuery(){return this.codeEditor.getValue()}async getQuery(){let B=this.getRawQuery();B=B.replace(/(<osm-script[^>]+bbox[^=]*=[^"'']*["'])({{bbox}})(["'])/,"$1{{__bbox__global_bbox_xml__ezs4K8__}}$3"),B=await this.queryParser.parse(B,shortcuts());let M="";this.queryParser.hasStatement("style")&&(M=this.queryParser.getStatement("style")),this.mapcss=M;let P=null;if(this.queryParser.hasStatement("data")){P=this.queryParser.getStatement("data"),P=P.split(",");const K=P[0].toLowerCase();P=P.slice(1);const Y={};for(const ie of P){const D=ie.split("=");Y[D[0]]=D[1]}P={mode:K,options:Y}}return this.data_source=P,B}setQuery(B){this.codeEditor.setValue(B)}getQueryLang(){return $.trim(this.getRawQuery().replace(/{{.*?}}/g,"")).match(/^</)?"xml":"OverpassQL"}repairQuery(B){const M=this.getRawQuery(),P=this.getQueryLang(),K=autorepair(M,P);B=="no visible data"?K.recurse():B=="xml+metadata"&&K.editors(),this.setQuery(K.getQuery())}highlightError(B){this.codeEditor.setLineClass(B-1,null,"errorline")}resetErrors(){for(let B=0;B<this.codeEditor.lineCount();B++)this.codeEditor.setLineClass(B,null,null)}switchTab(B){$(`.tabs li.${B}`).click()}loadExample(B){if(typeof settings.saves[B]<"u"){let M=settings.saves[B].overpass;/@name/.test(M)||(M=`// @name ${B}

${M}`),this.setQuery(M)}}removeExample(B){const M=[{name:i18n.t("dialog.delete"),callback:()=>{delete settings.saves[B],settings.save(),this.onLoadClick()}},{name:i18n.t("dialog.cancel")}],P=`<p><span class="fas fa-exclamation-triangle" style="float:left; margin:1px 7px 20px 0;"></span>${i18n.t("dialog.delete_query.expl")}: &quot;<i>${B}</i>&quot;?</p>`;showDialog(i18n.t("dialog.delete_query.title"),P,M)}removeExampleSync(B,M){const P=[{name:i18n.t("dialog.delete"),callback(){sync.delete(B.name,Y=>{if(Y)return console.error(Y);$(M).parent().remove()})}},{name:i18n.t("dialog.cancel")}],K=`<p><span class="fas fa-exclamation-triangle" style="float:left; margin:1px 7px 20px 0;"></span>${i18n.t("dialog.delete_query.expl-osm")}: &quot;<i>${B.name}</i>&quot;?</p>`;showDialog(i18n.t("dialog.delete_query.title"),K,P)}onLoadClick(){const B=this;$("#load-dialog .panel.saved_query .panel-block").remove(),$("#load-dialog .panel.example .panel-block").remove();let M=!1;for(const P in settings.saves){const K=settings.saves[P].type;K!="template"&&($('<a class="panel-block">').attr("href","#").text(P).on("click",()=>(B.loadExample(P),$("#load-dialog").removeClass("is-active"),!1)).append($('<button class="ml-auto">').attr("title",`${i18n.t("load.delete_query")}: ${P}`).addClass("delete").on("click",()=>(B.removeExample(P),!1))).appendTo(`#load-dialog .panel.${K}`),K=="saved_query"&&(M=!0))}if(M||$('<div class="panel-block">').text(i18n.t("load.no_saved_query")).appendTo("#load-dialog .panel.saved_query"),$("#load-dialog").addClass("is-active"),sync.authenticated())B.loadOsmQueries();else{const P=$("#load-dialog .panel.osm-queries");location.protocol==="https:"||location.hostname==="127.0.0.1"?(P.show(),P.find(".panel-block").remove(),$('<div class="panel-block">').append($(`<button class='button is-link is-outlined t' title='load.title'>${i18n.t("load.title")}</button>`).on("click",()=>{B.loadOsmQueries()})).appendTo(P)):P.hide()}}loadOsmQueries(){const B=this,M=$("#load-dialog .panel.osm-queries");M.show(),M.find(".panel-block").remove(),$('<div class="panel-block">').text(i18n.t("load.saved_queries-osm-loading")).appendTo(M),sync.load((P,K)=>{if(P)return M.find(".panel-block").remove(),$('<div class="panel-block">').text(i18n.t("load.saved_queries-osm-error")).appendTo(M),console.error(P);M.find(".panel-block").remove(),$("#logout").show(),$("#logout").appendTo($("#logout").parent()),K.forEach(Y=>{$('<a class="panel-block">').attr("href","#").text(Y.name).on("click",()=>(B.setQuery(lzw_decode(Base64.decode(Y.query))),$("#load-dialog").removeClass("is-active"),!1)).append($('<button class="ml-auto">').attr("title",`${i18n.t("load.delete_query")}: ${Y.name}`).addClass("delete").on("click",()=>(B.removeExampleSync(Y,this),!1))).appendTo(M)})})}onLoadClose(){$("#load-dialog").removeClass("is-active")}onSaveClick(){const B=[];for(const M in settings.saves)settings.saves[M].type!="template"&&B.push(M);make_combobox($("#save-dialog input[name=save]"),B),sync.enabled&&(location.protocol==="https:"||location.hostname==="127.0.0.1")&&$("#save-dialog button.osm").show(),$("#save-dialog").addClass("is-active")}onSaveSumbit(){const B=$("#save-dialog input[name=save]")[0].value;settings.saves[htmlentities(B)]={overpass:this.getRawQuery(),type:"saved_query"},settings.save(),$("#save-dialog").removeClass("is-active")}onSaveOsmSumbit(){const B=$("#save-dialog input[name=save]")[0].value,M=this.compose_share_link(this.getRawQuery(),!0).slice(3);sync.save({name:B,query:M},P=>{if(P)return console.error(P);$("#logout").show(),$("#logout").appendTo($("#logout").parent()),$("#save-dialog").removeClass("is-active")})}onSaveClose(){$("#save-dialog").removeClass("is-active")}onLogoutClick(){sync.logout(),$("#load-dialog .panel.osm-queries .panel-block").remove(),$("#logout").hide(),$("#logout").insertBefore($("#logout").prev())}onRunClick(){this.update_map()}onRerenderClick(){this.rerender_map()}compose_share_link(B,M,P,K){const Y=new URLSearchParams;return M?(Y.append("q",Base64.encode(lzw_encode(B))),P&&Y.append("c",ie(this.map.getCenter().lat,this.map.getCenter().lng)+Base64.encodeNum(this.map.getZoom()))):(Y.append("Q",B),P&&Y.append("C",`${L.Util.formatNum(this.map.getCenter().lat)};${L.Util.formatNum(this.map.getCenter().lng)};${this.map.getZoom()}`)),K&&Y.append("R",""),`?${Y}`.replace(/\+/g,"%20");function ie(D,ne){const oe=Base64.encodeNum(Math.round((D+90)*1e5)+Math.round((ne+180)*1e5)*180*1e5);return"AAAAAAAA".substring(0,9-oe.length)+oe}}updateShareLink(){const B=`${location.protocol}//${location.host}${location.pathname}`,M=this.getRawQuery(),P=settings.share_compression=="auto"&&M.length>300||settings.share_compression=="on",K=$("div#share-dialog input[name=include_coords]")[0].checked,Y=$("div#share-dialog input[name=run_immediately]")[0].checked,ie=this.compose_share_link(M,P,K,Y),D=B+ie;let ne="";D.length>=2e3&&(ne=`<p class="warning">${i18n.t("warning.share.long")}</p>`),D.length>=4e3&&(ne=`<p class="warning severe">${i18n.t("warning.share.very_long")}</p>`),$("div#share-dialog #share_link_warning").html(ne),$("div#share-dialog #share_link_a")[0].href=D,$("div#share-dialog #share_link_textarea")[0].value=D}onShareClick(){$("div#share-dialog input[name=include_coords]")[0].checked=settings.share_include_pos,this.updateShareLink(),$("#share-dialog").addClass("is-active")}onShareClose(){$("#share-dialog").removeClass("is-active")}async onExportClick(){const B=await this.getQuery(),M=`${location.protocol}//${location.host}${location.pathname.match(/.*\//)[0]}`,P=this.data_source&&this.data_source.mode=="overpass"&&this.data_source.options.server?this.data_source.options.server:settings.server;let K=B;this.queryParser.hasStatement("style")&&(K+=`{{style: ${this.queryParser.getStatement("style")} }}`),this.queryParser.hasStatement("data")?K+=`{{data:${this.queryParser.getStatement("data")}}}`:settings.server!==configs.defaultServer&&(K+=`{{data:overpass,server=${settings.server}}}`),$("#export-dialog a#export-interactive-map")[0].href=`${M}map.html?${new URLSearchParams({Q:K})}`,$("#export-dialog a#export-overpass-api")[0].href=`${P}interpreter?data=${encodeURIComponent(B).replace(/!/g,"%21").replace(/\(/g,"%28").replace(/\)/g,"%29")}`;function Y(Ye,et){return`data:${et||"text/plain"};charset=${document.characterSet||document.charset};base64,${Base64.encode(Ye,!0)}`}function ie(Ye,et,rt){const ft=document.createElement("a");ft.href=Y(Ye,et),ft.download=rt,ft.dispatchEvent(new MouseEvent("click"))}function D(Ye,et){return function(){return $("#export-clipboard-success").addClass("is-active"),copyData={"text/plain":Ye},document.execCommand("copy"),$("#export-clipboard-success .message").html(i18n.t("export.copy_to_clipboard_success-message")),$("#export-clipboard-success .export-copy_to_clipboard-content").html(et),!1}}$("#export-text .format").html(i18n.t("export.format_text")),$("#export-text .export").attr({download:"query.overpassql",target:"_blank",href:Y(B)}),$("#export-text .copy").attr("href","").click(D(B));const ne=this.getRawQuery();$("#export-text_raw .format").html(i18n.t("export.format_text_raw")),$("#export-text_raw .export").attr({download:"query-raw.overpassql",target:"_blank",href:Y(ne)}),$("#export-text_raw .copy").attr("href","").click(D(ne));let oe=`{{OverpassTurboExample|loc=${L.Util.formatNum(this.map.getCenter().lat)};${L.Util.formatNum(this.map.getCenter().lng)};${this.map.getZoom()}|query=
`;oe+=ne.replace(/{{/g,"mSAvmrw81O8NgWlX").replace(/{/g,"Z9P563g6zQYzjiLE").replace(/}}/g,"AtUhvGGxAlM1mP5i").replace(/}/g,"Yfxw6RTW5lewTqtg").replace(/mSAvmrw81O8NgWlX/g,"{{((}}").replace(/Z9P563g6zQYzjiLE/g,"{{(}}").replace(/AtUhvGGxAlM1mP5i/g,"{{))}}").replace(/Yfxw6RTW5lewTqtg/g,"{{)}}").replace(/\|/g,"{{!}}").replace(/{{!}}{{!}}/g,"{{!!}}"),oe+=`
}}`,$("#export-text_wiki .format").html(i18n.t("export.format_text_wiki")),$("#export-text_wiki .export").attr({download:"query-wiki.mediawiki",target:"_blank",href:Y(oe)}),$("#export-text_wiki .copy").attr("href","").click(D(oe));let ue=B;ue=ue.replace(/\/\*[\S\s]*?\*\//g,""),ue=ue.replace(/\/\/.*/g,""),ue=ue.replace(/\n\s*/g,""),ue=ue.replace(new RegExp(shortcuts().bbox,"g"),"{south},{west},{north},{east}"),$("#export-text_umap .format").html(i18n.t("export.format_text_umap")),$("#export-text_umap .export").attr({download:"query-umap.overpassql",target:"_blank",href:Y(ue)}),$("#export-text_umap .copy").attr("href","").click(D(ue,`${i18n.t("export.section.query")} (${i18n.t("export.format_text_umap")})`));const pe=[{name:i18n.t("dialog.done")}];$("#export-dialog a#export-map-state").unbind("click").bind("click",()=>{const Ye=`<h4>${i18n.t("export.map_view.permalink")}</h4><p><a href="//www.openhistoricalmap.org/#map=${this.map.getZoom()}/${L.Util.formatNum(this.map.getCenter().lat)}/${L.Util.formatNum(this.map.getCenter().lng)}" target="_blank">${i18n.t("export.map_view.permalink_osm")}</a></p><h4>${i18n.t("export.map_view.center")}</h4><p>${L.Util.formatNum(this.map.getCenter().lat)}, ${L.Util.formatNum(this.map.getCenter().lng)} <small>(${i18n.t("export.map_view.center_expl")})</small></p><h4>${i18n.t("export.map_view.bounds")}</h4><p>${L.Util.formatNum(this.map.getBounds().getSouthWest().lat)}, ${L.Util.formatNum(this.map.getBounds().getSouthWest().lng)}, ${L.Util.formatNum(this.map.getBounds().getNorthEast().lat)}, ${L.Util.formatNum(this.map.getBounds().getNorthEast().lng)}<br /><small>(${i18n.t("export.map_view.bounds_expl")})</small></p>${this.map.bboxfilter.isEnabled()?`<h4>${i18n.t("export.map_view.bounds_selection")}</h4><p>${L.Util.formatNum(this.map.bboxfilter.getBounds().getSouthWest().lat)}, ${L.Util.formatNum(this.map.bboxfilter.getBounds().getSouthWest().lng)}, ${L.Util.formatNum(this.map.bboxfilter.getBounds().getNorthEast().lat)}, ${L.Util.formatNum(this.map.bboxfilter.getBounds().getNorthEast().lng)}<br /><small>(${i18n.t("export.map_view.bounds_expl")})</small></p>`:""}<h4>${i18n.t("export.map_view.zoom")}</h4><p>${this.map.getZoom()}</p>`;return showDialog(i18n.t("export.map_view.title"),Ye,pe),!1}),$("#export-dialog a#export-image").unbind("click").on("click",()=>(this.onExportImageClick(),$("#export-dialog").removeClass("is-active"),!1));function we(Ye){let et;if(!Ye)et=i18n.t("export.geoJSON.no_data");else{console.log(new Date);const rt={type:"FeatureCollection",generator:configs.appname,copyright:overpass.copyright,timestamp:overpass.timestamp,features:Ye.features.map(ft=>({type:"Feature",properties:ft.properties,geometry:ft.geometry}))};rt.features.forEach(ft=>{const Ze=ft.properties;ft.id=`${Ze.type}/${Ze.id}`,ft.properties={"@id":ft.id};for(const wt in Ze.tags||{})ft.properties[wt.replace(/^@/,"@@")]=Ze.tags[wt];for(const wt in Ze.meta||{})ft.properties[`@${wt}`]=Ze.meta[wt];Ze.tainted&&(ft.properties["@tainted"]=Ze.tainted),Ze.geometry&&(ft.properties["@geometry"]=Ze.geometry),Ze.relations&&Ze.relations.length>0&&(ft.properties["@relations"]=Ze.relations)}),et=JSON.stringify(rt,void 0,2)}return et}$("#export-geoJSON .format").text("GeoJSON"),$("#export-geoJSON .export").attr("href","").unbind("click").on("click",()=>{const Ye=we(overpass.geojson),et=$("#export-download-dialog");return overpass.geojson?ie(Ye,"application/geo+json","export.geojson"):(et.addClass("is-active"),$(".message",et).text(Ye)),!1}),$("#export-geoJSON .copy").attr("href","").click(()=>{const Ye=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");if(Ye.addClass("is-active"),overpass.geojson){const et=we(overpass.geojson);copyData={"text/plain":et,"application/geo+json":et},document.execCommand("copy"),$(".message",Ye).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",Ye).text("GeoJSON")}else $(".message",Ye).text(i18n.t("export.geoJSON.no_data"));return!1}),$("#export-dialog a#export-geoJSON-gist").unbind("click").on("click",()=>{const Ye=we(overpass.geojson);return $.ajax("https://api.github.com/gists",{method:"POST",data:JSON.stringify({description:"data exported by overpass turbo",public:!0,files:{"overpass.geojson":{content:Ye}}})}).done(et=>{const rt=[{name:i18n.t("dialog.done")}],ft=`<p>${i18n.t("export.geoJSON_gist.gist")}&nbsp;<a href="${et.html_url}" target="_blank" class="external">${et.id}</a></p><p>${i18n.t("export.geoJSON_gist.geojsonio")}&nbsp;<a href="http://geojson.io/#id=gist:anonymous/${et.id}" target="_blank" class="external">${i18n.t("export.geoJSON_gist.geojsonio_link")}</a></p>`;showDialog(i18n.t("export.geoJSON_gist.title"),ft,rt)}).fail(et=>{alert(`an error occurred during the creation of the overpass gist:
${JSON.stringify(et)}`)}),!1});function ke(Ye){let et;return Ye?(et=togpx(Ye,{creator:configs.appname,metadata:{desc:"Filtered OSM data converted to GPX by overpass turbo",copyright:{"@author":overpass.copyright},time:overpass.timestamp},featureTitle(rt){if(rt.tags){if(rt.tags.name)return rt.tags.name;if(rt.tags.ref)return rt.tags.ref;if(rt.tags["addr:housenumber"]&&rt.tags["addr:street"])return`${rt.tags["addr:street"]} ${rt.tags["addr:housenumber"]}`}return`${rt.type}/${rt.id}`},featureLink(rt){return`http://osm.org/browse/${rt.type}/${rt.id}`}}),et[1]!=="?"&&(et=`<?xml version="1.0" encoding="UTF-8"?>
${et}`)):et=i18n.t("export.GPX.no_data"),et}$("#export-GPX .format").text("GPX"),$("#export-GPX .export").attr("href","").unbind("click").on("click",()=>{const Ye=overpass.geojson,et=ke(Ye);if(Ye)ie(et,"application/gpx+xml","export.gpx");else{const rt=$("#export-download-dialog");rt.addClass("is-active"),$(".message",rt).text(et)}return!1}),$("#export-GPX .copy").attr("href","").click(()=>{const Ye=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");if(Ye.addClass("is-active"),overpass.geojson){const et=ke(overpass.geojson);copyData={"text/plain":et,"application/gpx+xml":et},document.execCommand("copy"),$(".message",Ye).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",Ye).text("GPX")}else $(".message",Ye).text(i18n.t("export.GPX.no_data"));return!1});function Qe(Ye){return Ye=Ye&&JSON.parse(we(Ye)),Ye?tokml(Ye,{documentName:"overpass-turbo.eu export",documentDescription:`Filtered OSM data converted to KML by overpass turbo.
Copyright: ${overpass.copyright}
Timestamp: ${overpass.timestamp}`,name:"name",description:"description"}):i18n.t("export.KML.no_data")}$("#export-KML .format").text("KML"),$("#export-KML .export").attr("href","").unbind("click").on("click",()=>{const Ye=overpass.geojson,et=Qe(Ye);return Ye?ie(et,"application/vnd.google-earth.kml+xml","export.kml"):($("#export-download-dialog").addClass("is-active"),$("#export-download-dialog .message").text(et)),!1}),$("#export-KML .copy").attr("href","").click(()=>{const Ye=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");if(Ye.addClass("is-active"),overpass.geojson){const et=Qe(overpass.geojson);copyData={"text/plain":et,"application/vnd.google-earth.kml+xml":et},document.execCommand("copy"),$(".message",Ye).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",Ye).text("KML")}else $(".message",Ye).text(i18n.t("export.kml.no_data"));return!1});function Ue(Ye){let et,rt;if(!Ye)et=i18n.t("export.raw.no_data");else{const ft=overpass.data;if(ft instanceof XMLDocument)et=new XMLSerializer().serializeToString(ft),rt=et.match(/<osm/)?"osm":"xml";else if(ft instanceof Object)et=JSON.stringify(ft,void 0,2),rt="json";else try{et=ft.toString()}catch{et="Error while exporting the data"}}return{raw_str:et,raw_type:rt}}$("#export-raw .format").text(i18n.t("export.raw_data")),$("#export-raw .export").attr("href","").unbind("click").on("click",()=>{const Ye=overpass.geojson,et=Ue(Ye),rt=et.raw_str,ft=et.raw_type;if(Ye)ft=="osm"||ft=="xml"?ie(rt,"application/xml",`export.${ft}`):ft=="json"?ie(rt,"application/json","export.json"):ie(rt,"application/octet-stream","export.dat");else{const Ze=$("#export-download-dialog");Ze.addClass("is-active"),$(".message",Ze).text(rt)}return!1}),$("#export-raw .copy").attr("href","").click(()=>{const Ye=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");Ye.addClass("is-active");const et=overpass.geojson;if(et){const rt=Ue(et),ft=rt.raw_str,Ze=rt.raw_type;copyData={"text/plain":ft},Ze=="osm"||Ze=="xml"?copyData["application/xml"]=ft:Ze=="json"?copyData["application/json"]=ft:copyData["application/octet-stream"]=ft,document.execCommand("copy"),$(".message",Ye).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",Ye).html(i18n.t("export.raw_data"))}else $(".message",Ye).text(i18n.t("export.raw.no_data"));return!1}),$("#export-dialog a#export-convert-xml")[0].href=`${P}convert?${new URLSearchParams({data:B,target:"xml"})}`,$("#export-dialog a#export-convert-ql")[0].href=`${P}convert?${new URLSearchParams({data:B,target:"mapql"})}`,$("#export-dialog a#export-convert-compact")[0].href=`${P}convert?${new URLSearchParams({data:B,target:"compact"})}`;const We=autorepair.detect.editors(this.getRawQuery(),this.getQueryLang()),Ne=$("#export-dialog a#export-editors-level0");Ne.unbind("click");function ut(Ye){return`https://level0.osmz.ru/?${new URLSearchParams({url:`${P}interpreter?${new URLSearchParams({data:Ye})}`})}`}We?Ne[0].href=ut(B):(Ne[0].href="",Ne.bind("click",()=>{const Ye=[{name:i18n.t("dialog.repair_query"),callback:async()=>{this.repairQuery("xml+metadata");const rt=await this.getQuery();Ne.unbind("click"),Ne[0].href=ut(rt),window.open(Ne[0].href,"_blank")}},{name:i18n.t("dialog.continue_anyway"),callback:()=>{Ne.unbind("click"),Ne[0].href=ut(B),window.open(Ne[0].href,"_blank")}}],et=`<p>${i18n.t("warning.incomplete.remote.expl.1")}</p><p>${i18n.t("warning.incomplete.remote.expl.2")}</p>`;return showDialog(i18n.t("warning.incomplete.title"),et,Ye),!1})),$("#export-dialog a#export-editors-josm").unbind("click").on("click",()=>{const Ye=$("#export-dialog");function et(ft){const Ze="http://127.0.0.1:8111/";$.getJSON(`${Ze}version`).done(wt=>{if(wt.protocolversion.major==1)$.get(`${Ze}import`,{url:`${P.replace(/^\/\//,`${location.protocol}//`)}interpreter?data=${encodeURIComponent(ft)}`}).fail(()=>{alert("Error: Unexpected JOSM remote control error.")}).done(()=>{console.log("successfully invoked JOSM remote control")});else{const Ft=[{name:i18n.t("dialog.dismiss")}],_t=`<p>${i18n.t("error.remote.incompat")}: ${wt.protocolversion.major}.${wt.protocolversion.minor} :(</p>`;showDialog(i18n.t("error.remote.title"),_t,Ft)}}).fail(()=>{const wt=[{name:i18n.t("dialog.dismiss")}],Ft=`<p>${i18n.t("error.remote.not_found")}</p>`;showDialog(i18n.t("error.remote.title"),Ft,wt)})}if(autorepair.detect.editors(this.getRawQuery(),this.getQueryLang()))return et(B),!1;{const ft=[{name:i18n.t("dialog.repair_query"),callback:async()=>{this.repairQuery("xml+metadata");const wt=await this.getQuery();et(wt),Ye.removeClass("is-active")}},{name:i18n.t("dialog.continue_anyway"),callback:()=>{et(B),Ye.removeClass("is-active")}}],Ze=`<p>${i18n.t("warning.incomplete.remote.expl.1")}</p><p>${i18n.t("warning.incomplete.remote.expl.2")}</p>`;return showDialog(i18n.t("warning.incomplete.title"),Ze,ft),!1}}),$("#export-dialog").addClass("is-active")}onExportDownloadClose(){$("#export-download-dialog").removeClass("is-active")}onExportClipboardClose(){$("#export-clipboard-success").removeClass("is-active")}onExportClose(){$("#export-dialog").removeClass("is-active")}async onExportImageClick(){this.waiter.open(i18n.t("waiter.export_as_image")),this.waiter.addInfo("prepare map"),$("#map .leaflet-control-container .leaflet-top").hide(),$("#data_stats").hide(),settings.export_image_attribution&&this.map.addControl(this.attribControl),settings.export_image_scale||this.map.removeControl(this.scaleControl),this.waiter.addInfo("rendering map tiles"),$("#map .leaflet-overlay-pane").hide();const B=await html2canvas(document.getElementById("map"),{useCORS:!0,allowTaint:!1,proxy:void 0});$("#map .leaflet-overlay-pane").show(),settings.export_image_attribution&&this.map.removeControl(this.attribControl),settings.export_image_scale||this.map.addControl(this.scaleControl),settings.show_data_stats&&$("#data_stats").show(),$("#map .leaflet-control-container .leaflet-top").show(),this.waiter.addInfo("rendering map data"),B.id="render_canvas";const M=B.getContext("2d"),P=$("#map .leaflet-overlay-pane svg").height(),K=$("#map .leaflet-overlay-pane svg").width(),Y=$("#map .leaflet-map-pane")[0].style.cssText.match(/.*?(-?\d+)px.*?(-?\d+)px.*/),ie=+Y[1],D=+Y[2],ne=$("#map .leaflet-overlay-pane").html();ne.length>0&&(await Canvg.from(M,ne,{ignoreAnimation:!0,ignoreClear:!0,ignoreDimensions:!0,ignoreMouse:!0,offsetX:ie,offsetY:D,scaleHeight:P,scaleWidth:K})).render(),this.waiter.addInfo("converting to png image");const oe=B.toDataURL("image/png");let ue="";settings.export_image_attribution||(ue='<p style="font-size:smaller; color:orange;">Make sure to include proper attributions when distributing this image!</p>');const pe=[{name:i18n.t("dialog.done")}];this.waiter.close();const we=`<p><img src="${oe}" alt="${i18n.t("export.image.alt")}" width="480px"/><br><!--<a href="${oe}" download="export.png" target="_blank">${i18n.t("export.image.download")}</a>--></p>${ue}`;showDialog(i18n.t("export.image.title"),we,pe);const ke=document.createElement("a");ke.href=oe,ke.download="export.png",ke.dispatchEvent(new MouseEvent("click"))}onFfsClick(){$("#ffs-dialog #ffs-dialog-parse-error").hide(),$("#ffs-dialog #ffs-dialog-typo").hide(),$("#ffs-dialog .loading").hide(),$("#ffs-dialog").addClass("is-active"),$("#ffs-dialog input[type=search]").removeClass("is-danger").unbind("keypress").bind("keypress",B=>{B.key==="Enter"&&(this.onFfsRun(!0),B.preventDefault())}).first().focus()}onFfsClose(){$("#ffs-dialog").removeClass("is-active")}onFfsBuild(){this.onFfsRun(!1)}onFfsRun(B){$("#ffs-dialog input[type=search]").removeClass("is-danger"),$("#ffs-dialog #ffs-dialog-parse-error").hide(),$("#ffs-dialog #ffs-dialog-typo").hide(),$("#ffs-dialog .loading").show(),this.update_ffs_query(void 0,(M,P)=>{if($("#ffs-dialog .loading").hide(),!M)$("#ffs-dialog").removeClass("is-active"),B!==!1&&this.onRunClick();else if(_$1.isArray(P)){$("#ffs-dialog #ffs-dialog-parse-error").hide(),$("#ffs-dialog #ffs-dialog-typo").show(),$("#ffs-dialog input[type=search]").addClass("is-danger");const K=P.join(""),Y=P.map((ie,D)=>D%2===1?`<b>${ie}</b>`:ie).join("");$("#ffs-dialog #ffs-dialog-typo-correction").html(Y),$("#ffs-dialog #ffs-dialog-typo-correction").unbind("click").bind("click",function(ie){$("#ffs-dialog input[type=search]").val(K),$(this).parent().hide(),ie.preventDefault()})}else $("#ffs-dialog #ffs-dialog-typo").hide(),$("#ffs-dialog #ffs-dialog-parse-error").show(),$("#ffs-dialog input[type=search]").addClass("is-danger")})}onStylerClick(){if(!overpass.geojson||overpass.geojson.features.length===0)return;$("#styler-dialog").addClass("is-active");let B={};overpass.geojson.features.forEach(P=>B={...B,...P.properties.tags}),make_combobox($("#styler-dialog input[name=attribute]"),Object.keys(B));function M(P){return P=P||$("#styler-dialog input[type=text]").first().val(),B[P]!==void 0?($("#styler-dialog button.is-success").removeAttr("disabled"),!0):($("#styler-dialog button.is-success").attr("disabled","disabled"),!1)}$("#styler-dialog input[type=text]").first().unbind("keypress").bind("keypress",P=>{P.key==="Enter"&&M()&&(this.onStylerRun(),P.preventDefault())}).unbind("input").bind("input",M).unbind("autocompleteselect").bind("autocompleteselect",(P,K)=>M(K.item.value)).focus()}onStylerRun(){if(!overpass.geojson||overpass.geojson.features.length===0)return;const B=$("#styler-dialog input[name=attribute]").val(),M=[...new Set(overpass.geojson.features.map(D=>D.properties.tags[B]).filter(Boolean))].sort((D,ne)=>isFinite(D)&&isFinite(ne)?D-ne:D<ne?-1:D>ne?1:0);let P;$("#styler-dialog input[name=palette]:checked").val()==="qualitative"?P=index.Set1[Math.min(Math.max(M.length,3),9)]:M.length<=9?P=index.YlOrRd[Math.max(M.length,3)]:P=colormap({colormap:"inferno",nshades:M.length,format:"hex",alpha:1}).reverse();const K={};M.forEach((D,ne)=>{const oe=P[ne%P.length];K[oe]||(K[oe]=[]),K[oe].push(`*[${B}=${D}]`)});const Y=Object.keys(K).map(D=>`${K[D].join(`,
`)}
{ color: ${D}; fill-color:${D}; }`).join(`
`);let ie=ide.getRawQuery();ie=ie.replace(/(\n\n)?{{style: \/\* added by auto-styler \*\/[\s\S]*?}}/,""),ide.setQuery(`${ie}

{{style: /* added by auto-styler */
${Y}
}}`),this.rerender_map(),this.onStylerClose()}onStylerClose(){$("#styler-dialog").removeClass("is-active")}onSettingsClick(){$("#settings-dialog input[name=ui_language]")[0].value=settings.ui_language;const B=i18n.getSupportedLanguagesDescriptions();make_combobox($("#settings-dialog input[name=ui_language]"),["auto"].concat(i18n.getSupportedLanguages()).map(M=>({value:M,label:M=="auto"?"auto":`${M} - ${B[M]}`}))),$("#settings-dialog input[name=server]")[0].value=settings.server,make_combobox($("#settings-dialog input[name=server]"),configs.suggestedServers.concat(settings.customServers),settings.customServers,M=>{settings.customServers.splice(settings.customServers.indexOf(M),1),settings.save()}),$("#settings-dialog input[name=no_autorepair]")[0].checked=settings.no_autorepair,$("#settings-dialog input[name=use_rich_editor]")[0].checked=settings.use_rich_editor,$("#settings-dialog input[name=editor_width]")[0].value=settings.editor_width,$("#settings-dialog input[name=share_include_pos]")[0].checked=settings.share_include_pos,$("#settings-dialog input[name=share_compression]")[0].value=settings.share_compression,make_combobox($("#settings-dialog input[name=share_compression]"),["auto","on","off"]),$("#settings-dialog input[name=tile_server]")[0].value=settings.tile_server,make_combobox($("#settings-dialog input[name=tile_server]"),configs.suggestedTiles.concat(settings.customTiles),settings.customTiles,M=>{settings.customTiles.splice(settings.customTiles.indexOf(M),1),settings.save()}),$("#settings-dialog input[name=background_opacity]")[0].value=settings.background_opacity,$("#settings-dialog input[name=enable_crosshairs]")[0].checked=settings.enable_crosshairs,$("#settings-dialog input[name=disable_poiomatic]")[0].checked=settings.disable_poiomatic,$("#settings-dialog input[name=show_data_stats]")[0].checked=settings.show_data_stats,$("#settings-dialog input[name=export_image_scale]")[0].checked=settings.export_image_scale,$("#settings-dialog input[name=export_image_attribution]")[0].checked=settings.export_image_attribution,$("#settings-dialog").addClass("is-active")}onSettingsSave(){const B=$("#settings-dialog input[name=ui_language]")[0].value;settings.ui_language!=B&&i18n.translate(B),settings.ui_language=B,settings.server=$("#settings-dialog input[name=server]")[0].value,configs.suggestedServers.indexOf(settings.server)===-1&&settings.customServers.indexOf(settings.server)===-1&&settings.customServers.push(settings.server),settings.no_autorepair=$("#settings-dialog input[name=no_autorepair]")[0].checked,settings.use_rich_editor=$("#settings-dialog input[name=use_rich_editor]")[0].checked;const M=settings.editor_width;settings.editor_width=$("#settings-dialog input[name=editor_width]")[0].value,M!=settings.editor_width&&($("#editor").css("width",settings.editor_width),$("#dataviewer").css("left",settings.editor_width)),settings.share_include_pos=$("#settings-dialog input[name=share_include_pos]")[0].checked,settings.share_compression=$("#settings-dialog input[name=share_compression]")[0].value;const P=settings.tile_server;settings.tile_server=$("#settings-dialog input[name=tile_server]")[0].value,configs.suggestedTiles.indexOf(settings.tile_server)===-1&&settings.customTiles.indexOf(settings.tile_server)===-1&&settings.customTiles.push(settings.tile_server),P!=settings.tile_server&&this.map.tile_layer.setUrl(settings.tile_server);const K=settings.background_opacity;settings.background_opacity=+$("#settings-dialog input[name=background_opacity]")[0].value,settings.background_opacity!=K&&(settings.background_opacity==1?this.map.removeLayer(this.map.inv_opacity_layer):this.map.inv_opacity_layer.setOpacity(1-settings.background_opacity).addTo(this.map)),settings.enable_crosshairs=$("#settings-dialog input[name=enable_crosshairs]")[0].checked,settings.disable_poiomatic=$("#settings-dialog input[name=disable_poiomatic]")[0].checked,settings.show_data_stats=$("#settings-dialog input[name=show_data_stats]")[0].checked,$(".crosshairs").toggle(settings.enable_crosshairs),settings.export_image_scale=$("#settings-dialog input[name=export_image_scale]")[0].checked,settings.export_image_attribution=$("#settings-dialog input[name=export_image_attribution]")[0].checked,settings.save(),$("#settings-dialog").removeClass("is-active")}onSettingsClose(){$("#settings-dialog").removeClass("is-active")}onSettingsReset(){window.confirm("Reset?")&&(settings.reset(),location.reload())}onHelpClick(){$("#help-dialog").addClass("is-active")}onHelpClose(){$("#help-dialog").removeClass("is-active")}onKeyPress(B){(B.key==="F9"||B.key==="Enter"&&(B.ctrlKey||B.metaKey))&&(this.onRunClick(),B.preventDefault()),B.key=="e"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onExportClick(),B.preventDefault()),B.key=="s"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onSaveClick(),B.preventDefault()),B.key=="o"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onLoadClick(),B.preventDefault()),B.key=="h"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onHelpClick(),B.preventDefault()),(B.key=="i"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey||B.key=="F"&&(B.ctrlKey||B.metaKey)&&B.shiftKey&&!B.altKey)&&(this.onFfsClick(),B.preventDefault()),B.key=="k"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(overpass.geojson&&this.onStylerClick(),B.preventDefault()),B.key==="Escape"&&$(".modal").removeClass("is-active")}async update_map(){this.waiter.open(i18n.t("waiter.processing_query")),this.waiter.addInfo("resetting map"),$("#data_stats").remove(),this.resetErrors(),this.dataViewer.setValue(""),typeof overpass.osmLayer<"u"&&this.map.removeLayer(overpass.osmLayer),$("#map_blank").remove(),this.waiter.addInfo("building query");const B=await this.getQuery();if(typeof history.pushState=="function"){const K=this.compose_share_link(this.getRawQuery(),!0);K.length>2e3?history.pushState({},"",`?#${K.slice(1)}`):history.pushState({},"",K)}const M=this.getQueryLang(),P=this.data_source&&this.data_source.mode=="overpass"&&this.data_source.options.server?this.data_source.options.server:settings.server;overpass.run_query(B,M,void 0,void 0,P,this.mapcss)}async rerender_map(){$("#data_stats").remove(),typeof overpass.osmLayer<"u"&&this.map.removeLayer(overpass.osmLayer),await this.getQuery(),overpass.rerender(this.mapcss)}update_ffs_query(B,M){const P=B||$("#ffs-dialog input[type=search]").val(),K=$("#ffs-dialog input[name='ffs.comments']")[0].checked;ffs_construct_query(P,K,(Y,ie)=>{Y?ffs_repair_search(P,D=>{if(D)M("repairable query",D);else{if(B)return M(!0);this.update_ffs_query(`"${P}"`,M)}}):(this.setQuery(ie),M(null))})}}const ide=new IDE;$(document).ready(()=>ide.init());$(document).ready(initClickHandler);function initClickHandler(){$("*[data-ide-handler]").each(function(){const g=$(this).attr("data-ide-handler").split(/:/),B=g[0],M=g[1],P=ide[M].bind(ide);$(this).on(B,P)})}
//# sourceMappingURL=index-DWbNtJh-.js.map
