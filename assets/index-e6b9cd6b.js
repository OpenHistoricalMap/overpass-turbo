import{$,c as commonjsGlobal,g as getDefaultExportFromCjs,a as getAugmentedNamespace,B as Base64,b as configs,p as parser,s as settings,i as i18n,u as urlParameters,o as overpass,h as htmlentities,l as lzw_decode,d as lzw_encode,_ as _$1,f as ffs_construct_query,e as ffs_repair_search}from"./urlParameters-ebc5ef04.js";/*! jQuery UI - v1.13.2 - 2022-07-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */(function(g){typeof define=="function"&&define.amd?define(["jquery"],g):g($)})(function(g){g.ui=g.ui||{},g.ui.version="1.13.2";/*!
 * jQuery UI Widget 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var B=0,M=Array.prototype.hasOwnProperty,P=Array.prototype.slice;g.cleanData=function(d){return function(w){var I,k,R;for(R=0;(k=w[R])!=null;R++)I=g._data(k,"events"),I&&I.remove&&g(k).triggerHandler("remove");d(w)}}(g.cleanData),g.widget=function(d,w,I){var k,R,W,se={},oe=d.split(".")[0];d=d.split(".")[1];var ue=oe+"-"+d;return I||(I=w,w=g.Widget),Array.isArray(I)&&(I=g.extend.apply(null,[{}].concat(I))),g.expr.pseudos[ue.toLowerCase()]=function(we){return!!g.data(we,ue)},g[oe]=g[oe]||{},k=g[oe][d],R=g[oe][d]=function(we,Te){if(!this||!this._createWidget)return new R(we,Te);arguments.length&&this._createWidget(we,Te)},g.extend(R,k,{version:I.version,_proto:g.extend({},I),_childConstructors:[]}),W=new w,W.options=g.widget.extend({},W.options),g.each(I,function(we,Te){if(typeof Te!="function"){se[we]=Te;return}se[we]=function(){function Ve(){return w.prototype[we].apply(this,arguments)}function De(me){return w.prototype[we].apply(this,me)}return function(){var me=this._super,ke=this._superApply,qe;return this._super=Ve,this._superApply=De,qe=Te.apply(this,arguments),this._super=me,this._superApply=ke,qe}}()}),R.prototype=g.widget.extend(W,{widgetEventPrefix:k&&W.widgetEventPrefix||d},se,{constructor:R,namespace:oe,widgetName:d,widgetFullName:ue}),k?(g.each(k._childConstructors,function(we,Te){var Ve=Te.prototype;g.widget(Ve.namespace+"."+Ve.widgetName,R,Te._proto)}),delete k._childConstructors):w._childConstructors.push(R),g.widget.bridge(d,R),R},g.widget.extend=function(d){for(var w=P.call(arguments,1),I=0,k=w.length,R,W;I<k;I++)for(R in w[I])W=w[I][R],M.call(w[I],R)&&W!==void 0&&(g.isPlainObject(W)?d[R]=g.isPlainObject(d[R])?g.widget.extend({},d[R],W):g.widget.extend({},W):d[R]=W);return d},g.widget.bridge=function(d,w){var I=w.prototype.widgetFullName||d;g.fn[d]=function(k){var R=typeof k=="string",W=P.call(arguments,1),se=this;return R?!this.length&&k==="instance"?se=void 0:this.each(function(){var oe,ue=g.data(this,I);if(k==="instance")return se=ue,!1;if(!ue)return g.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+k+"'");if(typeof ue[k]!="function"||k.charAt(0)==="_")return g.error("no such method '"+k+"' for "+d+" widget instance");if(oe=ue[k].apply(ue,W),oe!==ue&&oe!==void 0)return se=oe&&oe.jquery?se.pushStack(oe.get()):oe,!1}):(W.length&&(k=g.widget.extend.apply(null,[k].concat(W))),this.each(function(){var oe=g.data(this,I);oe?(oe.option(k||{}),oe._init&&oe._init()):g.data(this,I,new w(k,this))})),se}},g.Widget=function(){},g.Widget._childConstructors=[],g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(d,w){w=g(w||this.defaultElement||this)[0],this.element=g(w),this.uuid=B++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=g(),this.hoverable=g(),this.focusable=g(),this.classesElementLookup={},w!==this&&(g.data(w,this.widgetFullName,this),this._on(!0,this.element,{remove:function(I){I.target===w&&this.destroy()}}),this.document=g(w.style?w.ownerDocument:w.document||w),this.window=g(this.document[0].defaultView||this.document[0].parentWindow)),this.options=g.widget.extend({},this.options,this._getCreateOptions(),d),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){var d=this;this._destroy(),g.each(this.classesElementLookup,function(w,I){d._removeClass(I,w)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:g.noop,widget:function(){return this.element},option:function(d,w){var I=d,k,R,W;if(arguments.length===0)return g.widget.extend({},this.options);if(typeof d=="string")if(I={},k=d.split("."),d=k.shift(),k.length){for(R=I[d]=g.widget.extend({},this.options[d]),W=0;W<k.length-1;W++)R[k[W]]=R[k[W]]||{},R=R[k[W]];if(d=k.pop(),arguments.length===1)return R[d]===void 0?null:R[d];R[d]=w}else{if(arguments.length===1)return this.options[d]===void 0?null:this.options[d];I[d]=w}return this._setOptions(I),this},_setOptions:function(d){var w;for(w in d)this._setOption(w,d[w]);return this},_setOption:function(d,w){return d==="classes"&&this._setOptionClasses(w),this.options[d]=w,d==="disabled"&&this._setOptionDisabled(w),this},_setOptionClasses:function(d){var w,I,k;for(w in d)k=this.classesElementLookup[w],!(d[w]===this.options.classes[w]||!k||!k.length)&&(I=g(k.get()),this._removeClass(k,w),I.addClass(this._classes({element:I,keys:w,classes:d,add:!0})))},_setOptionDisabled:function(d){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!d),d&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(d){var w=[],I=this;d=g.extend({element:this.element,classes:this.options.classes||{}},d);function k(){var W=[];d.element.each(function(se,oe){var ue=g.map(I.classesElementLookup,function(we){return we}).some(function(we){return we.is(oe)});ue||W.push(oe)}),I._on(g(W),{remove:"_untrackClassesElement"})}function R(W,se){var oe,ue;for(ue=0;ue<W.length;ue++)oe=I.classesElementLookup[W[ue]]||g(),d.add?(k(),oe=g(g.uniqueSort(oe.get().concat(d.element.get())))):oe=g(oe.not(d.element).get()),I.classesElementLookup[W[ue]]=oe,w.push(W[ue]),se&&d.classes[W[ue]]&&w.push(d.classes[W[ue]])}return d.keys&&R(d.keys.match(/\S+/g)||[],!0),d.extra&&R(d.extra.match(/\S+/g)||[]),w.join(" ")},_untrackClassesElement:function(d){var w=this;g.each(w.classesElementLookup,function(I,k){g.inArray(d.target,k)!==-1&&(w.classesElementLookup[I]=g(k.not(d.target).get()))}),this._off(g(d.target))},_removeClass:function(d,w,I){return this._toggleClass(d,w,I,!1)},_addClass:function(d,w,I){return this._toggleClass(d,w,I,!0)},_toggleClass:function(d,w,I,k){k=typeof k=="boolean"?k:I;var R=typeof d=="string"||d===null,W={extra:R?w:I,keys:R?d:w,element:R?this.element:d,add:k};return W.element.toggleClass(this._classes(W),k),this},_on:function(d,w,I){var k,R=this;typeof d!="boolean"&&(I=w,w=d,d=!1),I?(w=k=g(w),this.bindings=this.bindings.add(w)):(I=w,w=this.element,k=this.widget()),g.each(I,function(W,se){function oe(){if(!(!d&&(R.options.disabled===!0||g(this).hasClass("ui-state-disabled"))))return(typeof se=="string"?R[se]:se).apply(R,arguments)}typeof se!="string"&&(oe.guid=se.guid=se.guid||oe.guid||g.guid++);var ue=W.match(/^([\w:-]*)\s*(.*)$/),we=ue[1]+R.eventNamespace,Te=ue[2];Te?k.on(we,Te,oe):w.on(we,oe)})},_off:function(d,w){w=(w||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,d.off(w),this.bindings=g(this.bindings.not(d).get()),this.focusable=g(this.focusable.not(d).get()),this.hoverable=g(this.hoverable.not(d).get())},_delay:function(d,w){function I(){return(typeof d=="string"?k[d]:d).apply(k,arguments)}var k=this;return setTimeout(I,w||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d),this._on(d,{mouseenter:function(w){this._addClass(g(w.currentTarget),null,"ui-state-hover")},mouseleave:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d),this._on(d,{focusin:function(w){this._addClass(g(w.currentTarget),null,"ui-state-focus")},focusout:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-focus")}})},_trigger:function(d,w,I){var k,R,W=this.options[d];if(I=I||{},w=g.Event(w),w.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase(),w.target=this.element[0],R=w.originalEvent,R)for(k in R)k in w||(w[k]=R[k]);return this.element.trigger(w,I),!(typeof W=="function"&&W.apply(this.element[0],[w].concat(I))===!1||w.isDefaultPrevented())}},g.each({show:"fadeIn",hide:"fadeOut"},function(d,w){g.Widget.prototype["_"+d]=function(I,k,R){typeof k=="string"&&(k={effect:k});var W,se=k?k===!0||typeof k=="number"?w:k.effect||w:d;k=k||{},typeof k=="number"?k={duration:k}:k===!0&&(k={}),W=!g.isEmptyObject(k),k.complete=R,k.delay&&I.delay(k.delay),W&&g.effects&&g.effects.effect[se]?I[d](k):se!==d&&I[se]?I[se](k.duration,k.easing,R):I.queue(function(oe){g(this)[d](),R&&R.call(I[0]),oe()})}}),g.widget;/*!
 * jQuery UI Position 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */(function(){var d,w=Math.max,I=Math.abs,k=/left|center|right/,R=/top|center|bottom/,W=/[\+\-]\d+(\.[\d]+)?%?/,se=/^\w+/,oe=/%$/,ue=g.fn.position;function we(me,ke,qe){return[parseFloat(me[0])*(oe.test(me[0])?ke/100:1),parseFloat(me[1])*(oe.test(me[1])?qe/100:1)]}function Te(me,ke){return parseInt(g.css(me,ke),10)||0}function Ve(me){return me!=null&&me===me.window}function De(me){var ke=me[0];return ke.nodeType===9?{width:me.width(),height:me.height(),offset:{top:0,left:0}}:Ve(ke)?{width:me.width(),height:me.height(),offset:{top:me.scrollTop(),left:me.scrollLeft()}}:ke.preventDefault?{width:0,height:0,offset:{top:ke.pageY,left:ke.pageX}}:{width:me.outerWidth(),height:me.outerHeight(),offset:me.offset()}}g.position={scrollbarWidth:function(){if(d!==void 0)return d;var me,ke,qe=g("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),lt=qe.children()[0];return g("body").append(qe),me=lt.offsetWidth,qe.css("overflow","scroll"),ke=lt.offsetWidth,me===ke&&(ke=qe[0].clientWidth),qe.remove(),d=me-ke},getScrollInfo:function(me){var ke=me.isWindow||me.isDocument?"":me.element.css("overflow-x"),qe=me.isWindow||me.isDocument?"":me.element.css("overflow-y"),lt=ke==="scroll"||ke==="auto"&&me.width<me.element[0].scrollWidth,pt=qe==="scroll"||qe==="auto"&&me.height<me.element[0].scrollHeight;return{width:pt?g.position.scrollbarWidth():0,height:lt?g.position.scrollbarWidth():0}},getWithinInfo:function(me){var ke=g(me||window),qe=Ve(ke[0]),lt=!!ke[0]&&ke[0].nodeType===9,pt=!qe&&!lt;return{element:ke,isWindow:qe,isDocument:lt,offset:pt?g(me).offset():{left:0,top:0},scrollLeft:ke.scrollLeft(),scrollTop:ke.scrollTop(),width:ke.outerWidth(),height:ke.outerHeight()}}},g.fn.position=function(me){if(!me||!me.of)return ue.apply(this,arguments);me=g.extend({},me);var ke,qe,lt,pt,Ft,zt,Nt=typeof me.of=="string"?g(document).find(me.of):g(me.of),Mt=g.position.getWithinInfo(me.within),$t=g.position.getScrollInfo(Mt),ri=(me.collision||"flip").split(" "),ci={};return zt=De(Nt),Nt[0].preventDefault&&(me.at="left top"),qe=zt.width,lt=zt.height,pt=zt.offset,Ft=g.extend({},pt),g.each(["my","at"],function(){var bt=(me[this]||"").split(" "),di,ii;bt.length===1&&(bt=k.test(bt[0])?bt.concat(["center"]):R.test(bt[0])?["center"].concat(bt):["center","center"]),bt[0]=k.test(bt[0])?bt[0]:"center",bt[1]=R.test(bt[1])?bt[1]:"center",di=W.exec(bt[0]),ii=W.exec(bt[1]),ci[this]=[di?di[0]:0,ii?ii[0]:0],me[this]=[se.exec(bt[0])[0],se.exec(bt[1])[0]]}),ri.length===1&&(ri[1]=ri[0]),me.at[0]==="right"?Ft.left+=qe:me.at[0]==="center"&&(Ft.left+=qe/2),me.at[1]==="bottom"?Ft.top+=lt:me.at[1]==="center"&&(Ft.top+=lt/2),ke=we(ci.at,qe,lt),Ft.left+=ke[0],Ft.top+=ke[1],this.each(function(){var bt,di,ii=g(this),Hi=ii.outerWidth(),Vi=ii.outerHeight(),Ot=Te(this,"marginLeft"),_i=Te(this,"marginTop"),Ti=Hi+Ot+Te(this,"marginRight")+$t.width,Wi=Vi+_i+Te(this,"marginBottom")+$t.height,Zt=g.extend({},Ft),mi=we(ci.my,ii.outerWidth(),ii.outerHeight());me.my[0]==="right"?Zt.left-=Hi:me.my[0]==="center"&&(Zt.left-=Hi/2),me.my[1]==="bottom"?Zt.top-=Vi:me.my[1]==="center"&&(Zt.top-=Vi/2),Zt.left+=mi[0],Zt.top+=mi[1],bt={marginLeft:Ot,marginTop:_i},g.each(["left","top"],function(wi,$i){g.ui.position[ri[wi]]&&g.ui.position[ri[wi]][$i](Zt,{targetWidth:qe,targetHeight:lt,elemWidth:Hi,elemHeight:Vi,collisionPosition:bt,collisionWidth:Ti,collisionHeight:Wi,offset:[ke[0]+mi[0],ke[1]+mi[1]],my:me.my,at:me.at,within:Mt,elem:ii})}),me.using&&(di=function(wi){var $i=pt.left-Zt.left,tr=$i+qe-Hi,Ar=pt.top-Zt.top,Tr=Ar+lt-Vi,ji={target:{element:Nt,left:pt.left,top:pt.top,width:qe,height:lt},element:{element:ii,left:Zt.left,top:Zt.top,width:Hi,height:Vi},horizontal:tr<0?"left":$i>0?"right":"center",vertical:Tr<0?"top":Ar>0?"bottom":"middle"};qe<Hi&&I($i+tr)<qe&&(ji.horizontal="center"),lt<Vi&&I(Ar+Tr)<lt&&(ji.vertical="middle"),w(I($i),I(tr))>w(I(Ar),I(Tr))?ji.important="horizontal":ji.important="vertical",me.using.call(this,wi,ji)}),ii.offset(g.extend(Zt,{using:di}))})},g.ui.position={fit:{left:function(me,ke){var qe=ke.within,lt=qe.isWindow?qe.scrollLeft:qe.offset.left,pt=qe.width,Ft=me.left-ke.collisionPosition.marginLeft,zt=lt-Ft,Nt=Ft+ke.collisionWidth-pt-lt,Mt;ke.collisionWidth>pt?zt>0&&Nt<=0?(Mt=me.left+zt+ke.collisionWidth-pt-lt,me.left+=zt-Mt):Nt>0&&zt<=0?me.left=lt:zt>Nt?me.left=lt+pt-ke.collisionWidth:me.left=lt:zt>0?me.left+=zt:Nt>0?me.left-=Nt:me.left=w(me.left-Ft,me.left)},top:function(me,ke){var qe=ke.within,lt=qe.isWindow?qe.scrollTop:qe.offset.top,pt=ke.within.height,Ft=me.top-ke.collisionPosition.marginTop,zt=lt-Ft,Nt=Ft+ke.collisionHeight-pt-lt,Mt;ke.collisionHeight>pt?zt>0&&Nt<=0?(Mt=me.top+zt+ke.collisionHeight-pt-lt,me.top+=zt-Mt):Nt>0&&zt<=0?me.top=lt:zt>Nt?me.top=lt+pt-ke.collisionHeight:me.top=lt:zt>0?me.top+=zt:Nt>0?me.top-=Nt:me.top=w(me.top-Ft,me.top)}},flip:{left:function(me,ke){var qe=ke.within,lt=qe.offset.left+qe.scrollLeft,pt=qe.width,Ft=qe.isWindow?qe.scrollLeft:qe.offset.left,zt=me.left-ke.collisionPosition.marginLeft,Nt=zt-Ft,Mt=zt+ke.collisionWidth-pt-Ft,$t=ke.my[0]==="left"?-ke.elemWidth:ke.my[0]==="right"?ke.elemWidth:0,ri=ke.at[0]==="left"?ke.targetWidth:ke.at[0]==="right"?-ke.targetWidth:0,ci=-2*ke.offset[0],bt,di;Nt<0?(bt=me.left+$t+ri+ci+ke.collisionWidth-pt-lt,(bt<0||bt<I(Nt))&&(me.left+=$t+ri+ci)):Mt>0&&(di=me.left-ke.collisionPosition.marginLeft+$t+ri+ci-Ft,(di>0||I(di)<Mt)&&(me.left+=$t+ri+ci))},top:function(me,ke){var qe=ke.within,lt=qe.offset.top+qe.scrollTop,pt=qe.height,Ft=qe.isWindow?qe.scrollTop:qe.offset.top,zt=me.top-ke.collisionPosition.marginTop,Nt=zt-Ft,Mt=zt+ke.collisionHeight-pt-Ft,$t=ke.my[1]==="top",ri=$t?-ke.elemHeight:ke.my[1]==="bottom"?ke.elemHeight:0,ci=ke.at[1]==="top"?ke.targetHeight:ke.at[1]==="bottom"?-ke.targetHeight:0,bt=-2*ke.offset[1],di,ii;Nt<0?(ii=me.top+ri+ci+bt+ke.collisionHeight-pt-lt,(ii<0||ii<I(Nt))&&(me.top+=ri+ci+bt)):Mt>0&&(di=me.top-ke.collisionPosition.marginTop+ri+ci+bt-Ft,(di>0||I(di)<Mt)&&(me.top+=ri+ci+bt))}},flipfit:{left:function(){g.ui.position.flip.left.apply(this,arguments),g.ui.position.fit.left.apply(this,arguments)},top:function(){g.ui.position.flip.top.apply(this,arguments),g.ui.position.fit.top.apply(this,arguments)}}}})(),g.ui.position;/*!
 * jQuery UI :data 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{data:g.expr.createPseudo?g.expr.createPseudo(function(d){return function(w){return!!g.data(w,d)}}):function(d,w,I){return!!g.data(d,I[3])}});/*!
 * jQuery UI Disable Selection 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({disableSelection:function(){var d="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(d+".ui-disableSelection",function(w){w.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var K=g;/*!
 * jQuery Color Animations v2.2.0
 * https://github.com/jquery/jquery-color
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun May 10 09:02:36 2020 +0200
 */var Y="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",re={},D=re.toString,ne=/^([\-+])=\s*(\d+\.?\d*)/,Ae=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1]*2.55,d[2]*2.55,d[3]*2.55,d[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),d[4]?(parseInt(d[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16),d[4]?(parseInt(d[4]+d[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],fe=K.Color=function(d,w,I,k){return new K.Color.fn.parse(d,w,I,k)},ge={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},Be={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},Ue=fe.support={},ze=K("<p>")[0],Re,$e=K.each;ze.style.cssText="background-color:rgba(1,1,1,.5)",Ue.rgba=ze.style.backgroundColor.indexOf("rgba")>-1,$e(ge,function(d,w){w.cache="_"+d,w.props.alpha={idx:3,type:"percent",def:1}}),K.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,w){re["[object "+w+"]"]=w.toLowerCase()});function We(d){return d==null?d+"":typeof d=="object"?re[D.call(d)]||"object":typeof d}function ut(d,w,I){var k=Be[w.type]||{};return d==null?I||!w.def?null:w.def:(d=k.floor?~~d:parseFloat(d),isNaN(d)?w.def:k.mod?(d+k.mod)%k.mod:Math.min(k.max,Math.max(0,d)))}function et(d){var w=fe(),I=w._rgba=[];return d=d.toLowerCase(),$e(Ae,function(k,R){var W,se=R.re.exec(d),oe=se&&R.parse(se),ue=R.space||"rgba";if(oe)return W=w[ue](oe),w[ge[ue].cache]=W[ge[ue].cache],I=w._rgba=W._rgba,!1}),I.length?(I.join()==="0,0,0,0"&&K.extend(I,Re.transparent),w):Re[d]}fe.fn=K.extend(fe.prototype,{parse:function(d,w,I,k){if(d===void 0)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=K(d).css(w),w=void 0);var R=this,W=We(d),se=this._rgba=[];if(w!==void 0&&(d=[d,w,I,k],W="array"),W==="string")return this.parse(et(d)||Re._default);if(W==="array")return $e(ge.rgba.props,function(oe,ue){se[ue.idx]=ut(d[ue.idx],ue)}),this;if(W==="object")return d instanceof fe?$e(ge,function(oe,ue){d[ue.cache]&&(R[ue.cache]=d[ue.cache].slice())}):$e(ge,function(oe,ue){var we=ue.cache;$e(ue.props,function(Te,Ve){if(!R[we]&&ue.to){if(Te==="alpha"||d[Te]==null)return;R[we]=ue.to(R._rgba)}R[we][Ve.idx]=ut(d[Te],Ve,!0)}),R[we]&&K.inArray(null,R[we].slice(0,3))<0&&(R[we][3]==null&&(R[we][3]=1),ue.from&&(R._rgba=ue.from(R[we])))}),this},is:function(d){var w=fe(d),I=!0,k=this;return $e(ge,function(R,W){var se,oe=w[W.cache];return oe&&(se=k[W.cache]||W.to&&W.to(k._rgba)||[],$e(W.props,function(ue,we){if(oe[we.idx]!=null)return I=oe[we.idx]===se[we.idx],I})),I}),I},_space:function(){var d=[],w=this;return $e(ge,function(I,k){w[k.cache]&&d.push(I)}),d.pop()},transition:function(d,w){var I=fe(d),k=I._space(),R=ge[k],W=this.alpha()===0?fe("transparent"):this,se=W[R.cache]||R.to(W._rgba),oe=se.slice();return I=I[R.cache],$e(R.props,function(ue,we){var Te=we.idx,Ve=se[Te],De=I[Te],me=Be[we.type]||{};De!==null&&(Ve===null?oe[Te]=De:(me.mod&&(De-Ve>me.mod/2?Ve+=me.mod:Ve-De>me.mod/2&&(Ve-=me.mod)),oe[Te]=ut((De-Ve)*w+Ve,we)))}),this[k](oe)},blend:function(d){if(this._rgba[3]===1)return this;var w=this._rgba.slice(),I=w.pop(),k=fe(d)._rgba;return fe(K.map(w,function(R,W){return(1-I)*k[W]+I*R}))},toRgbaString:function(){var d="rgba(",w=K.map(this._rgba,function(I,k){return I??(k>2?1:0)});return w[3]===1&&(w.pop(),d="rgb("),d+w.join()+")"},toHslaString:function(){var d="hsla(",w=K.map(this.hsla(),function(I,k){return I==null&&(I=k>2?1:0),k&&k<3&&(I=Math.round(I*100)+"%"),I});return w[3]===1&&(w.pop(),d="hsl("),d+w.join()+")"},toHexString:function(d){var w=this._rgba.slice(),I=w.pop();return d&&w.push(~~(I*255)),"#"+K.map(w,function(k){return k=(k||0).toString(16),k.length===1?"0"+k:k}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),fe.fn.parse.prototype=fe.fn;function At(d,w,I){return I=(I+1)%1,I*6<1?d+(w-d)*I*6:I*2<1?w:I*3<2?d+(w-d)*(2/3-I)*6:d}ge.hsla.to=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/255,I=d[1]/255,k=d[2]/255,R=d[3],W=Math.max(w,I,k),se=Math.min(w,I,k),oe=W-se,ue=W+se,we=ue*.5,Te,Ve;return se===W?Te=0:w===W?Te=60*(I-k)/oe+360:I===W?Te=60*(k-w)/oe+120:Te=60*(w-I)/oe+240,oe===0?Ve=0:we<=.5?Ve=oe/ue:Ve=oe/(2-ue),[Math.round(Te)%360,Ve,we,R??1]},ge.hsla.from=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/360,I=d[1],k=d[2],R=d[3],W=k<=.5?k*(1+I):k+I-k*I,se=2*k-W;return[Math.round(At(se,W,w+1/3)*255),Math.round(At(se,W,w)*255),Math.round(At(se,W,w-1/3)*255),R]},$e(ge,function(d,w){var I=w.props,k=w.cache,R=w.to,W=w.from;fe.fn[d]=function(se){if(R&&!this[k]&&(this[k]=R(this._rgba)),se===void 0)return this[k].slice();var oe,ue=We(se),we=ue==="array"||ue==="object"?se:arguments,Te=this[k].slice();return $e(I,function(Ve,De){var me=we[ue==="object"?Ve:De.idx];me==null&&(me=Te[De.idx]),Te[De.idx]=ut(me,De)}),W?(oe=fe(W(Te)),oe[k]=Te,oe):fe(Te)},$e(I,function(se,oe){fe.fn[se]||(fe.fn[se]=function(ue){var we,Te,Ve,De,me=We(ue);return se==="alpha"?De=this._hsla?"hsla":"rgba":De=d,we=this[De](),Te=we[oe.idx],me==="undefined"?Te:(me==="function"&&(ue=ue.call(this,Te),me=We(ue)),ue==null&&oe.empty?this:(me==="string"&&(Ve=ne.exec(ue),Ve&&(ue=Te+parseFloat(Ve[2])*(Ve[1]==="+"?1:-1))),we[oe.idx]=ue,this[De](we)))})})}),fe.hook=function(d){var w=d.split(" ");$e(w,function(I,k){K.cssHooks[k]={set:function(R,W){var se,oe,ue="";if(W!=="transparent"&&(We(W)!=="string"||(se=et(W)))){if(W=fe(se||W),!Ue.rgba&&W._rgba[3]!==1){for(oe=k==="backgroundColor"?R.parentNode:R;(ue===""||ue==="transparent")&&oe&&oe.style;)try{ue=K.css(oe,"backgroundColor"),oe=oe.parentNode}catch{}W=W.blend(ue&&ue!=="transparent"?ue:"_default")}W=W.toRgbaString()}try{R.style[k]=W}catch{}}},K.fx.step[k]=function(R){R.colorInit||(R.start=fe(R.elem,k),R.end=fe(R.end),R.colorInit=!0),K.cssHooks[k].set(R.elem,R.start.transition(R.end,R.pos))}})},fe.hook(Y),K.cssHooks.borderColor={expand:function(d){var w={};return $e(["Top","Right","Bottom","Left"],function(I,k){w["border"+k+"Color"]=d}),w}},Re=K.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};/*!
 * jQuery UI Effects 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var nt="ui-effects-",ft="ui-effects-style",Tt="ui-effects-animated";g.effects={effect:{}},function(){var d=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};g.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(W,se){g.fx.step[se]=function(oe){(oe.end!=="none"&&!oe.setAttr||oe.pos===1&&!oe.setAttr)&&(K.style(oe.elem,se,oe.end),oe.setAttr=!0)}});function I(W){return W.replace(/-([\da-z])/gi,function(se,oe){return oe.toUpperCase()})}function k(W){var se,oe,ue=W.ownerDocument.defaultView?W.ownerDocument.defaultView.getComputedStyle(W,null):W.currentStyle,we={};if(ue&&ue.length&&ue[0]&&ue[ue[0]])for(oe=ue.length;oe--;)se=ue[oe],typeof ue[se]=="string"&&(we[I(se)]=ue[se]);else for(se in ue)typeof ue[se]=="string"&&(we[se]=ue[se]);return we}function R(W,se){var oe={},ue,we;for(ue in se)we=se[ue],W[ue]!==we&&(w[ue]||(g.fx.step[ue]||!isNaN(parseFloat(we)))&&(oe[ue]=we));return oe}g.fn.addBack||(g.fn.addBack=function(W){return this.add(W==null?this.prevObject:this.prevObject.filter(W))}),g.effects.animateClass=function(W,se,oe,ue){var we=g.speed(se,oe,ue);return this.queue(function(){var Te=g(this),Ve=Te.attr("class")||"",De,me=we.children?Te.find("*").addBack():Te;me=me.map(function(){var ke=g(this);return{el:ke,start:k(this)}}),De=function(){g.each(d,function(ke,qe){W[qe]&&Te[qe+"Class"](W[qe])})},De(),me=me.map(function(){return this.end=k(this.el[0]),this.diff=R(this.start,this.end),this}),Te.attr("class",Ve),me=me.map(function(){var ke=this,qe=g.Deferred(),lt=g.extend({},we,{queue:!1,complete:function(){qe.resolve(ke)}});return this.el.animate(this.diff,lt),qe.promise()}),g.when.apply(g,me.get()).done(function(){De(),g.each(arguments,function(){var ke=this.el;g.each(this.diff,function(qe){ke.css(qe,"")})}),we.complete.call(Te[0])})})},g.fn.extend({addClass:function(W){return function(se,oe,ue,we){return oe?g.effects.animateClass.call(this,{add:se},oe,ue,we):W.apply(this,arguments)}}(g.fn.addClass),removeClass:function(W){return function(se,oe,ue,we){return arguments.length>1?g.effects.animateClass.call(this,{remove:se},oe,ue,we):W.apply(this,arguments)}}(g.fn.removeClass),toggleClass:function(W){return function(se,oe,ue,we,Te){return typeof oe=="boolean"||oe===void 0?ue?g.effects.animateClass.call(this,oe?{add:se}:{remove:se},ue,we,Te):W.apply(this,arguments):g.effects.animateClass.call(this,{toggle:se},oe,ue,we)}}(g.fn.toggleClass),switchClass:function(W,se,oe,ue,we){return g.effects.animateClass.call(this,{add:se,remove:W},oe,ue,we)}})}(),function(){g.expr&&g.expr.pseudos&&g.expr.pseudos.animated&&(g.expr.pseudos.animated=function(k){return function(R){return!!g(R).data(Tt)||k(R)}}(g.expr.pseudos.animated)),g.uiBackCompat!==!1&&g.extend(g.effects,{save:function(k,R){for(var W=0,se=R.length;W<se;W++)R[W]!==null&&k.data(nt+R[W],k[0].style[R[W]])},restore:function(k,R){for(var W,se=0,oe=R.length;se<oe;se++)R[se]!==null&&(W=k.data(nt+R[se]),k.css(R[se],W))},setMode:function(k,R){return R==="toggle"&&(R=k.is(":hidden")?"show":"hide"),R},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper"))return k.parent();var R={width:k.outerWidth(!0),height:k.outerHeight(!0),float:k.css("float")},W=g("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),se={width:k.width(),height:k.height()},oe=document.activeElement;try{oe.id}catch{oe=document.body}return k.wrap(W),(k[0]===oe||g.contains(k[0],oe))&&g(oe).trigger("focus"),W=k.parent(),k.css("position")==="static"?(W.css({position:"relative"}),k.css({position:"relative"})):(g.extend(R,{position:k.css("position"),zIndex:k.css("z-index")}),g.each(["top","left","bottom","right"],function(ue,we){R[we]=k.css(we),isNaN(parseInt(R[we],10))&&(R[we]="auto")}),k.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),k.css(se),W.css(R).show()},removeWrapper:function(k){var R=document.activeElement;return k.parent().is(".ui-effects-wrapper")&&(k.parent().replaceWith(k),(k[0]===R||g.contains(k[0],R))&&g(R).trigger("focus")),k}}),g.extend(g.effects,{version:"1.13.2",define:function(k,R,W){return W||(W=R,R="effect"),g.effects.effect[k]=W,g.effects.effect[k].mode=R,W},scaledDimensions:function(k,R,W){if(R===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var se=W!=="horizontal"?(R||100)/100:1,oe=W!=="vertical"?(R||100)/100:1;return{height:k.height()*oe,width:k.width()*se,outerHeight:k.outerHeight()*oe,outerWidth:k.outerWidth()*se}},clipToBox:function(k){return{width:k.clip.right-k.clip.left,height:k.clip.bottom-k.clip.top,left:k.clip.left,top:k.clip.top}},unshift:function(k,R,W){var se=k.queue();R>1&&se.splice.apply(se,[1,0].concat(se.splice(R,W))),k.dequeue()},saveStyle:function(k){k.data(ft,k[0].style.cssText)},restoreStyle:function(k){k[0].style.cssText=k.data(ft)||"",k.removeData(ft)},mode:function(k,R){var W=k.is(":hidden");return R==="toggle"&&(R=W?"show":"hide"),(W?R==="hide":R==="show")&&(R="none"),R},getBaseline:function(k,R){var W,se;switch(k[0]){case"top":W=0;break;case"middle":W=.5;break;case"bottom":W=1;break;default:W=k[0]/R.height}switch(k[1]){case"left":se=0;break;case"center":se=.5;break;case"right":se=1;break;default:se=k[1]/R.width}return{x:se,y:W}},createPlaceholder:function(k){var R,W=k.css("position"),se=k.position();return k.css({marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()),/^(static|relative)/.test(W)&&(W="absolute",R=g("<"+k[0].nodeName+">").insertAfter(k).css({display:/^(inline|ruby)/.test(k.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight"),float:k.css("float")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()).addClass("ui-effects-placeholder"),k.data(nt+"placeholder",R)),k.css({position:W,left:se.left,top:se.top}),R},removePlaceholder:function(k){var R=nt+"placeholder",W=k.data(R);W&&(W.remove(),k.removeData(R))},cleanUp:function(k){g.effects.restoreStyle(k),g.effects.removePlaceholder(k)},setTransition:function(k,R,W,se){return se=se||{},g.each(R,function(oe,ue){var we=k.cssUnit(ue);we[0]>0&&(se[ue]=we[0]*W+we[1])}),se}});function d(k,R,W,se){return g.isPlainObject(k)&&(R=k,k=k.effect),k={effect:k},R==null&&(R={}),typeof R=="function"&&(se=R,W=null,R={}),(typeof R=="number"||g.fx.speeds[R])&&(se=W,W=R,R={}),typeof W=="function"&&(se=W,W=null),R&&g.extend(k,R),W=W||R.duration,k.duration=g.fx.off?0:typeof W=="number"?W:W in g.fx.speeds?g.fx.speeds[W]:g.fx.speeds._default,k.complete=se||R.complete,k}function w(k){return!!(!k||typeof k=="number"||g.fx.speeds[k]||typeof k=="string"&&!g.effects.effect[k]||typeof k=="function"||typeof k=="object"&&!k.effect)}g.fn.extend({effect:function(){var k=d.apply(this,arguments),R=g.effects.effect[k.effect],W=R.mode,se=k.queue,oe=se||"fx",ue=k.complete,we=k.mode,Te=[],Ve=function(me){var ke=g(this),qe=g.effects.mode(ke,we)||W;ke.data(Tt,!0),Te.push(qe),W&&(qe==="show"||qe===W&&qe==="hide")&&ke.show(),(!W||qe!=="none")&&g.effects.saveStyle(ke),typeof me=="function"&&me()};if(g.fx.off||!R)return we?this[we](k.duration,ue):this.each(function(){ue&&ue.call(this)});function De(me){var ke=g(this);function qe(){ke.removeData(Tt),g.effects.cleanUp(ke),k.mode==="hide"&&ke.hide(),lt()}function lt(){typeof ue=="function"&&ue.call(ke[0]),typeof me=="function"&&me()}k.mode=Te.shift(),g.uiBackCompat!==!1&&!W?(ke.is(":hidden")?we==="hide":we==="show")?(ke[we](),lt()):R.call(ke[0],k,lt):k.mode==="none"?(ke[we](),lt()):R.call(ke[0],k,qe)}return se===!1?this.each(Ve).each(De):this.queue(oe,Ve).queue(oe,De)},show:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="show",this.effect.call(this,W)}}(g.fn.show),hide:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="hide",this.effect.call(this,W)}}(g.fn.hide),toggle:function(k){return function(R){if(w(R)||typeof R=="boolean")return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="toggle",this.effect.call(this,W)}}(g.fn.toggle),cssUnit:function(k){var R=this.css(k),W=[];return g.each(["em","px","%","pt"],function(se,oe){R.indexOf(oe)>0&&(W=[parseFloat(R),oe])}),W},cssClip:function(k){return k?this.css("clip","rect("+k.top+"px "+k.right+"px "+k.bottom+"px "+k.left+"px)"):I(this.css("clip"),this)},transfer:function(k,R){var W=g(this),se=g(k.to),oe=se.css("position")==="fixed",ue=g("body"),we=oe?ue.scrollTop():0,Te=oe?ue.scrollLeft():0,Ve=se.offset(),De={top:Ve.top-we,left:Ve.left-Te,height:se.innerHeight(),width:se.innerWidth()},me=W.offset(),ke=g("<div class='ui-effects-transfer'></div>");ke.appendTo("body").addClass(k.className).css({top:me.top-we,left:me.left-Te,height:W.innerHeight(),width:W.innerWidth(),position:oe?"fixed":"absolute"}).animate(De,k.duration,k.easing,function(){ke.remove(),typeof R=="function"&&R()})}});function I(k,R){var W=R.outerWidth(),se=R.outerHeight(),oe=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,ue=oe.exec(k)||["",0,W,se,0];return{top:parseFloat(ue[1])||0,right:ue[2]==="auto"?W:parseFloat(ue[2]),bottom:ue[3]==="auto"?se:parseFloat(ue[3]),left:parseFloat(ue[4])||0}}g.fx.step.clip=function(k){k.clipInit||(k.start=g(k.elem).cssClip(),typeof k.end=="string"&&(k.end=I(k.end,k.elem)),k.clipInit=!0),g(k.elem).cssClip({top:k.pos*(k.end.top-k.start.top)+k.start.top,right:k.pos*(k.end.right-k.start.right)+k.start.right,bottom:k.pos*(k.end.bottom-k.start.bottom)+k.start.bottom,left:k.pos*(k.end.left-k.start.left)+k.start.left})}}(),function(){var d={};g.each(["Quad","Cubic","Quart","Quint","Expo"],function(w,I){d[I]=function(k){return Math.pow(k,w+2)}}),g.extend(d,{Sine:function(w){return 1-Math.cos(w*Math.PI/2)},Circ:function(w){return 1-Math.sqrt(1-w*w)},Elastic:function(w){return w===0||w===1?w:-Math.pow(2,8*(w-1))*Math.sin(((w-1)*80-7.5)*Math.PI/15)},Back:function(w){return w*w*(3*w-2)},Bounce:function(w){for(var I,k=4;w<((I=Math.pow(2,--k))-1)/11;);return 1/Math.pow(4,3-k)-7.5625*Math.pow((I*3-2)/22-w,2)}}),g.each(d,function(w,I){g.easing["easeIn"+w]=I,g.easing["easeOut"+w]=function(k){return 1-I(1-k)},g.easing["easeInOut"+w]=function(k){return k<.5?I(k*2)/2:1-I(k*-2+2)/2}})}(),g.effects;/*!
 * jQuery UI Effects Blind 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("blind","hide",function(d,w){var I={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},k=g(this),R=d.direction||"up",W=k.cssClip(),se={clip:g.extend({},W)},oe=g.effects.createPlaceholder(k);se.clip[I[R][0]]=se.clip[I[R][1]],d.mode==="show"&&(k.cssClip(se.clip),oe&&oe.css(g.effects.clipToBox(se)),se.clip=W),oe&&oe.animate(g.effects.clipToBox(se),d.duration,d.easing),k.animate(se,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Bounce 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("bounce",function(d,w){var I,k,R,W=g(this),se=d.mode,oe=se==="hide",ue=se==="show",we=d.direction||"up",Te=d.distance,Ve=d.times||5,De=Ve*2+(ue||oe?1:0),me=d.duration/De,ke=d.easing,qe=we==="up"||we==="down"?"top":"left",lt=we==="up"||we==="left",pt=0,Ft=W.queue().length;for(g.effects.createPlaceholder(W),R=W.css(qe),Te||(Te=W[qe==="top"?"outerHeight":"outerWidth"]()/3),ue&&(k={opacity:1},k[qe]=R,W.css("opacity",0).css(qe,lt?-Te*2:Te*2).animate(k,me,ke)),oe&&(Te=Te/Math.pow(2,Ve-1)),k={},k[qe]=R;pt<Ve;pt++)I={},I[qe]=(lt?"-=":"+=")+Te,W.animate(I,me,ke).animate(k,me,ke),Te=oe?Te*2:Te/2;oe&&(I={opacity:0},I[qe]=(lt?"-=":"+=")+Te,W.animate(I,me,ke)),W.queue(w),g.effects.unshift(W,Ft,De+1)});/*!
 * jQuery UI Effects Clip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("clip","hide",function(d,w){var I,k={},R=g(this),W=d.direction||"vertical",se=W==="both",oe=se||W==="horizontal",ue=se||W==="vertical";I=R.cssClip(),k.clip={top:ue?(I.bottom-I.top)/2:I.top,right:oe?(I.right-I.left)/2:I.right,bottom:ue?(I.bottom-I.top)/2:I.bottom,left:oe?(I.right-I.left)/2:I.left},g.effects.createPlaceholder(R),d.mode==="show"&&(R.cssClip(k.clip),k.clip=I),R.animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Drop 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("drop","hide",function(d,w){var I,k=g(this),R=d.mode,W=R==="show",se=d.direction||"left",oe=se==="up"||se==="down"?"top":"left",ue=se==="up"||se==="left"?"-=":"+=",we=ue==="+="?"-=":"+=",Te={opacity:0};g.effects.createPlaceholder(k),I=d.distance||k[oe==="top"?"outerHeight":"outerWidth"](!0)/2,Te[oe]=ue+I,W&&(k.css(Te),Te[oe]=we+I,Te.opacity=1),k.animate(Te,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Explode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("explode","hide",function(d,w){var I,k,R,W,se,oe,ue=d.pieces?Math.round(Math.sqrt(d.pieces)):3,we=ue,Te=g(this),Ve=d.mode,De=Ve==="show",me=Te.show().css("visibility","hidden").offset(),ke=Math.ceil(Te.outerWidth()/we),qe=Math.ceil(Te.outerHeight()/ue),lt=[];function pt(){lt.push(this),lt.length===ue*we&&Ft()}for(I=0;I<ue;I++)for(W=me.top+I*qe,oe=I-(ue-1)/2,k=0;k<we;k++)R=me.left+k*ke,se=k-(we-1)/2,Te.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-k*ke,top:-I*qe}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:ke,height:qe,left:R+(De?se*ke:0),top:W+(De?oe*qe:0),opacity:De?0:1}).animate({left:R+(De?0:se*ke),top:W+(De?0:oe*qe),opacity:De?1:0},d.duration||500,d.easing,pt);function Ft(){Te.css({visibility:"visible"}),g(lt).remove(),w()}});/*!
 * jQuery UI Effects Fade 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fade","toggle",function(d,w){var I=d.mode==="show";g(this).css("opacity",I?0:1).animate({opacity:I?1:0},{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Fold 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fold","hide",function(d,w){var I=g(this),k=d.mode,R=k==="show",W=k==="hide",se=d.size||15,oe=/([0-9]+)%/.exec(se),ue=!!d.horizFirst,we=ue?["right","bottom"]:["bottom","right"],Te=d.duration/2,Ve=g.effects.createPlaceholder(I),De=I.cssClip(),me={clip:g.extend({},De)},ke={clip:g.extend({},De)},qe=[De[we[0]],De[we[1]]],lt=I.queue().length;oe&&(se=parseInt(oe[1],10)/100*qe[W?0:1]),me.clip[we[0]]=se,ke.clip[we[0]]=se,ke.clip[we[1]]=0,R&&(I.cssClip(ke.clip),Ve&&Ve.css(g.effects.clipToBox(ke)),ke.clip=De),I.queue(function(pt){Ve&&Ve.animate(g.effects.clipToBox(me),Te,d.easing).animate(g.effects.clipToBox(ke),Te,d.easing),pt()}).animate(me,Te,d.easing).animate(ke,Te,d.easing).queue(w),g.effects.unshift(I,lt,4)});/*!
 * jQuery UI Effects Highlight 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("highlight","show",function(d,w){var I=g(this),k={backgroundColor:I.css("backgroundColor")};d.mode==="hide"&&(k.opacity=0),g.effects.saveStyle(I),I.css({backgroundImage:"none",backgroundColor:d.color||"#ffff99"}).animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Size 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("size",function(d,w){var I,k,R,W=g(this),se=["fontSize"],oe=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],ue=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],we=d.mode,Te=we!=="effect",Ve=d.scale||"both",De=d.origin||["middle","center"],me=W.css("position"),ke=W.position(),qe=g.effects.scaledDimensions(W),lt=d.from||qe,pt=d.to||g.effects.scaledDimensions(W,0);g.effects.createPlaceholder(W),we==="show"&&(R=lt,lt=pt,pt=R),k={from:{y:lt.height/qe.height,x:lt.width/qe.width},to:{y:pt.height/qe.height,x:pt.width/qe.width}},(Ve==="box"||Ve==="both")&&(k.from.y!==k.to.y&&(lt=g.effects.setTransition(W,oe,k.from.y,lt),pt=g.effects.setTransition(W,oe,k.to.y,pt)),k.from.x!==k.to.x&&(lt=g.effects.setTransition(W,ue,k.from.x,lt),pt=g.effects.setTransition(W,ue,k.to.x,pt))),(Ve==="content"||Ve==="both")&&k.from.y!==k.to.y&&(lt=g.effects.setTransition(W,se,k.from.y,lt),pt=g.effects.setTransition(W,se,k.to.y,pt)),De&&(I=g.effects.getBaseline(De,qe),lt.top=(qe.outerHeight-lt.outerHeight)*I.y+ke.top,lt.left=(qe.outerWidth-lt.outerWidth)*I.x+ke.left,pt.top=(qe.outerHeight-pt.outerHeight)*I.y+ke.top,pt.left=(qe.outerWidth-pt.outerWidth)*I.x+ke.left),delete lt.outerHeight,delete lt.outerWidth,W.css(lt),(Ve==="content"||Ve==="both")&&(oe=oe.concat(["marginTop","marginBottom"]).concat(se),ue=ue.concat(["marginLeft","marginRight"]),W.find("*[width]").each(function(){var Ft=g(this),zt=g.effects.scaledDimensions(Ft),Nt={height:zt.height*k.from.y,width:zt.width*k.from.x,outerHeight:zt.outerHeight*k.from.y,outerWidth:zt.outerWidth*k.from.x},Mt={height:zt.height*k.to.y,width:zt.width*k.to.x,outerHeight:zt.height*k.to.y,outerWidth:zt.width*k.to.x};k.from.y!==k.to.y&&(Nt=g.effects.setTransition(Ft,oe,k.from.y,Nt),Mt=g.effects.setTransition(Ft,oe,k.to.y,Mt)),k.from.x!==k.to.x&&(Nt=g.effects.setTransition(Ft,ue,k.from.x,Nt),Mt=g.effects.setTransition(Ft,ue,k.to.x,Mt)),Te&&g.effects.saveStyle(Ft),Ft.css(Nt),Ft.animate(Mt,d.duration,d.easing,function(){Te&&g.effects.restoreStyle(Ft)})})),W.animate(pt,{queue:!1,duration:d.duration,easing:d.easing,complete:function(){var Ft=W.offset();pt.opacity===0&&W.css("opacity",lt.opacity),Te||(W.css("position",me==="static"?"relative":me).offset(Ft),g.effects.saveStyle(W)),w()}})});/*!
 * jQuery UI Effects Scale 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("scale",function(d,w){var I=g(this),k=d.mode,R=parseInt(d.percent,10)||(parseInt(d.percent,10)===0||k!=="effect"?0:100),W=g.extend(!0,{from:g.effects.scaledDimensions(I),to:g.effects.scaledDimensions(I,R,d.direction||"both"),origin:d.origin||["middle","center"]},d);d.fade&&(W.from.opacity=1,W.to.opacity=0),g.effects.effect.size.call(this,W,w)});/*!
 * jQuery UI Effects Puff 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("puff","hide",function(d,w){var I=g.extend(!0,{},d,{fade:!0,percent:parseInt(d.percent,10)||150});g.effects.effect.scale.call(this,I,w)});/*!
 * jQuery UI Effects Pulsate 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("pulsate","show",function(d,w){var I=g(this),k=d.mode,R=k==="show",W=k==="hide",se=R||W,oe=(d.times||5)*2+(se?1:0),ue=d.duration/oe,we=0,Te=1,Ve=I.queue().length;for((R||!I.is(":visible"))&&(I.css("opacity",0).show(),we=1);Te<oe;Te++)I.animate({opacity:we},ue,d.easing),we=1-we;I.animate({opacity:we},ue,d.easing),I.queue(w),g.effects.unshift(I,Ve,oe+1)});/*!
 * jQuery UI Effects Shake 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("shake",function(d,w){var I=1,k=g(this),R=d.direction||"left",W=d.distance||20,se=d.times||3,oe=se*2+1,ue=Math.round(d.duration/oe),we=R==="up"||R==="down"?"top":"left",Te=R==="up"||R==="left",Ve={},De={},me={},ke=k.queue().length;for(g.effects.createPlaceholder(k),Ve[we]=(Te?"-=":"+=")+W,De[we]=(Te?"+=":"-=")+W*2,me[we]=(Te?"-=":"+=")+W*2,k.animate(Ve,ue,d.easing);I<se;I++)k.animate(De,ue,d.easing).animate(me,ue,d.easing);k.animate(De,ue,d.easing).animate(Ve,ue/2,d.easing).queue(w),g.effects.unshift(k,ke,oe+1)});/*!
 * jQuery UI Effects Slide 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("slide","show",function(d,w){var I,k,R=g(this),W={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},se=d.mode,oe=d.direction||"left",ue=oe==="up"||oe==="down"?"top":"left",we=oe==="up"||oe==="left",Te=d.distance||R[ue==="top"?"outerHeight":"outerWidth"](!0),Ve={};g.effects.createPlaceholder(R),I=R.cssClip(),k=R.position()[ue],Ve[ue]=(we?-1:1)*Te+k,Ve.clip=R.cssClip(),Ve.clip[W[oe][1]]=Ve.clip[W[oe][0]],se==="show"&&(R.cssClip(Ve.clip),R.css(ue,Ve[ue]),Ve.clip=I,Ve[ue]=k),R.animate(Ve,{queue:!1,duration:d.duration,easing:d.easing,complete:w})}),g.uiBackCompat!==!1&&g.effects.define("transfer",function(d,w){g(this).transfer(d,w)});/*!
 * jQuery UI Focusable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.focusable=function(d,w){var I,k,R,W,se,oe=d.nodeName.toLowerCase();return oe==="area"?(I=d.parentNode,k=I.name,!d.href||!k||I.nodeName.toLowerCase()!=="map"?!1:(R=g("img[usemap='#"+k+"']"),R.length>0&&R.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(oe)?(W=!d.disabled,W&&(se=g(d).closest("fieldset")[0],se&&(W=!se.disabled))):oe==="a"?W=d.href||w:W=w,W&&g(d).is(":visible")&&qt(g(d)))};function qt(d){for(var w=d.css("visibility");w==="inherit";)d=d.parent(),w=d.css("visibility");return w==="visible"}g.extend(g.expr.pseudos,{focusable:function(d){return g.ui.focusable(d,g.attr(d,"tabindex")!=null)}}),g.ui.focusable,g.fn._form=function(){return typeof this[0].form=="string"?this.closest("form"):g(this[0].form)};/*!
 * jQuery UI Form Reset Mixin 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.formResetMixin={_formResetHandler:function(){var d=g(this);setTimeout(function(){var w=d.data("ui-form-reset-instances");g.each(w,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element._form(),!!this.form.length){var d=this.form.data("ui-form-reset-instances")||[];d.length||this.form.on("reset.ui-form-reset",this._formResetHandler),d.push(this),this.form.data("ui-form-reset-instances",d)}},_unbindFormResetHandler:function(){if(this.form.length){var d=this.form.data("ui-form-reset-instances");d.splice(g.inArray(this,d),1),d.length?this.form.data("ui-form-reset-instances",d):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */if(g.expr.pseudos||(g.expr.pseudos=g.expr[":"]),g.uniqueSort||(g.uniqueSort=g.unique),!g.escapeSelector){var Vt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,vt=function(d,w){return w?d==="\0"?"ï¿½":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d};g.escapeSelector=function(d){return(d+"").replace(Vt,vt)}}(!g.fn.even||!g.fn.odd)&&g.fn.extend({even:function(){return this.filter(function(d){return d%2===0})},odd:function(){return this.filter(function(d){return d%2===1})}});/*!
 * jQuery UI Keycode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};/*!
 * jQuery UI Labels 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.labels=function(){var d,w,I,k,R;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(k=this.eq(0).parents("label"),I=this.attr("id"),I&&(d=this.eq(0).parents().last(),R=d.add(d.length?d.siblings():this.siblings()),w="label[for='"+g.escapeSelector(I)+"']",k=k.add(R.find(w).addBack(w))),this.pushStack(k)):this.pushStack([])};/*!
 * jQuery UI Scroll Parent 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.scrollParent=function(d){var w=this.css("position"),I=w==="absolute",k=d?/(auto|scroll|hidden)/:/(auto|scroll)/,R=this.parents().filter(function(){var W=g(this);return I&&W.css("position")==="static"?!1:k.test(W.css("overflow")+W.css("overflow-y")+W.css("overflow-x"))}).eq(0);return w==="fixed"||!R.length?g(this[0].ownerDocument||document):R};/*!
 * jQuery UI Tabbable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{tabbable:function(d){var w=g.attr(d,"tabindex"),I=w!=null;return(!I||w>=0)&&g.ui.focusable(d,I)}});/*!
 * jQuery UI Unique ID 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({uniqueId:function(){var d=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&g(this).removeAttr("id")})}});/*!
 * jQuery UI Accordion 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(d){return d.find("> li > :first-child").add(d.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var d=this.options;this.prevShow=this.prevHide=g(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),!d.collapsible&&(d.active===!1||d.active==null)&&(d.active=0),this._processPanels(),d.active<0&&(d.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():g()}},_createIcons:function(){var d,w,I=this.options.icons;I&&(d=g("<span>"),this._addClass(d,"ui-accordion-header-icon","ui-icon "+I.header),d.prependTo(this.headers),w=this.active.children(".ui-accordion-header-icon"),this._removeClass(w,I.header)._addClass(w,null,I.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var d;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),d=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&d.css("height","")},_setOption:function(d,w){if(d==="active"){this._activate(w);return}d==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(w)),this._super(d,w),d==="collapsible"&&!w&&this.options.active===!1&&this._activate(0),d==="icons"&&(this._destroyIcons(),w&&this._createIcons())},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!d)},_keydown:function(d){if(!(d.altKey||d.ctrlKey)){var w=g.ui.keyCode,I=this.headers.length,k=this.headers.index(d.target),R=!1;switch(d.keyCode){case w.RIGHT:case w.DOWN:R=this.headers[(k+1)%I];break;case w.LEFT:case w.UP:R=this.headers[(k-1+I)%I];break;case w.SPACE:case w.ENTER:this._eventHandler(d);break;case w.HOME:R=this.headers[0];break;case w.END:R=this.headers[I-1];break}R&&(g(d.target).attr("tabIndex",-1),g(R).attr("tabIndex",0),g(R).trigger("focus"),d.preventDefault())}},_panelKeyDown:function(d){d.keyCode===g.ui.keyCode.UP&&d.ctrlKey&&g(d.currentTarget).prev().trigger("focus")},refresh:function(){var d=this.options;this._processPanels(),d.active===!1&&d.collapsible===!0||!this.headers.length?(d.active=!1,this.active=g()):d.active===!1?this._activate(0):this.active.length&&!g.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(d.active=!1,this.active=g()):this._activate(Math.max(0,d.active-1)):d.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var d=this.headers,w=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),w&&(this._off(d.not(this.headers)),this._off(w.not(this.panels)))},_refresh:function(){var d,w=this.options,I=w.heightStyle,k=this.element.parent();this.active=this._findActive(w.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var R=g(this),W=R.uniqueId().attr("id"),se=R.next(),oe=se.uniqueId().attr("id");R.attr("aria-controls",oe),se.attr("aria-labelledby",W)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(w.event),I==="fill"?(d=k.height(),this.element.siblings(":visible").each(function(){var R=g(this),W=R.css("position");W==="absolute"||W==="fixed"||(d-=R.outerHeight(!0))}),this.headers.each(function(){d-=g(this).outerHeight(!0)}),this.headers.next().each(function(){g(this).height(Math.max(0,d-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):I==="auto"&&(d=0,this.headers.next().each(function(){var R=g(this).is(":visible");R||g(this).show(),d=Math.max(d,g(this).css("height","").height()),R||g(this).hide()}).height(d))},_activate:function(d){var w=this._findActive(d)[0];w!==this.active[0]&&(w=w||this.active[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return typeof d=="number"?this.headers.eq(d):g()},_setupEvents:function(d){var w={keydown:"_keydown"};d&&g.each(d.split(" "),function(I,k){w[k]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,w),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(d){var w,I,k=this.options,R=this.active,W=g(d.currentTarget),se=W[0]===R[0],oe=se&&k.collapsible,ue=oe?g():W.next(),we=R.next(),Te={oldHeader:R,oldPanel:we,newHeader:oe?g():W,newPanel:ue};d.preventDefault(),!(se&&!k.collapsible||this._trigger("beforeActivate",d,Te)===!1)&&(k.active=oe?!1:this.headers.index(W),this.active=se?g():W,this._toggle(Te),this._removeClass(R,"ui-accordion-header-active","ui-state-active"),k.icons&&(w=R.children(".ui-accordion-header-icon"),this._removeClass(w,null,k.icons.activeHeader)._addClass(w,null,k.icons.header)),se||(this._removeClass(W,"ui-accordion-header-collapsed")._addClass(W,"ui-accordion-header-active","ui-state-active"),k.icons&&(I=W.children(".ui-accordion-header-icon"),this._removeClass(I,null,k.icons.header)._addClass(I,null,k.icons.activeHeader)),this._addClass(W.next(),"ui-accordion-content-active")))},_toggle:function(d){var w=d.newPanel,I=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=w,this.prevHide=I,this.options.animate?this._animate(w,I,d):(I.hide(),w.show(),this._toggleComplete(d)),I.attr({"aria-hidden":"true"}),I.prev().attr({"aria-selected":"false","aria-expanded":"false"}),w.length&&I.length?I.prev().attr({tabIndex:-1,"aria-expanded":"false"}):w.length&&this.headers.filter(function(){return parseInt(g(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),w.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(d,w,I){var k,R,W,se=this,oe=0,ue=d.css("box-sizing"),we=d.length&&(!w.length||d.index()<w.index()),Te=this.options.animate||{},Ve=we&&Te.down||Te,De=function(){se._toggleComplete(I)};if(typeof Ve=="number"&&(W=Ve),typeof Ve=="string"&&(R=Ve),R=R||Ve.easing||Te.easing,W=W||Ve.duration||Te.duration,!w.length)return d.animate(this.showProps,W,R,De);if(!d.length)return w.animate(this.hideProps,W,R,De);k=d.show().outerHeight(),w.animate(this.hideProps,{duration:W,easing:R,step:function(me,ke){ke.now=Math.round(me)}}),d.hide().animate(this.showProps,{duration:W,easing:R,complete:De,step:function(me,ke){ke.now=Math.round(me),ke.prop!=="height"?ue==="content-box"&&(oe+=ke.now):se.options.heightStyle!=="content"&&(ke.now=Math.round(k-w.outerHeight()-oe),oe=0)}})},_toggleComplete:function(d){var w=d.oldPanel,I=w.prev();this._removeClass(w,"ui-accordion-content-active"),this._removeClass(I,"ui-accordion-header-active")._addClass(I,"ui-accordion-header-collapsed"),w.length&&(w.parent()[0].className=w.parent()[0].className),this._trigger("activate",null,d)}}),g.ui.safeActiveElement=function(d){var w;try{w=d.activeElement}catch{w=d.body}return w||(w=d.body),w.nodeName||(w=d.body),w};/*!
 * jQuery UI Menu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(d){d.preventDefault(),this._activateItem(d)},"click .ui-menu-item":function(d){var w=g(d.target),I=g(g.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&w.not(".ui-state-disabled").length&&(this.select(d),d.isPropagationStopped()||(this.mouseHandled=!0),w.has(".ui-menu").length?this.expand(d):!this.element.is(":focus")&&I.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,w){var I=this.active||this._menuItems().first();w||this.focus(d,I)},blur:function(d){this._delay(function(){var w=!g.contains(this.element[0],g.ui.safeActiveElement(this.document[0]));w&&this.collapseAll(d)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(d){this._closeOnDocumentClick(d)&&this.collapseAll(d,!0),this.mouseHandled=!1}})},_activateItem:function(d){if(!this.previousFilter&&!(d.clientX===this.lastMousePosition.x&&d.clientY===this.lastMousePosition.y)){this.lastMousePosition={x:d.clientX,y:d.clientY};var w=g(d.target).closest(".ui-menu-item"),I=g(d.currentTarget);w[0]===I[0]&&(I.is(".ui-state-active")||(this._removeClass(I.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(d,I)))}},_destroy:function(){var d=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),w=d.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),w.children().each(function(){var I=g(this);I.data("ui-menu-submenu-caret")&&I.remove()})},_keydown:function(d){var w,I,k,R,W=!0;switch(d.keyCode){case g.ui.keyCode.PAGE_UP:this.previousPage(d);break;case g.ui.keyCode.PAGE_DOWN:this.nextPage(d);break;case g.ui.keyCode.HOME:this._move("first","first",d);break;case g.ui.keyCode.END:this._move("last","last",d);break;case g.ui.keyCode.UP:this.previous(d);break;case g.ui.keyCode.DOWN:this.next(d);break;case g.ui.keyCode.LEFT:this.collapse(d);break;case g.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(d);break;case g.ui.keyCode.ENTER:case g.ui.keyCode.SPACE:this._activate(d);break;case g.ui.keyCode.ESCAPE:this.collapse(d);break;default:W=!1,I=this.previousFilter||"",R=!1,k=d.keyCode>=96&&d.keyCode<=105?(d.keyCode-96).toString():String.fromCharCode(d.keyCode),clearTimeout(this.filterTimer),k===I?R=!0:k=I+k,w=this._filterMenuItems(k),w=R&&w.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):w,w.length||(k=String.fromCharCode(d.keyCode),w=this._filterMenuItems(k)),w.length?(this.focus(d,w),this.previousFilter=k,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}W&&d.preventDefault()},_activate:function(d){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(d):this.select(d))},refresh:function(){var d,w,I,k,R,W=this,se=this.options.icons.submenu,oe=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),I=oe.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var ue=g(this),we=ue.prev(),Te=g("<span>").data("ui-menu-submenu-caret",!0);W._addClass(Te,"ui-menu-icon","ui-icon "+se),we.attr("aria-haspopup","true").prepend(Te),ue.attr("aria-labelledby",we.attr("id"))}),this._addClass(I,"ui-menu","ui-widget ui-widget-content ui-front"),d=oe.add(this.element),w=d.find(this.options.items),w.not(".ui-menu-item").each(function(){var ue=g(this);W._isDivider(ue)&&W._addClass(ue,"ui-menu-divider","ui-widget-content")}),k=w.not(".ui-menu-item, .ui-menu-divider"),R=k.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(k,"ui-menu-item")._addClass(R,"ui-menu-item-wrapper"),w.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!g.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(d,w){if(d==="icons"){var I=this.element.find(".ui-menu-icon");this._removeClass(I,null,this.options.icons.submenu)._addClass(I,null,w.submenu)}this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",String(d)),this._toggleClass(null,"ui-state-disabled",!!d)},focus:function(d,w){var I,k,R;this.blur(d,d&&d.type==="focus"),this._scrollIntoView(w),this.active=w.first(),k=this.active.children(".ui-menu-item-wrapper"),this._addClass(k,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",k.attr("id")),R=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(R,null,"ui-state-active"),d&&d.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),I=w.children(".ui-menu"),I.length&&d&&/^mouse/.test(d.type)&&this._startOpening(I),this.activeMenu=w.parent(),this._trigger("focus",d,{item:w})},_scrollIntoView:function(d){var w,I,k,R,W,se;this._hasScroll()&&(w=parseFloat(g.css(this.activeMenu[0],"borderTopWidth"))||0,I=parseFloat(g.css(this.activeMenu[0],"paddingTop"))||0,k=d.offset().top-this.activeMenu.offset().top-w-I,R=this.activeMenu.scrollTop(),W=this.activeMenu.height(),se=d.outerHeight(),k<0?this.activeMenu.scrollTop(R+k):k+se>W&&this.activeMenu.scrollTop(R+k-W+se))},blur:function(d,w){w||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",d,{item:this.active}),this.active=null)},_startOpening:function(d){clearTimeout(this.timer),d.attr("aria-hidden")==="true"&&(this.timer=this._delay(function(){this._close(),this._open(d)},this.delay))},_open:function(d){var w=g.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(w)},collapseAll:function(d,w){clearTimeout(this.timer),this.timer=this._delay(function(){var I=w?this.element:g(d&&d.target).closest(this.element.find(".ui-menu"));I.length||(I=this.element),this._close(I),this.blur(d),this._removeClass(I.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=I},w?0:this.delay)},_close:function(d){d||(d=this.active?this.active.parent():this.element),d.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(d){return!g(d.target).closest(".ui-menu").length},_isDivider:function(d){return!/[^\-\u2014\u2013\s]/.test(d.text())},collapse:function(d){var w=this.active&&this.active.parent().closest(".ui-menu-item",this.element);w&&w.length&&(this._close(),this.focus(d,w))},expand:function(d){var w=this.active&&this._menuItems(this.active.children(".ui-menu")).first();w&&w.length&&(this._open(w.parent()),this._delay(function(){this.focus(d,w)}))},next:function(d){this._move("next","first",d)},previous:function(d){this._move("prev","last",d)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(d){return(d||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(d,w,I){var k;this.active&&(d==="first"||d==="last"?k=this.active[d==="first"?"prevAll":"nextAll"](".ui-menu-item").last():k=this.active[d+"All"](".ui-menu-item").first()),(!k||!k.length||!this.active)&&(k=this._menuItems(this.activeMenu)[w]()),this.focus(I,k)},nextPage:function(d){var w,I,k;if(!this.active){this.next(d);return}this.isLastItem()||(this._hasScroll()?(I=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-I-k<0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu)[this.active?"last":"first"]()))},previousPage:function(d){var w,I,k;if(!this.active){this.next(d);return}this.isFirstItem()||(this._hasScroll()?(I=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-I+k>0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||g(d.target).closest(".ui-menu-item");var w={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,w)},_filterMenuItems:function(d){var w=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),I=new RegExp("^"+w,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return I.test(String.prototype.trim.call(g(this).children(".ui-menu-item-wrapper").text()))})}});/*!
 * jQuery UI Autocomplete 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var d,w,I,k=this.element[0].nodeName.toLowerCase(),R=k==="textarea",W=k==="input";this.isMultiLine=R||!W&&this._isContentEditable(this.element),this.valueMethod=this.element[R||W?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(se){if(this.element.prop("readOnly")){d=!0,I=!0,w=!0;return}d=!1,I=!1,w=!1;var oe=g.ui.keyCode;switch(se.keyCode){case oe.PAGE_UP:d=!0,this._move("previousPage",se);break;case oe.PAGE_DOWN:d=!0,this._move("nextPage",se);break;case oe.UP:d=!0,this._keyEvent("previous",se);break;case oe.DOWN:d=!0,this._keyEvent("next",se);break;case oe.ENTER:this.menu.active&&(d=!0,se.preventDefault(),this.menu.select(se));break;case oe.TAB:this.menu.active&&this.menu.select(se);break;case oe.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(se),se.preventDefault());break;default:w=!0,this._searchTimeout(se);break}},keypress:function(se){if(d){d=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&se.preventDefault();return}if(!w){var oe=g.ui.keyCode;switch(se.keyCode){case oe.PAGE_UP:this._move("previousPage",se);break;case oe.PAGE_DOWN:this._move("nextPage",se);break;case oe.UP:this._keyEvent("previous",se);break;case oe.DOWN:this._keyEvent("next",se);break}}},input:function(se){if(I){I=!1,se.preventDefault();return}this._searchTimeout(se)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(se){clearTimeout(this.searching),this.close(se),this._change(se)}}),this._initSource(),this.menu=g("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(se){se.preventDefault()},menufocus:function(se,oe){var ue,we;if(this.isNewMenu&&(this.isNewMenu=!1,se.originalEvent&&/^mouse/.test(se.originalEvent.type))){this.menu.blur(),this.document.one("mousemove",function(){g(se.target).trigger(se.originalEvent)});return}we=oe.item.data("ui-autocomplete-item"),this._trigger("focus",se,{item:we})!==!1&&se.originalEvent&&/^key/.test(se.originalEvent.type)&&this._value(we.value),ue=oe.item.attr("aria-label")||we.value,ue&&String.prototype.trim.call(ue).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(ue))},100))},menuselect:function(se,oe){var ue=oe.item.data("ui-autocomplete-item"),we=this.previous;this.element[0]!==g.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=we,this._delay(function(){this.previous=we,this.selectedItem=ue})),this._trigger("select",se,{item:ue})!==!1&&this._value(ue.value),this.term=this._value(),this.close(se),this.selectedItem=ue}}),this.liveRegion=g("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(d,w){this._super(d,w),d==="source"&&this._initSource(),d==="appendTo"&&this.menu.element.appendTo(this._appendTo()),d==="disabled"&&w&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(d){var w=this.menu.element[0];return d.target===this.element[0]||d.target===w||g.contains(w,d.target)},_closeOnClickOutside:function(d){this._isEventTargetInWidget(d)||this.close()},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_initSource:function(){var d,w,I=this;Array.isArray(this.options.source)?(d=this.options.source,this.source=function(k,R){R(g.ui.autocomplete.filter(d,k.term))}):typeof this.options.source=="string"?(w=this.options.source,this.source=function(k,R){I.xhr&&I.xhr.abort(),I.xhr=g.ajax({url:w,data:k,dataType:"json",success:function(W){R(W)},error:function(){R([])}})}):this.source=this.options.source},_searchTimeout:function(d){clearTimeout(this.searching),this.searching=this._delay(function(){var w=this.term===this._value(),I=this.menu.element.is(":visible"),k=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;(!w||w&&!I&&!k)&&(this.selectedItem=null,this.search(null,d))},this.options.delay)},search:function(d,w){if(d=d??this._value(),this.term=this._value(),d.length<this.options.minLength)return this.close(w);if(this._trigger("search",w)!==!1)return this._search(d)},_search:function(d){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;return(function(w){d===this.requestIndex&&this.__response(w),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}).bind(this)},__response:function(d){d&&(d=this._normalize(d)),this._trigger("response",null,{content:d}),!this.options.disabled&&d&&d.length&&!this.cancelSearch?(this._suggest(d),this._trigger("open")):this._close()},close:function(d){this.cancelSearch=!0,this._close(d)},_close:function(d){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",d))},_change:function(d){this.previous!==this._value()&&this._trigger("change",d,{item:this.selectedItem})},_normalize:function(d){return d.length&&d[0].label&&d[0].value?d:g.map(d,function(w){return typeof w=="string"?{label:w,value:w}:g.extend({},w,{label:w.label||w.value,value:w.value||w.label})})},_suggest:function(d){var w=this.menu.element.empty();this._renderMenu(w,d),this.isNewMenu=!0,this.menu.refresh(),w.show(),this._resizeMenu(),w.position(g.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(d,w){var I=this;g.each(w,function(k,R){I._renderItemData(d,R)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-autocomplete-item",w)},_renderItem:function(d,w){return g("<li>").append(g("<div>").text(w.label)).appendTo(d)},_move:function(d,w){if(!this.menu.element.is(":visible")){this.search(null,w);return}if(this.menu.isFirstItem()&&/^previous/.test(d)||this.menu.isLastItem()&&/^next/.test(d)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[d](w)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(d,w){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(d,w),w.preventDefault())},_isContentEditable:function(d){if(!d.length)return!1;var w=d.prop("contentEditable");return w==="inherit"?this._isContentEditable(d.parent()):w==="true"}}),g.extend(g.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,w){var I=new RegExp(g.ui.autocomplete.escapeRegex(w),"i");return g.grep(d,function(k){return I.test(k.label||k.value||k)})}}),g.widget("ui.autocomplete",g.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var w;this._superApply(arguments),!(this.options.disabled||this.cancelSearch)&&(d&&d.length?w=this.options.messages.results(d.length):w=this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(w))},100))}}),g.ui.autocomplete;/*!
 * jQuery UI Controlgroup 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Ut=/ui-corner-([a-z]){2,6}/g;g.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var d=this,w=[];g.each(this.options.items,function(I,k){var R,W={};if(k){if(I==="controlgroupLabel"){R=d.element.find(k),R.each(function(){var se=g(this);se.children(".ui-controlgroup-label-contents").length||se.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),d._addClass(R,null,"ui-widget ui-widget-content ui-state-default"),w=w.concat(R.get());return}g.fn[I]&&(d["_"+I+"Options"]?W=d["_"+I+"Options"]("middle"):W={classes:{}},d.element.find(k).each(function(){var se=g(this),oe=se[I]("instance"),ue=g.widget.extend({},W);if(!(I==="button"&&se.parent(".ui-spinner").length)){oe||(oe=se[I]()[I]("instance")),oe&&(ue.classes=d._resolveClassesValues(ue.classes,oe)),se[I](ue);var we=se[I]("widget");g.data(we[0],"ui-controlgroup-data",oe||se[I]("instance")),w.push(we[0])}}))}}),this.childWidgets=g(g.uniqueSort(w)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(d){this.childWidgets.each(function(){var w=g(this),I=w.data("ui-controlgroup-data");I&&I[d]&&I[d]()})},_updateCornerClass:function(d,w){var I="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",k=this._buildSimpleOptions(w,"label").classes.label;this._removeClass(d,null,I),this._addClass(d,null,k)},_buildSimpleOptions:function(d,w){var I=this.options.direction==="vertical",k={classes:{}};return k.classes[w]={middle:"",first:"ui-corner-"+(I?"top":"left"),last:"ui-corner-"+(I?"bottom":"right"),only:"ui-corner-all"}[d],k},_spinnerOptions:function(d){var w=this._buildSimpleOptions(d,"ui-spinner");return w.classes["ui-spinner-up"]="",w.classes["ui-spinner-down"]="",w},_buttonOptions:function(d){return this._buildSimpleOptions(d,"ui-button")},_checkboxradioOptions:function(d){return this._buildSimpleOptions(d,"ui-checkboxradio-label")},_selectmenuOptions:function(d){var w=this.options.direction==="vertical";return{width:w?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(w?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(w?"top":"left")},last:{"ui-selectmenu-button-open":w?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(w?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[d]}},_resolveClassesValues:function(d,w){var I={};return g.each(d,function(k){var R=w.options.classes[k]||"";R=String.prototype.trim.call(R.replace(Ut,"")),I[k]=(R+" "+d[k]).replace(/\s+/g," ")}),I},_setOption:function(d,w){if(d==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(d,w),d==="disabled"){this._callChildMethod(w?"disable":"enable");return}this.refresh()},refresh:function(){var d,w=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),d=this.childWidgets,this.options.onlyVisible&&(d=d.filter(":visible")),d.length&&(g.each(["first","last"],function(I,k){var R=d[k]().data("ui-controlgroup-data");if(R&&w["_"+R.widgetName+"Options"]){var W=w["_"+R.widgetName+"Options"](d.length===1?"only":k);W.classes=w._resolveClassesValues(W.classes,R),R.element[R.widgetName](W)}else w._updateCornerClass(d[k](),k)}),this._callChildMethod("refresh"))}});/*!
 * jQuery UI Checkboxradio 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.checkboxradio",[g.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var d,w,I,k=this._super()||{};return this._readType(),w=this.element.labels(),this.label=g(w[w.length-1]),this.label.length||g.error("No label found for checkboxradio widget"),this.originalLabel="",I=this.label.contents().not(this.element[0]),I.length&&(this.originalLabel+=I.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(k.label=this.originalLabel),d=this.element[0].disabled,d!=null&&(k.disabled=d),k},_create:function(){var d=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),d&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var d=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,(d!=="input"||!/radio|checkbox/.test(this.type))&&g.error("Can't create checkboxradio on element.nodeName="+d+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var d,w=this.element[0].name,I="input[name='"+g.escapeSelector(w)+"']";return w?(this.form.length?d=g(this.form[0].elements).filter(I):d=g(I).filter(function(){return g(this)._form().length===0}),d.not(this.element)):g([])},_toggleClasses:function(){var d=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",d)._toggleClass(this.icon,null,"ui-icon-blank",!d),this.type==="radio"&&this._getRadioGroup().each(function(){var w=g(this).checkboxradio("instance");w&&w._removeClass(w.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(d,w){if(!(d==="label"&&!w)){if(this._super(d,w),d==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",w),this.element[0].disabled=w;return}this.refresh()}},_updateIcon:function(d){var w="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=g("<span>"),this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(w+=d?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,d?"ui-icon-blank":"ui-icon-check")):w+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",w),d||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var d=this.label.contents().not(this.element[0]);this.icon&&(d=d.not(this.icon[0])),this.iconSpace&&(d=d.not(this.iconSpace[0])),d.remove(),this.label.append(this.options.label)},refresh:function(){var d=this.element[0].checked,w=this.element[0].disabled;this._updateIcon(d),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.label!==null&&this._updateLabel(),w!==this.options.disabled&&this._setOptions({disabled:w})}}]),g.ui.checkboxradio;/*!
 * jQuery UI Button 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var d,w=this._super()||{};return this.isInput=this.element.is("input"),d=this.element[0].disabled,d!=null&&(w.disabled=d),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(w.label=this.originalLabel),w},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(d){d.keyCode===g.ui.keyCode.SPACE&&(d.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),!this.options.showLabel&&!this.title&&this.element.attr("title",this.options.label)},_updateIcon:function(d,w){var I=d!=="iconPosition",k=I?this.options.iconPosition:w,R=k==="top"||k==="bottom";this.icon?I&&this._removeClass(this.icon,null,this.options.icon):(this.icon=g("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),I&&this._addClass(this.icon,null,w),this._attachIcon(k),R?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(k))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(d){this.icon[/^(?:end|bottom)/.test(d)?"before":"after"](this.iconSpace)},_attachIcon:function(d){this.element[/^(?:end|bottom)/.test(d)?"append":"prepend"](this.icon)},_setOptions:function(d){var w=d.showLabel===void 0?this.options.showLabel:d.showLabel,I=d.icon===void 0?this.options.icon:d.icon;!w&&!I&&(d.showLabel=!0),this._super(d)},_setOption:function(d,w){d==="icon"&&(w?this._updateIcon(d,w):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),d==="iconPosition"&&this._updateIcon(d,w),d==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!w),this._updateTooltip()),d==="label"&&(this.isInput?this.element.val(w):(this.element.html(w),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(d,w),d==="disabled"&&(this._toggleClass(null,"ui-state-disabled",w),this.element[0].disabled=w,w&&this.element.trigger("blur"))},refresh:function(){var d=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");d!==this.options.disabled&&this._setOptions({disabled:d}),this._updateTooltip()}}),g.uiBackCompat!==!1&&(g.widget("ui.button",g.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)?this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"):this.options.icon&&(this.options.icons.primary=this.options.icon),this._super()},_setOption:function(d,w){if(d==="text"){this._super("showLabel",w);return}d==="showLabel"&&(this.options.text=w),d==="icon"&&(this.options.icons.primary=w),d==="icons"&&(w.primary?(this._super("icon",w.primary),this._super("iconPosition","beginning")):w.secondary&&(this._super("icon",w.secondary),this._super("iconPosition","end"))),this._superApply(arguments)}}),g.fn.button=function(d){return function(w){var I=typeof w=="string",k=Array.prototype.slice.call(arguments,1),R=this;return I?!this.length&&w==="instance"?R=void 0:this.each(function(){var W,se=g(this).attr("type"),oe=se!=="checkbox"&&se!=="radio"?"button":"checkboxradio",ue=g.data(this,"ui-"+oe);if(w==="instance")return R=ue,!1;if(!ue)return g.error("cannot call methods on button prior to initialization; attempted to call method '"+w+"'");if(typeof ue[w]!="function"||w.charAt(0)==="_")return g.error("no such method '"+w+"' for button widget instance");if(W=ue[w].apply(ue,k),W!==ue&&W!==void 0)return R=W&&W.jquery?R.pushStack(W.get()):W,!1}):(k.length&&(w=g.widget.extend.apply(null,[w].concat(k))),this.each(function(){var W=g(this).attr("type"),se=W!=="checkbox"&&W!=="radio"?"button":"checkboxradio",oe=g.data(this,"ui-"+se);if(oe)oe.option(w||{}),oe._init&&oe._init();else{if(se==="button"){d.call(g(this),w);return}g(this).checkboxradio(g.extend({icon:!1},w))}})),R}}(g.fn.button),g.fn.buttonset=function(){return g.ui.controlgroup||g.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),g.ui.button;/*!
 * jQuery UI Datepicker 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.ui,{datepicker:{version:"1.13.2"}});var Pt;function Yt(d){for(var w,I;d.length&&d[0]!==document;){if(w=d.css("position"),(w==="absolute"||w==="relative"||w==="fixed")&&(I=parseInt(d.css("zIndex"),10),!isNaN(I)&&I!==0))return I;d=d.parent()}return 0}function Ai(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},g.extend(this._defaults,this.regional[""]),this.regional.en=g.extend(!0,{},this.regional[""]),this.regional["en-US"]=g.extend(!0,{},this.regional.en),this.dpDiv=Ri(g("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}g.extend(Ai.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(d){return Li(this._defaults,d||{}),this},_attachDatepicker:function(d,w){var I,k,R;I=d.nodeName.toLowerCase(),k=I==="div"||I==="span",d.id||(this.uuid+=1,d.id="dp"+this.uuid),R=this._newInst(g(d),k),R.settings=g.extend({},w||{}),I==="input"?this._connectDatepicker(d,R):k&&this._inlineDatepicker(d,R)},_newInst:function(d,w){var I=d[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:I,input:d,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:w,dpDiv:w?Ri(g("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(d,w){var I=g(d);w.append=g([]),w.trigger=g([]),!I.hasClass(this.markerClassName)&&(this._attachments(I,w),I.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(w),g.data(d,"datepicker",w),w.settings.disabled&&this._disableDatepicker(d))},_attachments:function(d,w){var I,k,R,W=this._get(w,"appendText"),se=this._get(w,"isRTL");w.append&&w.append.remove(),W&&(w.append=g("<span>").addClass(this._appendClass).text(W),d[se?"before":"after"](w.append)),d.off("focus",this._showDatepicker),w.trigger&&w.trigger.remove(),I=this._get(w,"showOn"),(I==="focus"||I==="both")&&d.on("focus",this._showDatepicker),(I==="button"||I==="both")&&(k=this._get(w,"buttonText"),R=this._get(w,"buttonImage"),this._get(w,"buttonImageOnly")?w.trigger=g("<img>").addClass(this._triggerClass).attr({src:R,alt:k,title:k}):(w.trigger=g("<button type='button'>").addClass(this._triggerClass),R?w.trigger.html(g("<img>").attr({src:R,alt:k,title:k})):w.trigger.text(k)),d[se?"before":"after"](w.trigger),w.trigger.on("click",function(){return g.datepicker._datepickerShowing&&g.datepicker._lastInput===d[0]?g.datepicker._hideDatepicker():(g.datepicker._datepickerShowing&&g.datepicker._lastInput!==d[0]&&g.datepicker._hideDatepicker(),g.datepicker._showDatepicker(d[0])),!1}))},_autoSize:function(d){if(this._get(d,"autoSize")&&!d.inline){var w,I,k,R,W=new Date(2009,11,20),se=this._get(d,"dateFormat");se.match(/[DM]/)&&(w=function(oe){for(I=0,k=0,R=0;R<oe.length;R++)oe[R].length>I&&(I=oe[R].length,k=R);return k},W.setMonth(w(this._get(d,se.match(/MM/)?"monthNames":"monthNamesShort"))),W.setDate(w(this._get(d,se.match(/DD/)?"dayNames":"dayNamesShort"))+20-W.getDay())),d.input.attr("size",this._formatDate(d,W).length)}},_inlineDatepicker:function(d,w){var I=g(d);I.hasClass(this.markerClassName)||(I.addClass(this.markerClassName).append(w.dpDiv),g.data(d,"datepicker",w),this._setDate(w,this._getDefaultDate(w),!0),this._updateDatepicker(w),this._updateAlternate(w),w.settings.disabled&&this._disableDatepicker(d),w.dpDiv.css("display","block"))},_dialogDatepicker:function(d,w,I,k,R){var W,se,oe,ue,we,Te=this._dialogInst;return Te||(this.uuid+=1,W="dp"+this.uuid,this._dialogInput=g("<input type='text' id='"+W+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),g("body").append(this._dialogInput),Te=this._dialogInst=this._newInst(this._dialogInput,!1),Te.settings={},g.data(this._dialogInput[0],"datepicker",Te)),Li(Te.settings,k||{}),w=w&&w.constructor===Date?this._formatDate(Te,w):w,this._dialogInput.val(w),this._pos=R?R.length?R:[R.pageX,R.pageY]:null,this._pos||(se=document.documentElement.clientWidth,oe=document.documentElement.clientHeight,ue=document.documentElement.scrollLeft||document.body.scrollLeft,we=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[se/2-100+ue,oe/2-150+we]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),Te.settings.onSelect=I,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),g.blockUI&&g.blockUI(this.dpDiv),g.data(this._dialogInput[0],"datepicker",Te),this},_destroyDatepicker:function(d){var w,I=g(d),k=g.data(d,"datepicker");I.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),g.removeData(d,"datepicker"),w==="input"?(k.append.remove(),k.trigger.remove(),I.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):(w==="div"||w==="span")&&I.removeClass(this.markerClassName).empty(),Pt===k&&(Pt=null,this._curInst=null))},_enableDatepicker:function(d){var w,I,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!1,R.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(w==="div"||w==="span")&&(I=k.children("."+this._inlineClass),I.children().removeClass("ui-state-disabled"),I.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}))},_disableDatepicker:function(d){var w,I,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!0,R.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(w==="div"||w==="span")&&(I=k.children("."+this._inlineClass),I.children().addClass("ui-state-disabled"),I.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}),this._disabledInputs[this._disabledInputs.length]=d)},_isDisabledDatepicker:function(d){if(!d)return!1;for(var w=0;w<this._disabledInputs.length;w++)if(this._disabledInputs[w]===d)return!0;return!1},_getInst:function(d){try{return g.data(d,"datepicker")}catch{throw"Missing instance data for this datepicker"}},_optionDatepicker:function(d,w,I){var k,R,W,se,oe=this._getInst(d);if(arguments.length===2&&typeof w=="string")return w==="defaults"?g.extend({},g.datepicker._defaults):oe?w==="all"?g.extend({},oe.settings):this._get(oe,w):null;k=w||{},typeof w=="string"&&(k={},k[w]=I),oe&&(this._curInst===oe&&this._hideDatepicker(),R=this._getDateDatepicker(d,!0),W=this._getMinMaxDate(oe,"min"),se=this._getMinMaxDate(oe,"max"),Li(oe.settings,k),W!==null&&k.dateFormat!==void 0&&k.minDate===void 0&&(oe.settings.minDate=this._formatDate(oe,W)),se!==null&&k.dateFormat!==void 0&&k.maxDate===void 0&&(oe.settings.maxDate=this._formatDate(oe,se)),"disabled"in k&&(k.disabled?this._disableDatepicker(d):this._enableDatepicker(d)),this._attachments(g(d),oe),this._autoSize(oe),this._setDate(oe,R),this._updateAlternate(oe),this._updateDatepicker(oe))},_changeDatepicker:function(d,w,I){this._optionDatepicker(d,w,I)},_refreshDatepicker:function(d){var w=this._getInst(d);w&&this._updateDatepicker(w)},_setDateDatepicker:function(d,w){var I=this._getInst(d);I&&(this._setDate(I,w),this._updateDatepicker(I),this._updateAlternate(I))},_getDateDatepicker:function(d,w){var I=this._getInst(d);return I&&!I.inline&&this._setDateFromField(I,w),I?this._getDate(I):null},_doKeyDown:function(d){var w,I,k,R=g.datepicker._getInst(d.target),W=!0,se=R.dpDiv.is(".ui-datepicker-rtl");if(R._keyEvent=!0,g.datepicker._datepickerShowing)switch(d.keyCode){case 9:g.datepicker._hideDatepicker(),W=!1;break;case 13:return k=g("td."+g.datepicker._dayOverClass+":not(."+g.datepicker._currentClass+")",R.dpDiv),k[0]&&g.datepicker._selectDay(d.target,R.selectedMonth,R.selectedYear,k[0]),w=g.datepicker._get(R,"onSelect"),w?(I=g.datepicker._formatDate(R),w.apply(R.input?R.input[0]:null,[I,R])):g.datepicker._hideDatepicker(),!1;case 27:g.datepicker._hideDatepicker();break;case 33:g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 34:g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 35:(d.ctrlKey||d.metaKey)&&g.datepicker._clearDate(d.target),W=d.ctrlKey||d.metaKey;break;case 36:(d.ctrlKey||d.metaKey)&&g.datepicker._gotoToday(d.target),W=d.ctrlKey||d.metaKey;break;case 37:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?1:-1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 38:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,-7,"D"),W=d.ctrlKey||d.metaKey;break;case 39:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?-1:1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 40:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,7,"D"),W=d.ctrlKey||d.metaKey;break;default:W=!1}else d.keyCode===36&&d.ctrlKey?g.datepicker._showDatepicker(this):W=!1;W&&(d.preventDefault(),d.stopPropagation())},_doKeyPress:function(d){var w,I,k=g.datepicker._getInst(d.target);if(g.datepicker._get(k,"constrainInput"))return w=g.datepicker._possibleChars(g.datepicker._get(k,"dateFormat")),I=String.fromCharCode(d.charCode==null?d.keyCode:d.charCode),d.ctrlKey||d.metaKey||I<" "||!w||w.indexOf(I)>-1},_doKeyUp:function(d){var w,I=g.datepicker._getInst(d.target);if(I.input.val()!==I.lastVal)try{w=g.datepicker.parseDate(g.datepicker._get(I,"dateFormat"),I.input?I.input.val():null,g.datepicker._getFormatConfig(I)),w&&(g.datepicker._setDateFromField(I),g.datepicker._updateAlternate(I),g.datepicker._updateDatepicker(I))}catch{}return!0},_showDatepicker:function(d){if(d=d.target||d,d.nodeName.toLowerCase()!=="input"&&(d=g("input",d.parentNode)[0]),!(g.datepicker._isDisabledDatepicker(d)||g.datepicker._lastInput===d)){var w,I,k,R,W,se,oe;w=g.datepicker._getInst(d),g.datepicker._curInst&&g.datepicker._curInst!==w&&(g.datepicker._curInst.dpDiv.stop(!0,!0),w&&g.datepicker._datepickerShowing&&g.datepicker._hideDatepicker(g.datepicker._curInst.input[0])),I=g.datepicker._get(w,"beforeShow"),k=I?I.apply(d,[d,w]):{},k!==!1&&(Li(w.settings,k),w.lastVal=null,g.datepicker._lastInput=d,g.datepicker._setDateFromField(w),g.datepicker._inDialog&&(d.value=""),g.datepicker._pos||(g.datepicker._pos=g.datepicker._findPos(d),g.datepicker._pos[1]+=d.offsetHeight),R=!1,g(d).parents().each(function(){return R|=g(this).css("position")==="fixed",!R}),W={left:g.datepicker._pos[0],top:g.datepicker._pos[1]},g.datepicker._pos=null,w.dpDiv.empty(),w.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),g.datepicker._updateDatepicker(w),W=g.datepicker._checkOffset(w,W,R),w.dpDiv.css({position:g.datepicker._inDialog&&g.blockUI?"static":R?"fixed":"absolute",display:"none",left:W.left+"px",top:W.top+"px"}),w.inline||(se=g.datepicker._get(w,"showAnim"),oe=g.datepicker._get(w,"duration"),w.dpDiv.css("z-index",Yt(g(d))+1),g.datepicker._datepickerShowing=!0,g.effects&&g.effects.effect[se]?w.dpDiv.show(se,g.datepicker._get(w,"showOptions"),oe):w.dpDiv[se||"show"](se?oe:null),g.datepicker._shouldFocusInput(w)&&w.input.trigger("focus"),g.datepicker._curInst=w))}},_updateDatepicker:function(d){this.maxRows=4,Pt=d,d.dpDiv.empty().append(this._generateHTML(d)),this._attachHandlers(d);var w,I=this._getNumberOfMonths(d),k=I[1],R=17,W=d.dpDiv.find("."+this._dayOverClass+" a"),se=g.datepicker._get(d,"onUpdateDatepicker");W.length>0&&Ei.apply(W.get(0)),d.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),k>1&&d.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",R*k+"em"),d.dpDiv[(I[0]!==1||I[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),d.dpDiv[(this._get(d,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),d===g.datepicker._curInst&&g.datepicker._datepickerShowing&&g.datepicker._shouldFocusInput(d)&&d.input.trigger("focus"),d.yearshtml&&(w=d.yearshtml,setTimeout(function(){w===d.yearshtml&&d.yearshtml&&d.dpDiv.find("select.ui-datepicker-year").first().replaceWith(d.yearshtml),w=d.yearshtml=null},0)),se&&se.apply(d.input?d.input[0]:null,[d])},_shouldFocusInput:function(d){return d.input&&d.input.is(":visible")&&!d.input.is(":disabled")&&!d.input.is(":focus")},_checkOffset:function(d,w,I){var k=d.dpDiv.outerWidth(),R=d.dpDiv.outerHeight(),W=d.input?d.input.outerWidth():0,se=d.input?d.input.outerHeight():0,oe=document.documentElement.clientWidth+(I?0:g(document).scrollLeft()),ue=document.documentElement.clientHeight+(I?0:g(document).scrollTop());return w.left-=this._get(d,"isRTL")?k-W:0,w.left-=I&&w.left===d.input.offset().left?g(document).scrollLeft():0,w.top-=I&&w.top===d.input.offset().top+se?g(document).scrollTop():0,w.left-=Math.min(w.left,w.left+k>oe&&oe>k?Math.abs(w.left+k-oe):0),w.top-=Math.min(w.top,w.top+R>ue&&ue>R?Math.abs(R+se):0),w},_findPos:function(d){for(var w,I=this._getInst(d),k=this._get(I,"isRTL");d&&(d.type==="hidden"||d.nodeType!==1||g.expr.pseudos.hidden(d));)d=d[k?"previousSibling":"nextSibling"];return w=g(d).offset(),[w.left,w.top]},_hideDatepicker:function(d){var w,I,k,R,W=this._curInst;!W||d&&W!==g.data(d,"datepicker")||this._datepickerShowing&&(w=this._get(W,"showAnim"),I=this._get(W,"duration"),k=function(){g.datepicker._tidyDialog(W)},g.effects&&(g.effects.effect[w]||g.effects[w])?W.dpDiv.hide(w,g.datepicker._get(W,"showOptions"),I,k):W.dpDiv[w==="slideDown"?"slideUp":w==="fadeIn"?"fadeOut":"hide"](w?I:null,k),w||k(),this._datepickerShowing=!1,R=this._get(W,"onClose"),R&&R.apply(W.input?W.input[0]:null,[W.input?W.input.val():"",W]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),g.blockUI&&(g.unblockUI(),g("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(d){d.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(d){if(g.datepicker._curInst){var w=g(d.target),I=g.datepicker._getInst(w[0]);(w[0].id!==g.datepicker._mainDivId&&w.parents("#"+g.datepicker._mainDivId).length===0&&!w.hasClass(g.datepicker.markerClassName)&&!w.closest("."+g.datepicker._triggerClass).length&&g.datepicker._datepickerShowing&&!(g.datepicker._inDialog&&g.blockUI)||w.hasClass(g.datepicker.markerClassName)&&g.datepicker._curInst!==I)&&g.datepicker._hideDatepicker()}},_adjustDate:function(d,w,I){var k=g(d),R=this._getInst(k[0]);this._isDisabledDatepicker(k[0])||(this._adjustInstDate(R,w,I),this._updateDatepicker(R))},_gotoToday:function(d){var w,I=g(d),k=this._getInst(I[0]);this._get(k,"gotoCurrent")&&k.currentDay?(k.selectedDay=k.currentDay,k.drawMonth=k.selectedMonth=k.currentMonth,k.drawYear=k.selectedYear=k.currentYear):(w=new Date,k.selectedDay=w.getDate(),k.drawMonth=k.selectedMonth=w.getMonth(),k.drawYear=k.selectedYear=w.getFullYear()),this._notifyChange(k),this._adjustDate(I)},_selectMonthYear:function(d,w,I){var k=g(d),R=this._getInst(k[0]);R["selected"+(I==="M"?"Month":"Year")]=R["draw"+(I==="M"?"Month":"Year")]=parseInt(w.options[w.selectedIndex].value,10),this._notifyChange(R),this._adjustDate(k)},_selectDay:function(d,w,I,k){var R,W=g(d);g(k).hasClass(this._unselectableClass)||this._isDisabledDatepicker(W[0])||(R=this._getInst(W[0]),R.selectedDay=R.currentDay=parseInt(g("a",k).attr("data-date")),R.selectedMonth=R.currentMonth=w,R.selectedYear=R.currentYear=I,this._selectDate(d,this._formatDate(R,R.currentDay,R.currentMonth,R.currentYear)))},_clearDate:function(d){var w=g(d);this._selectDate(w,"")},_selectDate:function(d,w){var I,k=g(d),R=this._getInst(k[0]);w=w??this._formatDate(R),R.input&&R.input.val(w),this._updateAlternate(R),I=this._get(R,"onSelect"),I?I.apply(R.input?R.input[0]:null,[w,R]):R.input&&R.input.trigger("change"),R.inline?this._updateDatepicker(R):(this._hideDatepicker(),this._lastInput=R.input[0],typeof R.input[0]!="object"&&R.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(d){var w,I,k,R=this._get(d,"altField");R&&(w=this._get(d,"altFormat")||this._get(d,"dateFormat"),I=this._getDate(d),k=this.formatDate(w,I,this._getFormatConfig(d)),g(document).find(R).val(k))},noWeekends:function(d){var w=d.getDay();return[w>0&&w<6,""]},iso8601Week:function(d){var w,I=new Date(d.getTime());return I.setDate(I.getDate()+4-(I.getDay()||7)),w=I.getTime(),I.setMonth(0),I.setDate(1),Math.floor(Math.round((w-I)/864e5)/7)+1},parseDate:function(d,w,I){if(d==null||w==null)throw"Invalid arguments";if(w=typeof w=="object"?w.toString():w+"",w==="")return null;var k,R,W,se=0,oe=(I?I.shortYearCutoff:null)||this._defaults.shortYearCutoff,ue=typeof oe!="string"?oe:new Date().getFullYear()%100+parseInt(oe,10),we=(I?I.dayNamesShort:null)||this._defaults.dayNamesShort,Te=(I?I.dayNames:null)||this._defaults.dayNames,Ve=(I?I.monthNamesShort:null)||this._defaults.monthNamesShort,De=(I?I.monthNames:null)||this._defaults.monthNames,me=-1,ke=-1,qe=-1,lt=-1,pt=!1,Ft,zt=function(ri){var ci=k+1<d.length&&d.charAt(k+1)===ri;return ci&&k++,ci},Nt=function(ri){var ci=zt(ri),bt=ri==="@"?14:ri==="!"?20:ri==="y"&&ci?4:ri==="o"?3:2,di=ri==="y"?bt:1,ii=new RegExp("^\\d{"+di+","+bt+"}"),Hi=w.substring(se).match(ii);if(!Hi)throw"Missing number at position "+se;return se+=Hi[0].length,parseInt(Hi[0],10)},Mt=function(ri,ci,bt){var di=-1,ii=g.map(zt(ri)?bt:ci,function(Hi,Vi){return[[Vi,Hi]]}).sort(function(Hi,Vi){return-(Hi[1].length-Vi[1].length)});if(g.each(ii,function(Hi,Vi){var Ot=Vi[1];if(w.substr(se,Ot.length).toLowerCase()===Ot.toLowerCase())return di=Vi[0],se+=Ot.length,!1}),di!==-1)return di+1;throw"Unknown name at position "+se},$t=function(){if(w.charAt(se)!==d.charAt(k))throw"Unexpected literal at position "+se;se++};for(k=0;k<d.length;k++)if(pt)d.charAt(k)==="'"&&!zt("'")?pt=!1:$t();else switch(d.charAt(k)){case"d":qe=Nt("d");break;case"D":Mt("D",we,Te);break;case"o":lt=Nt("o");break;case"m":ke=Nt("m");break;case"M":ke=Mt("M",Ve,De);break;case"y":me=Nt("y");break;case"@":Ft=new Date(Nt("@")),me=Ft.getFullYear(),ke=Ft.getMonth()+1,qe=Ft.getDate();break;case"!":Ft=new Date((Nt("!")-this._ticksTo1970)/1e4),me=Ft.getFullYear(),ke=Ft.getMonth()+1,qe=Ft.getDate();break;case"'":zt("'")?$t():pt=!0;break;default:$t()}if(se<w.length&&(W=w.substr(se),!/^\s+/.test(W)))throw"Extra/unparsed characters found in date: "+W;if(me===-1?me=new Date().getFullYear():me<100&&(me+=new Date().getFullYear()-new Date().getFullYear()%100+(me<=ue?0:-100)),lt>-1){ke=1,qe=lt;do{if(R=this._getDaysInMonth(me,ke-1),qe<=R)break;ke++,qe-=R}while(!0)}if(Ft=this._daylightSavingAdjust(new Date(me,ke-1,qe)),Ft.getFullYear()!==me||Ft.getMonth()+1!==ke||Ft.getDate()!==qe)throw"Invalid date";return Ft},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(d,w,I){if(!w)return"";var k,R=(I?I.dayNamesShort:null)||this._defaults.dayNamesShort,W=(I?I.dayNames:null)||this._defaults.dayNames,se=(I?I.monthNamesShort:null)||this._defaults.monthNamesShort,oe=(I?I.monthNames:null)||this._defaults.monthNames,ue=function(me){var ke=k+1<d.length&&d.charAt(k+1)===me;return ke&&k++,ke},we=function(me,ke,qe){var lt=""+ke;if(ue(me))for(;lt.length<qe;)lt="0"+lt;return lt},Te=function(me,ke,qe,lt){return ue(me)?lt[ke]:qe[ke]},Ve="",De=!1;if(w)for(k=0;k<d.length;k++)if(De)d.charAt(k)==="'"&&!ue("'")?De=!1:Ve+=d.charAt(k);else switch(d.charAt(k)){case"d":Ve+=we("d",w.getDate(),2);break;case"D":Ve+=Te("D",w.getDay(),R,W);break;case"o":Ve+=we("o",Math.round((new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime()-new Date(w.getFullYear(),0,0).getTime())/864e5),3);break;case"m":Ve+=we("m",w.getMonth()+1,2);break;case"M":Ve+=Te("M",w.getMonth(),se,oe);break;case"y":Ve+=ue("y")?w.getFullYear():(w.getFullYear()%100<10?"0":"")+w.getFullYear()%100;break;case"@":Ve+=w.getTime();break;case"!":Ve+=w.getTime()*1e4+this._ticksTo1970;break;case"'":ue("'")?Ve+="'":De=!0;break;default:Ve+=d.charAt(k)}return Ve},_possibleChars:function(d){var w,I="",k=!1,R=function(W){var se=w+1<d.length&&d.charAt(w+1)===W;return se&&w++,se};for(w=0;w<d.length;w++)if(k)d.charAt(w)==="'"&&!R("'")?k=!1:I+=d.charAt(w);else switch(d.charAt(w)){case"d":case"m":case"y":case"@":I+="0123456789";break;case"D":case"M":return null;case"'":R("'")?I+="'":k=!0;break;default:I+=d.charAt(w)}return I},_get:function(d,w){return d.settings[w]!==void 0?d.settings[w]:this._defaults[w]},_setDateFromField:function(d,w){if(d.input.val()!==d.lastVal){var I=this._get(d,"dateFormat"),k=d.lastVal=d.input?d.input.val():null,R=this._getDefaultDate(d),W=R,se=this._getFormatConfig(d);try{W=this.parseDate(I,k,se)||R}catch{k=w?"":k}d.selectedDay=W.getDate(),d.drawMonth=d.selectedMonth=W.getMonth(),d.drawYear=d.selectedYear=W.getFullYear(),d.currentDay=k?W.getDate():0,d.currentMonth=k?W.getMonth():0,d.currentYear=k?W.getFullYear():0,this._adjustInstDate(d)}},_getDefaultDate:function(d){return this._restrictMinMax(d,this._determineDate(d,this._get(d,"defaultDate"),new Date))},_determineDate:function(d,w,I){var k=function(se){var oe=new Date;return oe.setDate(oe.getDate()+se),oe},R=function(se){try{return g.datepicker.parseDate(g.datepicker._get(d,"dateFormat"),se,g.datepicker._getFormatConfig(d))}catch{}for(var oe=(se.toLowerCase().match(/^c/)?g.datepicker._getDate(d):null)||new Date,ue=oe.getFullYear(),we=oe.getMonth(),Te=oe.getDate(),Ve=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,De=Ve.exec(se);De;){switch(De[2]||"d"){case"d":case"D":Te+=parseInt(De[1],10);break;case"w":case"W":Te+=parseInt(De[1],10)*7;break;case"m":case"M":we+=parseInt(De[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(ue,we));break;case"y":case"Y":ue+=parseInt(De[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(ue,we));break}De=Ve.exec(se)}return new Date(ue,we,Te)},W=w==null||w===""?I:typeof w=="string"?R(w):typeof w=="number"?isNaN(w)?I:k(w):new Date(w.getTime());return W=W&&W.toString()==="Invalid Date"?I:W,W&&(W.setHours(0),W.setMinutes(0),W.setSeconds(0),W.setMilliseconds(0)),this._daylightSavingAdjust(W)},_daylightSavingAdjust:function(d){return d?(d.setHours(d.getHours()>12?d.getHours()+2:0),d):null},_setDate:function(d,w,I){var k=!w,R=d.selectedMonth,W=d.selectedYear,se=this._restrictMinMax(d,this._determineDate(d,w,new Date));d.selectedDay=d.currentDay=se.getDate(),d.drawMonth=d.selectedMonth=d.currentMonth=se.getMonth(),d.drawYear=d.selectedYear=d.currentYear=se.getFullYear(),(R!==d.selectedMonth||W!==d.selectedYear)&&!I&&this._notifyChange(d),this._adjustInstDate(d),d.input&&d.input.val(k?"":this._formatDate(d))},_getDate:function(d){var w=!d.currentYear||d.input&&d.input.val()===""?null:this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return w},_attachHandlers:function(d){var w=this._get(d,"stepMonths"),I="#"+d.id.replace(/\\\\/g,"\\");d.dpDiv.find("[data-handler]").map(function(){var k={prev:function(){g.datepicker._adjustDate(I,-w,"M")},next:function(){g.datepicker._adjustDate(I,+w,"M")},hide:function(){g.datepicker._hideDatepicker()},today:function(){g.datepicker._gotoToday(I)},selectDay:function(){return g.datepicker._selectDay(I,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return g.datepicker._selectMonthYear(I,this,"M"),!1},selectYear:function(){return g.datepicker._selectMonthYear(I,this,"Y"),!1}};g(this).on(this.getAttribute("data-event"),k[this.getAttribute("data-handler")])})},_generateHTML:function(d){var w,I,k,R,W,se,oe,ue,we,Te,Ve,De,me,ke,qe,lt,pt,Ft,zt,Nt,Mt,$t,ri,ci,bt,di,ii,Hi,Vi,Ot,_i,Ti,Wi,Zt,mi,wi,$i,tr,Ar,Tr=new Date,ji=this._daylightSavingAdjust(new Date(Tr.getFullYear(),Tr.getMonth(),Tr.getDate())),Si=this._get(d,"isRTL"),Qs=this._get(d,"showButtonPanel"),$r=this._get(d,"hideIfNoPrevNext"),it=this._get(d,"navigationAsDateFormat"),Se=this._getNumberOfMonths(d),ce=this._get(d,"showCurrentAtPos"),ye=this._get(d,"stepMonths"),xe=Se[0]!==1||Se[1]!==1,Me=this._daylightSavingAdjust(d.currentDay?new Date(d.currentYear,d.currentMonth,d.currentDay):new Date(9999,9,9)),Ge=this._getMinMaxDate(d,"min"),Le=this._getMinMaxDate(d,"max"),Ke=d.drawMonth-ce,st=d.drawYear;if(Ke<0&&(Ke+=12,st--),Le)for(w=this._daylightSavingAdjust(new Date(Le.getFullYear(),Le.getMonth()-Se[0]*Se[1]+1,Le.getDate())),w=Ge&&w<Ge?Ge:w;this._daylightSavingAdjust(new Date(st,Ke,1))>w;)Ke--,Ke<0&&(Ke=11,st--);for(d.drawMonth=Ke,d.drawYear=st,I=this._get(d,"prevText"),I=it?this.formatDate(I,this._daylightSavingAdjust(new Date(st,Ke-ye,1)),this._getFormatConfig(d)):I,this._canAdjustMonth(d,-1,st,Ke)?k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:I}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Si?"e":"w")).text(I))[0].outerHTML:$r?k="":k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:I}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Si?"e":"w")).text(I))[0].outerHTML,R=this._get(d,"nextText"),R=it?this.formatDate(R,this._daylightSavingAdjust(new Date(st,Ke+ye,1)),this._getFormatConfig(d)):R,this._canAdjustMonth(d,1,st,Ke)?W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:R}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Si?"w":"e")).text(R))[0].outerHTML:$r?W="":W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:R}).append(g("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(Si?"w":"e")).text(R))[0].outerHTML,se=this._get(d,"currentText"),oe=this._get(d,"gotoCurrent")&&d.currentDay?Me:ji,se=it?this.formatDate(se,oe,this._getFormatConfig(d)):se,ue="",d.inline||(ue=g("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(d,"closeText"))[0].outerHTML),we="",Qs&&(we=g("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(Si?ue:"").append(this._isInRange(d,oe)?g("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(se):"").append(Si?"":ue)[0].outerHTML),Te=parseInt(this._get(d,"firstDay"),10),Te=isNaN(Te)?0:Te,Ve=this._get(d,"showWeek"),De=this._get(d,"dayNames"),me=this._get(d,"dayNamesMin"),ke=this._get(d,"monthNames"),qe=this._get(d,"monthNamesShort"),lt=this._get(d,"beforeShowDay"),pt=this._get(d,"showOtherMonths"),Ft=this._get(d,"selectOtherMonths"),zt=this._getDefaultDate(d),Nt="",$t=0;$t<Se[0];$t++){for(ri="",this.maxRows=4,ci=0;ci<Se[1];ci++){if(bt=this._daylightSavingAdjust(new Date(st,Ke,d.selectedDay)),di=" ui-corner-all",ii="",xe){if(ii+="<div class='ui-datepicker-group",Se[1]>1)switch(ci){case 0:ii+=" ui-datepicker-group-first",di=" ui-corner-"+(Si?"right":"left");break;case Se[1]-1:ii+=" ui-datepicker-group-last",di=" ui-corner-"+(Si?"left":"right");break;default:ii+=" ui-datepicker-group-middle",di="";break}ii+="'>"}for(ii+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+di+"'>"+(/all|left/.test(di)&&$t===0?Si?W:k:"")+(/all|right/.test(di)&&$t===0?Si?k:W:"")+this._generateMonthYearHeader(d,Ke,st,Ge,Le,$t>0||ci>0,ke,qe)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Hi=Ve?"<th class='ui-datepicker-week-col'>"+this._get(d,"weekHeader")+"</th>":"",Mt=0;Mt<7;Mt++)Vi=(Mt+Te)%7,Hi+="<th scope='col'"+((Mt+Te+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+De[Vi]+"'>"+me[Vi]+"</span></th>";for(ii+=Hi+"</tr></thead><tbody>",Ot=this._getDaysInMonth(st,Ke),st===d.selectedYear&&Ke===d.selectedMonth&&(d.selectedDay=Math.min(d.selectedDay,Ot)),_i=(this._getFirstDayOfMonth(st,Ke)-Te+7)%7,Ti=Math.ceil((_i+Ot)/7),Wi=xe&&this.maxRows>Ti?this.maxRows:Ti,this.maxRows=Wi,Zt=this._daylightSavingAdjust(new Date(st,Ke,1-_i)),mi=0;mi<Wi;mi++){for(ii+="<tr>",wi=Ve?"<td class='ui-datepicker-week-col'>"+this._get(d,"calculateWeek")(Zt)+"</td>":"",Mt=0;Mt<7;Mt++)$i=lt?lt.apply(d.input?d.input[0]:null,[Zt]):[!0,""],tr=Zt.getMonth()!==Ke,Ar=tr&&!Ft||!$i[0]||Ge&&Zt<Ge||Le&&Zt>Le,wi+="<td class='"+((Mt+Te+6)%7>=5?" ui-datepicker-week-end":"")+(tr?" ui-datepicker-other-month":"")+(Zt.getTime()===bt.getTime()&&Ke===d.selectedMonth&&d._keyEvent||zt.getTime()===Zt.getTime()&&zt.getTime()===bt.getTime()?" "+this._dayOverClass:"")+(Ar?" "+this._unselectableClass+" ui-state-disabled":"")+(tr&&!pt?"":" "+$i[1]+(Zt.getTime()===Me.getTime()?" "+this._currentClass:"")+(Zt.getTime()===ji.getTime()?" ui-datepicker-today":""))+"'"+((!tr||pt)&&$i[2]?" title='"+$i[2].replace(/'/g,"&#39;")+"'":"")+(Ar?"":" data-handler='selectDay' data-event='click' data-month='"+Zt.getMonth()+"' data-year='"+Zt.getFullYear()+"'")+">"+(tr&&!pt?"&#xa0;":Ar?"<span class='ui-state-default'>"+Zt.getDate()+"</span>":"<a class='ui-state-default"+(Zt.getTime()===ji.getTime()?" ui-state-highlight":"")+(Zt.getTime()===Me.getTime()?" ui-state-active":"")+(tr?" ui-priority-secondary":"")+"' href='#' aria-current='"+(Zt.getTime()===Me.getTime()?"true":"false")+"' data-date='"+Zt.getDate()+"'>"+Zt.getDate()+"</a>")+"</td>",Zt.setDate(Zt.getDate()+1),Zt=this._daylightSavingAdjust(Zt);ii+=wi+"</tr>"}Ke++,Ke>11&&(Ke=0,st++),ii+="</tbody></table>"+(xe?"</div>"+(Se[0]>0&&ci===Se[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),ri+=ii}Nt+=ri}return Nt+=we,d._keyEvent=!1,Nt},_generateMonthYearHeader:function(d,w,I,k,R,W,se,oe){var ue,we,Te,Ve,De,me,ke,qe,lt=this._get(d,"changeMonth"),pt=this._get(d,"changeYear"),Ft=this._get(d,"showMonthAfterYear"),zt=this._get(d,"selectMonthLabel"),Nt=this._get(d,"selectYearLabel"),Mt="<div class='ui-datepicker-title'>",$t="";if(W||!lt)$t+="<span class='ui-datepicker-month'>"+se[w]+"</span>";else{for(ue=k&&k.getFullYear()===I,we=R&&R.getFullYear()===I,$t+="<select class='ui-datepicker-month' aria-label='"+zt+"' data-handler='selectMonth' data-event='change'>",Te=0;Te<12;Te++)(!ue||Te>=k.getMonth())&&(!we||Te<=R.getMonth())&&($t+="<option value='"+Te+"'"+(Te===w?" selected='selected'":"")+">"+oe[Te]+"</option>");$t+="</select>"}if(Ft||(Mt+=$t+(W||!(lt&&pt)?"&#xa0;":"")),!d.yearshtml)if(d.yearshtml="",W||!pt)Mt+="<span class='ui-datepicker-year'>"+I+"</span>";else{for(Ve=this._get(d,"yearRange").split(":"),De=new Date().getFullYear(),me=function(ri){var ci=ri.match(/c[+\-].*/)?I+parseInt(ri.substring(1),10):ri.match(/[+\-].*/)?De+parseInt(ri,10):parseInt(ri,10);return isNaN(ci)?De:ci},ke=me(Ve[0]),qe=Math.max(ke,me(Ve[1]||"")),ke=k?Math.max(ke,k.getFullYear()):ke,qe=R?Math.min(qe,R.getFullYear()):qe,d.yearshtml+="<select class='ui-datepicker-year' aria-label='"+Nt+"' data-handler='selectYear' data-event='change'>";ke<=qe;ke++)d.yearshtml+="<option value='"+ke+"'"+(ke===I?" selected='selected'":"")+">"+ke+"</option>";d.yearshtml+="</select>",Mt+=d.yearshtml,d.yearshtml=null}return Mt+=this._get(d,"yearSuffix"),Ft&&(Mt+=(W||!(lt&&pt)?"&#xa0;":"")+$t),Mt+="</div>",Mt},_adjustInstDate:function(d,w,I){var k=d.selectedYear+(I==="Y"?w:0),R=d.selectedMonth+(I==="M"?w:0),W=Math.min(d.selectedDay,this._getDaysInMonth(k,R))+(I==="D"?w:0),se=this._restrictMinMax(d,this._daylightSavingAdjust(new Date(k,R,W)));d.selectedDay=se.getDate(),d.drawMonth=d.selectedMonth=se.getMonth(),d.drawYear=d.selectedYear=se.getFullYear(),(I==="M"||I==="Y")&&this._notifyChange(d)},_restrictMinMax:function(d,w){var I=this._getMinMaxDate(d,"min"),k=this._getMinMaxDate(d,"max"),R=I&&w<I?I:w;return k&&R>k?k:R},_notifyChange:function(d){var w=this._get(d,"onChangeMonthYear");w&&w.apply(d.input?d.input[0]:null,[d.selectedYear,d.selectedMonth+1,d])},_getNumberOfMonths:function(d){var w=this._get(d,"numberOfMonths");return w==null?[1,1]:typeof w=="number"?[1,w]:w},_getMinMaxDate:function(d,w){return this._determineDate(d,this._get(d,w+"Date"),null)},_getDaysInMonth:function(d,w){return 32-this._daylightSavingAdjust(new Date(d,w,32)).getDate()},_getFirstDayOfMonth:function(d,w){return new Date(d,w,1).getDay()},_canAdjustMonth:function(d,w,I,k){var R=this._getNumberOfMonths(d),W=this._daylightSavingAdjust(new Date(I,k+(w<0?w:R[0]*R[1]),1));return w<0&&W.setDate(this._getDaysInMonth(W.getFullYear(),W.getMonth())),this._isInRange(d,W)},_isInRange:function(d,w){var I,k,R=this._getMinMaxDate(d,"min"),W=this._getMinMaxDate(d,"max"),se=null,oe=null,ue=this._get(d,"yearRange");return ue&&(I=ue.split(":"),k=new Date().getFullYear(),se=parseInt(I[0],10),oe=parseInt(I[1],10),I[0].match(/[+\-].*/)&&(se+=k),I[1].match(/[+\-].*/)&&(oe+=k)),(!R||w.getTime()>=R.getTime())&&(!W||w.getTime()<=W.getTime())&&(!se||w.getFullYear()>=se)&&(!oe||w.getFullYear()<=oe)},_getFormatConfig:function(d){var w=this._get(d,"shortYearCutoff");return w=typeof w!="string"?w:new Date().getFullYear()%100+parseInt(w,10),{shortYearCutoff:w,dayNamesShort:this._get(d,"dayNamesShort"),dayNames:this._get(d,"dayNames"),monthNamesShort:this._get(d,"monthNamesShort"),monthNames:this._get(d,"monthNames")}},_formatDate:function(d,w,I,k){w||(d.currentDay=d.selectedDay,d.currentMonth=d.selectedMonth,d.currentYear=d.selectedYear);var R=w?typeof w=="object"?w:this._daylightSavingAdjust(new Date(k,I,w)):this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return this.formatDate(this._get(d,"dateFormat"),R,this._getFormatConfig(d))}});function Ri(d){var w="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return d.on("mouseout",w,function(){g(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",w,Ei)}function Ei(){g.datepicker._isDisabledDatepicker(Pt.inline?Pt.dpDiv.parent()[0]:Pt.input[0])||(g(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),g(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).addClass("ui-datepicker-next-hover"))}function Li(d,w){g.extend(d,w);for(var I in w)w[I]==null&&(d[I]=w[I]);return d}g.fn.datepicker=function(d){if(!this.length)return this;g.datepicker.initialized||(g(document).on("mousedown",g.datepicker._checkExternalClick),g.datepicker.initialized=!0),g("#"+g.datepicker._mainDivId).length===0&&g("body").append(g.datepicker.dpDiv);var w=Array.prototype.slice.call(arguments,1);return typeof d=="string"&&(d==="isDisabled"||d==="getDate"||d==="widget")?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):d==="option"&&arguments.length===2&&typeof arguments[1]=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):this.each(function(){typeof d=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this].concat(w)):g.datepicker._attachDatepicker(this,d)})},g.datepicker=new Ai,g.datepicker.initialized=!1,g.datepicker.uuid=new Date().getTime(),g.datepicker.version="1.13.2",g.datepicker,g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());/*!
 * jQuery UI Mouse 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Yi=!1;g(document).on("mouseup",function(){Yi=!1}),g.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.on("mousedown."+this.widgetName,function(w){return d._mouseDown(w)}).on("click."+this.widgetName,function(w){if(g.data(w.target,d.widgetName+".preventClickEvent")===!0)return g.removeData(w.target,d.widgetName+".preventClickEvent"),w.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!Yi){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var w=this,I=d.which===1,k=typeof this.options.cancel=="string"&&d.target.nodeName?g(d.target).closest(this.options.cancel).length:!1;return!I||k||!this._mouseCapture(d)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){w.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(g.data(d.target,this.widgetName+".preventClickEvent")===!0&&g.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(R){return w._mouseMove(R)},this._mouseUpDelegate=function(R){return w._mouseUp(R)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),Yi=!0,!0))}},_mouseMove:function(d){if(this._mouseMoved){if(g.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button)return this._mouseUp(d);if(!d.which){if(d.originalEvent.altKey||d.originalEvent.ctrlKey||d.originalEvent.metaKey||d.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(d)}}return(d.which||d.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==!1,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted)},_mouseUp:function(d){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&g.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Yi=!1,d.preventDefault()},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),g.ui.plugin={add:function(d,w,I){var k,R=g.ui[d].prototype;for(k in I)R.plugins[k]=R.plugins[k]||[],R.plugins[k].push([w,I[k]])},call:function(d,w,I,k){var R,W=d.plugins[w];if(W&&!(!k&&(!d.element[0].parentNode||d.element[0].parentNode.nodeType===11)))for(R=0;R<W.length;R++)d.options[W[R][0]]&&W[R][1].apply(d.element,I)}},g.ui.safeBlur=function(d){d&&d.nodeName.toLowerCase()!=="body"&&g(d).trigger("blur")};/*!
 * jQuery UI Draggable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.draggable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(d,w){this._super(d,w),d==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(d){var w=this.options;return this.helper||w.disabled||g(d.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(d),!this.handle)?!1:(this._blurActiveElement(d),this._blockFrames(w.iframeFix===!0?"iframe":w.iframeFix),!0)},_blockFrames:function(d){this.iframeBlocks=this.document.find(d).map(function(){var w=g(this);return g("<div>").css("position","absolute").appendTo(w.parent()).outerWidth(w.outerWidth()).outerHeight(w.outerHeight()).offset(w.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(d){var w=g.ui.safeActiveElement(this.document[0]),I=g(d.target);I.closest(w).length||g.ui.safeBlur(w)},_mouseStart:function(d){var w=this.options;return this.helper=this._createHelper(d),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),g.ui.ddmanager&&(g.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return g(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(d),this.originalPosition=this.position=this._generatePosition(d,!1),this.originalPageX=d.pageX,this.originalPageY=d.pageY,w.cursorAt&&this._adjustOffsetFromHelper(w.cursorAt),this._setContainment(),this._trigger("start",d)===!1?(this._clear(),!1):(this._cacheHelperProportions(),g.ui.ddmanager&&!w.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this._mouseDrag(d,!0),g.ui.ddmanager&&g.ui.ddmanager.dragStart(this,d),!0)},_refreshOffsets:function(d){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:d.pageX-this.offset.left,top:d.pageY-this.offset.top}},_mouseDrag:function(d,w){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d,!0),this.positionAbs=this._convertPositionTo("absolute"),!w){var I=this._uiHash();if(this._trigger("drag",d,I)===!1)return this._mouseUp(new g.Event("mouseup",d)),!1;this.position=I.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var w=this,I=!1;return g.ui.ddmanager&&!this.options.dropBehaviour&&(I=g.ui.ddmanager.drop(this,d)),this.dropped&&(I=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!I||this.options.revert==="valid"&&I||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,I)?g(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){w._trigger("stop",d)!==!1&&w._clear()}):this._trigger("stop",d)!==!1&&this._clear(),!1},_mouseUp:function(d){return this._unblockFrames(),g.ui.ddmanager&&g.ui.ddmanager.dragStop(this,d),this.handleElement.is(d.target)&&this.element.trigger("focus"),g.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new g.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(d){return this.options.handle?!!g(d.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(d){var w=this.options,I=typeof w.helper=="function",k=I?g(w.helper.apply(this.element[0],[d])):w.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return k.parents("body").length||k.appendTo(w.appendTo==="parent"?this.element[0].parentNode:w.appendTo),I&&k[0]===this.element[0]&&this._setPositionRelative(),k[0]!==this.element[0]&&!/(fixed|absolute)/.test(k.css("position"))&&k.css("position","absolute"),k},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_isRootNode:function(d){return/(html|body)/i.test(d.tagName)||d===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),w=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==w&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var d=this.element.position(),w=this._isRootNode(this.scrollParent[0]);return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+(w?0:this.scrollParent.scrollTop()),left:d.left-(parseInt(this.helper.css("left"),10)||0)+(w?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,I,k=this.options,R=this.document[0];if(this.relativeContainer=null,!k.containment){this.containment=null;return}if(k.containment==="window"){this.containment=[g(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,g(window).scrollLeft()+g(window).width()-this.helperProportions.width-this.margins.left,g(window).scrollTop()+(g(window).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment==="document"){this.containment=[0,0,g(R).width()-this.helperProportions.width-this.margins.left,(g(R).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment.constructor===Array){this.containment=k.containment;return}k.containment==="parent"&&(k.containment=this.helper[0].parentNode),w=g(k.containment),I=w[0],I&&(d=/(scroll|auto)/.test(w.css("overflow")),this.containment=[(parseInt(w.css("borderLeftWidth"),10)||0)+(parseInt(w.css("paddingLeft"),10)||0),(parseInt(w.css("borderTopWidth"),10)||0)+(parseInt(w.css("paddingTop"),10)||0),(d?Math.max(I.scrollWidth,I.offsetWidth):I.offsetWidth)-(parseInt(w.css("borderRightWidth"),10)||0)-(parseInt(w.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(I.scrollHeight,I.offsetHeight):I.offsetHeight)-(parseInt(w.css("borderBottomWidth"),10)||0)-(parseInt(w.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=w)},_convertPositionTo:function(d,w){w||(w=this.position);var I=d==="absolute"?1:-1,k=this._isRootNode(this.scrollParent[0]);return{top:w.top+this.offset.relative.top*I+this.offset.parent.top*I-(this.cssPosition==="fixed"?-this.offset.scroll.top:k?0:this.offset.scroll.top)*I,left:w.left+this.offset.relative.left*I+this.offset.parent.left*I-(this.cssPosition==="fixed"?-this.offset.scroll.left:k?0:this.offset.scroll.left)*I}},_generatePosition:function(d,w){var I,k,R,W,se=this.options,oe=this._isRootNode(this.scrollParent[0]),ue=d.pageX,we=d.pageY;return(!oe||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),w&&(this.containment&&(this.relativeContainer?(k=this.relativeContainer.offset(),I=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):I=this.containment,d.pageX-this.offset.click.left<I[0]&&(ue=I[0]+this.offset.click.left),d.pageY-this.offset.click.top<I[1]&&(we=I[1]+this.offset.click.top),d.pageX-this.offset.click.left>I[2]&&(ue=I[2]+this.offset.click.left),d.pageY-this.offset.click.top>I[3]&&(we=I[3]+this.offset.click.top)),se.grid&&(R=se.grid[1]?this.originalPageY+Math.round((we-this.originalPageY)/se.grid[1])*se.grid[1]:this.originalPageY,we=I?R-this.offset.click.top>=I[1]||R-this.offset.click.top>I[3]?R:R-this.offset.click.top>=I[1]?R-se.grid[1]:R+se.grid[1]:R,W=se.grid[0]?this.originalPageX+Math.round((ue-this.originalPageX)/se.grid[0])*se.grid[0]:this.originalPageX,ue=I?W-this.offset.click.left>=I[0]||W-this.offset.click.left>I[2]?W:W-this.offset.click.left>=I[0]?W-se.grid[0]:W+se.grid[0]:W),se.axis==="y"&&(ue=this.originalPageX),se.axis==="x"&&(we=this.originalPageY)),{top:we-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:oe?0:this.offset.scroll.top),left:ue-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:oe?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(d,w,I){return I=I||this._uiHash(),g.ui.plugin.call(this,d,[w,I,this],!0),/^(drag|start|stop)/.test(d)&&(this.positionAbs=this._convertPositionTo("absolute"),I.offset=this.positionAbs),g.Widget.prototype._trigger.call(this,d,w,I)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),g.ui.plugin.add("draggable","connectToSortable",{start:function(d,w,I){var k=g.extend({},w,{item:I.element});I.sortables=[],g(I.options.connectToSortable).each(function(){var R=g(this).sortable("instance");R&&!R.options.disabled&&(I.sortables.push(R),R.refreshPositions(),R._trigger("activate",d,k))})},stop:function(d,w,I){var k=g.extend({},w,{item:I.element});I.cancelHelperRemoval=!1,g.each(I.sortables,function(){var R=this;R.isOver?(R.isOver=0,I.cancelHelperRemoval=!0,R.cancelHelperRemoval=!1,R._storedCSS={position:R.placeholder.css("position"),top:R.placeholder.css("top"),left:R.placeholder.css("left")},R._mouseStop(d),R.options.helper=R.options._helper):(R.cancelHelperRemoval=!0,R._trigger("deactivate",d,k))})},drag:function(d,w,I){g.each(I.sortables,function(){var k=!1,R=this;R.positionAbs=I.positionAbs,R.helperProportions=I.helperProportions,R.offset.click=I.offset.click,R._intersectsWith(R.containerCache)&&(k=!0,g.each(I.sortables,function(){return this.positionAbs=I.positionAbs,this.helperProportions=I.helperProportions,this.offset.click=I.offset.click,this!==R&&this._intersectsWith(this.containerCache)&&g.contains(R.element[0],this.element[0])&&(k=!1),k})),k?(R.isOver||(R.isOver=1,I._parent=w.helper.parent(),R.currentItem=w.helper.appendTo(R.element).data("ui-sortable-item",!0),R.options._helper=R.options.helper,R.options.helper=function(){return w.helper[0]},d.target=R.currentItem[0],R._mouseCapture(d,!0),R._mouseStart(d,!0,!0),R.offset.click.top=I.offset.click.top,R.offset.click.left=I.offset.click.left,R.offset.parent.left-=I.offset.parent.left-R.offset.parent.left,R.offset.parent.top-=I.offset.parent.top-R.offset.parent.top,I._trigger("toSortable",d),I.dropped=R.element,g.each(I.sortables,function(){this.refreshPositions()}),I.currentItem=I.element,R.fromOutside=I),R.currentItem&&(R._mouseDrag(d),w.position=R.position)):R.isOver&&(R.isOver=0,R.cancelHelperRemoval=!0,R.options._revert=R.options.revert,R.options.revert=!1,R._trigger("out",d,R._uiHash(R)),R._mouseStop(d,!0),R.options.revert=R.options._revert,R.options.helper=R.options._helper,R.placeholder&&R.placeholder.remove(),w.helper.appendTo(I._parent),I._refreshOffsets(d),w.position=I._generatePosition(d,!0),I._trigger("fromSortable",d),I.dropped=!1,g.each(I.sortables,function(){this.refreshPositions()}))})}}),g.ui.plugin.add("draggable","cursor",{start:function(d,w,I){var k=g("body"),R=I.options;k.css("cursor")&&(R._cursor=k.css("cursor")),k.css("cursor",R.cursor)},stop:function(d,w,I){var k=I.options;k._cursor&&g("body").css("cursor",k._cursor)}}),g.ui.plugin.add("draggable","opacity",{start:function(d,w,I){var k=g(w.helper),R=I.options;k.css("opacity")&&(R._opacity=k.css("opacity")),k.css("opacity",R.opacity)},stop:function(d,w,I){var k=I.options;k._opacity&&g(w.helper).css("opacity",k._opacity)}}),g.ui.plugin.add("draggable","scroll",{start:function(d,w,I){I.scrollParentNotHidden||(I.scrollParentNotHidden=I.helper.scrollParent(!1)),I.scrollParentNotHidden[0]!==I.document[0]&&I.scrollParentNotHidden[0].tagName!=="HTML"&&(I.overflowOffset=I.scrollParentNotHidden.offset())},drag:function(d,w,I){var k=I.options,R=!1,W=I.scrollParentNotHidden[0],se=I.document[0];W!==se&&W.tagName!=="HTML"?((!k.axis||k.axis!=="x")&&(I.overflowOffset.top+W.offsetHeight-d.pageY<k.scrollSensitivity?W.scrollTop=R=W.scrollTop+k.scrollSpeed:d.pageY-I.overflowOffset.top<k.scrollSensitivity&&(W.scrollTop=R=W.scrollTop-k.scrollSpeed)),(!k.axis||k.axis!=="y")&&(I.overflowOffset.left+W.offsetWidth-d.pageX<k.scrollSensitivity?W.scrollLeft=R=W.scrollLeft+k.scrollSpeed:d.pageX-I.overflowOffset.left<k.scrollSensitivity&&(W.scrollLeft=R=W.scrollLeft-k.scrollSpeed))):((!k.axis||k.axis!=="x")&&(d.pageY-g(se).scrollTop()<k.scrollSensitivity?R=g(se).scrollTop(g(se).scrollTop()-k.scrollSpeed):g(window).height()-(d.pageY-g(se).scrollTop())<k.scrollSensitivity&&(R=g(se).scrollTop(g(se).scrollTop()+k.scrollSpeed))),(!k.axis||k.axis!=="y")&&(d.pageX-g(se).scrollLeft()<k.scrollSensitivity?R=g(se).scrollLeft(g(se).scrollLeft()-k.scrollSpeed):g(window).width()-(d.pageX-g(se).scrollLeft())<k.scrollSensitivity&&(R=g(se).scrollLeft(g(se).scrollLeft()+k.scrollSpeed)))),R!==!1&&g.ui.ddmanager&&!k.dropBehaviour&&g.ui.ddmanager.prepareOffsets(I,d)}}),g.ui.plugin.add("draggable","snap",{start:function(d,w,I){var k=I.options;I.snapElements=[],g(k.snap.constructor!==String?k.snap.items||":data(ui-draggable)":k.snap).each(function(){var R=g(this),W=R.offset();this!==I.element[0]&&I.snapElements.push({item:this,width:R.outerWidth(),height:R.outerHeight(),top:W.top,left:W.left})})},drag:function(d,w,I){var k,R,W,se,oe,ue,we,Te,Ve,De,me=I.options,ke=me.snapTolerance,qe=w.offset.left,lt=qe+I.helperProportions.width,pt=w.offset.top,Ft=pt+I.helperProportions.height;for(Ve=I.snapElements.length-1;Ve>=0;Ve--){if(oe=I.snapElements[Ve].left-I.margins.left,ue=oe+I.snapElements[Ve].width,we=I.snapElements[Ve].top-I.margins.top,Te=we+I.snapElements[Ve].height,lt<oe-ke||qe>ue+ke||Ft<we-ke||pt>Te+ke||!g.contains(I.snapElements[Ve].item.ownerDocument,I.snapElements[Ve].item)){I.snapElements[Ve].snapping&&I.options.snap.release&&I.options.snap.release.call(I.element,d,g.extend(I._uiHash(),{snapItem:I.snapElements[Ve].item})),I.snapElements[Ve].snapping=!1;continue}me.snapMode!=="inner"&&(k=Math.abs(we-Ft)<=ke,R=Math.abs(Te-pt)<=ke,W=Math.abs(oe-lt)<=ke,se=Math.abs(ue-qe)<=ke,k&&(w.position.top=I._convertPositionTo("relative",{top:we-I.helperProportions.height,left:0}).top),R&&(w.position.top=I._convertPositionTo("relative",{top:Te,left:0}).top),W&&(w.position.left=I._convertPositionTo("relative",{top:0,left:oe-I.helperProportions.width}).left),se&&(w.position.left=I._convertPositionTo("relative",{top:0,left:ue}).left)),De=k||R||W||se,me.snapMode!=="outer"&&(k=Math.abs(we-pt)<=ke,R=Math.abs(Te-Ft)<=ke,W=Math.abs(oe-qe)<=ke,se=Math.abs(ue-lt)<=ke,k&&(w.position.top=I._convertPositionTo("relative",{top:we,left:0}).top),R&&(w.position.top=I._convertPositionTo("relative",{top:Te-I.helperProportions.height,left:0}).top),W&&(w.position.left=I._convertPositionTo("relative",{top:0,left:oe}).left),se&&(w.position.left=I._convertPositionTo("relative",{top:0,left:ue-I.helperProportions.width}).left)),!I.snapElements[Ve].snapping&&(k||R||W||se||De)&&I.options.snap.snap&&I.options.snap.snap.call(I.element,d,g.extend(I._uiHash(),{snapItem:I.snapElements[Ve].item})),I.snapElements[Ve].snapping=k||R||W||se||De}}}),g.ui.plugin.add("draggable","stack",{start:function(d,w,I){var k,R=I.options,W=g.makeArray(g(R.stack)).sort(function(se,oe){return(parseInt(g(se).css("zIndex"),10)||0)-(parseInt(g(oe).css("zIndex"),10)||0)});W.length&&(k=parseInt(g(W[0]).css("zIndex"),10)||0,g(W).each(function(se){g(this).css("zIndex",k+se)}),this.css("zIndex",k+W.length))}}),g.ui.plugin.add("draggable","zIndex",{start:function(d,w,I){var k=g(w.helper),R=I.options;k.css("zIndex")&&(R._zIndex=k.css("zIndex")),k.css("zIndex",R.zIndex)},stop:function(d,w,I){var k=I.options;k._zIndex&&g(w.helper).css("zIndex",k._zIndex)}}),g.ui.draggable;/*!
 * jQuery UI Resizable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.resizable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(d){return parseFloat(d)||0},_isNumber:function(d){return!isNaN(parseFloat(d))},_hasScroll:function(d,w){if(g(d).css("overflow")==="hidden")return!1;var I=w&&w==="left"?"scrollLeft":"scrollTop",k=!1;if(d[I]>0)return!0;try{d[I]=1,k=d[I]>0,d[I]=0}catch{}return k},_create:function(){var d,w=this.options,I=this;this._addClass("ui-resizable"),g.extend(this,{_aspectRatio:!!w.aspectRatio,aspectRatio:w.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:w.helper||w.ghost||w.animate?w.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(g("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,d={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(d),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(d),this._proportionallyResize()),this._setupHandles(),w.autoHide&&g(this.element).on("mouseenter",function(){w.disabled||(I._removeClass("ui-resizable-autohide"),I._handles.show())}).on("mouseleave",function(){w.disabled||I.resizing||(I._addClass("ui-resizable-autohide"),I._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var d,w=function(I){g(I).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(w(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),w(this.originalElement),this},_setOption:function(d,w){switch(this._super(d,w),d){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!w;break}},_setupHandles:function(){var d=this.options,w,I,k,R,W,se=this;if(this.handles=d.handles||(g(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=g(),this._addedHandles=g(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),k=this.handles.split(","),this.handles={},I=0;I<k.length;I++)w=String.prototype.trim.call(k[I]),R="ui-resizable-"+w,W=g("<div>"),this._addClass(W,"ui-resizable-handle "+R),W.css({zIndex:d.zIndex}),this.handles[w]=".ui-resizable-"+w,this.element.children(this.handles[w]).length||(this.element.append(W),this._addedHandles=this._addedHandles.add(W));this._renderAxis=function(oe){var ue,we,Te,Ve;oe=oe||this.element;for(ue in this.handles)this.handles[ue].constructor===String?this.handles[ue]=this.element.children(this.handles[ue]).first().show():(this.handles[ue].jquery||this.handles[ue].nodeType)&&(this.handles[ue]=g(this.handles[ue]),this._on(this.handles[ue],{mousedown:se._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(we=g(this.handles[ue],this.element),Ve=/sw|ne|nw|se|n|s/.test(ue)?we.outerHeight():we.outerWidth(),Te=["padding",/ne|nw|n/.test(ue)?"Top":/se|sw|s/.test(ue)?"Bottom":/^e$/.test(ue)?"Right":"Left"].join(""),oe.css(Te,Ve),this._proportionallyResize()),this._handles=this._handles.add(this.handles[ue])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){se.resizing||(this.className&&(W=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),se.axis=W&&W[1]?W[1]:"se")}),d.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(d){var w,I,k=!1;for(w in this.handles)I=g(this.handles[w])[0],(I===d.target||g.contains(I,d.target))&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(d){var w,I,k,R=this.options,W=this.element;return this.resizing=!0,this._renderProxy(),w=this._num(this.helper.css("left")),I=this._num(this.helper.css("top")),R.containment&&(w+=g(R.containment).scrollLeft()||0,I+=g(R.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:w,top:I},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:W.width(),height:W.height()},this.originalSize=this._helper?{width:W.outerWidth(),height:W.outerHeight()}:{width:W.width(),height:W.height()},this.sizeDiff={width:W.outerWidth()-W.width(),height:W.outerHeight()-W.height()},this.originalPosition={left:w,top:I},this.originalMousePosition={left:d.pageX,top:d.pageY},this.aspectRatio=typeof R.aspectRatio=="number"?R.aspectRatio:this.originalSize.width/this.originalSize.height||1,k=g(".ui-resizable-"+this.axis).css("cursor"),g("body").css("cursor",k==="auto"?this.axis+"-resize":k),this._addClass("ui-resizable-resizing"),this._propagate("start",d),!0},_mouseDrag:function(d){var w,I,k=this.originalMousePosition,R=this.axis,W=d.pageX-k.left||0,se=d.pageY-k.top||0,oe=this._change[R];return this._updatePrevProperties(),oe&&(w=oe.apply(this,[d,W,se]),this._updateVirtualBoundaries(d.shiftKey),(this._aspectRatio||d.shiftKey)&&(w=this._updateRatio(w,d)),w=this._respectSize(w,d),this._updateCache(w),this._propagate("resize",d),I=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),g.isEmptyObject(I)||(this._updatePrevProperties(),this._trigger("resize",d,this.ui()),this._applyChanges())),!1},_mouseStop:function(d){this.resizing=!1;var w,I,k,R,W,se,oe,ue=this.options,we=this;return this._helper&&(w=this._proportionallyResizeElements,I=w.length&&/textarea/i.test(w[0].nodeName),k=I&&this._hasScroll(w[0],"left")?0:we.sizeDiff.height,R=I?0:we.sizeDiff.width,W={width:we.helper.width()-R,height:we.helper.height()-k},se=parseFloat(we.element.css("left"))+(we.position.left-we.originalPosition.left)||null,oe=parseFloat(we.element.css("top"))+(we.position.top-we.originalPosition.top)||null,ue.animate||this.element.css(g.extend(W,{top:oe,left:se})),we.helper.height(we.size.height),we.helper.width(we.size.width),this._helper&&!ue.animate&&this._proportionallyResize()),g("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",d),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var d={};return this.position.top!==this.prevPosition.top&&(d.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(d.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(d.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(d.height=this.size.height+"px"),this.helper.css(d),d},_updateVirtualBoundaries:function(d){var w,I,k,R,W,se=this.options;W={minWidth:this._isNumber(se.minWidth)?se.minWidth:0,maxWidth:this._isNumber(se.maxWidth)?se.maxWidth:1/0,minHeight:this._isNumber(se.minHeight)?se.minHeight:0,maxHeight:this._isNumber(se.maxHeight)?se.maxHeight:1/0},(this._aspectRatio||d)&&(w=W.minHeight*this.aspectRatio,k=W.minWidth/this.aspectRatio,I=W.maxHeight*this.aspectRatio,R=W.maxWidth/this.aspectRatio,w>W.minWidth&&(W.minWidth=w),k>W.minHeight&&(W.minHeight=k),I<W.maxWidth&&(W.maxWidth=I),R<W.maxHeight&&(W.maxHeight=R)),this._vBoundaries=W},_updateCache:function(d){this.offset=this.helper.offset(),this._isNumber(d.left)&&(this.position.left=d.left),this._isNumber(d.top)&&(this.position.top=d.top),this._isNumber(d.height)&&(this.size.height=d.height),this._isNumber(d.width)&&(this.size.width=d.width)},_updateRatio:function(d){var w=this.position,I=this.size,k=this.axis;return this._isNumber(d.height)?d.width=d.height*this.aspectRatio:this._isNumber(d.width)&&(d.height=d.width/this.aspectRatio),k==="sw"&&(d.left=w.left+(I.width-d.width),d.top=null),k==="nw"&&(d.top=w.top+(I.height-d.height),d.left=w.left+(I.width-d.width)),d},_respectSize:function(d){var w=this._vBoundaries,I=this.axis,k=this._isNumber(d.width)&&w.maxWidth&&w.maxWidth<d.width,R=this._isNumber(d.height)&&w.maxHeight&&w.maxHeight<d.height,W=this._isNumber(d.width)&&w.minWidth&&w.minWidth>d.width,se=this._isNumber(d.height)&&w.minHeight&&w.minHeight>d.height,oe=this.originalPosition.left+this.originalSize.width,ue=this.originalPosition.top+this.originalSize.height,we=/sw|nw|w/.test(I),Te=/nw|ne|n/.test(I);return W&&(d.width=w.minWidth),se&&(d.height=w.minHeight),k&&(d.width=w.maxWidth),R&&(d.height=w.maxHeight),W&&we&&(d.left=oe-w.minWidth),k&&we&&(d.left=oe-w.maxWidth),se&&Te&&(d.top=ue-w.minHeight),R&&Te&&(d.top=ue-w.maxHeight),!d.width&&!d.height&&!d.left&&d.top?d.top=null:!d.width&&!d.height&&!d.top&&d.left&&(d.left=null),d},_getPaddingPlusBorderDimensions:function(d){for(var w=0,I=[],k=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],R=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];w<4;w++)I[w]=parseFloat(k[w])||0,I[w]+=parseFloat(R[w])||0;return{height:I[0]+I[2],width:I[1]+I[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d,w=0,I=this.helper||this.element;w<this._proportionallyResizeElements.length;w++)d=this._proportionallyResizeElements[w],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(d)),d.css({height:I.height()-this.outerDimensions.height||0,width:I.width()-this.outerDimensions.width||0})},_renderProxy:function(){var d=this.element,w=this.options;this.elementOffset=d.offset(),this._helper?(this.helper=this.helper||g("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++w.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(d,w){return{width:this.originalSize.width+w}},w:function(d,w){var I=this.originalSize,k=this.originalPosition;return{left:k.left+w,width:I.width-w}},n:function(d,w,I){var k=this.originalSize,R=this.originalPosition;return{top:R.top+I,height:k.height-I}},s:function(d,w,I){return{height:this.originalSize.height+I}},se:function(d,w,I){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,w,I]))},sw:function(d,w,I){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,w,I]))},ne:function(d,w,I){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,w,I]))},nw:function(d,w,I){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,w,I]))}},_propagate:function(d,w){g.ui.plugin.call(this,d,[w,this.ui()]),d!=="resize"&&this._trigger(d,w,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),g.ui.plugin.add("resizable","animate",{stop:function(d){var w=g(this).resizable("instance"),I=w.options,k=w._proportionallyResizeElements,R=k.length&&/textarea/i.test(k[0].nodeName),W=R&&w._hasScroll(k[0],"left")?0:w.sizeDiff.height,se=R?0:w.sizeDiff.width,oe={width:w.size.width-se,height:w.size.height-W},ue=parseFloat(w.element.css("left"))+(w.position.left-w.originalPosition.left)||null,we=parseFloat(w.element.css("top"))+(w.position.top-w.originalPosition.top)||null;w.element.animate(g.extend(oe,we&&ue?{top:we,left:ue}:{}),{duration:I.animateDuration,easing:I.animateEasing,step:function(){var Te={width:parseFloat(w.element.css("width")),height:parseFloat(w.element.css("height")),top:parseFloat(w.element.css("top")),left:parseFloat(w.element.css("left"))};k&&k.length&&g(k[0]).css({width:Te.width,height:Te.height}),w._updateCache(Te),w._propagate("resize",d)}})}}),g.ui.plugin.add("resizable","containment",{start:function(){var d,w,I,k,R,W,se,oe=g(this).resizable("instance"),ue=oe.options,we=oe.element,Te=ue.containment,Ve=Te instanceof g?Te.get(0):/parent/.test(Te)?we.parent().get(0):Te;Ve&&(oe.containerElement=g(Ve),/document/.test(Te)||Te===document?(oe.containerOffset={left:0,top:0},oe.containerPosition={left:0,top:0},oe.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||document.body.parentNode.scrollHeight}):(d=g(Ve),w=[],g(["Top","Right","Left","Bottom"]).each(function(De,me){w[De]=oe._num(d.css("padding"+me))}),oe.containerOffset=d.offset(),oe.containerPosition=d.position(),oe.containerSize={height:d.innerHeight()-w[3],width:d.innerWidth()-w[1]},I=oe.containerOffset,k=oe.containerSize.height,R=oe.containerSize.width,W=oe._hasScroll(Ve,"left")?Ve.scrollWidth:R,se=oe._hasScroll(Ve)?Ve.scrollHeight:k,oe.parentData={element:Ve,left:I.left,top:I.top,width:W,height:se}))},resize:function(d){var w,I,k,R,W=g(this).resizable("instance"),se=W.options,oe=W.containerOffset,ue=W.position,we=W._aspectRatio||d.shiftKey,Te={top:0,left:0},Ve=W.containerElement,De=!0;Ve[0]!==document&&/static/.test(Ve.css("position"))&&(Te=oe),ue.left<(W._helper?oe.left:0)&&(W.size.width=W.size.width+(W._helper?W.position.left-oe.left:W.position.left-Te.left),we&&(W.size.height=W.size.width/W.aspectRatio,De=!1),W.position.left=se.helper?oe.left:0),ue.top<(W._helper?oe.top:0)&&(W.size.height=W.size.height+(W._helper?W.position.top-oe.top:W.position.top),we&&(W.size.width=W.size.height*W.aspectRatio,De=!1),W.position.top=W._helper?oe.top:0),k=W.containerElement.get(0)===W.element.parent().get(0),R=/relative|absolute/.test(W.containerElement.css("position")),k&&R?(W.offset.left=W.parentData.left+W.position.left,W.offset.top=W.parentData.top+W.position.top):(W.offset.left=W.element.offset().left,W.offset.top=W.element.offset().top),w=Math.abs(W.sizeDiff.width+(W._helper?W.offset.left-Te.left:W.offset.left-oe.left)),I=Math.abs(W.sizeDiff.height+(W._helper?W.offset.top-Te.top:W.offset.top-oe.top)),w+W.size.width>=W.parentData.width&&(W.size.width=W.parentData.width-w,we&&(W.size.height=W.size.width/W.aspectRatio,De=!1)),I+W.size.height>=W.parentData.height&&(W.size.height=W.parentData.height-I,we&&(W.size.width=W.size.height*W.aspectRatio,De=!1)),De||(W.position.left=W.prevPosition.left,W.position.top=W.prevPosition.top,W.size.width=W.prevSize.width,W.size.height=W.prevSize.height)},stop:function(){var d=g(this).resizable("instance"),w=d.options,I=d.containerOffset,k=d.containerPosition,R=d.containerElement,W=g(d.helper),se=W.offset(),oe=W.outerWidth()-d.sizeDiff.width,ue=W.outerHeight()-d.sizeDiff.height;d._helper&&!w.animate&&/relative/.test(R.css("position"))&&g(this).css({left:se.left-k.left-I.left,width:oe,height:ue}),d._helper&&!w.animate&&/static/.test(R.css("position"))&&g(this).css({left:se.left-k.left-I.left,width:oe,height:ue})}}),g.ui.plugin.add("resizable","alsoResize",{start:function(){var d=g(this).resizable("instance"),w=d.options;g(w.alsoResize).each(function(){var I=g(this);I.data("ui-resizable-alsoresize",{width:parseFloat(I.width()),height:parseFloat(I.height()),left:parseFloat(I.css("left")),top:parseFloat(I.css("top"))})})},resize:function(d,w){var I=g(this).resizable("instance"),k=I.options,R=I.originalSize,W=I.originalPosition,se={height:I.size.height-R.height||0,width:I.size.width-R.width||0,top:I.position.top-W.top||0,left:I.position.left-W.left||0};g(k.alsoResize).each(function(){var oe=g(this),ue=g(this).data("ui-resizable-alsoresize"),we={},Te=oe.parents(w.originalElement[0]).length?["width","height"]:["width","height","top","left"];g.each(Te,function(Ve,De){var me=(ue[De]||0)+(se[De]||0);me&&me>=0&&(we[De]=me||null)}),oe.css(we)})},stop:function(){g(this).removeData("ui-resizable-alsoresize")}}),g.ui.plugin.add("resizable","ghost",{start:function(){var d=g(this).resizable("instance"),w=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:w.height,width:w.width,margin:0,left:0,top:0}),d._addClass(d.ghost,"ui-resizable-ghost"),g.uiBackCompat!==!1&&typeof d.options.ghost=="string"&&d.ghost.addClass(this.options.ghost),d.ghost.appendTo(d.helper)},resize:function(){var d=g(this).resizable("instance");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=g(this).resizable("instance");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),g.ui.plugin.add("resizable","grid",{resize:function(){var d,w=g(this).resizable("instance"),I=w.options,k=w.size,R=w.originalSize,W=w.originalPosition,se=w.axis,oe=typeof I.grid=="number"?[I.grid,I.grid]:I.grid,ue=oe[0]||1,we=oe[1]||1,Te=Math.round((k.width-R.width)/ue)*ue,Ve=Math.round((k.height-R.height)/we)*we,De=R.width+Te,me=R.height+Ve,ke=I.maxWidth&&I.maxWidth<De,qe=I.maxHeight&&I.maxHeight<me,lt=I.minWidth&&I.minWidth>De,pt=I.minHeight&&I.minHeight>me;I.grid=oe,lt&&(De+=ue),pt&&(me+=we),ke&&(De-=ue),qe&&(me-=we),/^(se|s|e)$/.test(se)?(w.size.width=De,w.size.height=me):/^(ne)$/.test(se)?(w.size.width=De,w.size.height=me,w.position.top=W.top-Ve):/^(sw)$/.test(se)?(w.size.width=De,w.size.height=me,w.position.left=W.left-Te):((me-we<=0||De-ue<=0)&&(d=w._getPaddingPlusBorderDimensions(this)),me-we>0?(w.size.height=me,w.position.top=W.top-Ve):(me=we-d.height,w.size.height=me,w.position.top=W.top+R.height-me),De-ue>0?(w.size.width=De,w.position.left=W.left-Te):(De=ue-d.width,w.size.width=De,w.position.left=W.left+R.width-De))}}),g.ui.resizable;/*!
 * jQuery UI Dialog 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var w=g(this).css(d).offset().top;w<0&&g(this).css("top",d.top-w)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&g.fn.draggable&&this._makeDraggable(),this.options.resizable&&g.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?g(d):this.document.find(d||"body").eq(0)},_destroy:function(){var d,w=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),d=w.parent.children().eq(w.index),d.length&&d[0]!==this.element[0]?d.before(this.element):w.parent.append(this.element)},widget:function(){return this.uiDialog},disable:g.noop,enable:g.noop,close:function(d){var w=this;!this._isOpen||this._trigger("beforeClose",d)===!1||(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||g.ui.safeBlur(g.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){w._trigger("close",d)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(d,w){var I=!1,k=this.uiDialog.siblings(".ui-front:visible").map(function(){return+g(this).css("z-index")}).get(),R=Math.max.apply(null,k);return R>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",R+1),I=!0),I&&!w&&this._trigger("focus",d),I},open:function(){var d=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=g(g.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable(),d._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var d=this._focusedElement;d||(d=this.element.find("[autofocus]")),d.length||(d=this.element.find(":tabbable")),d.length||(d=this.uiDialogButtonPane.find(":tabbable")),d.length||(d=this.uiDialogTitlebarClose.filter(":tabbable")),d.length||(d=this.uiDialog),d.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var d=g.ui.safeActiveElement(this.document[0]),w=this.uiDialog[0]===d||g.contains(this.uiDialog[0],d);w||this._focusTabbable()},_keepFocus:function(d){d.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=g("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(d){if(this.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===g.ui.keyCode.ESCAPE){d.preventDefault(),this.close(d);return}if(!(d.keyCode!==g.ui.keyCode.TAB||d.isDefaultPrevented())){var w=this.uiDialog.find(":tabbable"),I=w.first(),k=w.last();(d.target===k[0]||d.target===this.uiDialog[0])&&!d.shiftKey?(this._delay(function(){I.trigger("focus")}),d.preventDefault()):(d.target===I[0]||d.target===this.uiDialog[0])&&d.shiftKey&&(this._delay(function(){k.trigger("focus")}),d.preventDefault())}},mousedown:function(d){this._moveToTop(d)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=g("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(w){g(w.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=g("<button type='button'></button>").button({label:g("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(w){w.preventDefault(),this.close(w)}}),d=g("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(d,"ui-dialog-title"),this._title(d),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(d){this.options.title?d.text(this.options.title):d.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=g("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=g("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var d=this,w=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),g.isEmptyObject(w)||Array.isArray(w)&&!w.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}g.each(w,function(I,k){var R,W;k=typeof k=="function"?{click:k,text:I}:k,k=g.extend({type:"button"},k),R=k.click,W={icon:k.icon,iconPosition:k.iconPosition,showLabel:k.showLabel,icons:k.icons,text:k.text},delete k.click,delete k.icon,delete k.iconPosition,delete k.showLabel,delete k.icons,typeof k.text=="boolean"&&delete k.text,g("<button></button>",k).button(W).appendTo(d.uiButtonSet).on("click",function(){R.apply(d.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var d=this,w=this.options;function I(k){return{position:k.position,offset:k.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,R){d._addClass(g(this),"ui-dialog-dragging"),d._blockFrames(),d._trigger("dragStart",k,I(R))},drag:function(k,R){d._trigger("drag",k,I(R))},stop:function(k,R){var W=R.offset.left-d.document.scrollLeft(),se=R.offset.top-d.document.scrollTop();w.position={my:"left top",at:"left"+(W>=0?"+":"")+W+" top"+(se>=0?"+":"")+se,of:d.window},d._removeClass(g(this),"ui-dialog-dragging"),d._unblockFrames(),d._trigger("dragStop",k,I(R))}})},_makeResizable:function(){var d=this,w=this.options,I=w.resizable,k=this.uiDialog.css("position"),R=typeof I=="string"?I:"n,e,s,w,se,sw,ne,nw";function W(se){return{originalPosition:se.originalPosition,originalSize:se.originalSize,position:se.position,size:se.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:w.maxWidth,maxHeight:w.maxHeight,minWidth:w.minWidth,minHeight:this._minHeight(),handles:R,start:function(se,oe){d._addClass(g(this),"ui-dialog-resizing"),d._blockFrames(),d._trigger("resizeStart",se,W(oe))},resize:function(se,oe){d._trigger("resize",se,W(oe))},stop:function(se,oe){var ue=d.uiDialog.offset(),we=ue.left-d.document.scrollLeft(),Te=ue.top-d.document.scrollTop();w.height=d.uiDialog.height(),w.width=d.uiDialog.width(),w.position={my:"left top",at:"left"+(we>=0?"+":"")+we+" top"+(Te>=0?"+":"")+Te,of:d.window},d._removeClass(g(this),"ui-dialog-resizing"),d._unblockFrames(),d._trigger("resizeStop",se,W(oe))}}).css("position",k)},_trackFocus:function(){this._on(this.widget(),{focusin:function(d){this._makeFocusTarget(),this._focusedElement=g(d.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var d=this._trackingInstances(),w=g.inArray(this,d);w!==-1&&d.splice(w,1)},_trackingInstances:function(){var d=this.document.data("ui-dialog-instances");return d||(d=[],this.document.data("ui-dialog-instances",d)),d},_minHeight:function(){var d=this.options;return d.height==="auto"?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(){var d=this.uiDialog.is(":visible");d||this.uiDialog.show(),this.uiDialog.position(this.options.position),d||this.uiDialog.hide()},_setOptions:function(d){var w=this,I=!1,k={};g.each(d,function(R,W){w._setOption(R,W),R in w.sizeRelatedOptions&&(I=!0),R in w.resizableRelatedOptions&&(k[R]=W)}),I&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",k)},_setOption:function(d,w){var I,k,R=this.uiDialog;d!=="disabled"&&(this._super(d,w),d==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),d==="buttons"&&this._createButtons(),d==="closeText"&&this.uiDialogTitlebarClose.button({label:g("<a>").text(""+this.options.closeText).html()}),d==="draggable"&&(I=R.is(":data(ui-draggable)"),I&&!w&&R.draggable("destroy"),!I&&w&&this._makeDraggable()),d==="position"&&this._position(),d==="resizable"&&(k=R.is(":data(ui-resizable)"),k&&!w&&R.resizable("destroy"),k&&typeof w=="string"&&R.resizable("option","handles",w),!k&&w!==!1&&this._makeResizable()),d==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var d,w,I,k=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),k.minWidth>k.width&&(k.width=k.minWidth),d=this.uiDialog.css({height:"auto",width:k.width}).outerHeight(),w=Math.max(0,k.minHeight-d),I=typeof k.maxHeight=="number"?Math.max(0,k.maxHeight-d):"none",k.height==="auto"?this.element.css({minHeight:w,maxHeight:I,height:"auto"}):this.element.height(Math.max(0,k.height-d)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=g(this);return g("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return g(d.target).closest(".ui-dialog").length?!0:!!g(d.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var d=g.fn.jquery.substring(0,4),w=!0;this._delay(function(){w=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",(function(I){if(!w){var k=this._trackingInstances()[0];k._allowInteraction(I)||(I.preventDefault(),k._focusTabbable(),(d==="3.4."||d==="3.5.")&&k._delay(k._restoreTabbableFocus))}}).bind(this)),this.overlay=g("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var d=this.document.data("ui-dialog-overlays")-1;d?this.document.data("ui-dialog-overlays",d):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),g.uiBackCompat!==!1&&g.widget("ui.dialog",g.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(d,w){d==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(w),this._superApply(arguments)}}),g.ui.dialog;/*!
 * jQuery UI Droppable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var d,w=this.options,I=w.accept;this.isover=!1,this.isout=!0,this.accept=typeof I=="function"?I:function(k){return k.is(I)},this.proportions=function(){if(arguments.length)d=arguments[0];else return d||(d={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(w.scope),w.addClasses&&this._addClass("ui-droppable")},_addToManager:function(d){g.ui.ddmanager.droppables[d]=g.ui.ddmanager.droppables[d]||[],g.ui.ddmanager.droppables[d].push(this)},_splice:function(d){for(var w=0;w<d.length;w++)d[w]===this&&d.splice(w,1)},_destroy:function(){var d=g.ui.ddmanager.droppables[this.options.scope];this._splice(d)},_setOption:function(d,w){if(d==="accept")this.accept=typeof w=="function"?w:function(k){return k.is(w)};else if(d==="scope"){var I=g.ui.ddmanager.droppables[this.options.scope];this._splice(I),this._addToManager(w)}this._super(d,w)},_activate:function(d){var w=g.ui.ddmanager.current;this._addActiveClass(),w&&this._trigger("activate",d,this.ui(w))},_deactivate:function(d){var w=g.ui.ddmanager.current;this._removeActiveClass(),w&&this._trigger("deactivate",d,this.ui(w))},_over:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._addHoverClass(),this._trigger("over",d,this.ui(w)))},_out:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._removeHoverClass(),this._trigger("out",d,this.ui(w)))},_drop:function(d,w){var I=w||g.ui.ddmanager.current,k=!1;return!I||(I.currentItem||I.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var R=g(this).droppable("instance");if(R.options.greedy&&!R.options.disabled&&R.options.scope===I.options.scope&&R.accept.call(R.element[0],I.currentItem||I.element)&&g.ui.intersect(I,g.extend(R,{offset:R.element.offset()}),R.options.tolerance,d))return k=!0,!1}),k)?!1:this.accept.call(this.element[0],I.currentItem||I.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",d,this.ui(I)),this.element):!1},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),g.ui.intersect=function(){function d(w,I,k){return w>=I&&w<I+k}return function(w,I,k,R){if(!I.offset)return!1;var W=(w.positionAbs||w.position.absolute).left+w.margins.left,se=(w.positionAbs||w.position.absolute).top+w.margins.top,oe=W+w.helperProportions.width,ue=se+w.helperProportions.height,we=I.offset.left,Te=I.offset.top,Ve=we+I.proportions().width,De=Te+I.proportions().height;switch(k){case"fit":return we<=W&&oe<=Ve&&Te<=se&&ue<=De;case"intersect":return we<W+w.helperProportions.width/2&&oe-w.helperProportions.width/2<Ve&&Te<se+w.helperProportions.height/2&&ue-w.helperProportions.height/2<De;case"pointer":return d(R.pageY,Te,I.proportions().height)&&d(R.pageX,we,I.proportions().width);case"touch":return(se>=Te&&se<=De||ue>=Te&&ue<=De||se<Te&&ue>De)&&(W>=we&&W<=Ve||oe>=we&&oe<=Ve||W<we&&oe>Ve);default:return!1}}}(),g.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(d,w){var I,k,R=g.ui.ddmanager.droppables[d.options.scope]||[],W=w?w.type:null,se=(d.currentItem||d.element).find(":data(ui-droppable)").addBack();e:for(I=0;I<R.length;I++)if(!(R[I].options.disabled||d&&!R[I].accept.call(R[I].element[0],d.currentItem||d.element))){for(k=0;k<se.length;k++)if(se[k]===R[I].element[0]){R[I].proportions().height=0;continue e}R[I].visible=R[I].element.css("display")!=="none",R[I].visible&&(W==="mousedown"&&R[I]._activate.call(R[I],w),R[I].offset=R[I].element.offset(),R[I].proportions({width:R[I].element[0].offsetWidth,height:R[I].element[0].offsetHeight}))}},drop:function(d,w){var I=!1;return g.each((g.ui.ddmanager.droppables[d.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&g.ui.intersect(d,this,this.options.tolerance,w)&&(I=this._drop.call(this,w)||I),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,w)))}),I},dragStart:function(d,w){d.element.parentsUntil("body").on("scroll.droppable",function(){d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)})},drag:function(d,w){d.options.refreshPositions&&g.ui.ddmanager.prepareOffsets(d,w),g.each(g.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var I,k,R,W=g.ui.intersect(d,this,this.options.tolerance,w),se=!W&&this.isover?"isout":W&&!this.isover?"isover":null;se&&(this.options.greedy&&(k=this.options.scope,R=this.element.parents(":data(ui-droppable)").filter(function(){return g(this).droppable("instance").options.scope===k}),R.length&&(I=g(R[0]).droppable("instance"),I.greedyChild=se==="isover")),I&&se==="isover"&&(I.isover=!1,I.isout=!0,I._out.call(I,w)),this[se]=!0,this[se==="isout"?"isover":"isout"]=!1,this[se==="isover"?"_over":"_out"].call(this,w),I&&se==="isout"&&(I.isout=!1,I.isover=!0,I._over.call(I,w)))}})},dragStop:function(d,w){d.element.parentsUntil("body").off("scroll.droppable"),d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)}},g.uiBackCompat!==!1&&g.widget("ui.droppable",g.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),g.ui.droppable;/*!
 * jQuery UI Progressbar 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=g("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(d){if(d===void 0)return this.options.value;this.options.value=this._constrainedValue(d),this._refreshValue()},_constrainedValue:function(d){return d===void 0&&(d=this.options.value),this.indeterminate=d===!1,typeof d!="number"&&(d=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,d))},_setOptions:function(d){var w=d.value;delete d.value,this._super(d),this.options.value=this._constrainedValue(w),this._refreshValue()},_setOption:function(d,w){d==="max"&&(w=Math.max(this.min,w)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,w=this._percentage();this.valueDiv.toggle(this.indeterminate||d>this.min).width(w.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,d===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=g("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":d}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),d===this.options.max&&this._trigger("complete")}});/*!
 * jQuery UI Selectable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectable",g.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){d.elementPos=g(d.element[0]).offset(),d.selectees=g(d.options.filter,d.element[0]),d._addClass(d.selectees,"ui-selectee"),d.selectees.each(function(){var w=g(this),I=w.offset(),k={left:I.left-d.elementPos.left,top:I.top-d.elementPos.top};g.data(this,"selectable-item",{element:this,$element:w,left:k.left,top:k.top,right:k.left+w.outerWidth(),bottom:k.top+w.outerHeight(),startselected:!1,selected:w.hasClass("ui-selected"),selecting:w.hasClass("ui-selecting"),unselecting:w.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=g("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(d){var w=this,I=this.options;this.opos=[d.pageX,d.pageY],this.elementPos=g(this.element[0]).offset(),!this.options.disabled&&(this.selectees=g(I.filter,this.element[0]),this._trigger("start",d),g(I.appendTo).append(this.helper),this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0}),I.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var k=g.data(this,"selectable-item");k.startselected=!0,!d.metaKey&&!d.ctrlKey&&(w._removeClass(k.$element,"ui-selected"),k.selected=!1,w._addClass(k.$element,"ui-unselecting"),k.unselecting=!0,w._trigger("unselecting",d,{unselecting:k.element}))}),g(d.target).parents().addBack().each(function(){var k,R=g.data(this,"selectable-item");if(R)return k=!d.metaKey&&!d.ctrlKey||!R.$element.hasClass("ui-selected"),w._removeClass(R.$element,k?"ui-unselecting":"ui-selected")._addClass(R.$element,k?"ui-selecting":"ui-unselecting"),R.unselecting=!k,R.selecting=k,R.selected=k,k?w._trigger("selecting",d,{selecting:R.element}):w._trigger("unselecting",d,{unselecting:R.element}),!1}))},_mouseDrag:function(d){if(this.dragged=!0,!this.options.disabled){var w,I=this,k=this.options,R=this.opos[0],W=this.opos[1],se=d.pageX,oe=d.pageY;return R>se&&(w=se,se=R,R=w),W>oe&&(w=oe,oe=W,W=w),this.helper.css({left:R,top:W,width:se-R,height:oe-W}),this.selectees.each(function(){var ue=g.data(this,"selectable-item"),we=!1,Te={};!ue||ue.element===I.element[0]||(Te.left=ue.left+I.elementPos.left,Te.right=ue.right+I.elementPos.left,Te.top=ue.top+I.elementPos.top,Te.bottom=ue.bottom+I.elementPos.top,k.tolerance==="touch"?we=!(Te.left>se||Te.right<R||Te.top>oe||Te.bottom<W):k.tolerance==="fit"&&(we=Te.left>R&&Te.right<se&&Te.top>W&&Te.bottom<oe),we?(ue.selected&&(I._removeClass(ue.$element,"ui-selected"),ue.selected=!1),ue.unselecting&&(I._removeClass(ue.$element,"ui-unselecting"),ue.unselecting=!1),ue.selecting||(I._addClass(ue.$element,"ui-selecting"),ue.selecting=!0,I._trigger("selecting",d,{selecting:ue.element}))):(ue.selecting&&((d.metaKey||d.ctrlKey)&&ue.startselected?(I._removeClass(ue.$element,"ui-selecting"),ue.selecting=!1,I._addClass(ue.$element,"ui-selected"),ue.selected=!0):(I._removeClass(ue.$element,"ui-selecting"),ue.selecting=!1,ue.startselected&&(I._addClass(ue.$element,"ui-unselecting"),ue.unselecting=!0),I._trigger("unselecting",d,{unselecting:ue.element}))),ue.selected&&!d.metaKey&&!d.ctrlKey&&!ue.startselected&&(I._removeClass(ue.$element,"ui-selected"),ue.selected=!1,I._addClass(ue.$element,"ui-unselecting"),ue.unselecting=!0,I._trigger("unselecting",d,{unselecting:ue.element}))))}),!1}},_mouseStop:function(d){var w=this;return this.dragged=!1,g(".ui-unselecting",this.element[0]).each(function(){var I=g.data(this,"selectable-item");w._removeClass(I.$element,"ui-unselecting"),I.unselecting=!1,I.startselected=!1,w._trigger("unselected",d,{unselected:I.element})}),g(".ui-selecting",this.element[0]).each(function(){var I=g.data(this,"selectable-item");w._removeClass(I.$element,"ui-selecting")._addClass(I.$element,"ui-selected"),I.selecting=!1,I.selected=!0,I.startselected=!0,w._trigger("selected",d,{selected:I.element})}),this._trigger("stop",d),this.helper.remove(),!1}});/*!
 * jQuery UI Selectmenu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectmenu",[g.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var d=this.element.uniqueId().attr("id");this.ids={element:d,button:d+"-button",menu:d+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=g()},_drawButton:function(){var d,w=this,I=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(k){this.button.trigger("focus"),k.preventDefault()}}),this.element.hide(),this.button=g("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),d=g("<span>").appendTo(this.button),this._addClass(d,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(I).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){w._rendered||w._refreshMenu()})},_drawMenu:function(){var d=this;this.menu=g("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=g("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(w,I){w.preventDefault(),d._setSelection(),d._select(I.item.data("ui-selectmenu-item"),w)},focus:function(w,I){var k=I.item.data("ui-selectmenu-item");d.focusIndex!=null&&k.index!==d.focusIndex&&(d._trigger("focus",w,{item:k}),d.isOpen||d._select(k,w)),d.focusIndex=k.index,d.button.attr("aria-activedescendant",d.menuItems.eq(k.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),this.options.width===null&&this._resizeButton()},_refreshMenu:function(){var d,w=this.element.find("option");this.menu.empty(),this._parseOptions(w),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,w.length&&(d=this._getSelectedItem(),this.menuInstance.focus(null,d),this._setAria(d.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(d){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",d)))},_position:function(){this.menuWrap.position(g.extend({of:this.button},this.options.position))},close:function(d){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",d))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(d){var w=g("<span>");return this._setText(w,d.label),this._addClass(w,"ui-selectmenu-text"),w},_renderMenu:function(d,w){var I=this,k="";g.each(w,function(R,W){var se;W.optgroup!==k&&(se=g("<li>",{text:W.optgroup}),I._addClass(se,"ui-selectmenu-optgroup","ui-menu-divider"+(W.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),se.appendTo(d),k=W.optgroup),I._renderItemData(d,W)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-selectmenu-item",w)},_renderItem:function(d,w){var I=g("<li>"),k=g("<div>",{title:w.element.attr("title")});return w.disabled&&this._addClass(I,null,"ui-state-disabled"),this._setText(k,w.label),I.append(k).appendTo(d)},_setText:function(d,w){w?d.text(w):d.html("&#160;")},_move:function(d,w){var I,k,R=".ui-menu-item";this.isOpen?I=this.menuItems.eq(this.focusIndex).parent("li"):(I=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),R+=":not(.ui-state-disabled)"),d==="first"||d==="last"?k=I[d==="first"?"prevAll":"nextAll"](R).eq(-1):k=I[d+"All"](R).eq(0),k.length&&this.menuInstance.focus(w,k)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(d){this[this.isOpen?"close":"open"](d)},_setSelection:function(){var d;this.range&&(window.getSelection?(d=window.getSelection(),d.removeAllRanges(),d.addRange(this.range)):this.range.select(),this.button.trigger("focus"))},_documentClick:{mousedown:function(d){this.isOpen&&(g(d.target).closest(".ui-selectmenu-menu, #"+g.escapeSelector(this.ids.button)).length||this.close(d))}},_buttonEvents:{mousedown:function(){var d;window.getSelection?(d=window.getSelection(),d.rangeCount&&(this.range=d.getRangeAt(0))):this.range=document.selection.createRange()},click:function(d){this._setSelection(),this._toggle(d)},keydown:function(d){var w=!0;switch(d.keyCode){case g.ui.keyCode.TAB:case g.ui.keyCode.ESCAPE:this.close(d),w=!1;break;case g.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(d);break;case g.ui.keyCode.UP:d.altKey?this._toggle(d):this._move("prev",d);break;case g.ui.keyCode.DOWN:d.altKey?this._toggle(d):this._move("next",d);break;case g.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(d):this._toggle(d);break;case g.ui.keyCode.LEFT:this._move("prev",d);break;case g.ui.keyCode.RIGHT:this._move("next",d);break;case g.ui.keyCode.HOME:case g.ui.keyCode.PAGE_UP:this._move("first",d);break;case g.ui.keyCode.END:case g.ui.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d),w=!1}w&&d.preventDefault()}},_selectFocusedItem:function(d){var w=this.menuItems.eq(this.focusIndex).parent("li");w.hasClass("ui-state-disabled")||this._select(w.data("ui-selectmenu-item"),d)},_select:function(d,w){var I=this.element[0].selectedIndex;this.element[0].selectedIndex=d.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(d)),this._setAria(d),this._trigger("select",w,{item:d}),d.index!==I&&this._trigger("change",w,{item:d}),this.close(w)},_setAria:function(d){var w=this.menuItems.eq(d.index).attr("id");this.button.attr({"aria-labelledby":w,"aria-activedescendant":w}),this.menu.attr("aria-activedescendant",w)},_setOption:function(d,w){if(d==="icons"){var I=this.button.find("span.ui-icon");this._removeClass(I,null,this.options.icons.button)._addClass(I,null,w.button)}this._super(d,w),d==="appendTo"&&this.menuWrap.appendTo(this._appendTo()),d==="width"&&this._resizeButton()},_setOptionDisabled:function(d){this._super(d),this.menuInstance.option("disabled",d),this.button.attr("aria-disabled",d),this._toggleClass(this.button,null,"ui-state-disabled",d),this.element.prop("disabled",d),d?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var d=this.options.width;if(d===!1){this.button.css("width","");return}d===null&&(d=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(d)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var d=this._super();return d.disabled=this.element.prop("disabled"),d},_parseOptions:function(d){var w=this,I=[];d.each(function(k,R){R.hidden||I.push(w._parseOption(g(R),k))}),this.items=I},_parseOption:function(d,w){var I=d.parent("optgroup");return{element:d,index:w,value:d.val(),label:d.text(),optgroup:I.attr("label")||"",disabled:I.prop("disabled")||d.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]);/*!
 * jQuery UI Slider 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.slider",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var d,w,I=this.options,k=this.element.find(".ui-slider-handle"),R="<span tabindex='0'></span>",W=[];for(w=I.values&&I.values.length||1,k.length>w&&(k.slice(w).remove(),k=k.slice(0,w)),d=k.length;d<w;d++)W.push(R);this.handles=k.add(g(W.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(se){g(this).data("ui-slider-handle-index",se).attr("tabIndex",0)})},_createRange:function(){var d=this.options;d.range?(d.range===!0&&(d.values?d.values.length&&d.values.length!==2?d.values=[d.values[0],d.values[0]]:Array.isArray(d.values)&&(d.values=d.values.slice(0)):d.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=g("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")):(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})),(d.range==="min"||d.range==="max")&&this._addClass(this.range,"ui-slider-range-"+d.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(d){var w,I,k,R,W,se,oe,ue,we=this,Te=this.options;return Te.disabled||(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),w={x:d.pageX,y:d.pageY},I=this._normValueFromMouse(w),k=this._valueMax()-this._valueMin()+1,this.handles.each(function(Ve){var De=Math.abs(I-we.values(Ve));(k>De||k===De&&(Ve===we._lastChangedValue||we.values(Ve)===Te.min))&&(k=De,R=g(this),W=Ve)}),se=this._start(d,W),se===!1)?!1:(this._mouseSliding=!0,this._handleIndex=W,this._addClass(R,null,"ui-state-active"),R.trigger("focus"),oe=R.offset(),ue=!g(d.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=ue?{left:0,top:0}:{left:d.pageX-oe.left-R.width()/2,top:d.pageY-oe.top-R.height()/2-(parseInt(R.css("borderTopWidth"),10)||0)-(parseInt(R.css("borderBottomWidth"),10)||0)+(parseInt(R.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(d,W,I),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(d){var w={x:d.pageX,y:d.pageY},I=this._normValueFromMouse(w);return this._slide(d,this._handleIndex,I),!1},_mouseStop:function(d){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(d,this._handleIndex),this._change(d,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var w,I,k,R,W;return this.orientation==="horizontal"?(w=this.elementSize.width,I=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(w=this.elementSize.height,I=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),k=I/w,k>1&&(k=1),k<0&&(k=0),this.orientation==="vertical"&&(k=1-k),R=this._valueMax()-this._valueMin(),W=this._valueMin()+k*R,this._trimAlignValue(W)},_uiHash:function(d,w,I){var k={handle:this.handles[d],handleIndex:d,value:w!==void 0?w:this.value()};return this._hasMultipleValues()&&(k.value=w!==void 0?w:this.values(d),k.values=I||this.values()),k},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(d,w){return this._trigger("start",d,this._uiHash(w))},_slide:function(d,w,I){var k,R,W=this.value(),se=this.values();this._hasMultipleValues()&&(R=this.values(w?0:1),W=this.values(w),this.options.values.length===2&&this.options.range===!0&&(I=w===0?Math.min(R,I):Math.max(R,I)),se[w]=I),I!==W&&(k=this._trigger("slide",d,this._uiHash(w,I,se)),k!==!1&&(this._hasMultipleValues()?this.values(w,I):this.value(I)))},_stop:function(d,w){this._trigger("stop",d,this._uiHash(w))},_change:function(d,w){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=w,this._trigger("change",d,this._uiHash(w)))},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(d,w){var I,k,R;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(w),this._refreshValue(),this._change(null,d);return}if(arguments.length)if(Array.isArray(arguments[0])){for(I=this.options.values,k=arguments[0],R=0;R<I.length;R+=1)I[R]=this._trimAlignValue(k[R]),this._change(null,R);this._refreshValue()}else return this._hasMultipleValues()?this._values(d):this.value();else return this._values()},_setOption:function(d,w){var I,k=0;switch(d==="range"&&this.options.range===!0&&(w==="min"?(this.options.value=this._values(0),this.options.values=null):w==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(k=this.options.values.length),this._super(d,w),d){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(w),this.handles.css(w==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),I=k-1;I>=0;I--)this._change(null,I);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1;break}},_setOptionDisabled:function(d){this._super(d),this._toggleClass(null,"ui-state-disabled",!!d)},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d),d},_values:function(d){var w,I,k;if(arguments.length)return w=this.options.values[d],w=this._trimAlignValue(w),w;if(this._hasMultipleValues()){for(I=this.options.values.slice(),k=0;k<I.length;k+=1)I[k]=this._trimAlignValue(I[k]);return I}else return[]},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var w=this.options.step>0?this.options.step:1,I=(d-this._valueMin())%w,k=d-I;return Math.abs(I)*2>=w&&(k+=I>0?w:-w),parseFloat(k.toFixed(5))},_calculateNewMax:function(){var d=this.options.max,w=this._valueMin(),I=this.options.step,k=Math.round((d-w)/I)*I;d=k+w,d>this.options.max&&(d-=I),this.max=parseFloat(d.toFixed(this._precision()))},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),I=w.indexOf(".");return I===-1?0:w.length-I-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(d){d==="vertical"&&this.range.css({width:"",left:""}),d==="horizontal"&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var d,w,I,k,R,W=this.options.range,se=this.options,oe=this,ue=this._animateOff?!1:se.animate,we={};this._hasMultipleValues()?this.handles.each(function(Te){w=(oe.values(Te)-oe._valueMin())/(oe._valueMax()-oe._valueMin())*100,we[oe.orientation==="horizontal"?"left":"bottom"]=w+"%",g(this).stop(1,1)[ue?"animate":"css"](we,se.animate),oe.options.range===!0&&(oe.orientation==="horizontal"?(Te===0&&oe.range.stop(1,1)[ue?"animate":"css"]({left:w+"%"},se.animate),Te===1&&oe.range[ue?"animate":"css"]({width:w-d+"%"},{queue:!1,duration:se.animate})):(Te===0&&oe.range.stop(1,1)[ue?"animate":"css"]({bottom:w+"%"},se.animate),Te===1&&oe.range[ue?"animate":"css"]({height:w-d+"%"},{queue:!1,duration:se.animate}))),d=w}):(I=this.value(),k=this._valueMin(),R=this._valueMax(),w=R!==k?(I-k)/(R-k)*100:0,we[this.orientation==="horizontal"?"left":"bottom"]=w+"%",this.handle.stop(1,1)[ue?"animate":"css"](we,se.animate),W==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[ue?"animate":"css"]({width:w+"%"},se.animate),W==="max"&&this.orientation==="horizontal"&&this.range.stop(1,1)[ue?"animate":"css"]({width:100-w+"%"},se.animate),W==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[ue?"animate":"css"]({height:w+"%"},se.animate),W==="max"&&this.orientation==="vertical"&&this.range.stop(1,1)[ue?"animate":"css"]({height:100-w+"%"},se.animate))},_handleEvents:{keydown:function(d){var w,I,k,R,W=g(d.target).data("ui-slider-handle-index");switch(d.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(d.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(g(d.target),null,"ui-state-active"),w=this._start(d,W),w===!1))return;break}switch(R=this.options.step,this._hasMultipleValues()?I=k=this.values(W):I=k=this.value(),d.keyCode){case g.ui.keyCode.HOME:k=this._valueMin();break;case g.ui.keyCode.END:k=this._valueMax();break;case g.ui.keyCode.PAGE_UP:k=this._trimAlignValue(I+(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.PAGE_DOWN:k=this._trimAlignValue(I-(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:if(I===this._valueMax())return;k=this._trimAlignValue(I+R);break;case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(I===this._valueMin())return;k=this._trimAlignValue(I-R);break}this._slide(d,W,k)},keyup:function(d){var w=g(d.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(d,w),this._change(d,w),this._removeClass(g(d.target),null,"ui-state-active"))}}});/*!
 * jQuery UI Sortable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.sortable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(d,w,I){return d>=w&&d<w+I},_isFloating:function(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(d,w){this._super(d,w),d==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var d=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),g.each(this.items,function(){d._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(d,w){var I=null,k=!1,R=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(d),g(d.target).parents().each(function(){if(g.data(this,R.widgetName+"-item")===R)return I=g(this),!1}),g.data(d.target,R.widgetName+"-item")===R&&(I=g(d.target)),!I)||this.options.handle&&!w&&(g(this.options.handle,I).find("*").addBack().each(function(){this===d.target&&(k=!0)}),!k)?!1:(this.currentItem=I,this._removeCurrentsFromItems(),!0)},_mouseStart:function(d,w,I){var k,R,W=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=g(W.appendTo!=="parent"?W.appendTo:this.currentItem.parent()),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},g.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),W.cursorAt&&this._adjustOffsetFromHelper(W.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),g.extend(this.offset,{parent:this._getParentOffset()}),W.containment&&this._setContainment(),W.cursor&&W.cursor!=="auto"&&(R=this.document.find("body"),this.storedCursor=R.css("cursor"),R.css("cursor",W.cursor),this.storedStylesheet=g("<style>*{ cursor: "+W.cursor+" !important; }</style>").appendTo(R)),W.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",W.zIndex)),W.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",W.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!I)for(k=this.containers.length-1;k>=0;k--)this.containers[k]._trigger("activate",d,this._uiHash(this));return g.ui.ddmanager&&(g.ui.ddmanager.current=this),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(d),!0},_scroll:function(d){var w=this.options,I=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<w.scrollSensitivity?this.scrollParent[0].scrollTop=I=this.scrollParent[0].scrollTop+w.scrollSpeed:d.pageY-this.overflowOffset.top<w.scrollSensitivity&&(this.scrollParent[0].scrollTop=I=this.scrollParent[0].scrollTop-w.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<w.scrollSensitivity?this.scrollParent[0].scrollLeft=I=this.scrollParent[0].scrollLeft+w.scrollSpeed:d.pageX-this.overflowOffset.left<w.scrollSensitivity&&(this.scrollParent[0].scrollLeft=I=this.scrollParent[0].scrollLeft-w.scrollSpeed)):(d.pageY-this.document.scrollTop()<w.scrollSensitivity?I=this.document.scrollTop(this.document.scrollTop()-w.scrollSpeed):this.window.height()-(d.pageY-this.document.scrollTop())<w.scrollSensitivity&&(I=this.document.scrollTop(this.document.scrollTop()+w.scrollSpeed)),d.pageX-this.document.scrollLeft()<w.scrollSensitivity?I=this.document.scrollLeft(this.document.scrollLeft()-w.scrollSpeed):this.window.width()-(d.pageX-this.document.scrollLeft())<w.scrollSensitivity&&(I=this.document.scrollLeft(this.document.scrollLeft()+w.scrollSpeed))),I},_mouseDrag:function(d){var w,I,k,R,W=this.options;for(this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),W.scroll&&this._scroll(d)!==!1&&(this._refreshItemPositions(!0),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},w=this.items.length-1;w>=0;w--)if(I=this.items[w],k=I.item[0],R=this._intersectsWithPointer(I),!!R&&I.instance===this.currentContainer&&k!==this.currentItem[0]&&this.placeholder[R===1?"next":"prev"]()[0]!==k&&!g.contains(this.placeholder[0],k)&&(this.options.type!=="semi-dynamic"||!g.contains(this.element[0],k))){if(this.direction=R===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(I))this._rearrange(d,I);else break;this._trigger("change",d,this._uiHash());break}return this._contactContainers(d),g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),this._trigger("sort",d,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,w){if(d){if(g.ui.ddmanager&&!this.options.dropBehaviour&&g.ui.ddmanager.drop(this,d),this.options.revert){var I=this,k=this.placeholder.offset(),R=this.options.axis,W={};(!R||R==="x")&&(W.left=k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!R||R==="y")&&(W.top=k.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,g(this.helper).animate(W,parseInt(this.options.revert,10)||500,function(){I._clear(d)})}else this._clear(d,w);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new g.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),g.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?g(this.domPosition.prev).after(this.currentItem):g(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(d){var w=this._getItemsAsjQuery(d&&d.connected),I=[];return d=d||{},g(w).each(function(){var k=(g(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[\-=_](.+)/);k&&I.push((d.key||k[1]+"[]")+"="+(d.key&&d.expression?k[1]:k[2]))}),!I.length&&d.key&&I.push(d.key+"="),I.join("&")},toArray:function(d){var w=this._getItemsAsjQuery(d&&d.connected),I=[];return d=d||{},w.each(function(){I.push(g(d.item||this).attr(d.attribute||"id")||"")}),I},_intersectsWith:function(d){var w=this.positionAbs.left,I=w+this.helperProportions.width,k=this.positionAbs.top,R=k+this.helperProportions.height,W=d.left,se=W+d.width,oe=d.top,ue=oe+d.height,we=this.offset.click.top,Te=this.offset.click.left,Ve=this.options.axis==="x"||k+we>oe&&k+we<ue,De=this.options.axis==="y"||w+Te>W&&w+Te<se,me=Ve&&De;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?me:W<w+this.helperProportions.width/2&&I-this.helperProportions.width/2<se&&oe<k+this.helperProportions.height/2&&R-this.helperProportions.height/2<ue},_intersectsWithPointer:function(d){var w,I,k=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),R=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),W=k&&R;return W?(w=this.dragDirection.vertical,I=this.dragDirection.horizontal,this.floating?I==="right"||w==="down"?2:1:w&&(w==="down"?2:1)):!1},_intersectsWithSides:function(d){var w=this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),I=this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),k=this.dragDirection.vertical,R=this.dragDirection.horizontal;return this.floating&&R?R==="right"&&I||R==="left"&&!I:k&&(k==="down"&&w||k==="up"&&!w)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!==0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!==0&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var w,I,k,R,W=[],se=[],oe=this._connectWith();if(oe&&d)for(w=oe.length-1;w>=0;w--)for(k=g(oe[w],this.document[0]),I=k.length-1;I>=0;I--)R=g.data(k[I],this.widgetFullName),R&&R!==this&&!R.options.disabled&&se.push([typeof R.options.items=="function"?R.options.items.call(R.element):g(R.options.items,R.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),R]);se.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):g(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function ue(){W.push(this)}for(w=se.length-1;w>=0;w--)se[w][0].each(ue);return g(W)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=g.grep(this.items,function(w){for(var I=0;I<d.length;I++)if(d[I]===w.item[0])return!1;return!0})},_refreshItems:function(d){this.items=[],this.containers=[this];var w,I,k,R,W,se,oe,ue,we=this.items,Te=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],d,{item:this.currentItem}):g(this.options.items,this.element),this]],Ve=this._connectWith();if(Ve&&this.ready)for(w=Ve.length-1;w>=0;w--)for(k=g(Ve[w],this.document[0]),I=k.length-1;I>=0;I--)R=g.data(k[I],this.widgetFullName),R&&R!==this&&!R.options.disabled&&(Te.push([typeof R.options.items=="function"?R.options.items.call(R.element[0],d,{item:this.currentItem}):g(R.options.items,R.element),R]),this.containers.push(R));for(w=Te.length-1;w>=0;w--)for(W=Te[w][1],se=Te[w][0],I=0,ue=se.length;I<ue;I++)oe=g(se[I]),oe.data(this.widgetName+"-item",W),we.push({item:oe,instance:W,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(d){var w,I,k,R;for(w=this.items.length-1;w>=0;w--)I=this.items[w],!(this.currentContainer&&I.instance!==this.currentContainer&&I.item[0]!==this.currentItem[0])&&(k=this.options.toleranceElement?g(this.options.toleranceElement,I.item):I.item,d||(I.width=k.outerWidth(),I.height=k.outerHeight()),R=k.offset(),I.left=R.left,I.top=R.top)},refreshPositions:function(d){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(d);var w,I;if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(w=this.containers.length-1;w>=0;w--)I=this.containers[w].element.offset(),this.containers[w].containerCache.left=I.left,this.containers[w].containerCache.top=I.top,this.containers[w].containerCache.width=this.containers[w].element.outerWidth(),this.containers[w].containerCache.height=this.containers[w].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var w,I,k=d.options;(!k.placeholder||k.placeholder.constructor===String)&&(w=k.placeholder,I=d.currentItem[0].nodeName.toLowerCase(),k.placeholder={element:function(){var R=g("<"+I+">",d.document[0]);return d._addClass(R,"ui-sortable-placeholder",w||d.currentItem[0].className)._removeClass(R,"ui-sortable-helper"),I==="tbody"?d._createTrPlaceholder(d.currentItem.find("tr").eq(0),g("<tr>",d.document[0]).appendTo(R)):I==="tr"?d._createTrPlaceholder(d.currentItem,R):I==="img"&&R.attr("src",d.currentItem.attr("src")),w||R.css("visibility","hidden"),R},update:function(R,W){w&&!k.forcePlaceholderSize||((!W.height()||k.forcePlaceholderSize&&(I==="tbody"||I==="tr"))&&W.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),W.width()||W.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10)))}}),d.placeholder=g(k.placeholder.element.call(d.element,d.currentItem)),d.currentItem.after(d.placeholder),k.placeholder.update(d,d.placeholder)},_createTrPlaceholder:function(d,w){var I=this;d.children().each(function(){g("<td>&#160;</td>",I.document[0]).attr("colspan",g(this).attr("colspan")||1).appendTo(w)})},_contactContainers:function(d){var w,I,k,R,W,se,oe,ue,we,Te,Ve=null,De=null;for(w=this.containers.length-1;w>=0;w--)if(!g.contains(this.currentItem[0],this.containers[w].element[0]))if(this._intersectsWith(this.containers[w].containerCache)){if(Ve&&g.contains(this.containers[w].element[0],Ve.element[0]))continue;Ve=this.containers[w],De=w}else this.containers[w].containerCache.over&&(this.containers[w]._trigger("out",d,this._uiHash(this)),this.containers[w].containerCache.over=0);if(Ve)if(this.containers.length===1)this.containers[De].containerCache.over||(this.containers[De]._trigger("over",d,this._uiHash(this)),this.containers[De].containerCache.over=1);else{for(k=1e4,R=null,we=Ve.floating||this._isFloating(this.currentItem),W=we?"left":"top",se=we?"width":"height",Te=we?"pageX":"pageY",I=this.items.length-1;I>=0;I--)g.contains(this.containers[De].element[0],this.items[I].item[0])&&this.items[I].item[0]!==this.currentItem[0]&&(oe=this.items[I].item.offset()[W],ue=!1,d[Te]-oe>this.items[I][se]/2&&(ue=!0),Math.abs(d[Te]-oe)<k&&(k=Math.abs(d[Te]-oe),R=this.items[I],this.direction=ue?"up":"down"));if(!R&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[De]){this.currentContainer.containerCache.over||(this.containers[De]._trigger("over",d,this._uiHash()),this.currentContainer.containerCache.over=1);return}R?this._rearrange(d,R,null,!0):this._rearrange(d,null,this.containers[De].element,!0),this._trigger("change",d,this._uiHash()),this.containers[De]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[De],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[De]._trigger("over",d,this._uiHash(this)),this.containers[De].containerCache.over=1}},_createHelper:function(d){var w=this.options,I=typeof w.helper=="function"?g(w.helper.apply(this.element[0],[d,this.currentItem])):w.helper==="clone"?this.currentItem.clone():this.currentItem;return I.parents("body").length||this.appendTo[0].appendChild(I[0]),I[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!I[0].style.width||w.forceHelperSize)&&I.width(this.currentItem.width()),(!I[0].style.height||w.forceHelperSize)&&I.height(this.currentItem.height()),I},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&g.ui.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,I,k=this.options;k.containment==="parent"&&(k.containment=this.helper[0].parentNode),(k.containment==="document"||k.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,k.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(k.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(k.containment)||(d=g(k.containment)[0],w=g(k.containment).offset(),I=g(d).css("overflow")!=="hidden",this.containment=[w.left+(parseInt(g(d).css("borderLeftWidth"),10)||0)+(parseInt(g(d).css("paddingLeft"),10)||0)-this.margins.left,w.top+(parseInt(g(d).css("borderTopWidth"),10)||0)+(parseInt(g(d).css("paddingTop"),10)||0)-this.margins.top,w.left+(I?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(g(d).css("borderLeftWidth"),10)||0)-(parseInt(g(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,w.top+(I?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(g(d).css("borderTopWidth"),10)||0)-(parseInt(g(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,w){w||(w=this.position);var I=d==="absolute"?1:-1,k=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,R=/(html|body)/i.test(k[0].tagName);return{top:w.top+this.offset.relative.top*I+this.offset.parent.top*I-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():R?0:k.scrollTop())*I,left:w.left+this.offset.relative.left*I+this.offset.parent.left*I-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():R?0:k.scrollLeft())*I}},_generatePosition:function(d){var w,I,k=this.options,R=d.pageX,W=d.pageY,se=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,oe=/(html|body)/i.test(se[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(R=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(W=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(R=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(W=this.containment[3]+this.offset.click.top)),k.grid&&(w=this.originalPageY+Math.round((W-this.originalPageY)/k.grid[1])*k.grid[1],W=this.containment?w-this.offset.click.top>=this.containment[1]&&w-this.offset.click.top<=this.containment[3]?w:w-this.offset.click.top>=this.containment[1]?w-k.grid[1]:w+k.grid[1]:w,I=this.originalPageX+Math.round((R-this.originalPageX)/k.grid[0])*k.grid[0],R=this.containment?I-this.offset.click.left>=this.containment[0]&&I-this.offset.click.left<=this.containment[2]?I:I-this.offset.click.left>=this.containment[0]?I-k.grid[0]:I+k.grid[0]:I)),{top:W-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():oe?0:se.scrollTop()),left:R-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():oe?0:se.scrollLeft())}},_rearrange:function(d,w,I,k){I?I[0].appendChild(this.placeholder[0]):w.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?w.item[0]:w.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var R=this.counter;this._delay(function(){R===this.counter&&this.refreshPositions(!k)})},_clear:function(d,w){this.reverting=!1;var I,k=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(I in this._storedCSS)(this._storedCSS[I]==="auto"||this._storedCSS[I]==="static")&&(this._storedCSS[I]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!w&&k.push(function(W){this._trigger("receive",W,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!w&&k.push(function(W){this._trigger("update",W,this._uiHash())}),this!==this.currentContainer&&(w||(k.push(function(W){this._trigger("remove",W,this._uiHash())}),k.push((function(W){return function(se){W._trigger("receive",se,this._uiHash(this))}}).call(this,this.currentContainer)),k.push((function(W){return function(se){W._trigger("update",se,this._uiHash(this))}}).call(this,this.currentContainer))));function R(W,se,oe){return function(ue){oe._trigger(W,ue,se._uiHash(se))}}for(I=this.containers.length-1;I>=0;I--)w||k.push(R("deactivate",this,this.containers[I])),this.containers[I].containerCache.over&&(k.push(R("out",this,this.containers[I])),this.containers[I].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,w||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!w){for(I=0;I<k.length;I++)k[I].call(this,d);this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){g.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var w=d||this;return{helper:w.helper,placeholder:w.placeholder||g([]),position:w.position,originalPosition:w.originalPosition,offset:w.positionAbs,item:w.currentItem,sender:d?d.element:null}}});/*!
 * jQuery UI Spinner 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */function vi(d){return function(){var w=this.element.val();d.apply(this,arguments),this._refresh(),w!==this.element.val()&&this._trigger("change")}}g.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d=this._super(),w=this.element;return g.each(["min","max","step"],function(I,k){var R=w.attr(k);R!=null&&R.length&&(d[k]=R)}),d},_events:{keydown:function(d){this._start(d)&&this._keydown(d)&&d.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(d){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",d)},mousewheel:function(d,w){var I=g.ui.safeActiveElement(this.document[0]),k=this.element[0]===I;if(!(!k||!w)){if(!this.spinning&&!this._start(d))return!1;this._spin((w>0?1:-1)*this.options.step,d),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(d)},100),d.preventDefault()}},"mousedown .ui-spinner-button":function(d){var w;w=this.element[0]===g.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function I(){var k=this.element[0]===g.ui.safeActiveElement(this.document[0]);k||(this.element.trigger("focus"),this.previous=w,this._delay(function(){this.previous=w}))}d.preventDefault(),I.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,I.call(this)}),this._start(d)!==!1&&this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(d){if(g(d.currentTarget).hasClass("ui-state-active")){if(this._start(d)===!1)return!1;this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)}},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(d){var w=this.options,I=g.ui.keyCode;switch(d.keyCode){case I.UP:return this._repeat(null,1,d),!0;case I.DOWN:return this._repeat(null,-1,d),!0;case I.PAGE_UP:return this._repeat(null,w.page,d),!0;case I.PAGE_DOWN:return this._repeat(null,-w.page,d),!0}return!1},_start:function(d){return!this.spinning&&this._trigger("start",d)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(d,w,I){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,w,I)},d),this._spin(w*this.options.step,I)},_spin:function(d,w){var I=this.value()||0;this.counter||(this.counter=1),I=this._adjustValue(I+d*this._increment(this.counter)),(!this.spinning||this._trigger("spin",w,{value:I})!==!1)&&(this._value(I),this.counter++)},_increment:function(d){var w=this.options.incremental;return w?typeof w=="function"?w(d):Math.floor(d*d*d/5e4-d*d/500+17*d/200+1):1},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),I=w.indexOf(".");return I===-1?0:w.length-I-1},_adjustValue:function(d){var w,I,k=this.options;return w=k.min!==null?k.min:0,I=d-w,I=Math.round(I/k.step)*k.step,d=w+I,d=parseFloat(d.toFixed(this._precision())),k.max!==null&&d>k.max?k.max:k.min!==null&&d<k.min?k.min:d},_stop:function(d){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",d))},_setOption:function(d,w){var I,k,R;if(d==="culture"||d==="numberFormat"){I=this._parse(this.element.val()),this.options[d]=w,this.element.val(this._format(I));return}(d==="max"||d==="min"||d==="step")&&typeof w=="string"&&(w=this._parse(w)),d==="icons"&&(k=this.buttons.first().find(".ui-icon"),this._removeClass(k,null,this.options.icons.up),this._addClass(k,null,w.up),R=this.buttons.last().find(".ui-icon"),this._removeClass(R,null,this.options.icons.down),this._addClass(R,null,w.down)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!d),this.element.prop("disabled",!!d),this.buttons.button(d?"disable":"enable")},_setOptions:vi(function(d){this._super(d)}),_parse:function(d){return typeof d=="string"&&d!==""&&(d=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(d,10,this.options.culture):+d),d===""||isNaN(d)?null:d},_format:function(d){return d===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(d,this.options.numberFormat,this.options.culture):d},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var d=this.value();return d===null?!1:d===this._adjustValue(d)},_value:function(d,w){var I;d!==""&&(I=this._parse(d),I!==null&&(w||(I=this._adjustValue(I)),d=this._format(I))),this.element.val(d),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:vi(function(d){this._stepUp(d)}),_stepUp:function(d){this._start()&&(this._spin((d||1)*this.options.step),this._stop())},stepDown:vi(function(d){this._stepDown(d)}),_stepDown:function(d){this._start()&&(this._spin((d||1)*-this.options.step),this._stop())},pageUp:vi(function(d){this._stepUp((d||1)*this.options.page)}),pageDown:vi(function(d){this._stepDown((d||1)*this.options.page)}),value:function(d){if(!arguments.length)return this._parse(this.element.val());vi(this._value).call(this,d)},widget:function(){return this.uiSpinner}}),g.uiBackCompat!==!1&&g.widget("ui.spinner",g.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),g.ui.spinner;/*!
 * jQuery UI Tabs 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var d=/#.*$/;return function(w){var I,k;I=w.href.replace(d,""),k=location.href.replace(d,"");try{I=decodeURIComponent(I)}catch{}try{k=decodeURIComponent(k)}catch{}return w.hash.length>1&&I===k}}(),_create:function(){var d=this,w=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,w.collapsible),this._processTabs(),w.active=this._initialActive(),Array.isArray(w.disabled)&&(w.disabled=g.uniqueSort(w.disabled.concat(g.map(this.tabs.filter(".ui-state-disabled"),function(I){return d.tabs.index(I)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(w.active):this.active=g(),this._refresh(),this.active.length&&this.load(w.active)},_initialActive:function(){var d=this.options.active,w=this.options.collapsible,I=location.hash.substring(1);return d===null&&(I&&this.tabs.each(function(k,R){if(g(R).attr("aria-controls")===I)return d=k,!1}),d===null&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(d===null||d===-1)&&(d=this.tabs.length?0:!1)),d!==!1&&(d=this.tabs.index(this.tabs.eq(d)),d===-1&&(d=w?!1:0)),!w&&d===!1&&this.anchors.length&&(d=0),d},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):g()}},_tabKeydown:function(d){var w=g(g.ui.safeActiveElement(this.document[0])).closest("li"),I=this.tabs.index(w),k=!0;if(!this._handlePageNav(d)){switch(d.keyCode){case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:I++;break;case g.ui.keyCode.UP:case g.ui.keyCode.LEFT:k=!1,I--;break;case g.ui.keyCode.END:I=this.anchors.length-1;break;case g.ui.keyCode.HOME:I=0;break;case g.ui.keyCode.SPACE:d.preventDefault(),clearTimeout(this.activating),this._activate(I);return;case g.ui.keyCode.ENTER:d.preventDefault(),clearTimeout(this.activating),this._activate(I===this.options.active?!1:I);return;default:return}d.preventDefault(),clearTimeout(this.activating),I=this._focusNextTab(I,k),!d.ctrlKey&&!d.metaKey&&(w.attr("aria-selected","false"),this.tabs.eq(I).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",I)},this.delay))}},_panelKeydown:function(d){this._handlePageNav(d)||d.ctrlKey&&d.keyCode===g.ui.keyCode.UP&&(d.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(d){if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(d,w){var I=this.tabs.length-1;function k(){return d>I&&(d=0),d<0&&(d=I),d}for(;g.inArray(k(),this.options.disabled)!==-1;)d=w?d+1:d-1;return d},_focusNextTab:function(d,w){return d=this._findNextTab(d,w),this.tabs.eq(d).trigger("focus"),d},_setOption:function(d,w){if(d==="active"){this._activate(w);return}this._super(d,w),d==="collapsible"&&(this._toggleClass("ui-tabs-collapsible",null,w),!w&&this.options.active===!1&&this._activate(0)),d==="event"&&this._setupEvents(w),d==="heightStyle"&&this._setupHeightStyle(w)},_sanitizeSelector:function(d){return d?d.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,w=this.tablist.children(":has(a[href])");d.disabled=g.map(w.filter(".ui-state-disabled"),function(I){return w.index(I)}),this._processTabs(),d.active===!1||!this.anchors.length?(d.active=!1,this.active=g()):this.active.length&&!g.contains(this.tablist[0],this.active[0])?this.tabs.length===d.disabled.length?(d.active=!1,this.active=g()):this._activate(this._findNextTab(Math.max(0,d.active-1),!1)):d.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this,w=this.tabs,I=this.anchors,k=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(R){g(this).is(".ui-state-disabled")&&R.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){g(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return g("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=g(),this.anchors.each(function(R,W){var se,oe,ue,we=g(W).uniqueId().attr("id"),Te=g(W).closest("li"),Ve=Te.attr("aria-controls");d._isLocal(W)?(se=W.hash,ue=se.substring(1),oe=d.element.find(d._sanitizeSelector(se))):(ue=Te.attr("aria-controls")||g({}).uniqueId()[0].id,se="#"+ue,oe=d.element.find(se),oe.length||(oe=d._createPanel(ue),oe.insertAfter(d.panels[R-1]||d.tablist)),oe.attr("aria-live","polite")),oe.length&&(d.panels=d.panels.add(oe)),Ve&&Te.data("ui-tabs-aria-controls",Ve),Te.attr({"aria-controls":ue,"aria-labelledby":we}),oe.attr("aria-labelledby",we)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),w&&(this._off(w.not(this.tabs)),this._off(I.not(this.anchors)),this._off(k.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(d){return g("<div>").attr("id",d).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(d){var w,I,k;for(Array.isArray(d)&&(d.length?d.length===this.anchors.length&&(d=!0):d=!1),k=0;I=this.tabs[k];k++)w=g(I),d===!0||g.inArray(k,d)!==-1?(w.attr("aria-disabled","true"),this._addClass(w,null,"ui-state-disabled")):(w.removeAttr("aria-disabled"),this._removeClass(w,null,"ui-state-disabled"));this.options.disabled=d,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,d===!0)},_setupEvents:function(d){var w={};d&&g.each(d.split(" "),function(I,k){w[k]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(I){I.preventDefault()}}),this._on(this.anchors,w),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(d){var w,I=this.element.parent();d==="fill"?(w=I.height(),w-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var k=g(this),R=k.css("position");R==="absolute"||R==="fixed"||(w-=k.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){w-=g(this).outerHeight(!0)}),this.panels.each(function(){g(this).height(Math.max(0,w-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):d==="auto"&&(w=0,this.panels.each(function(){w=Math.max(w,g(this).height("").height())}).height(w))},_eventHandler:function(d){var w=this.options,I=this.active,k=g(d.currentTarget),R=k.closest("li"),W=R[0]===I[0],se=W&&w.collapsible,oe=se?g():this._getPanelForTab(R),ue=I.length?this._getPanelForTab(I):g(),we={oldTab:I,oldPanel:ue,newTab:se?g():R,newPanel:oe};d.preventDefault(),!(R.hasClass("ui-state-disabled")||R.hasClass("ui-tabs-loading")||this.running||W&&!w.collapsible||this._trigger("beforeActivate",d,we)===!1)&&(w.active=se?!1:this.tabs.index(R),this.active=W?g():R,this.xhr&&this.xhr.abort(),!ue.length&&!oe.length&&g.error("jQuery UI Tabs: Mismatching fragment identifier."),oe.length&&this.load(this.tabs.index(R),d),this._toggle(d,we))},_toggle:function(d,w){var I=this,k=w.newPanel,R=w.oldPanel;this.running=!0;function W(){I.running=!1,I._trigger("activate",d,w)}function se(){I._addClass(w.newTab.closest("li"),"ui-tabs-active","ui-state-active"),k.length&&I.options.show?I._show(k,I.options.show,W):(k.show(),W())}R.length&&this.options.hide?this._hide(R,this.options.hide,function(){I._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),se()}):(this._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),R.hide(),se()),R.attr("aria-hidden","true"),w.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),k.length&&R.length?w.oldTab.attr("tabIndex",-1):k.length&&this.tabs.filter(function(){return g(this).attr("tabIndex")===0}).attr("tabIndex",-1),k.attr("aria-hidden","false"),w.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){var w,I=this._findActive(d);I[0]!==this.active[0]&&(I.length||(I=this.active),w=I.find(".ui-tabs-anchor")[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return d===!1?g():this.tabs.eq(d)},_getIndex:function(d){return typeof d=="string"&&(d=this.anchors.index(this.anchors.filter("[href$='"+g.escapeSelector(d)+"']"))),d},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){g.data(this,"ui-tabs-destroy")?g(this).remove():g(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var d=g(this),w=d.data("ui-tabs-aria-controls");w?d.attr("aria-controls",w).removeData("ui-tabs-aria-controls"):d.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(d){var w=this.options.disabled;w!==!1&&(d===void 0?w=!1:(d=this._getIndex(d),Array.isArray(w)?w=g.map(w,function(I){return I!==d?I:null}):w=g.map(this.tabs,function(I,k){return k!==d?k:null})),this._setOptionDisabled(w))},disable:function(d){var w=this.options.disabled;if(w!==!0){if(d===void 0)w=!0;else{if(d=this._getIndex(d),g.inArray(d,w)!==-1)return;Array.isArray(w)?w=g.merge([d],w).sort():w=[d]}this._setOptionDisabled(w)}},load:function(d,w){d=this._getIndex(d);var I=this,k=this.tabs.eq(d),R=k.find(".ui-tabs-anchor"),W=this._getPanelForTab(k),se={tab:k,panel:W},oe=function(ue,we){we==="abort"&&I.panels.stop(!1,!0),I._removeClass(k,"ui-tabs-loading"),W.removeAttr("aria-busy"),ue===I.xhr&&delete I.xhr};this._isLocal(R[0])||(this.xhr=g.ajax(this._ajaxSettings(R,w,se)),this.xhr&&this.xhr.statusText!=="canceled"&&(this._addClass(k,"ui-tabs-loading"),W.attr("aria-busy","true"),this.xhr.done(function(ue,we,Te){setTimeout(function(){W.html(ue),I._trigger("load",w,se),oe(Te,we)},1)}).fail(function(ue,we){setTimeout(function(){oe(ue,we)},1)})))},_ajaxSettings:function(d,w,I){var k=this;return{url:d.attr("href").replace(/#.*$/,""),beforeSend:function(R,W){return k._trigger("beforeLoad",w,g.extend({jqXHR:R,ajaxSettings:W},I))}}},_getPanelForTab:function(d){var w=g(d).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+w))}}),g.uiBackCompat!==!1&&g.widget("ui.tabs",g.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),g.ui.tabs;/*!
 * jQuery UI Tooltip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var d=g(this).attr("title");return g("<a>").text(d).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(d,w){var I=(d.attr("aria-describedby")||"").split(/\s+/);I.push(w),d.data("ui-tooltip-id",w).attr("aria-describedby",String.prototype.trim.call(I.join(" ")))},_removeDescribedBy:function(d){var w=d.data("ui-tooltip-id"),I=(d.attr("aria-describedby")||"").split(/\s+/),k=g.inArray(w,I);k!==-1&&I.splice(k,1),d.removeData("ui-tooltip-id"),I=String.prototype.trim.call(I.join(" ")),I?d.attr("aria-describedby",I):d.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=g("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=g([])},_setOption:function(d,w){var I=this;this._super(d,w),d==="content"&&g.each(this.tooltips,function(k,R){I._updateContent(R.element)})},_setOptionDisabled:function(d){this[d?"_disable":"_enable"]()},_disable:function(){var d=this;g.each(this.tooltips,function(w,I){var k=g.Event("blur");k.target=k.currentTarget=I.element[0],d.close(k,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var w=g(this);if(w.is("[title]"))return w.data("ui-tooltip-title",w.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var d=g(this);d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title"))}),this.disabledTitles=g([])},open:function(d){var w=this,I=g(d?d.target:this.element).closest(this.options.items);!I.length||I.data("ui-tooltip-id")||(I.attr("title")&&I.data("ui-tooltip-title",I.attr("title")),I.data("ui-tooltip-open",!0),d&&d.type==="mouseover"&&I.parents().each(function(){var k=g(this),R;k.data("ui-tooltip-open")&&(R=g.Event("blur"),R.target=R.currentTarget=this,w.close(R,!0)),k.attr("title")&&(k.uniqueId(),w.parents[this.id]={element:this,title:k.attr("title")},k.attr("title",""))}),this._registerCloseHandlers(d,I),this._updateContent(I,d))},_updateContent:function(d,w){var I,k=this.options.content,R=this,W=w?w.type:null;if(typeof k=="string"||k.nodeType||k.jquery)return this._open(w,d,k);I=k.call(d[0],function(se){R._delay(function(){d.data("ui-tooltip-open")&&(w&&(w.type=W),this._open(w,d,se))})}),I&&this._open(w,d,I)},_open:function(d,w,I){var k,R,W,se,oe=g.extend({},this.options.position);if(!I)return;if(k=this._find(w),k){k.tooltip.find(".ui-tooltip-content").html(I);return}w.is("[title]")&&(d&&d.type==="mouseover"?w.attr("title",""):w.removeAttr("title")),k=this._tooltip(w),R=k.tooltip,this._addDescribedBy(w,R.attr("id")),R.find(".ui-tooltip-content").html(I),this.liveRegion.children().hide(),se=g("<div>").html(R.find(".ui-tooltip-content").html()),se.removeAttr("name").find("[name]").removeAttr("name"),se.removeAttr("id").find("[id]").removeAttr("id"),se.appendTo(this.liveRegion);function ue(we){oe.of=we,!R.is(":hidden")&&R.position(oe)}this.options.track&&d&&/^mouse/.test(d.type)?(this._on(this.document,{mousemove:ue}),ue(d)):R.position(g.extend({of:w},this.options.position)),R.hide(),this._show(R,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(W=this.delayedShow=setInterval(function(){R.is(":visible")&&(ue(oe.of),clearInterval(W))},13)),this._trigger("open",d,{tooltip:R})},_registerCloseHandlers:function(d,w){var I={keyup:function(k){if(k.keyCode===g.ui.keyCode.ESCAPE){var R=g.Event(k);R.currentTarget=w[0],this.close(R,!0)}}};w[0]!==this.element[0]&&(I.remove=function(){var k=this._find(w);k&&this._removeTooltip(k.tooltip)}),(!d||d.type==="mouseover")&&(I.mouseleave="close"),(!d||d.type==="focusin")&&(I.focusout="close"),this._on(!0,w,I)},close:function(d){var w,I=this,k=g(d?d.currentTarget:this.element),R=this._find(k);if(!R){k.removeData("ui-tooltip-open");return}w=R.tooltip,!R.closing&&(clearInterval(this.delayedShow),k.data("ui-tooltip-title")&&!k.attr("title")&&k.attr("title",k.data("ui-tooltip-title")),this._removeDescribedBy(k),R.hiding=!0,w.stop(!0),this._hide(w,this.options.hide,function(){I._removeTooltip(g(this))}),k.removeData("ui-tooltip-open"),this._off(k,"mouseleave focusout keyup"),k[0]!==this.element[0]&&this._off(k,"remove"),this._off(this.document,"mousemove"),d&&d.type==="mouseleave"&&g.each(this.parents,function(W,se){g(se.element).attr("title",se.title),delete I.parents[W]}),R.closing=!0,this._trigger("close",d,{tooltip:w}),R.hiding||(R.closing=!1))},_tooltip:function(d){var w=g("<div>").attr("role","tooltip"),I=g("<div>").appendTo(w),k=w.uniqueId().attr("id");return this._addClass(I,"ui-tooltip-content"),this._addClass(w,"ui-tooltip","ui-widget ui-widget-content"),w.appendTo(this._appendTo(d)),this.tooltips[k]={element:d,tooltip:w}},_find:function(d){var w=d.data("ui-tooltip-id");return w?this.tooltips[w]:null},_removeTooltip:function(d){clearInterval(this.delayedShow),d.remove(),delete this.tooltips[d.attr("id")]},_appendTo:function(d){var w=d.closest(".ui-front, dialog");return w.length||(w=this.document[0].body),w},_destroy:function(){var d=this;g.each(this.tooltips,function(w,I){var k=g.Event("blur"),R=I.element;k.target=k.currentTarget=R[0],d.close(k,!0),g("#"+w).remove(),R.data("ui-tooltip-title")&&(R.attr("title")||R.attr("title",R.data("ui-tooltip-title")),R.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),g.uiBackCompat!==!1&&g.widget("ui.tooltip",g.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var d=this._superApply(arguments);return this.options.tooltipClass&&d.tooltip.addClass(this.options.tooltipClass),d}}),g.ui.tooltip});/*! jQuery UI - v1.13.2 - 2022-07-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */(function(g){typeof define=="function"&&define.amd?define(["jquery"],g):g($)})(function(g){g.ui=g.ui||{},g.ui.version="1.13.2";/*!
 * jQuery UI Widget 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var B=0,M=Array.prototype.hasOwnProperty,P=Array.prototype.slice;g.cleanData=function(d){return function(w){var I,k,R;for(R=0;(k=w[R])!=null;R++)I=g._data(k,"events"),I&&I.remove&&g(k).triggerHandler("remove");d(w)}}(g.cleanData),g.widget=function(d,w,I){var k,R,W,se={},oe=d.split(".")[0];d=d.split(".")[1];var ue=oe+"-"+d;return I||(I=w,w=g.Widget),Array.isArray(I)&&(I=g.extend.apply(null,[{}].concat(I))),g.expr.pseudos[ue.toLowerCase()]=function(we){return!!g.data(we,ue)},g[oe]=g[oe]||{},k=g[oe][d],R=g[oe][d]=function(we,Te){if(!this||!this._createWidget)return new R(we,Te);arguments.length&&this._createWidget(we,Te)},g.extend(R,k,{version:I.version,_proto:g.extend({},I),_childConstructors:[]}),W=new w,W.options=g.widget.extend({},W.options),g.each(I,function(we,Te){if(typeof Te!="function"){se[we]=Te;return}se[we]=function(){function Ve(){return w.prototype[we].apply(this,arguments)}function De(me){return w.prototype[we].apply(this,me)}return function(){var me=this._super,ke=this._superApply,qe;return this._super=Ve,this._superApply=De,qe=Te.apply(this,arguments),this._super=me,this._superApply=ke,qe}}()}),R.prototype=g.widget.extend(W,{widgetEventPrefix:k&&W.widgetEventPrefix||d},se,{constructor:R,namespace:oe,widgetName:d,widgetFullName:ue}),k?(g.each(k._childConstructors,function(we,Te){var Ve=Te.prototype;g.widget(Ve.namespace+"."+Ve.widgetName,R,Te._proto)}),delete k._childConstructors):w._childConstructors.push(R),g.widget.bridge(d,R),R},g.widget.extend=function(d){for(var w=P.call(arguments,1),I=0,k=w.length,R,W;I<k;I++)for(R in w[I])W=w[I][R],M.call(w[I],R)&&W!==void 0&&(g.isPlainObject(W)?d[R]=g.isPlainObject(d[R])?g.widget.extend({},d[R],W):g.widget.extend({},W):d[R]=W);return d},g.widget.bridge=function(d,w){var I=w.prototype.widgetFullName||d;g.fn[d]=function(k){var R=typeof k=="string",W=P.call(arguments,1),se=this;return R?!this.length&&k==="instance"?se=void 0:this.each(function(){var oe,ue=g.data(this,I);if(k==="instance")return se=ue,!1;if(!ue)return g.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+k+"'");if(typeof ue[k]!="function"||k.charAt(0)==="_")return g.error("no such method '"+k+"' for "+d+" widget instance");if(oe=ue[k].apply(ue,W),oe!==ue&&oe!==void 0)return se=oe&&oe.jquery?se.pushStack(oe.get()):oe,!1}):(W.length&&(k=g.widget.extend.apply(null,[k].concat(W))),this.each(function(){var oe=g.data(this,I);oe?(oe.option(k||{}),oe._init&&oe._init()):g.data(this,I,new w(k,this))})),se}},g.Widget=function(){},g.Widget._childConstructors=[],g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(d,w){w=g(w||this.defaultElement||this)[0],this.element=g(w),this.uuid=B++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=g(),this.hoverable=g(),this.focusable=g(),this.classesElementLookup={},w!==this&&(g.data(w,this.widgetFullName,this),this._on(!0,this.element,{remove:function(I){I.target===w&&this.destroy()}}),this.document=g(w.style?w.ownerDocument:w.document||w),this.window=g(this.document[0].defaultView||this.document[0].parentWindow)),this.options=g.widget.extend({},this.options,this._getCreateOptions(),d),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){var d=this;this._destroy(),g.each(this.classesElementLookup,function(w,I){d._removeClass(I,w)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:g.noop,widget:function(){return this.element},option:function(d,w){var I=d,k,R,W;if(arguments.length===0)return g.widget.extend({},this.options);if(typeof d=="string")if(I={},k=d.split("."),d=k.shift(),k.length){for(R=I[d]=g.widget.extend({},this.options[d]),W=0;W<k.length-1;W++)R[k[W]]=R[k[W]]||{},R=R[k[W]];if(d=k.pop(),arguments.length===1)return R[d]===void 0?null:R[d];R[d]=w}else{if(arguments.length===1)return this.options[d]===void 0?null:this.options[d];I[d]=w}return this._setOptions(I),this},_setOptions:function(d){var w;for(w in d)this._setOption(w,d[w]);return this},_setOption:function(d,w){return d==="classes"&&this._setOptionClasses(w),this.options[d]=w,d==="disabled"&&this._setOptionDisabled(w),this},_setOptionClasses:function(d){var w,I,k;for(w in d)k=this.classesElementLookup[w],!(d[w]===this.options.classes[w]||!k||!k.length)&&(I=g(k.get()),this._removeClass(k,w),I.addClass(this._classes({element:I,keys:w,classes:d,add:!0})))},_setOptionDisabled:function(d){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!d),d&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(d){var w=[],I=this;d=g.extend({element:this.element,classes:this.options.classes||{}},d);function k(){var W=[];d.element.each(function(se,oe){var ue=g.map(I.classesElementLookup,function(we){return we}).some(function(we){return we.is(oe)});ue||W.push(oe)}),I._on(g(W),{remove:"_untrackClassesElement"})}function R(W,se){var oe,ue;for(ue=0;ue<W.length;ue++)oe=I.classesElementLookup[W[ue]]||g(),d.add?(k(),oe=g(g.uniqueSort(oe.get().concat(d.element.get())))):oe=g(oe.not(d.element).get()),I.classesElementLookup[W[ue]]=oe,w.push(W[ue]),se&&d.classes[W[ue]]&&w.push(d.classes[W[ue]])}return d.keys&&R(d.keys.match(/\S+/g)||[],!0),d.extra&&R(d.extra.match(/\S+/g)||[]),w.join(" ")},_untrackClassesElement:function(d){var w=this;g.each(w.classesElementLookup,function(I,k){g.inArray(d.target,k)!==-1&&(w.classesElementLookup[I]=g(k.not(d.target).get()))}),this._off(g(d.target))},_removeClass:function(d,w,I){return this._toggleClass(d,w,I,!1)},_addClass:function(d,w,I){return this._toggleClass(d,w,I,!0)},_toggleClass:function(d,w,I,k){k=typeof k=="boolean"?k:I;var R=typeof d=="string"||d===null,W={extra:R?w:I,keys:R?d:w,element:R?this.element:d,add:k};return W.element.toggleClass(this._classes(W),k),this},_on:function(d,w,I){var k,R=this;typeof d!="boolean"&&(I=w,w=d,d=!1),I?(w=k=g(w),this.bindings=this.bindings.add(w)):(I=w,w=this.element,k=this.widget()),g.each(I,function(W,se){function oe(){if(!(!d&&(R.options.disabled===!0||g(this).hasClass("ui-state-disabled"))))return(typeof se=="string"?R[se]:se).apply(R,arguments)}typeof se!="string"&&(oe.guid=se.guid=se.guid||oe.guid||g.guid++);var ue=W.match(/^([\w:-]*)\s*(.*)$/),we=ue[1]+R.eventNamespace,Te=ue[2];Te?k.on(we,Te,oe):w.on(we,oe)})},_off:function(d,w){w=(w||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,d.off(w),this.bindings=g(this.bindings.not(d).get()),this.focusable=g(this.focusable.not(d).get()),this.hoverable=g(this.hoverable.not(d).get())},_delay:function(d,w){function I(){return(typeof d=="string"?k[d]:d).apply(k,arguments)}var k=this;return setTimeout(I,w||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d),this._on(d,{mouseenter:function(w){this._addClass(g(w.currentTarget),null,"ui-state-hover")},mouseleave:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d),this._on(d,{focusin:function(w){this._addClass(g(w.currentTarget),null,"ui-state-focus")},focusout:function(w){this._removeClass(g(w.currentTarget),null,"ui-state-focus")}})},_trigger:function(d,w,I){var k,R,W=this.options[d];if(I=I||{},w=g.Event(w),w.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase(),w.target=this.element[0],R=w.originalEvent,R)for(k in R)k in w||(w[k]=R[k]);return this.element.trigger(w,I),!(typeof W=="function"&&W.apply(this.element[0],[w].concat(I))===!1||w.isDefaultPrevented())}},g.each({show:"fadeIn",hide:"fadeOut"},function(d,w){g.Widget.prototype["_"+d]=function(I,k,R){typeof k=="string"&&(k={effect:k});var W,se=k?k===!0||typeof k=="number"?w:k.effect||w:d;k=k||{},typeof k=="number"?k={duration:k}:k===!0&&(k={}),W=!g.isEmptyObject(k),k.complete=R,k.delay&&I.delay(k.delay),W&&g.effects&&g.effects.effect[se]?I[d](k):se!==d&&I[se]?I[se](k.duration,k.easing,R):I.queue(function(oe){g(this)[d](),R&&R.call(I[0]),oe()})}}),g.widget;/*!
 * jQuery UI Position 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */(function(){var d,w=Math.max,I=Math.abs,k=/left|center|right/,R=/top|center|bottom/,W=/[\+\-]\d+(\.[\d]+)?%?/,se=/^\w+/,oe=/%$/,ue=g.fn.position;function we(me,ke,qe){return[parseFloat(me[0])*(oe.test(me[0])?ke/100:1),parseFloat(me[1])*(oe.test(me[1])?qe/100:1)]}function Te(me,ke){return parseInt(g.css(me,ke),10)||0}function Ve(me){return me!=null&&me===me.window}function De(me){var ke=me[0];return ke.nodeType===9?{width:me.width(),height:me.height(),offset:{top:0,left:0}}:Ve(ke)?{width:me.width(),height:me.height(),offset:{top:me.scrollTop(),left:me.scrollLeft()}}:ke.preventDefault?{width:0,height:0,offset:{top:ke.pageY,left:ke.pageX}}:{width:me.outerWidth(),height:me.outerHeight(),offset:me.offset()}}g.position={scrollbarWidth:function(){if(d!==void 0)return d;var me,ke,qe=g("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),lt=qe.children()[0];return g("body").append(qe),me=lt.offsetWidth,qe.css("overflow","scroll"),ke=lt.offsetWidth,me===ke&&(ke=qe[0].clientWidth),qe.remove(),d=me-ke},getScrollInfo:function(me){var ke=me.isWindow||me.isDocument?"":me.element.css("overflow-x"),qe=me.isWindow||me.isDocument?"":me.element.css("overflow-y"),lt=ke==="scroll"||ke==="auto"&&me.width<me.element[0].scrollWidth,pt=qe==="scroll"||qe==="auto"&&me.height<me.element[0].scrollHeight;return{width:pt?g.position.scrollbarWidth():0,height:lt?g.position.scrollbarWidth():0}},getWithinInfo:function(me){var ke=g(me||window),qe=Ve(ke[0]),lt=!!ke[0]&&ke[0].nodeType===9,pt=!qe&&!lt;return{element:ke,isWindow:qe,isDocument:lt,offset:pt?g(me).offset():{left:0,top:0},scrollLeft:ke.scrollLeft(),scrollTop:ke.scrollTop(),width:ke.outerWidth(),height:ke.outerHeight()}}},g.fn.position=function(me){if(!me||!me.of)return ue.apply(this,arguments);me=g.extend({},me);var ke,qe,lt,pt,Ft,zt,Nt=typeof me.of=="string"?g(document).find(me.of):g(me.of),Mt=g.position.getWithinInfo(me.within),$t=g.position.getScrollInfo(Mt),ri=(me.collision||"flip").split(" "),ci={};return zt=De(Nt),Nt[0].preventDefault&&(me.at="left top"),qe=zt.width,lt=zt.height,pt=zt.offset,Ft=g.extend({},pt),g.each(["my","at"],function(){var bt=(me[this]||"").split(" "),di,ii;bt.length===1&&(bt=k.test(bt[0])?bt.concat(["center"]):R.test(bt[0])?["center"].concat(bt):["center","center"]),bt[0]=k.test(bt[0])?bt[0]:"center",bt[1]=R.test(bt[1])?bt[1]:"center",di=W.exec(bt[0]),ii=W.exec(bt[1]),ci[this]=[di?di[0]:0,ii?ii[0]:0],me[this]=[se.exec(bt[0])[0],se.exec(bt[1])[0]]}),ri.length===1&&(ri[1]=ri[0]),me.at[0]==="right"?Ft.left+=qe:me.at[0]==="center"&&(Ft.left+=qe/2),me.at[1]==="bottom"?Ft.top+=lt:me.at[1]==="center"&&(Ft.top+=lt/2),ke=we(ci.at,qe,lt),Ft.left+=ke[0],Ft.top+=ke[1],this.each(function(){var bt,di,ii=g(this),Hi=ii.outerWidth(),Vi=ii.outerHeight(),Ot=Te(this,"marginLeft"),_i=Te(this,"marginTop"),Ti=Hi+Ot+Te(this,"marginRight")+$t.width,Wi=Vi+_i+Te(this,"marginBottom")+$t.height,Zt=g.extend({},Ft),mi=we(ci.my,ii.outerWidth(),ii.outerHeight());me.my[0]==="right"?Zt.left-=Hi:me.my[0]==="center"&&(Zt.left-=Hi/2),me.my[1]==="bottom"?Zt.top-=Vi:me.my[1]==="center"&&(Zt.top-=Vi/2),Zt.left+=mi[0],Zt.top+=mi[1],bt={marginLeft:Ot,marginTop:_i},g.each(["left","top"],function(wi,$i){g.ui.position[ri[wi]]&&g.ui.position[ri[wi]][$i](Zt,{targetWidth:qe,targetHeight:lt,elemWidth:Hi,elemHeight:Vi,collisionPosition:bt,collisionWidth:Ti,collisionHeight:Wi,offset:[ke[0]+mi[0],ke[1]+mi[1]],my:me.my,at:me.at,within:Mt,elem:ii})}),me.using&&(di=function(wi){var $i=pt.left-Zt.left,tr=$i+qe-Hi,Ar=pt.top-Zt.top,Tr=Ar+lt-Vi,ji={target:{element:Nt,left:pt.left,top:pt.top,width:qe,height:lt},element:{element:ii,left:Zt.left,top:Zt.top,width:Hi,height:Vi},horizontal:tr<0?"left":$i>0?"right":"center",vertical:Tr<0?"top":Ar>0?"bottom":"middle"};qe<Hi&&I($i+tr)<qe&&(ji.horizontal="center"),lt<Vi&&I(Ar+Tr)<lt&&(ji.vertical="middle"),w(I($i),I(tr))>w(I(Ar),I(Tr))?ji.important="horizontal":ji.important="vertical",me.using.call(this,wi,ji)}),ii.offset(g.extend(Zt,{using:di}))})},g.ui.position={fit:{left:function(me,ke){var qe=ke.within,lt=qe.isWindow?qe.scrollLeft:qe.offset.left,pt=qe.width,Ft=me.left-ke.collisionPosition.marginLeft,zt=lt-Ft,Nt=Ft+ke.collisionWidth-pt-lt,Mt;ke.collisionWidth>pt?zt>0&&Nt<=0?(Mt=me.left+zt+ke.collisionWidth-pt-lt,me.left+=zt-Mt):Nt>0&&zt<=0?me.left=lt:zt>Nt?me.left=lt+pt-ke.collisionWidth:me.left=lt:zt>0?me.left+=zt:Nt>0?me.left-=Nt:me.left=w(me.left-Ft,me.left)},top:function(me,ke){var qe=ke.within,lt=qe.isWindow?qe.scrollTop:qe.offset.top,pt=ke.within.height,Ft=me.top-ke.collisionPosition.marginTop,zt=lt-Ft,Nt=Ft+ke.collisionHeight-pt-lt,Mt;ke.collisionHeight>pt?zt>0&&Nt<=0?(Mt=me.top+zt+ke.collisionHeight-pt-lt,me.top+=zt-Mt):Nt>0&&zt<=0?me.top=lt:zt>Nt?me.top=lt+pt-ke.collisionHeight:me.top=lt:zt>0?me.top+=zt:Nt>0?me.top-=Nt:me.top=w(me.top-Ft,me.top)}},flip:{left:function(me,ke){var qe=ke.within,lt=qe.offset.left+qe.scrollLeft,pt=qe.width,Ft=qe.isWindow?qe.scrollLeft:qe.offset.left,zt=me.left-ke.collisionPosition.marginLeft,Nt=zt-Ft,Mt=zt+ke.collisionWidth-pt-Ft,$t=ke.my[0]==="left"?-ke.elemWidth:ke.my[0]==="right"?ke.elemWidth:0,ri=ke.at[0]==="left"?ke.targetWidth:ke.at[0]==="right"?-ke.targetWidth:0,ci=-2*ke.offset[0],bt,di;Nt<0?(bt=me.left+$t+ri+ci+ke.collisionWidth-pt-lt,(bt<0||bt<I(Nt))&&(me.left+=$t+ri+ci)):Mt>0&&(di=me.left-ke.collisionPosition.marginLeft+$t+ri+ci-Ft,(di>0||I(di)<Mt)&&(me.left+=$t+ri+ci))},top:function(me,ke){var qe=ke.within,lt=qe.offset.top+qe.scrollTop,pt=qe.height,Ft=qe.isWindow?qe.scrollTop:qe.offset.top,zt=me.top-ke.collisionPosition.marginTop,Nt=zt-Ft,Mt=zt+ke.collisionHeight-pt-Ft,$t=ke.my[1]==="top",ri=$t?-ke.elemHeight:ke.my[1]==="bottom"?ke.elemHeight:0,ci=ke.at[1]==="top"?ke.targetHeight:ke.at[1]==="bottom"?-ke.targetHeight:0,bt=-2*ke.offset[1],di,ii;Nt<0?(ii=me.top+ri+ci+bt+ke.collisionHeight-pt-lt,(ii<0||ii<I(Nt))&&(me.top+=ri+ci+bt)):Mt>0&&(di=me.top-ke.collisionPosition.marginTop+ri+ci+bt-Ft,(di>0||I(di)<Mt)&&(me.top+=ri+ci+bt))}},flipfit:{left:function(){g.ui.position.flip.left.apply(this,arguments),g.ui.position.fit.left.apply(this,arguments)},top:function(){g.ui.position.flip.top.apply(this,arguments),g.ui.position.fit.top.apply(this,arguments)}}}})(),g.ui.position;/*!
 * jQuery UI :data 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{data:g.expr.createPseudo?g.expr.createPseudo(function(d){return function(w){return!!g.data(w,d)}}):function(d,w,I){return!!g.data(d,I[3])}});/*!
 * jQuery UI Disable Selection 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({disableSelection:function(){var d="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(d+".ui-disableSelection",function(w){w.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var K=g;/*!
 * jQuery Color Animations v2.2.0
 * https://github.com/jquery/jquery-color
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun May 10 09:02:36 2020 +0200
 */var Y="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",re={},D=re.toString,ne=/^([\-+])=\s*(\d+\.?\d*)/,Ae=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1]*2.55,d[2]*2.55,d[3]*2.55,d[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),d[4]?(parseInt(d[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16),d[4]?(parseInt(d[4]+d[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],fe=K.Color=function(d,w,I,k){return new K.Color.fn.parse(d,w,I,k)},ge={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},Be={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},Ue=fe.support={},ze=K("<p>")[0],Re,$e=K.each;ze.style.cssText="background-color:rgba(1,1,1,.5)",Ue.rgba=ze.style.backgroundColor.indexOf("rgba")>-1,$e(ge,function(d,w){w.cache="_"+d,w.props.alpha={idx:3,type:"percent",def:1}}),K.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,w){re["[object "+w+"]"]=w.toLowerCase()});function We(d){return d==null?d+"":typeof d=="object"?re[D.call(d)]||"object":typeof d}function ut(d,w,I){var k=Be[w.type]||{};return d==null?I||!w.def?null:w.def:(d=k.floor?~~d:parseFloat(d),isNaN(d)?w.def:k.mod?(d+k.mod)%k.mod:Math.min(k.max,Math.max(0,d)))}function et(d){var w=fe(),I=w._rgba=[];return d=d.toLowerCase(),$e(Ae,function(k,R){var W,se=R.re.exec(d),oe=se&&R.parse(se),ue=R.space||"rgba";if(oe)return W=w[ue](oe),w[ge[ue].cache]=W[ge[ue].cache],I=w._rgba=W._rgba,!1}),I.length?(I.join()==="0,0,0,0"&&K.extend(I,Re.transparent),w):Re[d]}fe.fn=K.extend(fe.prototype,{parse:function(d,w,I,k){if(d===void 0)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=K(d).css(w),w=void 0);var R=this,W=We(d),se=this._rgba=[];if(w!==void 0&&(d=[d,w,I,k],W="array"),W==="string")return this.parse(et(d)||Re._default);if(W==="array")return $e(ge.rgba.props,function(oe,ue){se[ue.idx]=ut(d[ue.idx],ue)}),this;if(W==="object")return d instanceof fe?$e(ge,function(oe,ue){d[ue.cache]&&(R[ue.cache]=d[ue.cache].slice())}):$e(ge,function(oe,ue){var we=ue.cache;$e(ue.props,function(Te,Ve){if(!R[we]&&ue.to){if(Te==="alpha"||d[Te]==null)return;R[we]=ue.to(R._rgba)}R[we][Ve.idx]=ut(d[Te],Ve,!0)}),R[we]&&K.inArray(null,R[we].slice(0,3))<0&&(R[we][3]==null&&(R[we][3]=1),ue.from&&(R._rgba=ue.from(R[we])))}),this},is:function(d){var w=fe(d),I=!0,k=this;return $e(ge,function(R,W){var se,oe=w[W.cache];return oe&&(se=k[W.cache]||W.to&&W.to(k._rgba)||[],$e(W.props,function(ue,we){if(oe[we.idx]!=null)return I=oe[we.idx]===se[we.idx],I})),I}),I},_space:function(){var d=[],w=this;return $e(ge,function(I,k){w[k.cache]&&d.push(I)}),d.pop()},transition:function(d,w){var I=fe(d),k=I._space(),R=ge[k],W=this.alpha()===0?fe("transparent"):this,se=W[R.cache]||R.to(W._rgba),oe=se.slice();return I=I[R.cache],$e(R.props,function(ue,we){var Te=we.idx,Ve=se[Te],De=I[Te],me=Be[we.type]||{};De!==null&&(Ve===null?oe[Te]=De:(me.mod&&(De-Ve>me.mod/2?Ve+=me.mod:Ve-De>me.mod/2&&(Ve-=me.mod)),oe[Te]=ut((De-Ve)*w+Ve,we)))}),this[k](oe)},blend:function(d){if(this._rgba[3]===1)return this;var w=this._rgba.slice(),I=w.pop(),k=fe(d)._rgba;return fe(K.map(w,function(R,W){return(1-I)*k[W]+I*R}))},toRgbaString:function(){var d="rgba(",w=K.map(this._rgba,function(I,k){return I??(k>2?1:0)});return w[3]===1&&(w.pop(),d="rgb("),d+w.join()+")"},toHslaString:function(){var d="hsla(",w=K.map(this.hsla(),function(I,k){return I==null&&(I=k>2?1:0),k&&k<3&&(I=Math.round(I*100)+"%"),I});return w[3]===1&&(w.pop(),d="hsl("),d+w.join()+")"},toHexString:function(d){var w=this._rgba.slice(),I=w.pop();return d&&w.push(~~(I*255)),"#"+K.map(w,function(k){return k=(k||0).toString(16),k.length===1?"0"+k:k}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),fe.fn.parse.prototype=fe.fn;function At(d,w,I){return I=(I+1)%1,I*6<1?d+(w-d)*I*6:I*2<1?w:I*3<2?d+(w-d)*(2/3-I)*6:d}ge.hsla.to=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/255,I=d[1]/255,k=d[2]/255,R=d[3],W=Math.max(w,I,k),se=Math.min(w,I,k),oe=W-se,ue=W+se,we=ue*.5,Te,Ve;return se===W?Te=0:w===W?Te=60*(I-k)/oe+360:I===W?Te=60*(k-w)/oe+120:Te=60*(w-I)/oe+240,oe===0?Ve=0:we<=.5?Ve=oe/ue:Ve=oe/(2-ue),[Math.round(Te)%360,Ve,we,R??1]},ge.hsla.from=function(d){if(d[0]==null||d[1]==null||d[2]==null)return[null,null,null,d[3]];var w=d[0]/360,I=d[1],k=d[2],R=d[3],W=k<=.5?k*(1+I):k+I-k*I,se=2*k-W;return[Math.round(At(se,W,w+1/3)*255),Math.round(At(se,W,w)*255),Math.round(At(se,W,w-1/3)*255),R]},$e(ge,function(d,w){var I=w.props,k=w.cache,R=w.to,W=w.from;fe.fn[d]=function(se){if(R&&!this[k]&&(this[k]=R(this._rgba)),se===void 0)return this[k].slice();var oe,ue=We(se),we=ue==="array"||ue==="object"?se:arguments,Te=this[k].slice();return $e(I,function(Ve,De){var me=we[ue==="object"?Ve:De.idx];me==null&&(me=Te[De.idx]),Te[De.idx]=ut(me,De)}),W?(oe=fe(W(Te)),oe[k]=Te,oe):fe(Te)},$e(I,function(se,oe){fe.fn[se]||(fe.fn[se]=function(ue){var we,Te,Ve,De,me=We(ue);return se==="alpha"?De=this._hsla?"hsla":"rgba":De=d,we=this[De](),Te=we[oe.idx],me==="undefined"?Te:(me==="function"&&(ue=ue.call(this,Te),me=We(ue)),ue==null&&oe.empty?this:(me==="string"&&(Ve=ne.exec(ue),Ve&&(ue=Te+parseFloat(Ve[2])*(Ve[1]==="+"?1:-1))),we[oe.idx]=ue,this[De](we)))})})}),fe.hook=function(d){var w=d.split(" ");$e(w,function(I,k){K.cssHooks[k]={set:function(R,W){var se,oe,ue="";if(W!=="transparent"&&(We(W)!=="string"||(se=et(W)))){if(W=fe(se||W),!Ue.rgba&&W._rgba[3]!==1){for(oe=k==="backgroundColor"?R.parentNode:R;(ue===""||ue==="transparent")&&oe&&oe.style;)try{ue=K.css(oe,"backgroundColor"),oe=oe.parentNode}catch{}W=W.blend(ue&&ue!=="transparent"?ue:"_default")}W=W.toRgbaString()}try{R.style[k]=W}catch{}}},K.fx.step[k]=function(R){R.colorInit||(R.start=fe(R.elem,k),R.end=fe(R.end),R.colorInit=!0),K.cssHooks[k].set(R.elem,R.start.transition(R.end,R.pos))}})},fe.hook(Y),K.cssHooks.borderColor={expand:function(d){var w={};return $e(["Top","Right","Bottom","Left"],function(I,k){w["border"+k+"Color"]=d}),w}},Re=K.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};/*!
 * jQuery UI Effects 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var nt="ui-effects-",ft="ui-effects-style",Tt="ui-effects-animated";g.effects={effect:{}},function(){var d=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};g.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(W,se){g.fx.step[se]=function(oe){(oe.end!=="none"&&!oe.setAttr||oe.pos===1&&!oe.setAttr)&&(K.style(oe.elem,se,oe.end),oe.setAttr=!0)}});function I(W){return W.replace(/-([\da-z])/gi,function(se,oe){return oe.toUpperCase()})}function k(W){var se,oe,ue=W.ownerDocument.defaultView?W.ownerDocument.defaultView.getComputedStyle(W,null):W.currentStyle,we={};if(ue&&ue.length&&ue[0]&&ue[ue[0]])for(oe=ue.length;oe--;)se=ue[oe],typeof ue[se]=="string"&&(we[I(se)]=ue[se]);else for(se in ue)typeof ue[se]=="string"&&(we[se]=ue[se]);return we}function R(W,se){var oe={},ue,we;for(ue in se)we=se[ue],W[ue]!==we&&(w[ue]||(g.fx.step[ue]||!isNaN(parseFloat(we)))&&(oe[ue]=we));return oe}g.fn.addBack||(g.fn.addBack=function(W){return this.add(W==null?this.prevObject:this.prevObject.filter(W))}),g.effects.animateClass=function(W,se,oe,ue){var we=g.speed(se,oe,ue);return this.queue(function(){var Te=g(this),Ve=Te.attr("class")||"",De,me=we.children?Te.find("*").addBack():Te;me=me.map(function(){var ke=g(this);return{el:ke,start:k(this)}}),De=function(){g.each(d,function(ke,qe){W[qe]&&Te[qe+"Class"](W[qe])})},De(),me=me.map(function(){return this.end=k(this.el[0]),this.diff=R(this.start,this.end),this}),Te.attr("class",Ve),me=me.map(function(){var ke=this,qe=g.Deferred(),lt=g.extend({},we,{queue:!1,complete:function(){qe.resolve(ke)}});return this.el.animate(this.diff,lt),qe.promise()}),g.when.apply(g,me.get()).done(function(){De(),g.each(arguments,function(){var ke=this.el;g.each(this.diff,function(qe){ke.css(qe,"")})}),we.complete.call(Te[0])})})},g.fn.extend({addClass:function(W){return function(se,oe,ue,we){return oe?g.effects.animateClass.call(this,{add:se},oe,ue,we):W.apply(this,arguments)}}(g.fn.addClass),removeClass:function(W){return function(se,oe,ue,we){return arguments.length>1?g.effects.animateClass.call(this,{remove:se},oe,ue,we):W.apply(this,arguments)}}(g.fn.removeClass),toggleClass:function(W){return function(se,oe,ue,we,Te){return typeof oe=="boolean"||oe===void 0?ue?g.effects.animateClass.call(this,oe?{add:se}:{remove:se},ue,we,Te):W.apply(this,arguments):g.effects.animateClass.call(this,{toggle:se},oe,ue,we)}}(g.fn.toggleClass),switchClass:function(W,se,oe,ue,we){return g.effects.animateClass.call(this,{add:se,remove:W},oe,ue,we)}})}(),function(){g.expr&&g.expr.pseudos&&g.expr.pseudos.animated&&(g.expr.pseudos.animated=function(k){return function(R){return!!g(R).data(Tt)||k(R)}}(g.expr.pseudos.animated)),g.uiBackCompat!==!1&&g.extend(g.effects,{save:function(k,R){for(var W=0,se=R.length;W<se;W++)R[W]!==null&&k.data(nt+R[W],k[0].style[R[W]])},restore:function(k,R){for(var W,se=0,oe=R.length;se<oe;se++)R[se]!==null&&(W=k.data(nt+R[se]),k.css(R[se],W))},setMode:function(k,R){return R==="toggle"&&(R=k.is(":hidden")?"show":"hide"),R},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper"))return k.parent();var R={width:k.outerWidth(!0),height:k.outerHeight(!0),float:k.css("float")},W=g("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),se={width:k.width(),height:k.height()},oe=document.activeElement;try{oe.id}catch{oe=document.body}return k.wrap(W),(k[0]===oe||g.contains(k[0],oe))&&g(oe).trigger("focus"),W=k.parent(),k.css("position")==="static"?(W.css({position:"relative"}),k.css({position:"relative"})):(g.extend(R,{position:k.css("position"),zIndex:k.css("z-index")}),g.each(["top","left","bottom","right"],function(ue,we){R[we]=k.css(we),isNaN(parseInt(R[we],10))&&(R[we]="auto")}),k.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),k.css(se),W.css(R).show()},removeWrapper:function(k){var R=document.activeElement;return k.parent().is(".ui-effects-wrapper")&&(k.parent().replaceWith(k),(k[0]===R||g.contains(k[0],R))&&g(R).trigger("focus")),k}}),g.extend(g.effects,{version:"1.13.2",define:function(k,R,W){return W||(W=R,R="effect"),g.effects.effect[k]=W,g.effects.effect[k].mode=R,W},scaledDimensions:function(k,R,W){if(R===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var se=W!=="horizontal"?(R||100)/100:1,oe=W!=="vertical"?(R||100)/100:1;return{height:k.height()*oe,width:k.width()*se,outerHeight:k.outerHeight()*oe,outerWidth:k.outerWidth()*se}},clipToBox:function(k){return{width:k.clip.right-k.clip.left,height:k.clip.bottom-k.clip.top,left:k.clip.left,top:k.clip.top}},unshift:function(k,R,W){var se=k.queue();R>1&&se.splice.apply(se,[1,0].concat(se.splice(R,W))),k.dequeue()},saveStyle:function(k){k.data(ft,k[0].style.cssText)},restoreStyle:function(k){k[0].style.cssText=k.data(ft)||"",k.removeData(ft)},mode:function(k,R){var W=k.is(":hidden");return R==="toggle"&&(R=W?"show":"hide"),(W?R==="hide":R==="show")&&(R="none"),R},getBaseline:function(k,R){var W,se;switch(k[0]){case"top":W=0;break;case"middle":W=.5;break;case"bottom":W=1;break;default:W=k[0]/R.height}switch(k[1]){case"left":se=0;break;case"center":se=.5;break;case"right":se=1;break;default:se=k[1]/R.width}return{x:se,y:W}},createPlaceholder:function(k){var R,W=k.css("position"),se=k.position();return k.css({marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()),/^(static|relative)/.test(W)&&(W="absolute",R=g("<"+k[0].nodeName+">").insertAfter(k).css({display:/^(inline|ruby)/.test(k.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:k.css("marginTop"),marginBottom:k.css("marginBottom"),marginLeft:k.css("marginLeft"),marginRight:k.css("marginRight"),float:k.css("float")}).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()).addClass("ui-effects-placeholder"),k.data(nt+"placeholder",R)),k.css({position:W,left:se.left,top:se.top}),R},removePlaceholder:function(k){var R=nt+"placeholder",W=k.data(R);W&&(W.remove(),k.removeData(R))},cleanUp:function(k){g.effects.restoreStyle(k),g.effects.removePlaceholder(k)},setTransition:function(k,R,W,se){return se=se||{},g.each(R,function(oe,ue){var we=k.cssUnit(ue);we[0]>0&&(se[ue]=we[0]*W+we[1])}),se}});function d(k,R,W,se){return g.isPlainObject(k)&&(R=k,k=k.effect),k={effect:k},R==null&&(R={}),typeof R=="function"&&(se=R,W=null,R={}),(typeof R=="number"||g.fx.speeds[R])&&(se=W,W=R,R={}),typeof W=="function"&&(se=W,W=null),R&&g.extend(k,R),W=W||R.duration,k.duration=g.fx.off?0:typeof W=="number"?W:W in g.fx.speeds?g.fx.speeds[W]:g.fx.speeds._default,k.complete=se||R.complete,k}function w(k){return!!(!k||typeof k=="number"||g.fx.speeds[k]||typeof k=="string"&&!g.effects.effect[k]||typeof k=="function"||typeof k=="object"&&!k.effect)}g.fn.extend({effect:function(){var k=d.apply(this,arguments),R=g.effects.effect[k.effect],W=R.mode,se=k.queue,oe=se||"fx",ue=k.complete,we=k.mode,Te=[],Ve=function(me){var ke=g(this),qe=g.effects.mode(ke,we)||W;ke.data(Tt,!0),Te.push(qe),W&&(qe==="show"||qe===W&&qe==="hide")&&ke.show(),(!W||qe!=="none")&&g.effects.saveStyle(ke),typeof me=="function"&&me()};if(g.fx.off||!R)return we?this[we](k.duration,ue):this.each(function(){ue&&ue.call(this)});function De(me){var ke=g(this);function qe(){ke.removeData(Tt),g.effects.cleanUp(ke),k.mode==="hide"&&ke.hide(),lt()}function lt(){typeof ue=="function"&&ue.call(ke[0]),typeof me=="function"&&me()}k.mode=Te.shift(),g.uiBackCompat!==!1&&!W?(ke.is(":hidden")?we==="hide":we==="show")?(ke[we](),lt()):R.call(ke[0],k,lt):k.mode==="none"?(ke[we](),lt()):R.call(ke[0],k,qe)}return se===!1?this.each(Ve).each(De):this.queue(oe,Ve).queue(oe,De)},show:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="show",this.effect.call(this,W)}}(g.fn.show),hide:function(k){return function(R){if(w(R))return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="hide",this.effect.call(this,W)}}(g.fn.hide),toggle:function(k){return function(R){if(w(R)||typeof R=="boolean")return k.apply(this,arguments);var W=d.apply(this,arguments);return W.mode="toggle",this.effect.call(this,W)}}(g.fn.toggle),cssUnit:function(k){var R=this.css(k),W=[];return g.each(["em","px","%","pt"],function(se,oe){R.indexOf(oe)>0&&(W=[parseFloat(R),oe])}),W},cssClip:function(k){return k?this.css("clip","rect("+k.top+"px "+k.right+"px "+k.bottom+"px "+k.left+"px)"):I(this.css("clip"),this)},transfer:function(k,R){var W=g(this),se=g(k.to),oe=se.css("position")==="fixed",ue=g("body"),we=oe?ue.scrollTop():0,Te=oe?ue.scrollLeft():0,Ve=se.offset(),De={top:Ve.top-we,left:Ve.left-Te,height:se.innerHeight(),width:se.innerWidth()},me=W.offset(),ke=g("<div class='ui-effects-transfer'></div>");ke.appendTo("body").addClass(k.className).css({top:me.top-we,left:me.left-Te,height:W.innerHeight(),width:W.innerWidth(),position:oe?"fixed":"absolute"}).animate(De,k.duration,k.easing,function(){ke.remove(),typeof R=="function"&&R()})}});function I(k,R){var W=R.outerWidth(),se=R.outerHeight(),oe=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,ue=oe.exec(k)||["",0,W,se,0];return{top:parseFloat(ue[1])||0,right:ue[2]==="auto"?W:parseFloat(ue[2]),bottom:ue[3]==="auto"?se:parseFloat(ue[3]),left:parseFloat(ue[4])||0}}g.fx.step.clip=function(k){k.clipInit||(k.start=g(k.elem).cssClip(),typeof k.end=="string"&&(k.end=I(k.end,k.elem)),k.clipInit=!0),g(k.elem).cssClip({top:k.pos*(k.end.top-k.start.top)+k.start.top,right:k.pos*(k.end.right-k.start.right)+k.start.right,bottom:k.pos*(k.end.bottom-k.start.bottom)+k.start.bottom,left:k.pos*(k.end.left-k.start.left)+k.start.left})}}(),function(){var d={};g.each(["Quad","Cubic","Quart","Quint","Expo"],function(w,I){d[I]=function(k){return Math.pow(k,w+2)}}),g.extend(d,{Sine:function(w){return 1-Math.cos(w*Math.PI/2)},Circ:function(w){return 1-Math.sqrt(1-w*w)},Elastic:function(w){return w===0||w===1?w:-Math.pow(2,8*(w-1))*Math.sin(((w-1)*80-7.5)*Math.PI/15)},Back:function(w){return w*w*(3*w-2)},Bounce:function(w){for(var I,k=4;w<((I=Math.pow(2,--k))-1)/11;);return 1/Math.pow(4,3-k)-7.5625*Math.pow((I*3-2)/22-w,2)}}),g.each(d,function(w,I){g.easing["easeIn"+w]=I,g.easing["easeOut"+w]=function(k){return 1-I(1-k)},g.easing["easeInOut"+w]=function(k){return k<.5?I(k*2)/2:1-I(k*-2+2)/2}})}(),g.effects;/*!
 * jQuery UI Effects Blind 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("blind","hide",function(d,w){var I={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},k=g(this),R=d.direction||"up",W=k.cssClip(),se={clip:g.extend({},W)},oe=g.effects.createPlaceholder(k);se.clip[I[R][0]]=se.clip[I[R][1]],d.mode==="show"&&(k.cssClip(se.clip),oe&&oe.css(g.effects.clipToBox(se)),se.clip=W),oe&&oe.animate(g.effects.clipToBox(se),d.duration,d.easing),k.animate(se,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Bounce 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("bounce",function(d,w){var I,k,R,W=g(this),se=d.mode,oe=se==="hide",ue=se==="show",we=d.direction||"up",Te=d.distance,Ve=d.times||5,De=Ve*2+(ue||oe?1:0),me=d.duration/De,ke=d.easing,qe=we==="up"||we==="down"?"top":"left",lt=we==="up"||we==="left",pt=0,Ft=W.queue().length;for(g.effects.createPlaceholder(W),R=W.css(qe),Te||(Te=W[qe==="top"?"outerHeight":"outerWidth"]()/3),ue&&(k={opacity:1},k[qe]=R,W.css("opacity",0).css(qe,lt?-Te*2:Te*2).animate(k,me,ke)),oe&&(Te=Te/Math.pow(2,Ve-1)),k={},k[qe]=R;pt<Ve;pt++)I={},I[qe]=(lt?"-=":"+=")+Te,W.animate(I,me,ke).animate(k,me,ke),Te=oe?Te*2:Te/2;oe&&(I={opacity:0},I[qe]=(lt?"-=":"+=")+Te,W.animate(I,me,ke)),W.queue(w),g.effects.unshift(W,Ft,De+1)});/*!
 * jQuery UI Effects Clip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("clip","hide",function(d,w){var I,k={},R=g(this),W=d.direction||"vertical",se=W==="both",oe=se||W==="horizontal",ue=se||W==="vertical";I=R.cssClip(),k.clip={top:ue?(I.bottom-I.top)/2:I.top,right:oe?(I.right-I.left)/2:I.right,bottom:ue?(I.bottom-I.top)/2:I.bottom,left:oe?(I.right-I.left)/2:I.left},g.effects.createPlaceholder(R),d.mode==="show"&&(R.cssClip(k.clip),k.clip=I),R.animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Drop 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("drop","hide",function(d,w){var I,k=g(this),R=d.mode,W=R==="show",se=d.direction||"left",oe=se==="up"||se==="down"?"top":"left",ue=se==="up"||se==="left"?"-=":"+=",we=ue==="+="?"-=":"+=",Te={opacity:0};g.effects.createPlaceholder(k),I=d.distance||k[oe==="top"?"outerHeight":"outerWidth"](!0)/2,Te[oe]=ue+I,W&&(k.css(Te),Te[oe]=we+I,Te.opacity=1),k.animate(Te,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Explode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("explode","hide",function(d,w){var I,k,R,W,se,oe,ue=d.pieces?Math.round(Math.sqrt(d.pieces)):3,we=ue,Te=g(this),Ve=d.mode,De=Ve==="show",me=Te.show().css("visibility","hidden").offset(),ke=Math.ceil(Te.outerWidth()/we),qe=Math.ceil(Te.outerHeight()/ue),lt=[];function pt(){lt.push(this),lt.length===ue*we&&Ft()}for(I=0;I<ue;I++)for(W=me.top+I*qe,oe=I-(ue-1)/2,k=0;k<we;k++)R=me.left+k*ke,se=k-(we-1)/2,Te.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-k*ke,top:-I*qe}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:ke,height:qe,left:R+(De?se*ke:0),top:W+(De?oe*qe:0),opacity:De?0:1}).animate({left:R+(De?0:se*ke),top:W+(De?0:oe*qe),opacity:De?1:0},d.duration||500,d.easing,pt);function Ft(){Te.css({visibility:"visible"}),g(lt).remove(),w()}});/*!
 * jQuery UI Effects Fade 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fade","toggle",function(d,w){var I=d.mode==="show";g(this).css("opacity",I?0:1).animate({opacity:I?1:0},{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Fold 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("fold","hide",function(d,w){var I=g(this),k=d.mode,R=k==="show",W=k==="hide",se=d.size||15,oe=/([0-9]+)%/.exec(se),ue=!!d.horizFirst,we=ue?["right","bottom"]:["bottom","right"],Te=d.duration/2,Ve=g.effects.createPlaceholder(I),De=I.cssClip(),me={clip:g.extend({},De)},ke={clip:g.extend({},De)},qe=[De[we[0]],De[we[1]]],lt=I.queue().length;oe&&(se=parseInt(oe[1],10)/100*qe[W?0:1]),me.clip[we[0]]=se,ke.clip[we[0]]=se,ke.clip[we[1]]=0,R&&(I.cssClip(ke.clip),Ve&&Ve.css(g.effects.clipToBox(ke)),ke.clip=De),I.queue(function(pt){Ve&&Ve.animate(g.effects.clipToBox(me),Te,d.easing).animate(g.effects.clipToBox(ke),Te,d.easing),pt()}).animate(me,Te,d.easing).animate(ke,Te,d.easing).queue(w),g.effects.unshift(I,lt,4)});/*!
 * jQuery UI Effects Highlight 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("highlight","show",function(d,w){var I=g(this),k={backgroundColor:I.css("backgroundColor")};d.mode==="hide"&&(k.opacity=0),g.effects.saveStyle(I),I.css({backgroundImage:"none",backgroundColor:d.color||"#ffff99"}).animate(k,{queue:!1,duration:d.duration,easing:d.easing,complete:w})});/*!
 * jQuery UI Effects Size 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("size",function(d,w){var I,k,R,W=g(this),se=["fontSize"],oe=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],ue=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],we=d.mode,Te=we!=="effect",Ve=d.scale||"both",De=d.origin||["middle","center"],me=W.css("position"),ke=W.position(),qe=g.effects.scaledDimensions(W),lt=d.from||qe,pt=d.to||g.effects.scaledDimensions(W,0);g.effects.createPlaceholder(W),we==="show"&&(R=lt,lt=pt,pt=R),k={from:{y:lt.height/qe.height,x:lt.width/qe.width},to:{y:pt.height/qe.height,x:pt.width/qe.width}},(Ve==="box"||Ve==="both")&&(k.from.y!==k.to.y&&(lt=g.effects.setTransition(W,oe,k.from.y,lt),pt=g.effects.setTransition(W,oe,k.to.y,pt)),k.from.x!==k.to.x&&(lt=g.effects.setTransition(W,ue,k.from.x,lt),pt=g.effects.setTransition(W,ue,k.to.x,pt))),(Ve==="content"||Ve==="both")&&k.from.y!==k.to.y&&(lt=g.effects.setTransition(W,se,k.from.y,lt),pt=g.effects.setTransition(W,se,k.to.y,pt)),De&&(I=g.effects.getBaseline(De,qe),lt.top=(qe.outerHeight-lt.outerHeight)*I.y+ke.top,lt.left=(qe.outerWidth-lt.outerWidth)*I.x+ke.left,pt.top=(qe.outerHeight-pt.outerHeight)*I.y+ke.top,pt.left=(qe.outerWidth-pt.outerWidth)*I.x+ke.left),delete lt.outerHeight,delete lt.outerWidth,W.css(lt),(Ve==="content"||Ve==="both")&&(oe=oe.concat(["marginTop","marginBottom"]).concat(se),ue=ue.concat(["marginLeft","marginRight"]),W.find("*[width]").each(function(){var Ft=g(this),zt=g.effects.scaledDimensions(Ft),Nt={height:zt.height*k.from.y,width:zt.width*k.from.x,outerHeight:zt.outerHeight*k.from.y,outerWidth:zt.outerWidth*k.from.x},Mt={height:zt.height*k.to.y,width:zt.width*k.to.x,outerHeight:zt.height*k.to.y,outerWidth:zt.width*k.to.x};k.from.y!==k.to.y&&(Nt=g.effects.setTransition(Ft,oe,k.from.y,Nt),Mt=g.effects.setTransition(Ft,oe,k.to.y,Mt)),k.from.x!==k.to.x&&(Nt=g.effects.setTransition(Ft,ue,k.from.x,Nt),Mt=g.effects.setTransition(Ft,ue,k.to.x,Mt)),Te&&g.effects.saveStyle(Ft),Ft.css(Nt),Ft.animate(Mt,d.duration,d.easing,function(){Te&&g.effects.restoreStyle(Ft)})})),W.animate(pt,{queue:!1,duration:d.duration,easing:d.easing,complete:function(){var Ft=W.offset();pt.opacity===0&&W.css("opacity",lt.opacity),Te||(W.css("position",me==="static"?"relative":me).offset(Ft),g.effects.saveStyle(W)),w()}})});/*!
 * jQuery UI Effects Scale 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("scale",function(d,w){var I=g(this),k=d.mode,R=parseInt(d.percent,10)||(parseInt(d.percent,10)===0||k!=="effect"?0:100),W=g.extend(!0,{from:g.effects.scaledDimensions(I),to:g.effects.scaledDimensions(I,R,d.direction||"both"),origin:d.origin||["middle","center"]},d);d.fade&&(W.from.opacity=1,W.to.opacity=0),g.effects.effect.size.call(this,W,w)});/*!
 * jQuery UI Effects Puff 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("puff","hide",function(d,w){var I=g.extend(!0,{},d,{fade:!0,percent:parseInt(d.percent,10)||150});g.effects.effect.scale.call(this,I,w)});/*!
 * jQuery UI Effects Pulsate 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("pulsate","show",function(d,w){var I=g(this),k=d.mode,R=k==="show",W=k==="hide",se=R||W,oe=(d.times||5)*2+(se?1:0),ue=d.duration/oe,we=0,Te=1,Ve=I.queue().length;for((R||!I.is(":visible"))&&(I.css("opacity",0).show(),we=1);Te<oe;Te++)I.animate({opacity:we},ue,d.easing),we=1-we;I.animate({opacity:we},ue,d.easing),I.queue(w),g.effects.unshift(I,Ve,oe+1)});/*!
 * jQuery UI Effects Shake 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("shake",function(d,w){var I=1,k=g(this),R=d.direction||"left",W=d.distance||20,se=d.times||3,oe=se*2+1,ue=Math.round(d.duration/oe),we=R==="up"||R==="down"?"top":"left",Te=R==="up"||R==="left",Ve={},De={},me={},ke=k.queue().length;for(g.effects.createPlaceholder(k),Ve[we]=(Te?"-=":"+=")+W,De[we]=(Te?"+=":"-=")+W*2,me[we]=(Te?"-=":"+=")+W*2,k.animate(Ve,ue,d.easing);I<se;I++)k.animate(De,ue,d.easing).animate(me,ue,d.easing);k.animate(De,ue,d.easing).animate(Ve,ue/2,d.easing).queue(w),g.effects.unshift(k,ke,oe+1)});/*!
 * jQuery UI Effects Slide 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.effects.define("slide","show",function(d,w){var I,k,R=g(this),W={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},se=d.mode,oe=d.direction||"left",ue=oe==="up"||oe==="down"?"top":"left",we=oe==="up"||oe==="left",Te=d.distance||R[ue==="top"?"outerHeight":"outerWidth"](!0),Ve={};g.effects.createPlaceholder(R),I=R.cssClip(),k=R.position()[ue],Ve[ue]=(we?-1:1)*Te+k,Ve.clip=R.cssClip(),Ve.clip[W[oe][1]]=Ve.clip[W[oe][0]],se==="show"&&(R.cssClip(Ve.clip),R.css(ue,Ve[ue]),Ve.clip=I,Ve[ue]=k),R.animate(Ve,{queue:!1,duration:d.duration,easing:d.easing,complete:w})}),g.uiBackCompat!==!1&&g.effects.define("transfer",function(d,w){g(this).transfer(d,w)});/*!
 * jQuery UI Focusable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.focusable=function(d,w){var I,k,R,W,se,oe=d.nodeName.toLowerCase();return oe==="area"?(I=d.parentNode,k=I.name,!d.href||!k||I.nodeName.toLowerCase()!=="map"?!1:(R=g("img[usemap='#"+k+"']"),R.length>0&&R.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(oe)?(W=!d.disabled,W&&(se=g(d).closest("fieldset")[0],se&&(W=!se.disabled))):oe==="a"?W=d.href||w:W=w,W&&g(d).is(":visible")&&qt(g(d)))};function qt(d){for(var w=d.css("visibility");w==="inherit";)d=d.parent(),w=d.css("visibility");return w==="visible"}g.extend(g.expr.pseudos,{focusable:function(d){return g.ui.focusable(d,g.attr(d,"tabindex")!=null)}}),g.ui.focusable,g.fn._form=function(){return typeof this[0].form=="string"?this.closest("form"):g(this[0].form)};/*!
 * jQuery UI Form Reset Mixin 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.formResetMixin={_formResetHandler:function(){var d=g(this);setTimeout(function(){var w=d.data("ui-form-reset-instances");g.each(w,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element._form(),!!this.form.length){var d=this.form.data("ui-form-reset-instances")||[];d.length||this.form.on("reset.ui-form-reset",this._formResetHandler),d.push(this),this.form.data("ui-form-reset-instances",d)}},_unbindFormResetHandler:function(){if(this.form.length){var d=this.form.data("ui-form-reset-instances");d.splice(g.inArray(this,d),1),d.length?this.form.data("ui-form-reset-instances",d):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */if(g.expr.pseudos||(g.expr.pseudos=g.expr[":"]),g.uniqueSort||(g.uniqueSort=g.unique),!g.escapeSelector){var Vt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,vt=function(d,w){return w?d==="\0"?"ï¿½":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d};g.escapeSelector=function(d){return(d+"").replace(Vt,vt)}}(!g.fn.even||!g.fn.odd)&&g.fn.extend({even:function(){return this.filter(function(d){return d%2===0})},odd:function(){return this.filter(function(d){return d%2===1})}});/*!
 * jQuery UI Keycode 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};/*!
 * jQuery UI Labels 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.labels=function(){var d,w,I,k,R;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(k=this.eq(0).parents("label"),I=this.attr("id"),I&&(d=this.eq(0).parents().last(),R=d.add(d.length?d.siblings():this.siblings()),w="label[for='"+g.escapeSelector(I)+"']",k=k.add(R.find(w).addBack(w))),this.pushStack(k)):this.pushStack([])};/*!
 * jQuery UI Scroll Parent 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.scrollParent=function(d){var w=this.css("position"),I=w==="absolute",k=d?/(auto|scroll|hidden)/:/(auto|scroll)/,R=this.parents().filter(function(){var W=g(this);return I&&W.css("position")==="static"?!1:k.test(W.css("overflow")+W.css("overflow-y")+W.css("overflow-x"))}).eq(0);return w==="fixed"||!R.length?g(this[0].ownerDocument||document):R};/*!
 * jQuery UI Tabbable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.expr.pseudos,{tabbable:function(d){var w=g.attr(d,"tabindex"),I=w!=null;return(!I||w>=0)&&g.ui.focusable(d,I)}});/*!
 * jQuery UI Unique ID 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.fn.extend({uniqueId:function(){var d=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&g(this).removeAttr("id")})}});/*!
 * jQuery UI Accordion 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(d){return d.find("> li > :first-child").add(d.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var d=this.options;this.prevShow=this.prevHide=g(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),!d.collapsible&&(d.active===!1||d.active==null)&&(d.active=0),this._processPanels(),d.active<0&&(d.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():g()}},_createIcons:function(){var d,w,I=this.options.icons;I&&(d=g("<span>"),this._addClass(d,"ui-accordion-header-icon","ui-icon "+I.header),d.prependTo(this.headers),w=this.active.children(".ui-accordion-header-icon"),this._removeClass(w,I.header)._addClass(w,null,I.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var d;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),d=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&d.css("height","")},_setOption:function(d,w){if(d==="active"){this._activate(w);return}d==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(w)),this._super(d,w),d==="collapsible"&&!w&&this.options.active===!1&&this._activate(0),d==="icons"&&(this._destroyIcons(),w&&this._createIcons())},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!d)},_keydown:function(d){if(!(d.altKey||d.ctrlKey)){var w=g.ui.keyCode,I=this.headers.length,k=this.headers.index(d.target),R=!1;switch(d.keyCode){case w.RIGHT:case w.DOWN:R=this.headers[(k+1)%I];break;case w.LEFT:case w.UP:R=this.headers[(k-1+I)%I];break;case w.SPACE:case w.ENTER:this._eventHandler(d);break;case w.HOME:R=this.headers[0];break;case w.END:R=this.headers[I-1];break}R&&(g(d.target).attr("tabIndex",-1),g(R).attr("tabIndex",0),g(R).trigger("focus"),d.preventDefault())}},_panelKeyDown:function(d){d.keyCode===g.ui.keyCode.UP&&d.ctrlKey&&g(d.currentTarget).prev().trigger("focus")},refresh:function(){var d=this.options;this._processPanels(),d.active===!1&&d.collapsible===!0||!this.headers.length?(d.active=!1,this.active=g()):d.active===!1?this._activate(0):this.active.length&&!g.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(d.active=!1,this.active=g()):this._activate(Math.max(0,d.active-1)):d.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var d=this.headers,w=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),w&&(this._off(d.not(this.headers)),this._off(w.not(this.panels)))},_refresh:function(){var d,w=this.options,I=w.heightStyle,k=this.element.parent();this.active=this._findActive(w.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var R=g(this),W=R.uniqueId().attr("id"),se=R.next(),oe=se.uniqueId().attr("id");R.attr("aria-controls",oe),se.attr("aria-labelledby",W)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(w.event),I==="fill"?(d=k.height(),this.element.siblings(":visible").each(function(){var R=g(this),W=R.css("position");W==="absolute"||W==="fixed"||(d-=R.outerHeight(!0))}),this.headers.each(function(){d-=g(this).outerHeight(!0)}),this.headers.next().each(function(){g(this).height(Math.max(0,d-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):I==="auto"&&(d=0,this.headers.next().each(function(){var R=g(this).is(":visible");R||g(this).show(),d=Math.max(d,g(this).css("height","").height()),R||g(this).hide()}).height(d))},_activate:function(d){var w=this._findActive(d)[0];w!==this.active[0]&&(w=w||this.active[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return typeof d=="number"?this.headers.eq(d):g()},_setupEvents:function(d){var w={keydown:"_keydown"};d&&g.each(d.split(" "),function(I,k){w[k]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,w),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(d){var w,I,k=this.options,R=this.active,W=g(d.currentTarget),se=W[0]===R[0],oe=se&&k.collapsible,ue=oe?g():W.next(),we=R.next(),Te={oldHeader:R,oldPanel:we,newHeader:oe?g():W,newPanel:ue};d.preventDefault(),!(se&&!k.collapsible||this._trigger("beforeActivate",d,Te)===!1)&&(k.active=oe?!1:this.headers.index(W),this.active=se?g():W,this._toggle(Te),this._removeClass(R,"ui-accordion-header-active","ui-state-active"),k.icons&&(w=R.children(".ui-accordion-header-icon"),this._removeClass(w,null,k.icons.activeHeader)._addClass(w,null,k.icons.header)),se||(this._removeClass(W,"ui-accordion-header-collapsed")._addClass(W,"ui-accordion-header-active","ui-state-active"),k.icons&&(I=W.children(".ui-accordion-header-icon"),this._removeClass(I,null,k.icons.header)._addClass(I,null,k.icons.activeHeader)),this._addClass(W.next(),"ui-accordion-content-active")))},_toggle:function(d){var w=d.newPanel,I=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=w,this.prevHide=I,this.options.animate?this._animate(w,I,d):(I.hide(),w.show(),this._toggleComplete(d)),I.attr({"aria-hidden":"true"}),I.prev().attr({"aria-selected":"false","aria-expanded":"false"}),w.length&&I.length?I.prev().attr({tabIndex:-1,"aria-expanded":"false"}):w.length&&this.headers.filter(function(){return parseInt(g(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),w.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(d,w,I){var k,R,W,se=this,oe=0,ue=d.css("box-sizing"),we=d.length&&(!w.length||d.index()<w.index()),Te=this.options.animate||{},Ve=we&&Te.down||Te,De=function(){se._toggleComplete(I)};if(typeof Ve=="number"&&(W=Ve),typeof Ve=="string"&&(R=Ve),R=R||Ve.easing||Te.easing,W=W||Ve.duration||Te.duration,!w.length)return d.animate(this.showProps,W,R,De);if(!d.length)return w.animate(this.hideProps,W,R,De);k=d.show().outerHeight(),w.animate(this.hideProps,{duration:W,easing:R,step:function(me,ke){ke.now=Math.round(me)}}),d.hide().animate(this.showProps,{duration:W,easing:R,complete:De,step:function(me,ke){ke.now=Math.round(me),ke.prop!=="height"?ue==="content-box"&&(oe+=ke.now):se.options.heightStyle!=="content"&&(ke.now=Math.round(k-w.outerHeight()-oe),oe=0)}})},_toggleComplete:function(d){var w=d.oldPanel,I=w.prev();this._removeClass(w,"ui-accordion-content-active"),this._removeClass(I,"ui-accordion-header-active")._addClass(I,"ui-accordion-header-collapsed"),w.length&&(w.parent()[0].className=w.parent()[0].className),this._trigger("activate",null,d)}}),g.ui.safeActiveElement=function(d){var w;try{w=d.activeElement}catch{w=d.body}return w||(w=d.body),w.nodeName||(w=d.body),w};/*!
 * jQuery UI Menu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(d){d.preventDefault(),this._activateItem(d)},"click .ui-menu-item":function(d){var w=g(d.target),I=g(g.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&w.not(".ui-state-disabled").length&&(this.select(d),d.isPropagationStopped()||(this.mouseHandled=!0),w.has(".ui-menu").length?this.expand(d):!this.element.is(":focus")&&I.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,w){var I=this.active||this._menuItems().first();w||this.focus(d,I)},blur:function(d){this._delay(function(){var w=!g.contains(this.element[0],g.ui.safeActiveElement(this.document[0]));w&&this.collapseAll(d)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(d){this._closeOnDocumentClick(d)&&this.collapseAll(d,!0),this.mouseHandled=!1}})},_activateItem:function(d){if(!this.previousFilter&&!(d.clientX===this.lastMousePosition.x&&d.clientY===this.lastMousePosition.y)){this.lastMousePosition={x:d.clientX,y:d.clientY};var w=g(d.target).closest(".ui-menu-item"),I=g(d.currentTarget);w[0]===I[0]&&(I.is(".ui-state-active")||(this._removeClass(I.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(d,I)))}},_destroy:function(){var d=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),w=d.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),w.children().each(function(){var I=g(this);I.data("ui-menu-submenu-caret")&&I.remove()})},_keydown:function(d){var w,I,k,R,W=!0;switch(d.keyCode){case g.ui.keyCode.PAGE_UP:this.previousPage(d);break;case g.ui.keyCode.PAGE_DOWN:this.nextPage(d);break;case g.ui.keyCode.HOME:this._move("first","first",d);break;case g.ui.keyCode.END:this._move("last","last",d);break;case g.ui.keyCode.UP:this.previous(d);break;case g.ui.keyCode.DOWN:this.next(d);break;case g.ui.keyCode.LEFT:this.collapse(d);break;case g.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(d);break;case g.ui.keyCode.ENTER:case g.ui.keyCode.SPACE:this._activate(d);break;case g.ui.keyCode.ESCAPE:this.collapse(d);break;default:W=!1,I=this.previousFilter||"",R=!1,k=d.keyCode>=96&&d.keyCode<=105?(d.keyCode-96).toString():String.fromCharCode(d.keyCode),clearTimeout(this.filterTimer),k===I?R=!0:k=I+k,w=this._filterMenuItems(k),w=R&&w.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):w,w.length||(k=String.fromCharCode(d.keyCode),w=this._filterMenuItems(k)),w.length?(this.focus(d,w),this.previousFilter=k,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}W&&d.preventDefault()},_activate:function(d){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(d):this.select(d))},refresh:function(){var d,w,I,k,R,W=this,se=this.options.icons.submenu,oe=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),I=oe.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var ue=g(this),we=ue.prev(),Te=g("<span>").data("ui-menu-submenu-caret",!0);W._addClass(Te,"ui-menu-icon","ui-icon "+se),we.attr("aria-haspopup","true").prepend(Te),ue.attr("aria-labelledby",we.attr("id"))}),this._addClass(I,"ui-menu","ui-widget ui-widget-content ui-front"),d=oe.add(this.element),w=d.find(this.options.items),w.not(".ui-menu-item").each(function(){var ue=g(this);W._isDivider(ue)&&W._addClass(ue,"ui-menu-divider","ui-widget-content")}),k=w.not(".ui-menu-item, .ui-menu-divider"),R=k.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(k,"ui-menu-item")._addClass(R,"ui-menu-item-wrapper"),w.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!g.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(d,w){if(d==="icons"){var I=this.element.find(".ui-menu-icon");this._removeClass(I,null,this.options.icons.submenu)._addClass(I,null,w.submenu)}this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",String(d)),this._toggleClass(null,"ui-state-disabled",!!d)},focus:function(d,w){var I,k,R;this.blur(d,d&&d.type==="focus"),this._scrollIntoView(w),this.active=w.first(),k=this.active.children(".ui-menu-item-wrapper"),this._addClass(k,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",k.attr("id")),R=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(R,null,"ui-state-active"),d&&d.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),I=w.children(".ui-menu"),I.length&&d&&/^mouse/.test(d.type)&&this._startOpening(I),this.activeMenu=w.parent(),this._trigger("focus",d,{item:w})},_scrollIntoView:function(d){var w,I,k,R,W,se;this._hasScroll()&&(w=parseFloat(g.css(this.activeMenu[0],"borderTopWidth"))||0,I=parseFloat(g.css(this.activeMenu[0],"paddingTop"))||0,k=d.offset().top-this.activeMenu.offset().top-w-I,R=this.activeMenu.scrollTop(),W=this.activeMenu.height(),se=d.outerHeight(),k<0?this.activeMenu.scrollTop(R+k):k+se>W&&this.activeMenu.scrollTop(R+k-W+se))},blur:function(d,w){w||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",d,{item:this.active}),this.active=null)},_startOpening:function(d){clearTimeout(this.timer),d.attr("aria-hidden")==="true"&&(this.timer=this._delay(function(){this._close(),this._open(d)},this.delay))},_open:function(d){var w=g.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(w)},collapseAll:function(d,w){clearTimeout(this.timer),this.timer=this._delay(function(){var I=w?this.element:g(d&&d.target).closest(this.element.find(".ui-menu"));I.length||(I=this.element),this._close(I),this.blur(d),this._removeClass(I.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=I},w?0:this.delay)},_close:function(d){d||(d=this.active?this.active.parent():this.element),d.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(d){return!g(d.target).closest(".ui-menu").length},_isDivider:function(d){return!/[^\-\u2014\u2013\s]/.test(d.text())},collapse:function(d){var w=this.active&&this.active.parent().closest(".ui-menu-item",this.element);w&&w.length&&(this._close(),this.focus(d,w))},expand:function(d){var w=this.active&&this._menuItems(this.active.children(".ui-menu")).first();w&&w.length&&(this._open(w.parent()),this._delay(function(){this.focus(d,w)}))},next:function(d){this._move("next","first",d)},previous:function(d){this._move("prev","last",d)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(d){return(d||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(d,w,I){var k;this.active&&(d==="first"||d==="last"?k=this.active[d==="first"?"prevAll":"nextAll"](".ui-menu-item").last():k=this.active[d+"All"](".ui-menu-item").first()),(!k||!k.length||!this.active)&&(k=this._menuItems(this.activeMenu)[w]()),this.focus(I,k)},nextPage:function(d){var w,I,k;if(!this.active){this.next(d);return}this.isLastItem()||(this._hasScroll()?(I=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-I-k<0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu)[this.active?"last":"first"]()))},previousPage:function(d){var w,I,k;if(!this.active){this.next(d);return}this.isFirstItem()||(this._hasScroll()?(I=this.active.offset().top,k=this.element.innerHeight(),g.fn.jquery.indexOf("3.2.")===0&&(k+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return w=g(this),w.offset().top-I+k>0}),this.focus(d,w)):this.focus(d,this._menuItems(this.activeMenu).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||g(d.target).closest(".ui-menu-item");var w={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,w)},_filterMenuItems:function(d){var w=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),I=new RegExp("^"+w,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return I.test(String.prototype.trim.call(g(this).children(".ui-menu-item-wrapper").text()))})}});/*!
 * jQuery UI Autocomplete 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var d,w,I,k=this.element[0].nodeName.toLowerCase(),R=k==="textarea",W=k==="input";this.isMultiLine=R||!W&&this._isContentEditable(this.element),this.valueMethod=this.element[R||W?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(se){if(this.element.prop("readOnly")){d=!0,I=!0,w=!0;return}d=!1,I=!1,w=!1;var oe=g.ui.keyCode;switch(se.keyCode){case oe.PAGE_UP:d=!0,this._move("previousPage",se);break;case oe.PAGE_DOWN:d=!0,this._move("nextPage",se);break;case oe.UP:d=!0,this._keyEvent("previous",se);break;case oe.DOWN:d=!0,this._keyEvent("next",se);break;case oe.ENTER:this.menu.active&&(d=!0,se.preventDefault(),this.menu.select(se));break;case oe.TAB:this.menu.active&&this.menu.select(se);break;case oe.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(se),se.preventDefault());break;default:w=!0,this._searchTimeout(se);break}},keypress:function(se){if(d){d=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&se.preventDefault();return}if(!w){var oe=g.ui.keyCode;switch(se.keyCode){case oe.PAGE_UP:this._move("previousPage",se);break;case oe.PAGE_DOWN:this._move("nextPage",se);break;case oe.UP:this._keyEvent("previous",se);break;case oe.DOWN:this._keyEvent("next",se);break}}},input:function(se){if(I){I=!1,se.preventDefault();return}this._searchTimeout(se)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(se){clearTimeout(this.searching),this.close(se),this._change(se)}}),this._initSource(),this.menu=g("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(se){se.preventDefault()},menufocus:function(se,oe){var ue,we;if(this.isNewMenu&&(this.isNewMenu=!1,se.originalEvent&&/^mouse/.test(se.originalEvent.type))){this.menu.blur(),this.document.one("mousemove",function(){g(se.target).trigger(se.originalEvent)});return}we=oe.item.data("ui-autocomplete-item"),this._trigger("focus",se,{item:we})!==!1&&se.originalEvent&&/^key/.test(se.originalEvent.type)&&this._value(we.value),ue=oe.item.attr("aria-label")||we.value,ue&&String.prototype.trim.call(ue).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(ue))},100))},menuselect:function(se,oe){var ue=oe.item.data("ui-autocomplete-item"),we=this.previous;this.element[0]!==g.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=we,this._delay(function(){this.previous=we,this.selectedItem=ue})),this._trigger("select",se,{item:ue})!==!1&&this._value(ue.value),this.term=this._value(),this.close(se),this.selectedItem=ue}}),this.liveRegion=g("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(d,w){this._super(d,w),d==="source"&&this._initSource(),d==="appendTo"&&this.menu.element.appendTo(this._appendTo()),d==="disabled"&&w&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(d){var w=this.menu.element[0];return d.target===this.element[0]||d.target===w||g.contains(w,d.target)},_closeOnClickOutside:function(d){this._isEventTargetInWidget(d)||this.close()},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_initSource:function(){var d,w,I=this;Array.isArray(this.options.source)?(d=this.options.source,this.source=function(k,R){R(g.ui.autocomplete.filter(d,k.term))}):typeof this.options.source=="string"?(w=this.options.source,this.source=function(k,R){I.xhr&&I.xhr.abort(),I.xhr=g.ajax({url:w,data:k,dataType:"json",success:function(W){R(W)},error:function(){R([])}})}):this.source=this.options.source},_searchTimeout:function(d){clearTimeout(this.searching),this.searching=this._delay(function(){var w=this.term===this._value(),I=this.menu.element.is(":visible"),k=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;(!w||w&&!I&&!k)&&(this.selectedItem=null,this.search(null,d))},this.options.delay)},search:function(d,w){if(d=d??this._value(),this.term=this._value(),d.length<this.options.minLength)return this.close(w);if(this._trigger("search",w)!==!1)return this._search(d)},_search:function(d){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:d},this._response())},_response:function(){var d=++this.requestIndex;return(function(w){d===this.requestIndex&&this.__response(w),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}).bind(this)},__response:function(d){d&&(d=this._normalize(d)),this._trigger("response",null,{content:d}),!this.options.disabled&&d&&d.length&&!this.cancelSearch?(this._suggest(d),this._trigger("open")):this._close()},close:function(d){this.cancelSearch=!0,this._close(d)},_close:function(d){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",d))},_change:function(d){this.previous!==this._value()&&this._trigger("change",d,{item:this.selectedItem})},_normalize:function(d){return d.length&&d[0].label&&d[0].value?d:g.map(d,function(w){return typeof w=="string"?{label:w,value:w}:g.extend({},w,{label:w.label||w.value,value:w.value||w.label})})},_suggest:function(d){var w=this.menu.element.empty();this._renderMenu(w,d),this.isNewMenu=!0,this.menu.refresh(),w.show(),this._resizeMenu(),w.position(g.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(d,w){var I=this;g.each(w,function(k,R){I._renderItemData(d,R)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-autocomplete-item",w)},_renderItem:function(d,w){return g("<li>").append(g("<div>").text(w.label)).appendTo(d)},_move:function(d,w){if(!this.menu.element.is(":visible")){this.search(null,w);return}if(this.menu.isFirstItem()&&/^previous/.test(d)||this.menu.isLastItem()&&/^next/.test(d)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[d](w)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(d,w){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(d,w),w.preventDefault())},_isContentEditable:function(d){if(!d.length)return!1;var w=d.prop("contentEditable");return w==="inherit"?this._isContentEditable(d.parent()):w==="true"}}),g.extend(g.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,w){var I=new RegExp(g.ui.autocomplete.escapeRegex(w),"i");return g.grep(d,function(k){return I.test(k.label||k.value||k)})}}),g.widget("ui.autocomplete",g.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var w;this._superApply(arguments),!(this.options.disabled||this.cancelSearch)&&(d&&d.length?w=this.options.messages.results(d.length):w=this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(g("<div>").text(w))},100))}}),g.ui.autocomplete;/*!
 * jQuery UI Controlgroup 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Ut=/ui-corner-([a-z]){2,6}/g;g.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var d=this,w=[];g.each(this.options.items,function(I,k){var R,W={};if(k){if(I==="controlgroupLabel"){R=d.element.find(k),R.each(function(){var se=g(this);se.children(".ui-controlgroup-label-contents").length||se.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),d._addClass(R,null,"ui-widget ui-widget-content ui-state-default"),w=w.concat(R.get());return}g.fn[I]&&(d["_"+I+"Options"]?W=d["_"+I+"Options"]("middle"):W={classes:{}},d.element.find(k).each(function(){var se=g(this),oe=se[I]("instance"),ue=g.widget.extend({},W);if(!(I==="button"&&se.parent(".ui-spinner").length)){oe||(oe=se[I]()[I]("instance")),oe&&(ue.classes=d._resolveClassesValues(ue.classes,oe)),se[I](ue);var we=se[I]("widget");g.data(we[0],"ui-controlgroup-data",oe||se[I]("instance")),w.push(we[0])}}))}}),this.childWidgets=g(g.uniqueSort(w)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(d){this.childWidgets.each(function(){var w=g(this),I=w.data("ui-controlgroup-data");I&&I[d]&&I[d]()})},_updateCornerClass:function(d,w){var I="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",k=this._buildSimpleOptions(w,"label").classes.label;this._removeClass(d,null,I),this._addClass(d,null,k)},_buildSimpleOptions:function(d,w){var I=this.options.direction==="vertical",k={classes:{}};return k.classes[w]={middle:"",first:"ui-corner-"+(I?"top":"left"),last:"ui-corner-"+(I?"bottom":"right"),only:"ui-corner-all"}[d],k},_spinnerOptions:function(d){var w=this._buildSimpleOptions(d,"ui-spinner");return w.classes["ui-spinner-up"]="",w.classes["ui-spinner-down"]="",w},_buttonOptions:function(d){return this._buildSimpleOptions(d,"ui-button")},_checkboxradioOptions:function(d){return this._buildSimpleOptions(d,"ui-checkboxradio-label")},_selectmenuOptions:function(d){var w=this.options.direction==="vertical";return{width:w?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(w?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(w?"top":"left")},last:{"ui-selectmenu-button-open":w?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(w?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[d]}},_resolveClassesValues:function(d,w){var I={};return g.each(d,function(k){var R=w.options.classes[k]||"";R=String.prototype.trim.call(R.replace(Ut,"")),I[k]=(R+" "+d[k]).replace(/\s+/g," ")}),I},_setOption:function(d,w){if(d==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(d,w),d==="disabled"){this._callChildMethod(w?"disable":"enable");return}this.refresh()},refresh:function(){var d,w=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),d=this.childWidgets,this.options.onlyVisible&&(d=d.filter(":visible")),d.length&&(g.each(["first","last"],function(I,k){var R=d[k]().data("ui-controlgroup-data");if(R&&w["_"+R.widgetName+"Options"]){var W=w["_"+R.widgetName+"Options"](d.length===1?"only":k);W.classes=w._resolveClassesValues(W.classes,R),R.element[R.widgetName](W)}else w._updateCornerClass(d[k](),k)}),this._callChildMethod("refresh"))}});/*!
 * jQuery UI Checkboxradio 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.checkboxradio",[g.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var d,w,I,k=this._super()||{};return this._readType(),w=this.element.labels(),this.label=g(w[w.length-1]),this.label.length||g.error("No label found for checkboxradio widget"),this.originalLabel="",I=this.label.contents().not(this.element[0]),I.length&&(this.originalLabel+=I.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(k.label=this.originalLabel),d=this.element[0].disabled,d!=null&&(k.disabled=d),k},_create:function(){var d=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),d&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var d=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,(d!=="input"||!/radio|checkbox/.test(this.type))&&g.error("Can't create checkboxradio on element.nodeName="+d+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var d,w=this.element[0].name,I="input[name='"+g.escapeSelector(w)+"']";return w?(this.form.length?d=g(this.form[0].elements).filter(I):d=g(I).filter(function(){return g(this)._form().length===0}),d.not(this.element)):g([])},_toggleClasses:function(){var d=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",d)._toggleClass(this.icon,null,"ui-icon-blank",!d),this.type==="radio"&&this._getRadioGroup().each(function(){var w=g(this).checkboxradio("instance");w&&w._removeClass(w.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(d,w){if(!(d==="label"&&!w)){if(this._super(d,w),d==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",w),this.element[0].disabled=w;return}this.refresh()}},_updateIcon:function(d){var w="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=g("<span>"),this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(w+=d?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,d?"ui-icon-blank":"ui-icon-check")):w+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",w),d||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var d=this.label.contents().not(this.element[0]);this.icon&&(d=d.not(this.icon[0])),this.iconSpace&&(d=d.not(this.iconSpace[0])),d.remove(),this.label.append(this.options.label)},refresh:function(){var d=this.element[0].checked,w=this.element[0].disabled;this._updateIcon(d),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",d),this.options.label!==null&&this._updateLabel(),w!==this.options.disabled&&this._setOptions({disabled:w})}}]),g.ui.checkboxradio;/*!
 * jQuery UI Button 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var d,w=this._super()||{};return this.isInput=this.element.is("input"),d=this.element[0].disabled,d!=null&&(w.disabled=d),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(w.label=this.originalLabel),w},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(d){d.keyCode===g.ui.keyCode.SPACE&&(d.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),!this.options.showLabel&&!this.title&&this.element.attr("title",this.options.label)},_updateIcon:function(d,w){var I=d!=="iconPosition",k=I?this.options.iconPosition:w,R=k==="top"||k==="bottom";this.icon?I&&this._removeClass(this.icon,null,this.options.icon):(this.icon=g("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),I&&this._addClass(this.icon,null,w),this._attachIcon(k),R?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=g("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(k))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(d){this.icon[/^(?:end|bottom)/.test(d)?"before":"after"](this.iconSpace)},_attachIcon:function(d){this.element[/^(?:end|bottom)/.test(d)?"append":"prepend"](this.icon)},_setOptions:function(d){var w=d.showLabel===void 0?this.options.showLabel:d.showLabel,I=d.icon===void 0?this.options.icon:d.icon;!w&&!I&&(d.showLabel=!0),this._super(d)},_setOption:function(d,w){d==="icon"&&(w?this._updateIcon(d,w):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),d==="iconPosition"&&this._updateIcon(d,w),d==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!w),this._updateTooltip()),d==="label"&&(this.isInput?this.element.val(w):(this.element.html(w),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(d,w),d==="disabled"&&(this._toggleClass(null,"ui-state-disabled",w),this.element[0].disabled=w,w&&this.element.trigger("blur"))},refresh:function(){var d=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");d!==this.options.disabled&&this._setOptions({disabled:d}),this._updateTooltip()}}),g.uiBackCompat!==!1&&(g.widget("ui.button",g.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)?this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"):this.options.icon&&(this.options.icons.primary=this.options.icon),this._super()},_setOption:function(d,w){if(d==="text"){this._super("showLabel",w);return}d==="showLabel"&&(this.options.text=w),d==="icon"&&(this.options.icons.primary=w),d==="icons"&&(w.primary?(this._super("icon",w.primary),this._super("iconPosition","beginning")):w.secondary&&(this._super("icon",w.secondary),this._super("iconPosition","end"))),this._superApply(arguments)}}),g.fn.button=function(d){return function(w){var I=typeof w=="string",k=Array.prototype.slice.call(arguments,1),R=this;return I?!this.length&&w==="instance"?R=void 0:this.each(function(){var W,se=g(this).attr("type"),oe=se!=="checkbox"&&se!=="radio"?"button":"checkboxradio",ue=g.data(this,"ui-"+oe);if(w==="instance")return R=ue,!1;if(!ue)return g.error("cannot call methods on button prior to initialization; attempted to call method '"+w+"'");if(typeof ue[w]!="function"||w.charAt(0)==="_")return g.error("no such method '"+w+"' for button widget instance");if(W=ue[w].apply(ue,k),W!==ue&&W!==void 0)return R=W&&W.jquery?R.pushStack(W.get()):W,!1}):(k.length&&(w=g.widget.extend.apply(null,[w].concat(k))),this.each(function(){var W=g(this).attr("type"),se=W!=="checkbox"&&W!=="radio"?"button":"checkboxradio",oe=g.data(this,"ui-"+se);if(oe)oe.option(w||{}),oe._init&&oe._init();else{if(se==="button"){d.call(g(this),w);return}g(this).checkboxradio(g.extend({icon:!1},w))}})),R}}(g.fn.button),g.fn.buttonset=function(){return g.ui.controlgroup||g.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),g.ui.button;/*!
 * jQuery UI Datepicker 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.extend(g.ui,{datepicker:{version:"1.13.2"}});var Pt;function Yt(d){for(var w,I;d.length&&d[0]!==document;){if(w=d.css("position"),(w==="absolute"||w==="relative"||w==="fixed")&&(I=parseInt(d.css("zIndex"),10),!isNaN(I)&&I!==0))return I;d=d.parent()}return 0}function Ai(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},g.extend(this._defaults,this.regional[""]),this.regional.en=g.extend(!0,{},this.regional[""]),this.regional["en-US"]=g.extend(!0,{},this.regional.en),this.dpDiv=Ri(g("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}g.extend(Ai.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(d){return Li(this._defaults,d||{}),this},_attachDatepicker:function(d,w){var I,k,R;I=d.nodeName.toLowerCase(),k=I==="div"||I==="span",d.id||(this.uuid+=1,d.id="dp"+this.uuid),R=this._newInst(g(d),k),R.settings=g.extend({},w||{}),I==="input"?this._connectDatepicker(d,R):k&&this._inlineDatepicker(d,R)},_newInst:function(d,w){var I=d[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:I,input:d,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:w,dpDiv:w?Ri(g("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(d,w){var I=g(d);w.append=g([]),w.trigger=g([]),!I.hasClass(this.markerClassName)&&(this._attachments(I,w),I.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(w),g.data(d,"datepicker",w),w.settings.disabled&&this._disableDatepicker(d))},_attachments:function(d,w){var I,k,R,W=this._get(w,"appendText"),se=this._get(w,"isRTL");w.append&&w.append.remove(),W&&(w.append=g("<span>").addClass(this._appendClass).text(W),d[se?"before":"after"](w.append)),d.off("focus",this._showDatepicker),w.trigger&&w.trigger.remove(),I=this._get(w,"showOn"),(I==="focus"||I==="both")&&d.on("focus",this._showDatepicker),(I==="button"||I==="both")&&(k=this._get(w,"buttonText"),R=this._get(w,"buttonImage"),this._get(w,"buttonImageOnly")?w.trigger=g("<img>").addClass(this._triggerClass).attr({src:R,alt:k,title:k}):(w.trigger=g("<button type='button'>").addClass(this._triggerClass),R?w.trigger.html(g("<img>").attr({src:R,alt:k,title:k})):w.trigger.text(k)),d[se?"before":"after"](w.trigger),w.trigger.on("click",function(){return g.datepicker._datepickerShowing&&g.datepicker._lastInput===d[0]?g.datepicker._hideDatepicker():(g.datepicker._datepickerShowing&&g.datepicker._lastInput!==d[0]&&g.datepicker._hideDatepicker(),g.datepicker._showDatepicker(d[0])),!1}))},_autoSize:function(d){if(this._get(d,"autoSize")&&!d.inline){var w,I,k,R,W=new Date(2009,11,20),se=this._get(d,"dateFormat");se.match(/[DM]/)&&(w=function(oe){for(I=0,k=0,R=0;R<oe.length;R++)oe[R].length>I&&(I=oe[R].length,k=R);return k},W.setMonth(w(this._get(d,se.match(/MM/)?"monthNames":"monthNamesShort"))),W.setDate(w(this._get(d,se.match(/DD/)?"dayNames":"dayNamesShort"))+20-W.getDay())),d.input.attr("size",this._formatDate(d,W).length)}},_inlineDatepicker:function(d,w){var I=g(d);I.hasClass(this.markerClassName)||(I.addClass(this.markerClassName).append(w.dpDiv),g.data(d,"datepicker",w),this._setDate(w,this._getDefaultDate(w),!0),this._updateDatepicker(w),this._updateAlternate(w),w.settings.disabled&&this._disableDatepicker(d),w.dpDiv.css("display","block"))},_dialogDatepicker:function(d,w,I,k,R){var W,se,oe,ue,we,Te=this._dialogInst;return Te||(this.uuid+=1,W="dp"+this.uuid,this._dialogInput=g("<input type='text' id='"+W+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),g("body").append(this._dialogInput),Te=this._dialogInst=this._newInst(this._dialogInput,!1),Te.settings={},g.data(this._dialogInput[0],"datepicker",Te)),Li(Te.settings,k||{}),w=w&&w.constructor===Date?this._formatDate(Te,w):w,this._dialogInput.val(w),this._pos=R?R.length?R:[R.pageX,R.pageY]:null,this._pos||(se=document.documentElement.clientWidth,oe=document.documentElement.clientHeight,ue=document.documentElement.scrollLeft||document.body.scrollLeft,we=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[se/2-100+ue,oe/2-150+we]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),Te.settings.onSelect=I,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),g.blockUI&&g.blockUI(this.dpDiv),g.data(this._dialogInput[0],"datepicker",Te),this},_destroyDatepicker:function(d){var w,I=g(d),k=g.data(d,"datepicker");I.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),g.removeData(d,"datepicker"),w==="input"?(k.append.remove(),k.trigger.remove(),I.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):(w==="div"||w==="span")&&I.removeClass(this.markerClassName).empty(),Pt===k&&(Pt=null,this._curInst=null))},_enableDatepicker:function(d){var w,I,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!1,R.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(w==="div"||w==="span")&&(I=k.children("."+this._inlineClass),I.children().removeClass("ui-state-disabled"),I.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}))},_disableDatepicker:function(d){var w,I,k=g(d),R=g.data(d,"datepicker");k.hasClass(this.markerClassName)&&(w=d.nodeName.toLowerCase(),w==="input"?(d.disabled=!0,R.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(w==="div"||w==="span")&&(I=k.children("."+this._inlineClass),I.children().addClass("ui-state-disabled"),I.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=g.map(this._disabledInputs,function(W){return W===d?null:W}),this._disabledInputs[this._disabledInputs.length]=d)},_isDisabledDatepicker:function(d){if(!d)return!1;for(var w=0;w<this._disabledInputs.length;w++)if(this._disabledInputs[w]===d)return!0;return!1},_getInst:function(d){try{return g.data(d,"datepicker")}catch{throw"Missing instance data for this datepicker"}},_optionDatepicker:function(d,w,I){var k,R,W,se,oe=this._getInst(d);if(arguments.length===2&&typeof w=="string")return w==="defaults"?g.extend({},g.datepicker._defaults):oe?w==="all"?g.extend({},oe.settings):this._get(oe,w):null;k=w||{},typeof w=="string"&&(k={},k[w]=I),oe&&(this._curInst===oe&&this._hideDatepicker(),R=this._getDateDatepicker(d,!0),W=this._getMinMaxDate(oe,"min"),se=this._getMinMaxDate(oe,"max"),Li(oe.settings,k),W!==null&&k.dateFormat!==void 0&&k.minDate===void 0&&(oe.settings.minDate=this._formatDate(oe,W)),se!==null&&k.dateFormat!==void 0&&k.maxDate===void 0&&(oe.settings.maxDate=this._formatDate(oe,se)),"disabled"in k&&(k.disabled?this._disableDatepicker(d):this._enableDatepicker(d)),this._attachments(g(d),oe),this._autoSize(oe),this._setDate(oe,R),this._updateAlternate(oe),this._updateDatepicker(oe))},_changeDatepicker:function(d,w,I){this._optionDatepicker(d,w,I)},_refreshDatepicker:function(d){var w=this._getInst(d);w&&this._updateDatepicker(w)},_setDateDatepicker:function(d,w){var I=this._getInst(d);I&&(this._setDate(I,w),this._updateDatepicker(I),this._updateAlternate(I))},_getDateDatepicker:function(d,w){var I=this._getInst(d);return I&&!I.inline&&this._setDateFromField(I,w),I?this._getDate(I):null},_doKeyDown:function(d){var w,I,k,R=g.datepicker._getInst(d.target),W=!0,se=R.dpDiv.is(".ui-datepicker-rtl");if(R._keyEvent=!0,g.datepicker._datepickerShowing)switch(d.keyCode){case 9:g.datepicker._hideDatepicker(),W=!1;break;case 13:return k=g("td."+g.datepicker._dayOverClass+":not(."+g.datepicker._currentClass+")",R.dpDiv),k[0]&&g.datepicker._selectDay(d.target,R.selectedMonth,R.selectedYear,k[0]),w=g.datepicker._get(R,"onSelect"),w?(I=g.datepicker._formatDate(R),w.apply(R.input?R.input[0]:null,[I,R])):g.datepicker._hideDatepicker(),!1;case 27:g.datepicker._hideDatepicker();break;case 33:g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 34:g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 35:(d.ctrlKey||d.metaKey)&&g.datepicker._clearDate(d.target),W=d.ctrlKey||d.metaKey;break;case 36:(d.ctrlKey||d.metaKey)&&g.datepicker._gotoToday(d.target),W=d.ctrlKey||d.metaKey;break;case 37:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?1:-1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?-g.datepicker._get(R,"stepBigMonths"):-g.datepicker._get(R,"stepMonths"),"M");break;case 38:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,-7,"D"),W=d.ctrlKey||d.metaKey;break;case 39:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,se?-1:1,"D"),W=d.ctrlKey||d.metaKey,d.originalEvent.altKey&&g.datepicker._adjustDate(d.target,d.ctrlKey?+g.datepicker._get(R,"stepBigMonths"):+g.datepicker._get(R,"stepMonths"),"M");break;case 40:(d.ctrlKey||d.metaKey)&&g.datepicker._adjustDate(d.target,7,"D"),W=d.ctrlKey||d.metaKey;break;default:W=!1}else d.keyCode===36&&d.ctrlKey?g.datepicker._showDatepicker(this):W=!1;W&&(d.preventDefault(),d.stopPropagation())},_doKeyPress:function(d){var w,I,k=g.datepicker._getInst(d.target);if(g.datepicker._get(k,"constrainInput"))return w=g.datepicker._possibleChars(g.datepicker._get(k,"dateFormat")),I=String.fromCharCode(d.charCode==null?d.keyCode:d.charCode),d.ctrlKey||d.metaKey||I<" "||!w||w.indexOf(I)>-1},_doKeyUp:function(d){var w,I=g.datepicker._getInst(d.target);if(I.input.val()!==I.lastVal)try{w=g.datepicker.parseDate(g.datepicker._get(I,"dateFormat"),I.input?I.input.val():null,g.datepicker._getFormatConfig(I)),w&&(g.datepicker._setDateFromField(I),g.datepicker._updateAlternate(I),g.datepicker._updateDatepicker(I))}catch{}return!0},_showDatepicker:function(d){if(d=d.target||d,d.nodeName.toLowerCase()!=="input"&&(d=g("input",d.parentNode)[0]),!(g.datepicker._isDisabledDatepicker(d)||g.datepicker._lastInput===d)){var w,I,k,R,W,se,oe;w=g.datepicker._getInst(d),g.datepicker._curInst&&g.datepicker._curInst!==w&&(g.datepicker._curInst.dpDiv.stop(!0,!0),w&&g.datepicker._datepickerShowing&&g.datepicker._hideDatepicker(g.datepicker._curInst.input[0])),I=g.datepicker._get(w,"beforeShow"),k=I?I.apply(d,[d,w]):{},k!==!1&&(Li(w.settings,k),w.lastVal=null,g.datepicker._lastInput=d,g.datepicker._setDateFromField(w),g.datepicker._inDialog&&(d.value=""),g.datepicker._pos||(g.datepicker._pos=g.datepicker._findPos(d),g.datepicker._pos[1]+=d.offsetHeight),R=!1,g(d).parents().each(function(){return R|=g(this).css("position")==="fixed",!R}),W={left:g.datepicker._pos[0],top:g.datepicker._pos[1]},g.datepicker._pos=null,w.dpDiv.empty(),w.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),g.datepicker._updateDatepicker(w),W=g.datepicker._checkOffset(w,W,R),w.dpDiv.css({position:g.datepicker._inDialog&&g.blockUI?"static":R?"fixed":"absolute",display:"none",left:W.left+"px",top:W.top+"px"}),w.inline||(se=g.datepicker._get(w,"showAnim"),oe=g.datepicker._get(w,"duration"),w.dpDiv.css("z-index",Yt(g(d))+1),g.datepicker._datepickerShowing=!0,g.effects&&g.effects.effect[se]?w.dpDiv.show(se,g.datepicker._get(w,"showOptions"),oe):w.dpDiv[se||"show"](se?oe:null),g.datepicker._shouldFocusInput(w)&&w.input.trigger("focus"),g.datepicker._curInst=w))}},_updateDatepicker:function(d){this.maxRows=4,Pt=d,d.dpDiv.empty().append(this._generateHTML(d)),this._attachHandlers(d);var w,I=this._getNumberOfMonths(d),k=I[1],R=17,W=d.dpDiv.find("."+this._dayOverClass+" a"),se=g.datepicker._get(d,"onUpdateDatepicker");W.length>0&&Ei.apply(W.get(0)),d.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),k>1&&d.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",R*k+"em"),d.dpDiv[(I[0]!==1||I[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),d.dpDiv[(this._get(d,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),d===g.datepicker._curInst&&g.datepicker._datepickerShowing&&g.datepicker._shouldFocusInput(d)&&d.input.trigger("focus"),d.yearshtml&&(w=d.yearshtml,setTimeout(function(){w===d.yearshtml&&d.yearshtml&&d.dpDiv.find("select.ui-datepicker-year").first().replaceWith(d.yearshtml),w=d.yearshtml=null},0)),se&&se.apply(d.input?d.input[0]:null,[d])},_shouldFocusInput:function(d){return d.input&&d.input.is(":visible")&&!d.input.is(":disabled")&&!d.input.is(":focus")},_checkOffset:function(d,w,I){var k=d.dpDiv.outerWidth(),R=d.dpDiv.outerHeight(),W=d.input?d.input.outerWidth():0,se=d.input?d.input.outerHeight():0,oe=document.documentElement.clientWidth+(I?0:g(document).scrollLeft()),ue=document.documentElement.clientHeight+(I?0:g(document).scrollTop());return w.left-=this._get(d,"isRTL")?k-W:0,w.left-=I&&w.left===d.input.offset().left?g(document).scrollLeft():0,w.top-=I&&w.top===d.input.offset().top+se?g(document).scrollTop():0,w.left-=Math.min(w.left,w.left+k>oe&&oe>k?Math.abs(w.left+k-oe):0),w.top-=Math.min(w.top,w.top+R>ue&&ue>R?Math.abs(R+se):0),w},_findPos:function(d){for(var w,I=this._getInst(d),k=this._get(I,"isRTL");d&&(d.type==="hidden"||d.nodeType!==1||g.expr.pseudos.hidden(d));)d=d[k?"previousSibling":"nextSibling"];return w=g(d).offset(),[w.left,w.top]},_hideDatepicker:function(d){var w,I,k,R,W=this._curInst;!W||d&&W!==g.data(d,"datepicker")||this._datepickerShowing&&(w=this._get(W,"showAnim"),I=this._get(W,"duration"),k=function(){g.datepicker._tidyDialog(W)},g.effects&&(g.effects.effect[w]||g.effects[w])?W.dpDiv.hide(w,g.datepicker._get(W,"showOptions"),I,k):W.dpDiv[w==="slideDown"?"slideUp":w==="fadeIn"?"fadeOut":"hide"](w?I:null,k),w||k(),this._datepickerShowing=!1,R=this._get(W,"onClose"),R&&R.apply(W.input?W.input[0]:null,[W.input?W.input.val():"",W]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),g.blockUI&&(g.unblockUI(),g("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(d){d.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(d){if(g.datepicker._curInst){var w=g(d.target),I=g.datepicker._getInst(w[0]);(w[0].id!==g.datepicker._mainDivId&&w.parents("#"+g.datepicker._mainDivId).length===0&&!w.hasClass(g.datepicker.markerClassName)&&!w.closest("."+g.datepicker._triggerClass).length&&g.datepicker._datepickerShowing&&!(g.datepicker._inDialog&&g.blockUI)||w.hasClass(g.datepicker.markerClassName)&&g.datepicker._curInst!==I)&&g.datepicker._hideDatepicker()}},_adjustDate:function(d,w,I){var k=g(d),R=this._getInst(k[0]);this._isDisabledDatepicker(k[0])||(this._adjustInstDate(R,w,I),this._updateDatepicker(R))},_gotoToday:function(d){var w,I=g(d),k=this._getInst(I[0]);this._get(k,"gotoCurrent")&&k.currentDay?(k.selectedDay=k.currentDay,k.drawMonth=k.selectedMonth=k.currentMonth,k.drawYear=k.selectedYear=k.currentYear):(w=new Date,k.selectedDay=w.getDate(),k.drawMonth=k.selectedMonth=w.getMonth(),k.drawYear=k.selectedYear=w.getFullYear()),this._notifyChange(k),this._adjustDate(I)},_selectMonthYear:function(d,w,I){var k=g(d),R=this._getInst(k[0]);R["selected"+(I==="M"?"Month":"Year")]=R["draw"+(I==="M"?"Month":"Year")]=parseInt(w.options[w.selectedIndex].value,10),this._notifyChange(R),this._adjustDate(k)},_selectDay:function(d,w,I,k){var R,W=g(d);g(k).hasClass(this._unselectableClass)||this._isDisabledDatepicker(W[0])||(R=this._getInst(W[0]),R.selectedDay=R.currentDay=parseInt(g("a",k).attr("data-date")),R.selectedMonth=R.currentMonth=w,R.selectedYear=R.currentYear=I,this._selectDate(d,this._formatDate(R,R.currentDay,R.currentMonth,R.currentYear)))},_clearDate:function(d){var w=g(d);this._selectDate(w,"")},_selectDate:function(d,w){var I,k=g(d),R=this._getInst(k[0]);w=w??this._formatDate(R),R.input&&R.input.val(w),this._updateAlternate(R),I=this._get(R,"onSelect"),I?I.apply(R.input?R.input[0]:null,[w,R]):R.input&&R.input.trigger("change"),R.inline?this._updateDatepicker(R):(this._hideDatepicker(),this._lastInput=R.input[0],typeof R.input[0]!="object"&&R.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(d){var w,I,k,R=this._get(d,"altField");R&&(w=this._get(d,"altFormat")||this._get(d,"dateFormat"),I=this._getDate(d),k=this.formatDate(w,I,this._getFormatConfig(d)),g(document).find(R).val(k))},noWeekends:function(d){var w=d.getDay();return[w>0&&w<6,""]},iso8601Week:function(d){var w,I=new Date(d.getTime());return I.setDate(I.getDate()+4-(I.getDay()||7)),w=I.getTime(),I.setMonth(0),I.setDate(1),Math.floor(Math.round((w-I)/864e5)/7)+1},parseDate:function(d,w,I){if(d==null||w==null)throw"Invalid arguments";if(w=typeof w=="object"?w.toString():w+"",w==="")return null;var k,R,W,se=0,oe=(I?I.shortYearCutoff:null)||this._defaults.shortYearCutoff,ue=typeof oe!="string"?oe:new Date().getFullYear()%100+parseInt(oe,10),we=(I?I.dayNamesShort:null)||this._defaults.dayNamesShort,Te=(I?I.dayNames:null)||this._defaults.dayNames,Ve=(I?I.monthNamesShort:null)||this._defaults.monthNamesShort,De=(I?I.monthNames:null)||this._defaults.monthNames,me=-1,ke=-1,qe=-1,lt=-1,pt=!1,Ft,zt=function(ri){var ci=k+1<d.length&&d.charAt(k+1)===ri;return ci&&k++,ci},Nt=function(ri){var ci=zt(ri),bt=ri==="@"?14:ri==="!"?20:ri==="y"&&ci?4:ri==="o"?3:2,di=ri==="y"?bt:1,ii=new RegExp("^\\d{"+di+","+bt+"}"),Hi=w.substring(se).match(ii);if(!Hi)throw"Missing number at position "+se;return se+=Hi[0].length,parseInt(Hi[0],10)},Mt=function(ri,ci,bt){var di=-1,ii=g.map(zt(ri)?bt:ci,function(Hi,Vi){return[[Vi,Hi]]}).sort(function(Hi,Vi){return-(Hi[1].length-Vi[1].length)});if(g.each(ii,function(Hi,Vi){var Ot=Vi[1];if(w.substr(se,Ot.length).toLowerCase()===Ot.toLowerCase())return di=Vi[0],se+=Ot.length,!1}),di!==-1)return di+1;throw"Unknown name at position "+se},$t=function(){if(w.charAt(se)!==d.charAt(k))throw"Unexpected literal at position "+se;se++};for(k=0;k<d.length;k++)if(pt)d.charAt(k)==="'"&&!zt("'")?pt=!1:$t();else switch(d.charAt(k)){case"d":qe=Nt("d");break;case"D":Mt("D",we,Te);break;case"o":lt=Nt("o");break;case"m":ke=Nt("m");break;case"M":ke=Mt("M",Ve,De);break;case"y":me=Nt("y");break;case"@":Ft=new Date(Nt("@")),me=Ft.getFullYear(),ke=Ft.getMonth()+1,qe=Ft.getDate();break;case"!":Ft=new Date((Nt("!")-this._ticksTo1970)/1e4),me=Ft.getFullYear(),ke=Ft.getMonth()+1,qe=Ft.getDate();break;case"'":zt("'")?$t():pt=!0;break;default:$t()}if(se<w.length&&(W=w.substr(se),!/^\s+/.test(W)))throw"Extra/unparsed characters found in date: "+W;if(me===-1?me=new Date().getFullYear():me<100&&(me+=new Date().getFullYear()-new Date().getFullYear()%100+(me<=ue?0:-100)),lt>-1){ke=1,qe=lt;do{if(R=this._getDaysInMonth(me,ke-1),qe<=R)break;ke++,qe-=R}while(!0)}if(Ft=this._daylightSavingAdjust(new Date(me,ke-1,qe)),Ft.getFullYear()!==me||Ft.getMonth()+1!==ke||Ft.getDate()!==qe)throw"Invalid date";return Ft},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(d,w,I){if(!w)return"";var k,R=(I?I.dayNamesShort:null)||this._defaults.dayNamesShort,W=(I?I.dayNames:null)||this._defaults.dayNames,se=(I?I.monthNamesShort:null)||this._defaults.monthNamesShort,oe=(I?I.monthNames:null)||this._defaults.monthNames,ue=function(me){var ke=k+1<d.length&&d.charAt(k+1)===me;return ke&&k++,ke},we=function(me,ke,qe){var lt=""+ke;if(ue(me))for(;lt.length<qe;)lt="0"+lt;return lt},Te=function(me,ke,qe,lt){return ue(me)?lt[ke]:qe[ke]},Ve="",De=!1;if(w)for(k=0;k<d.length;k++)if(De)d.charAt(k)==="'"&&!ue("'")?De=!1:Ve+=d.charAt(k);else switch(d.charAt(k)){case"d":Ve+=we("d",w.getDate(),2);break;case"D":Ve+=Te("D",w.getDay(),R,W);break;case"o":Ve+=we("o",Math.round((new Date(w.getFullYear(),w.getMonth(),w.getDate()).getTime()-new Date(w.getFullYear(),0,0).getTime())/864e5),3);break;case"m":Ve+=we("m",w.getMonth()+1,2);break;case"M":Ve+=Te("M",w.getMonth(),se,oe);break;case"y":Ve+=ue("y")?w.getFullYear():(w.getFullYear()%100<10?"0":"")+w.getFullYear()%100;break;case"@":Ve+=w.getTime();break;case"!":Ve+=w.getTime()*1e4+this._ticksTo1970;break;case"'":ue("'")?Ve+="'":De=!0;break;default:Ve+=d.charAt(k)}return Ve},_possibleChars:function(d){var w,I="",k=!1,R=function(W){var se=w+1<d.length&&d.charAt(w+1)===W;return se&&w++,se};for(w=0;w<d.length;w++)if(k)d.charAt(w)==="'"&&!R("'")?k=!1:I+=d.charAt(w);else switch(d.charAt(w)){case"d":case"m":case"y":case"@":I+="0123456789";break;case"D":case"M":return null;case"'":R("'")?I+="'":k=!0;break;default:I+=d.charAt(w)}return I},_get:function(d,w){return d.settings[w]!==void 0?d.settings[w]:this._defaults[w]},_setDateFromField:function(d,w){if(d.input.val()!==d.lastVal){var I=this._get(d,"dateFormat"),k=d.lastVal=d.input?d.input.val():null,R=this._getDefaultDate(d),W=R,se=this._getFormatConfig(d);try{W=this.parseDate(I,k,se)||R}catch{k=w?"":k}d.selectedDay=W.getDate(),d.drawMonth=d.selectedMonth=W.getMonth(),d.drawYear=d.selectedYear=W.getFullYear(),d.currentDay=k?W.getDate():0,d.currentMonth=k?W.getMonth():0,d.currentYear=k?W.getFullYear():0,this._adjustInstDate(d)}},_getDefaultDate:function(d){return this._restrictMinMax(d,this._determineDate(d,this._get(d,"defaultDate"),new Date))},_determineDate:function(d,w,I){var k=function(se){var oe=new Date;return oe.setDate(oe.getDate()+se),oe},R=function(se){try{return g.datepicker.parseDate(g.datepicker._get(d,"dateFormat"),se,g.datepicker._getFormatConfig(d))}catch{}for(var oe=(se.toLowerCase().match(/^c/)?g.datepicker._getDate(d):null)||new Date,ue=oe.getFullYear(),we=oe.getMonth(),Te=oe.getDate(),Ve=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,De=Ve.exec(se);De;){switch(De[2]||"d"){case"d":case"D":Te+=parseInt(De[1],10);break;case"w":case"W":Te+=parseInt(De[1],10)*7;break;case"m":case"M":we+=parseInt(De[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(ue,we));break;case"y":case"Y":ue+=parseInt(De[1],10),Te=Math.min(Te,g.datepicker._getDaysInMonth(ue,we));break}De=Ve.exec(se)}return new Date(ue,we,Te)},W=w==null||w===""?I:typeof w=="string"?R(w):typeof w=="number"?isNaN(w)?I:k(w):new Date(w.getTime());return W=W&&W.toString()==="Invalid Date"?I:W,W&&(W.setHours(0),W.setMinutes(0),W.setSeconds(0),W.setMilliseconds(0)),this._daylightSavingAdjust(W)},_daylightSavingAdjust:function(d){return d?(d.setHours(d.getHours()>12?d.getHours()+2:0),d):null},_setDate:function(d,w,I){var k=!w,R=d.selectedMonth,W=d.selectedYear,se=this._restrictMinMax(d,this._determineDate(d,w,new Date));d.selectedDay=d.currentDay=se.getDate(),d.drawMonth=d.selectedMonth=d.currentMonth=se.getMonth(),d.drawYear=d.selectedYear=d.currentYear=se.getFullYear(),(R!==d.selectedMonth||W!==d.selectedYear)&&!I&&this._notifyChange(d),this._adjustInstDate(d),d.input&&d.input.val(k?"":this._formatDate(d))},_getDate:function(d){var w=!d.currentYear||d.input&&d.input.val()===""?null:this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return w},_attachHandlers:function(d){var w=this._get(d,"stepMonths"),I="#"+d.id.replace(/\\\\/g,"\\");d.dpDiv.find("[data-handler]").map(function(){var k={prev:function(){g.datepicker._adjustDate(I,-w,"M")},next:function(){g.datepicker._adjustDate(I,+w,"M")},hide:function(){g.datepicker._hideDatepicker()},today:function(){g.datepicker._gotoToday(I)},selectDay:function(){return g.datepicker._selectDay(I,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return g.datepicker._selectMonthYear(I,this,"M"),!1},selectYear:function(){return g.datepicker._selectMonthYear(I,this,"Y"),!1}};g(this).on(this.getAttribute("data-event"),k[this.getAttribute("data-handler")])})},_generateHTML:function(d){var w,I,k,R,W,se,oe,ue,we,Te,Ve,De,me,ke,qe,lt,pt,Ft,zt,Nt,Mt,$t,ri,ci,bt,di,ii,Hi,Vi,Ot,_i,Ti,Wi,Zt,mi,wi,$i,tr,Ar,Tr=new Date,ji=this._daylightSavingAdjust(new Date(Tr.getFullYear(),Tr.getMonth(),Tr.getDate())),Si=this._get(d,"isRTL"),Qs=this._get(d,"showButtonPanel"),$r=this._get(d,"hideIfNoPrevNext"),it=this._get(d,"navigationAsDateFormat"),Se=this._getNumberOfMonths(d),ce=this._get(d,"showCurrentAtPos"),ye=this._get(d,"stepMonths"),xe=Se[0]!==1||Se[1]!==1,Me=this._daylightSavingAdjust(d.currentDay?new Date(d.currentYear,d.currentMonth,d.currentDay):new Date(9999,9,9)),Ge=this._getMinMaxDate(d,"min"),Le=this._getMinMaxDate(d,"max"),Ke=d.drawMonth-ce,st=d.drawYear;if(Ke<0&&(Ke+=12,st--),Le)for(w=this._daylightSavingAdjust(new Date(Le.getFullYear(),Le.getMonth()-Se[0]*Se[1]+1,Le.getDate())),w=Ge&&w<Ge?Ge:w;this._daylightSavingAdjust(new Date(st,Ke,1))>w;)Ke--,Ke<0&&(Ke=11,st--);for(d.drawMonth=Ke,d.drawYear=st,I=this._get(d,"prevText"),I=it?this.formatDate(I,this._daylightSavingAdjust(new Date(st,Ke-ye,1)),this._getFormatConfig(d)):I,this._canAdjustMonth(d,-1,st,Ke)?k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:I}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Si?"e":"w")).text(I))[0].outerHTML:$r?k="":k=g("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:I}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Si?"e":"w")).text(I))[0].outerHTML,R=this._get(d,"nextText"),R=it?this.formatDate(R,this._daylightSavingAdjust(new Date(st,Ke+ye,1)),this._getFormatConfig(d)):R,this._canAdjustMonth(d,1,st,Ke)?W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:R}).append(g("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Si?"w":"e")).text(R))[0].outerHTML:$r?W="":W=g("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:R}).append(g("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(Si?"w":"e")).text(R))[0].outerHTML,se=this._get(d,"currentText"),oe=this._get(d,"gotoCurrent")&&d.currentDay?Me:ji,se=it?this.formatDate(se,oe,this._getFormatConfig(d)):se,ue="",d.inline||(ue=g("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(d,"closeText"))[0].outerHTML),we="",Qs&&(we=g("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(Si?ue:"").append(this._isInRange(d,oe)?g("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(se):"").append(Si?"":ue)[0].outerHTML),Te=parseInt(this._get(d,"firstDay"),10),Te=isNaN(Te)?0:Te,Ve=this._get(d,"showWeek"),De=this._get(d,"dayNames"),me=this._get(d,"dayNamesMin"),ke=this._get(d,"monthNames"),qe=this._get(d,"monthNamesShort"),lt=this._get(d,"beforeShowDay"),pt=this._get(d,"showOtherMonths"),Ft=this._get(d,"selectOtherMonths"),zt=this._getDefaultDate(d),Nt="",$t=0;$t<Se[0];$t++){for(ri="",this.maxRows=4,ci=0;ci<Se[1];ci++){if(bt=this._daylightSavingAdjust(new Date(st,Ke,d.selectedDay)),di=" ui-corner-all",ii="",xe){if(ii+="<div class='ui-datepicker-group",Se[1]>1)switch(ci){case 0:ii+=" ui-datepicker-group-first",di=" ui-corner-"+(Si?"right":"left");break;case Se[1]-1:ii+=" ui-datepicker-group-last",di=" ui-corner-"+(Si?"left":"right");break;default:ii+=" ui-datepicker-group-middle",di="";break}ii+="'>"}for(ii+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+di+"'>"+(/all|left/.test(di)&&$t===0?Si?W:k:"")+(/all|right/.test(di)&&$t===0?Si?k:W:"")+this._generateMonthYearHeader(d,Ke,st,Ge,Le,$t>0||ci>0,ke,qe)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Hi=Ve?"<th class='ui-datepicker-week-col'>"+this._get(d,"weekHeader")+"</th>":"",Mt=0;Mt<7;Mt++)Vi=(Mt+Te)%7,Hi+="<th scope='col'"+((Mt+Te+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+De[Vi]+"'>"+me[Vi]+"</span></th>";for(ii+=Hi+"</tr></thead><tbody>",Ot=this._getDaysInMonth(st,Ke),st===d.selectedYear&&Ke===d.selectedMonth&&(d.selectedDay=Math.min(d.selectedDay,Ot)),_i=(this._getFirstDayOfMonth(st,Ke)-Te+7)%7,Ti=Math.ceil((_i+Ot)/7),Wi=xe&&this.maxRows>Ti?this.maxRows:Ti,this.maxRows=Wi,Zt=this._daylightSavingAdjust(new Date(st,Ke,1-_i)),mi=0;mi<Wi;mi++){for(ii+="<tr>",wi=Ve?"<td class='ui-datepicker-week-col'>"+this._get(d,"calculateWeek")(Zt)+"</td>":"",Mt=0;Mt<7;Mt++)$i=lt?lt.apply(d.input?d.input[0]:null,[Zt]):[!0,""],tr=Zt.getMonth()!==Ke,Ar=tr&&!Ft||!$i[0]||Ge&&Zt<Ge||Le&&Zt>Le,wi+="<td class='"+((Mt+Te+6)%7>=5?" ui-datepicker-week-end":"")+(tr?" ui-datepicker-other-month":"")+(Zt.getTime()===bt.getTime()&&Ke===d.selectedMonth&&d._keyEvent||zt.getTime()===Zt.getTime()&&zt.getTime()===bt.getTime()?" "+this._dayOverClass:"")+(Ar?" "+this._unselectableClass+" ui-state-disabled":"")+(tr&&!pt?"":" "+$i[1]+(Zt.getTime()===Me.getTime()?" "+this._currentClass:"")+(Zt.getTime()===ji.getTime()?" ui-datepicker-today":""))+"'"+((!tr||pt)&&$i[2]?" title='"+$i[2].replace(/'/g,"&#39;")+"'":"")+(Ar?"":" data-handler='selectDay' data-event='click' data-month='"+Zt.getMonth()+"' data-year='"+Zt.getFullYear()+"'")+">"+(tr&&!pt?"&#xa0;":Ar?"<span class='ui-state-default'>"+Zt.getDate()+"</span>":"<a class='ui-state-default"+(Zt.getTime()===ji.getTime()?" ui-state-highlight":"")+(Zt.getTime()===Me.getTime()?" ui-state-active":"")+(tr?" ui-priority-secondary":"")+"' href='#' aria-current='"+(Zt.getTime()===Me.getTime()?"true":"false")+"' data-date='"+Zt.getDate()+"'>"+Zt.getDate()+"</a>")+"</td>",Zt.setDate(Zt.getDate()+1),Zt=this._daylightSavingAdjust(Zt);ii+=wi+"</tr>"}Ke++,Ke>11&&(Ke=0,st++),ii+="</tbody></table>"+(xe?"</div>"+(Se[0]>0&&ci===Se[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),ri+=ii}Nt+=ri}return Nt+=we,d._keyEvent=!1,Nt},_generateMonthYearHeader:function(d,w,I,k,R,W,se,oe){var ue,we,Te,Ve,De,me,ke,qe,lt=this._get(d,"changeMonth"),pt=this._get(d,"changeYear"),Ft=this._get(d,"showMonthAfterYear"),zt=this._get(d,"selectMonthLabel"),Nt=this._get(d,"selectYearLabel"),Mt="<div class='ui-datepicker-title'>",$t="";if(W||!lt)$t+="<span class='ui-datepicker-month'>"+se[w]+"</span>";else{for(ue=k&&k.getFullYear()===I,we=R&&R.getFullYear()===I,$t+="<select class='ui-datepicker-month' aria-label='"+zt+"' data-handler='selectMonth' data-event='change'>",Te=0;Te<12;Te++)(!ue||Te>=k.getMonth())&&(!we||Te<=R.getMonth())&&($t+="<option value='"+Te+"'"+(Te===w?" selected='selected'":"")+">"+oe[Te]+"</option>");$t+="</select>"}if(Ft||(Mt+=$t+(W||!(lt&&pt)?"&#xa0;":"")),!d.yearshtml)if(d.yearshtml="",W||!pt)Mt+="<span class='ui-datepicker-year'>"+I+"</span>";else{for(Ve=this._get(d,"yearRange").split(":"),De=new Date().getFullYear(),me=function(ri){var ci=ri.match(/c[+\-].*/)?I+parseInt(ri.substring(1),10):ri.match(/[+\-].*/)?De+parseInt(ri,10):parseInt(ri,10);return isNaN(ci)?De:ci},ke=me(Ve[0]),qe=Math.max(ke,me(Ve[1]||"")),ke=k?Math.max(ke,k.getFullYear()):ke,qe=R?Math.min(qe,R.getFullYear()):qe,d.yearshtml+="<select class='ui-datepicker-year' aria-label='"+Nt+"' data-handler='selectYear' data-event='change'>";ke<=qe;ke++)d.yearshtml+="<option value='"+ke+"'"+(ke===I?" selected='selected'":"")+">"+ke+"</option>";d.yearshtml+="</select>",Mt+=d.yearshtml,d.yearshtml=null}return Mt+=this._get(d,"yearSuffix"),Ft&&(Mt+=(W||!(lt&&pt)?"&#xa0;":"")+$t),Mt+="</div>",Mt},_adjustInstDate:function(d,w,I){var k=d.selectedYear+(I==="Y"?w:0),R=d.selectedMonth+(I==="M"?w:0),W=Math.min(d.selectedDay,this._getDaysInMonth(k,R))+(I==="D"?w:0),se=this._restrictMinMax(d,this._daylightSavingAdjust(new Date(k,R,W)));d.selectedDay=se.getDate(),d.drawMonth=d.selectedMonth=se.getMonth(),d.drawYear=d.selectedYear=se.getFullYear(),(I==="M"||I==="Y")&&this._notifyChange(d)},_restrictMinMax:function(d,w){var I=this._getMinMaxDate(d,"min"),k=this._getMinMaxDate(d,"max"),R=I&&w<I?I:w;return k&&R>k?k:R},_notifyChange:function(d){var w=this._get(d,"onChangeMonthYear");w&&w.apply(d.input?d.input[0]:null,[d.selectedYear,d.selectedMonth+1,d])},_getNumberOfMonths:function(d){var w=this._get(d,"numberOfMonths");return w==null?[1,1]:typeof w=="number"?[1,w]:w},_getMinMaxDate:function(d,w){return this._determineDate(d,this._get(d,w+"Date"),null)},_getDaysInMonth:function(d,w){return 32-this._daylightSavingAdjust(new Date(d,w,32)).getDate()},_getFirstDayOfMonth:function(d,w){return new Date(d,w,1).getDay()},_canAdjustMonth:function(d,w,I,k){var R=this._getNumberOfMonths(d),W=this._daylightSavingAdjust(new Date(I,k+(w<0?w:R[0]*R[1]),1));return w<0&&W.setDate(this._getDaysInMonth(W.getFullYear(),W.getMonth())),this._isInRange(d,W)},_isInRange:function(d,w){var I,k,R=this._getMinMaxDate(d,"min"),W=this._getMinMaxDate(d,"max"),se=null,oe=null,ue=this._get(d,"yearRange");return ue&&(I=ue.split(":"),k=new Date().getFullYear(),se=parseInt(I[0],10),oe=parseInt(I[1],10),I[0].match(/[+\-].*/)&&(se+=k),I[1].match(/[+\-].*/)&&(oe+=k)),(!R||w.getTime()>=R.getTime())&&(!W||w.getTime()<=W.getTime())&&(!se||w.getFullYear()>=se)&&(!oe||w.getFullYear()<=oe)},_getFormatConfig:function(d){var w=this._get(d,"shortYearCutoff");return w=typeof w!="string"?w:new Date().getFullYear()%100+parseInt(w,10),{shortYearCutoff:w,dayNamesShort:this._get(d,"dayNamesShort"),dayNames:this._get(d,"dayNames"),monthNamesShort:this._get(d,"monthNamesShort"),monthNames:this._get(d,"monthNames")}},_formatDate:function(d,w,I,k){w||(d.currentDay=d.selectedDay,d.currentMonth=d.selectedMonth,d.currentYear=d.selectedYear);var R=w?typeof w=="object"?w:this._daylightSavingAdjust(new Date(k,I,w)):this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return this.formatDate(this._get(d,"dateFormat"),R,this._getFormatConfig(d))}});function Ri(d){var w="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return d.on("mouseout",w,function(){g(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",w,Ei)}function Ei(){g.datepicker._isDisabledDatepicker(Pt.inline?Pt.dpDiv.parent()[0]:Pt.input[0])||(g(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),g(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&g(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&g(this).addClass("ui-datepicker-next-hover"))}function Li(d,w){g.extend(d,w);for(var I in w)w[I]==null&&(d[I]=w[I]);return d}g.fn.datepicker=function(d){if(!this.length)return this;g.datepicker.initialized||(g(document).on("mousedown",g.datepicker._checkExternalClick),g.datepicker.initialized=!0),g("#"+g.datepicker._mainDivId).length===0&&g("body").append(g.datepicker.dpDiv);var w=Array.prototype.slice.call(arguments,1);return typeof d=="string"&&(d==="isDisabled"||d==="getDate"||d==="widget")?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):d==="option"&&arguments.length===2&&typeof arguments[1]=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this[0]].concat(w)):this.each(function(){typeof d=="string"?g.datepicker["_"+d+"Datepicker"].apply(g.datepicker,[this].concat(w)):g.datepicker._attachDatepicker(this,d)})},g.datepicker=new Ai,g.datepicker.initialized=!1,g.datepicker.uuid=new Date().getTime(),g.datepicker.version="1.13.2",g.datepicker,g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());/*!
 * jQuery UI Mouse 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var Yi=!1;g(document).on("mouseup",function(){Yi=!1}),g.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.on("mousedown."+this.widgetName,function(w){return d._mouseDown(w)}).on("click."+this.widgetName,function(w){if(g.data(w.target,d.widgetName+".preventClickEvent")===!0)return g.removeData(w.target,d.widgetName+".preventClickEvent"),w.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!Yi){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var w=this,I=d.which===1,k=typeof this.options.cancel=="string"&&d.target.nodeName?g(d.target).closest(this.options.cancel).length:!1;return!I||k||!this._mouseCapture(d)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){w.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(g.data(d.target,this.widgetName+".preventClickEvent")===!0&&g.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(R){return w._mouseMove(R)},this._mouseUpDelegate=function(R){return w._mouseUp(R)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),Yi=!0,!0))}},_mouseMove:function(d){if(this._mouseMoved){if(g.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button)return this._mouseUp(d);if(!d.which){if(d.originalEvent.altKey||d.originalEvent.ctrlKey||d.originalEvent.metaKey||d.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(d)}}return(d.which||d.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==!1,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted)},_mouseUp:function(d){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&g.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Yi=!1,d.preventDefault()},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),g.ui.plugin={add:function(d,w,I){var k,R=g.ui[d].prototype;for(k in I)R.plugins[k]=R.plugins[k]||[],R.plugins[k].push([w,I[k]])},call:function(d,w,I,k){var R,W=d.plugins[w];if(W&&!(!k&&(!d.element[0].parentNode||d.element[0].parentNode.nodeType===11)))for(R=0;R<W.length;R++)d.options[W[R][0]]&&W[R][1].apply(d.element,I)}},g.ui.safeBlur=function(d){d&&d.nodeName.toLowerCase()!=="body"&&g(d).trigger("blur")};/*!
 * jQuery UI Draggable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.draggable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(d,w){this._super(d,w),d==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(d){var w=this.options;return this.helper||w.disabled||g(d.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(d),!this.handle)?!1:(this._blurActiveElement(d),this._blockFrames(w.iframeFix===!0?"iframe":w.iframeFix),!0)},_blockFrames:function(d){this.iframeBlocks=this.document.find(d).map(function(){var w=g(this);return g("<div>").css("position","absolute").appendTo(w.parent()).outerWidth(w.outerWidth()).outerHeight(w.outerHeight()).offset(w.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(d){var w=g.ui.safeActiveElement(this.document[0]),I=g(d.target);I.closest(w).length||g.ui.safeBlur(w)},_mouseStart:function(d){var w=this.options;return this.helper=this._createHelper(d),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),g.ui.ddmanager&&(g.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return g(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(d),this.originalPosition=this.position=this._generatePosition(d,!1),this.originalPageX=d.pageX,this.originalPageY=d.pageY,w.cursorAt&&this._adjustOffsetFromHelper(w.cursorAt),this._setContainment(),this._trigger("start",d)===!1?(this._clear(),!1):(this._cacheHelperProportions(),g.ui.ddmanager&&!w.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this._mouseDrag(d,!0),g.ui.ddmanager&&g.ui.ddmanager.dragStart(this,d),!0)},_refreshOffsets:function(d){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:d.pageX-this.offset.left,top:d.pageY-this.offset.top}},_mouseDrag:function(d,w){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d,!0),this.positionAbs=this._convertPositionTo("absolute"),!w){var I=this._uiHash();if(this._trigger("drag",d,I)===!1)return this._mouseUp(new g.Event("mouseup",d)),!1;this.position=I.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var w=this,I=!1;return g.ui.ddmanager&&!this.options.dropBehaviour&&(I=g.ui.ddmanager.drop(this,d)),this.dropped&&(I=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!I||this.options.revert==="valid"&&I||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,I)?g(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){w._trigger("stop",d)!==!1&&w._clear()}):this._trigger("stop",d)!==!1&&this._clear(),!1},_mouseUp:function(d){return this._unblockFrames(),g.ui.ddmanager&&g.ui.ddmanager.dragStop(this,d),this.handleElement.is(d.target)&&this.element.trigger("focus"),g.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new g.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(d){return this.options.handle?!!g(d.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(d){var w=this.options,I=typeof w.helper=="function",k=I?g(w.helper.apply(this.element[0],[d])):w.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return k.parents("body").length||k.appendTo(w.appendTo==="parent"?this.element[0].parentNode:w.appendTo),I&&k[0]===this.element[0]&&this._setPositionRelative(),k[0]!==this.element[0]&&!/(fixed|absolute)/.test(k.css("position"))&&k.css("position","absolute"),k},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_isRootNode:function(d){return/(html|body)/i.test(d.tagName)||d===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),w=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==w&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var d=this.element.position(),w=this._isRootNode(this.scrollParent[0]);return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+(w?0:this.scrollParent.scrollTop()),left:d.left-(parseInt(this.helper.css("left"),10)||0)+(w?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,I,k=this.options,R=this.document[0];if(this.relativeContainer=null,!k.containment){this.containment=null;return}if(k.containment==="window"){this.containment=[g(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,g(window).scrollLeft()+g(window).width()-this.helperProportions.width-this.margins.left,g(window).scrollTop()+(g(window).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment==="document"){this.containment=[0,0,g(R).width()-this.helperProportions.width-this.margins.left,(g(R).height()||R.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(k.containment.constructor===Array){this.containment=k.containment;return}k.containment==="parent"&&(k.containment=this.helper[0].parentNode),w=g(k.containment),I=w[0],I&&(d=/(scroll|auto)/.test(w.css("overflow")),this.containment=[(parseInt(w.css("borderLeftWidth"),10)||0)+(parseInt(w.css("paddingLeft"),10)||0),(parseInt(w.css("borderTopWidth"),10)||0)+(parseInt(w.css("paddingTop"),10)||0),(d?Math.max(I.scrollWidth,I.offsetWidth):I.offsetWidth)-(parseInt(w.css("borderRightWidth"),10)||0)-(parseInt(w.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(I.scrollHeight,I.offsetHeight):I.offsetHeight)-(parseInt(w.css("borderBottomWidth"),10)||0)-(parseInt(w.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=w)},_convertPositionTo:function(d,w){w||(w=this.position);var I=d==="absolute"?1:-1,k=this._isRootNode(this.scrollParent[0]);return{top:w.top+this.offset.relative.top*I+this.offset.parent.top*I-(this.cssPosition==="fixed"?-this.offset.scroll.top:k?0:this.offset.scroll.top)*I,left:w.left+this.offset.relative.left*I+this.offset.parent.left*I-(this.cssPosition==="fixed"?-this.offset.scroll.left:k?0:this.offset.scroll.left)*I}},_generatePosition:function(d,w){var I,k,R,W,se=this.options,oe=this._isRootNode(this.scrollParent[0]),ue=d.pageX,we=d.pageY;return(!oe||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),w&&(this.containment&&(this.relativeContainer?(k=this.relativeContainer.offset(),I=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):I=this.containment,d.pageX-this.offset.click.left<I[0]&&(ue=I[0]+this.offset.click.left),d.pageY-this.offset.click.top<I[1]&&(we=I[1]+this.offset.click.top),d.pageX-this.offset.click.left>I[2]&&(ue=I[2]+this.offset.click.left),d.pageY-this.offset.click.top>I[3]&&(we=I[3]+this.offset.click.top)),se.grid&&(R=se.grid[1]?this.originalPageY+Math.round((we-this.originalPageY)/se.grid[1])*se.grid[1]:this.originalPageY,we=I?R-this.offset.click.top>=I[1]||R-this.offset.click.top>I[3]?R:R-this.offset.click.top>=I[1]?R-se.grid[1]:R+se.grid[1]:R,W=se.grid[0]?this.originalPageX+Math.round((ue-this.originalPageX)/se.grid[0])*se.grid[0]:this.originalPageX,ue=I?W-this.offset.click.left>=I[0]||W-this.offset.click.left>I[2]?W:W-this.offset.click.left>=I[0]?W-se.grid[0]:W+se.grid[0]:W),se.axis==="y"&&(ue=this.originalPageX),se.axis==="x"&&(we=this.originalPageY)),{top:we-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:oe?0:this.offset.scroll.top),left:ue-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:oe?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(d,w,I){return I=I||this._uiHash(),g.ui.plugin.call(this,d,[w,I,this],!0),/^(drag|start|stop)/.test(d)&&(this.positionAbs=this._convertPositionTo("absolute"),I.offset=this.positionAbs),g.Widget.prototype._trigger.call(this,d,w,I)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),g.ui.plugin.add("draggable","connectToSortable",{start:function(d,w,I){var k=g.extend({},w,{item:I.element});I.sortables=[],g(I.options.connectToSortable).each(function(){var R=g(this).sortable("instance");R&&!R.options.disabled&&(I.sortables.push(R),R.refreshPositions(),R._trigger("activate",d,k))})},stop:function(d,w,I){var k=g.extend({},w,{item:I.element});I.cancelHelperRemoval=!1,g.each(I.sortables,function(){var R=this;R.isOver?(R.isOver=0,I.cancelHelperRemoval=!0,R.cancelHelperRemoval=!1,R._storedCSS={position:R.placeholder.css("position"),top:R.placeholder.css("top"),left:R.placeholder.css("left")},R._mouseStop(d),R.options.helper=R.options._helper):(R.cancelHelperRemoval=!0,R._trigger("deactivate",d,k))})},drag:function(d,w,I){g.each(I.sortables,function(){var k=!1,R=this;R.positionAbs=I.positionAbs,R.helperProportions=I.helperProportions,R.offset.click=I.offset.click,R._intersectsWith(R.containerCache)&&(k=!0,g.each(I.sortables,function(){return this.positionAbs=I.positionAbs,this.helperProportions=I.helperProportions,this.offset.click=I.offset.click,this!==R&&this._intersectsWith(this.containerCache)&&g.contains(R.element[0],this.element[0])&&(k=!1),k})),k?(R.isOver||(R.isOver=1,I._parent=w.helper.parent(),R.currentItem=w.helper.appendTo(R.element).data("ui-sortable-item",!0),R.options._helper=R.options.helper,R.options.helper=function(){return w.helper[0]},d.target=R.currentItem[0],R._mouseCapture(d,!0),R._mouseStart(d,!0,!0),R.offset.click.top=I.offset.click.top,R.offset.click.left=I.offset.click.left,R.offset.parent.left-=I.offset.parent.left-R.offset.parent.left,R.offset.parent.top-=I.offset.parent.top-R.offset.parent.top,I._trigger("toSortable",d),I.dropped=R.element,g.each(I.sortables,function(){this.refreshPositions()}),I.currentItem=I.element,R.fromOutside=I),R.currentItem&&(R._mouseDrag(d),w.position=R.position)):R.isOver&&(R.isOver=0,R.cancelHelperRemoval=!0,R.options._revert=R.options.revert,R.options.revert=!1,R._trigger("out",d,R._uiHash(R)),R._mouseStop(d,!0),R.options.revert=R.options._revert,R.options.helper=R.options._helper,R.placeholder&&R.placeholder.remove(),w.helper.appendTo(I._parent),I._refreshOffsets(d),w.position=I._generatePosition(d,!0),I._trigger("fromSortable",d),I.dropped=!1,g.each(I.sortables,function(){this.refreshPositions()}))})}}),g.ui.plugin.add("draggable","cursor",{start:function(d,w,I){var k=g("body"),R=I.options;k.css("cursor")&&(R._cursor=k.css("cursor")),k.css("cursor",R.cursor)},stop:function(d,w,I){var k=I.options;k._cursor&&g("body").css("cursor",k._cursor)}}),g.ui.plugin.add("draggable","opacity",{start:function(d,w,I){var k=g(w.helper),R=I.options;k.css("opacity")&&(R._opacity=k.css("opacity")),k.css("opacity",R.opacity)},stop:function(d,w,I){var k=I.options;k._opacity&&g(w.helper).css("opacity",k._opacity)}}),g.ui.plugin.add("draggable","scroll",{start:function(d,w,I){I.scrollParentNotHidden||(I.scrollParentNotHidden=I.helper.scrollParent(!1)),I.scrollParentNotHidden[0]!==I.document[0]&&I.scrollParentNotHidden[0].tagName!=="HTML"&&(I.overflowOffset=I.scrollParentNotHidden.offset())},drag:function(d,w,I){var k=I.options,R=!1,W=I.scrollParentNotHidden[0],se=I.document[0];W!==se&&W.tagName!=="HTML"?((!k.axis||k.axis!=="x")&&(I.overflowOffset.top+W.offsetHeight-d.pageY<k.scrollSensitivity?W.scrollTop=R=W.scrollTop+k.scrollSpeed:d.pageY-I.overflowOffset.top<k.scrollSensitivity&&(W.scrollTop=R=W.scrollTop-k.scrollSpeed)),(!k.axis||k.axis!=="y")&&(I.overflowOffset.left+W.offsetWidth-d.pageX<k.scrollSensitivity?W.scrollLeft=R=W.scrollLeft+k.scrollSpeed:d.pageX-I.overflowOffset.left<k.scrollSensitivity&&(W.scrollLeft=R=W.scrollLeft-k.scrollSpeed))):((!k.axis||k.axis!=="x")&&(d.pageY-g(se).scrollTop()<k.scrollSensitivity?R=g(se).scrollTop(g(se).scrollTop()-k.scrollSpeed):g(window).height()-(d.pageY-g(se).scrollTop())<k.scrollSensitivity&&(R=g(se).scrollTop(g(se).scrollTop()+k.scrollSpeed))),(!k.axis||k.axis!=="y")&&(d.pageX-g(se).scrollLeft()<k.scrollSensitivity?R=g(se).scrollLeft(g(se).scrollLeft()-k.scrollSpeed):g(window).width()-(d.pageX-g(se).scrollLeft())<k.scrollSensitivity&&(R=g(se).scrollLeft(g(se).scrollLeft()+k.scrollSpeed)))),R!==!1&&g.ui.ddmanager&&!k.dropBehaviour&&g.ui.ddmanager.prepareOffsets(I,d)}}),g.ui.plugin.add("draggable","snap",{start:function(d,w,I){var k=I.options;I.snapElements=[],g(k.snap.constructor!==String?k.snap.items||":data(ui-draggable)":k.snap).each(function(){var R=g(this),W=R.offset();this!==I.element[0]&&I.snapElements.push({item:this,width:R.outerWidth(),height:R.outerHeight(),top:W.top,left:W.left})})},drag:function(d,w,I){var k,R,W,se,oe,ue,we,Te,Ve,De,me=I.options,ke=me.snapTolerance,qe=w.offset.left,lt=qe+I.helperProportions.width,pt=w.offset.top,Ft=pt+I.helperProportions.height;for(Ve=I.snapElements.length-1;Ve>=0;Ve--){if(oe=I.snapElements[Ve].left-I.margins.left,ue=oe+I.snapElements[Ve].width,we=I.snapElements[Ve].top-I.margins.top,Te=we+I.snapElements[Ve].height,lt<oe-ke||qe>ue+ke||Ft<we-ke||pt>Te+ke||!g.contains(I.snapElements[Ve].item.ownerDocument,I.snapElements[Ve].item)){I.snapElements[Ve].snapping&&I.options.snap.release&&I.options.snap.release.call(I.element,d,g.extend(I._uiHash(),{snapItem:I.snapElements[Ve].item})),I.snapElements[Ve].snapping=!1;continue}me.snapMode!=="inner"&&(k=Math.abs(we-Ft)<=ke,R=Math.abs(Te-pt)<=ke,W=Math.abs(oe-lt)<=ke,se=Math.abs(ue-qe)<=ke,k&&(w.position.top=I._convertPositionTo("relative",{top:we-I.helperProportions.height,left:0}).top),R&&(w.position.top=I._convertPositionTo("relative",{top:Te,left:0}).top),W&&(w.position.left=I._convertPositionTo("relative",{top:0,left:oe-I.helperProportions.width}).left),se&&(w.position.left=I._convertPositionTo("relative",{top:0,left:ue}).left)),De=k||R||W||se,me.snapMode!=="outer"&&(k=Math.abs(we-pt)<=ke,R=Math.abs(Te-Ft)<=ke,W=Math.abs(oe-qe)<=ke,se=Math.abs(ue-lt)<=ke,k&&(w.position.top=I._convertPositionTo("relative",{top:we,left:0}).top),R&&(w.position.top=I._convertPositionTo("relative",{top:Te-I.helperProportions.height,left:0}).top),W&&(w.position.left=I._convertPositionTo("relative",{top:0,left:oe}).left),se&&(w.position.left=I._convertPositionTo("relative",{top:0,left:ue-I.helperProportions.width}).left)),!I.snapElements[Ve].snapping&&(k||R||W||se||De)&&I.options.snap.snap&&I.options.snap.snap.call(I.element,d,g.extend(I._uiHash(),{snapItem:I.snapElements[Ve].item})),I.snapElements[Ve].snapping=k||R||W||se||De}}}),g.ui.plugin.add("draggable","stack",{start:function(d,w,I){var k,R=I.options,W=g.makeArray(g(R.stack)).sort(function(se,oe){return(parseInt(g(se).css("zIndex"),10)||0)-(parseInt(g(oe).css("zIndex"),10)||0)});W.length&&(k=parseInt(g(W[0]).css("zIndex"),10)||0,g(W).each(function(se){g(this).css("zIndex",k+se)}),this.css("zIndex",k+W.length))}}),g.ui.plugin.add("draggable","zIndex",{start:function(d,w,I){var k=g(w.helper),R=I.options;k.css("zIndex")&&(R._zIndex=k.css("zIndex")),k.css("zIndex",R.zIndex)},stop:function(d,w,I){var k=I.options;k._zIndex&&g(w.helper).css("zIndex",k._zIndex)}}),g.ui.draggable;/*!
 * jQuery UI Resizable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.resizable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(d){return parseFloat(d)||0},_isNumber:function(d){return!isNaN(parseFloat(d))},_hasScroll:function(d,w){if(g(d).css("overflow")==="hidden")return!1;var I=w&&w==="left"?"scrollLeft":"scrollTop",k=!1;if(d[I]>0)return!0;try{d[I]=1,k=d[I]>0,d[I]=0}catch{}return k},_create:function(){var d,w=this.options,I=this;this._addClass("ui-resizable"),g.extend(this,{_aspectRatio:!!w.aspectRatio,aspectRatio:w.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:w.helper||w.ghost||w.animate?w.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(g("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,d={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(d),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(d),this._proportionallyResize()),this._setupHandles(),w.autoHide&&g(this.element).on("mouseenter",function(){w.disabled||(I._removeClass("ui-resizable-autohide"),I._handles.show())}).on("mouseleave",function(){w.disabled||I.resizing||(I._addClass("ui-resizable-autohide"),I._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var d,w=function(I){g(I).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(w(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),w(this.originalElement),this},_setOption:function(d,w){switch(this._super(d,w),d){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!w;break}},_setupHandles:function(){var d=this.options,w,I,k,R,W,se=this;if(this.handles=d.handles||(g(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=g(),this._addedHandles=g(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),k=this.handles.split(","),this.handles={},I=0;I<k.length;I++)w=String.prototype.trim.call(k[I]),R="ui-resizable-"+w,W=g("<div>"),this._addClass(W,"ui-resizable-handle "+R),W.css({zIndex:d.zIndex}),this.handles[w]=".ui-resizable-"+w,this.element.children(this.handles[w]).length||(this.element.append(W),this._addedHandles=this._addedHandles.add(W));this._renderAxis=function(oe){var ue,we,Te,Ve;oe=oe||this.element;for(ue in this.handles)this.handles[ue].constructor===String?this.handles[ue]=this.element.children(this.handles[ue]).first().show():(this.handles[ue].jquery||this.handles[ue].nodeType)&&(this.handles[ue]=g(this.handles[ue]),this._on(this.handles[ue],{mousedown:se._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(we=g(this.handles[ue],this.element),Ve=/sw|ne|nw|se|n|s/.test(ue)?we.outerHeight():we.outerWidth(),Te=["padding",/ne|nw|n/.test(ue)?"Top":/se|sw|s/.test(ue)?"Bottom":/^e$/.test(ue)?"Right":"Left"].join(""),oe.css(Te,Ve),this._proportionallyResize()),this._handles=this._handles.add(this.handles[ue])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){se.resizing||(this.className&&(W=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),se.axis=W&&W[1]?W[1]:"se")}),d.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(d){var w,I,k=!1;for(w in this.handles)I=g(this.handles[w])[0],(I===d.target||g.contains(I,d.target))&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(d){var w,I,k,R=this.options,W=this.element;return this.resizing=!0,this._renderProxy(),w=this._num(this.helper.css("left")),I=this._num(this.helper.css("top")),R.containment&&(w+=g(R.containment).scrollLeft()||0,I+=g(R.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:w,top:I},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:W.width(),height:W.height()},this.originalSize=this._helper?{width:W.outerWidth(),height:W.outerHeight()}:{width:W.width(),height:W.height()},this.sizeDiff={width:W.outerWidth()-W.width(),height:W.outerHeight()-W.height()},this.originalPosition={left:w,top:I},this.originalMousePosition={left:d.pageX,top:d.pageY},this.aspectRatio=typeof R.aspectRatio=="number"?R.aspectRatio:this.originalSize.width/this.originalSize.height||1,k=g(".ui-resizable-"+this.axis).css("cursor"),g("body").css("cursor",k==="auto"?this.axis+"-resize":k),this._addClass("ui-resizable-resizing"),this._propagate("start",d),!0},_mouseDrag:function(d){var w,I,k=this.originalMousePosition,R=this.axis,W=d.pageX-k.left||0,se=d.pageY-k.top||0,oe=this._change[R];return this._updatePrevProperties(),oe&&(w=oe.apply(this,[d,W,se]),this._updateVirtualBoundaries(d.shiftKey),(this._aspectRatio||d.shiftKey)&&(w=this._updateRatio(w,d)),w=this._respectSize(w,d),this._updateCache(w),this._propagate("resize",d),I=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),g.isEmptyObject(I)||(this._updatePrevProperties(),this._trigger("resize",d,this.ui()),this._applyChanges())),!1},_mouseStop:function(d){this.resizing=!1;var w,I,k,R,W,se,oe,ue=this.options,we=this;return this._helper&&(w=this._proportionallyResizeElements,I=w.length&&/textarea/i.test(w[0].nodeName),k=I&&this._hasScroll(w[0],"left")?0:we.sizeDiff.height,R=I?0:we.sizeDiff.width,W={width:we.helper.width()-R,height:we.helper.height()-k},se=parseFloat(we.element.css("left"))+(we.position.left-we.originalPosition.left)||null,oe=parseFloat(we.element.css("top"))+(we.position.top-we.originalPosition.top)||null,ue.animate||this.element.css(g.extend(W,{top:oe,left:se})),we.helper.height(we.size.height),we.helper.width(we.size.width),this._helper&&!ue.animate&&this._proportionallyResize()),g("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",d),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var d={};return this.position.top!==this.prevPosition.top&&(d.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(d.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(d.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(d.height=this.size.height+"px"),this.helper.css(d),d},_updateVirtualBoundaries:function(d){var w,I,k,R,W,se=this.options;W={minWidth:this._isNumber(se.minWidth)?se.minWidth:0,maxWidth:this._isNumber(se.maxWidth)?se.maxWidth:1/0,minHeight:this._isNumber(se.minHeight)?se.minHeight:0,maxHeight:this._isNumber(se.maxHeight)?se.maxHeight:1/0},(this._aspectRatio||d)&&(w=W.minHeight*this.aspectRatio,k=W.minWidth/this.aspectRatio,I=W.maxHeight*this.aspectRatio,R=W.maxWidth/this.aspectRatio,w>W.minWidth&&(W.minWidth=w),k>W.minHeight&&(W.minHeight=k),I<W.maxWidth&&(W.maxWidth=I),R<W.maxHeight&&(W.maxHeight=R)),this._vBoundaries=W},_updateCache:function(d){this.offset=this.helper.offset(),this._isNumber(d.left)&&(this.position.left=d.left),this._isNumber(d.top)&&(this.position.top=d.top),this._isNumber(d.height)&&(this.size.height=d.height),this._isNumber(d.width)&&(this.size.width=d.width)},_updateRatio:function(d){var w=this.position,I=this.size,k=this.axis;return this._isNumber(d.height)?d.width=d.height*this.aspectRatio:this._isNumber(d.width)&&(d.height=d.width/this.aspectRatio),k==="sw"&&(d.left=w.left+(I.width-d.width),d.top=null),k==="nw"&&(d.top=w.top+(I.height-d.height),d.left=w.left+(I.width-d.width)),d},_respectSize:function(d){var w=this._vBoundaries,I=this.axis,k=this._isNumber(d.width)&&w.maxWidth&&w.maxWidth<d.width,R=this._isNumber(d.height)&&w.maxHeight&&w.maxHeight<d.height,W=this._isNumber(d.width)&&w.minWidth&&w.minWidth>d.width,se=this._isNumber(d.height)&&w.minHeight&&w.minHeight>d.height,oe=this.originalPosition.left+this.originalSize.width,ue=this.originalPosition.top+this.originalSize.height,we=/sw|nw|w/.test(I),Te=/nw|ne|n/.test(I);return W&&(d.width=w.minWidth),se&&(d.height=w.minHeight),k&&(d.width=w.maxWidth),R&&(d.height=w.maxHeight),W&&we&&(d.left=oe-w.minWidth),k&&we&&(d.left=oe-w.maxWidth),se&&Te&&(d.top=ue-w.minHeight),R&&Te&&(d.top=ue-w.maxHeight),!d.width&&!d.height&&!d.left&&d.top?d.top=null:!d.width&&!d.height&&!d.top&&d.left&&(d.left=null),d},_getPaddingPlusBorderDimensions:function(d){for(var w=0,I=[],k=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],R=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];w<4;w++)I[w]=parseFloat(k[w])||0,I[w]+=parseFloat(R[w])||0;return{height:I[0]+I[2],width:I[1]+I[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d,w=0,I=this.helper||this.element;w<this._proportionallyResizeElements.length;w++)d=this._proportionallyResizeElements[w],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(d)),d.css({height:I.height()-this.outerDimensions.height||0,width:I.width()-this.outerDimensions.width||0})},_renderProxy:function(){var d=this.element,w=this.options;this.elementOffset=d.offset(),this._helper?(this.helper=this.helper||g("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++w.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(d,w){return{width:this.originalSize.width+w}},w:function(d,w){var I=this.originalSize,k=this.originalPosition;return{left:k.left+w,width:I.width-w}},n:function(d,w,I){var k=this.originalSize,R=this.originalPosition;return{top:R.top+I,height:k.height-I}},s:function(d,w,I){return{height:this.originalSize.height+I}},se:function(d,w,I){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,w,I]))},sw:function(d,w,I){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,w,I]))},ne:function(d,w,I){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,w,I]))},nw:function(d,w,I){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,w,I]))}},_propagate:function(d,w){g.ui.plugin.call(this,d,[w,this.ui()]),d!=="resize"&&this._trigger(d,w,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),g.ui.plugin.add("resizable","animate",{stop:function(d){var w=g(this).resizable("instance"),I=w.options,k=w._proportionallyResizeElements,R=k.length&&/textarea/i.test(k[0].nodeName),W=R&&w._hasScroll(k[0],"left")?0:w.sizeDiff.height,se=R?0:w.sizeDiff.width,oe={width:w.size.width-se,height:w.size.height-W},ue=parseFloat(w.element.css("left"))+(w.position.left-w.originalPosition.left)||null,we=parseFloat(w.element.css("top"))+(w.position.top-w.originalPosition.top)||null;w.element.animate(g.extend(oe,we&&ue?{top:we,left:ue}:{}),{duration:I.animateDuration,easing:I.animateEasing,step:function(){var Te={width:parseFloat(w.element.css("width")),height:parseFloat(w.element.css("height")),top:parseFloat(w.element.css("top")),left:parseFloat(w.element.css("left"))};k&&k.length&&g(k[0]).css({width:Te.width,height:Te.height}),w._updateCache(Te),w._propagate("resize",d)}})}}),g.ui.plugin.add("resizable","containment",{start:function(){var d,w,I,k,R,W,se,oe=g(this).resizable("instance"),ue=oe.options,we=oe.element,Te=ue.containment,Ve=Te instanceof g?Te.get(0):/parent/.test(Te)?we.parent().get(0):Te;Ve&&(oe.containerElement=g(Ve),/document/.test(Te)||Te===document?(oe.containerOffset={left:0,top:0},oe.containerPosition={left:0,top:0},oe.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||document.body.parentNode.scrollHeight}):(d=g(Ve),w=[],g(["Top","Right","Left","Bottom"]).each(function(De,me){w[De]=oe._num(d.css("padding"+me))}),oe.containerOffset=d.offset(),oe.containerPosition=d.position(),oe.containerSize={height:d.innerHeight()-w[3],width:d.innerWidth()-w[1]},I=oe.containerOffset,k=oe.containerSize.height,R=oe.containerSize.width,W=oe._hasScroll(Ve,"left")?Ve.scrollWidth:R,se=oe._hasScroll(Ve)?Ve.scrollHeight:k,oe.parentData={element:Ve,left:I.left,top:I.top,width:W,height:se}))},resize:function(d){var w,I,k,R,W=g(this).resizable("instance"),se=W.options,oe=W.containerOffset,ue=W.position,we=W._aspectRatio||d.shiftKey,Te={top:0,left:0},Ve=W.containerElement,De=!0;Ve[0]!==document&&/static/.test(Ve.css("position"))&&(Te=oe),ue.left<(W._helper?oe.left:0)&&(W.size.width=W.size.width+(W._helper?W.position.left-oe.left:W.position.left-Te.left),we&&(W.size.height=W.size.width/W.aspectRatio,De=!1),W.position.left=se.helper?oe.left:0),ue.top<(W._helper?oe.top:0)&&(W.size.height=W.size.height+(W._helper?W.position.top-oe.top:W.position.top),we&&(W.size.width=W.size.height*W.aspectRatio,De=!1),W.position.top=W._helper?oe.top:0),k=W.containerElement.get(0)===W.element.parent().get(0),R=/relative|absolute/.test(W.containerElement.css("position")),k&&R?(W.offset.left=W.parentData.left+W.position.left,W.offset.top=W.parentData.top+W.position.top):(W.offset.left=W.element.offset().left,W.offset.top=W.element.offset().top),w=Math.abs(W.sizeDiff.width+(W._helper?W.offset.left-Te.left:W.offset.left-oe.left)),I=Math.abs(W.sizeDiff.height+(W._helper?W.offset.top-Te.top:W.offset.top-oe.top)),w+W.size.width>=W.parentData.width&&(W.size.width=W.parentData.width-w,we&&(W.size.height=W.size.width/W.aspectRatio,De=!1)),I+W.size.height>=W.parentData.height&&(W.size.height=W.parentData.height-I,we&&(W.size.width=W.size.height*W.aspectRatio,De=!1)),De||(W.position.left=W.prevPosition.left,W.position.top=W.prevPosition.top,W.size.width=W.prevSize.width,W.size.height=W.prevSize.height)},stop:function(){var d=g(this).resizable("instance"),w=d.options,I=d.containerOffset,k=d.containerPosition,R=d.containerElement,W=g(d.helper),se=W.offset(),oe=W.outerWidth()-d.sizeDiff.width,ue=W.outerHeight()-d.sizeDiff.height;d._helper&&!w.animate&&/relative/.test(R.css("position"))&&g(this).css({left:se.left-k.left-I.left,width:oe,height:ue}),d._helper&&!w.animate&&/static/.test(R.css("position"))&&g(this).css({left:se.left-k.left-I.left,width:oe,height:ue})}}),g.ui.plugin.add("resizable","alsoResize",{start:function(){var d=g(this).resizable("instance"),w=d.options;g(w.alsoResize).each(function(){var I=g(this);I.data("ui-resizable-alsoresize",{width:parseFloat(I.width()),height:parseFloat(I.height()),left:parseFloat(I.css("left")),top:parseFloat(I.css("top"))})})},resize:function(d,w){var I=g(this).resizable("instance"),k=I.options,R=I.originalSize,W=I.originalPosition,se={height:I.size.height-R.height||0,width:I.size.width-R.width||0,top:I.position.top-W.top||0,left:I.position.left-W.left||0};g(k.alsoResize).each(function(){var oe=g(this),ue=g(this).data("ui-resizable-alsoresize"),we={},Te=oe.parents(w.originalElement[0]).length?["width","height"]:["width","height","top","left"];g.each(Te,function(Ve,De){var me=(ue[De]||0)+(se[De]||0);me&&me>=0&&(we[De]=me||null)}),oe.css(we)})},stop:function(){g(this).removeData("ui-resizable-alsoresize")}}),g.ui.plugin.add("resizable","ghost",{start:function(){var d=g(this).resizable("instance"),w=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:w.height,width:w.width,margin:0,left:0,top:0}),d._addClass(d.ghost,"ui-resizable-ghost"),g.uiBackCompat!==!1&&typeof d.options.ghost=="string"&&d.ghost.addClass(this.options.ghost),d.ghost.appendTo(d.helper)},resize:function(){var d=g(this).resizable("instance");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=g(this).resizable("instance");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),g.ui.plugin.add("resizable","grid",{resize:function(){var d,w=g(this).resizable("instance"),I=w.options,k=w.size,R=w.originalSize,W=w.originalPosition,se=w.axis,oe=typeof I.grid=="number"?[I.grid,I.grid]:I.grid,ue=oe[0]||1,we=oe[1]||1,Te=Math.round((k.width-R.width)/ue)*ue,Ve=Math.round((k.height-R.height)/we)*we,De=R.width+Te,me=R.height+Ve,ke=I.maxWidth&&I.maxWidth<De,qe=I.maxHeight&&I.maxHeight<me,lt=I.minWidth&&I.minWidth>De,pt=I.minHeight&&I.minHeight>me;I.grid=oe,lt&&(De+=ue),pt&&(me+=we),ke&&(De-=ue),qe&&(me-=we),/^(se|s|e)$/.test(se)?(w.size.width=De,w.size.height=me):/^(ne)$/.test(se)?(w.size.width=De,w.size.height=me,w.position.top=W.top-Ve):/^(sw)$/.test(se)?(w.size.width=De,w.size.height=me,w.position.left=W.left-Te):((me-we<=0||De-ue<=0)&&(d=w._getPaddingPlusBorderDimensions(this)),me-we>0?(w.size.height=me,w.position.top=W.top-Ve):(me=we-d.height,w.size.height=me,w.position.top=W.top+R.height-me),De-ue>0?(w.size.width=De,w.position.left=W.left-Te):(De=ue-d.width,w.size.width=De,w.position.left=W.left+R.width-De))}}),g.ui.resizable;/*!
 * jQuery UI Dialog 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var w=g(this).css(d).offset().top;w<0&&g(this).css("top",d.top-w)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&g.fn.draggable&&this._makeDraggable(),this.options.resizable&&g.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?g(d):this.document.find(d||"body").eq(0)},_destroy:function(){var d,w=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),d=w.parent.children().eq(w.index),d.length&&d[0]!==this.element[0]?d.before(this.element):w.parent.append(this.element)},widget:function(){return this.uiDialog},disable:g.noop,enable:g.noop,close:function(d){var w=this;!this._isOpen||this._trigger("beforeClose",d)===!1||(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||g.ui.safeBlur(g.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){w._trigger("close",d)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(d,w){var I=!1,k=this.uiDialog.siblings(".ui-front:visible").map(function(){return+g(this).css("z-index")}).get(),R=Math.max.apply(null,k);return R>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",R+1),I=!0),I&&!w&&this._trigger("focus",d),I},open:function(){var d=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=g(g.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable(),d._trigger("focus")}),this._makeFocusTarget(),this._trigger("open")},_focusTabbable:function(){var d=this._focusedElement;d||(d=this.element.find("[autofocus]")),d.length||(d=this.element.find(":tabbable")),d.length||(d=this.uiDialogButtonPane.find(":tabbable")),d.length||(d=this.uiDialogTitlebarClose.filter(":tabbable")),d.length||(d=this.uiDialog),d.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var d=g.ui.safeActiveElement(this.document[0]),w=this.uiDialog[0]===d||g.contains(this.uiDialog[0],d);w||this._focusTabbable()},_keepFocus:function(d){d.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=g("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(d){if(this.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===g.ui.keyCode.ESCAPE){d.preventDefault(),this.close(d);return}if(!(d.keyCode!==g.ui.keyCode.TAB||d.isDefaultPrevented())){var w=this.uiDialog.find(":tabbable"),I=w.first(),k=w.last();(d.target===k[0]||d.target===this.uiDialog[0])&&!d.shiftKey?(this._delay(function(){I.trigger("focus")}),d.preventDefault()):(d.target===I[0]||d.target===this.uiDialog[0])&&d.shiftKey&&(this._delay(function(){k.trigger("focus")}),d.preventDefault())}},mousedown:function(d){this._moveToTop(d)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=g("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(w){g(w.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=g("<button type='button'></button>").button({label:g("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(w){w.preventDefault(),this.close(w)}}),d=g("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(d,"ui-dialog-title"),this._title(d),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(d){this.options.title?d.text(this.options.title):d.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=g("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=g("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var d=this,w=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),g.isEmptyObject(w)||Array.isArray(w)&&!w.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}g.each(w,function(I,k){var R,W;k=typeof k=="function"?{click:k,text:I}:k,k=g.extend({type:"button"},k),R=k.click,W={icon:k.icon,iconPosition:k.iconPosition,showLabel:k.showLabel,icons:k.icons,text:k.text},delete k.click,delete k.icon,delete k.iconPosition,delete k.showLabel,delete k.icons,typeof k.text=="boolean"&&delete k.text,g("<button></button>",k).button(W).appendTo(d.uiButtonSet).on("click",function(){R.apply(d.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var d=this,w=this.options;function I(k){return{position:k.position,offset:k.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,R){d._addClass(g(this),"ui-dialog-dragging"),d._blockFrames(),d._trigger("dragStart",k,I(R))},drag:function(k,R){d._trigger("drag",k,I(R))},stop:function(k,R){var W=R.offset.left-d.document.scrollLeft(),se=R.offset.top-d.document.scrollTop();w.position={my:"left top",at:"left"+(W>=0?"+":"")+W+" top"+(se>=0?"+":"")+se,of:d.window},d._removeClass(g(this),"ui-dialog-dragging"),d._unblockFrames(),d._trigger("dragStop",k,I(R))}})},_makeResizable:function(){var d=this,w=this.options,I=w.resizable,k=this.uiDialog.css("position"),R=typeof I=="string"?I:"n,e,s,w,se,sw,ne,nw";function W(se){return{originalPosition:se.originalPosition,originalSize:se.originalSize,position:se.position,size:se.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:w.maxWidth,maxHeight:w.maxHeight,minWidth:w.minWidth,minHeight:this._minHeight(),handles:R,start:function(se,oe){d._addClass(g(this),"ui-dialog-resizing"),d._blockFrames(),d._trigger("resizeStart",se,W(oe))},resize:function(se,oe){d._trigger("resize",se,W(oe))},stop:function(se,oe){var ue=d.uiDialog.offset(),we=ue.left-d.document.scrollLeft(),Te=ue.top-d.document.scrollTop();w.height=d.uiDialog.height(),w.width=d.uiDialog.width(),w.position={my:"left top",at:"left"+(we>=0?"+":"")+we+" top"+(Te>=0?"+":"")+Te,of:d.window},d._removeClass(g(this),"ui-dialog-resizing"),d._unblockFrames(),d._trigger("resizeStop",se,W(oe))}}).css("position",k)},_trackFocus:function(){this._on(this.widget(),{focusin:function(d){this._makeFocusTarget(),this._focusedElement=g(d.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var d=this._trackingInstances(),w=g.inArray(this,d);w!==-1&&d.splice(w,1)},_trackingInstances:function(){var d=this.document.data("ui-dialog-instances");return d||(d=[],this.document.data("ui-dialog-instances",d)),d},_minHeight:function(){var d=this.options;return d.height==="auto"?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(){var d=this.uiDialog.is(":visible");d||this.uiDialog.show(),this.uiDialog.position(this.options.position),d||this.uiDialog.hide()},_setOptions:function(d){var w=this,I=!1,k={};g.each(d,function(R,W){w._setOption(R,W),R in w.sizeRelatedOptions&&(I=!0),R in w.resizableRelatedOptions&&(k[R]=W)}),I&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",k)},_setOption:function(d,w){var I,k,R=this.uiDialog;d!=="disabled"&&(this._super(d,w),d==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),d==="buttons"&&this._createButtons(),d==="closeText"&&this.uiDialogTitlebarClose.button({label:g("<a>").text(""+this.options.closeText).html()}),d==="draggable"&&(I=R.is(":data(ui-draggable)"),I&&!w&&R.draggable("destroy"),!I&&w&&this._makeDraggable()),d==="position"&&this._position(),d==="resizable"&&(k=R.is(":data(ui-resizable)"),k&&!w&&R.resizable("destroy"),k&&typeof w=="string"&&R.resizable("option","handles",w),!k&&w!==!1&&this._makeResizable()),d==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var d,w,I,k=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),k.minWidth>k.width&&(k.width=k.minWidth),d=this.uiDialog.css({height:"auto",width:k.width}).outerHeight(),w=Math.max(0,k.minHeight-d),I=typeof k.maxHeight=="number"?Math.max(0,k.maxHeight-d):"none",k.height==="auto"?this.element.css({minHeight:w,maxHeight:I,height:"auto"}):this.element.height(Math.max(0,k.height-d)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=g(this);return g("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return g(d.target).closest(".ui-dialog").length?!0:!!g(d.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var d=g.fn.jquery.substring(0,4),w=!0;this._delay(function(){w=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",(function(I){if(!w){var k=this._trackingInstances()[0];k._allowInteraction(I)||(I.preventDefault(),k._focusTabbable(),(d==="3.4."||d==="3.5.")&&k._delay(k._restoreTabbableFocus))}}).bind(this)),this.overlay=g("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var d=this.document.data("ui-dialog-overlays")-1;d?this.document.data("ui-dialog-overlays",d):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),g.uiBackCompat!==!1&&g.widget("ui.dialog",g.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(d,w){d==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(w),this._superApply(arguments)}}),g.ui.dialog;/*!
 * jQuery UI Droppable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var d,w=this.options,I=w.accept;this.isover=!1,this.isout=!0,this.accept=typeof I=="function"?I:function(k){return k.is(I)},this.proportions=function(){if(arguments.length)d=arguments[0];else return d||(d={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(w.scope),w.addClasses&&this._addClass("ui-droppable")},_addToManager:function(d){g.ui.ddmanager.droppables[d]=g.ui.ddmanager.droppables[d]||[],g.ui.ddmanager.droppables[d].push(this)},_splice:function(d){for(var w=0;w<d.length;w++)d[w]===this&&d.splice(w,1)},_destroy:function(){var d=g.ui.ddmanager.droppables[this.options.scope];this._splice(d)},_setOption:function(d,w){if(d==="accept")this.accept=typeof w=="function"?w:function(k){return k.is(w)};else if(d==="scope"){var I=g.ui.ddmanager.droppables[this.options.scope];this._splice(I),this._addToManager(w)}this._super(d,w)},_activate:function(d){var w=g.ui.ddmanager.current;this._addActiveClass(),w&&this._trigger("activate",d,this.ui(w))},_deactivate:function(d){var w=g.ui.ddmanager.current;this._removeActiveClass(),w&&this._trigger("deactivate",d,this.ui(w))},_over:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._addHoverClass(),this._trigger("over",d,this.ui(w)))},_out:function(d){var w=g.ui.ddmanager.current;!w||(w.currentItem||w.element)[0]===this.element[0]||this.accept.call(this.element[0],w.currentItem||w.element)&&(this._removeHoverClass(),this._trigger("out",d,this.ui(w)))},_drop:function(d,w){var I=w||g.ui.ddmanager.current,k=!1;return!I||(I.currentItem||I.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var R=g(this).droppable("instance");if(R.options.greedy&&!R.options.disabled&&R.options.scope===I.options.scope&&R.accept.call(R.element[0],I.currentItem||I.element)&&g.ui.intersect(I,g.extend(R,{offset:R.element.offset()}),R.options.tolerance,d))return k=!0,!1}),k)?!1:this.accept.call(this.element[0],I.currentItem||I.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",d,this.ui(I)),this.element):!1},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),g.ui.intersect=function(){function d(w,I,k){return w>=I&&w<I+k}return function(w,I,k,R){if(!I.offset)return!1;var W=(w.positionAbs||w.position.absolute).left+w.margins.left,se=(w.positionAbs||w.position.absolute).top+w.margins.top,oe=W+w.helperProportions.width,ue=se+w.helperProportions.height,we=I.offset.left,Te=I.offset.top,Ve=we+I.proportions().width,De=Te+I.proportions().height;switch(k){case"fit":return we<=W&&oe<=Ve&&Te<=se&&ue<=De;case"intersect":return we<W+w.helperProportions.width/2&&oe-w.helperProportions.width/2<Ve&&Te<se+w.helperProportions.height/2&&ue-w.helperProportions.height/2<De;case"pointer":return d(R.pageY,Te,I.proportions().height)&&d(R.pageX,we,I.proportions().width);case"touch":return(se>=Te&&se<=De||ue>=Te&&ue<=De||se<Te&&ue>De)&&(W>=we&&W<=Ve||oe>=we&&oe<=Ve||W<we&&oe>Ve);default:return!1}}}(),g.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(d,w){var I,k,R=g.ui.ddmanager.droppables[d.options.scope]||[],W=w?w.type:null,se=(d.currentItem||d.element).find(":data(ui-droppable)").addBack();e:for(I=0;I<R.length;I++)if(!(R[I].options.disabled||d&&!R[I].accept.call(R[I].element[0],d.currentItem||d.element))){for(k=0;k<se.length;k++)if(se[k]===R[I].element[0]){R[I].proportions().height=0;continue e}R[I].visible=R[I].element.css("display")!=="none",R[I].visible&&(W==="mousedown"&&R[I]._activate.call(R[I],w),R[I].offset=R[I].element.offset(),R[I].proportions({width:R[I].element[0].offsetWidth,height:R[I].element[0].offsetHeight}))}},drop:function(d,w){var I=!1;return g.each((g.ui.ddmanager.droppables[d.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&g.ui.intersect(d,this,this.options.tolerance,w)&&(I=this._drop.call(this,w)||I),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,w)))}),I},dragStart:function(d,w){d.element.parentsUntil("body").on("scroll.droppable",function(){d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)})},drag:function(d,w){d.options.refreshPositions&&g.ui.ddmanager.prepareOffsets(d,w),g.each(g.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var I,k,R,W=g.ui.intersect(d,this,this.options.tolerance,w),se=!W&&this.isover?"isout":W&&!this.isover?"isover":null;se&&(this.options.greedy&&(k=this.options.scope,R=this.element.parents(":data(ui-droppable)").filter(function(){return g(this).droppable("instance").options.scope===k}),R.length&&(I=g(R[0]).droppable("instance"),I.greedyChild=se==="isover")),I&&se==="isover"&&(I.isover=!1,I.isout=!0,I._out.call(I,w)),this[se]=!0,this[se==="isout"?"isover":"isout"]=!1,this[se==="isover"?"_over":"_out"].call(this,w),I&&se==="isout"&&(I.isout=!1,I.isover=!0,I._over.call(I,w)))}})},dragStop:function(d,w){d.element.parentsUntil("body").off("scroll.droppable"),d.options.refreshPositions||g.ui.ddmanager.prepareOffsets(d,w)}},g.uiBackCompat!==!1&&g.widget("ui.droppable",g.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),g.ui.droppable;/*!
 * jQuery UI Progressbar 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=g("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(d){if(d===void 0)return this.options.value;this.options.value=this._constrainedValue(d),this._refreshValue()},_constrainedValue:function(d){return d===void 0&&(d=this.options.value),this.indeterminate=d===!1,typeof d!="number"&&(d=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,d))},_setOptions:function(d){var w=d.value;delete d.value,this._super(d),this.options.value=this._constrainedValue(w),this._refreshValue()},_setOption:function(d,w){d==="max"&&(w=Math.max(this.min,w)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this.element.attr("aria-disabled",d),this._toggleClass(null,"ui-state-disabled",!!d)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,w=this._percentage();this.valueDiv.toggle(this.indeterminate||d>this.min).width(w.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,d===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=g("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":d}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),d===this.options.max&&this._trigger("complete")}});/*!
 * jQuery UI Selectable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectable",g.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var d=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){d.elementPos=g(d.element[0]).offset(),d.selectees=g(d.options.filter,d.element[0]),d._addClass(d.selectees,"ui-selectee"),d.selectees.each(function(){var w=g(this),I=w.offset(),k={left:I.left-d.elementPos.left,top:I.top-d.elementPos.top};g.data(this,"selectable-item",{element:this,$element:w,left:k.left,top:k.top,right:k.left+w.outerWidth(),bottom:k.top+w.outerHeight(),startselected:!1,selected:w.hasClass("ui-selected"),selecting:w.hasClass("ui-selecting"),unselecting:w.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=g("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(d){var w=this,I=this.options;this.opos=[d.pageX,d.pageY],this.elementPos=g(this.element[0]).offset(),!this.options.disabled&&(this.selectees=g(I.filter,this.element[0]),this._trigger("start",d),g(I.appendTo).append(this.helper),this.helper.css({left:d.pageX,top:d.pageY,width:0,height:0}),I.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var k=g.data(this,"selectable-item");k.startselected=!0,!d.metaKey&&!d.ctrlKey&&(w._removeClass(k.$element,"ui-selected"),k.selected=!1,w._addClass(k.$element,"ui-unselecting"),k.unselecting=!0,w._trigger("unselecting",d,{unselecting:k.element}))}),g(d.target).parents().addBack().each(function(){var k,R=g.data(this,"selectable-item");if(R)return k=!d.metaKey&&!d.ctrlKey||!R.$element.hasClass("ui-selected"),w._removeClass(R.$element,k?"ui-unselecting":"ui-selected")._addClass(R.$element,k?"ui-selecting":"ui-unselecting"),R.unselecting=!k,R.selecting=k,R.selected=k,k?w._trigger("selecting",d,{selecting:R.element}):w._trigger("unselecting",d,{unselecting:R.element}),!1}))},_mouseDrag:function(d){if(this.dragged=!0,!this.options.disabled){var w,I=this,k=this.options,R=this.opos[0],W=this.opos[1],se=d.pageX,oe=d.pageY;return R>se&&(w=se,se=R,R=w),W>oe&&(w=oe,oe=W,W=w),this.helper.css({left:R,top:W,width:se-R,height:oe-W}),this.selectees.each(function(){var ue=g.data(this,"selectable-item"),we=!1,Te={};!ue||ue.element===I.element[0]||(Te.left=ue.left+I.elementPos.left,Te.right=ue.right+I.elementPos.left,Te.top=ue.top+I.elementPos.top,Te.bottom=ue.bottom+I.elementPos.top,k.tolerance==="touch"?we=!(Te.left>se||Te.right<R||Te.top>oe||Te.bottom<W):k.tolerance==="fit"&&(we=Te.left>R&&Te.right<se&&Te.top>W&&Te.bottom<oe),we?(ue.selected&&(I._removeClass(ue.$element,"ui-selected"),ue.selected=!1),ue.unselecting&&(I._removeClass(ue.$element,"ui-unselecting"),ue.unselecting=!1),ue.selecting||(I._addClass(ue.$element,"ui-selecting"),ue.selecting=!0,I._trigger("selecting",d,{selecting:ue.element}))):(ue.selecting&&((d.metaKey||d.ctrlKey)&&ue.startselected?(I._removeClass(ue.$element,"ui-selecting"),ue.selecting=!1,I._addClass(ue.$element,"ui-selected"),ue.selected=!0):(I._removeClass(ue.$element,"ui-selecting"),ue.selecting=!1,ue.startselected&&(I._addClass(ue.$element,"ui-unselecting"),ue.unselecting=!0),I._trigger("unselecting",d,{unselecting:ue.element}))),ue.selected&&!d.metaKey&&!d.ctrlKey&&!ue.startselected&&(I._removeClass(ue.$element,"ui-selected"),ue.selected=!1,I._addClass(ue.$element,"ui-unselecting"),ue.unselecting=!0,I._trigger("unselecting",d,{unselecting:ue.element}))))}),!1}},_mouseStop:function(d){var w=this;return this.dragged=!1,g(".ui-unselecting",this.element[0]).each(function(){var I=g.data(this,"selectable-item");w._removeClass(I.$element,"ui-unselecting"),I.unselecting=!1,I.startselected=!1,w._trigger("unselected",d,{unselected:I.element})}),g(".ui-selecting",this.element[0]).each(function(){var I=g.data(this,"selectable-item");w._removeClass(I.$element,"ui-selecting")._addClass(I.$element,"ui-selected"),I.selecting=!1,I.selected=!0,I.startselected=!0,w._trigger("selected",d,{selected:I.element})}),this._trigger("stop",d),this.helper.remove(),!1}});/*!
 * jQuery UI Selectmenu 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.selectmenu",[g.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var d=this.element.uniqueId().attr("id");this.ids={element:d,button:d+"-button",menu:d+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=g()},_drawButton:function(){var d,w=this,I=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(k){this.button.trigger("focus"),k.preventDefault()}}),this.element.hide(),this.button=g("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),d=g("<span>").appendTo(this.button),this._addClass(d,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(I).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){w._rendered||w._refreshMenu()})},_drawMenu:function(){var d=this;this.menu=g("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=g("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(w,I){w.preventDefault(),d._setSelection(),d._select(I.item.data("ui-selectmenu-item"),w)},focus:function(w,I){var k=I.item.data("ui-selectmenu-item");d.focusIndex!=null&&k.index!==d.focusIndex&&(d._trigger("focus",w,{item:k}),d.isOpen||d._select(k,w)),d.focusIndex=k.index,d.button.attr("aria-activedescendant",d.menuItems.eq(k.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),this.options.width===null&&this._resizeButton()},_refreshMenu:function(){var d,w=this.element.find("option");this.menu.empty(),this._parseOptions(w),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,w.length&&(d=this._getSelectedItem(),this.menuInstance.focus(null,d),this._setAria(d.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(d){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",d)))},_position:function(){this.menuWrap.position(g.extend({of:this.button},this.options.position))},close:function(d){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",d))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(d){var w=g("<span>");return this._setText(w,d.label),this._addClass(w,"ui-selectmenu-text"),w},_renderMenu:function(d,w){var I=this,k="";g.each(w,function(R,W){var se;W.optgroup!==k&&(se=g("<li>",{text:W.optgroup}),I._addClass(se,"ui-selectmenu-optgroup","ui-menu-divider"+(W.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),se.appendTo(d),k=W.optgroup),I._renderItemData(d,W)})},_renderItemData:function(d,w){return this._renderItem(d,w).data("ui-selectmenu-item",w)},_renderItem:function(d,w){var I=g("<li>"),k=g("<div>",{title:w.element.attr("title")});return w.disabled&&this._addClass(I,null,"ui-state-disabled"),this._setText(k,w.label),I.append(k).appendTo(d)},_setText:function(d,w){w?d.text(w):d.html("&#160;")},_move:function(d,w){var I,k,R=".ui-menu-item";this.isOpen?I=this.menuItems.eq(this.focusIndex).parent("li"):(I=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),R+=":not(.ui-state-disabled)"),d==="first"||d==="last"?k=I[d==="first"?"prevAll":"nextAll"](R).eq(-1):k=I[d+"All"](R).eq(0),k.length&&this.menuInstance.focus(w,k)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(d){this[this.isOpen?"close":"open"](d)},_setSelection:function(){var d;this.range&&(window.getSelection?(d=window.getSelection(),d.removeAllRanges(),d.addRange(this.range)):this.range.select(),this.button.trigger("focus"))},_documentClick:{mousedown:function(d){this.isOpen&&(g(d.target).closest(".ui-selectmenu-menu, #"+g.escapeSelector(this.ids.button)).length||this.close(d))}},_buttonEvents:{mousedown:function(){var d;window.getSelection?(d=window.getSelection(),d.rangeCount&&(this.range=d.getRangeAt(0))):this.range=document.selection.createRange()},click:function(d){this._setSelection(),this._toggle(d)},keydown:function(d){var w=!0;switch(d.keyCode){case g.ui.keyCode.TAB:case g.ui.keyCode.ESCAPE:this.close(d),w=!1;break;case g.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(d);break;case g.ui.keyCode.UP:d.altKey?this._toggle(d):this._move("prev",d);break;case g.ui.keyCode.DOWN:d.altKey?this._toggle(d):this._move("next",d);break;case g.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(d):this._toggle(d);break;case g.ui.keyCode.LEFT:this._move("prev",d);break;case g.ui.keyCode.RIGHT:this._move("next",d);break;case g.ui.keyCode.HOME:case g.ui.keyCode.PAGE_UP:this._move("first",d);break;case g.ui.keyCode.END:case g.ui.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d),w=!1}w&&d.preventDefault()}},_selectFocusedItem:function(d){var w=this.menuItems.eq(this.focusIndex).parent("li");w.hasClass("ui-state-disabled")||this._select(w.data("ui-selectmenu-item"),d)},_select:function(d,w){var I=this.element[0].selectedIndex;this.element[0].selectedIndex=d.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(d)),this._setAria(d),this._trigger("select",w,{item:d}),d.index!==I&&this._trigger("change",w,{item:d}),this.close(w)},_setAria:function(d){var w=this.menuItems.eq(d.index).attr("id");this.button.attr({"aria-labelledby":w,"aria-activedescendant":w}),this.menu.attr("aria-activedescendant",w)},_setOption:function(d,w){if(d==="icons"){var I=this.button.find("span.ui-icon");this._removeClass(I,null,this.options.icons.button)._addClass(I,null,w.button)}this._super(d,w),d==="appendTo"&&this.menuWrap.appendTo(this._appendTo()),d==="width"&&this._resizeButton()},_setOptionDisabled:function(d){this._super(d),this.menuInstance.option("disabled",d),this.button.attr("aria-disabled",d),this._toggleClass(this.button,null,"ui-state-disabled",d),this.element.prop("disabled",d),d?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var d=this.options.appendTo;return d&&(d=d.jquery||d.nodeType?g(d):this.document.find(d).eq(0)),(!d||!d[0])&&(d=this.element.closest(".ui-front, dialog")),d.length||(d=this.document[0].body),d},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var d=this.options.width;if(d===!1){this.button.css("width","");return}d===null&&(d=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(d)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var d=this._super();return d.disabled=this.element.prop("disabled"),d},_parseOptions:function(d){var w=this,I=[];d.each(function(k,R){R.hidden||I.push(w._parseOption(g(R),k))}),this.items=I},_parseOption:function(d,w){var I=d.parent("optgroup");return{element:d,index:w,value:d.val(),label:d.text(),optgroup:I.attr("label")||"",disabled:I.prop("disabled")||d.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]);/*!
 * jQuery UI Slider 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.slider",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var d,w,I=this.options,k=this.element.find(".ui-slider-handle"),R="<span tabindex='0'></span>",W=[];for(w=I.values&&I.values.length||1,k.length>w&&(k.slice(w).remove(),k=k.slice(0,w)),d=k.length;d<w;d++)W.push(R);this.handles=k.add(g(W.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(se){g(this).data("ui-slider-handle-index",se).attr("tabIndex",0)})},_createRange:function(){var d=this.options;d.range?(d.range===!0&&(d.values?d.values.length&&d.values.length!==2?d.values=[d.values[0],d.values[0]]:Array.isArray(d.values)&&(d.values=d.values.slice(0)):d.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=g("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")):(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})),(d.range==="min"||d.range==="max")&&this._addClass(this.range,"ui-slider-range-"+d.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(d){var w,I,k,R,W,se,oe,ue,we=this,Te=this.options;return Te.disabled||(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),w={x:d.pageX,y:d.pageY},I=this._normValueFromMouse(w),k=this._valueMax()-this._valueMin()+1,this.handles.each(function(Ve){var De=Math.abs(I-we.values(Ve));(k>De||k===De&&(Ve===we._lastChangedValue||we.values(Ve)===Te.min))&&(k=De,R=g(this),W=Ve)}),se=this._start(d,W),se===!1)?!1:(this._mouseSliding=!0,this._handleIndex=W,this._addClass(R,null,"ui-state-active"),R.trigger("focus"),oe=R.offset(),ue=!g(d.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=ue?{left:0,top:0}:{left:d.pageX-oe.left-R.width()/2,top:d.pageY-oe.top-R.height()/2-(parseInt(R.css("borderTopWidth"),10)||0)-(parseInt(R.css("borderBottomWidth"),10)||0)+(parseInt(R.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(d,W,I),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(d){var w={x:d.pageX,y:d.pageY},I=this._normValueFromMouse(w);return this._slide(d,this._handleIndex,I),!1},_mouseStop:function(d){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(d,this._handleIndex),this._change(d,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var w,I,k,R,W;return this.orientation==="horizontal"?(w=this.elementSize.width,I=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(w=this.elementSize.height,I=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),k=I/w,k>1&&(k=1),k<0&&(k=0),this.orientation==="vertical"&&(k=1-k),R=this._valueMax()-this._valueMin(),W=this._valueMin()+k*R,this._trimAlignValue(W)},_uiHash:function(d,w,I){var k={handle:this.handles[d],handleIndex:d,value:w!==void 0?w:this.value()};return this._hasMultipleValues()&&(k.value=w!==void 0?w:this.values(d),k.values=I||this.values()),k},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(d,w){return this._trigger("start",d,this._uiHash(w))},_slide:function(d,w,I){var k,R,W=this.value(),se=this.values();this._hasMultipleValues()&&(R=this.values(w?0:1),W=this.values(w),this.options.values.length===2&&this.options.range===!0&&(I=w===0?Math.min(R,I):Math.max(R,I)),se[w]=I),I!==W&&(k=this._trigger("slide",d,this._uiHash(w,I,se)),k!==!1&&(this._hasMultipleValues()?this.values(w,I):this.value(I)))},_stop:function(d,w){this._trigger("stop",d,this._uiHash(w))},_change:function(d,w){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=w,this._trigger("change",d,this._uiHash(w)))},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(d,w){var I,k,R;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(w),this._refreshValue(),this._change(null,d);return}if(arguments.length)if(Array.isArray(arguments[0])){for(I=this.options.values,k=arguments[0],R=0;R<I.length;R+=1)I[R]=this._trimAlignValue(k[R]),this._change(null,R);this._refreshValue()}else return this._hasMultipleValues()?this._values(d):this.value();else return this._values()},_setOption:function(d,w){var I,k=0;switch(d==="range"&&this.options.range===!0&&(w==="min"?(this.options.value=this._values(0),this.options.values=null):w==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(k=this.options.values.length),this._super(d,w),d){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(w),this.handles.css(w==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),I=k-1;I>=0;I--)this._change(null,I);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1;break}},_setOptionDisabled:function(d){this._super(d),this._toggleClass(null,"ui-state-disabled",!!d)},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d),d},_values:function(d){var w,I,k;if(arguments.length)return w=this.options.values[d],w=this._trimAlignValue(w),w;if(this._hasMultipleValues()){for(I=this.options.values.slice(),k=0;k<I.length;k+=1)I[k]=this._trimAlignValue(I[k]);return I}else return[]},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var w=this.options.step>0?this.options.step:1,I=(d-this._valueMin())%w,k=d-I;return Math.abs(I)*2>=w&&(k+=I>0?w:-w),parseFloat(k.toFixed(5))},_calculateNewMax:function(){var d=this.options.max,w=this._valueMin(),I=this.options.step,k=Math.round((d-w)/I)*I;d=k+w,d>this.options.max&&(d-=I),this.max=parseFloat(d.toFixed(this._precision()))},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),I=w.indexOf(".");return I===-1?0:w.length-I-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(d){d==="vertical"&&this.range.css({width:"",left:""}),d==="horizontal"&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var d,w,I,k,R,W=this.options.range,se=this.options,oe=this,ue=this._animateOff?!1:se.animate,we={};this._hasMultipleValues()?this.handles.each(function(Te){w=(oe.values(Te)-oe._valueMin())/(oe._valueMax()-oe._valueMin())*100,we[oe.orientation==="horizontal"?"left":"bottom"]=w+"%",g(this).stop(1,1)[ue?"animate":"css"](we,se.animate),oe.options.range===!0&&(oe.orientation==="horizontal"?(Te===0&&oe.range.stop(1,1)[ue?"animate":"css"]({left:w+"%"},se.animate),Te===1&&oe.range[ue?"animate":"css"]({width:w-d+"%"},{queue:!1,duration:se.animate})):(Te===0&&oe.range.stop(1,1)[ue?"animate":"css"]({bottom:w+"%"},se.animate),Te===1&&oe.range[ue?"animate":"css"]({height:w-d+"%"},{queue:!1,duration:se.animate}))),d=w}):(I=this.value(),k=this._valueMin(),R=this._valueMax(),w=R!==k?(I-k)/(R-k)*100:0,we[this.orientation==="horizontal"?"left":"bottom"]=w+"%",this.handle.stop(1,1)[ue?"animate":"css"](we,se.animate),W==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[ue?"animate":"css"]({width:w+"%"},se.animate),W==="max"&&this.orientation==="horizontal"&&this.range.stop(1,1)[ue?"animate":"css"]({width:100-w+"%"},se.animate),W==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[ue?"animate":"css"]({height:w+"%"},se.animate),W==="max"&&this.orientation==="vertical"&&this.range.stop(1,1)[ue?"animate":"css"]({height:100-w+"%"},se.animate))},_handleEvents:{keydown:function(d){var w,I,k,R,W=g(d.target).data("ui-slider-handle-index");switch(d.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(d.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(g(d.target),null,"ui-state-active"),w=this._start(d,W),w===!1))return;break}switch(R=this.options.step,this._hasMultipleValues()?I=k=this.values(W):I=k=this.value(),d.keyCode){case g.ui.keyCode.HOME:k=this._valueMin();break;case g.ui.keyCode.END:k=this._valueMax();break;case g.ui.keyCode.PAGE_UP:k=this._trimAlignValue(I+(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.PAGE_DOWN:k=this._trimAlignValue(I-(this._valueMax()-this._valueMin())/this.numPages);break;case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:if(I===this._valueMax())return;k=this._trimAlignValue(I+R);break;case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(I===this._valueMin())return;k=this._trimAlignValue(I-R);break}this._slide(d,W,k)},keyup:function(d){var w=g(d.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(d,w),this._change(d,w),this._removeClass(g(d.target),null,"ui-state-active"))}}});/*!
 * jQuery UI Sortable 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.sortable",g.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(d,w,I){return d>=w&&d<w+I},_isFloating:function(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(d,w){this._super(d,w),d==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var d=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),g.each(this.items,function(){d._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(d,w){var I=null,k=!1,R=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(d),g(d.target).parents().each(function(){if(g.data(this,R.widgetName+"-item")===R)return I=g(this),!1}),g.data(d.target,R.widgetName+"-item")===R&&(I=g(d.target)),!I)||this.options.handle&&!w&&(g(this.options.handle,I).find("*").addBack().each(function(){this===d.target&&(k=!0)}),!k)?!1:(this.currentItem=I,this._removeCurrentsFromItems(),!0)},_mouseStart:function(d,w,I){var k,R,W=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=g(W.appendTo!=="parent"?W.appendTo:this.currentItem.parent()),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},g.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),W.cursorAt&&this._adjustOffsetFromHelper(W.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),g.extend(this.offset,{parent:this._getParentOffset()}),W.containment&&this._setContainment(),W.cursor&&W.cursor!=="auto"&&(R=this.document.find("body"),this.storedCursor=R.css("cursor"),R.css("cursor",W.cursor),this.storedStylesheet=g("<style>*{ cursor: "+W.cursor+" !important; }</style>").appendTo(R)),W.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",W.zIndex)),W.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",W.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!I)for(k=this.containers.length-1;k>=0;k--)this.containers[k]._trigger("activate",d,this._uiHash(this));return g.ui.ddmanager&&(g.ui.ddmanager.current=this),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(d),!0},_scroll:function(d){var w=this.options,I=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<w.scrollSensitivity?this.scrollParent[0].scrollTop=I=this.scrollParent[0].scrollTop+w.scrollSpeed:d.pageY-this.overflowOffset.top<w.scrollSensitivity&&(this.scrollParent[0].scrollTop=I=this.scrollParent[0].scrollTop-w.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<w.scrollSensitivity?this.scrollParent[0].scrollLeft=I=this.scrollParent[0].scrollLeft+w.scrollSpeed:d.pageX-this.overflowOffset.left<w.scrollSensitivity&&(this.scrollParent[0].scrollLeft=I=this.scrollParent[0].scrollLeft-w.scrollSpeed)):(d.pageY-this.document.scrollTop()<w.scrollSensitivity?I=this.document.scrollTop(this.document.scrollTop()-w.scrollSpeed):this.window.height()-(d.pageY-this.document.scrollTop())<w.scrollSensitivity&&(I=this.document.scrollTop(this.document.scrollTop()+w.scrollSpeed)),d.pageX-this.document.scrollLeft()<w.scrollSensitivity?I=this.document.scrollLeft(this.document.scrollLeft()-w.scrollSpeed):this.window.width()-(d.pageX-this.document.scrollLeft())<w.scrollSensitivity&&(I=this.document.scrollLeft(this.document.scrollLeft()+w.scrollSpeed))),I},_mouseDrag:function(d){var w,I,k,R,W=this.options;for(this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),W.scroll&&this._scroll(d)!==!1&&(this._refreshItemPositions(!0),g.ui.ddmanager&&!W.dropBehaviour&&g.ui.ddmanager.prepareOffsets(this,d)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},w=this.items.length-1;w>=0;w--)if(I=this.items[w],k=I.item[0],R=this._intersectsWithPointer(I),!!R&&I.instance===this.currentContainer&&k!==this.currentItem[0]&&this.placeholder[R===1?"next":"prev"]()[0]!==k&&!g.contains(this.placeholder[0],k)&&(this.options.type!=="semi-dynamic"||!g.contains(this.element[0],k))){if(this.direction=R===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(I))this._rearrange(d,I);else break;this._trigger("change",d,this._uiHash());break}return this._contactContainers(d),g.ui.ddmanager&&g.ui.ddmanager.drag(this,d),this._trigger("sort",d,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,w){if(d){if(g.ui.ddmanager&&!this.options.dropBehaviour&&g.ui.ddmanager.drop(this,d),this.options.revert){var I=this,k=this.placeholder.offset(),R=this.options.axis,W={};(!R||R==="x")&&(W.left=k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!R||R==="y")&&(W.top=k.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,g(this.helper).animate(W,parseInt(this.options.revert,10)||500,function(){I._clear(d)})}else this._clear(d,w);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new g.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),g.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?g(this.domPosition.prev).after(this.currentItem):g(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(d){var w=this._getItemsAsjQuery(d&&d.connected),I=[];return d=d||{},g(w).each(function(){var k=(g(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[\-=_](.+)/);k&&I.push((d.key||k[1]+"[]")+"="+(d.key&&d.expression?k[1]:k[2]))}),!I.length&&d.key&&I.push(d.key+"="),I.join("&")},toArray:function(d){var w=this._getItemsAsjQuery(d&&d.connected),I=[];return d=d||{},w.each(function(){I.push(g(d.item||this).attr(d.attribute||"id")||"")}),I},_intersectsWith:function(d){var w=this.positionAbs.left,I=w+this.helperProportions.width,k=this.positionAbs.top,R=k+this.helperProportions.height,W=d.left,se=W+d.width,oe=d.top,ue=oe+d.height,we=this.offset.click.top,Te=this.offset.click.left,Ve=this.options.axis==="x"||k+we>oe&&k+we<ue,De=this.options.axis==="y"||w+Te>W&&w+Te<se,me=Ve&&De;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?me:W<w+this.helperProportions.width/2&&I-this.helperProportions.width/2<se&&oe<k+this.helperProportions.height/2&&R-this.helperProportions.height/2<ue},_intersectsWithPointer:function(d){var w,I,k=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),R=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),W=k&&R;return W?(w=this.dragDirection.vertical,I=this.dragDirection.horizontal,this.floating?I==="right"||w==="down"?2:1:w&&(w==="down"?2:1)):!1},_intersectsWithSides:function(d){var w=this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),I=this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),k=this.dragDirection.vertical,R=this.dragDirection.horizontal;return this.floating&&R?R==="right"&&I||R==="left"&&!I:k&&(k==="down"&&w||k==="up"&&!w)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!==0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!==0&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var w,I,k,R,W=[],se=[],oe=this._connectWith();if(oe&&d)for(w=oe.length-1;w>=0;w--)for(k=g(oe[w],this.document[0]),I=k.length-1;I>=0;I--)R=g.data(k[I],this.widgetFullName),R&&R!==this&&!R.options.disabled&&se.push([typeof R.options.items=="function"?R.options.items.call(R.element):g(R.options.items,R.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),R]);se.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):g(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function ue(){W.push(this)}for(w=se.length-1;w>=0;w--)se[w][0].each(ue);return g(W)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=g.grep(this.items,function(w){for(var I=0;I<d.length;I++)if(d[I]===w.item[0])return!1;return!0})},_refreshItems:function(d){this.items=[],this.containers=[this];var w,I,k,R,W,se,oe,ue,we=this.items,Te=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],d,{item:this.currentItem}):g(this.options.items,this.element),this]],Ve=this._connectWith();if(Ve&&this.ready)for(w=Ve.length-1;w>=0;w--)for(k=g(Ve[w],this.document[0]),I=k.length-1;I>=0;I--)R=g.data(k[I],this.widgetFullName),R&&R!==this&&!R.options.disabled&&(Te.push([typeof R.options.items=="function"?R.options.items.call(R.element[0],d,{item:this.currentItem}):g(R.options.items,R.element),R]),this.containers.push(R));for(w=Te.length-1;w>=0;w--)for(W=Te[w][1],se=Te[w][0],I=0,ue=se.length;I<ue;I++)oe=g(se[I]),oe.data(this.widgetName+"-item",W),we.push({item:oe,instance:W,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(d){var w,I,k,R;for(w=this.items.length-1;w>=0;w--)I=this.items[w],!(this.currentContainer&&I.instance!==this.currentContainer&&I.item[0]!==this.currentItem[0])&&(k=this.options.toleranceElement?g(this.options.toleranceElement,I.item):I.item,d||(I.width=k.outerWidth(),I.height=k.outerHeight()),R=k.offset(),I.left=R.left,I.top=R.top)},refreshPositions:function(d){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(d);var w,I;if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(w=this.containers.length-1;w>=0;w--)I=this.containers[w].element.offset(),this.containers[w].containerCache.left=I.left,this.containers[w].containerCache.top=I.top,this.containers[w].containerCache.width=this.containers[w].element.outerWidth(),this.containers[w].containerCache.height=this.containers[w].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var w,I,k=d.options;(!k.placeholder||k.placeholder.constructor===String)&&(w=k.placeholder,I=d.currentItem[0].nodeName.toLowerCase(),k.placeholder={element:function(){var R=g("<"+I+">",d.document[0]);return d._addClass(R,"ui-sortable-placeholder",w||d.currentItem[0].className)._removeClass(R,"ui-sortable-helper"),I==="tbody"?d._createTrPlaceholder(d.currentItem.find("tr").eq(0),g("<tr>",d.document[0]).appendTo(R)):I==="tr"?d._createTrPlaceholder(d.currentItem,R):I==="img"&&R.attr("src",d.currentItem.attr("src")),w||R.css("visibility","hidden"),R},update:function(R,W){w&&!k.forcePlaceholderSize||((!W.height()||k.forcePlaceholderSize&&(I==="tbody"||I==="tr"))&&W.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),W.width()||W.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10)))}}),d.placeholder=g(k.placeholder.element.call(d.element,d.currentItem)),d.currentItem.after(d.placeholder),k.placeholder.update(d,d.placeholder)},_createTrPlaceholder:function(d,w){var I=this;d.children().each(function(){g("<td>&#160;</td>",I.document[0]).attr("colspan",g(this).attr("colspan")||1).appendTo(w)})},_contactContainers:function(d){var w,I,k,R,W,se,oe,ue,we,Te,Ve=null,De=null;for(w=this.containers.length-1;w>=0;w--)if(!g.contains(this.currentItem[0],this.containers[w].element[0]))if(this._intersectsWith(this.containers[w].containerCache)){if(Ve&&g.contains(this.containers[w].element[0],Ve.element[0]))continue;Ve=this.containers[w],De=w}else this.containers[w].containerCache.over&&(this.containers[w]._trigger("out",d,this._uiHash(this)),this.containers[w].containerCache.over=0);if(Ve)if(this.containers.length===1)this.containers[De].containerCache.over||(this.containers[De]._trigger("over",d,this._uiHash(this)),this.containers[De].containerCache.over=1);else{for(k=1e4,R=null,we=Ve.floating||this._isFloating(this.currentItem),W=we?"left":"top",se=we?"width":"height",Te=we?"pageX":"pageY",I=this.items.length-1;I>=0;I--)g.contains(this.containers[De].element[0],this.items[I].item[0])&&this.items[I].item[0]!==this.currentItem[0]&&(oe=this.items[I].item.offset()[W],ue=!1,d[Te]-oe>this.items[I][se]/2&&(ue=!0),Math.abs(d[Te]-oe)<k&&(k=Math.abs(d[Te]-oe),R=this.items[I],this.direction=ue?"up":"down"));if(!R&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[De]){this.currentContainer.containerCache.over||(this.containers[De]._trigger("over",d,this._uiHash()),this.currentContainer.containerCache.over=1);return}R?this._rearrange(d,R,null,!0):this._rearrange(d,null,this.containers[De].element,!0),this._trigger("change",d,this._uiHash()),this.containers[De]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[De],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[De]._trigger("over",d,this._uiHash(this)),this.containers[De].containerCache.over=1}},_createHelper:function(d){var w=this.options,I=typeof w.helper=="function"?g(w.helper.apply(this.element[0],[d,this.currentItem])):w.helper==="clone"?this.currentItem.clone():this.currentItem;return I.parents("body").length||this.appendTo[0].appendChild(I[0]),I[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!I[0].style.width||w.forceHelperSize)&&I.width(this.currentItem.width()),(!I[0].style.height||w.forceHelperSize)&&I.height(this.currentItem.height()),I},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),Array.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left"in d&&(this.offset.click.left=d.left+this.margins.left),"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top"in d&&(this.offset.click.top=d.top+this.margins.top),"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&g.ui.ie)&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,w,I,k=this.options;k.containment==="parent"&&(k.containment=this.helper[0].parentNode),(k.containment==="document"||k.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,k.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(k.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(k.containment)||(d=g(k.containment)[0],w=g(k.containment).offset(),I=g(d).css("overflow")!=="hidden",this.containment=[w.left+(parseInt(g(d).css("borderLeftWidth"),10)||0)+(parseInt(g(d).css("paddingLeft"),10)||0)-this.margins.left,w.top+(parseInt(g(d).css("borderTopWidth"),10)||0)+(parseInt(g(d).css("paddingTop"),10)||0)-this.margins.top,w.left+(I?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(g(d).css("borderLeftWidth"),10)||0)-(parseInt(g(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,w.top+(I?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(g(d).css("borderTopWidth"),10)||0)-(parseInt(g(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,w){w||(w=this.position);var I=d==="absolute"?1:-1,k=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,R=/(html|body)/i.test(k[0].tagName);return{top:w.top+this.offset.relative.top*I+this.offset.parent.top*I-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():R?0:k.scrollTop())*I,left:w.left+this.offset.relative.left*I+this.offset.parent.left*I-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():R?0:k.scrollLeft())*I}},_generatePosition:function(d){var w,I,k=this.options,R=d.pageX,W=d.pageY,se=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,oe=/(html|body)/i.test(se[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(R=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(W=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(R=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(W=this.containment[3]+this.offset.click.top)),k.grid&&(w=this.originalPageY+Math.round((W-this.originalPageY)/k.grid[1])*k.grid[1],W=this.containment?w-this.offset.click.top>=this.containment[1]&&w-this.offset.click.top<=this.containment[3]?w:w-this.offset.click.top>=this.containment[1]?w-k.grid[1]:w+k.grid[1]:w,I=this.originalPageX+Math.round((R-this.originalPageX)/k.grid[0])*k.grid[0],R=this.containment?I-this.offset.click.left>=this.containment[0]&&I-this.offset.click.left<=this.containment[2]?I:I-this.offset.click.left>=this.containment[0]?I-k.grid[0]:I+k.grid[0]:I)),{top:W-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():oe?0:se.scrollTop()),left:R-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():oe?0:se.scrollLeft())}},_rearrange:function(d,w,I,k){I?I[0].appendChild(this.placeholder[0]):w.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?w.item[0]:w.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var R=this.counter;this._delay(function(){R===this.counter&&this.refreshPositions(!k)})},_clear:function(d,w){this.reverting=!1;var I,k=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(I in this._storedCSS)(this._storedCSS[I]==="auto"||this._storedCSS[I]==="static")&&(this._storedCSS[I]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!w&&k.push(function(W){this._trigger("receive",W,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!w&&k.push(function(W){this._trigger("update",W,this._uiHash())}),this!==this.currentContainer&&(w||(k.push(function(W){this._trigger("remove",W,this._uiHash())}),k.push((function(W){return function(se){W._trigger("receive",se,this._uiHash(this))}}).call(this,this.currentContainer)),k.push((function(W){return function(se){W._trigger("update",se,this._uiHash(this))}}).call(this,this.currentContainer))));function R(W,se,oe){return function(ue){oe._trigger(W,ue,se._uiHash(se))}}for(I=this.containers.length-1;I>=0;I--)w||k.push(R("deactivate",this,this.containers[I])),this.containers[I].containerCache.over&&(k.push(R("out",this,this.containers[I])),this.containers[I].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,w||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!w){for(I=0;I<k.length;I++)k[I].call(this,d);this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){g.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var w=d||this;return{helper:w.helper,placeholder:w.placeholder||g([]),position:w.position,originalPosition:w.originalPosition,offset:w.positionAbs,item:w.currentItem,sender:d?d.element:null}}});/*!
 * jQuery UI Spinner 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */function vi(d){return function(){var w=this.element.val();d.apply(this,arguments),this._refresh(),w!==this.element.val()&&this._trigger("change")}}g.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d=this._super(),w=this.element;return g.each(["min","max","step"],function(I,k){var R=w.attr(k);R!=null&&R.length&&(d[k]=R)}),d},_events:{keydown:function(d){this._start(d)&&this._keydown(d)&&d.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(d){if(this.cancelBlur){delete this.cancelBlur;return}this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",d)},mousewheel:function(d,w){var I=g.ui.safeActiveElement(this.document[0]),k=this.element[0]===I;if(!(!k||!w)){if(!this.spinning&&!this._start(d))return!1;this._spin((w>0?1:-1)*this.options.step,d),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(d)},100),d.preventDefault()}},"mousedown .ui-spinner-button":function(d){var w;w=this.element[0]===g.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function I(){var k=this.element[0]===g.ui.safeActiveElement(this.document[0]);k||(this.element.trigger("focus"),this.previous=w,this._delay(function(){this.previous=w}))}d.preventDefault(),I.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,I.call(this)}),this._start(d)!==!1&&this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(d){if(g(d.currentTarget).hasClass("ui-state-active")){if(this._start(d)===!1)return!1;this._repeat(null,g(d.currentTarget).hasClass("ui-spinner-up")?1:-1,d)}},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(d){var w=this.options,I=g.ui.keyCode;switch(d.keyCode){case I.UP:return this._repeat(null,1,d),!0;case I.DOWN:return this._repeat(null,-1,d),!0;case I.PAGE_UP:return this._repeat(null,w.page,d),!0;case I.PAGE_DOWN:return this._repeat(null,-w.page,d),!0}return!1},_start:function(d){return!this.spinning&&this._trigger("start",d)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(d,w,I){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,w,I)},d),this._spin(w*this.options.step,I)},_spin:function(d,w){var I=this.value()||0;this.counter||(this.counter=1),I=this._adjustValue(I+d*this._increment(this.counter)),(!this.spinning||this._trigger("spin",w,{value:I})!==!1)&&(this._value(I),this.counter++)},_increment:function(d){var w=this.options.incremental;return w?typeof w=="function"?w(d):Math.floor(d*d*d/5e4-d*d/500+17*d/200+1):1},_precision:function(){var d=this._precisionOf(this.options.step);return this.options.min!==null&&(d=Math.max(d,this._precisionOf(this.options.min))),d},_precisionOf:function(d){var w=d.toString(),I=w.indexOf(".");return I===-1?0:w.length-I-1},_adjustValue:function(d){var w,I,k=this.options;return w=k.min!==null?k.min:0,I=d-w,I=Math.round(I/k.step)*k.step,d=w+I,d=parseFloat(d.toFixed(this._precision())),k.max!==null&&d>k.max?k.max:k.min!==null&&d<k.min?k.min:d},_stop:function(d){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",d))},_setOption:function(d,w){var I,k,R;if(d==="culture"||d==="numberFormat"){I=this._parse(this.element.val()),this.options[d]=w,this.element.val(this._format(I));return}(d==="max"||d==="min"||d==="step")&&typeof w=="string"&&(w=this._parse(w)),d==="icons"&&(k=this.buttons.first().find(".ui-icon"),this._removeClass(k,null,this.options.icons.up),this._addClass(k,null,w.up),R=this.buttons.last().find(".ui-icon"),this._removeClass(R,null,this.options.icons.down),this._addClass(R,null,w.down)),this._super(d,w)},_setOptionDisabled:function(d){this._super(d),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!d),this.element.prop("disabled",!!d),this.buttons.button(d?"disable":"enable")},_setOptions:vi(function(d){this._super(d)}),_parse:function(d){return typeof d=="string"&&d!==""&&(d=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(d,10,this.options.culture):+d),d===""||isNaN(d)?null:d},_format:function(d){return d===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(d,this.options.numberFormat,this.options.culture):d},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var d=this.value();return d===null?!1:d===this._adjustValue(d)},_value:function(d,w){var I;d!==""&&(I=this._parse(d),I!==null&&(w||(I=this._adjustValue(I)),d=this._format(I))),this.element.val(d),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:vi(function(d){this._stepUp(d)}),_stepUp:function(d){this._start()&&(this._spin((d||1)*this.options.step),this._stop())},stepDown:vi(function(d){this._stepDown(d)}),_stepDown:function(d){this._start()&&(this._spin((d||1)*-this.options.step),this._stop())},pageUp:vi(function(d){this._stepUp((d||1)*this.options.page)}),pageDown:vi(function(d){this._stepDown((d||1)*this.options.page)}),value:function(d){if(!arguments.length)return this._parse(this.element.val());vi(this._value).call(this,d)},widget:function(){return this.uiSpinner}}),g.uiBackCompat!==!1&&g.widget("ui.spinner",g.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),g.ui.spinner;/*!
 * jQuery UI Tabs 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var d=/#.*$/;return function(w){var I,k;I=w.href.replace(d,""),k=location.href.replace(d,"");try{I=decodeURIComponent(I)}catch{}try{k=decodeURIComponent(k)}catch{}return w.hash.length>1&&I===k}}(),_create:function(){var d=this,w=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,w.collapsible),this._processTabs(),w.active=this._initialActive(),Array.isArray(w.disabled)&&(w.disabled=g.uniqueSort(w.disabled.concat(g.map(this.tabs.filter(".ui-state-disabled"),function(I){return d.tabs.index(I)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(w.active):this.active=g(),this._refresh(),this.active.length&&this.load(w.active)},_initialActive:function(){var d=this.options.active,w=this.options.collapsible,I=location.hash.substring(1);return d===null&&(I&&this.tabs.each(function(k,R){if(g(R).attr("aria-controls")===I)return d=k,!1}),d===null&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(d===null||d===-1)&&(d=this.tabs.length?0:!1)),d!==!1&&(d=this.tabs.index(this.tabs.eq(d)),d===-1&&(d=w?!1:0)),!w&&d===!1&&this.anchors.length&&(d=0),d},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):g()}},_tabKeydown:function(d){var w=g(g.ui.safeActiveElement(this.document[0])).closest("li"),I=this.tabs.index(w),k=!0;if(!this._handlePageNav(d)){switch(d.keyCode){case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:I++;break;case g.ui.keyCode.UP:case g.ui.keyCode.LEFT:k=!1,I--;break;case g.ui.keyCode.END:I=this.anchors.length-1;break;case g.ui.keyCode.HOME:I=0;break;case g.ui.keyCode.SPACE:d.preventDefault(),clearTimeout(this.activating),this._activate(I);return;case g.ui.keyCode.ENTER:d.preventDefault(),clearTimeout(this.activating),this._activate(I===this.options.active?!1:I);return;default:return}d.preventDefault(),clearTimeout(this.activating),I=this._focusNextTab(I,k),!d.ctrlKey&&!d.metaKey&&(w.attr("aria-selected","false"),this.tabs.eq(I).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",I)},this.delay))}},_panelKeydown:function(d){this._handlePageNav(d)||d.ctrlKey&&d.keyCode===g.ui.keyCode.UP&&(d.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(d){if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(d.altKey&&d.keyCode===g.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(d,w){var I=this.tabs.length-1;function k(){return d>I&&(d=0),d<0&&(d=I),d}for(;g.inArray(k(),this.options.disabled)!==-1;)d=w?d+1:d-1;return d},_focusNextTab:function(d,w){return d=this._findNextTab(d,w),this.tabs.eq(d).trigger("focus"),d},_setOption:function(d,w){if(d==="active"){this._activate(w);return}this._super(d,w),d==="collapsible"&&(this._toggleClass("ui-tabs-collapsible",null,w),!w&&this.options.active===!1&&this._activate(0)),d==="event"&&this._setupEvents(w),d==="heightStyle"&&this._setupHeightStyle(w)},_sanitizeSelector:function(d){return d?d.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,w=this.tablist.children(":has(a[href])");d.disabled=g.map(w.filter(".ui-state-disabled"),function(I){return w.index(I)}),this._processTabs(),d.active===!1||!this.anchors.length?(d.active=!1,this.active=g()):this.active.length&&!g.contains(this.tablist[0],this.active[0])?this.tabs.length===d.disabled.length?(d.active=!1,this.active=g()):this._activate(this._findNextTab(Math.max(0,d.active-1),!1)):d.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this,w=this.tabs,I=this.anchors,k=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(R){g(this).is(".ui-state-disabled")&&R.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){g(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return g("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=g(),this.anchors.each(function(R,W){var se,oe,ue,we=g(W).uniqueId().attr("id"),Te=g(W).closest("li"),Ve=Te.attr("aria-controls");d._isLocal(W)?(se=W.hash,ue=se.substring(1),oe=d.element.find(d._sanitizeSelector(se))):(ue=Te.attr("aria-controls")||g({}).uniqueId()[0].id,se="#"+ue,oe=d.element.find(se),oe.length||(oe=d._createPanel(ue),oe.insertAfter(d.panels[R-1]||d.tablist)),oe.attr("aria-live","polite")),oe.length&&(d.panels=d.panels.add(oe)),Ve&&Te.data("ui-tabs-aria-controls",Ve),Te.attr({"aria-controls":ue,"aria-labelledby":we}),oe.attr("aria-labelledby",we)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),w&&(this._off(w.not(this.tabs)),this._off(I.not(this.anchors)),this._off(k.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(d){return g("<div>").attr("id",d).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(d){var w,I,k;for(Array.isArray(d)&&(d.length?d.length===this.anchors.length&&(d=!0):d=!1),k=0;I=this.tabs[k];k++)w=g(I),d===!0||g.inArray(k,d)!==-1?(w.attr("aria-disabled","true"),this._addClass(w,null,"ui-state-disabled")):(w.removeAttr("aria-disabled"),this._removeClass(w,null,"ui-state-disabled"));this.options.disabled=d,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,d===!0)},_setupEvents:function(d){var w={};d&&g.each(d.split(" "),function(I,k){w[k]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(I){I.preventDefault()}}),this._on(this.anchors,w),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(d){var w,I=this.element.parent();d==="fill"?(w=I.height(),w-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var k=g(this),R=k.css("position");R==="absolute"||R==="fixed"||(w-=k.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){w-=g(this).outerHeight(!0)}),this.panels.each(function(){g(this).height(Math.max(0,w-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):d==="auto"&&(w=0,this.panels.each(function(){w=Math.max(w,g(this).height("").height())}).height(w))},_eventHandler:function(d){var w=this.options,I=this.active,k=g(d.currentTarget),R=k.closest("li"),W=R[0]===I[0],se=W&&w.collapsible,oe=se?g():this._getPanelForTab(R),ue=I.length?this._getPanelForTab(I):g(),we={oldTab:I,oldPanel:ue,newTab:se?g():R,newPanel:oe};d.preventDefault(),!(R.hasClass("ui-state-disabled")||R.hasClass("ui-tabs-loading")||this.running||W&&!w.collapsible||this._trigger("beforeActivate",d,we)===!1)&&(w.active=se?!1:this.tabs.index(R),this.active=W?g():R,this.xhr&&this.xhr.abort(),!ue.length&&!oe.length&&g.error("jQuery UI Tabs: Mismatching fragment identifier."),oe.length&&this.load(this.tabs.index(R),d),this._toggle(d,we))},_toggle:function(d,w){var I=this,k=w.newPanel,R=w.oldPanel;this.running=!0;function W(){I.running=!1,I._trigger("activate",d,w)}function se(){I._addClass(w.newTab.closest("li"),"ui-tabs-active","ui-state-active"),k.length&&I.options.show?I._show(k,I.options.show,W):(k.show(),W())}R.length&&this.options.hide?this._hide(R,this.options.hide,function(){I._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),se()}):(this._removeClass(w.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),R.hide(),se()),R.attr("aria-hidden","true"),w.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),k.length&&R.length?w.oldTab.attr("tabIndex",-1):k.length&&this.tabs.filter(function(){return g(this).attr("tabIndex")===0}).attr("tabIndex",-1),k.attr("aria-hidden","false"),w.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){var w,I=this._findActive(d);I[0]!==this.active[0]&&(I.length||(I=this.active),w=I.find(".ui-tabs-anchor")[0],this._eventHandler({target:w,currentTarget:w,preventDefault:g.noop}))},_findActive:function(d){return d===!1?g():this.tabs.eq(d)},_getIndex:function(d){return typeof d=="string"&&(d=this.anchors.index(this.anchors.filter("[href$='"+g.escapeSelector(d)+"']"))),d},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){g.data(this,"ui-tabs-destroy")?g(this).remove():g(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var d=g(this),w=d.data("ui-tabs-aria-controls");w?d.attr("aria-controls",w).removeData("ui-tabs-aria-controls"):d.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(d){var w=this.options.disabled;w!==!1&&(d===void 0?w=!1:(d=this._getIndex(d),Array.isArray(w)?w=g.map(w,function(I){return I!==d?I:null}):w=g.map(this.tabs,function(I,k){return k!==d?k:null})),this._setOptionDisabled(w))},disable:function(d){var w=this.options.disabled;if(w!==!0){if(d===void 0)w=!0;else{if(d=this._getIndex(d),g.inArray(d,w)!==-1)return;Array.isArray(w)?w=g.merge([d],w).sort():w=[d]}this._setOptionDisabled(w)}},load:function(d,w){d=this._getIndex(d);var I=this,k=this.tabs.eq(d),R=k.find(".ui-tabs-anchor"),W=this._getPanelForTab(k),se={tab:k,panel:W},oe=function(ue,we){we==="abort"&&I.panels.stop(!1,!0),I._removeClass(k,"ui-tabs-loading"),W.removeAttr("aria-busy"),ue===I.xhr&&delete I.xhr};this._isLocal(R[0])||(this.xhr=g.ajax(this._ajaxSettings(R,w,se)),this.xhr&&this.xhr.statusText!=="canceled"&&(this._addClass(k,"ui-tabs-loading"),W.attr("aria-busy","true"),this.xhr.done(function(ue,we,Te){setTimeout(function(){W.html(ue),I._trigger("load",w,se),oe(Te,we)},1)}).fail(function(ue,we){setTimeout(function(){oe(ue,we)},1)})))},_ajaxSettings:function(d,w,I){var k=this;return{url:d.attr("href").replace(/#.*$/,""),beforeSend:function(R,W){return k._trigger("beforeLoad",w,g.extend({jqXHR:R,ajaxSettings:W},I))}}},_getPanelForTab:function(d){var w=g(d).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+w))}}),g.uiBackCompat!==!1&&g.widget("ui.tabs",g.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),g.ui.tabs;/*!
 * jQuery UI Tooltip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */g.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var d=g(this).attr("title");return g("<a>").text(d).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(d,w){var I=(d.attr("aria-describedby")||"").split(/\s+/);I.push(w),d.data("ui-tooltip-id",w).attr("aria-describedby",String.prototype.trim.call(I.join(" ")))},_removeDescribedBy:function(d){var w=d.data("ui-tooltip-id"),I=(d.attr("aria-describedby")||"").split(/\s+/),k=g.inArray(w,I);k!==-1&&I.splice(k,1),d.removeData("ui-tooltip-id"),I=String.prototype.trim.call(I.join(" ")),I?d.attr("aria-describedby",I):d.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=g("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=g([])},_setOption:function(d,w){var I=this;this._super(d,w),d==="content"&&g.each(this.tooltips,function(k,R){I._updateContent(R.element)})},_setOptionDisabled:function(d){this[d?"_disable":"_enable"]()},_disable:function(){var d=this;g.each(this.tooltips,function(w,I){var k=g.Event("blur");k.target=k.currentTarget=I.element[0],d.close(k,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var w=g(this);if(w.is("[title]"))return w.data("ui-tooltip-title",w.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var d=g(this);d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title"))}),this.disabledTitles=g([])},open:function(d){var w=this,I=g(d?d.target:this.element).closest(this.options.items);!I.length||I.data("ui-tooltip-id")||(I.attr("title")&&I.data("ui-tooltip-title",I.attr("title")),I.data("ui-tooltip-open",!0),d&&d.type==="mouseover"&&I.parents().each(function(){var k=g(this),R;k.data("ui-tooltip-open")&&(R=g.Event("blur"),R.target=R.currentTarget=this,w.close(R,!0)),k.attr("title")&&(k.uniqueId(),w.parents[this.id]={element:this,title:k.attr("title")},k.attr("title",""))}),this._registerCloseHandlers(d,I),this._updateContent(I,d))},_updateContent:function(d,w){var I,k=this.options.content,R=this,W=w?w.type:null;if(typeof k=="string"||k.nodeType||k.jquery)return this._open(w,d,k);I=k.call(d[0],function(se){R._delay(function(){d.data("ui-tooltip-open")&&(w&&(w.type=W),this._open(w,d,se))})}),I&&this._open(w,d,I)},_open:function(d,w,I){var k,R,W,se,oe=g.extend({},this.options.position);if(!I)return;if(k=this._find(w),k){k.tooltip.find(".ui-tooltip-content").html(I);return}w.is("[title]")&&(d&&d.type==="mouseover"?w.attr("title",""):w.removeAttr("title")),k=this._tooltip(w),R=k.tooltip,this._addDescribedBy(w,R.attr("id")),R.find(".ui-tooltip-content").html(I),this.liveRegion.children().hide(),se=g("<div>").html(R.find(".ui-tooltip-content").html()),se.removeAttr("name").find("[name]").removeAttr("name"),se.removeAttr("id").find("[id]").removeAttr("id"),se.appendTo(this.liveRegion);function ue(we){oe.of=we,!R.is(":hidden")&&R.position(oe)}this.options.track&&d&&/^mouse/.test(d.type)?(this._on(this.document,{mousemove:ue}),ue(d)):R.position(g.extend({of:w},this.options.position)),R.hide(),this._show(R,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(W=this.delayedShow=setInterval(function(){R.is(":visible")&&(ue(oe.of),clearInterval(W))},13)),this._trigger("open",d,{tooltip:R})},_registerCloseHandlers:function(d,w){var I={keyup:function(k){if(k.keyCode===g.ui.keyCode.ESCAPE){var R=g.Event(k);R.currentTarget=w[0],this.close(R,!0)}}};w[0]!==this.element[0]&&(I.remove=function(){var k=this._find(w);k&&this._removeTooltip(k.tooltip)}),(!d||d.type==="mouseover")&&(I.mouseleave="close"),(!d||d.type==="focusin")&&(I.focusout="close"),this._on(!0,w,I)},close:function(d){var w,I=this,k=g(d?d.currentTarget:this.element),R=this._find(k);if(!R){k.removeData("ui-tooltip-open");return}w=R.tooltip,!R.closing&&(clearInterval(this.delayedShow),k.data("ui-tooltip-title")&&!k.attr("title")&&k.attr("title",k.data("ui-tooltip-title")),this._removeDescribedBy(k),R.hiding=!0,w.stop(!0),this._hide(w,this.options.hide,function(){I._removeTooltip(g(this))}),k.removeData("ui-tooltip-open"),this._off(k,"mouseleave focusout keyup"),k[0]!==this.element[0]&&this._off(k,"remove"),this._off(this.document,"mousemove"),d&&d.type==="mouseleave"&&g.each(this.parents,function(W,se){g(se.element).attr("title",se.title),delete I.parents[W]}),R.closing=!0,this._trigger("close",d,{tooltip:w}),R.hiding||(R.closing=!1))},_tooltip:function(d){var w=g("<div>").attr("role","tooltip"),I=g("<div>").appendTo(w),k=w.uniqueId().attr("id");return this._addClass(I,"ui-tooltip-content"),this._addClass(w,"ui-tooltip","ui-widget ui-widget-content"),w.appendTo(this._appendTo(d)),this.tooltips[k]={element:d,tooltip:w}},_find:function(d){var w=d.data("ui-tooltip-id");return w?this.tooltips[w]:null},_removeTooltip:function(d){clearInterval(this.delayedShow),d.remove(),delete this.tooltips[d.attr("id")]},_appendTo:function(d){var w=d.closest(".ui-front, dialog");return w.length||(w=this.document[0].body),w},_destroy:function(){var d=this;g.each(this.tooltips,function(w,I){var k=g.Event("blur"),R=I.element;k.target=k.currentTarget=R[0],d.close(k,!0),g("#"+w).remove(),R.data("ui-tooltip-title")&&(R.attr("title")||R.attr("title",R.data("ui-tooltip-title")),R.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),g.uiBackCompat!==!1&&g.widget("ui.tooltip",g.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var d=this._superApply(arguments);return this.options.tooltipClass&&d.tooltip.addClass(this.options.tooltipClass),d}}),g.ui.tooltip});/**
 * @author bbecquet
 * @license MIT
 * @see github.com/bbecquet/Leaflet.PolylineOffset
 */function forEachPair(g,B){if(!(!g||g.length<1))for(let M=1,P=g.length;M<P;M++)B(g[M-1],g[M])}function lineEquation(g,B){if(g.x===B.x)return g.y===B.y?null:{x:g.x};const M=(B.y-g.y)/(B.x-g.x);return{a:M,b:g.y-M*g.x}}function intersection(g,B,M,P){const K=lineEquation(g,B),Y=lineEquation(M,P);if(K===null||Y===null)return null;if(K.hasOwnProperty("x"))return Y.hasOwnProperty("x")?null:{x:K.x,y:Y.a*K.x+Y.b};if(Y.hasOwnProperty("x"))return{x:Y.x,y:K.a*Y.x+K.b};if(K.a===Y.a)return null;const re=(Y.b-K.b)/(K.a-Y.a);return{x:re,y:K.a*re+K.b}}function translatePoint(g,B,M){return{x:g.x+B*Math.cos(M),y:g.y+B*Math.sin(M)}}const PolylineOffset={offsetPointLine:function(g,B){const M=[];return forEachPair(g,L.bind((P,K)=>{if(P.x===K.x&&P.y===K.y)return;const re=Math.atan2(P.y-K.y,P.x-K.x)-Math.PI/2;M.push({offsetAngle:re,original:[P,K],offset:[translatePoint(P,B,re),translatePoint(K,B,re)]})},this)),M},offsetPoints:function(g,B){const M=this.offsetPointLine(L.LineUtil.simplify(g,B.smoothFactor),B.offset);return this.joinLineSegments(M,B.offset)},joinSegments:function(g,B,M){return this.circularArc(g,B,M).filter(P=>P)},joinLineSegments:function(g,B){let M=[];const P=g[0],K=g[g.length-1];return P&&K&&(M.push(P.offset[0]),forEachPair(g,L.bind(function(Y,re){M=M.concat(this.joinSegments(Y,re,B))},this)),M.push(K.offset[1])),M},segmentAsVector:function(g){return{x:g[1].x-g[0].x,y:g[1].y-g[0].y}},getSignedAngle:function(g,B){const M=this.segmentAsVector(g),P=this.segmentAsVector(B);return Math.atan2(M.x*P.y-M.y*P.x,M.x*P.x+M.y*P.y)},circularArc:function(g,B,M){if(g.offsetAngle===B.offsetAngle)return[g.offset[1]];const P=this.getSignedAngle(g.offset,B.offset);if(P*M>0&&P*this.getSignedAngle(g.offset,[g.offset[0],B.offset[1]])>0)return[intersection(g.offset[0],g.offset[1],B.offset[0],B.offset[1])];const K=[],Y=g.original[1],re=M>0,D=re?B.offsetAngle:g.offsetAngle;let ne=re?g.offsetAngle:B.offsetAngle;ne<D&&(ne+=Math.PI*2);const Ae=Math.PI/8;for(let fe=D;fe<ne;fe+=Ae)K.push(translatePoint(Y,M,fe));return K.push(translatePoint(Y,M,ne)),re?K.reverse():K}};L.Polyline.include({_projectLatlngs:function(g,B,M){if(g.length>0&&g[0]instanceof L.LatLng){let K=g.map(L.bind(function(Y){const re=this._map.latLngToLayerPoint(Y);return M&&M.extend(re),re},this));this.options.offset&&(K=PolylineOffset.offsetPoints(K,this.options)),B.push(K.map(Y=>L.point(Y.x,Y.y)))}else g.forEach(L.bind(function(K){this._projectLatlngs(K,B,M)},this))}});L.Polyline.include({setOffset:function(g){return this.options.offset=g,this.redraw(),this}});L.LatLngBounds.prototype.modify=function(g,B){var M=this.getSouthWest(),P=this.getNorthEast(),K=g.latLngToLayerPoint(M),Y=g.latLngToLayerPoint(P);return M=g.layerPointToLatLng(new L.Point(K.x-B,K.y+B)),P=g.layerPointToLatLng(new L.Point(Y.x+B,Y.y-B)),new L.LatLngBounds(M,P)};L.Control.Button=L.Class.extend({initialize:function(g){L.Util.setOptions(this,g)},addTo:function(g){return g.addButton(this),this},onAdd:function(g){this._buttonContainer=g,this._button=L.DomUtil.create("a",this.options.className,this._buttonContainer.getContainer()),this._button.href="#",this.setText(this.options.text);var B=this;this._onClick=function(M){B.options.onClick.call(B,M)},L.DomEvent.on(this._button,"click",L.DomEvent.stopPropagation).on(this._button,"mousedown",L.DomEvent.stopPropagation).on(this._button,"dblclick",L.DomEvent.stopPropagation).on(this._button,"click",L.DomEvent.preventDefault).on(this._button,"click",this._onClick,this)},remove:function(){L.DomEvent.off(this._button,"click",this._onClick),this._buttonContainer.getContainer().removeChild(this._button)},setText:function(g){this._button.title=g,this._button.innerHTML=g}});L.Control.ButtonContainer=L.Control.extend({options:{position:"topleft"},getContainer:function(){return this._container||(this._container=L.DomUtil.create("div",this.options.className)),this._container},onAdd:function(g){return this._map=g,this.getContainer()},addButton:function(g){g.onAdd(this)},addClass:function(g){L.DomUtil.addClass(this.getContainer(),g)},removeClass:function(g){L.DomUtil.removeClass(this.getContainer(),g)}});L.LocationFilter=L.Layer.extend({includes:L.Mixin.Events,options:{enableButton:{enableText:"Select area",disableText:"Remove selection"},adjustButton:{text:"Select area within current zoom"},buttonPosition:"topleft",showButtons:!0,locked:!1,fixed:!1},initialize:function(g){L.Util.setOptions(this,g)},addTo:function(g){return g.addLayer(this),this},onAdd:function(g){this._map=g,this.options.showButtons&&(this.options.enableButton||this.options.adjustButton)&&this._initializeButtonContainer(),this.options.enable&&this.enable()},onRemove:function(g){this.disable(),this._buttonContainer&&this._buttonContainer.removeFrom(g)},getBounds:function(){return new L.LatLngBounds(this._sw,this._ne)},setBounds:function(g){this._nw=g.getNorthWest(),this._ne=g.getNorthEast(),this._sw=g.getSouthWest(),this._se=g.getSouthEast(),this.isEnabled()&&(this._draw(),this.fire("change",{bounds:g}))},isEnabled:function(){return this._enabled},setLocked:function(g){this.options.locked=g,this._toggleMarkerDragging(this._moveMarker,g,"hide-marker")},isLocked:function(){return this.options.locked},setFixed:function(g){this.options.fixed=g,this._toggleMarkerDragging(this._neMarker,g,"hide-marker"),this._toggleMarkerDragging(this._nwMarker,g,"hide-marker"),this._toggleMarkerDragging(this._seMarker,g,"hide-marker"),this._toggleMarkerDragging(this._swMarker,g,"hide-marker")},_toggleMarkerDragging(g,B,M){B?(g.dragging.disable(),g._icon.classList.add(M)):(g.dragging.enable(),g._icon.classList.remove(M))},_drawRectangle:function(g,B){B=B||{};var M={stroke:!1,fill:!0,fillColor:"black",fillOpacity:.3,clickable:!1};B=L.Util.extend(M,B);var P=new L.Rectangle(g,B);return P.addTo(this._layer),P},_drawImageMarker:function(g,B){var M=new L.Marker(g,{icon:new L.DivIcon({iconAnchor:B.anchor,iconSize:B.size,className:B.className}),draggable:!0});return M.addTo(this._layer),M},_drawMoveMarker:function(g){var B=this;return this._moveMarker=this._drawImageMarker(g,{className:"location-filter move-marker "+(this.options.locked?"hide-marker":""),anchor:[-10,-10],size:[13,13]}),this._moveMarker.on("drag",function(M){var P=B._moveMarker.getLatLng(),K=P.lat-B._nw.lat,Y=P.lng-B._nw.lng;B._nw=new L.LatLng(B._nw.lat+K,B._nw.lng+Y,!0),B._ne=new L.LatLng(B._ne.lat+K,B._ne.lng+Y,!0),B._sw=new L.LatLng(B._sw.lat+K,B._sw.lng+Y,!0),B._se=new L.LatLng(B._se.lat+K,B._se.lng+Y,!0),B._draw()}),this._setupDragendListener(this._moveMarker),this._moveMarker},_drawResizeMarker:function(g,B,M,P,K){return this._drawImageMarker(g,{className:"location-filter resize-marker "+B+" "+(this.options.fixed?"hide-marker":""),anchor:[7,6],size:[13,12]})},_setupResizeMarkerTracking:function(g,B){var M=this;g.on("drag",function(P){var K=g.getLatLng(),Y=B.moveAlong.lat,re=B.moveAlong.lng;Y.setLatLng(new L.LatLng(K.lat,Y.getLatLng().lng,!0)),re.setLatLng(new L.LatLng(re.getLatLng().lat,K.lng,!0));var D=[M._nwMarker.getLatLng(),M._neMarker.getLatLng(),M._swMarker.getLatLng(),M._seMarker.getLatLng()];D.sort(function(ne,Ae){return ne.lat!=Ae.lat?Ae.lat-ne.lat:ne.lng-Ae.lng}),M._nw=D[0],M._ne=D[1],M._sw=D[2],M._se=D[3],M._draw({repositionResizeMarkers:!1})}),this._setupDragendListener(g)},_setupDragendListener:function(g){var B=this;g.on("dragend",function(M){B.fire("change",{bounds:B.getBounds()})})},_calculateBounds:function(){var g=this._map.getBounds(),B=new L.LatLngBounds(new L.LatLng(g.getSouthWest().lat-.1,g.getSouthWest().lng-.1,!0),new L.LatLng(g.getNorthEast().lat+.1,g.getNorthEast().lng+.1,!0));this._osw=B.getSouthWest(),this._one=B.getNorthEast(),this._northBounds=new L.LatLngBounds(new L.LatLng(this._ne.lat,this._osw.lng,!0),this._one),this._westBounds=new L.LatLngBounds(new L.LatLng(this._sw.lat,this._osw.lng,!0),this._nw),this._eastBounds=new L.LatLngBounds(this._se,new L.LatLng(this._ne.lat,this._one.lng,!0)),this._southBounds=new L.LatLngBounds(this._osw,new L.LatLng(this._sw.lat,this._one.lng,!0))},_initialDraw:function(){this._initialDrawCalled||(this._layer=new L.LayerGroup,this._calculateBounds(),this._northRect=this._drawRectangle(this._northBounds),this._westRect=this._drawRectangle(this._westBounds),this._eastRect=this._drawRectangle(this._eastBounds),this._southRect=this._drawRectangle(this._southBounds),this._innerRect=this._drawRectangle(this.getBounds(),{fillOpacity:0,stroke:!0,color:"white",weight:1,opacity:.9}),this._nwMarker=this._drawResizeMarker(this._nw,"nw"),this._neMarker=this._drawResizeMarker(this._ne,"ne"),this._swMarker=this._drawResizeMarker(this._sw,"sw"),this._seMarker=this._drawResizeMarker(this._se,"se"),this._setupResizeMarkerTracking(this._nwMarker,{moveAlong:{lat:this._neMarker,lng:this._swMarker}}),this._setupResizeMarkerTracking(this._neMarker,{moveAlong:{lat:this._nwMarker,lng:this._seMarker}}),this._setupResizeMarkerTracking(this._swMarker,{moveAlong:{lat:this._seMarker,lng:this._nwMarker}}),this._setupResizeMarkerTracking(this._seMarker,{moveAlong:{lat:this._swMarker,lng:this._neMarker}}),this._moveMarker=this._drawMoveMarker(this._nw),this._initialDrawCalled=!0)},_draw:function(g){g=L.Util.extend({repositionResizeMarkers:!0},g),this._calculateBounds(),this._northRect.setBounds(this._northBounds),this._westRect.setBounds(this._westBounds),this._eastRect.setBounds(this._eastBounds),this._southRect.setBounds(this._southBounds),this._innerRect.setBounds(this.getBounds()),g.repositionResizeMarkers&&(this._nwMarker.setLatLng(this._nw),this._neMarker.setLatLng(this._ne),this._swMarker.setLatLng(this._sw),this._seMarker.setLatLng(this._se)),this._moveMarker.setLatLng(this._nw)},_adjustToMap:function(){this.setBounds(this._map.getBounds()),this._map.zoomOut()},enable:function(){if(!this._enabled){var g;this._sw&&this._ne?g=new L.LatLngBounds(this._sw,this._ne):this.options.bounds?g=this.options.bounds:g=this._map.getBounds(),this._map.invalidateSize(),this._nw=g.getNorthWest(),this._ne=g.getNorthEast(),this._sw=g.getSouthWest(),this._se=g.getSouthEast(),this.options.showButtons&&(this._buttonContainer&&this._buttonContainer.addClass("enabled"),this._enableButton&&this._enableButton.setText(this.options.enableButton.disableText),this.options.adjustButton&&this._createAdjustButton()),this._initialDraw(),this._draw();var B=this;this._moveHandler=function(){B._draw()},this._map.on("move",this._moveHandler),this._layer.addTo(this._map);var M=this._map.getBounds();g=new L.LatLngBounds(this._sw,this._ne).modify(this._map,10),(!M.contains(g.getSouthWest())||!M.contains(g.getNorthEast()))&&this._map.fitBounds(g),this._enabled=!0,this.fire("enabled")}},disable:function(){this._enabled&&(this.options.showButtons&&(this._buttonContainer&&this._buttonContainer.removeClass("enabled"),this._enableButton&&this._enableButton.setText(this.options.enableButton.enableText),this._adjustButton&&this._adjustButton.remove()),this._map.off("move",this._moveHandler),this._map.removeLayer(this._layer),this._enabled=!1,this.fire("disabled"))},_createAdjustButton:function(){var g=this;this._adjustButton=new L.Control.Button({className:"adjust-button",text:this.options.adjustButton.text,onClick:function(B){g._adjustToMap(),g.fire("adjustToZoomClick")}}).addTo(this._buttonContainer)},_initializeButtonContainer:function(){var g=this;this._buttonContainer=new L.Control.ButtonContainer({className:"location-filter button-container",position:this.options.buttonPosition}),this.options.enableButton&&(this._enableButton=new L.Control.Button({className:"enable-button",text:this.options.enableButton.enableText,onClick:function(B){g._enabled?(g.disable(),g.fire("disableClick")):(g.enable(),g.fire("enableClick"))}}).addTo(this._buttonContainer)),this._buttonContainer.addTo(this._map)}});window.CodeMirror=function(){function g(ce,ye){var xe={},Me=g.defaults;for(var Ge in Me)Me.hasOwnProperty(Ge)&&(xe[Ge]=(ye&&ye.hasOwnProperty(Ge)?ye:Me)[Ge]);var Le=wi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");Le.setAttribute("wrap","off"),Le.setAttribute("autocorrect","off"),Le.setAttribute("autocapitalize","off");var Ke=wi("div",[Le],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),st=wi("div",null,"CodeMirror-scrollbar-inner"),_t=wi("div",[st],"CodeMirror-scrollbar"),xt=wi("div"),kt=wi("div",null,null,"position: relative; z-index: -1"),ai=wi("pre","Â ","CodeMirror-cursor"),Di=wi("pre","Â ","CodeMirror-cursor","visibility: hidden"),ni=wi("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),ei=wi("div",[ni,ai,Di,kt,xt],null,"position: relative; z-index: 0"),Ui=wi("div",null,"CodeMirror-gutter-text"),Qi=wi("div",[Ui],"CodeMirror-gutter"),hr=wi("div",[Qi,wi("div",[ei],"CodeMirror-lines")],null,"position: relative"),Ki=wi("div",[hr],null,"position: relative"),Xt=wi("div",[Ki],"CodeMirror-scroll");Xt.setAttribute("tabIndex","-1");var wr=wi("div",[Ke,_t,Xt],"CodeMirror"+(xe.lineWrapping?" CodeMirror-wrap":""));ce.appendChild?ce.appendChild(wr):ce(wr),oo(),Pa(),B&&(Le.style.width="0px"),ut||(Xt.draggable=!0),ei.style.outline="none",xe.tabindex!=null&&(Le.tabIndex=xe.tabindex),xe.autofocus&&Rs(),!xe.gutter&&!xe.lineNumbers&&(Qi.style.display="none"),Tt&&(Ke.style.height="1px",Ke.style.position="absolute"),qt?(_t.style.zIndex=-2,_t.style.visibility="hidden"):Re&&(_t.style.minWidth="18px");var bi=new $t,Sr=new $t,Pr,Zi,pi=new oe([new se([new W("")])]),_s=0,dr;no();var Dt={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Yr,Ys,_r,Br=0,Cr,rr=!1,Lr=!1,sr=!1,jr,ss,ps,cr,js,ys,Os,pn=0,Qr=0,es=0,xo=0,Zs,An=er(0),ta=!1,ja=!0,Qn=!1,ba=null;qi(function(){Ba(xe.value||""),jr=!1})();var Nr=new De;Mt(Xt,"mousedown",qi(Ia)),Mt(Xt,"dblclick",qi(On)),Mt(ei,"selectstart",qe),Ue||Mt(Xt,"contextmenu",fa),Mt(Xt,"scroll",Ta),Mt(_t,"scroll",Ea),Mt(_t,"mousedown",function(){dr&&setTimeout(Rs,0)});var Vo=Mt(window,"resize",function(){wr.parentNode?Js(!0):Vo()},!0);Mt(Le,"keyup",qi(Co)),Mt(Le,"input",aa),Mt(Le,"keydown",qi(pr)),Mt(Le,"keypress",qi($a)),Mt(Le,"focus",Sn),Mt(Le,"blur",sa);function Bo(be){xe.onDragEvent&&xe.onDragEvent(br,ke(be))||pt(be)}xe.dragDrop&&(Mt(Xt,"dragstart",ks),Mt(Xt,"dragenter",Bo),Mt(Xt,"dragover",Bo),Mt(Xt,"drop",qi(Za))),Mt(Xt,"paste",function(){Rs(),aa()}),Mt(Le,"paste",function(){sr=!0,aa()}),Mt(Le,"cut",qi(function(){xe.readOnly||Rn("")})),Tt&&Mt(Ki,"mouseup",function(){document.activeElement==Le&&Le.blur(),Rs()});var xa;try{xa=document.activeElement==Le}catch{}xa||xe.autofocus?setTimeout(Sn,20):sa();function Tn(be){return be>=0&&be<pi.size}var br=wr.CodeMirror={getValue:Ca,setValue:qi(Ba),getSelection:ka,replaceSelection:qi(Rn),focus:function(){window.focus(),Rs(),Sn(),aa()},setOption:function(be,Oe){var Xe=xe[be];xe[be]=Oe,be=="mode"||be=="indentUnit"?no():be=="readOnly"&&Oe=="nocursor"?(sa(),Le.blur()):be=="readOnly"&&!Oe?hn(!0):be=="theme"?oo():be=="lineWrapping"&&Xe!=Oe?qi(ao)():be=="tabSize"?Js(!0):be=="keyMap"?Pa():be=="tabindex"?Le.tabIndex=Oe:be=="showCursorWhenSelecting"&&So(),(be=="lineNumbers"||be=="gutter"||be=="firstLineNumber"||be=="theme"||be=="lineNumberFormatter")&&(Ma(),Js(!0))},getOption:function(be){return xe[be]},getMode:function(){return Zi},undo:qi(na),redo:qi(pl),indentLine:qi(function(be,Oe){typeof Oe!="string"&&(Oe==null?Oe=xe.smartIndent?"smart":"prev":Oe=Oe?"add":"subtract"),Tn(be)&&so(be,Oe)}),indentSelection:qi(Fo),historySize:function(){return{undo:Nr.done.length,redo:Nr.undone.length}},clearHistory:function(){Nr=new De},setHistory:function(be){Nr=new De,Nr.done=be.done,Nr.undone=be.undone},getHistory:function(){function be(Oe){for(var Xe=0,je=[],yt;Xe<Oe.length;++Xe){je.push(yt=[]);for(var Et=0,Ht=Oe[Xe];Et<Ht.length;++Et){var jt=[],hi=Ht[Et];yt.push({start:hi.start,added:hi.added,old:jt});for(var Wt=0;Wt<hi.old.length;++Wt)jt.push(vi(hi.old[Wt]))}}return je}return{done:be(Nr.done),undone:be(Nr.undone)}},matchBrackets:qi(function(){qr(!0)}),getTokenAt:qi(function(be){return be=yr(be),er(be.line).getTokenAt(Zi,Ms(be.line),xe.tabSize,be.ch)}),getStateAfter:function(be){return be=Ji(be??pi.size-1),Ms(be+1)},cursorCoords:function(be,Oe){return be==null&&(be=Dt.inverted),this.charCoords(be?Dt.from:Dt.to,Oe)},charCoords:function(be,Oe){return be=yr(be),Oe=="local"?xs(be,!1):Oe=="div"?xs(be,!0):jo(be)},coordsChar:function(be){var Oe=ii(ei);return Kn(be.x-Oe.left,be.y-Oe.top)},defaultTextHeight:function(){return Bs()},markText:qi(La),setBookmark:_l,findMarksAt:Yo,setMarker:qi(Wr),clearMarker:qi(Vn),setLineClass:qi(ko),hideLine:qi(function(be){return Aa(be,!0)}),showLine:qi(function(be){return Aa(be,!1)}),onDeleteLine:function(be,Oe){if(typeof be=="number"){if(!Tn(be))return null;be=er(be)}return(be.handlers||(be.handlers=[])).push(Oe),be},lineInfo:Do,getViewport:function(){return{from:Qr,to:es}},addWidget:function(be,Oe,Xe,je,yt){be=xs(yr(be));var Et=be.yBot,Ht=be.x;if(Oe.style.position="absolute",Ki.appendChild(Oe),je=="over")Et=be.y;else if(je=="near"){var jt=Math.max(Xt.offsetHeight,pi.height*Bs()),hi=Math.max(Ki.clientWidth,ei.clientWidth)-lo();be.yBot+Oe.offsetHeight>jt&&be.y>Oe.offsetHeight&&(Et=be.y-Oe.offsetHeight),Ht+Oe.offsetWidth>hi&&(Ht=hi-Oe.offsetWidth)}Oe.style.top=Et+Qa()+"px",Oe.style.left=Oe.style.right="",yt=="right"?(Ht=Ki.clientWidth-Oe.offsetWidth,Oe.style.right="0px"):(yt=="left"?Ht=0:yt=="middle"&&(Ht=(Ki.clientWidth-Oe.offsetWidth)/2),Oe.style.left=Ht+lo()+"px"),Xe&&to(Ht,Et,Ht+Oe.offsetWidth,Et+Oe.offsetHeight)},lineCount:function(){return pi.size},clipPos:yr,getCursor:function(be){return(be==null||be=="head")&&(be=Dt.inverted),be=="anchor"&&(be=!Dt.inverted),be=="end"&&(be=!1),mi(be?Dt.from:Dt.to)},somethingSelected:function(){return!Wi(Dt.from,Dt.to)},setCursor:qi(function(be,Oe,Xe){Oe==null&&typeof be.line=="number"?$s(be.line,be.ch,Xe):$s(be,Oe,Xe)}),setSelection:qi(function(be,Oe,Xe){(Xe?Hs:Da)(yr(be),yr(Oe||be))}),getLine:function(be){if(Tn(be))return er(be).text},getLineHandle:function(be){if(Tn(be))return er(be)},setLine:qi(function(be,Oe){Tn(be)&&cn(Oe,{line:be,ch:0},{line:be,ch:er(be).text.length})}),removeLine:qi(function(be){Tn(be)&&cn("",{line:be,ch:0},yr({line:be+1,ch:0}))}),replaceRange:qi(cn),getRange:function(be,Oe,Xe){return eo(yr(be),yr(Oe),Xe)},triggerOnKeyDown:qi(pr),execCommand:function(be){return ne[be](br)},moveH:qi(Mr),deleteH:qi(zn),moveV:qi(Ua),toggleOverwrite:function(){rr?(rr=!1,ai.className=ai.className.replace(" CodeMirror-overwrite","")):(rr=!0,ai.className+=" CodeMirror-overwrite")},posFromIndex:function(be){var Oe=0,Xe;return pi.iter(0,pi.size,function(je){var yt=je.text.length+1;if(yt>be)return Xe=be,!0;be-=yt,++Oe}),yr({line:Oe,ch:Xe})},indexFromPos:function(be){if(be.line<0||be.ch<0)return 0;var Oe=be.ch;return pi.iter(0,be.line,function(Xe){Oe+=Xe.text.length+1}),Oe},scrollTo:function(be,Oe){be!=null&&(Xt.scrollLeft=be),Oe!=null&&(_t.scrollTop=Xt.scrollTop=Oe),Js([])},getScrollInfo:function(){return{x:Xt.scrollLeft,y:_t.scrollTop,height:_t.scrollHeight,width:Xt.scrollWidth}},scrollIntoView:function(be){var Oe=xs(be?yr(be):Dt.inverted?Dt.from:Dt.to);to(Oe.x,Oe.y,Oe.x,Oe.yBot)},setSize:function(be,Oe){function Xe(je){return je=String(je),/^\d+$/.test(je)?je+"px":je}be!=null&&(wr.style.width=Xe(be)),Oe!=null&&(Xt.style.height=Xe(Oe)),br.refresh()},operation:function(be){return qi(be)()},compoundChange:function(be){return tn(be)},refresh:function(){Js(!0,null,Br),_t.scrollHeight>Br&&(_t.scrollTop=Br)},getInputField:function(){return Le},getWrapperElement:function(){return wr},getScrollerElement:function(){return Xt},getGutterElement:function(){return Qi}};function er(be){return ue(pi,be)}function As(be,Oe){ys=!0;for(var Xe=Oe-be.height,je=be;je;je=je.parent)je.height+=Xe}function ia(be,Oe){return be.styles||be.highlight(Zi,be.stateAfter=Ms(we(be)),xe.tabSize),be.getContent(xe.tabSize,Oe,xe.lineWrapping)}function Ba(be){var Oe={line:0,ch:0};Eo(Oe,{line:pi.size-1,ch:er(pi.size-1).text.length},$r(be),Oe,Oe),jr=!0}function Ca(be){var Oe=[];return pi.iter(0,pi.size,function(Xe){Oe.push(Xe.text)}),Oe.join(be||`
`)}function Ea(be){Math.abs(_t.scrollTop-Br)>1&&(Br=Xt.scrollTop=_t.scrollTop,Js([]))}function Ta(be){xe.fixedGutter&&Qi.style.left!=Xt.scrollLeft+"px"&&(Qi.style.left=Xt.scrollLeft+"px"),Math.abs(Xt.scrollTop-Br)>1&&(Br=Xt.scrollTop,_t.scrollTop!=Br&&(_t.scrollTop=Br),Js([])),xe.onScroll&&xe.onScroll(br)}function Ia(be){Xo(Nt(be,"shiftKey"));for(var Oe=Ft(be);Oe!=wr;Oe=Oe.parentNode)if(Oe.parentNode==Ki&&Oe!=hr)return;for(var Oe=Ft(be);Oe!=wr;Oe=Oe.parentNode)if(Oe.parentNode==Ui)return xe.onGutterClick&&xe.onGutterClick(br,ji(Ui.childNodes,Oe)+Qr,be),qe(be);var Xe=ua(be);switch(zt(be)){case 3:Ue&&fa(be);return;case 2:Xe&&$s(Xe.line,Xe.ch,!0),setTimeout(Rs,20),qe(be);return}if(!Xe){Ft(be)==Xt&&qe(be);return}dr||Sn();var je=+new Date,yt="single";if(_r&&_r.time>je-400&&Wi(_r.pos,Xe))yt="triple",qe(be),setTimeout(Rs,20),ml(Xe.line);else if(Ys&&Ys.time>je-400&&Wi(Ys.pos,Xe)){yt="double",_r={time:je,pos:Xe},qe(be);var Et=ro(Xe);Hs(Et.from,Et.to)}else Ys={time:je,pos:Xe};function Ht(Xi){ut&&(Xt.draggable=!1),Cr=!1,nr(),Wt(),Math.abs(be.clientX-Xi.clientX)+Math.abs(be.clientY-Xi.clientY)<10&&(qe(Xi),$s(Xe.line,Xe.ch,!0),Rs())}var jt=Xe,hi;if(xe.dragDrop&&ci&&!xe.readOnly&&!Wi(Dt.from,Dt.to)&&!Zt(Xe,Dt.from)&&!Zt(Dt.to,Xe)&&yt=="single"){ut&&(Xt.draggable=!0);var nr=Mt(document,"mouseup",qi(Ht),!0),Wt=Mt(Xt,"drop",qi(Ht),!0);Cr=!0,Xt.dragDrop&&Xt.dragDrop();return}qe(be),yt=="single"&&$s(Xe.line,Xe.ch,!0);var Gi=Dt.from,zi=Dt.to;function Oi(Xi){if(yt=="single"){Hs(yr(Xe),Xi);return}if(Gi=yr(Gi),zi=yr(zi),yt=="double"){var Or=ro(Xi);Zt(Xi,Gi)?Hs(Or.from,zi):Hs(Gi,Or.to)}else yt=="triple"&&(Zt(Xi,Gi)?Hs(zi,yr({line:Xi.line,ch:0})):Hs(Gi,yr({line:Xi.line+1,ch:0})))}function mr(Xi){var Or=ua(Xi,!0);if(Or&&!Wi(Or,jt)){dr||Sn(),jt=Or,Oi(Or),jr=!1;var Ir=gr();(Or.line>=Ir.to||Or.line<Ir.from)&&(hi=setTimeout(qi(function(){mr(Xi)}),150))}}function ur(Xi){clearTimeout(hi);var Or=ua(Xi);Or&&Oi(Or),qe(Xi),Rs(),jr=!0,vr(),nr()}var vr=Mt(document,"mousemove",qi(function(Xi){clearTimeout(hi),qe(Xi),!ze&&!zt(Xi)?ur(Xi):mr(Xi)}),!0),nr=Mt(document,"mouseup",qi(ur),!0)}function On(be){for(var Oe=Ft(be);Oe!=wr;Oe=Oe.parentNode)if(Oe.parentNode==Ui)return qe(be);qe(be)}function Za(be){if(!(xe.onDragEvent&&xe.onDragEvent(br,ke(be)))){qe(be);var Oe=ua(be,!0),Xe=be.dataTransfer.files;if(!(!Oe||xe.readOnly))if(Xe&&Xe.length&&window.FileReader&&window.File)for(var je=Xe.length,yt=Array(je),Et=0,Ht=function(hi,Wt){var Gi=new FileReader;Gi.onload=function(){yt[Wt]=Gi.result,++Et==je&&(Oe=yr(Oe),qi(function(){var zi=cn(yt.join(""),Oe,Oe);Hs(Oe,zi)})())},Gi.readAsText(hi)},jt=0;jt<je;++jt)Ht(Xe[jt],jt);else{if(Cr&&!(Zt(Oe,Dt.from)||Zt(Dt.to,Oe)))return;try{var yt=be.dataTransfer.getData("Text");yt&&tn(function(){var Wt=Dt.from,Gi=Dt.to;Hs(Oe,Oe),Cr&&cn("",Wt,Gi),Rn(yt),Rs()})}catch{}}}}function ks(be){var Oe=ka();be.dataTransfer.setData("Text",Oe),be.dataTransfer.setDragImage&&be.dataTransfer.setDragImage(wi("img"),0,0)}function gs(be,Oe){if(typeof be=="string"&&(be=ne[be],!be))return!1;var Xe=Yr;try{xe.readOnly&&(Lr=!0),Oe&&(Yr=null),be(br)}catch(je){if(je!=ri)throw je;return!1}finally{Yr=Xe,Lr=!1}return!0}var Ja;function Sa(be){var Oe=fe(xe.keyMap),Xe=Oe.auto;clearTimeout(Ja),Xe&&!Be(be)&&(Ja=setTimeout(function(){fe(xe.keyMap)==Oe&&(xe.keyMap=Xe.call?Xe.call(null,br):Xe)},50));var je=Se[Nt(be,"keyCode")],yt=!1;if(je==null||be.altGraphKey)return!1;Nt(be,"altKey")&&(je="Alt-"+je),Nt(be,vt?"metaKey":"ctrlKey")&&(je="Ctrl-"+je),Nt(be,vt?"ctrlKey":"metaKey")&&(je="Cmd-"+je);var Et=!1;function Ht(){Et=!0}return Nt(be,"shiftKey")?yt=ge("Shift-"+je,xe.extraKeys,xe.keyMap,function(jt){return gs(jt,!0)},Ht)||ge(je,xe.extraKeys,xe.keyMap,function(jt){if(typeof jt=="string"&&/^go[A-Z]/.test(jt))return gs(jt)},Ht):yt=ge(je,xe.extraKeys,xe.keyMap,gs,Ht),Et&&(yt=!1),yt&&(qe(be),Fn(),$e&&(be.oldKeyCode=be.keyCode,be.keyCode=0)),yt}function ra(be,Oe){var Xe=ge("'"+Oe+"'",xe.extraKeys,xe.keyMap,function(je){return gs(je,!0)});return Xe&&(qe(be),Fn()),Xe}var In=null;function pr(be){if(dr||Sn(),ze&&be.keyCode==27&&(be.returnValue=!1),Qn&&oa()&&(Qn=!1),!(xe.onKeyEvent&&xe.onKeyEvent(br,ke(be)))){var Oe=Nt(be,"keyCode");Xo(Oe==16||Nt(be,"shiftKey"));var Xe=Sa(be);nt&&(In=Xe?Oe:null,!Xe&&Oe==88&&Nt(be,M?"metaKey":"ctrlKey")&&Rn(""))}}function $a(be){if(Qn&&oa(),!(xe.onKeyEvent&&xe.onKeyEvent(br,ke(be)))){var Oe=Nt(be,"keyCode"),Xe=Nt(be,"charCode");if(nt&&Oe==In){In=null,qe(be);return}if(!((nt&&(!be.which||be.which<10)||Tt)&&Sa(be))){var je=String.fromCharCode(Xe??Oe);xe.electricChars&&Zi.electricChars&&xe.smartIndent&&!xe.readOnly&&Zi.electricChars.indexOf(je)>-1&&setTimeout(qi(function(){so(Dt.to.line,"smart")}),75),!ra(be,je)&&aa()}}}function Co(be){xe.onKeyEvent&&xe.onKeyEvent(br,ke(be))||Nt(be,"keyCode")==16&&(Yr=null)}function Sn(){xe.readOnly!="nocursor"&&(dr||(xe.onFocus&&xe.onFocus(br),dr=!0,Xt.className.search(/\bCodeMirror-focused\b/)==-1&&(Xt.className+=" CodeMirror-focused")),gn(),Fn())}function sa(){dr&&(xe.onBlur&&xe.onBlur(br),dr=!1,Zs&&qi(function(){Zs&&(Zs(),Zs=null)})(),Xt.className=Xt.className.replace(" CodeMirror-focused","")),clearInterval(Pr),setTimeout(function(){dr||(Yr=null)},150)}function Eo(be,Oe,Xe,je,yt){if(!Lr){var Et=[];if(pi.iter(be.line,Oe.line+1,function(jt){Et.push(w(jt.text,jt.markedSpans))}),Nr)for(Nr.addChange(be.line,Xe.length,Et);Nr.done.length>xe.undoDepth;)Nr.done.shift();var Ht=Yi(d(Et[0]),d(_i(Et)),be.ch,Oe.ch,Xe);Ko(be,Oe,Ht,je,yt)}}function To(be,Oe){if(be.length){for(var Xe=be.pop(),je=[],yt=Xe.length-1;yt>=0;yt-=1){var Et=Xe[yt],Ht=[],jt=Et.start+Et.added;pi.iter(Et.start,jt,function(Wt){Ht.push(w(Wt.text,Wt.markedSpans))}),je.push({start:Et.start,added:Et.old.length,old:Ht});var hi={line:Et.start+Et.old.length-1,ch:Tr(vi(_i(Ht)),vi(_i(Et.old)))};Ko({line:Et.start,ch:0},{line:jt-1,ch:er(jt-1).text.length},Et.old,hi,hi)}jr=!0,Oe.push(je)}}function na(){To(Nr.done,Nr.undone)}function pl(){To(Nr.undone,Nr.done)}function Ko(be,Oe,Xe,je,yt){if(Lr)return;var Et=!1,Ht=An.text.length;xe.lineWrapping||pi.iter(be.line,Oe.line+1,function(Ir){if(!Ir.hidden&&Ir.text.length==Ht)return Et=!0,!0}),(be.line!=Oe.line||Xe.length>1)&&(ys=!0);var jt=Oe.line-be.line,hi=er(be.line),Wt=er(Oe.line),Gi=_i(Xe);if(be.ch==0&&Oe.ch==0&&vi(Gi)==""){for(var zi=[],Oi=0,mr=Xe.length-1;Oi<mr;++Oi)zi.push(new W(vi(Xe[Oi]),d(Xe[Oi])));Wt.update(Wt.text,d(Gi)),jt&&pi.remove(be.line,jt,Os),zi.length&&pi.insert(be.line,zi)}else if(hi==Wt)if(Xe.length==1)hi.update(hi.text.slice(0,be.ch)+vi(Xe[0])+hi.text.slice(Oe.ch),d(Xe[0]));else{for(var zi=[],Oi=1,mr=Xe.length-1;Oi<mr;++Oi)zi.push(new W(vi(Xe[Oi]),d(Xe[Oi])));zi.push(new W(vi(Gi)+hi.text.slice(Oe.ch),d(Gi))),hi.update(hi.text.slice(0,be.ch)+vi(Xe[0]),d(Xe[0])),pi.insert(be.line+1,zi)}else if(Xe.length==1)hi.update(hi.text.slice(0,be.ch)+vi(Xe[0])+Wt.text.slice(Oe.ch),d(Xe[0])),pi.remove(be.line+1,jt,Os);else{var zi=[];hi.update(hi.text.slice(0,be.ch)+vi(Xe[0]),d(Xe[0])),Wt.update(vi(Gi)+Wt.text.slice(Oe.ch),d(Gi));for(var Oi=1,mr=Xe.length-1;Oi<mr;++Oi)zi.push(new W(vi(Xe[Oi]),d(Xe[Oi])));jt>1&&pi.remove(be.line+1,jt-1,Os),pi.insert(be.line+1,zi)}if(xe.lineWrapping){var ur=Math.max(5,Xt.clientWidth/Gn()-3);pi.iter(be.line,be.line+Xe.length,function(Ir){if(!Ir.hidden){var ws=Math.ceil(Ir.text.length/ur)||1;ws!=Ir.height&&As(Ir,ws)}})}else pi.iter(be.line,be.line+Xe.length,function(Ir){var ws=Ir.text;!Ir.hidden&&ws.length>Ht&&(An=Ir,Ht=ws.length,ja=!0,Et=!1)}),Et&&(ta=!0);_s=Math.min(_s,be.line),co(400);var vr=Xe.length-jt-1;if(ps.push({from:be.line,to:Oe.line+1,diff:vr}),xe.onChange){for(var Oi=0;Oi<Xe.length;++Oi)typeof Xe[Oi]!="string"&&(Xe[Oi]=Xe[Oi].text);var nr={from:be,to:Oe,text:Xe};if(cr){for(var Xi=cr;Xi.next;Xi=Xi.next);Xi.next=nr}else cr=nr}function Or(Ir){return Ir<=Math.min(Oe.line,Oe.line+vr)?Ir:Ir+vr}Da(yr(je),yr(yt),Or(Dt.from.line),Or(Dt.to.line))}function Go(){var be=pi.height*Bs()+2*Qa();return be*.99>Xt.offsetHeight?be:!1}function Io(be){var Oe=Go();_t.style.display=Oe?"block":"none",Oe?(st.style.height=Ki.style.minHeight=Oe+"px",_t.style.height=Xt.clientHeight+"px",be!=null&&(_t.scrollTop=Xt.scrollTop=be,ut&&setTimeout(function(){_t.scrollTop==be&&(_t.scrollTop=be+(be?-1:1),_t.scrollTop=be)},0))):Ki.style.minHeight="",hr.style.top=pn*Bs()+"px"}function Wo(){An=er(0),ja=!0;var be=An.text.length;pi.iter(1,pi.size,function(Oe){var Xe=Oe.text;!Oe.hidden&&Xe.length>be&&(be=Xe.length,An=Oe)}),ta=!1}function cn(be,Oe,Xe){Oe=yr(Oe),Xe?Xe=yr(Xe):Xe=Oe,be=$r(be);function je(Et){if(Zt(Et,Oe))return Et;if(!Zt(Xe,Et))return yt;var Ht=Et.line+be.length-(Xe.line-Oe.line)-1,jt=Et.ch;return Et.line==Xe.line&&(jt+=_i(be).length-(Xe.ch-(Xe.line==Oe.line?Oe.ch:0))),{line:Ht,ch:jt}}var yt;return Fa(be,Oe,Xe,function(Et){return yt=Et,{from:je(Dt.from),to:je(Dt.to)}}),yt}function Rn(be,Oe){Fa($r(be),Dt.from,Dt.to,function(Xe){return Oe=="end"?{from:Xe,to:Xe}:Oe=="start"?{from:Dt.from,to:Dt.from}:{from:Dt.from,to:Xe}})}function Fa(be,Oe,Xe,je){var yt=be.length==1?be[0].length+Oe.ch:_i(be).length,Et=je({line:Oe.line+be.length-1,ch:yt});Eo(Oe,Xe,be,Et.from,Et.to)}function eo(be,Oe,Xe){var je=be.line,yt=Oe.line;if(je==yt)return er(je).text.slice(be.ch,Oe.ch);var Et=[er(je).text.slice(be.ch)];return pi.iter(je+1,yt,function(Ht){Et.push(Ht.text)}),Et.push(er(yt).text.slice(0,Oe.ch)),Et.join(Xe||`
`)}function ka(be){return eo(Dt.from,Dt.to,be)}function gn(){Qn||bi.set(xe.pollInterval,function(){oa(),dr&&gn()})}function aa(){var be=!1;Qn=!0;function Oe(){var Xe=oa();!Xe&&!be?(be=!0,bi.set(60,Oe)):(Qn=!1,gn())}bi.set(20,Oe)}var Ds="";function oa(){if(!dr||it(Le)||xe.readOnly)return!1;var be=Le.value;if(be==Ds)return!1;Wn||da(),Yr=null;for(var Oe=0,Xe=Math.min(Ds.length,be.length);Oe<Xe&&Ds[Oe]==be[Oe];)++Oe;return Oe<Ds.length?Dt.from={line:Dt.from.line,ch:Dt.from.ch-(Ds.length-Oe)}:rr&&Wi(Dt.from,Dt.to)&&!sr&&(Dt.to={line:Dt.to.line,ch:Math.min(er(Dt.to.line).text.length,Dt.to.ch+(be.length-Oe))}),Rn(be.slice(Oe),"end"),be.length>1e3?Le.value=Ds="":Ds=be,Wn||Zo(),sr=!1,!0}function hn(be){Wi(Dt.from,Dt.to)?be&&(Ds=Le.value=""):(Ds="",Le.value=ka(),dr&&Ti(Le))}function Rs(){xe.readOnly!="nocursor"&&($e||document.activeElement!=Le)&&Le.focus()}function la(){var be=Hn();if(to(be.x,be.y,be.x,be.yBot),!!dr){var Oe=Ki.getBoundingClientRect(),Xe=null;if(be.y+Oe.top<0?Xe=!0:be.y+Oe.top+Bs()>(window.innerHeight||document.documentElement.clientHeight)&&(Xe=!1),Xe!=null){var je=ai.style.display=="none";je&&(ai.style.display="",ai.style.left=be.x+"px",ai.style.top=be.y-pn+"px"),ai.scrollIntoView(Xe),je&&(ai.style.display="none")}}}function Hn(){var be=xs(Dt.inverted?Dt.from:Dt.to),Oe=xe.lineWrapping?Math.min(be.x,ei.offsetWidth):be.x;return{x:Oe,y:be.y,yBot:be.yBot}}function to(be,Oe,Xe,je){var yt=io(be,Oe,Xe,je);yt.scrollLeft!=null&&(Xt.scrollLeft=yt.scrollLeft),yt.scrollTop!=null&&(_t.scrollTop=Xt.scrollTop=yt.scrollTop)}function io(be,Oe,Xe,je){var yt=lo(),Et=Qa();Oe+=Et,je+=Et,be+=yt,Xe+=yt;var Ht=Xt.clientHeight,jt=_t.scrollTop,hi={},Wt=Go()||1/0,Gi=Oe<Et+10,zi=je+Et>Wt-10;Oe<jt?hi.scrollTop=Gi?0:Math.max(0,Oe):je>jt+Ht&&(hi.scrollTop=(zi?Wt:je)-Ht);var Oi=Xt.clientWidth,mr=Xt.scrollLeft,ur=xe.fixedGutter?Qi.clientWidth:0,vr=be<ur+yt+10;return be<mr+ur||vr?(vr&&(be=0),hi.scrollLeft=Math.max(0,be-10-ur)):Xe>Oi+mr-3&&(hi.scrollLeft=Xe+10-Oi),hi}function gr(be){var Oe=Bs(),Xe=(be??_t.scrollTop)-Qa(),je=Math.max(0,Math.floor(Xe/Oe)),yt=Math.ceil((Xe+Xt.clientHeight)/Oe);return{from:Te(pi,je),to:Te(pi,yt)}}function Js(be,Oe,Xe){if(!Xt.clientWidth){Qr=es=pn=0;return}var je=gr(Xe);if(be!==!0&&be.length==0&&je.from>Qr&&je.to<es){Io(Xe);return}var yt=Math.max(je.from-100,0),Et=Math.min(pi.size,je.to+100);Qr<yt&&yt-Qr<20&&(yt=Qr),es>Et&&es-Et<20&&(Et=Math.min(pi.size,es));for(var Ht=be===!0?[]:gl([{from:Qr,to:es,domStart:0}],be),jt=0,hi=0;hi<Ht.length;++hi){var Wt=Ht[hi];Wt.from<yt&&(Wt.domStart+=yt-Wt.from,Wt.from=yt),Wt.to>Et&&(Wt.to=Et),Wt.from>=Wt.to?Ht.splice(hi--,1):jt+=Wt.to-Wt.from}if(jt==Et-yt&&yt==Qr&&Et==es){Io(Xe);return}Ht.sort(function(ur,vr){return ur.domStart-vr.domStart});var Gi=Bs(),zi=Qi.style.display;xt.style.display="none",qo(yt,Et,Ht),xt.style.display=Qi.style.display="";var Oi=yt!=Qr||Et!=es||xo!=Xt.clientHeight+Gi;if(Oi&&(xo=Xt.clientHeight+Gi),(yt!=Qr||Et!=es&&xe.onViewportChange)&&setTimeout(function(){xe.onViewportChange&&xe.onViewportChange(br,yt,Et)}),Qr=yt,es=Et,pn=Ve(pi,yt),co(100),xt.childNodes.length!=es-Qr)throw new Error("BAD PATCH! "+JSON.stringify(Ht)+" size="+(es-Qr)+" nodes="+xt.childNodes.length);function mr(){var ur=xt.firstChild,vr=!1;return pi.iter(Qr,es,function(nr){if(ur){if(!nr.hidden){var Xi=Math.round(ur.offsetHeight/Gi)||1;nr.height!=Xi&&(As(nr,Xi),ys=vr=!0)}ur=ur.nextSibling}}),vr}return xe.lineWrapping&&mr(),Qi.style.display=zi,(Oi||ys)&&mn()&&xe.lineWrapping&&mr()&&mn(),Io(Xe),So(),!Oe&&xe.onUpdate&&xe.onUpdate(br),!0}function gl(be,Oe){for(var Xe=0,je=Oe.length||0;Xe<je;++Xe){for(var yt=Oe[Xe],Et=[],Ht=yt.diff||0,jt=0,hi=be.length;jt<hi;++jt){var Wt=be[jt];yt.to<=Wt.from&&yt.diff?Et.push({from:Wt.from+Ht,to:Wt.to+Ht,domStart:Wt.domStart}):yt.to<=Wt.from||yt.from>=Wt.to?Et.push(Wt):(yt.from>Wt.from&&Et.push({from:Wt.from,to:yt.from,domStart:Wt.domStart}),yt.to<Wt.to&&Et.push({from:yt.to+Ht,to:Wt.to+Ht,domStart:Wt.domStart+(yt.to-Wt.from)}))}be=Et}return be}function qo(be,Oe,Xe){function je(zi){var Oi=zi.nextSibling;return zi.parentNode.removeChild(zi),Oi}if(!Xe.length)$i(xt);else{for(var yt=0,Wt=xt.firstChild,Et=0;Et<Xe.length;++Et){for(var Ht=Xe[Et];Ht.domStart>yt;)Wt=je(Wt),yt++;for(var Gi=0,jt=Ht.to-Ht.from;Gi<jt;++Gi)Wt=Wt.nextSibling,yt++}for(;Wt;)Wt=je(Wt)}var hi=Xe.shift(),Wt=xt.firstChild,Gi=be;pi.iter(be,Oe,function(zi){if(hi&&hi.to==Gi&&(hi=Xe.shift()),!hi||hi.from>Gi){if(zi.hidden)var Oi=wi("pre");else{var Oi=ia(zi);if(zi.className&&(Oi.className=zi.className),zi.bgClassName){var mr=wi("pre","Â ",zi.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");Oi=wi("div",[mr,Oi],null,"position: relative")}}xt.insertBefore(Oi,Wt)}else Wt=Wt.nextSibling;++Gi})}function mn(){if(!(!xe.gutter&&!xe.lineNumbers)){var be=hr.offsetHeight,Oe=Xt.clientHeight;Qi.style.height=(be-Oe<2?Oe:be)+"px";var Xe=document.createDocumentFragment(),je=Qr,yt;if(pi.iter(Qr,Math.max(es,Qr+1),function(Gi){if(Gi.hidden)Xe.appendChild(wi("pre"));else{var zi=Gi.gutterMarker,Oi=xe.lineNumbers?xe.lineNumberFormatter(je+xe.firstLineNumber):null;zi&&zi.text?Oi=zi.text.replace("%N%",Oi??""):Oi==null&&(Oi="Â ");var mr=Xe.appendChild(wi("pre",null,zi&&zi.style));mr.innerHTML=Oi;for(var ur=1;ur<Gi.height;++ur)mr.appendChild(wi("br")),mr.appendChild(document.createTextNode("Â "));zi||(yt=je)}++je}),Qi.style.display="none",tr(Ui,Xe),yt!=null&&xe.lineNumbers){for(var Et=Ui.childNodes[yt-Qr],Ht=String(pi.size).length,jt=Hi(Et.firstChild),hi="";jt.length+hi.length<Ht;)hi+="Â ";hi&&Et.insertBefore(document.createTextNode(hi),Et.firstChild)}Qi.style.display="";var Wt=Math.abs((parseInt(ei.style.marginLeft)||0)-Qi.offsetWidth)>2;return ei.style.marginLeft=Qi.offsetWidth+"px",ys=!1,Wt}}function So(){var be=Wi(Dt.from,Dt.to),Oe=xs(Dt.from,!0),Xe=be?Oe:xs(Dt.to,!0),je=Dt.inverted?Oe:Xe,yt=Bs(),Et=ii(wr),Ht=ii(xt);if(Ke.style.top=Math.max(0,Math.min(Xt.offsetHeight,je.y+Ht.top-Et.top))+"px",Ke.style.left=Math.max(0,Math.min(Xt.offsetWidth,je.x+Ht.left-Et.left))+"px",be||xe.showCursorWhenSelecting?(ai.style.top=je.y+"px",ai.style.left=(xe.lineWrapping?Math.min(je.x,ei.offsetWidth):je.x)+"px",ai.style.display=""):ai.style.display="none",be)kt.style.display="none";else{var jt=Oe.y==Xe.y,hi=document.createDocumentFragment(),Wt=ei.clientWidth||ei.offsetWidth,Gi=ei.clientHeight||ei.offsetHeight,zi=function(vr,nr,Xi,Or){var Ir=We?"width: "+(Xi?Wt-Xi-vr:Wt)+"px":"right: "+(Xi-1)+"px";hi.appendChild(wi("div",null,"CodeMirror-selected","position: absolute; left: "+vr+"px; top: "+nr+"px; "+Ir+"; height: "+Or+"px"))};if(Dt.from.ch&&Oe.y>=0){var Oi=jt?Wt-Xe.x:0;zi(Oe.x,Oe.y,Oi,yt)}var mr=Math.max(0,Oe.y+(Dt.from.ch?yt:0)),ur=Math.min(Xe.y,Gi)-mr;ur>.2*yt&&zi(0,mr,0,ur),(!jt||!Dt.from.ch)&&Xe.y<Gi-.5*yt&&zi(0,Xe.y,Wt-Xe.x,yt),tr(kt,hi),kt.style.display=""}}function Xo(be){be?Yr=Yr||(Dt.inverted?Dt.to:Dt.from):Yr=null}function Hs(be,Oe){var Xe=Yr&&yr(Yr);Xe&&(Zt(Xe,be)?be=Xe:Zt(Oe,Xe)&&(Oe=Xe)),Da(be,Oe),ss=!0}function Da(be,Oe,Xe,je){if(ba=null,Xe==null&&(Xe=Dt.from.line,je=Dt.to.line),!(Wi(Dt.from,be)&&Wi(Dt.to,Oe))){if(Zt(Oe,be)){var yt=Oe;Oe=be,be=yt}if(be.line!=Xe){var Et=Ur(be,Xe,Dt.from.ch);Et?be=Et:Aa(be.line,!1)}if(Oe.line!=je&&(Oe=Ur(Oe,je,Dt.to.ch)),Wi(be,Oe)||Wi(be,Dt.to)?Dt.inverted=!1:Wi(Oe,Dt.from)&&(Dt.inverted=!0),xe.autoClearEmptyLines&&Wi(Dt.from,Dt.to)){var Ht=Dt.inverted?be:Oe;if(Ht.line!=Dt.from.line&&Dt.from.line<pi.size){var jt=er(Dt.from.line);/^\s+$/.test(jt.text)&&setTimeout(qi(function(){if(jt.parent&&/^\s+$/.test(jt.text)){var hi=we(jt);cn("",{line:hi,ch:0},{line:hi,ch:jt.text.length})}}))}}Dt.from=be,Dt.to=Oe,js=!0}}function Ur(be,Oe,Xe){function je(Ht){for(var jt=be.line+Ht,hi=Ht==1?pi.size:-1;jt!=hi;){var Wt=er(jt);if(!Wt.hidden){var Gi=be.ch;return(Et||Gi>Xe||Gi>Wt.text.length)&&(Gi=Wt.text.length),{line:jt,ch:Gi}}jt+=Ht}}var yt=er(be.line),Et=be.ch==yt.text.length&&be.ch!=Xe;return yt.hidden?be.line>=Oe?je(1)||je(-1):je(-1)||je(1):be}function $s(be,Oe,Xe){var je=yr({line:be,ch:Oe||0});(Xe?Hs:Da)(je,je)}function Ji(be){return Math.max(0,Math.min(be,pi.size-1))}function yr(be){if(be.line<0)return{line:0,ch:0};if(be.line>=pi.size)return{line:pi.size-1,ch:er(pi.size-1).text.length};var Oe=be.ch,Xe=er(be.line).text.length;return Oe==null||Oe>Xe?{line:be.line,ch:Xe}:Oe<0?{line:be.line,ch:0}:be}function Fr(be,Oe){var Xe=Dt.inverted?Dt.from:Dt.to,je=Xe.line,yt=Xe.ch,Et=er(je);function Ht(){for(var Wt=je+be,Gi=be<0?-1:pi.size;Wt!=Gi;Wt+=be){var zi=er(Wt);if(!zi.hidden)return je=Wt,Et=zi,!0}}function jt(Wt){if(yt==(be<0?0:Et.text.length))if(!Wt&&Ht())yt=be<0?Et.text.length:0;else return!1;else yt+=be;return!0}if(Oe=="char")jt();else if(Oe=="column")jt(!0);else if(Oe=="word")for(var hi=!1;!(be<0&&!jt());){if(Qs(Et.text.charAt(yt)))hi=!0;else if(hi){be<0&&(be=1,jt());break}if(be>0&&!jt())break}return{line:je,ch:yt}}function Mr(be,Oe){var Xe=be<0?Dt.from:Dt.to;(Yr||Wi(Dt.from,Dt.to))&&(Xe=Fr(be,Oe)),$s(Xe.line,Xe.ch,!0)}function zn(be,Oe){Wi(Dt.from,Dt.to)?be<0?cn("",Fr(be,Oe),Dt.to):cn("",Dt.from,Fr(be,Oe)):cn("",Dt.from,Dt.to),ss=!0}function Ua(be,Oe){var Xe=xs(Dt.inverted?Dt.from:Dt.to,!0);if(ba!=null&&(Xe.x=ba),Oe=="page")var je=Math.min(Xt.clientHeight,window.innerHeight||document.documentElement.clientHeight),yt=Kn(Xe.x,Xe.y+je*be);else if(Oe=="line")var Et=Bs(),yt=Kn(Xe.x,Xe.y+.5*Et+be*Et);Oe=="page"&&(_t.scrollTop+=xs(yt,!0).y-Xe.y),$s(yt.line,yt.ch,!0),ba=Xe.x}function ro(be){var Oe=er(be.line).text,Xe=be.ch,je=be.ch;if(Oe){be.after===!1||je==Oe.length?--Xe:++je;for(var yt=Oe.charAt(Xe),Et=Qs(yt)?Qs:/\s/.test(yt)?function(Ht){return/\s/.test(Ht)}:function(Ht){return!/\s/.test(Ht)&&Qs(Ht)};Xe>0&&Et(Oe.charAt(Xe-1));)--Xe;for(;je<Oe.length&&Et(Oe.charAt(je));)++je}return{from:{line:be.line,ch:Xe},to:{line:be.line,ch:je}}}function ml(be){Hs({line:be,ch:0},yr({line:be+1,ch:0}))}function Fo(be){if(Wi(Dt.from,Dt.to))return so(Dt.from.line,be);for(var Oe=Dt.to.line-(Dt.to.ch?0:1),Xe=Dt.from.line;Xe<=Oe;++Xe)so(Xe,be)}function so(be,Oe){if(Oe||(Oe="add"),Oe=="smart")if(!Zi.indent)Oe="prev";else var Xe=Ms(be);var je=er(be),yt=je.indentation(xe.tabSize),Et=je.text.match(/^\s*/)[0],Ht;Oe=="smart"&&(Ht=Zi.indent(Xe,je.text.slice(Et.length),je.text),Ht==ri&&(Oe="prev")),Oe=="prev"?be?Ht=er(be-1).indentation(xe.tabSize):Ht=0:Oe=="add"?Ht=yt+xe.indentUnit:Oe=="subtract"&&(Ht=yt-xe.indentUnit),Ht=Math.max(0,Ht);var jt="",hi=0;if(xe.indentWithTabs)for(var Wt=Math.floor(Ht/xe.tabSize);Wt;--Wt)hi+=xe.tabSize,jt+="	";hi<Ht&&(jt+=Ot(Ht-hi)),jt!=Et&&cn(jt,{line:be,ch:0},{line:be,ch:Et.length}),je.stateAfter=null}function no(){Zi=g.getMode(xe,xe.mode),pi.iter(0,pi.size,function(be){be.stateAfter=null}),_s=0,co(100)}function Ma(){var be=xe.gutter||xe.lineNumbers;Qi.style.display=be?"":"none",be?ys=!0:xt.parentNode.style.marginLeft=0}function ao(be,Oe){if(xe.lineWrapping){wr.className+=" CodeMirror-wrap";var Xe=Xt.clientWidth/Gn()-3;pi.iter(0,pi.size,function(je){if(!je.hidden){var yt=Math.ceil(je.text.length/Xe)||1;yt!=1&&As(je,yt)}}),ei.style.minWidth=Di.style.left=""}else wr.className=wr.className.replace(" CodeMirror-wrap",""),Wo(),pi.iter(0,pi.size,function(je){je.height!=1&&!je.hidden&&As(je,1)});ps.push({from:0,to:pi.size})}function oo(){Xt.className=Xt.className.replace(/\s*cm-s-\S+/g,"")+xe.theme.replace(/(^|\s)\s*/g," cm-s-")}function Pa(){var be=Ae[xe.keyMap].style;wr.className=wr.className.replace(/\s*cm-keymap-\S+/g,"")+(be?" cm-keymap-"+be:"")}function Nn(be,Oe){this.lines=[],this.type=be,Oe&&(this.style=Oe)}Nn.prototype.clear=qi(function(){for(var be,Oe,Xe=0;Xe<this.lines.length;++Xe){var je=this.lines[Xe],yt=Ai(je.markedSpans,this);yt.from!=null&&(be=we(je)),yt.to!=null&&(Oe=we(je)),je.markedSpans=Ri(je.markedSpans,yt)}be!=null&&ps.push({from:be,to:Oe+1}),this.lines.length=0,this.explicitlyCleared=!0}),Nn.prototype.find=function(){for(var be,Oe,Xe=0;Xe<this.lines.length;++Xe){var je=this.lines[Xe],yt=Ai(je.markedSpans,this);if(yt.from!=null||yt.to!=null){var Et=we(je);yt.from!=null&&(be={line:Et,ch:yt.from}),yt.to!=null&&(Oe={line:Et,ch:yt.to})}}return this.type=="bookmark"?be:be&&{from:be,to:Oe}};function La(be,Oe,Xe,je){be=yr(be),Oe=yr(Oe);var yt=new Nn("range",Xe);if(je)for(var Et in je)je.hasOwnProperty(Et)&&(yt[Et]=je[Et]);var Ht=be.line;return pi.iter(Ht,Oe.line+1,function(jt){var hi={from:Ht==be.line?be.ch:null,to:Ht==Oe.line?Oe.ch:null,marker:yt};jt.markedSpans=(jt.markedSpans||[]).concat([hi]),yt.lines.push(jt),++Ht}),ps.push({from:be.line,to:Oe.line+1}),yt}function _l(be){be=yr(be);var Oe=new Nn("bookmark"),Xe=er(be.line);Nr.addChange(be.line,1,[w(Xe.text,Xe.markedSpans)],!0);var je={from:be.ch,to:be.ch,marker:Oe};return Xe.markedSpans=(Xe.markedSpans||[]).concat([je]),Oe.lines.push(Xe),Oe}function Yo(be){be=yr(be);var Oe=[],Xe=er(be.line).markedSpans;if(Xe)for(var je=0;je<Xe.length;++je){var yt=Xe[je];(yt.from==null||yt.from<=be.ch)&&(yt.to==null||yt.to>=be.ch)&&Oe.push(yt.marker)}return Oe}function Wr(be,Oe,Xe){return typeof be=="number"&&(be=er(Ji(be))),be.gutterMarker={text:Oe,style:Xe},ys=!0,be}function Vn(be){typeof be=="number"&&(be=er(Ji(be))),be.gutterMarker=null,ys=!0}function Us(be,Oe){var Xe=be,je=be;if(typeof be=="number"?je=er(Ji(be)):Xe=we(be),Xe==null)return null;if(Oe(je,Xe))ps.push({from:Xe,to:Xe+1});else return null;return je}function ko(be,Oe,Xe){return Us(be,function(je){if(je.className!=Oe||je.bgClassName!=Xe)return je.className=Oe,je.bgClassName=Xe,!0})}function Aa(be,Oe){return Us(be,function(Xe,je){if(Xe.hidden!=Oe){Xe.hidden=Oe,xe.lineWrapping||(Oe&&Xe.text.length==An.text.length?ta=!0:!Oe&&Xe.text.length>An.text.length&&(An=Xe,ta=!1)),As(Xe,Oe?0:1);var yt=Dt.from.line,Et=Dt.to.line;if(Oe&&(yt==je||Et==je)){var Ht=yt==je?Ur({line:yt,ch:0},yt,0):Dt.from,jt=Et==je?Ur({line:Et,ch:0},Et,0):Dt.to;if(!jt)return;Da(Ht,jt)}return ys=!0}})}function Do(be){if(typeof be=="number"){if(!Tn(be))return null;var Oe=be;if(be=er(be),!be)return null}else{var Oe=we(be);if(Oe==null)return null}var Xe=be.gutterMarker;return{line:Oe,handle:be,text:be.text,markerText:Xe&&Xe.text,markerClass:Xe&&Xe.style,lineClass:be.className,bgClass:be.bgClassName}}function en(be,Oe){if(Oe==0)return{top:0,left:0};var Xe=ia(be,Oe);tr(ni,Xe);var je=Xe.anchor,yt=je.offsetTop,Et=je.offsetLeft;if(ze&&yt==0&&Et==0){var Ht=wi("span","x");je.parentNode.insertBefore(Ht,je.nextSibling),yt=Ht.offsetTop}return{top:yt,left:Et}}function xs(be,Oe){var Xe,je=Bs(),yt=je*(Ve(pi,be.line)-(Oe?pn:0));if(be.ch==0)Xe=0;else{var Et=en(er(be.line),be.ch);Xe=Et.left,xe.lineWrapping&&(yt+=Math.max(0,Et.top))}return{x:Xe,y:yt,yBot:yt+je}}function Kn(be,Oe){var Xe=Bs(),je=Gn(),yt=pn+Math.floor(Oe/Xe);if(yt<0)return{line:0,ch:0};var Et=Te(pi,yt);if(Et>=pi.size)return{line:pi.size-1,ch:er(pi.size-1).text.length};var Ht=er(Et),jt=Ht.text,hi=xe.lineWrapping,Wt=hi?yt-Ve(pi,Et):0;if(be<=0&&Wt==0)return{line:Et,ch:0};var Gi=!1;function zi(Ha){var pa=en(Ht,Ha);if(hi){var ns=Math.round(pa.top/Xe);return Gi=ns!=Wt,Math.max(0,pa.left+(ns-Wt)*Xt.clientWidth)}return pa.left}for(var Oi=0,mr=0,ur=jt.length,vr,nr=Math.min(ur,Math.ceil((be+Wt*Xt.clientWidth*.9)/je));;){var Xi=zi(nr);if(Xi<=be&&nr<ur)nr=Math.min(ur,Math.ceil(nr*1.2));else{vr=Xi,ur=nr;break}}if(be>vr)return{line:Et,ch:ur};for(nr=Math.floor(ur*.8),Xi=zi(nr),Xi<be&&(Oi=nr,mr=Xi);;){if(ur-Oi<=1){var Or=be-mr<vr-be;return{line:Et,ch:Or?Oi:ur,after:Or}}var Ir=Math.ceil((Oi+ur)/2),ws=zi(Ir);ws>be?(ur=Ir,vr=ws,Gi&&(vr+=1e3)):(Oi=Ir,mr=ws)}}function jo(be){var Oe=xs(be,!0),Xe=ii(ei);return{x:Xe.left+Oe.x,y:Xe.top+Oe.y,yBot:Xe.top+Oe.yBot}}var ca,ha,_n;function Bs(){if(_n==null){_n=wi("pre");for(var be=0;be<49;++be)_n.appendChild(document.createTextNode("x")),_n.appendChild(wi("br"));_n.appendChild(document.createTextNode("x"))}var Oe=xt.clientHeight;return Oe==ha||(ha=Oe,tr(ni,_n.cloneNode(!0)),ca=ni.firstChild.offsetHeight/50||1,$i(ni)),ca}var yn,Uo=0;function Gn(){if(Xt.clientWidth==Uo)return yn;Uo=Xt.clientWidth;var be=wi("span","x"),Oe=wi("pre",[be]);return tr(ni,Oe),yn=be.offsetWidth||10}function Qa(){return ei.offsetTop}function lo(){return ei.offsetLeft}function ua(be,Oe){var Xe=ii(Xt,!0),je,yt;try{je=be.clientX,yt=be.clientY}catch{return null}if(!Oe&&(je-Xe.left>Xt.clientWidth||yt-Xe.top>Xt.clientHeight))return null;var Et=ii(ei,!0);return Kn(je-Et.left,yt-Et.top)}var Ao;function fa(be){var Oe=ua(be),Xe=_t.scrollTop;if(!Oe||nt)return;(Wi(Dt.from,Dt.to)||Zt(Oe,Dt.from)||!Zt(Oe,Dt.to))&&qi($s)(Oe.line,Oe.ch);var je=Le.style.cssText;Ke.style.position="absolute",Le.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(be.clientY-5)+"px; left: "+(be.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Rs(),hn(!0),Wi(Dt.from,Dt.to)&&(Le.value=Ds=" ");function yt(){if(Ke.style.position="relative",Le.style.cssText=je,$e&&(_t.scrollTop=Xe),gn(),Le.selectionStart!=null){clearTimeout(Ao);var Ht=Le.value=" "+(Wi(Dt.from,Dt.to)?"":Le.value),jt=0;Ds=" ",Le.selectionStart=1,Le.selectionEnd=Ht.length,Ao=setTimeout(function hi(){Ds==" "&&Le.selectionStart==0?qi(ne.selectAll)(br):jt++<10?Ao=setTimeout(hi,500):hn()},200)}}if(Ue){pt(be);var Et=Mt(window,"mouseup",function(){Et(),setTimeout(yt,20)},!0)}else setTimeout(yt,50)}function Fn(){clearInterval(Pr);var be=!0;ai.style.visibility="",Pr=setInterval(function(){ai.style.visibility=(be=!be)?"":"hidden"},xe.cursorBlinkRate)}var vs={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function qr(be){var Oe=Dt.inverted?Dt.from:Dt.to,Xe=er(Oe.line),je=Oe.ch-1,yt=je>=0&&vs[Xe.text.charAt(je)]||vs[Xe.text.charAt(++je)];if(!yt)return;yt.charAt(0);for(var Et=yt.charAt(1)==">",Ht=Et?1:-1,jt=Xe.styles,hi=je+1,Wt=0,Gi=jt.length;Wt<Gi;Wt+=2)if((hi-=jt[Wt].length)<=0){var nr=jt[Wt+1];break}var zi=[Xe.text.charAt(je)],Oi=/[(){}[\]]/;function mr(ws,Ha,pa){if(ws.text)for(var ns=ws.styles,Er=Et?0:ws.text.length-1,ga,vn=Et?0:ns.length-2,Jo=Et?ns.length:-2;vn!=Jo;vn+=2*Ht){var qn=ns[vn];if(ns[vn+1]!=nr){Er+=Ht*qn.length;continue}for(var ho=Et?0:qn.length-1,yl=Et?qn.length:-1;ho!=yl;ho+=Ht,Er+=Ht)if(Er>=Ha&&Er<pa&&Oi.test(ga=qn.charAt(ho))){var zs=vs[ga];if(zs.charAt(1)==">"==Et)zi.push(ga);else{if(zi.pop()!=zs.charAt(0))return{pos:Er,match:!1};if(!zi.length)return{pos:Er,match:!0}}}}}for(var Wt=Oe.line,Gi=Et?Math.min(Wt+100,pi.size):Math.max(-1,Wt-100);Wt!=Gi;Wt+=Ht){var Xe=er(Wt),ur=Wt==Oe.line,vr=mr(Xe,ur&&Et?je+1:0,ur&&!Et?je:Xe.text.length);if(vr)break}vr||(vr={pos:null,match:!1});var nr=vr.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",Xi=La({line:Oe.line,ch:je},{line:Oe.line,ch:je+1},nr),Or=vr.pos!=null&&La({line:Wt,ch:vr.pos},{line:Wt,ch:vr.pos+1},nr),Ir=qi(function(){Xi.clear(),Or&&Or.clear()});be?setTimeout(Ir,800):Zs=Ir}function Oa(be){for(var Oe,Xe,je=be,yt=be-40;je>yt;--je){if(je==0)return 0;var Et=er(je-1);if(Et.stateAfter)return je;var Ht=Et.indentation(xe.tabSize);(Xe==null||Oe>Ht)&&(Xe=je-1,Oe=Ht)}return Xe}function Ms(be){var Oe=Oa(be),Xe=Oe&&er(Oe-1).stateAfter;return Xe?Xe=Ut(Zi,Xe):Xe=Pt(Zi),pi.iter(Oe,be,function(je){je.process(Zi,Xe,xe.tabSize),je.stateAfter=Oe==be-1||Oe%5==0?Ut(Zi,Xe):null}),Xe}function Ra(){if(!(_s>=es)){var be=+new Date+xe.workTime,Oe=Ut(Zi,Ms(_s)),Xe=_s;pi.iter(_s,es,function(je){if(_s>=Qr?(je.highlight(Zi,Oe,xe.tabSize),je.stateAfter=Ut(Zi,Oe)):(je.process(Zi,Oe,xe.tabSize),je.stateAfter=_s%5==0?Ut(Zi,Oe):null),++_s,+new Date>be)return co(xe.workDelay),!0}),es>Xe&&_s>=Qr&&qi(function(){ps.push({from:Xe,to:_s})})()}}function co(be){_s<es&&Sr.set(be,Ra)}function da(){jr=ss=cr=null,ps=[],js=!1,Os=[]}function Zo(){if(ta&&Wo(),ja&&!xe.lineWrapping){var be=Di.offsetWidth,Oe=en(An,An.text.length).left;Re||(Di.style.left=Oe+"px",ei.style.minWidth=Oe+be+"px"),ja=!1}var Xe,je;if(js){var yt=Hn();Xe=io(yt.x,yt.y,yt.x,yt.yBot)}(ps.length||Xe&&Xe.scrollTop!=null)&&(je=Js(ps,!0,Xe&&Xe.scrollTop)),je||(js&&So(),ys&&mn()),Xe&&la(),js&&Fn(),dr&&(jr===!0||jr!==!1&&js)&&hn(ss),js&&xe.matchBrackets&&setTimeout(qi(function(){Zs&&(Zs(),Zs=null),Wi(Dt.from,Dt.to)&&qr(!1)}),20);var Et=js,Ht=Os;cr&&xe.onChange&&br&&xe.onChange(br,cr),Et&&xe.onCursorActivity&&xe.onCursorActivity(br);for(var jt=0;jt<Ht.length;++jt)Ht[jt](br);je&&xe.onUpdate&&xe.onUpdate(br)}var Wn=0;function qi(be){return function(){Wn++||da();try{var Oe=be.apply(this,arguments)}finally{--Wn||Zo()}return Oe}}function tn(be){Nr.startCompound();try{return be()}finally{Nr.endCompound()}}for(var gi in Y)Y.propertyIsEnumerable(gi)&&!br.propertyIsEnumerable(gi)&&(br[gi]=Y[gi]);for(var kn=0;kn<re.length;++kn)re[kn](br);return br}g.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,showCursorWhenSelecting:!1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(ce){return ce}};var B=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),M=B||/Mac/.test(navigator.platform),P=g.modes={},K=g.mimeModes={};g.defineMode=function(ce,ye){if(!g.defaults.mode&&ce!="null"&&(g.defaults.mode=ce),arguments.length>2){ye.dependencies=[];for(var xe=2;xe<arguments.length;++xe)ye.dependencies.push(arguments[xe])}P[ce]=ye},g.defineMIME=function(ce,ye){K[ce]=ye},g.resolveMode=function(ce){if(typeof ce=="string"&&K.hasOwnProperty(ce))ce=K[ce];else if(typeof ce=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(ce))return g.resolveMode("application/xml");return typeof ce=="string"?{name:ce}:ce||{name:"null"}},g.getMode=function(ce,xe){var xe=g.resolveMode(xe),Me=P[xe.name];if(!Me)return g.getMode(ce,"text/plain");var Ge=Me(ce,xe);if(D.hasOwnProperty(xe.name)){var Le=D[xe.name];for(var Ke in Le)Le.hasOwnProperty(Ke)&&(Ge.hasOwnProperty(Ke)&&(Ge["_"+Ke]=Ge[Ke]),Ge[Ke]=Le[Ke])}return Ge.name=xe.name,Ge},g.listModes=function(){var ce=[];for(var ye in P)P.propertyIsEnumerable(ye)&&ce.push(ye);return ce},g.listMIMEs=function(){var ce=[];for(var ye in K)K.propertyIsEnumerable(ye)&&ce.push({mime:ye,mode:K[ye]});return ce};var Y=g.extensions={};g.defineExtension=function(ce,ye){Y[ce]=ye};var re=[];g.defineInitHook=function(ce){re.push(ce)};var D=g.modeExtensions={};g.extendMode=function(ce,ye){var xe=D.hasOwnProperty(ce)?D[ce]:D[ce]={};for(var Me in ye)ye.hasOwnProperty(Me)&&(xe[Me]=ye[Me])};var ne=g.commands={selectAll:function(ce){ce.setSelection({line:0,ch:0},{line:ce.lineCount()-1})},killLine:function(ce){var ye=ce.getCursor(!0),xe=ce.getCursor(!1),Me=!Wi(ye,xe);!Me&&ce.getLine(ye.line).length==ye.ch?ce.replaceRange("",ye,{line:ye.line+1,ch:0}):ce.replaceRange("",ye,Me?xe:{line:ye.line})},deleteLine:function(ce){var ye=ce.getCursor().line;ce.replaceRange("",{line:ye,ch:0},{line:ye})},undo:function(ce){ce.undo()},redo:function(ce){ce.redo()},goDocStart:function(ce){ce.setCursor(0,0,!0)},goDocEnd:function(ce){ce.setSelection({line:ce.lineCount()-1},null,!0)},goLineStart:function(ce){ce.setCursor(ce.getCursor().line,0,!0)},goLineStartSmart:function(ce){var ye=ce.getCursor(),xe=ce.getLine(ye.line),Me=Math.max(0,xe.search(/\S/));ce.setCursor(ye.line,ye.ch<=Me&&ye.ch?0:Me,!0)},goLineEnd:function(ce){ce.setSelection({line:ce.getCursor().line},null,!0)},goLineUp:function(ce){ce.moveV(-1,"line")},goLineDown:function(ce){ce.moveV(1,"line")},goPageUp:function(ce){ce.moveV(-1,"page")},goPageDown:function(ce){ce.moveV(1,"page")},goCharLeft:function(ce){ce.moveH(-1,"char")},goCharRight:function(ce){ce.moveH(1,"char")},goColumnLeft:function(ce){ce.moveH(-1,"column")},goColumnRight:function(ce){ce.moveH(1,"column")},goWordLeft:function(ce){ce.moveH(-1,"word")},goWordRight:function(ce){ce.moveH(1,"word")},delCharLeft:function(ce){ce.deleteH(-1,"char")},delCharRight:function(ce){ce.deleteH(1,"char")},delWordLeft:function(ce){ce.deleteH(-1,"word")},delWordRight:function(ce){ce.deleteH(1,"word")},indentAuto:function(ce){ce.indentSelection("smart")},indentMore:function(ce){ce.indentSelection("add")},indentLess:function(ce){ce.indentSelection("subtract")},insertTab:function(ce){ce.replaceSelection("	","end")},defaultTab:function(ce){ce.somethingSelected()?ce.indentSelection("add"):ce.replaceSelection("	","end")},transposeChars:function(ce){var ye=ce.getCursor(),xe=ce.getLine(ye.line);ye.ch>0&&ye.ch<xe.length-1&&ce.replaceRange(xe.charAt(ye.ch)+xe.charAt(ye.ch-1),{line:ye.line,ch:ye.ch-1},{line:ye.line,ch:ye.ch+1})},newlineAndIndent:function(ce){ce.replaceSelection(`
`,"end"),ce.indentLine(ce.getCursor().line)},toggleOverwrite:function(ce){ce.toggleOverwrite()}},Ae=g.keyMap={};Ae.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Ae.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Ae.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},Ae.default=M?Ae.macDefault:Ae.pcDefault,Ae.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function fe(ce){return typeof ce=="string"?Ae[ce]:ce}function ge(ce,ye,xe,Me,Ge){function Le(Ke){Ke=fe(Ke);var st=Ke[ce];if(st===!1)return Ge&&Ge(),!0;if(st!=null&&Me(st))return!0;if(Ke.nofallthrough)return Ge&&Ge(),!0;var _t=Ke.fallthrough;if(_t==null)return!1;if(Object.prototype.toString.call(_t)!="[object Array]")return Le(_t);for(var xt=0,kt=_t.length;xt<kt;++xt)if(Le(_t[xt]))return!0;return!1}return ye&&Le(ye)?!0:Le(xe)}function Be(ce){var ye=Se[Nt(ce,"keyCode")];return ye=="Ctrl"||ye=="Alt"||ye=="Shift"||ye=="Mod"}g.isModifierKey=Be,g.fromTextArea=function(ce,ye){if(ye||(ye={}),ye.value=ce.value,!ye.tabindex&&ce.tabindex&&(ye.tabindex=ce.tabindex),ye.autofocus==null){var xe=document.body;try{xe=document.activeElement}catch{}ye.autofocus=xe==ce||ce.getAttribute("autofocus")!=null&&xe==document.body}function Me(){ce.value=st.getValue()}if(ce.form){var Ge=Mt(ce.form,"submit",Me,!0),Le=ce.form,Ke=Le.submit;ce.form.submit=function _t(){Me(),Le.submit=Ke,Le.submit(),Le.submit=_t}}ce.style.display="none";var st=g(function(_t){ce.parentNode.insertBefore(_t,ce.nextSibling)},ye);return st.save=Me,st.getTextArea=function(){return ce},st.toTextArea=function(){Me(),ce.parentNode.removeChild(st.getWrapperElement()),ce.style.display="",ce.form&&(Ge(),typeof ce.form.submit=="function"&&(ce.form.submit=Ke))},st};var Ue=/gecko\/\d/i.test(navigator.userAgent),ze=/MSIE \d/.test(navigator.userAgent),Re=/MSIE [1-7]\b/.test(navigator.userAgent),$e=/MSIE [1-8]\b/.test(navigator.userAgent),We=ze&&document.documentMode==5,ut=/WebKit\//.test(navigator.userAgent),et=ut&&/Qt\/\d+\.\d+/.test(navigator.userAgent),At=/Chrome\//.test(navigator.userAgent),nt=/Opera\//.test(navigator.userAgent),ft=/Apple Computer/.test(navigator.vendor),Tt=/KHTML\//.test(navigator.userAgent),qt=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),Vt=nt&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Vt&&(Vt=Number(Vt[1]));var vt=M&&(et||nt&&(Vt==null||Vt<12.11));function Ut(ce,ye){if(ye===!0)return ye;if(ce.copyState)return ce.copyState(ye);var xe={};for(var Me in ye){var Ge=ye[Me];Ge instanceof Array&&(Ge=Ge.concat([])),xe[Me]=Ge}return xe}g.copyState=Ut;function Pt(ce,ye,xe){return ce.startState?ce.startState(ye,xe):!0}g.startState=Pt,g.innerMode=function(ce,ye){for(;ce.innerMode;){var xe=ce.innerMode(ye);ye=xe.state,ce=xe.mode}return xe||{mode:ce,state:ye}};function Yt(ce,ye){this.pos=this.start=0,this.string=ce,this.tabSize=ye||8}Yt.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(ce){var ye=this.string.charAt(this.pos);if(typeof ce=="string")var xe=ye==ce;else var xe=ye&&(ce.test?ce.test(ye):ce(ye));if(xe)return++this.pos,ye},eatWhile:function(ce){for(var ye=this.pos;this.eat(ce););return this.pos>ye},eatSpace:function(){for(var ce=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>ce},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ce){var ye=this.string.indexOf(ce,this.pos);if(ye>-1)return this.pos=ye,!0},backUp:function(ce){this.pos-=ce},column:function(){return di(this.string,this.start,this.tabSize)},indentation:function(){return di(this.string,null,this.tabSize)},match:function(ce,ye,xe){if(typeof ce=="string"){var Me=function(Le){return xe?Le.toLowerCase():Le};if(Me(this.string).indexOf(Me(ce),this.pos)==this.pos)return ye!==!1&&(this.pos+=ce.length),!0}else{var Ge=this.string.slice(this.pos).match(ce);return Ge&&Ge.index>0?null:(Ge&&ye!==!1&&(this.pos+=Ge[0].length),Ge)}},current:function(){return this.string.slice(this.start,this.pos)}},g.StringStream=Yt;function Ai(ce,ye){if(ce)for(var xe=0;xe<ce.length;++xe){var Me=ce[xe];if(Me.marker==ye)return Me}}function Ri(ce,ye){for(var xe,Me=0;Me<ce.length;++Me)ce[Me]!=ye&&(xe||(xe=[])).push(ce[Me]);return xe}function Ei(ce,ye,xe){if(ce)for(var Me=0,Ge;Me<ce.length;++Me){var Le=ce[Me],Ke=Le.marker,st=Le.from==null||(Ke.inclusiveLeft?Le.from<=ye:Le.from<ye);if(st||Ke.type=="bookmark"&&Le.from==ye&&Le.from!=xe){var _t=Le.to==null||(Ke.inclusiveRight?Le.to>=ye:Le.to>ye);(Ge||(Ge=[])).push({from:Le.from,to:_t?null:Le.to,marker:Ke})}}return Ge}function Li(ce,ye){if(ce)for(var xe=0,Me;xe<ce.length;++xe){var Ge=ce[xe],Le=Ge.marker,Ke=Ge.to==null||(Le.inclusiveRight?Ge.to>=ye:Ge.to>ye);if(Ke||Le.type=="bookmark"&&Ge.from==ye){var st=Ge.from==null||(Le.inclusiveLeft?Ge.from<=ye:Ge.from<ye);(Me||(Me=[])).push({from:st?null:Ge.from-ye,to:Ge.to==null?null:Ge.to-ye,marker:Le})}}return Me}function Yi(ce,ye,xe,Me,Ge){if(!ce&&!ye)return Ge;var Le=Ei(ce,xe),Ke=Li(ye,Me),st=Ge.length==1,_t=_i(Ge).length+(st?xe:0);if(Le)for(var xt=0;xt<Le.length;++xt){var kt=Le[xt];if(kt.to==null){var ai=Ai(Ke,kt.marker);ai?st&&(kt.to=ai.to==null?null:ai.to+_t):kt.to=xe}}if(Ke)for(var xt=0;xt<Ke.length;++xt){var kt=Ke[xt];if(kt.to!=null&&(kt.to+=_t),kt.from==null){var ai=Ai(Le,kt.marker);ai||(kt.from=_t,st&&(Le||(Le=[])).push(kt))}else kt.from+=_t,st&&(Le||(Le=[])).push(kt)}var Di=[w(Ge[0],Le)];if(!st){var ni=Ge.length-2,ei;if(ni>0&&Le)for(var xt=0;xt<Le.length;++xt)Le[xt].to==null&&(ei||(ei=[])).push({from:null,to:null,marker:Le[xt].marker});for(var xt=0;xt<ni;++xt)Di.push(w(Ge[xt+1],ei));Di.push(w(_i(Ge),Ke))}return Di}function vi(ce){return typeof ce=="string"?ce:ce.text}function d(ce){if(typeof ce=="string")return null;for(var ye=ce.markedSpans,xe=null,Me=0;Me<ye.length;++Me)ye[Me].marker.explicitlyCleared?xe||(xe=ye.slice(0,Me)):xe&&xe.push(ye[Me]);return xe?xe.length?xe:null:ye}function w(ce,ye){return ye?{text:ce,markedSpans:ye}:ce}function I(ce){var ye=ce.markedSpans;if(ye){for(var xe=0;xe<ye.length;++xe){var Me=ye[xe].marker.lines,Ge=ji(Me,ce);Me.splice(Ge,1)}ce.markedSpans=null}}function k(ce,ye){if(ye){for(var xe=0;xe<ye.length;++xe)var Me=ye[xe].marker.lines.push(ce);ce.markedSpans=ye}}var R=" ";Ue||ze&&!Re?R="â":nt&&(R="");function W(ce,ye){this.text=ce,this.height=1,k(this,ye)}W.prototype={update:function(ce,ye){this.text=ce,this.stateAfter=this.styles=null,I(this),k(this,ye)},highlight:function(ce,ye,xe){var Me=new Yt(this.text,xe),Ge=this.styles||(this.styles=[]),Le=Ge.length=0;for(this.text==""&&ce.blankLine&&ce.blankLine(ye);!Me.eol();){var Ke=ce.token(Me,ye),st=Me.current();if(Me.start=Me.pos,Le&&Ge[Le-1]==Ke?Ge[Le-2]+=st:st&&(Ge[Le++]=st,Ge[Le++]=Ke),Me.pos>5e3){Ge[Le++]=this.text.slice(Me.pos),Ge[Le++]=null;break}}},process:function(ce,ye,xe){var Me=new Yt(this.text,xe);for(this.text==""&&ce.blankLine&&ce.blankLine(ye);!Me.eol()&&Me.pos<=5e3;)ce.token(Me,ye),Me.start=Me.pos},getTokenAt:function(ce,ye,xe,Me){for(var Ge=this.text,Le=new Yt(Ge,xe);Le.pos<Me&&!Le.eol();){Le.start=Le.pos;var Ke=ce.token(Le,ye)}return{start:Le.start,end:Le.pos,string:Le.current(),className:Ke||null,state:ye}},indentation:function(ce){return di(this.text,null,ce)},getContent:function(ce,ye,xe){var Me=!0,Ge=0,Le=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,Ke=wi("pre");function st(Br,Cr,rr){if(Cr){if(Me&&ze&&Cr.charAt(0)==" "&&(Cr="Â "+Cr.slice(1)),Me=!1,Le.test(Cr))for(var Lr=document.createDocumentFragment(),sr=0;;){Le.lastIndex=sr;var jr=Le.exec(Cr),ss=jr?jr.index-sr:Cr.length-sr;if(ss&&(Lr.appendChild(document.createTextNode(Cr.slice(sr,sr+ss))),Ge+=ss),!jr)break;if(sr+=ss+1,jr[0]=="	"){var ps=ce-Ge%ce;Lr.appendChild(wi("span",Ot(ps),"cm-tab")),Ge+=ps}else{var cr=wi("span","â¢","cm-invalidchar");cr.title="\\u"+jr[0].charCodeAt(0).toString(16),Lr.appendChild(cr),Ge+=1}}else{Ge+=Cr.length;var Lr=document.createTextNode(Cr)}rr?Br.appendChild(wi("span",[Lr],rr)):Br.appendChild(Lr)}}var _t=st;if(ye!=null){var xt=0,kt=Ke.anchor=wi("span");_t=function(Br,Cr,rr){var Lr=Cr.length;if(ye>=xt&&ye<xt+Lr){var sr=ye-xt;if(sr&&(st(Br,Cr.slice(0,sr),rr),xe)){var jr=Cr.slice(sr-1,sr+1);bt.test(jr)?Br.appendChild(wi("wbr")):!Re&&/\w\w/.test(jr)&&Br.appendChild(document.createTextNode("â"))}Br.appendChild(kt),st(kt,nt?Cr.slice(sr,sr+1):Cr.slice(sr),rr),nt&&st(Br,Cr.slice(sr+1),rr),ye--,xt+=Lr}else xt+=Lr,st(Br,Cr,rr),xt==ye&&xt==ei?(Ar(kt,R),Br.appendChild(kt)):xt>ye+10&&/\s/.test(Cr)&&(_t=function(){})}}var ai=this.styles,Di=this.text,ni=this.markedSpans,ei=Di.length;function Ui(Br){return Br?"cm-"+Br.replace(/ +/g," cm-"):null}if(!Di&&ye==null)_t(Ke," ");else if(!ni||!ni.length)for(var Qi=0,hr=0;hr<ei;Qi+=2){var Ki=ai[Qi],Xt=ai[Qi+1],wr=Ki.length;hr+wr>ei&&(Ki=Ki.slice(0,ei-hr)),hr+=wr,_t(Ke,Ki,Ui(Xt))}else{ni.sort(function(rr,Lr){return rr.from-Lr.from});for(var bi=0,Qi=0,Sr="",Xt,Pr=ni[0].from||0,Zi=[],pi=0,_s=function(){for(var rr;pi<ni.length&&((rr=ni[pi]).from==bi||rr.from==null);)rr.marker.type=="range"&&Zi.push(rr),++pi;Pr=pi<ni.length?ni[pi].from:1/0;for(var Lr=0;Lr<Zi.length;++Lr){var sr=Zi[Lr].to;sr==null&&(sr=1/0),sr==bi?Zi.splice(Lr--,1):Pr=Math.min(sr,Pr)}};bi<ei;){Pr==bi&&_s();for(var dr=Math.min(ei,Pr);;){if(Sr){for(var Dt=bi+Sr.length,Yr=Xt,Ys=0;Ys<Zi.length;++Ys){var _r=Zi[Ys];Yr=(Yr?Yr+" ":"")+_r.marker.style,_r.marker.endStyle&&_r.to===Math.min(Dt,dr)&&(Yr+=" "+_r.marker.endStyle),_r.marker.startStyle&&_r.from===bi&&(Yr+=" "+_r.marker.startStyle)}if(_t(Ke,Dt>dr?Sr.slice(0,dr-bi):Sr,Yr),Dt>=dr){Sr=Sr.slice(dr-bi),bi=dr;break}bi=Dt}Sr=ai[Qi++],Xt=Ui(ai[Qi++])}}}return Ke},cleanUp:function(){this.parent=null,I(this)}};function se(ce){this.lines=ce,this.parent=null;for(var ye=0,xe=ce.length,Me=0;ye<xe;++ye)ce[ye].parent=this,Me+=ce[ye].height;this.height=Me}se.prototype={chunkSize:function(){return this.lines.length},remove:function(ce,ye,xe){for(var Me=ce,Ge=ce+ye;Me<Ge;++Me){var Le=this.lines[Me];if(this.height-=Le.height,Le.cleanUp(),Le.handlers)for(var Ke=0;Ke<Le.handlers.length;++Ke)xe.push(Le.handlers[Ke])}this.lines.splice(ce,ye)},collapse:function(ce){ce.splice.apply(ce,[ce.length,0].concat(this.lines))},insertHeight:function(ce,ye,xe){this.height+=xe,this.lines=this.lines.slice(0,ce).concat(ye).concat(this.lines.slice(ce));for(var Me=0,Ge=ye.length;Me<Ge;++Me)ye[Me].parent=this},iterN:function(ce,ye,xe){for(var Me=ce+ye;ce<Me;++ce)if(xe(this.lines[ce]))return!0}};function oe(ce){this.children=ce;for(var ye=0,xe=0,Me=0,Ge=ce.length;Me<Ge;++Me){var Le=ce[Me];ye+=Le.chunkSize(),xe+=Le.height,Le.parent=this}this.size=ye,this.height=xe,this.parent=null}oe.prototype={chunkSize:function(){return this.size},remove:function(ce,ye,xe){this.size-=ye;for(var Me=0;Me<this.children.length;++Me){var Ge=this.children[Me],Le=Ge.chunkSize();if(ce<Le){var Ke=Math.min(ye,Le-ce),st=Ge.height;if(Ge.remove(ce,Ke,xe),this.height-=st-Ge.height,Le==Ke&&(this.children.splice(Me--,1),Ge.parent=null),(ye-=Ke)==0)break;ce=0}else ce-=Le}if(this.size-ye<25){var _t=[];this.collapse(_t),this.children=[new se(_t)],this.children[0].parent=this}},collapse:function(ce){for(var ye=0,xe=this.children.length;ye<xe;++ye)this.children[ye].collapse(ce)},insert:function(ce,ye){for(var xe=0,Me=0,Ge=ye.length;Me<Ge;++Me)xe+=ye[Me].height;this.insertHeight(ce,ye,xe)},insertHeight:function(ce,ye,xe){this.size+=ye.length,this.height+=xe;for(var Me=0,Ge=this.children.length;Me<Ge;++Me){var Le=this.children[Me],Ke=Le.chunkSize();if(ce<=Ke){if(Le.insertHeight(ce,ye,xe),Le.lines&&Le.lines.length>50){for(;Le.lines.length>50;){var st=Le.lines.splice(Le.lines.length-25,25),_t=new se(st);Le.height-=_t.height,this.children.splice(Me+1,0,_t),_t.parent=this}this.maybeSpill()}break}ce-=Ke}},maybeSpill:function(){if(!(this.children.length<=10)){var ce=this;do{var ye=ce.children.splice(ce.children.length-5,5),xe=new oe(ye);if(ce.parent){ce.size-=xe.size,ce.height-=xe.height;var Ge=ji(ce.parent.children,ce);ce.parent.children.splice(Ge+1,0,xe)}else{var Me=new oe(ce.children);Me.parent=ce,ce.children=[Me,xe],ce=Me}xe.parent=ce.parent}while(ce.children.length>10);ce.parent.maybeSpill()}},iter:function(ce,ye,xe){this.iterN(ce,ye-ce,xe)},iterN:function(ce,ye,xe){for(var Me=0,Ge=this.children.length;Me<Ge;++Me){var Le=this.children[Me],Ke=Le.chunkSize();if(ce<Ke){var st=Math.min(ye,Ke-ce);if(Le.iterN(ce,st,xe))return!0;if((ye-=st)==0)break;ce=0}else ce-=Ke}}};function ue(ce,ye){for(;!ce.lines;)for(var xe=0;;++xe){var Me=ce.children[xe],Ge=Me.chunkSize();if(ye<Ge){ce=Me;break}ye-=Ge}return ce.lines[ye]}function we(ce){if(ce.parent==null)return null;for(var ye=ce.parent,xe=ji(ye.lines,ce),Me=ye.parent;Me;ye=Me,Me=Me.parent)for(var Ge=0;Me.children[Ge]!=ye;++Ge)xe+=Me.children[Ge].chunkSize();return xe}function Te(ce,ye){var xe=0;e:do{for(var Me=0,Ge=ce.children.length;Me<Ge;++Me){var Le=ce.children[Me],Ke=Le.height;if(ye<Ke){ce=Le;continue e}ye-=Ke,xe+=Le.chunkSize()}return xe}while(!ce.lines);for(var Me=0,Ge=ce.lines.length;Me<Ge;++Me){var st=ce.lines[Me],_t=st.height;if(ye<_t)break;ye-=_t}return xe+Me}function Ve(ce,ye){var xe=0;e:do{for(var Me=0,Ge=ce.children.length;Me<Ge;++Me){var Le=ce.children[Me],Ke=Le.chunkSize();if(ye<Ke){ce=Le;continue e}ye-=Ke,xe+=Le.height}return xe}while(!ce.lines);for(var Me=0;Me<ye;++Me)xe+=ce.lines[Me].height;return xe}function De(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}De.prototype={addChange:function(ce,ye,xe){this.undone.length=0;var Me=+new Date,Ge=_i(this.done),Le=Ge&&_i(Ge),Ke=Me-this.time;if(Ge&&!this.closed&&this.compound)Ge.push({start:ce,added:ye,old:xe});else if(Ke>400||!Le||this.closed||Le.start>ce+xe.length||Le.start+Le.added<ce)this.done.push([{start:ce,added:ye,old:xe}]),this.closed=!1;else{for(var st=Math.max(0,Le.start-ce),_t=Math.max(0,ce+xe.length-(Le.start+Le.added)),xt=st;xt>0;--xt)Le.old.unshift(xe[xt-1]);for(var xt=_t;xt>0;--xt)Le.old.push(xe[xe.length-xt]);st&&(Le.start=ce),Le.added+=ye-(xe.length-st-_t)}this.time=Me},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}};function me(){pt(this)}function ke(ce){return ce.stop||(ce.stop=me),ce}function qe(ce){ce.preventDefault?ce.preventDefault():ce.returnValue=!1}function lt(ce){ce.stopPropagation?ce.stopPropagation():ce.cancelBubble=!0}function pt(ce){qe(ce),lt(ce)}g.e_stop=pt,g.e_preventDefault=qe,g.e_stopPropagation=lt;function Ft(ce){return ce.target||ce.srcElement}function zt(ce){var ye=ce.which;return ye==null&&(ce.button&1?ye=1:ce.button&2?ye=3:ce.button&4&&(ye=2)),M&&ce.ctrlKey&&ye==1&&(ye=3),ye}function Nt(ce,ye){var xe=ce.override&&ce.override.hasOwnProperty(ye);return xe?ce.override[ye]:ce[ye]}function Mt(ce,ye,xe,Me){if(typeof ce.addEventListener=="function"){if(ce.addEventListener(ye,xe,!1),Me)return function(){ce.removeEventListener(ye,xe,!1)}}else{var Ge=function(Le){xe(Le||window.event)};if(ce.attachEvent("on"+ye,Ge),Me)return function(){ce.detachEvent("on"+ye,Ge)}}}g.connect=Mt;function $t(){this.id=null}$t.prototype={set:function(ce,ye){clearTimeout(this.id),this.id=setTimeout(ye,ce)}};var ri=g.Pass={toString:function(){return"CodeMirror.Pass"}},ci=function(){if($e)return!1;var ce=wi("div");return"draggable"in ce||"dragDrop"in ce}();(function(){var ce=wi("textarea");return ce.value=`foo
bar`,ce.value.indexOf("\r")>-1?`\r
`:`
`})();var bt=/^$/;Ue?bt=/$'/:ft?bt=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:At&&(bt=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);function di(ce,ye,xe){ye==null&&(ye=ce.search(/[^\s\u00a0]/),ye==-1&&(ye=ce.length));for(var Me=0,Ge=0;Me<ye;++Me)ce.charAt(Me)=="	"?Ge+=xe-Ge%xe:++Ge;return Ge}function ii(ce,ye){try{var xe=ce.getBoundingClientRect();xe={top:xe.top,left:xe.left}}catch{xe={top:0,left:0}}if(!ye)if(window.pageYOffset==null){var Me=document.documentElement||document.body.parentNode;Me.scrollTop==null&&(Me=document.body),xe.top+=Me.scrollTop,xe.left+=Me.scrollLeft}else xe.top+=window.pageYOffset,xe.left+=window.pageXOffset;return xe}function Hi(ce){return ce.textContent||ce.innerText||ce.nodeValue||""}var Vi=[""];function Ot(ce){for(;Vi.length<=ce;)Vi.push(_i(Vi)+" ");return Vi[ce]}function _i(ce){return ce[ce.length-1]}function Ti(ce){B?(ce.selectionStart=0,ce.selectionEnd=ce.value.length):ce.select()}function Wi(ce,ye){return ce.line==ye.line&&ce.ch==ye.ch}function Zt(ce,ye){return ce.line<ye.line||ce.line==ye.line&&ce.ch<ye.ch}function mi(ce){return{line:ce.line,ch:ce.ch}}function wi(ce,ye,xe,Me){var Ge=document.createElement(ce);if(xe&&(Ge.className=xe),Me&&(Ge.style.cssText=Me),typeof ye=="string")Ar(Ge,ye);else if(ye)for(var Le=0;Le<ye.length;++Le)Ge.appendChild(ye[Le]);return Ge}function $i(ce){return ce.innerHTML="",ce}function tr(ce,ye){$i(ce).appendChild(ye)}function Ar(ce,ye){$e?(ce.innerHTML="",ce.appendChild(document.createTextNode(ye))):ce.textContent=ye}function Tr(ce,ye){if(!ye)return 0;if(!ce)return ye.length;for(var xe=ce.length,Me=ye.length;xe>=0&&Me>=0&&ce.charAt(xe)==ye.charAt(Me);--xe,--Me);return Me+1}function ji(ce,ye){if(ce.indexOf)return ce.indexOf(ye);for(var xe=0,Me=ce.length;xe<Me;++xe)if(ce[xe]==ye)return xe;return-1}var Si=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function Qs(ce){return/\w/.test(ce)||ce>"Â"&&(ce.toUpperCase()!=ce.toLowerCase()||Si.test(ce))}var $r=`

b`.split(/\n/).length!=3?function(ce){for(var ye=0,xe=[],Me=ce.length;ye<=Me;){var Ge=ce.indexOf(`
`,ye);Ge==-1&&(Ge=ce.length);var Le=ce.slice(ye,ce.charAt(Ge-1)=="\r"?Ge-1:Ge),Ke=Le.indexOf("\r");Ke!=-1?(xe.push(Le.slice(0,Ke)),ye+=Ke+1):(xe.push(Le),ye=Ge+1)}return xe}:function(ce){return ce.split(/\r\n?|\n/)};g.splitLines=$r;var it=window.getSelection?function(ce){try{return ce.selectionStart!=ce.selectionEnd}catch{return!1}}:function(ce){try{var ye=ce.ownerDocument.selection.createRange()}catch{}return!ye||ye.parentElement()!=ce?!1:ye.compareEndPoints("StartToEnd",ye)!=0};g.defineMode("null",function(){return{token:function(ce){ce.skipToEnd()}}}),g.defineMIME("text/plain","null");var Se={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return g.keyNames=Se,function(){for(var ce=0;ce<10;ce++)Se[ce+48]=String(ce);for(var ce=65;ce<=90;ce++)Se[ce]=String.fromCharCode(ce);for(var ce=1;ce<=12;ce++)Se[ce+111]=Se[ce+63235]="F"+ce}(),g.version="2.38",g}();CodeMirror.defineMode("javascript",function(g,B){var M=g.indentUnit,P=B.json,K=B.typescript,Y=function(){function De($t){return{type:$t,style:"keyword"}}var me=De("keyword a"),ke=De("keyword b"),qe=De("keyword c"),lt=De("operator"),pt={type:"atom",style:"atom"},Ft={if:me,while:me,with:me,else:ke,do:ke,try:ke,finally:ke,return:qe,break:qe,continue:qe,new:qe,delete:qe,throw:qe,var:De("var"),const:De("var"),let:De("var"),function:De("function"),catch:De("catch"),for:De("for"),switch:De("switch"),case:De("case"),default:De("default"),in:lt,typeof:lt,instanceof:lt,true:pt,false:pt,null:pt,undefined:pt,NaN:pt,Infinity:pt};if(K){var zt={type:"variable",style:"variable-3"},Nt={interface:De("interface"),class:De("class"),extends:De("extends"),constructor:De("constructor"),public:De("public"),private:De("private"),protected:De("protected"),static:De("static"),super:De("super"),string:zt,number:zt,bool:zt,any:zt};for(var Mt in Nt)Ft[Mt]=Nt[Mt]}return Ft}(),re=/[+\-*&%=<>!?|]/;function D(De,me,ke){return me.tokenize=ke,ke(De,me)}function ne(De,me){for(var ke=!1,qe;(qe=De.next())!=null;){if(qe==me&&!ke)return!1;ke=!ke&&qe=="\\"}return ke}var Ae,fe;function ge(De,me,ke){return Ae=De,fe=ke,me}function Be(De,me){var ke=De.next();if(ke=='"'||ke=="'")return D(De,me,Ue(ke));if(/[\[\]{}\(\),;\:\.]/.test(ke))return ge(ke);if(ke=="0"&&De.eat(/x/i))return De.eatWhile(/[\da-f]/i),ge("number","number");if(/\d/.test(ke)||ke=="-"&&De.eat(/\d/))return De.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),ge("number","number");if(ke=="/")return De.eat("*")?D(De,me,ze):De.eat("/")?(De.skipToEnd(),ge("comment","comment")):me.lastType=="operator"||me.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(me.lastType)?(ne(De,"/"),De.eatWhile(/[gimy]/),ge("regexp","string-2")):(De.eatWhile(re),ge("operator",null,De.current()));if(ke=="#")return De.skipToEnd(),ge("error","error");if(re.test(ke))return De.eatWhile(re),ge("operator",null,De.current());De.eatWhile(/[\w\$_]/);var qe=De.current(),lt=Y.propertyIsEnumerable(qe)&&Y[qe];return lt&&me.lastType!="."?ge(lt.type,lt.style,qe):ge("variable","variable",qe)}function Ue(De){return function(me,ke){return ne(me,De)||(ke.tokenize=Be),ge("string","string")}}function ze(De,me){for(var ke=!1,qe;qe=De.next();){if(qe=="/"&&ke){me.tokenize=Be;break}ke=qe=="*"}return ge("comment","comment")}var Re={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function $e(De,me,ke,qe,lt,pt){this.indented=De,this.column=me,this.type=ke,this.prev=lt,this.info=pt,qe!=null&&(this.align=qe)}function We(De,me){for(var ke=De.localVars;ke;ke=ke.next)if(ke.name==me)return!0}function ut(De,me,ke,qe,lt){var pt=De.cc;for(et.state=De,et.stream=lt,et.marked=null,et.cc=pt,De.lexical.hasOwnProperty("align")||(De.lexical.align=!0);;){var Ft=pt.length?pt.pop():P?Ai:Yt;if(Ft(ke,qe)){for(;pt.length&&pt[pt.length-1].lex;)pt.pop()();return et.marked?et.marked:ke=="variable"&&We(De,qe)?"variable-2":me}}}var et={state:null,column:null,marked:null,cc:null};function At(){for(var De=arguments.length-1;De>=0;De--)et.cc.push(arguments[De])}function nt(){return At.apply(null,arguments),!0}function ft(De){function me(qe){for(var lt=qe;lt;lt=lt.next)if(lt.name==De)return!0;return!1}var ke=et.state;if(ke.context){if(et.marked="def",me(ke.localVars))return;ke.localVars={name:De,next:ke.localVars}}else{if(me(ke.globalVars))return;ke.globalVars={name:De,next:ke.globalVars}}}var Tt={name:"this",next:{name:"arguments"}};function qt(){et.state.context={prev:et.state.context,vars:et.state.localVars},et.state.localVars=Tt}function Vt(){et.state.localVars=et.state.context.vars,et.state.context=et.state.context.prev}function vt(De,me){var ke=function(){var qe=et.state;qe.lexical=new $e(qe.indented,et.stream.column(),De,null,qe.lexical,me)};return ke.lex=!0,ke}function Ut(){var De=et.state;De.lexical.prev&&(De.lexical.type==")"&&(De.indented=De.lexical.indented),De.lexical=De.lexical.prev)}Ut.lex=!0;function Pt(De){return function(ke){return ke==De?nt():De==";"?At():nt(arguments.callee)}}function Yt(De){return De=="var"?nt(vt("vardef"),R,Pt(";"),Ut):De=="keyword a"?nt(vt("form"),Ai,Yt,Ut):De=="keyword b"?nt(vt("form"),Yt,Ut):De=="{"?nt(vt("}"),w,Ut):De==";"?nt():De=="function"?nt(Te):De=="for"?nt(vt("form"),Pt("("),vt(")"),se,Pt(")"),Ut,Yt,Ut):De=="variable"?nt(vt("stat"),Li):De=="switch"?nt(vt("form"),Ai,vt("}","switch"),Pt("{"),w,Ut,Ut):De=="case"?nt(Ai,Pt(":")):De=="default"?nt(Pt(":")):De=="catch"?nt(vt("form"),qt,Pt("("),Ve,Pt(")"),Yt,Ut,Vt):At(vt("stat"),Ai,Pt(";"),Ut)}function Ai(De){return Re.hasOwnProperty(De)?nt(Ei):De=="function"?nt(Te):De=="keyword c"?nt(Ri):De=="("?nt(vt(")"),Ri,Pt(")"),Ut,Ei):De=="operator"?nt(Ai):De=="["?nt(vt("]"),d(Ai,"]"),Ut,Ei):De=="{"?nt(vt("}"),d(vi,"}"),Ut,Ei):nt()}function Ri(De){return De.match(/[;\}\)\],]/)?At():At(Ai)}function Ei(De,me){if(De=="operator"&&/\+\+|--/.test(me))return nt(Ei);if(De=="operator"&&me=="?")return nt(Ai,Pt(":"),Ai);if(De!=";"){if(De=="(")return nt(vt(")"),d(Ai,")"),Ut,Ei);if(De==".")return nt(Yi,Ei);if(De=="[")return nt(vt("]"),Ai,Pt("]"),Ut,Ei)}}function Li(De){return De==":"?nt(Ut,Yt):At(Ei,Pt(";"),Ut)}function Yi(De){if(De=="variable")return et.marked="property",nt()}function vi(De){if(De=="variable"&&(et.marked="property"),Re.hasOwnProperty(De))return nt(Pt(":"),Ai)}function d(De,me){function ke(qe){return qe==","?nt(De,ke):qe==me?nt():nt(Pt(me))}return function(lt){return lt==me?nt():At(De,ke)}}function w(De){return De=="}"?nt():At(Yt,w)}function I(De){return De==":"?nt(k):At()}function k(De){return De=="variable"?(et.marked="variable-3",nt()):At()}function R(De,me){return De=="variable"?(ft(me),K?nt(I,W):nt(W)):At()}function W(De,me){if(me=="=")return nt(Ai,W);if(De==",")return nt(R)}function se(De){return De=="var"?nt(R,Pt(";"),ue):De==";"?nt(ue):De=="variable"?nt(oe):nt(ue)}function oe(De,me){return me=="in"?nt(Ai):nt(Ei,ue)}function ue(De,me){return De==";"?nt(we):me=="in"?nt(Ai):nt(Ai,Pt(";"),we)}function we(De){De!=")"&&nt(Ai)}function Te(De,me){if(De=="variable")return ft(me),nt(Te);if(De=="(")return nt(vt(")"),qt,d(Ve,")"),Ut,Yt,Vt)}function Ve(De,me){if(De=="variable")return ft(me),K?nt(I):nt()}return{startState:function(De){return{tokenize:Be,lastType:null,cc:[],lexical:new $e((De||0)-M,0,"block",!1),localVars:B.localVars,globalVars:B.globalVars,context:B.localVars&&{vars:B.localVars},indented:0}},token:function(De,me){if(De.sol()&&(me.lexical.hasOwnProperty("align")||(me.lexical.align=!1),me.indented=De.indentation()),De.eatSpace())return null;var ke=me.tokenize(De,me);return Ae=="comment"?ke:(me.lastType=Ae,ut(me,ke,Ae,fe,De))},indent:function(De,me){if(De.tokenize==ze)return CodeMirror.Pass;if(De.tokenize!=Be)return 0;var ke=me&&me.charAt(0),qe=De.lexical;qe.type=="stat"&&ke=="}"&&(qe=qe.prev);var lt=qe.type,pt=ke==lt;return lt=="vardef"?qe.indented+(De.lastType=="operator"||De.lastType==","?4:0):lt=="form"&&ke=="{"?qe.indented:lt=="form"?qe.indented+M:lt=="stat"?qe.indented+(De.lastType=="operator"||De.lastType==","?M:0):qe.info=="switch"&&!pt?qe.indented+(/^(?:case|default)\b/.test(me)?M:2*M):qe.align?qe.column+(pt?0:1):qe.indented+(pt?0:M)},electricChars:":{}",jsonMode:P}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMode("xml",function(g,B){var M=g.indentUnit,P=B.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},K=B.alignCDATA,Y,re;function D(vt,Ut){function Pt(Li){return Ut.tokenize=Li,Li(vt,Ut)}var Yt=vt.next();if(Yt=="<"){if(vt.eat("!"))return vt.eat("[")?vt.match("CDATA[")?Pt(fe("atom","]]>")):null:vt.match("--")?Pt(fe("comment","-->")):vt.match("DOCTYPE",!0,!0)?(vt.eatWhile(/[\w\._\-]/),Pt(ge(1))):null;if(vt.eat("?"))return vt.eatWhile(/[\w\._\-]/),Ut.tokenize=fe("meta","?>"),"meta";var Ai=vt.eat("/");Y="";for(var Ri;Ri=vt.eat(/[^\s\u00a0=<>\"\'\/?]/);)Y+=Ri;return Y?(re=Ai?"closeTag":"openTag",Ut.tokenize=ne,"tag"):"error"}else if(Yt=="&"){var Ei;return vt.eat("#")?vt.eat("x")?Ei=vt.eatWhile(/[a-fA-F\d]/)&&vt.eat(";"):Ei=vt.eatWhile(/[\d]/)&&vt.eat(";"):Ei=vt.eatWhile(/[\w\.\-:]/)&&vt.eat(";"),Ei?"atom":"error"}else return vt.eatWhile(/[^&<]/),null}function ne(vt,Ut){var Pt=vt.next();return Pt==">"||Pt=="/"&&vt.eat(">")?(Ut.tokenize=D,re=Pt==">"?"endTag":"selfcloseTag","tag"):Pt=="="?(re="equals",null):/[\'\"]/.test(Pt)?(Ut.tokenize=Ae(Pt),Ut.tokenize(vt,Ut)):(vt.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function Ae(vt){return function(Ut,Pt){for(;!Ut.eol();)if(Ut.next()==vt){Pt.tokenize=ne;break}return"string"}}function fe(vt,Ut){return function(Pt,Yt){for(;!Pt.eol();){if(Pt.match(Ut)){Yt.tokenize=D;break}Pt.next()}return vt}}function ge(vt){return function(Ut,Pt){for(var Yt;(Yt=Ut.next())!=null;){if(Yt=="<")return Pt.tokenize=ge(vt+1),Pt.tokenize(Ut,Pt);if(Yt==">")if(vt==1){Pt.tokenize=D;break}else return Pt.tokenize=ge(vt-1),Pt.tokenize(Ut,Pt)}return"meta"}}var Be,Ue;function ze(){for(var vt=arguments.length-1;vt>=0;vt--)Be.cc.push(arguments[vt])}function Re(){return ze.apply(null,arguments),!0}function $e(vt,Ut){var Pt=P.doNotIndent.hasOwnProperty(vt)||Be.context&&Be.context.noIndent;Be.context={prev:Be.context,tagName:vt,indent:Be.indented,startOfLine:Ut,noIndent:Pt}}function We(){Be.context&&(Be.context=Be.context.prev)}function ut(vt){if(vt=="openTag")return Be.tagName=Y,Re(ft,et(Be.startOfLine));if(vt=="closeTag"){var Ut=!1;return Be.context?Be.context.tagName!=Y&&(P.implicitlyClosed.hasOwnProperty(Be.context.tagName.toLowerCase())&&We(),Ut=!Be.context||Be.context.tagName!=Y):Ut=!0,Ut&&(Ue="error"),Re(At(Ut))}return Re()}function et(vt){return function(Ut){return Ut=="selfcloseTag"||Ut=="endTag"&&P.autoSelfClosers.hasOwnProperty(Be.tagName.toLowerCase())?(nt(Be.tagName.toLowerCase()),Re()):(Ut=="endTag"&&(nt(Be.tagName.toLowerCase()),$e(Be.tagName,vt)),Re())}}function At(vt){return function(Ut){return vt&&(Ue="error"),Ut=="endTag"?(We(),Re()):(Ue="error",Re(arguments.callee))}}function nt(vt){for(var Ut;;){if(!Be.context||(Ut=Be.context.tagName.toLowerCase(),!P.contextGrabbers.hasOwnProperty(Ut)||!P.contextGrabbers[Ut].hasOwnProperty(vt)))return;We()}}function ft(vt){return vt=="word"?(Ue="attribute",Re(Tt,ft)):vt=="endTag"||vt=="selfcloseTag"?ze():(Ue="error",Re(ft))}function Tt(vt){return vt=="equals"?Re(qt,ft):(P.allowMissing?vt=="word"&&(Ue="attribute"):Ue="error",vt=="endTag"||vt=="selfcloseTag"?ze():Re())}function qt(vt){return vt=="string"?Re(Vt):vt=="word"&&P.allowUnquoted?(Ue="string",Re()):(Ue="error",vt=="endTag"||vt=="selfCloseTag"?ze():Re())}function Vt(vt){return vt=="string"?Re(Vt):ze()}return{startState:function(){return{tokenize:D,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(vt,Ut){if(vt.sol()&&(Ut.startOfLine=!0,Ut.indented=vt.indentation()),vt.eatSpace())return null;Ue=re=Y=null;var Pt=Ut.tokenize(vt,Ut);if(Ut.type=re,(Pt||re)&&Pt!="comment")for(Be=Ut;;){var Yt=Ut.cc.pop()||ut;if(Yt(re||Pt))break}return Ut.startOfLine=!1,Ue||Pt},indent:function(vt,Ut,Pt){var Yt=vt.context;if(vt.tokenize!=ne&&vt.tokenize!=D||Yt&&Yt.noIndent)return Pt?Pt.match(/^(\s*)/)[0].length:0;if(K&&/<!\[CDATA\[/.test(Ut))return 0;for(Yt&&/^<\//.test(Ut)&&(Yt=Yt.prev);Yt&&!Yt.startOfLine;)Yt=Yt.prev;return Yt?Yt.indent+M:0},electricChars:"/",configuration:B.htmlMode?"html":"xml"}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});CodeMirror.defineMode("clike",function(g,B){var M=g.indentUnit,P=B.statementIndentUnit||M,K=B.dontAlignCalls,Y=B.keywords||{},re=B.builtin||{},D=B.blockKeywords||{},ne=B.atoms||{},Ae=B.hooks||{},fe=B.multiLineStrings,ge=/[+\-*&%=<>!?|\/]/,Be;function Ue(et,At){var nt=et.next();if(Ae[nt]){var ft=Ae[nt](et,At);if(ft!==!1)return ft}if(nt=='"'||nt=="'")return At.tokenize=ze(nt),At.tokenize(et,At);if(/[\[\]{}\(\),;\:\.]/.test(nt))return Be=nt,null;if(/\d/.test(nt))return et.eatWhile(/[\w\.]/),"number";if(nt=="/"){if(et.eat("*"))return At.tokenize=Re,Re(et,At);if(et.eat("/"))return et.skipToEnd(),"comment"}if(ge.test(nt))return et.eatWhile(ge),"operator";et.eatWhile(/[\w\$_]/);var Tt=et.current();return Y.propertyIsEnumerable(Tt)?(D.propertyIsEnumerable(Tt)&&(Be="newstatement"),"keyword"):re.propertyIsEnumerable(Tt)?(D.propertyIsEnumerable(Tt)&&(Be="newstatement"),"builtin"):ne.propertyIsEnumerable(Tt)?"atom":"variable"}function ze(et){return function(At,nt){for(var ft=!1,Tt,qt=!1;(Tt=At.next())!=null;){if(Tt==et&&!ft){qt=!0;break}ft=!ft&&Tt=="\\"}return(qt||!(ft||fe))&&(nt.tokenize=null),"string"}}function Re(et,At){for(var nt=!1,ft;ft=et.next();){if(ft=="/"&&nt){At.tokenize=null;break}nt=ft=="*"}return"comment"}function $e(et,At,nt,ft,Tt){this.indented=et,this.column=At,this.type=nt,this.align=ft,this.prev=Tt}function We(et,At,nt){var ft=et.indented;return et.context&&et.context.type=="statement"&&(ft=et.context.indented),et.context=new $e(ft,At,nt,null,et.context)}function ut(et){var At=et.context.type;return(At==")"||At=="]"||At=="}")&&(et.indented=et.context.indented),et.context=et.context.prev}return{startState:function(et){return{tokenize:null,context:new $e((et||0)-M,0,"top",!1),indented:0,startOfLine:!0}},token:function(et,At){var nt=At.context;if(et.sol()&&(nt.align==null&&(nt.align=!1),At.indented=et.indentation(),At.startOfLine=!0),et.eatSpace())return null;Be=null;var ft=(At.tokenize||Ue)(et,At);if(ft=="comment"||ft=="meta")return ft;if(nt.align==null&&(nt.align=!0),(Be==";"||Be==":"||Be==",")&&nt.type=="statement")ut(At);else if(Be=="{")We(At,et.column(),"}");else if(Be=="[")We(At,et.column(),"]");else if(Be=="(")We(At,et.column(),")");else if(Be=="}"){for(;nt.type=="statement";)nt=ut(At);for(nt.type=="}"&&(nt=ut(At));nt.type=="statement";)nt=ut(At)}else Be==nt.type?ut(At):((nt.type=="}"||nt.type=="top")&&Be!=";"||nt.type=="statement"&&Be=="newstatement")&&We(At,et.column(),"statement");return At.startOfLine=!1,ft},indent:function(et,At){if(et.tokenize==Re)return CodeMirror.Pass;if(et.tokenize!=Ue&&et.tokenize!=null)return 0;var nt=et.context,ft=At&&At.charAt(0);nt.type=="statement"&&ft=="}"&&(nt=nt.prev);var Tt=ft==nt.type;return nt.type=="statement"?nt.indented+(ft=="{"?0:P):K&&nt.type==")"&&!Tt?nt.indented+P:nt.align?nt.column+(Tt?0:1):nt.indented+(Tt?0:M)},electricChars:"{}"}});(function(){function g(Y){for(var re={},D=Y.split(" "),ne=0;ne<D.length;++ne)re[D[ne]]=!0;return re}var B="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";function M(Y,re){if(!re.startOfLine)return!1;for(;;)if(Y.skipTo("\\")){if(Y.next(),Y.eol()){re.tokenize=M;break}}else{Y.skipToEnd(),re.tokenize=null;break}return"meta"}function P(Y,re){for(var D;(D=Y.next())!=null;)if(D=='"'&&!Y.eat('"')){re.tokenize=null;break}return"string"}function K(Y,re){for(var D=0;D<Y.length;++D)CodeMirror.defineMIME(Y[D],re)}K(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:g(B),blockKeywords:g("case do else for if switch while struct"),atoms:g("null"),hooks:{"#":M}}),K(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:g(B+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:g("catch class do else finally for if struct switch try while"),atoms:g("true false null"),hooks:{"#":M}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:g("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:g("catch class do else finally for if switch try while"),atoms:g("true false null"),hooks:{"@":function(Y,re){return Y.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:g("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:g("catch class do else finally for foreach if struct switch try while"),builtin:g("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:g("true false null"),hooks:{"@":function(Y,re){return Y.eat('"')?(re.tokenize=P,P(Y,re)):(Y.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:g("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:g("catch class do else finally for forSome if match switch try while"),atoms:g("true false null"),hooks:{"@":function(Y,re){return Y.eatWhile(/[\w\$_]/),"meta"}}})})();CodeMirror.defineMode("css",function(g){var B=g.indentUnit,M,P=ne(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),K=ne(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),Y=ne(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),re=ne(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),D=ne(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);function ne(Re){for(var $e={},We=0;We<Re.length;++We)$e[Re[We]]=!0;return $e}function Ae(Re,$e){return M=$e,Re}function fe(Re,$e){var We=Re.next();if(We=="@")return Re.eatWhile(/[\w\\\-]/),Ae("def",Re.current());if(We=="/"&&Re.eat("*"))return $e.tokenize=ge,ge(Re,$e);if(We=="<"&&Re.eat("!"))return $e.tokenize=Be,Be(Re,$e);if(We=="=")Ae(null,"compare");else{if((We=="~"||We=="|")&&Re.eat("="))return Ae(null,"compare");if(We=='"'||We=="'")return $e.tokenize=Ue(We),$e.tokenize(Re,$e);if(We=="#")return Re.eatWhile(/[\w\\\-]/),Ae("atom","hash");if(We=="!")return Re.match(/^\s*\w*/),Ae("keyword","important");if(/\d/.test(We))return Re.eatWhile(/[\w.%]/),Ae("number","unit");if(We==="-"){if(/\d/.test(Re.peek()))return Re.eatWhile(/[\w.%]/),Ae("number","unit");if(Re.match(/^[^-]+-/))return Ae("meta",M)}else return/[,+>*\/]/.test(We)?Ae(null,"select-op"):We=="."&&Re.match(/^-?[_a-z][_a-z0-9-]*/i)?Ae("qualifier",M):We==":"?Ae("operator",We):/[;{}\[\]\(\)]/.test(We)?Ae(null,We):We=="u"&&Re.match("rl(")?(Re.backUp(1),$e.tokenize=ze,Ae("property","variable")):(Re.eatWhile(/[\w\\\-]/),Ae("property","variable"))}}function ge(Re,$e){for(var We=!1,ut;(ut=Re.next())!=null;){if(We&&ut=="/"){$e.tokenize=fe;break}We=ut=="*"}return Ae("comment","comment")}function Be(Re,$e){for(var We=0,ut;(ut=Re.next())!=null;){if(We>=2&&ut==">"){$e.tokenize=fe;break}We=ut=="-"?We+1:0}return Ae("comment","comment")}function Ue(Re,$e){return function(We,ut){for(var et=!1,At;(At=We.next())!=null&&!(At==Re&&!et);)et=!et&&At=="\\";return et||($e&&We.backUp(1),ut.tokenize=fe),Ae("string","string")}}function ze(Re,$e){return Re.next(),Re.match(/\s*[\"\']/,!1)?$e.tokenize=fe:$e.tokenize=Ue(")",!0),Ae(null,"(")}return{startState:function(Re){return{tokenize:fe,baseIndent:Re||0,stack:[]}},token:function(Re,$e){if($e.tokenize==fe&&Re.eatSpace())return null;var We=$e.tokenize(Re,$e),ut=$e.stack[$e.stack.length-1];return We=="property"?ut=="propertyValue"?D[Re.current()]?We="string-2":re[Re.current()]?We="keyword":We="variable-2":ut=="rule"?Y[Re.current()]||(We+=" error"):!ut||ut=="@media{"?We="tag":ut=="@media"?P[Re.current()]?We="attribute":/^(only|not)$/i.test(Re.current())?We="keyword":Re.current().toLowerCase()=="and"||K[Re.current()]?We="error":We="attribute error":ut=="@mediaType"?P[Re.current()]?We="attribute":Re.current().toLowerCase()=="and"?We="operator":(/^(only|not)$/i.test(Re.current())||K[Re.current()],We="error"):ut=="@mediaType("?Y[Re.current()]||(P[Re.current()]?We="error":Re.current().toLowerCase()=="and"?We="operator":/^(only|not)$/i.test(Re.current())?We="error":We+=" error"):We="error":We=="atom"?!ut||ut=="@media{"?We="builtin":ut=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(Re.current())||(We+=" error"):We="error":ut=="@media"&&M=="{"&&(We="error"),M=="{"?ut=="@media"||ut=="@mediaType"?($e.stack.pop(),$e.stack[$e.stack.length-1]="@media{"):$e.stack.push("rule"):M=="}"?($e.stack.pop(),ut=="propertyValue"&&$e.stack.pop()):M=="@media"?$e.stack.push("@media"):ut=="@media"&&/\b(keyword|attribute)\b/.test(We)?$e.stack.push("@mediaType"):ut=="@mediaType"&&Re.current()==","?$e.stack.pop():ut=="@mediaType"&&M=="("?$e.stack.push("@mediaType("):ut=="@mediaType("&&M==")"?$e.stack.pop():ut=="rule"&&M==":"?$e.stack.push("propertyValue"):ut=="propertyValue"&&M==";"&&$e.stack.pop(),We},indent:function(Re,$e){var We=Re.stack.length;return/^\}/.test($e)&&(We-=Re.stack[Re.stack.length-1]=="propertyValue"?2:1),Re.baseIndent+We*B},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");CodeMirror.multiplexingMode=function(g){var B=Array.prototype.slice.call(arguments,1),M=B.length;function P(K,Y,re){if(typeof Y=="string")return K.indexOf(Y,re);var D=Y.exec(re?K.slice(re):K);return D?D.index+re:-1}return{startState:function(){return{outer:CodeMirror.startState(g),innerActive:null,inner:null}},copyState:function(K){return{outer:CodeMirror.copyState(g,K.outer),innerActive:K.innerActive,inner:K.innerActive&&CodeMirror.copyState(K.innerActive.mode,K.inner)}},token:function(K,Y){if(Y.innerActive){var Be=Y.innerActive,D=K.string,fe=P(D,Be.close,K.pos);if(fe==K.pos)return K.match(Be.close),Y.innerActive=Y.inner=null,Be.delimStyle;fe>-1&&(K.string=D.slice(0,fe));var Ue=Be.mode.token(K,Y.inner);fe>-1&&(K.string=D);var ze=K.current(),fe=ze.indexOf(Be.close);return fe>-1&&K.backUp(ze.length-fe),Ue}else{for(var re=1/0,D=K.string,ne=0;ne<M;++ne){var Ae=B[ne],fe=P(D,Ae.open,K.pos);if(fe==K.pos)return K.match(Ae.open),Y.innerActive=Ae,Y.inner=CodeMirror.startState(Ae.mode,g.indent?g.indent(Y.outer,""):0),Ae.delimStyle;fe!=-1&&fe<re&&(re=fe)}re!=1/0&&(K.string=D.slice(0,re));var ge=g.token(K,Y.outer);return re!=1/0&&(K.string=D),ge}},indent:function(K,Y){var re=K.innerActive?K.innerActive.mode:g;return re.indent?re.indent(K.innerActive?K.inner:K.outer,Y):CodeMirror.Pass},blankLine:function(K){var Y=K.innerActive?K.innerActive.mode:g;if(Y.blankLine&&Y.blankLine(K.innerActive?K.inner:K.outer),K.innerActive)Y.close===`
`&&(K.innerActive=K.inner=null);else for(var re=0;re<M;++re){var D=B[re];D.open===`
`&&(K.innerActive=D,K.inner=CodeMirror.startState(D.mode,Y.indent?Y.indent(K.outer,""):0))}},electricChars:g.electricChars,innerMode:function(K){return K.inner?{state:K.inner,mode:K.innerActive.mode}:{state:K.outer,mode:g}}}};(function(){CodeMirror.defaults.closeTagEnabled=!0,CodeMirror.defaults.closeTagIndent=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"],CodeMirror.defaults.closeTagVoid=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function g(re,D){var ne=CodeMirror.innerMode(re.getMode(),D);if(ne.mode.name=="xml")return ne.state}CodeMirror.defineExtension("closeTag",function(re,D,ne,Ae){if(!re.getOption("closeTagEnabled"))throw CodeMirror.Pass;var fe=re.getCursor(),ge=re.getTokenAt(fe),Be=g(re,ge.state);if(Be){if(D==">"){var Ue=Be.type;if(ge.className=="tag"&&Ue=="closeTag"||(re.replaceSelection(">"),fe={line:fe.line,ch:fe.ch+1},re.setCursor(fe),ge=re.getTokenAt(re.getCursor()),Be=g(re,ge.state),!Be))throw CodeMirror.Pass;var Ue=Be.type;if(ge.className=="tag"&&Ue!="selfcloseTag"){var ze=Be.tagName;ze.length>0&&P(re,Ae,ze)&&B(re,ne,fe,ze);return}re.setSelection({line:fe.line,ch:fe.ch-1},fe),re.replaceSelection("")}else if(D=="/"&&ge.className=="tag"&&ge.string=="<"){var Re=Be.context,ze=Re?Re.tagName:"";if(ze.length>0){Y(re,fe,ze);return}}}throw CodeMirror.Pass});function B(re,D,ne,Ae){M(re,D,Ae)?(re.replaceSelection(`

</`+Ae+">","end"),re.indentLine(ne.line+1),re.indentLine(ne.line+2),re.setCursor({line:ne.line+1,ch:re.getLine(ne.line+1).length})):(re.replaceSelection("</"+Ae+">"),re.setCursor(ne))}function M(re,D,ne){return(typeof D>"u"||D==null||D==!0)&&(D=re.getOption("closeTagIndent")),D||(D=[]),K(D,ne.toLowerCase())!=-1}function P(re,D,ne){return re.getOption("mode")=="xml"?!0:((typeof D>"u"||D==null)&&(D=re.getOption("closeTagVoid")),D||(D=[]),K(D,ne.toLowerCase())==-1)}function K(re,D){if(re.indexOf)return re.indexOf(D);for(var ne=0,Ae=re.length;ne<Ae;++ne)if(re[ne]==D)return ne;return-1}function Y(re,D,ne){re.replaceSelection("/"+ne+">"),re.setCursor({line:D.line,ch:D.ch+ne.length+2})}})();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(g,B){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var K in P)Object.prototype.hasOwnProperty.call(P,K)&&(M[K]=P[K])},extendStatics(g,B)};function __extends(g,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");extendStatics(g,B);function M(){this.constructor=g}g.prototype=B===null?Object.create(B):(M.prototype=B.prototype,new M)}var __assign=function(){return __assign=Object.assign||function(B){for(var M,P=1,K=arguments.length;P<K;P++){M=arguments[P];for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(B[Y]=M[Y])}return B},__assign.apply(this,arguments)};function __awaiter(g,B,M,P){function K(Y){return Y instanceof M?Y:new M(function(re){re(Y)})}return new(M||(M=Promise))(function(Y,re){function D(fe){try{Ae(P.next(fe))}catch(ge){re(ge)}}function ne(fe){try{Ae(P.throw(fe))}catch(ge){re(ge)}}function Ae(fe){fe.done?Y(fe.value):K(fe.value).then(D,ne)}Ae((P=P.apply(g,B||[])).next())})}function __generator(g,B){var M={label:0,sent:function(){if(Y[0]&1)throw Y[1];return Y[1]},trys:[],ops:[]},P,K,Y,re;return re={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function D(Ae){return function(fe){return ne([Ae,fe])}}function ne(Ae){if(P)throw new TypeError("Generator is already executing.");for(;M;)try{if(P=1,K&&(Y=Ae[0]&2?K.return:Ae[0]?K.throw||((Y=K.return)&&Y.call(K),0):K.next)&&!(Y=Y.call(K,Ae[1])).done)return Y;switch(K=0,Y&&(Ae=[Ae[0]&2,Y.value]),Ae[0]){case 0:case 1:Y=Ae;break;case 4:return M.label++,{value:Ae[1],done:!1};case 5:M.label++,K=Ae[1],Ae=[0];continue;case 7:Ae=M.ops.pop(),M.trys.pop();continue;default:if(Y=M.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(Ae[0]===6||Ae[0]===2)){M=0;continue}if(Ae[0]===3&&(!Y||Ae[1]>Y[0]&&Ae[1]<Y[3])){M.label=Ae[1];break}if(Ae[0]===6&&M.label<Y[1]){M.label=Y[1],Y=Ae;break}if(Y&&M.label<Y[2]){M.label=Y[2],M.ops.push(Ae);break}Y[2]&&M.ops.pop(),M.trys.pop();continue}Ae=B.call(g,M)}catch(fe){Ae=[6,fe],K=0}finally{P=Y=0}if(Ae[0]&5)throw Ae[1];return{value:Ae[0]?Ae[1]:void 0,done:!0}}}function __spreadArray(g,B,M){if(M||arguments.length===2)for(var P=0,K=B.length,Y;P<K;P++)(Y||!(P in B))&&(Y||(Y=Array.prototype.slice.call(B,0,P)),Y[P]=B[P]);return g.concat(Y||B)}var Bounds=function(){function g(B,M,P,K){this.left=B,this.top=M,this.width=P,this.height=K}return g.prototype.add=function(B,M,P,K){return new g(this.left+B,this.top+M,this.width+P,this.height+K)},g.fromClientRect=function(B,M){return new g(M.left+B.windowBounds.left,M.top+B.windowBounds.top,M.width,M.height)},g.fromDOMRectList=function(B,M){var P=Array.from(M).find(function(K){return K.width!==0});return P?new g(P.left+B.windowBounds.left,P.top+B.windowBounds.top,P.width,P.height):g.EMPTY},g.EMPTY=new g(0,0,0,0),g}(),parseBounds=function(g,B){return Bounds.fromClientRect(g,B.getBoundingClientRect())},parseDocumentSize=function(g){var B=g.body,M=g.documentElement;if(!B||!M)throw new Error("Unable to get document size");var P=Math.max(Math.max(B.scrollWidth,M.scrollWidth),Math.max(B.offsetWidth,M.offsetWidth),Math.max(B.clientWidth,M.clientWidth)),K=Math.max(Math.max(B.scrollHeight,M.scrollHeight),Math.max(B.offsetHeight,M.offsetHeight),Math.max(B.clientHeight,M.clientHeight));return new Bounds(0,0,P,K)},toCodePoints$1=function(g){for(var B=[],M=0,P=g.length;M<P;){var K=g.charCodeAt(M++);if(K>=55296&&K<=56319&&M<P){var Y=g.charCodeAt(M++);(Y&64512)===56320?B.push(((K&1023)<<10)+(Y&1023)+65536):(B.push(K),M--)}else B.push(K)}return B},fromCodePoint$1=function(){for(var g=[],B=0;B<arguments.length;B++)g[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,g);var M=g.length;if(!M)return"";for(var P=[],K=-1,Y="";++K<M;){var re=g[K];re<=65535?P.push(re):(re-=65536,P.push((re>>10)+55296,re%1024+56320)),(K+1===M||P.length>16384)&&(Y+=String.fromCharCode.apply(String,P),P.length=0)}return Y},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(g){var B=g.length*.75,M=g.length,P,K=0,Y,re,D,ne;g[g.length-1]==="="&&(B--,g[g.length-2]==="="&&B--);var Ae=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),fe=Array.isArray(Ae)?Ae:new Uint8Array(Ae);for(P=0;P<M;P+=4)Y=lookup$1$1[g.charCodeAt(P)],re=lookup$1$1[g.charCodeAt(P+1)],D=lookup$1$1[g.charCodeAt(P+2)],ne=lookup$1$1[g.charCodeAt(P+3)],fe[K++]=Y<<2|re>>4,fe[K++]=(re&15)<<4|D>>2,fe[K++]=(D&3)<<6|ne&63;return Ae},polyUint16Array$1=function(g){for(var B=g.length,M=[],P=0;P<B;P+=2)M.push(g[P+1]<<8|g[P]);return M},polyUint32Array$1=function(g){for(var B=g.length,M=[],P=0;P<B;P+=4)M.push(g[P+3]<<24|g[P+2]<<16|g[P+1]<<8|g[P]);return M},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=6+5,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(g,B,M){return g.slice?g.slice(B,M):new Uint16Array(Array.prototype.slice.call(g,B,M))},slice32$1=function(g,B,M){return g.slice?g.slice(B,M):new Uint32Array(Array.prototype.slice.call(g,B,M))},createTrieFromBase64$1=function(g,B){var M=decode$1(g),P=Array.isArray(M)?polyUint32Array$1(M):new Uint32Array(M),K=Array.isArray(M)?polyUint16Array$1(M):new Uint16Array(M),Y=24,re=slice16$1(K,Y/2,P[4]/2),D=P[5]===2?slice16$1(K,(Y+P[4])/2):slice32$1(P,Math.ceil((Y+P[4])/4));return new Trie$1(P[0],P[1],P[2],P[3],re,D)},Trie$1=function(){function g(B,M,P,K,Y,re){this.initialValue=B,this.errorValue=M,this.highStart=P,this.highValueIndex=K,this.index=Y,this.data=re}return g.prototype.get=function(B){var M;if(B>=0){if(B<55296||B>56319&&B<=65535)return M=this.index[B>>UTRIE2_SHIFT_2$1],M=(M<<UTRIE2_INDEX_SHIFT$1)+(B&UTRIE2_DATA_MASK$1),this.data[M];if(B<=65535)return M=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(B-55296>>UTRIE2_SHIFT_2$1)],M=(M<<UTRIE2_INDEX_SHIFT$1)+(B&UTRIE2_DATA_MASK$1),this.data[M];if(B<this.highStart)return M=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(B>>UTRIE2_SHIFT_1$1),M=this.index[M],M+=B>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,M=this.index[M],M=(M<<UTRIE2_INDEX_SHIFT$1)+(B&UTRIE2_DATA_MASK$1),this.data[M];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},g}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="Ã",BREAK_ALLOWED$1="Ã·",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(g,B){B===void 0&&(B="strict");var M=[],P=[],K=[];return g.forEach(function(Y,re){var D=UnicodeTrie$1.get(Y);if(D>LETTER_NUMBER_MODIFIER?(K.push(!0),D-=LETTER_NUMBER_MODIFIER):K.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf(Y)!==-1)return P.push(re),M.push(CB);if(D===CM||D===ZWJ$1){if(re===0)return P.push(re),M.push(AL);var ne=M[re-1];return LINE_BREAKS.indexOf(ne)===-1?(P.push(P[re-1]),M.push(ne)):(P.push(re),M.push(AL))}if(P.push(re),D===CJ)return M.push(B==="strict"?NS:ID);if(D===SA||D===AI)return M.push(AL);if(D===XX)return Y>=131072&&Y<=196605||Y>=196608&&Y<=262141?M.push(ID):M.push(AL);M.push(D)}),[P,M,K]},isAdjacentWithSpaceIgnored=function(g,B,M,P){var K=P[M];if(Array.isArray(g)?g.indexOf(K)!==-1:g===K)for(var Y=M;Y<=P.length;){Y++;var re=P[Y];if(re===B)return!0;if(re!==SP)break}if(K===SP)for(var Y=M;Y>0;){Y--;var D=P[Y];if(Array.isArray(g)?g.indexOf(D)!==-1:g===D)for(var ne=M;ne<=P.length;){ne++;var re=P[ne];if(re===B)return!0;if(re!==SP)break}if(D!==SP)break}return!1},previousNonSpaceClassType=function(g,B){for(var M=g;M>=0;){var P=B[M];if(P===SP)M--;else return P}return 0},_lineBreakAtIndex=function(g,B,M,P,K){if(M[P]===0)return BREAK_NOT_ALLOWED$1;var Y=P-1;if(Array.isArray(K)&&K[Y]===!0)return BREAK_NOT_ALLOWED$1;var re=Y-1,D=Y+1,ne=B[Y],Ae=re>=0?B[re]:0,fe=B[D];if(ne===CR$1&&fe===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(ne)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(fe)!==-1||SPACE$1.indexOf(fe)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(Y,B)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(g[Y])===ZWJ$1||(ne===EB||ne===EM)&&UnicodeTrie$1.get(g[D])===ZWJ$1||ne===WJ||fe===WJ||ne===GL||[SP,BA,HY].indexOf(ne)===-1&&fe===GL||[CL,CP,EX,IS,SY].indexOf(fe)!==-1||previousNonSpaceClassType(Y,B)===OP||isAdjacentWithSpaceIgnored(QU,OP,Y,B)||isAdjacentWithSpaceIgnored([CL,CP],NS,Y,B)||isAdjacentWithSpaceIgnored(B2,B2,Y,B))return BREAK_NOT_ALLOWED$1;if(ne===SP)return BREAK_ALLOWED$1;if(ne===QU||fe===QU)return BREAK_NOT_ALLOWED$1;if(fe===CB||ne===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(fe)!==-1||ne===BB||Ae===HL&&HYPHEN.indexOf(ne)!==-1||ne===SY&&fe===HL||fe===IN||ALPHABETICS.indexOf(fe)!==-1&&ne===NU||ALPHABETICS.indexOf(ne)!==-1&&fe===NU||ne===PR&&[ID,EB,EM].indexOf(fe)!==-1||[ID,EB,EM].indexOf(ne)!==-1&&fe===PO||ALPHABETICS.indexOf(ne)!==-1&&PREFIX_POSTFIX.indexOf(fe)!==-1||PREFIX_POSTFIX.indexOf(ne)!==-1&&ALPHABETICS.indexOf(fe)!==-1||[PR,PO].indexOf(ne)!==-1&&(fe===NU||[OP,HY].indexOf(fe)!==-1&&B[D+1]===NU)||[OP,HY].indexOf(ne)!==-1&&fe===NU||ne===NU&&[NU,SY,IS].indexOf(fe)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(fe)!==-1)for(var ge=Y;ge>=0;){var Be=B[ge];if(Be===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(Be)!==-1)ge--;else break}if([PR,PO].indexOf(fe)!==-1)for(var ge=[CL,CP].indexOf(ne)!==-1?re:Y;ge>=0;){var Be=B[ge];if(Be===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(Be)!==-1)ge--;else break}if(JL===ne&&[JL,JV,H2,H3].indexOf(fe)!==-1||[JV,H2].indexOf(ne)!==-1&&[JV,JT].indexOf(fe)!==-1||[JT,H3].indexOf(ne)!==-1&&fe===JT||KOREAN_SYLLABLE_BLOCK.indexOf(ne)!==-1&&[IN,PO].indexOf(fe)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(fe)!==-1&&ne===PR||ALPHABETICS.indexOf(ne)!==-1&&ALPHABETICS.indexOf(fe)!==-1||ne===IS&&ALPHABETICS.indexOf(fe)!==-1||ALPHABETICS.concat(NU).indexOf(ne)!==-1&&fe===OP&&ea_OP.indexOf(g[D])===-1||ALPHABETICS.concat(NU).indexOf(fe)!==-1&&ne===CP)return BREAK_NOT_ALLOWED$1;if(ne===RI$1&&fe===RI$1){for(var Ue=M[Y],ze=1;Ue>0&&(Ue--,B[Ue]===RI$1);)ze++;if(ze%2!==0)return BREAK_NOT_ALLOWED$1}return ne===EB&&fe===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(g,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var M=codePointsToCharacterClasses(g,B.lineBreak),P=M[0],K=M[1],Y=M[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(K=K.map(function(D){return[NU,AL,SA].indexOf(D)!==-1?ID:D}));var re=B.wordBreak==="keep-all"?Y.map(function(D,ne){return D&&g[ne]>=19968&&g[ne]<=40959}):void 0;return[P,K,re]},Break=function(){function g(B,M,P,K){this.codePoints=B,this.required=M===BREAK_MANDATORY,this.start=P,this.end=K}return g.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},g}(),LineBreaker=function(g,B){var M=toCodePoints$1(g),P=cssFormattedClasses(M,B),K=P[0],Y=P[1],re=P[2],D=M.length,ne=0,Ae=0;return{next:function(){if(Ae>=D)return{done:!0,value:null};for(var fe=BREAK_NOT_ALLOWED$1;Ae<D&&(fe=_lineBreakAtIndex(M,Y,K,++Ae,re))===BREAK_NOT_ALLOWED$1;);if(fe!==BREAK_NOT_ALLOWED$1||Ae===D){var ge=new Break(M,fe,ne,Ae);return ne=Ae,{value:ge,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a$1=97,e$1=101,f$1=102,u$1=117,z=122,A=65,E=69,F=70,U=85,Z=90,isDigit=function(g){return g>=ZERO&&g<=57},isSurrogateCodePoint=function(g){return g>=55296&&g<=57343},isHex=function(g){return isDigit(g)||g>=A&&g<=F||g>=a$1&&g<=f$1},isLowerCaseLetter=function(g){return g>=a$1&&g<=z},isUpperCaseLetter=function(g){return g>=A&&g<=Z},isLetter=function(g){return isLowerCaseLetter(g)||isUpperCaseLetter(g)},isNonASCIICodePoint=function(g){return g>=CONTROL},isWhiteSpace=function(g){return g===LINE_FEED||g===CHARACTER_TABULATION||g===SPACE},isNameStartCodePoint=function(g){return isLetter(g)||isNonASCIICodePoint(g)||g===LOW_LINE},isNameCodePoint=function(g){return isNameStartCodePoint(g)||isDigit(g)||g===HYPHEN_MINUS},isNonPrintableCodePoint=function(g){return g>=NULL&&g<=BACKSPACE||g===LINE_TABULATION||g>=SHIFT_OUT&&g<=INFORMATION_SEPARATOR_ONE||g===DELETE},isValidEscape=function(g,B){return g!==REVERSE_SOLIDUS?!1:B!==LINE_FEED},isIdentifierStart=function(g,B,M){return g===HYPHEN_MINUS?isNameStartCodePoint(B)||isValidEscape(B,M):isNameStartCodePoint(g)?!0:!!(g===REVERSE_SOLIDUS&&isValidEscape(g,B))},isNumberStart=function(g,B,M){return g===PLUS_SIGN||g===HYPHEN_MINUS?isDigit(B)?!0:B===FULL_STOP&&isDigit(M):isDigit(g===FULL_STOP?B:g)},stringToNumber=function(g){var B=0,M=1;(g[B]===PLUS_SIGN||g[B]===HYPHEN_MINUS)&&(g[B]===HYPHEN_MINUS&&(M=-1),B++);for(var P=[];isDigit(g[B]);)P.push(g[B++]);var K=P.length?parseInt(fromCodePoint$1.apply(void 0,P),10):0;g[B]===FULL_STOP&&B++;for(var Y=[];isDigit(g[B]);)Y.push(g[B++]);var re=Y.length,D=re?parseInt(fromCodePoint$1.apply(void 0,Y),10):0;(g[B]===E||g[B]===e$1)&&B++;var ne=1;(g[B]===PLUS_SIGN||g[B]===HYPHEN_MINUS)&&(g[B]===HYPHEN_MINUS&&(ne=-1),B++);for(var Ae=[];isDigit(g[B]);)Ae.push(g[B++]);var fe=Ae.length?parseInt(fromCodePoint$1.apply(void 0,Ae),10):0;return M*(K+D*Math.pow(10,-re))*Math.pow(10,ne*fe)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function g(){this._value=[]}return g.prototype.write=function(B){this._value=this._value.concat(toCodePoints$1(B))},g.prototype.read=function(){for(var B=[],M=this.consumeToken();M!==EOF_TOKEN;)B.push(M),M=this.consumeToken();return B},g.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var M=this.peekCodePoint(0),P=this.peekCodePoint(1),K=this.peekCodePoint(2);if(isNameCodePoint(M)||isValidEscape(P,K)){var Y=isIdentifierStart(M,P,K)?FLAG_ID:FLAG_UNRESTRICTED,re=this.consumeName();return{type:5,value:re,flags:Y}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var D=B,ne=this.peekCodePoint(0),Ae=this.peekCodePoint(1);if(isNumberStart(D,ne,Ae))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(isIdentifierStart(D,ne,Ae))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(ne===HYPHEN_MINUS&&Ae===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var fe=this.consumeCodePoint();if(fe===ASTERISK&&(fe=this.consumeCodePoint(),fe===SOLIDUS))return this.consumeToken();if(fe===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var ge=this.peekCodePoint(0),Be=this.peekCodePoint(1),Ue=this.peekCodePoint(2);if(isIdentifierStart(ge,Be,Ue)){var re=this.consumeName();return{type:7,value:re}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u$1:case U:var ze=this.peekCodePoint(0),Re=this.peekCodePoint(1);return ze===PLUS_SIGN&&(isHex(Re)||Re===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(B)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):isNameStartCodePoint(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(B)}},g.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},g.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},g.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},g.prototype.consumeUnicodeRangeToken=function(){for(var B=[],M=this.consumeCodePoint();isHex(M)&&B.length<6;)B.push(M),M=this.consumeCodePoint();for(var P=!1;M===QUESTION_MARK&&B.length<6;)B.push(M),M=this.consumeCodePoint(),P=!0;if(P){var K=parseInt(fromCodePoint$1.apply(void 0,B.map(function(ne){return ne===QUESTION_MARK?ZERO:ne})),16),Y=parseInt(fromCodePoint$1.apply(void 0,B.map(function(ne){return ne===QUESTION_MARK?F:ne})),16);return{type:30,start:K,end:Y}}var re=parseInt(fromCodePoint$1.apply(void 0,B),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),M=this.consumeCodePoint();for(var D=[];isHex(M)&&D.length<6;)D.push(M),M=this.consumeCodePoint();var Y=parseInt(fromCodePoint$1.apply(void 0,D),16);return{type:30,start:re,end:Y}}else return{type:30,start:re,end:re}},g.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},g.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var M=this.peekCodePoint(0);if(M===APOSTROPHE||M===QUOTATION_MARK){var P=this.consumeStringToken(this.consumeCodePoint());return P.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:P.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var K=this.consumeCodePoint();if(K===EOF||K===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,B)};if(isWhiteSpace(K))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,B)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(K===QUOTATION_MARK||K===APOSTROPHE||K===LEFT_PARENTHESIS||isNonPrintableCodePoint(K))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(K===REVERSE_SOLIDUS)if(isValidEscape(K,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else B.push(K)}},g.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},g.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===RIGHT_PARENTHESIS||B===EOF)return;isValidEscape(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},g.prototype.consumeStringSlice=function(B){for(var M=5e4,P="";B>0;){var K=Math.min(M,B);P+=fromCodePoint$1.apply(void 0,this._value.splice(0,K)),B-=K}return this._value.shift(),P},g.prototype.consumeStringToken=function(B){var M="",P=0;do{var K=this._value[P];if(K===EOF||K===void 0||K===B)return M+=this.consumeStringSlice(P),{type:0,value:M};if(K===LINE_FEED)return this._value.splice(0,P),BAD_STRING_TOKEN;if(K===REVERSE_SOLIDUS){var Y=this._value[P+1];Y!==EOF&&Y!==void 0&&(Y===LINE_FEED?(M+=this.consumeStringSlice(P),P=-1,this._value.shift()):isValidEscape(K,Y)&&(M+=this.consumeStringSlice(P),M+=fromCodePoint$1(this.consumeEscapedCodePoint()),P=-1))}P++}while(!0)},g.prototype.consumeNumber=function(){var B=[],M=FLAG_INTEGER,P=this.peekCodePoint(0);for((P===PLUS_SIGN||P===HYPHEN_MINUS)&&B.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)B.push(this.consumeCodePoint());P=this.peekCodePoint(0);var K=this.peekCodePoint(1);if(P===FULL_STOP&&isDigit(K))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),M=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)B.push(this.consumeCodePoint());P=this.peekCodePoint(0),K=this.peekCodePoint(1);var Y=this.peekCodePoint(2);if((P===E||P===e$1)&&((K===PLUS_SIGN||K===HYPHEN_MINUS)&&isDigit(Y)||isDigit(K)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),M=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[stringToNumber(B),M]},g.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),M=B[0],P=B[1],K=this.peekCodePoint(0),Y=this.peekCodePoint(1),re=this.peekCodePoint(2);if(isIdentifierStart(K,Y,re)){var D=this.consumeName();return{type:15,number:M,flags:P,unit:D}}return K===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:M,flags:P}):{type:17,number:M,flags:P}},g.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(isHex(B)){for(var M=fromCodePoint$1(B);isHex(this.peekCodePoint(0))&&M.length<6;)M+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var P=parseInt(M,16);return P===0||isSurrogateCodePoint(P)||P>1114111?REPLACEMENT_CHARACTER:P}return B===EOF?REPLACEMENT_CHARACTER:B},g.prototype.consumeName=function(){for(var B="";;){var M=this.consumeCodePoint();if(isNameCodePoint(M))B+=fromCodePoint$1(M);else if(isValidEscape(M,this.peekCodePoint(0)))B+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(M),B}},g}(),Parser$1=function(){function g(B){this._tokens=B}return g.create=function(B){var M=new Tokenizer;return M.write(B),new g(M.read())},g.parseValue=function(B){return g.create(B).parseComponentValue()},g.parseValues=function(B){return g.create(B).parseComponentValues()},g.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var M=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return M;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},g.prototype.parseComponentValues=function(){for(var B=[];;){var M=this.consumeComponentValue();if(M.type===32)return B;B.push(M),B.push()}},g.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},g.prototype.consumeSimpleBlock=function(B){for(var M={type:B,values:[]},P=this.consumeToken();;){if(P.type===32||isEndingTokenFor(P,B))return M;this.reconsumeToken(P),M.values.push(this.consumeComponentValue()),P=this.consumeToken()}},g.prototype.consumeFunction=function(B){for(var M={name:B.value,values:[],type:18};;){var P=this.consumeToken();if(P.type===32||P.type===3)return M;this.reconsumeToken(P),M.values.push(this.consumeComponentValue())}},g.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?EOF_TOKEN:B},g.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},g}(),isDimensionToken=function(g){return g.type===15},isNumberToken=function(g){return g.type===17},isIdentToken=function(g){return g.type===20},isStringToken=function(g){return g.type===0},isIdentWithValue=function(g,B){return isIdentToken(g)&&g.value===B},nonWhiteSpace=function(g){return g.type!==31},nonFunctionArgSeparator=function(g){return g.type!==31&&g.type!==4},parseFunctionArgs=function(g){var B=[],M=[];return g.forEach(function(P){if(P.type===4){if(M.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(M),M=[];return}P.type!==31&&M.push(P)}),M.length&&B.push(M),B},isEndingTokenFor=function(g,B){return B===11&&g.type===12||B===28&&g.type===29?!0:B===2&&g.type===3},isLength=function(g){return g.type===17||g.type===15},isLengthPercentage=function(g){return g.type===16||isLength(g)},parseLengthPercentageTuple=function(g){return g.length>1?[g[0],g[1]]:[g[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(g,B,M){var P=g[0],K=g[1];return[getAbsoluteValue(P,B),getAbsoluteValue(typeof K<"u"?K:P,M)]},getAbsoluteValue=function(g,B){if(g.type===16)return g.number/100*B;if(isDimensionToken(g))switch(g.unit){case"rem":case"em":return 16*g.number;case"px":default:return g.number}return g.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(g,B){if(B.type===15)switch(B.unit){case DEG:return Math.PI*B.number/180;case GRAD:return Math.PI/200*B.number;case RAD:return B.number;case TURN:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},isAngle=function(g){return g.type===15&&(g.unit===DEG||g.unit===GRAD||g.unit===RAD||g.unit===TURN)},parseNamedSide=function(g){var B=g.filter(isIdentToken).map(function(M){return M.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(g){return Math.PI*g/180},color$1={name:"color",parse:function(g,B){if(B.type===18){var M=SUPPORTED_COLOR_FUNCTIONS[B.name];if(typeof M>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return M(g,B.values)}if(B.type===5){if(B.value.length===3){var P=B.value.substring(0,1),K=B.value.substring(1,2),Y=B.value.substring(2,3);return pack(parseInt(P+P,16),parseInt(K+K,16),parseInt(Y+Y,16),1)}if(B.value.length===4){var P=B.value.substring(0,1),K=B.value.substring(1,2),Y=B.value.substring(2,3),re=B.value.substring(3,4);return pack(parseInt(P+P,16),parseInt(K+K,16),parseInt(Y+Y,16),parseInt(re+re,16)/255)}if(B.value.length===6){var P=B.value.substring(0,2),K=B.value.substring(2,4),Y=B.value.substring(4,6);return pack(parseInt(P,16),parseInt(K,16),parseInt(Y,16),1)}if(B.value.length===8){var P=B.value.substring(0,2),K=B.value.substring(2,4),Y=B.value.substring(4,6),re=B.value.substring(6,8);return pack(parseInt(P,16),parseInt(K,16),parseInt(Y,16),parseInt(re,16)/255)}}if(B.type===20){var D=COLORS[B.value.toUpperCase()];if(typeof D<"u")return D}return COLORS.TRANSPARENT}},isTransparent=function(g){return(255&g)===0},asString=function(g){var B=255&g,M=255&g>>8,P=255&g>>16,K=255&g>>24;return B<255?"rgba("+K+","+P+","+M+","+B/255+")":"rgb("+K+","+P+","+M+")"},pack=function(g,B,M,P){return(g<<24|B<<16|M<<8|Math.round(P*255)<<0)>>>0},getTokenColorValue=function(g,B){if(g.type===17)return g.number;if(g.type===16){var M=B===3?1:255;return B===3?g.number/100*M:Math.round(g.number/100*M)}return 0},rgb=function(g,B){var M=B.filter(nonFunctionArgSeparator);if(M.length===3){var P=M.map(getTokenColorValue),K=P[0],Y=P[1],re=P[2];return pack(K,Y,re,1)}if(M.length===4){var D=M.map(getTokenColorValue),K=D[0],Y=D[1],re=D[2],ne=D[3];return pack(K,Y,re,ne)}return 0};function hue2rgb(g,B,M){return M<0&&(M+=1),M>=1&&(M-=1),M<1/6?(B-g)*M*6+g:M<1/2?B:M<2/3?(B-g)*6*(2/3-M)+g:g}var hsl=function(g,B){var M=B.filter(nonFunctionArgSeparator),P=M[0],K=M[1],Y=M[2],re=M[3],D=(P.type===17?deg(P.number):angle.parse(g,P))/(Math.PI*2),ne=isLengthPercentage(K)?K.number/100:0,Ae=isLengthPercentage(Y)?Y.number/100:0,fe=typeof re<"u"&&isLengthPercentage(re)?getAbsoluteValue(re,1):1;if(ne===0)return pack(Ae*255,Ae*255,Ae*255,1);var ge=Ae<=.5?Ae*(ne+1):Ae+ne-Ae*ne,Be=Ae*2-ge,Ue=hue2rgb(Be,ge,D+1/3),ze=hue2rgb(Be,ge,D),Re=hue2rgb(Be,ge,D-1/3);return pack(Ue*255,ze*255,Re*255,fe)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(g,B){return color$1.parse(g,Parser$1.create(B).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(g,B){return B.map(function(M){if(isIdentToken(M))switch(M.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(g,B){var M=color$1.parse(g,B[0]),P=B[1];return P&&isLengthPercentage(P)?{color:M,stop:P}:{color:M,stop:null}},processColorStops=function(g,B){var M=g[0],P=g[g.length-1];M.stop===null&&(M.stop=ZERO_LENGTH),P.stop===null&&(P.stop=HUNDRED_PERCENT);for(var K=[],Y=0,re=0;re<g.length;re++){var D=g[re].stop;if(D!==null){var ne=getAbsoluteValue(D,B);ne>Y?K.push(ne):K.push(Y),Y=ne}else K.push(null)}for(var Ae=null,re=0;re<K.length;re++){var fe=K[re];if(fe===null)Ae===null&&(Ae=re);else if(Ae!==null){for(var ge=re-Ae,Be=K[Ae-1],Ue=(fe-Be)/(ge+1),ze=1;ze<=ge;ze++)K[Ae+ze-1]=Ue*ze;Ae=null}}return g.map(function(Re,$e){var We=Re.color;return{color:We,stop:Math.max(Math.min(1,K[$e]/B),0)}})},getAngleFromCorner=function(g,B,M){var P=B/2,K=M/2,Y=getAbsoluteValue(g[0],B)-P,re=K-getAbsoluteValue(g[1],M);return(Math.atan2(re,Y)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(g,B,M){var P=typeof g=="number"?g:getAngleFromCorner(g,B,M),K=Math.abs(B*Math.sin(P))+Math.abs(M*Math.cos(P)),Y=B/2,re=M/2,D=K/2,ne=Math.sin(P-Math.PI/2)*D,Ae=Math.cos(P-Math.PI/2)*D;return[K,Y-Ae,Y+Ae,re-ne,re+ne]},distance=function(g,B){return Math.sqrt(g*g+B*B)},findCorner=function(g,B,M,P,K){var Y=[[0,0],[0,B],[g,0],[g,B]];return Y.reduce(function(re,D){var ne=D[0],Ae=D[1],fe=distance(M-ne,P-Ae);return(K?fe<re.optimumDistance:fe>re.optimumDistance)?{optimumCorner:D,optimumDistance:fe}:re},{optimumDistance:K?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(g,B,M,P,K){var Y=0,re=0;switch(g.size){case 0:g.shape===0?Y=re=Math.min(Math.abs(B),Math.abs(B-P),Math.abs(M),Math.abs(M-K)):g.shape===1&&(Y=Math.min(Math.abs(B),Math.abs(B-P)),re=Math.min(Math.abs(M),Math.abs(M-K)));break;case 2:if(g.shape===0)Y=re=Math.min(distance(B,M),distance(B,M-K),distance(B-P,M),distance(B-P,M-K));else if(g.shape===1){var D=Math.min(Math.abs(M),Math.abs(M-K))/Math.min(Math.abs(B),Math.abs(B-P)),ne=findCorner(P,K,B,M,!0),Ae=ne[0],fe=ne[1];Y=distance(Ae-B,(fe-M)/D),re=D*Y}break;case 1:g.shape===0?Y=re=Math.max(Math.abs(B),Math.abs(B-P),Math.abs(M),Math.abs(M-K)):g.shape===1&&(Y=Math.max(Math.abs(B),Math.abs(B-P)),re=Math.max(Math.abs(M),Math.abs(M-K)));break;case 3:if(g.shape===0)Y=re=Math.max(distance(B,M),distance(B,M-K),distance(B-P,M),distance(B-P,M-K));else if(g.shape===1){var D=Math.max(Math.abs(M),Math.abs(M-K))/Math.max(Math.abs(B),Math.abs(B-P)),ge=findCorner(P,K,B,M,!1),Ae=ge[0],fe=ge[1];Y=distance(Ae-B,(fe-M)/D),re=D*Y}break}return Array.isArray(g.size)&&(Y=getAbsoluteValue(g.size[0],P),re=g.size.length===2?getAbsoluteValue(g.size[1],K):Y),[Y,re]},linearGradient=function(g,B){var M=deg(180),P=[];return parseFunctionArgs(B).forEach(function(K,Y){if(Y===0){var re=K[0];if(re.type===20&&re.value==="to"){M=parseNamedSide(K);return}else if(isAngle(re)){M=angle.parse(g,re);return}}var D=parseColorStop(g,K);P.push(D)}),{angle:M,stops:P,type:1}},prefixLinearGradient=function(g,B){var M=deg(180),P=[];return parseFunctionArgs(B).forEach(function(K,Y){if(Y===0){var re=K[0];if(re.type===20&&["top","left","right","bottom"].indexOf(re.value)!==-1){M=parseNamedSide(K);return}else if(isAngle(re)){M=(angle.parse(g,re)+deg(270))%deg(360);return}}var D=parseColorStop(g,K);P.push(D)}),{angle:M,stops:P,type:1}},webkitGradient=function(g,B){var M=deg(180),P=[],K=1,Y=0,re=3,D=[];return parseFunctionArgs(B).forEach(function(ne,Ae){var fe=ne[0];if(Ae===0){if(isIdentToken(fe)&&fe.value==="linear"){K=1;return}else if(isIdentToken(fe)&&fe.value==="radial"){K=2;return}}if(fe.type===18){if(fe.name==="from"){var ge=color$1.parse(g,fe.values[0]);P.push({stop:ZERO_LENGTH,color:ge})}else if(fe.name==="to"){var ge=color$1.parse(g,fe.values[0]);P.push({stop:HUNDRED_PERCENT,color:ge})}else if(fe.name==="color-stop"){var Be=fe.values.filter(nonFunctionArgSeparator);if(Be.length===2){var ge=color$1.parse(g,Be[1]),Ue=Be[0];isNumberToken(Ue)&&P.push({stop:{type:16,number:Ue.number*100,flags:Ue.flags},color:ge})}}}}),K===1?{angle:(M+deg(180))%deg(360),stops:P,type:K}:{size:re,shape:Y,stops:P,position:D,type:K}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(g,B){var M=0,P=3,K=[],Y=[];return parseFunctionArgs(B).forEach(function(re,D){var ne=!0;if(D===0){var Ae=!1;ne=re.reduce(function(ge,Be){if(Ae)if(isIdentToken(Be))switch(Be.value){case"center":return Y.push(FIFTY_PERCENT),ge;case"top":case"left":return Y.push(ZERO_LENGTH),ge;case"right":case"bottom":return Y.push(HUNDRED_PERCENT),ge}else(isLengthPercentage(Be)||isLength(Be))&&Y.push(Be);else if(isIdentToken(Be))switch(Be.value){case CIRCLE:return M=0,!1;case ELLIPSE:return M=1,!1;case"at":return Ae=!0,!1;case CLOSEST_SIDE:return P=0,!1;case COVER:case FARTHEST_SIDE:return P=1,!1;case CONTAIN:case CLOSEST_CORNER:return P=2,!1;case FARTHEST_CORNER:return P=3,!1}else if(isLength(Be)||isLengthPercentage(Be))return Array.isArray(P)||(P=[]),P.push(Be),!1;return ge},ne)}if(ne){var fe=parseColorStop(g,re);K.push(fe)}}),{size:P,shape:M,stops:K,position:Y,type:2}},prefixRadialGradient=function(g,B){var M=0,P=3,K=[],Y=[];return parseFunctionArgs(B).forEach(function(re,D){var ne=!0;if(D===0?ne=re.reduce(function(fe,ge){if(isIdentToken(ge))switch(ge.value){case"center":return Y.push(FIFTY_PERCENT),!1;case"top":case"left":return Y.push(ZERO_LENGTH),!1;case"right":case"bottom":return Y.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(ge)||isLength(ge))return Y.push(ge),!1;return fe},ne):D===1&&(ne=re.reduce(function(fe,ge){if(isIdentToken(ge))switch(ge.value){case CIRCLE:return M=0,!1;case ELLIPSE:return M=1,!1;case CONTAIN:case CLOSEST_SIDE:return P=0,!1;case FARTHEST_SIDE:return P=1,!1;case CLOSEST_CORNER:return P=2,!1;case COVER:case FARTHEST_CORNER:return P=3,!1}else if(isLength(ge)||isLengthPercentage(ge))return Array.isArray(P)||(P=[]),P.push(ge),!1;return fe},ne)),ne){var Ae=parseColorStop(g,re);K.push(Ae)}}),{size:P,shape:M,stops:K,position:Y,type:2}},isLinearGradient=function(g){return g.type===1},isRadialGradient=function(g){return g.type===2},image={name:"image",parse:function(g,B){if(B.type===22){var M={url:B.value,type:0};return g.cache.addImage(B.value),M}if(B.type===18){var P=SUPPORTED_IMAGE_FUNCTIONS[B.name];if(typeof P>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return P(g,B.values)}throw new Error("Unsupported image type "+B.type)}};function isSupportedImage(g){return!(g.type===20&&g.value==="none")&&(g.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[g.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(g,B){if(B.length===0)return[];var M=B[0];return M.type===20&&M.value==="none"?[]:B.filter(function(P){return nonFunctionArgSeparator(P)&&isSupportedImage(P)}).map(function(P){return image.parse(g,P)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(g,B){return B.map(function(M){if(isIdentToken(M))switch(M.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(g,B){return parseFunctionArgs(B).map(function(M){return M.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(g,B){return parseFunctionArgs(B).map(function(M){return M.filter(isIdentToken).map(function(P){return P.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(g){switch(g){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(g){g.AUTO="auto",g.CONTAIN="contain",g.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(g,B){return parseFunctionArgs(B).map(function(M){return M.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(g){return isIdentToken(g)||isLengthPercentage(g)},borderColorForSide=function(g){return{name:"border-"+g+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(g){return{name:"border-radius-"+g,initialValue:"0 0",prefix:!1,type:1,parse:function(B,M){return parseLengthPercentageTuple(M.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(g){return{name:"border-"+g+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,M){switch(M){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(g){return{name:"border-"+g+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,M){return isDimensionToken(M)?M.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(g,B){switch(B){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(g,B){return B.filter(isIdentToken).reduce(function(M,P){return M|parseDisplayValue(P.value)},0)}},parseDisplayValue=function(g){switch(g){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(g,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},LINE_BREAK;(function(g){g.NORMAL="normal",g.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(g,B){return isIdentToken(g)&&g.value==="normal"?1.2*B:g.type===17?B*g.number:isLengthPercentage(g)?getAbsoluteValue(g,B):B},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(g,B){return B.type===20&&B.value==="none"?null:image.parse(g,B)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(g,B){switch(B){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(g){return{name:"margin-"+g,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(g,B){return B.filter(isIdentToken).map(function(M){switch(M.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(g){return{name:"padding-"+g,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(g,B){switch(B){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(g,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(g,B){return B.length===1&&isIdentWithValue(B[0],"none")?[]:parseFunctionArgs(B).map(function(M){for(var P={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},K=0,Y=0;Y<M.length;Y++){var re=M[Y];isLength(re)?(K===0?P.offsetX=re:K===1?P.offsetY=re:P.blur=re,K++):P.color=color$1.parse(g,re)}return P})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(g,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var M=SUPPORTED_TRANSFORM_FUNCTIONS[B.name];if(typeof M>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return M(B.values)}return null}},matrix=function(g){var B=g.filter(function(M){return M.type===17}).map(function(M){return M.number});return B.length===6?B:null},matrix3d=function(g){var B=g.filter(function(ne){return ne.type===17}).map(function(ne){return ne.number}),M=B[0],P=B[1];B[2],B[3];var K=B[4],Y=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var re=B[12],D=B[13];return B[14],B[15],B.length===16?[M,P,K,Y,re,D]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(g,B){var M=B.filter(isLengthPercentage);return M.length!==2?DEFAULT:[M[0],M[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(g,B){switch(B){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(g){g.NORMAL="normal",g.BREAK_ALL="break-all",g.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(g,B){if(B.type===20)return{auto:!0,order:0};if(isNumberToken(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(g,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(g,B){return isNumberToken(B)?B.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(g,B){return B.filter(isIdentToken).map(function(M){switch(M.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(M){return M!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(g,B){var M=[],P=[];return B.forEach(function(K){switch(K.type){case 20:case 0:M.push(K.value);break;case 17:M.push(K.number.toString());break;case 4:P.push(M.join(" ")),M.length=0;break}}),M.length&&P.push(M.join(" ")),P.map(function(K){return K.indexOf(" ")===-1?K:"'"+K+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(g,B){if(isNumberToken(B))return B.number;if(isIdentToken(B))switch(B.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(g,B){return B.filter(isIdentToken).map(function(M){return M.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(g,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(g,B){return(g&B)!==0},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(g,B){if(B.length===0)return[];var M=B[0];return M.type===20&&M.value==="none"?[]:B}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(g,B){if(B.length===0)return null;var M=B[0];if(M.type===20&&M.value==="none")return null;for(var P=[],K=B.filter(nonWhiteSpace),Y=0;Y<K.length;Y++){var re=K[Y],D=K[Y+1];if(re.type===20){var ne=D&&isNumberToken(D)?D.number:1;P.push({counter:re.value,increment:ne})}}return P}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(g,B){if(B.length===0)return[];for(var M=[],P=B.filter(nonWhiteSpace),K=0;K<P.length;K++){var Y=P[K],re=P[K+1];if(isIdentToken(Y)&&Y.value!=="none"){var D=re&&isNumberToken(re)?re.number:0;M.push({counter:Y.value,reset:D})}}return M}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(g,B){return B.filter(isDimensionToken).map(function(M){return time.parse(g,M)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(g,B){if(B.length===0)return null;var M=B[0];if(M.type===20&&M.value==="none")return null;var P=[],K=B.filter(isStringToken);if(K.length%2!==0)return null;for(var Y=0;Y<K.length;Y+=2){var re=K[Y].value,D=K[Y+1].value;P.push({open:re,close:D})}return P}},getQuote=function(g,B,M){if(!g)return"";var P=g[Math.min(B,g.length-1)];return P?M?P.open:P.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(g,B){return B.length===1&&isIdentWithValue(B[0],"none")?[]:parseFunctionArgs(B).map(function(M){for(var P={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},K=0,Y=0;Y<M.length;Y++){var re=M[Y];isIdentWithValue(re,"inset")?P.inset=!0:isLength(re)?(K===0?P.offsetX=re:K===1?P.offsetY=re:K===2?P.blur=re:P.spread=re,K++):P.color=color$1.parse(g,re)}return P})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(g,B){var M=[0,1,2],P=[];return B.filter(isIdentToken).forEach(function(K){switch(K.value){case"stroke":P.push(1);break;case"fill":P.push(0);break;case"markers":P.push(2);break}}),M.forEach(function(K){P.indexOf(K)===-1&&P.push(K)}),P}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(g,B){return isDimensionToken(B)?B.number:0}},CSSParsedDeclaration=function(){function g(B,M){var P,K;this.animationDuration=parse(B,duration,M.animationDuration),this.backgroundClip=parse(B,backgroundClip,M.backgroundClip),this.backgroundColor=parse(B,backgroundColor,M.backgroundColor),this.backgroundImage=parse(B,backgroundImage,M.backgroundImage),this.backgroundOrigin=parse(B,backgroundOrigin,M.backgroundOrigin),this.backgroundPosition=parse(B,backgroundPosition,M.backgroundPosition),this.backgroundRepeat=parse(B,backgroundRepeat,M.backgroundRepeat),this.backgroundSize=parse(B,backgroundSize,M.backgroundSize),this.borderTopColor=parse(B,borderTopColor,M.borderTopColor),this.borderRightColor=parse(B,borderRightColor,M.borderRightColor),this.borderBottomColor=parse(B,borderBottomColor,M.borderBottomColor),this.borderLeftColor=parse(B,borderLeftColor,M.borderLeftColor),this.borderTopLeftRadius=parse(B,borderTopLeftRadius,M.borderTopLeftRadius),this.borderTopRightRadius=parse(B,borderTopRightRadius,M.borderTopRightRadius),this.borderBottomRightRadius=parse(B,borderBottomRightRadius,M.borderBottomRightRadius),this.borderBottomLeftRadius=parse(B,borderBottomLeftRadius,M.borderBottomLeftRadius),this.borderTopStyle=parse(B,borderTopStyle,M.borderTopStyle),this.borderRightStyle=parse(B,borderRightStyle,M.borderRightStyle),this.borderBottomStyle=parse(B,borderBottomStyle,M.borderBottomStyle),this.borderLeftStyle=parse(B,borderLeftStyle,M.borderLeftStyle),this.borderTopWidth=parse(B,borderTopWidth,M.borderTopWidth),this.borderRightWidth=parse(B,borderRightWidth,M.borderRightWidth),this.borderBottomWidth=parse(B,borderBottomWidth,M.borderBottomWidth),this.borderLeftWidth=parse(B,borderLeftWidth,M.borderLeftWidth),this.boxShadow=parse(B,boxShadow,M.boxShadow),this.color=parse(B,color,M.color),this.direction=parse(B,direction,M.direction),this.display=parse(B,display,M.display),this.float=parse(B,float,M.cssFloat),this.fontFamily=parse(B,fontFamily,M.fontFamily),this.fontSize=parse(B,fontSize,M.fontSize),this.fontStyle=parse(B,fontStyle,M.fontStyle),this.fontVariant=parse(B,fontVariant,M.fontVariant),this.fontWeight=parse(B,fontWeight,M.fontWeight),this.letterSpacing=parse(B,letterSpacing,M.letterSpacing),this.lineBreak=parse(B,lineBreak,M.lineBreak),this.lineHeight=parse(B,lineHeight,M.lineHeight),this.listStyleImage=parse(B,listStyleImage,M.listStyleImage),this.listStylePosition=parse(B,listStylePosition,M.listStylePosition),this.listStyleType=parse(B,listStyleType,M.listStyleType),this.marginTop=parse(B,marginTop,M.marginTop),this.marginRight=parse(B,marginRight,M.marginRight),this.marginBottom=parse(B,marginBottom,M.marginBottom),this.marginLeft=parse(B,marginLeft,M.marginLeft),this.opacity=parse(B,opacity,M.opacity);var Y=parse(B,overflow,M.overflow);this.overflowX=Y[0],this.overflowY=Y[Y.length>1?1:0],this.overflowWrap=parse(B,overflowWrap,M.overflowWrap),this.paddingTop=parse(B,paddingTop,M.paddingTop),this.paddingRight=parse(B,paddingRight,M.paddingRight),this.paddingBottom=parse(B,paddingBottom,M.paddingBottom),this.paddingLeft=parse(B,paddingLeft,M.paddingLeft),this.paintOrder=parse(B,paintOrder,M.paintOrder),this.position=parse(B,position,M.position),this.textAlign=parse(B,textAlign,M.textAlign),this.textDecorationColor=parse(B,textDecorationColor,(P=M.textDecorationColor)!==null&&P!==void 0?P:M.color),this.textDecorationLine=parse(B,textDecorationLine,(K=M.textDecorationLine)!==null&&K!==void 0?K:M.textDecoration),this.textShadow=parse(B,textShadow,M.textShadow),this.textTransform=parse(B,textTransform,M.textTransform),this.transform=parse(B,transform$1,M.transform),this.transformOrigin=parse(B,transformOrigin,M.transformOrigin),this.visibility=parse(B,visibility,M.visibility),this.webkitTextStrokeColor=parse(B,webkitTextStrokeColor,M.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(B,webkitTextStrokeWidth,M.webkitTextStrokeWidth),this.wordBreak=parse(B,wordBreak,M.wordBreak),this.zIndex=parse(B,zIndex,M.zIndex)}return g.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},g.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},g.prototype.isTransformed=function(){return this.transform!==null},g.prototype.isPositioned=function(){return this.position!==0},g.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},g.prototype.isFloating=function(){return this.float!==0},g.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},g}(),CSSParsedPseudoDeclaration=function(){function g(B,M){this.content=parse(B,content,M.content),this.quotes=parse(B,quotes,M.quotes)}return g}(),CSSParsedCounterDeclaration=function(){function g(B,M){this.counterIncrement=parse(B,counterIncrement,M.counterIncrement),this.counterReset=parse(B,counterReset,M.counterReset)}return g}(),parse=function(g,B,M){var P=new Tokenizer,K=M!==null&&typeof M<"u"?M.toString():B.initialValue;P.write(K);var Y=new Parser$1(P.read());switch(B.type){case 2:var re=Y.parseComponentValue();return B.parse(g,isIdentToken(re)?re.value:B.initialValue);case 0:return B.parse(g,Y.parseComponentValue());case 1:return B.parse(g,Y.parseComponentValues());case 4:return Y.parseComponentValue();case 3:switch(B.format){case"angle":return angle.parse(g,Y.parseComponentValue());case"color":return color$1.parse(g,Y.parseComponentValue());case"image":return image.parse(g,Y.parseComponentValue());case"length":var D=Y.parseComponentValue();return isLength(D)?D:ZERO_LENGTH;case"length-percentage":var ne=Y.parseComponentValue();return isLengthPercentage(ne)?ne:ZERO_LENGTH;case"time":return time.parse(g,Y.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(g){var B=g.getAttribute(elementDebuggerAttribute);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(g,B){var M=getElementDebugType(g);return M===1||B===M},ElementContainer=function(){function g(B,M){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(M,3))debugger;this.styles=new CSSParsedDeclaration(B,window.getComputedStyle(M,null)),isHTMLElementNode(M)&&(this.styles.animationDuration.some(function(P){return P>0})&&(M.style.animationDuration="0s"),this.styles.transform!==null&&(M.style.transform="none")),this.bounds=parseBounds(this.context,M),isDebugging(M,4)&&(this.flags|=16)}return g}(),base64$2="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$2=0;i$1$2<chars$1.length;i$1$2++)lookup$1[chars$1.charCodeAt(i$1$2)]=i$1$2;var decode=function(g){var B=g.length*.75,M=g.length,P,K=0,Y,re,D,ne;g[g.length-1]==="="&&(B--,g[g.length-2]==="="&&B--);var Ae=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),fe=Array.isArray(Ae)?Ae:new Uint8Array(Ae);for(P=0;P<M;P+=4)Y=lookup$1[g.charCodeAt(P)],re=lookup$1[g.charCodeAt(P+1)],D=lookup$1[g.charCodeAt(P+2)],ne=lookup$1[g.charCodeAt(P+3)],fe[K++]=Y<<2|re>>4,fe[K++]=(re&15)<<4|D>>2,fe[K++]=(D&3)<<6|ne&63;return Ae},polyUint16Array=function(g){for(var B=g.length,M=[],P=0;P<B;P+=2)M.push(g[P+1]<<8|g[P]);return M},polyUint32Array=function(g){for(var B=g.length,M=[],P=0;P<B;P+=4)M.push(g[P+3]<<24|g[P+2]<<16|g[P+1]<<8|g[P]);return M},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=6+5,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(g,B,M){return g.slice?g.slice(B,M):new Uint16Array(Array.prototype.slice.call(g,B,M))},slice32=function(g,B,M){return g.slice?g.slice(B,M):new Uint32Array(Array.prototype.slice.call(g,B,M))},createTrieFromBase64=function(g,B){var M=decode(g),P=Array.isArray(M)?polyUint32Array(M):new Uint32Array(M),K=Array.isArray(M)?polyUint16Array(M):new Uint16Array(M),Y=24,re=slice16(K,Y/2,P[4]/2),D=P[5]===2?slice16(K,(Y+P[4])/2):slice32(P,Math.ceil((Y+P[4])/4));return new Trie(P[0],P[1],P[2],P[3],re,D)},Trie=function(){function g(B,M,P,K,Y,re){this.initialValue=B,this.errorValue=M,this.highStart=P,this.highValueIndex=K,this.index=Y,this.data=re}return g.prototype.get=function(B){var M;if(B>=0){if(B<55296||B>56319&&B<=65535)return M=this.index[B>>UTRIE2_SHIFT_2],M=(M<<UTRIE2_INDEX_SHIFT)+(B&UTRIE2_DATA_MASK),this.data[M];if(B<=65535)return M=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(B-55296>>UTRIE2_SHIFT_2)],M=(M<<UTRIE2_INDEX_SHIFT)+(B&UTRIE2_DATA_MASK),this.data[M];if(B<this.highStart)return M=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(B>>UTRIE2_SHIFT_1),M=this.index[M],M+=B>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,M=this.index[M],M=(M<<UTRIE2_INDEX_SHIFT)+(B&UTRIE2_DATA_MASK),this.data[M];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},g}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$4=0;i$4<chars.length;i$4++)lookup[chars.charCodeAt(i$4)]=i$4;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V=9,T$1=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(g){for(var B=[],M=0,P=g.length;M<P;){var K=g.charCodeAt(M++);if(K>=55296&&K<=56319&&M<P){var Y=g.charCodeAt(M++);(Y&64512)===56320?B.push(((K&1023)<<10)+(Y&1023)+65536):(B.push(K),M--)}else B.push(K)}return B},fromCodePoint=function(){for(var g=[],B=0;B<arguments.length;B++)g[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,g);var M=g.length;if(!M)return"";for(var P=[],K=-1,Y="";++K<M;){var re=g[K];re<=65535?P.push(re):(re-=65536,P.push((re>>10)+55296,re%1024+56320)),(K+1===M||P.length>16384)&&(Y+=String.fromCharCode.apply(String,P),P.length=0)}return Y},UnicodeTrie=createTrieFromBase64(base64$2),BREAK_NOT_ALLOWED="Ã",BREAK_ALLOWED="Ã·",codePointToClass=function(g){return UnicodeTrie.get(g)},_graphemeBreakAtIndex=function(g,B,M){var P=M-2,K=B[P],Y=B[M-1],re=B[M];if(Y===CR&&re===LF)return BREAK_NOT_ALLOWED;if(Y===CR||Y===LF||Y===Control||re===CR||re===LF||re===Control)return BREAK_ALLOWED;if(Y===L$1&&[L$1,V,LV,LVT].indexOf(re)!==-1||(Y===LV||Y===V)&&(re===V||re===T$1)||(Y===LVT||Y===T$1)&&re===T$1||re===ZWJ||re===Extend||re===SpacingMark||Y===Prepend)return BREAK_NOT_ALLOWED;if(Y===ZWJ&&re===Extended_Pictographic){for(;K===Extend;)K=B[--P];if(K===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(Y===RI&&re===RI){for(var D=0;K===RI;)D++,K=B[--P];if(D%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(g){var B=toCodePoints(g),M=B.length,P=0,K=0,Y=B.map(codePointToClass);return{next:function(){if(P>=M)return{done:!0,value:null};for(var re=BREAK_NOT_ALLOWED;P<M&&(re=_graphemeBreakAtIndex(B,Y,++P))===BREAK_NOT_ALLOWED;);if(re!==BREAK_NOT_ALLOWED||P===M){var D=fromCodePoint.apply(null,B.slice(K,P));return K=P,{value:D,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(g){for(var B=GraphemeBreaker(g),M=[],P;!(P=B.next()).done;)P.value&&M.push(P.value.slice());return M},testRangeBounds=function(g){var B=123;if(g.createRange){var M=g.createRange();if(M.getBoundingClientRect){var P=g.createElement("boundtest");P.style.height=B+"px",P.style.display="block",g.body.appendChild(P),M.selectNode(P);var K=M.getBoundingClientRect(),Y=Math.round(K.height);if(g.body.removeChild(P),Y===B)return!0}}return!1},testIOSLineBreak=function(g){var B=g.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",g.body.appendChild(B);var M=g.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var P=B.firstChild,K=toCodePoints$1(P.data).map(function(ne){return fromCodePoint$1(ne)}),Y=0,re={},D=K.every(function(ne,Ae){M.setStart(P,Y),M.setEnd(P,Y+ne.length);var fe=M.getBoundingClientRect();Y+=ne.length;var ge=fe.x>re.x||fe.y>re.y;return re=fe,Ae===0?!0:ge});return g.body.removeChild(B),D},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(g){var B=new Image,M=g.createElement("canvas"),P=M.getContext("2d");if(!P)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{P.drawImage(B,0,0),M.toDataURL()}catch{return!1}return!0},isGreenPixel=function(g){return g[0]===0&&g[1]===255&&g[2]===0&&g[3]===255},testForeignObject=function(g){var B=g.createElement("canvas"),M=100;B.width=M,B.height=M;var P=B.getContext("2d");if(!P)return Promise.reject(!1);P.fillStyle="rgb(0, 255, 0)",P.fillRect(0,0,M,M);var K=new Image,Y=B.toDataURL();K.src=Y;var re=createForeignObjectSVG(M,M,0,0,K);return P.fillStyle="red",P.fillRect(0,0,M,M),loadSerializedSVG$1(re).then(function(D){P.drawImage(D,0,0);var ne=P.getImageData(0,0,M,M).data;P.fillStyle="red",P.fillRect(0,0,M,M);var Ae=g.createElement("div");return Ae.style.backgroundImage="url("+Y+")",Ae.style.height=M+"px",isGreenPixel(ne)?loadSerializedSVG$1(createForeignObjectSVG(M,M,0,0,Ae)):Promise.reject(!1)}).then(function(D){return P.drawImage(D,0,0),isGreenPixel(P.getImageData(0,0,M,M).data)}).catch(function(){return!1})},createForeignObjectSVG=function(g,B,M,P,K){var Y="http://www.w3.org/2000/svg",re=document.createElementNS(Y,"svg"),D=document.createElementNS(Y,"foreignObject");return re.setAttributeNS(null,"width",g.toString()),re.setAttributeNS(null,"height",B.toString()),D.setAttributeNS(null,"width","100%"),D.setAttributeNS(null,"height","100%"),D.setAttributeNS(null,"x",M.toString()),D.setAttributeNS(null,"y",P.toString()),D.setAttributeNS(null,"externalResourcesRequired","true"),re.appendChild(D),D.appendChild(K),re},loadSerializedSVG$1=function(g){return new Promise(function(B,M){var P=new Image;P.onload=function(){return B(P)},P.onerror=M,P.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(g))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var g=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:g}),g},get SUPPORT_WORD_BREAKING(){var g=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:g}),g},get SUPPORT_SVG_DRAWING(){var g=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:g}),g},get SUPPORT_FOREIGNOBJECT_DRAWING(){var g=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:g}),g},get SUPPORT_CORS_IMAGES(){var g=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:g}),g},get SUPPORT_RESPONSE_TYPE(){var g=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:g}),g},get SUPPORT_CORS_XHR(){var g="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:g}),g},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var g=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:g}),g}},TextBounds=function(){function g(B,M){this.text=B,this.bounds=M}return g}(),parseTextBounds=function(g,B,M,P){var K=breakText(B,M),Y=[],re=0;return K.forEach(function(D){if(M.textDecorationLine.length||D.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var ne=createRange(P,re,D.length).getClientRects();if(ne.length>1){var Ae=segmentGraphemes(D),fe=0;Ae.forEach(function(Be){Y.push(new TextBounds(Be,Bounds.fromDOMRectList(g,createRange(P,fe+re,Be.length).getClientRects()))),fe+=Be.length})}else Y.push(new TextBounds(D,Bounds.fromDOMRectList(g,ne)))}else{var ge=P.splitText(D.length);Y.push(new TextBounds(D,getWrapperBounds(g,P))),P=ge}else FEATURES.SUPPORT_RANGE_BOUNDS||(P=P.splitText(D.length));re+=D.length}),Y},getWrapperBounds=function(g,B){var M=B.ownerDocument;if(M){var P=M.createElement("html2canvaswrapper");P.appendChild(B.cloneNode(!0));var K=B.parentNode;if(K){K.replaceChild(P,B);var Y=parseBounds(g,P);return P.firstChild&&K.replaceChild(P.firstChild,P),Y}}return Bounds.EMPTY},createRange=function(g,B,M){var P=g.ownerDocument;if(!P)throw new Error("Node has no owner document");var K=P.createRange();return K.setStart(g,B),K.setEnd(g,B+M),K},segmentGraphemes=function(g){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(g)).map(function(M){return M.segment})}return splitGraphemes(g)},segmentWords=function(g,B){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var M=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(M.segment(g)).map(function(P){return P.segment})}return breakWords(g,B)},breakText=function(g,B){return B.letterSpacing!==0?segmentGraphemes(g):segmentWords(g,B)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(g,B){for(var M=LineBreaker(g,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),P=[],K,Y=function(){if(K.value){var re=K.value.slice(),D=toCodePoints$1(re),ne="";D.forEach(function(Ae){wordSeparators.indexOf(Ae)===-1?ne+=fromCodePoint$1(Ae):(ne.length&&P.push(ne),P.push(fromCodePoint$1(Ae)),ne="")}),ne.length&&P.push(ne)}};!(K=M.next()).done;)Y();return P},TextContainer=function(){function g(B,M,P){this.text=transform(M.data,P.textTransform),this.textBounds=parseTextBounds(B,this.text,P,M)}return g}(),transform=function(g,B){switch(B){case 1:return g.toLowerCase();case 3:return g.replace(CAPITALIZE,capitalize);case 2:return g.toUpperCase();default:return g}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(g,B,M){return g.length>0?B+M.toUpperCase():g},ImageElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.src=P.currentSrc||P.src,K.intrinsicWidth=P.naturalWidth,K.intrinsicHeight=P.naturalHeight,K.context.cache.addImage(K.src),K}return B}(ElementContainer),CanvasElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.canvas=P,K.intrinsicWidth=P.width,K.intrinsicHeight=P.height,K}return B}(ElementContainer),SVGElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this,Y=new XMLSerializer,re=parseBounds(M,P);return P.setAttribute("width",re.width+"px"),P.setAttribute("height",re.height+"px"),K.svg="data:image/svg+xml,"+encodeURIComponent(Y.serializeToString(P)),K.intrinsicWidth=P.width.baseVal.value,K.intrinsicHeight=P.height.baseVal.value,K.context.cache.addImage(K.svg),K}return B}(ElementContainer),LIElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.value=P.value,K}return B}(ElementContainer),OLElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.start=P.start,K.reversed=typeof P.reversed=="boolean"&&P.reversed===!0,K}return B}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(g){return g.width>g.height?new Bounds(g.left+(g.width-g.height)/2,g.top,g.height,g.height):g.width<g.height?new Bounds(g.left,g.top+(g.height-g.width)/2,g.width,g.width):g},getInputValue=function(g){var B=g.type===PASSWORD?new Array(g.value.length+1).join("â¢"):g.value;return B.length===0?g.placeholder||"":B},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;switch(K.type=P.type.toLowerCase(),K.checked=P.checked,K.value=getInputValue(P),(K.type===CHECKBOX||K.type===RADIO)&&(K.styles.backgroundColor=3739148031,K.styles.borderTopColor=K.styles.borderRightColor=K.styles.borderBottomColor=K.styles.borderLeftColor=2779096575,K.styles.borderTopWidth=K.styles.borderRightWidth=K.styles.borderBottomWidth=K.styles.borderLeftWidth=1,K.styles.borderTopStyle=K.styles.borderRightStyle=K.styles.borderBottomStyle=K.styles.borderLeftStyle=1,K.styles.backgroundClip=[0],K.styles.backgroundOrigin=[0],K.bounds=reformatInputBounds(K.bounds)),K.type){case CHECKBOX:K.styles.borderTopRightRadius=K.styles.borderTopLeftRadius=K.styles.borderBottomRightRadius=K.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:K.styles.borderTopRightRadius=K.styles.borderTopLeftRadius=K.styles.borderBottomRightRadius=K.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return K}return B}(ElementContainer),SelectElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this,Y=P.options[P.selectedIndex||0];return K.value=Y&&Y.text||"",K}return B}(ElementContainer),TextareaElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.value=P.value,K}return B}(ElementContainer),IFrameElementContainer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;K.src=P.src,K.width=parseInt(P.width,10)||0,K.height=parseInt(P.height,10)||0,K.backgroundColor=K.styles.backgroundColor;try{if(P.contentWindow&&P.contentWindow.document&&P.contentWindow.document.documentElement){K.tree=parseTree(M,P.contentWindow.document.documentElement);var Y=P.contentWindow.document.documentElement?parseColor(M,getComputedStyle(P.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,re=P.contentWindow.document.body?parseColor(M,getComputedStyle(P.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;K.backgroundColor=isTransparent(Y)?isTransparent(re)?K.styles.backgroundColor:re:Y}}catch{}return K}return B}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(g,B,M,P){for(var K=B.firstChild,Y=void 0;K;K=Y)if(Y=K.nextSibling,isTextNode(K)&&K.data.trim().length>0)M.textNodes.push(new TextContainer(g,K,M.styles));else if(isElementNode(K))if(isSlotElement(K)&&K.assignedNodes)K.assignedNodes().forEach(function(D){return parseNodeTree(g,D,M,P)});else{var re=createContainer(g,K);re.styles.isVisible()&&(createsRealStackingContext(K,re,P)?re.flags|=4:createsStackingContext(re.styles)&&(re.flags|=2),LIST_OWNERS.indexOf(K.tagName)!==-1&&(re.flags|=8),M.elements.push(re),K.slot,K.shadowRoot?parseNodeTree(g,K.shadowRoot,re,P):!isTextareaElement(K)&&!isSVGElement(K)&&!isSelectElement(K)&&parseNodeTree(g,K,re,P))}},createContainer=function(g,B){return isImageElement(B)?new ImageElementContainer(g,B):isCanvasElement(B)?new CanvasElementContainer(g,B):isSVGElement(B)?new SVGElementContainer(g,B):isLIElement(B)?new LIElementContainer(g,B):isOLElement(B)?new OLElementContainer(g,B):isInputElement(B)?new InputElementContainer(g,B):isSelectElement(B)?new SelectElementContainer(g,B):isTextareaElement(B)?new TextareaElementContainer(g,B):isIFrameElement(B)?new IFrameElementContainer(g,B):new ElementContainer(g,B)},parseTree=function(g,B){var M=createContainer(g,B);return M.flags|=4,parseNodeTree(g,B,M,M),M},createsRealStackingContext=function(g,B,M){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||isBodyElement(g)&&M.styles.isTransparent()},createsStackingContext=function(g){return g.isPositioned()||g.isFloating()},isTextNode=function(g){return g.nodeType===Node.TEXT_NODE},isElementNode=function(g){return g.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(g){return isElementNode(g)&&typeof g.style<"u"&&!isSVGElementNode(g)},isSVGElementNode=function(g){return typeof g.className=="object"},isLIElement=function(g){return g.tagName==="LI"},isOLElement=function(g){return g.tagName==="OL"},isInputElement=function(g){return g.tagName==="INPUT"},isHTMLElement=function(g){return g.tagName==="HTML"},isSVGElement=function(g){return g.tagName==="svg"},isBodyElement=function(g){return g.tagName==="BODY"},isCanvasElement=function(g){return g.tagName==="CANVAS"},isVideoElement=function(g){return g.tagName==="VIDEO"},isImageElement=function(g){return g.tagName==="IMG"},isIFrameElement=function(g){return g.tagName==="IFRAME"},isStyleElement=function(g){return g.tagName==="STYLE"},isScriptElement=function(g){return g.tagName==="SCRIPT"},isTextareaElement=function(g){return g.tagName==="TEXTAREA"},isSelectElement=function(g){return g.tagName==="SELECT"},isSlotElement=function(g){return g.tagName==="SLOT"},isCustomElement=function(g){return g.tagName.indexOf("-")>0},CounterState=function(){function g(){this.counters={}}return g.prototype.getCounterValue=function(B){var M=this.counters[B];return M&&M.length?M[M.length-1]:1},g.prototype.getCounterValues=function(B){var M=this.counters[B];return M||[]},g.prototype.pop=function(B){var M=this;B.forEach(function(P){return M.counters[P].pop()})},g.prototype.parse=function(B){var M=this,P=B.counterIncrement,K=B.counterReset,Y=!0;P!==null&&P.forEach(function(D){var ne=M.counters[D.counter];ne&&D.increment!==0&&(Y=!1,ne.length||ne.push(1),ne[Math.max(0,ne.length-1)]+=D.increment)});var re=[];return Y&&K.forEach(function(D){var ne=M.counters[D.counter];re.push(D.counter),ne||(ne=M.counters[D.counter]=[]),ne.push(D.reset)}),re},g}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Ô¿","Ô¾","Ô½","Ô¼","Ô»","Ôº","Ô¹","Ô¸","Ô·","Ô¶","Ôµ","Ô´","Ô³","Ô²","Ô±"]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["××³","××³","××³","××³","××³","××³","××³","××³","××³","××³","×ª","×©","×¨","×§","×¦","×¤","×¢","×¡","× ","×","×","×","××","××","××","××","××","×","×","×","×","×","×","×","×","×","×"]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["áµ","á°","á¯","á´","á®","á­","á¬","á«","áª","á©","á¨","á§","á¦","á¥","á¤","á³","á¢","á¡","á ","á","á","á","á²","á","á","á","á","á","á","á±","á","á","á","á","á","á","á"]},createAdditiveCounter=function(g,B,M,P,K,Y){return g<B||g>M?createCounterText(g,K,Y.length>0):P.integers.reduce(function(re,D,ne){for(;g>=D;)g-=D,re+=P.values[ne];return re},"")+Y},createCounterStyleWithSymbolResolver=function(g,B,M,P){var K="";do M||g--,K=P(g)+K,g/=B;while(g*B>=B);return K},createCounterStyleFromRange=function(g,B,M,P,K){var Y=M-B+1;return(g<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(g),Y,P,function(re){return fromCodePoint$1(Math.floor(re%Y)+B)})+K)},createCounterStyleFromSymbols=function(g,B,M){M===void 0&&(M=". ");var P=B.length;return createCounterStyleWithSymbolResolver(Math.abs(g),P,!1,function(K){return B[Math.floor(K%P)]})+M},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(g,B,M,P,K,Y){if(g<-9999||g>9999)return createCounterText(g,4,K.length>0);var re=Math.abs(g),D=K;if(re===0)return B[0]+D;for(var ne=0;re>0&&ne<=4;ne++){var Ae=re%10;Ae===0&&contains(Y,CJK_ZEROS)&&D!==""?D=B[Ae]+D:Ae>1||Ae===1&&ne===0||Ae===1&&ne===1&&contains(Y,CJK_TEN_COEFFICIENTS)||Ae===1&&ne===1&&contains(Y,CJK_TEN_HIGH_COEFFICIENTS)&&g>100||Ae===1&&ne>1&&contains(Y,CJK_HUNDRED_COEFFICIENTS)?D=B[Ae]+(ne>0?M[ne-1]:"")+D:Ae===1&&ne>0&&(D=M[ne-1]+D),re=Math.floor(re/10)}return(g<0?P:"")+D},CHINESE_INFORMAL_MULTIPLIERS="åç¾åè¬",CHINESE_FORMAL_MULTIPLIERS="æ¾ä½°ä»è¬",JAPANESE_NEGATIVE="ãã¤ãã¹",KOREAN_NEGATIVE="ë§ì´ëì¤",createCounterText=function(g,B,M){var P=M?". ":"",K=M?"ã":"",Y=M?", ":"",re=M?" ":"";switch(B){case 0:return"â¢"+re;case 1:return"â¦"+re;case 2:return"â¾"+re;case 5:var D=createCounterStyleFromRange(g,48,57,!0,P);return D.length<4?"0"+D:D;case 4:return createCounterStyleFromSymbols(g,"ãä¸äºä¸åäºå­ä¸å«ä¹",K);case 6:return createAdditiveCounter(g,1,3999,ROMAN_UPPER,3,P).toLowerCase();case 7:return createAdditiveCounter(g,1,3999,ROMAN_UPPER,3,P);case 8:return createCounterStyleFromRange(g,945,969,!1,P);case 9:return createCounterStyleFromRange(g,97,122,!1,P);case 10:return createCounterStyleFromRange(g,65,90,!1,P);case 11:return createCounterStyleFromRange(g,1632,1641,!0,P);case 12:case 49:return createAdditiveCounter(g,1,9999,ARMENIAN,3,P);case 35:return createAdditiveCounter(g,1,9999,ARMENIAN,3,P).toLowerCase();case 13:return createCounterStyleFromRange(g,2534,2543,!0,P);case 14:case 30:return createCounterStyleFromRange(g,6112,6121,!0,P);case 15:return createCounterStyleFromSymbols(g,"å­ä¸å¯å¯è¾°å·³åæªç³éæäº¥",K);case 16:return createCounterStyleFromSymbols(g,"ç²ä¹ä¸ä¸æå·±åºè¾å£¬ç¸",K);case 17:case 48:return createCJKCounter(g,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",CHINESE_INFORMAL_MULTIPLIERS,"è² ",K,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(g,"é¶å£¹è²³åèä¼é¸ææç",CHINESE_FORMAL_MULTIPLIERS,"è² ",K,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(g,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",CHINESE_INFORMAL_MULTIPLIERS,"è´",K,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(g,"é¶å£¹è´°åèä¼éææç",CHINESE_FORMAL_MULTIPLIERS,"è´",K,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(g,"ãä¸äºä¸åäºå­ä¸å«ä¹","åç¾åä¸",JAPANESE_NEGATIVE,K,0);case 25:return createCJKCounter(g,"é¶å£±å¼ååä¼å­ä¸å«ä¹","æ¾ç¾åä¸",JAPANESE_NEGATIVE,K,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(g,"ìì¼ì´ì¼ì¬ì¤ì¡ì¹ íêµ¬","ì­ë°±ì²ë§",KOREAN_NEGATIVE,Y,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(g,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬",KOREAN_NEGATIVE,Y,0);case 32:return createCJKCounter(g,"é¶å£¹è²³ååäºå­ä¸å«ä¹","æ¾ç¾å",KOREAN_NEGATIVE,Y,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(g,2406,2415,!0,P);case 20:return createAdditiveCounter(g,1,19999,GEORGIAN,3,P);case 21:return createCounterStyleFromRange(g,2790,2799,!0,P);case 22:return createCounterStyleFromRange(g,2662,2671,!0,P);case 22:return createAdditiveCounter(g,1,10999,HEBREW,3,P);case 23:return createCounterStyleFromSymbols(g,"ããããããããããããããããã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ãããããããããããããããã");case 24:return createCounterStyleFromSymbols(g,"ããã¯ã«ã»ã¸ã¨ã¡ãã¬ããããããããã¤ã­ãªããããã®ãããã¾ããµããã¦ãããããã¿ããã²ããã");case 27:return createCounterStyleFromRange(g,3302,3311,!0,P);case 28:return createCounterStyleFromSymbols(g,"ã¢ã¤ã¦ã¨ãªã«ã­ã¯ã±ã³ãµã·ã¹ã»ã½ã¿ããããããããããããããããã ã¡ã¢ã¤ã¦ã¨ã©ãªã«ã¬ã­ã¯ã°ã±ã²ã³",K);case 29:return createCounterStyleFromSymbols(g,"ã¤ã­ãããããããªãã«ã²ã¯ã«ã¨ã¿ã¬ã½ãããã©ã ã¦ã°ããªã¯ã¤ãã±ãã³ã¨ãã¢ãµã­ã¦ã¡ãã·ã±ãã¢ã»ã¹",K);case 34:return createCounterStyleFromRange(g,3792,3801,!0,P);case 37:return createCounterStyleFromRange(g,6160,6169,!0,P);case 38:return createCounterStyleFromRange(g,4160,4169,!0,P);case 39:return createCounterStyleFromRange(g,2918,2927,!0,P);case 40:return createCounterStyleFromRange(g,1776,1785,!0,P);case 43:return createCounterStyleFromRange(g,3046,3055,!0,P);case 44:return createCounterStyleFromRange(g,3174,3183,!0,P);case 45:return createCounterStyleFromRange(g,3664,3673,!0,P);case 46:return createCounterStyleFromRange(g,3872,3881,!0,P);case 3:default:return createCounterStyleFromRange(g,48,57,!0,P)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function g(B,M,P){if(this.context=B,this.options=P,this.scrolledElements=[],this.referenceElement=M,this.counters=new CounterState,this.quoteDepth=0,!M.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(M.ownerDocument.documentElement,!1)}return g.prototype.toIFrame=function(B,M){var P=this,K=createIFrameContainer(B,M);if(!K.contentWindow)return Promise.reject("Unable to find iframe window");var Y=B.defaultView.pageXOffset,re=B.defaultView.pageYOffset,D=K.contentWindow,ne=D.document,Ae=iframeLoader(K).then(function(){return __awaiter(P,void 0,void 0,function(){var fe,ge;return __generator(this,function(Be){switch(Be.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),D&&(D.scrollTo(M.left,M.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(D.scrollY!==M.top||D.scrollX!==M.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(D.scrollX-M.left,D.scrollY-M.top,0,0))),fe=this.options.onclone,ge=this.clonedReferenceElement,typeof ge>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ne.fonts&&ne.fonts.ready?[4,ne.fonts.ready]:[3,2];case 1:Be.sent(),Be.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(ne)]:[3,4];case 3:Be.sent(),Be.label=4;case 4:return typeof fe=="function"?[2,Promise.resolve().then(function(){return fe(ne,ge)}).then(function(){return K})]:[2,K]}})})});return ne.open(),ne.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,Y,re),ne.replaceChild(ne.adoptNode(this.documentElement),ne.documentElement),ne.close(),Ae},g.prototype.createElementClone=function(B){if(isDebugging(B,2))debugger;if(isCanvasElement(B))return this.createCanvasClone(B);if(isVideoElement(B))return this.createVideoClone(B);if(isStyleElement(B))return this.createStyleClone(B);var M=B.cloneNode(!1);return isImageElement(M)&&(isImageElement(B)&&B.currentSrc&&B.currentSrc!==B.src&&(M.src=B.currentSrc,M.srcset=""),M.loading==="lazy"&&(M.loading="eager")),isCustomElement(M)?this.createCustomElementClone(M):M},g.prototype.createCustomElementClone=function(B){var M=document.createElement("html2canvascustomelement");return copyCSSStyles(B.style,M),M},g.prototype.createStyleClone=function(B){try{var M=B.sheet;if(M&&M.cssRules){var P=[].slice.call(M.cssRules,0).reduce(function(Y,re){return re&&typeof re.cssText=="string"?Y+re.cssText:Y},""),K=B.cloneNode(!1);return K.textContent=P,K}}catch(Y){if(this.context.logger.error("Unable to access cssRules property",Y),Y.name!=="SecurityError")throw Y}return B.cloneNode(!1)},g.prototype.createCanvasClone=function(B){var M;if(this.options.inlineImages&&B.ownerDocument){var P=B.ownerDocument.createElement("img");try{return P.src=B.toDataURL(),P}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var K=B.cloneNode(!1);try{K.width=B.width,K.height=B.height;var Y=B.getContext("2d"),re=K.getContext("2d");if(re)if(!this.options.allowTaint&&Y)re.putImageData(Y.getImageData(0,0,B.width,B.height),0,0);else{var D=(M=B.getContext("webgl2"))!==null&&M!==void 0?M:B.getContext("webgl");if(D){var ne=D.getContextAttributes();(ne==null?void 0:ne.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}re.drawImage(B,0,0)}return K}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return K},g.prototype.createVideoClone=function(B){var M=B.ownerDocument.createElement("canvas");M.width=B.offsetWidth,M.height=B.offsetHeight;var P=M.getContext("2d");try{return P&&(P.drawImage(B,0,0,M.width,M.height),this.options.allowTaint||P.getImageData(0,0,M.width,M.height)),M}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var K=B.ownerDocument.createElement("canvas");return K.width=B.offsetWidth,K.height=B.offsetHeight,K},g.prototype.appendChildNode=function(B,M,P){(!isElementNode(M)||!isScriptElement(M)&&!M.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(M)))&&(!this.options.copyStyles||!isElementNode(M)||!isStyleElement(M))&&B.appendChild(this.cloneNode(M,P))},g.prototype.cloneChildNodes=function(B,M,P){for(var K=this,Y=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;Y;Y=Y.nextSibling)if(isElementNode(Y)&&isSlotElement(Y)&&typeof Y.assignedNodes=="function"){var re=Y.assignedNodes();re.length&&re.forEach(function(D){return K.appendChildNode(M,D,P)})}else this.appendChildNode(M,Y,P)},g.prototype.cloneNode=function(B,M){if(isTextNode(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var P=B.ownerDocument.defaultView;if(P&&isElementNode(B)&&(isHTMLElementNode(B)||isSVGElementNode(B))){var K=this.createElementClone(B);K.style.transitionProperty="none";var Y=P.getComputedStyle(B),re=P.getComputedStyle(B,":before"),D=P.getComputedStyle(B,":after");this.referenceElement===B&&isHTMLElementNode(K)&&(this.clonedReferenceElement=K),isBodyElement(K)&&createPseudoHideStyles(K);var ne=this.counters.parse(new CSSParsedCounterDeclaration(this.context,Y)),Ae=this.resolvePseudoContent(B,K,re,PseudoElementType.BEFORE);isCustomElement(B)&&(M=!0),isVideoElement(B)||this.cloneChildNodes(B,K,M),Ae&&K.insertBefore(Ae,K.firstChild);var fe=this.resolvePseudoContent(B,K,D,PseudoElementType.AFTER);return fe&&K.appendChild(fe),this.counters.pop(ne),(Y&&(this.options.copyStyles||isSVGElementNode(B))&&!isIFrameElement(B)||M)&&copyCSSStyles(Y,K),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([K,B.scrollLeft,B.scrollTop]),(isTextareaElement(B)||isSelectElement(B))&&(isTextareaElement(K)||isSelectElement(K))&&(K.value=B.value),K}return B.cloneNode(!1)},g.prototype.resolvePseudoContent=function(B,M,P,K){var Y=this;if(P){var re=P.content,D=M.ownerDocument;if(!(!D||!re||re==="none"||re==="-moz-alt-content"||P.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,P));var ne=new CSSParsedPseudoDeclaration(this.context,P),Ae=D.createElement("html2canvaspseudoelement");copyCSSStyles(P,Ae),ne.content.forEach(function(ge){if(ge.type===0)Ae.appendChild(D.createTextNode(ge.value));else if(ge.type===22){var Be=D.createElement("img");Be.src=ge.value,Be.style.opacity="1",Ae.appendChild(Be)}else if(ge.type===18){if(ge.name==="attr"){var Ue=ge.values.filter(isIdentToken);Ue.length&&Ae.appendChild(D.createTextNode(B.getAttribute(Ue[0].value)||""))}else if(ge.name==="counter"){var ze=ge.values.filter(nonFunctionArgSeparator),Re=ze[0],$e=ze[1];if(Re&&isIdentToken(Re)){var We=Y.counters.getCounterValue(Re.value),ut=$e&&isIdentToken($e)?listStyleType.parse(Y.context,$e.value):3;Ae.appendChild(D.createTextNode(createCounterText(We,ut,!1)))}}else if(ge.name==="counters"){var et=ge.values.filter(nonFunctionArgSeparator),Re=et[0],At=et[1],$e=et[2];if(Re&&isIdentToken(Re)){var nt=Y.counters.getCounterValues(Re.value),ft=$e&&isIdentToken($e)?listStyleType.parse(Y.context,$e.value):3,Tt=At&&At.type===0?At.value:"",qt=nt.map(function(Ut){return createCounterText(Ut,ft,!1)}).join(Tt);Ae.appendChild(D.createTextNode(qt))}}}else if(ge.type===20)switch(ge.value){case"open-quote":Ae.appendChild(D.createTextNode(getQuote(ne.quotes,Y.quoteDepth++,!0)));break;case"close-quote":Ae.appendChild(D.createTextNode(getQuote(ne.quotes,--Y.quoteDepth,!1)));break;default:Ae.appendChild(D.createTextNode(ge.value))}}),Ae.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var fe=K===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(M)?M.className.baseValue+=fe:M.className+=fe,Ae}}},g.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},g}(),PseudoElementType;(function(g){g[g.BEFORE=0]="BEFORE",g[g.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(g,B){var M=g.createElement("iframe");return M.className="html2canvas-container",M.style.visibility="hidden",M.style.position="fixed",M.style.left="-10000px",M.style.top="0px",M.style.border="0",M.width=B.width.toString(),M.height=B.height.toString(),M.scrolling="no",M.setAttribute(IGNORE_ATTRIBUTE,"true"),g.body.appendChild(M),M},imageReady=function(g){return new Promise(function(B){if(g.complete){B();return}if(!g.src){B();return}g.onload=B,g.onerror=B})},imagesReady=function(g){return Promise.all([].slice.call(g.images,0).map(imageReady))},iframeLoader=function(g){return new Promise(function(B,M){var P=g.contentWindow;if(!P)return M("No window assigned for iframe");var K=P.document;P.onload=g.onload=function(){P.onload=g.onload=null;var Y=setInterval(function(){K.body.childNodes.length>0&&K.readyState==="complete"&&(clearInterval(Y),B(g))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(g,B){for(var M=g.length-1;M>=0;M--){var P=g.item(M);ignoredStyleProperties.indexOf(P)===-1&&B.style.setProperty(P,g.getPropertyValue(P))}return B},serializeDoctype=function(g){var B="";return g&&(B+="<!DOCTYPE ",g.name&&(B+=g.name),g.internalSubset&&(B+=g.internalSubset),g.publicId&&(B+='"'+g.publicId+'"'),g.systemId&&(B+='"'+g.systemId+'"'),B+=">"),B},restoreOwnerScroll=function(g,B,M){g&&g.defaultView&&(B!==g.defaultView.pageXOffset||M!==g.defaultView.pageYOffset)&&g.defaultView.scrollTo(B,M)},restoreNodeScroll=function(g){var B=g[0],M=g[1],P=g[2];B.scrollLeft=M,B.scrollTop=P},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(g){createStyles(g,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(g,B){var M=g.ownerDocument;if(M){var P=M.createElement("style");P.textContent=B,g.appendChild(P)}},CacheStorage=function(){function g(){}return g.getOrigin=function(B){var M=g._link;return M?(M.href=B,M.href=M.href,M.protocol+M.hostname+M.port):"about:blank"},g.isSameOrigin=function(B){return g.getOrigin(B)===g._origin},g.setContext=function(B){g._link=B.document.createElement("a"),g._origin=g.getOrigin(B.location.href)},g._origin="about:blank",g}(),Cache=function(){function g(B,M){this.context=B,this._options=M,this._cache={}}return g.prototype.addImage=function(B){var M=Promise.resolve();return this.has(B)||(isBlobImage(B)||isRenderable(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),M},g.prototype.match=function(B){return this._cache[B]},g.prototype.loadImage=function(B){return __awaiter(this,void 0,void 0,function(){var M,P,K,Y,re=this;return __generator(this,function(D){switch(D.label){case 0:return M=CacheStorage.isSameOrigin(B),P=!isInlineImage(B)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!M,K=!isInlineImage(B)&&!M&&!isBlobImage(B)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!P,!M&&this._options.allowTaint===!1&&!isInlineImage(B)&&!isBlobImage(B)&&!K&&!P?[2]:(Y=B,K?[4,this.proxy(Y)]:[3,2]);case 1:Y=D.sent(),D.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(ne,Ae){var fe=new Image;fe.onload=function(){return ne(fe)},fe.onerror=Ae,(isInlineBase64Image(Y)||P)&&(fe.crossOrigin="anonymous"),fe.src=Y,fe.complete===!0&&setTimeout(function(){return ne(fe)},500),re._options.imageTimeout>0&&setTimeout(function(){return Ae("Timed out ("+re._options.imageTimeout+"ms) loading image")},re._options.imageTimeout)})];case 3:return[2,D.sent()]}})})},g.prototype.has=function(B){return typeof this._cache[B]<"u"},g.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},g.prototype.proxy=function(B){var M=this,P=this._options.proxy;if(!P)throw new Error("No proxy defined");var K=B.substring(0,256);return new Promise(function(Y,re){var D=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",ne=new XMLHttpRequest;ne.onload=function(){if(ne.status===200)if(D==="text")Y(ne.response);else{var ge=new FileReader;ge.addEventListener("load",function(){return Y(ge.result)},!1),ge.addEventListener("error",function(Be){return re(Be)},!1),ge.readAsDataURL(ne.response)}else re("Failed to proxy resource "+K+" with status code "+ne.status)},ne.onerror=re;var Ae=P.indexOf("?")>-1?"&":"?";if(ne.open("GET",""+P+Ae+"url="+encodeURIComponent(B)+"&responseType="+D),D!=="text"&&ne instanceof XMLHttpRequest&&(ne.responseType=D),M._options.imageTimeout){var fe=M._options.imageTimeout;ne.timeout=fe,ne.ontimeout=function(){return re("Timed out ("+fe+"ms) proxying "+K)}}ne.send()})},g}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(g){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(g)},isInlineImage=function(g){return INLINE_IMG.test(g)},isInlineBase64Image=function(g){return INLINE_BASE64.test(g)},isBlobImage=function(g){return g.substr(0,4)==="blob"},isSVG=function(g){return g.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(g)},Vector=function(){function g(B,M){this.type=0,this.x=B,this.y=M}return g.prototype.add=function(B,M){return new g(this.x+B,this.y+M)},g}(),lerp=function(g,B,M){return new Vector(g.x+(B.x-g.x)*M,g.y+(B.y-g.y)*M)},BezierCurve=function(){function g(B,M,P,K){this.type=1,this.start=B,this.startControl=M,this.endControl=P,this.end=K}return g.prototype.subdivide=function(B,M){var P=lerp(this.start,this.startControl,B),K=lerp(this.startControl,this.endControl,B),Y=lerp(this.endControl,this.end,B),re=lerp(P,K,B),D=lerp(K,Y,B),ne=lerp(re,D,B);return M?new g(this.start,P,re,ne):new g(ne,D,Y,this.end)},g.prototype.add=function(B,M){return new g(this.start.add(B,M),this.startControl.add(B,M),this.endControl.add(B,M),this.end.add(B,M))},g.prototype.reverse=function(){return new g(this.end,this.endControl,this.startControl,this.start)},g}(),isBezierCurve=function(g){return g.type===1},BoundCurves=function(){function g(B){var M=B.styles,P=B.bounds,K=getAbsoluteValueForTuple(M.borderTopLeftRadius,P.width,P.height),Y=K[0],re=K[1],D=getAbsoluteValueForTuple(M.borderTopRightRadius,P.width,P.height),ne=D[0],Ae=D[1],fe=getAbsoluteValueForTuple(M.borderBottomRightRadius,P.width,P.height),ge=fe[0],Be=fe[1],Ue=getAbsoluteValueForTuple(M.borderBottomLeftRadius,P.width,P.height),ze=Ue[0],Re=Ue[1],$e=[];$e.push((Y+ne)/P.width),$e.push((ze+ge)/P.width),$e.push((re+Re)/P.height),$e.push((Ae+Be)/P.height);var We=Math.max.apply(Math,$e);We>1&&(Y/=We,re/=We,ne/=We,Ae/=We,ge/=We,Be/=We,ze/=We,Re/=We);var ut=P.width-ne,et=P.height-Be,At=P.width-ge,nt=P.height-Re,ft=M.borderTopWidth,Tt=M.borderRightWidth,qt=M.borderBottomWidth,Vt=M.borderLeftWidth,vt=getAbsoluteValue(M.paddingTop,B.bounds.width),Ut=getAbsoluteValue(M.paddingRight,B.bounds.width),Pt=getAbsoluteValue(M.paddingBottom,B.bounds.width),Yt=getAbsoluteValue(M.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=Y>0||re>0?getCurvePoints(P.left+Vt/3,P.top+ft/3,Y-Vt/3,re-ft/3,CORNER.TOP_LEFT):new Vector(P.left+Vt/3,P.top+ft/3),this.topRightBorderDoubleOuterBox=Y>0||re>0?getCurvePoints(P.left+ut,P.top+ft/3,ne-Tt/3,Ae-ft/3,CORNER.TOP_RIGHT):new Vector(P.left+P.width-Tt/3,P.top+ft/3),this.bottomRightBorderDoubleOuterBox=ge>0||Be>0?getCurvePoints(P.left+At,P.top+et,ge-Tt/3,Be-qt/3,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Tt/3,P.top+P.height-qt/3),this.bottomLeftBorderDoubleOuterBox=ze>0||Re>0?getCurvePoints(P.left+Vt/3,P.top+nt,ze-Vt/3,Re-qt/3,CORNER.BOTTOM_LEFT):new Vector(P.left+Vt/3,P.top+P.height-qt/3),this.topLeftBorderDoubleInnerBox=Y>0||re>0?getCurvePoints(P.left+Vt*2/3,P.top+ft*2/3,Y-Vt*2/3,re-ft*2/3,CORNER.TOP_LEFT):new Vector(P.left+Vt*2/3,P.top+ft*2/3),this.topRightBorderDoubleInnerBox=Y>0||re>0?getCurvePoints(P.left+ut,P.top+ft*2/3,ne-Tt*2/3,Ae-ft*2/3,CORNER.TOP_RIGHT):new Vector(P.left+P.width-Tt*2/3,P.top+ft*2/3),this.bottomRightBorderDoubleInnerBox=ge>0||Be>0?getCurvePoints(P.left+At,P.top+et,ge-Tt*2/3,Be-qt*2/3,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Tt*2/3,P.top+P.height-qt*2/3),this.bottomLeftBorderDoubleInnerBox=ze>0||Re>0?getCurvePoints(P.left+Vt*2/3,P.top+nt,ze-Vt*2/3,Re-qt*2/3,CORNER.BOTTOM_LEFT):new Vector(P.left+Vt*2/3,P.top+P.height-qt*2/3),this.topLeftBorderStroke=Y>0||re>0?getCurvePoints(P.left+Vt/2,P.top+ft/2,Y-Vt/2,re-ft/2,CORNER.TOP_LEFT):new Vector(P.left+Vt/2,P.top+ft/2),this.topRightBorderStroke=Y>0||re>0?getCurvePoints(P.left+ut,P.top+ft/2,ne-Tt/2,Ae-ft/2,CORNER.TOP_RIGHT):new Vector(P.left+P.width-Tt/2,P.top+ft/2),this.bottomRightBorderStroke=ge>0||Be>0?getCurvePoints(P.left+At,P.top+et,ge-Tt/2,Be-qt/2,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Tt/2,P.top+P.height-qt/2),this.bottomLeftBorderStroke=ze>0||Re>0?getCurvePoints(P.left+Vt/2,P.top+nt,ze-Vt/2,Re-qt/2,CORNER.BOTTOM_LEFT):new Vector(P.left+Vt/2,P.top+P.height-qt/2),this.topLeftBorderBox=Y>0||re>0?getCurvePoints(P.left,P.top,Y,re,CORNER.TOP_LEFT):new Vector(P.left,P.top),this.topRightBorderBox=ne>0||Ae>0?getCurvePoints(P.left+ut,P.top,ne,Ae,CORNER.TOP_RIGHT):new Vector(P.left+P.width,P.top),this.bottomRightBorderBox=ge>0||Be>0?getCurvePoints(P.left+At,P.top+et,ge,Be,CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width,P.top+P.height),this.bottomLeftBorderBox=ze>0||Re>0?getCurvePoints(P.left,P.top+nt,ze,Re,CORNER.BOTTOM_LEFT):new Vector(P.left,P.top+P.height),this.topLeftPaddingBox=Y>0||re>0?getCurvePoints(P.left+Vt,P.top+ft,Math.max(0,Y-Vt),Math.max(0,re-ft),CORNER.TOP_LEFT):new Vector(P.left+Vt,P.top+ft),this.topRightPaddingBox=ne>0||Ae>0?getCurvePoints(P.left+Math.min(ut,P.width-Tt),P.top+ft,ut>P.width+Tt?0:Math.max(0,ne-Tt),Math.max(0,Ae-ft),CORNER.TOP_RIGHT):new Vector(P.left+P.width-Tt,P.top+ft),this.bottomRightPaddingBox=ge>0||Be>0?getCurvePoints(P.left+Math.min(At,P.width-Vt),P.top+Math.min(et,P.height-qt),Math.max(0,ge-Tt),Math.max(0,Be-qt),CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-Tt,P.top+P.height-qt),this.bottomLeftPaddingBox=ze>0||Re>0?getCurvePoints(P.left+Vt,P.top+Math.min(nt,P.height-qt),Math.max(0,ze-Vt),Math.max(0,Re-qt),CORNER.BOTTOM_LEFT):new Vector(P.left+Vt,P.top+P.height-qt),this.topLeftContentBox=Y>0||re>0?getCurvePoints(P.left+Vt+Yt,P.top+ft+vt,Math.max(0,Y-(Vt+Yt)),Math.max(0,re-(ft+vt)),CORNER.TOP_LEFT):new Vector(P.left+Vt+Yt,P.top+ft+vt),this.topRightContentBox=ne>0||Ae>0?getCurvePoints(P.left+Math.min(ut,P.width+Vt+Yt),P.top+ft+vt,ut>P.width+Vt+Yt?0:ne-Vt+Yt,Ae-(ft+vt),CORNER.TOP_RIGHT):new Vector(P.left+P.width-(Tt+Ut),P.top+ft+vt),this.bottomRightContentBox=ge>0||Be>0?getCurvePoints(P.left+Math.min(At,P.width-(Vt+Yt)),P.top+Math.min(et,P.height+ft+vt),Math.max(0,ge-(Tt+Ut)),Be-(qt+Pt),CORNER.BOTTOM_RIGHT):new Vector(P.left+P.width-(Tt+Ut),P.top+P.height-(qt+Pt)),this.bottomLeftContentBox=ze>0||Re>0?getCurvePoints(P.left+Vt+Yt,P.top+nt,Math.max(0,ze-(Vt+Yt)),Re-(qt+Pt),CORNER.BOTTOM_LEFT):new Vector(P.left+Vt+Yt,P.top+P.height-(qt+Pt))}return g}(),CORNER;(function(g){g[g.TOP_LEFT=0]="TOP_LEFT",g[g.TOP_RIGHT=1]="TOP_RIGHT",g[g.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",g[g.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(g,B,M,P,K){var Y=4*((Math.sqrt(2)-1)/3),re=M*Y,D=P*Y,ne=g+M,Ae=B+P;switch(K){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(g,Ae),new Vector(g,Ae-D),new Vector(ne-re,B),new Vector(ne,B));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(g,B),new Vector(g+re,B),new Vector(ne,Ae-D),new Vector(ne,Ae));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(ne,B),new Vector(ne,B+D),new Vector(g+re,Ae),new Vector(g,Ae));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(ne,Ae),new Vector(ne-re,Ae),new Vector(g,B+D),new Vector(g,B))}},calculateBorderBoxPath=function(g){return[g.topLeftBorderBox,g.topRightBorderBox,g.bottomRightBorderBox,g.bottomLeftBorderBox]},calculateContentBoxPath=function(g){return[g.topLeftContentBox,g.topRightContentBox,g.bottomRightContentBox,g.bottomLeftContentBox]},calculatePaddingBoxPath=function(g){return[g.topLeftPaddingBox,g.topRightPaddingBox,g.bottomRightPaddingBox,g.bottomLeftPaddingBox]},TransformEffect=function(){function g(B,M,P){this.offsetX=B,this.offsetY=M,this.matrix=P,this.type=0,this.target=6}return g}(),ClipEffect=function(){function g(B,M){this.path=B,this.target=M,this.type=1}return g}(),OpacityEffect=function(){function g(B){this.opacity=B,this.type=2,this.target=6}return g}(),isTransformEffect=function(g){return g.type===0},isClipEffect=function(g){return g.type===1},isOpacityEffect=function(g){return g.type===2},equalPath=function(g,B){return g.length===B.length?g.some(function(M,P){return M===B[P]}):!1},transformPath=function(g,B,M,P,K){return g.map(function(Y,re){switch(re){case 0:return Y.add(B,M);case 1:return Y.add(B+P,M);case 2:return Y.add(B+P,M+K);case 3:return Y.add(B,M+K)}return Y})},StackingContext=function(){function g(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return g}(),ElementPaint=function(){function g(B,M){if(this.container=B,this.parent=M,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var P=this.container.bounds.left+this.container.styles.transformOrigin[0].number,K=this.container.bounds.top+this.container.styles.transformOrigin[1].number,Y=this.container.styles.transform;this.effects.push(new TransformEffect(P,K,Y))}if(this.container.styles.overflowX!==0){var re=calculateBorderBoxPath(this.curves),D=calculatePaddingBoxPath(this.curves);equalPath(re,D)?this.effects.push(new ClipEffect(re,6)):(this.effects.push(new ClipEffect(re,2)),this.effects.push(new ClipEffect(D,4)))}}return g.prototype.getEffects=function(B){for(var M=[2,3].indexOf(this.container.styles.position)===-1,P=this.parent,K=this.effects.slice(0);P;){var Y=P.effects.filter(function(ne){return!isClipEffect(ne)});if(M||P.container.styles.position!==0||!P.parent){if(K.unshift.apply(K,Y),M=[2,3].indexOf(P.container.styles.position)===-1,P.container.styles.overflowX!==0){var re=calculateBorderBoxPath(P.curves),D=calculatePaddingBoxPath(P.curves);equalPath(re,D)||K.unshift(new ClipEffect(D,6))}}else K.unshift.apply(K,Y);P=P.parent}return K.filter(function(ne){return contains(ne.target,B)})},g}(),parseStackTree=function(g,B,M,P){g.container.elements.forEach(function(K){var Y=contains(K.flags,4),re=contains(K.flags,2),D=new ElementPaint(K,g);contains(K.styles.display,2048)&&P.push(D);var ne=contains(K.flags,8)?[]:P;if(Y||re){var Ae=Y||K.styles.isPositioned()?M:B,fe=new StackingContext(D);if(K.styles.isPositioned()||K.styles.opacity<1||K.styles.isTransformed()){var ge=K.styles.zIndex.order;if(ge<0){var Be=0;Ae.negativeZIndex.some(function(ze,Re){return ge>ze.element.container.styles.zIndex.order?(Be=Re,!1):Be>0}),Ae.negativeZIndex.splice(Be,0,fe)}else if(ge>0){var Ue=0;Ae.positiveZIndex.some(function(ze,Re){return ge>=ze.element.container.styles.zIndex.order?(Ue=Re+1,!1):Ue>0}),Ae.positiveZIndex.splice(Ue,0,fe)}else Ae.zeroOrAutoZIndexOrTransformedOrOpacity.push(fe)}else K.styles.isFloating()?Ae.nonPositionedFloats.push(fe):Ae.nonPositionedInlineLevel.push(fe);parseStackTree(D,fe,Y?fe:M,ne)}else K.styles.isInlineLevel()?B.inlineLevel.push(D):B.nonInlineLevel.push(D),parseStackTree(D,B,M,ne);contains(K.flags,8)&&processListItems(K,ne)})},processListItems=function(g,B){for(var M=g instanceof OLElementContainer?g.start:1,P=g instanceof OLElementContainer?g.reversed:!1,K=0;K<B.length;K++){var Y=B[K];Y.container instanceof LIElementContainer&&typeof Y.container.value=="number"&&Y.container.value!==0&&(M=Y.container.value),Y.listValue=createCounterText(M,Y.container.styles.listStyleType,!0),M+=P?-1:1}},parseStackingContexts=function(g){var B=new ElementPaint(g,null),M=new StackingContext(B),P=[];return parseStackTree(B,M,M,P),processListItems(B.container,P),M},parsePathForBorder=function(g,B){switch(B){case 0:return createPathFromCurves(g.topLeftBorderBox,g.topLeftPaddingBox,g.topRightBorderBox,g.topRightPaddingBox);case 1:return createPathFromCurves(g.topRightBorderBox,g.topRightPaddingBox,g.bottomRightBorderBox,g.bottomRightPaddingBox);case 2:return createPathFromCurves(g.bottomRightBorderBox,g.bottomRightPaddingBox,g.bottomLeftBorderBox,g.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(g.bottomLeftBorderBox,g.bottomLeftPaddingBox,g.topLeftBorderBox,g.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(g,B){switch(B){case 0:return createPathFromCurves(g.topLeftBorderBox,g.topLeftBorderDoubleOuterBox,g.topRightBorderBox,g.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(g.topRightBorderBox,g.topRightBorderDoubleOuterBox,g.bottomRightBorderBox,g.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(g.bottomRightBorderBox,g.bottomRightBorderDoubleOuterBox,g.bottomLeftBorderBox,g.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(g.bottomLeftBorderBox,g.bottomLeftBorderDoubleOuterBox,g.topLeftBorderBox,g.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(g,B){switch(B){case 0:return createPathFromCurves(g.topLeftBorderDoubleInnerBox,g.topLeftPaddingBox,g.topRightBorderDoubleInnerBox,g.topRightPaddingBox);case 1:return createPathFromCurves(g.topRightBorderDoubleInnerBox,g.topRightPaddingBox,g.bottomRightBorderDoubleInnerBox,g.bottomRightPaddingBox);case 2:return createPathFromCurves(g.bottomRightBorderDoubleInnerBox,g.bottomRightPaddingBox,g.bottomLeftBorderDoubleInnerBox,g.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(g.bottomLeftBorderDoubleInnerBox,g.bottomLeftPaddingBox,g.topLeftBorderDoubleInnerBox,g.topLeftPaddingBox)}},parsePathForBorderStroke=function(g,B){switch(B){case 0:return createStrokePathFromCurves(g.topLeftBorderStroke,g.topRightBorderStroke);case 1:return createStrokePathFromCurves(g.topRightBorderStroke,g.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(g.bottomRightBorderStroke,g.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(g.bottomLeftBorderStroke,g.topLeftBorderStroke)}},createStrokePathFromCurves=function(g,B){var M=[];return isBezierCurve(g)?M.push(g.subdivide(.5,!1)):M.push(g),isBezierCurve(B)?M.push(B.subdivide(.5,!0)):M.push(B),M},createPathFromCurves=function(g,B,M,P){var K=[];return isBezierCurve(g)?K.push(g.subdivide(.5,!1)):K.push(g),isBezierCurve(M)?K.push(M.subdivide(.5,!0)):K.push(M),isBezierCurve(P)?K.push(P.subdivide(.5,!0).reverse()):K.push(P),isBezierCurve(B)?K.push(B.subdivide(.5,!1).reverse()):K.push(B),K},paddingBox=function(g){var B=g.bounds,M=g.styles;return B.add(M.borderLeftWidth,M.borderTopWidth,-(M.borderRightWidth+M.borderLeftWidth),-(M.borderTopWidth+M.borderBottomWidth))},contentBox=function(g){var B=g.styles,M=g.bounds,P=getAbsoluteValue(B.paddingLeft,M.width),K=getAbsoluteValue(B.paddingRight,M.width),Y=getAbsoluteValue(B.paddingTop,M.width),re=getAbsoluteValue(B.paddingBottom,M.width);return M.add(P+B.borderLeftWidth,Y+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+P+K),-(B.borderTopWidth+B.borderBottomWidth+Y+re))},calculateBackgroundPositioningArea=function(g,B){return g===0?B.bounds:g===2?contentBox(B):paddingBox(B)},calculateBackgroundPaintingArea=function(g,B){return g===0?B.bounds:g===2?contentBox(B):paddingBox(B)},calculateBackgroundRendering=function(g,B,M){var P=calculateBackgroundPositioningArea(getBackgroundValueForIndex(g.styles.backgroundOrigin,B),g),K=calculateBackgroundPaintingArea(getBackgroundValueForIndex(g.styles.backgroundClip,B),g),Y=calculateBackgroundSize(getBackgroundValueForIndex(g.styles.backgroundSize,B),M,P),re=Y[0],D=Y[1],ne=getAbsoluteValueForTuple(getBackgroundValueForIndex(g.styles.backgroundPosition,B),P.width-re,P.height-D),Ae=calculateBackgroundRepeatPath(getBackgroundValueForIndex(g.styles.backgroundRepeat,B),ne,Y,P,K),fe=Math.round(P.left+ne[0]),ge=Math.round(P.top+ne[1]);return[Ae,fe,ge,re,D]},isAuto=function(g){return isIdentToken(g)&&g.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(g){return typeof g=="number"},calculateBackgroundSize=function(g,B,M){var P=B[0],K=B[1],Y=B[2],re=g[0],D=g[1];if(!re)return[0,0];if(isLengthPercentage(re)&&D&&isLengthPercentage(D))return[getAbsoluteValue(re,M.width),getAbsoluteValue(D,M.height)];var ne=hasIntrinsicValue(Y);if(isIdentToken(re)&&(re.value===BACKGROUND_SIZE.CONTAIN||re.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(Y)){var Ae=M.width/M.height;return Ae<Y!=(re.value===BACKGROUND_SIZE.COVER)?[M.width,M.width/Y]:[M.height*Y,M.height]}return[M.width,M.height]}var fe=hasIntrinsicValue(P),ge=hasIntrinsicValue(K),Be=fe||ge;if(isAuto(re)&&(!D||isAuto(D))){if(fe&&ge)return[P,K];if(!ne&&!Be)return[M.width,M.height];if(Be&&ne){var Ue=fe?P:K*Y,ze=ge?K:P/Y;return[Ue,ze]}var Re=fe?P:M.width,$e=ge?K:M.height;return[Re,$e]}if(ne){var We=0,ut=0;return isLengthPercentage(re)?We=getAbsoluteValue(re,M.width):isLengthPercentage(D)&&(ut=getAbsoluteValue(D,M.height)),isAuto(re)?We=ut*Y:(!D||isAuto(D))&&(ut=We/Y),[We,ut]}var et=null,At=null;if(isLengthPercentage(re)?et=getAbsoluteValue(re,M.width):D&&isLengthPercentage(D)&&(At=getAbsoluteValue(D,M.height)),et!==null&&(!D||isAuto(D))&&(At=fe&&ge?et/P*K:M.height),At!==null&&isAuto(re)&&(et=fe&&ge?At/K*P:M.width),et!==null&&At!==null)return[et,At];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(g,B){var M=g[B];return typeof M>"u"?g[0]:M},calculateBackgroundRepeatPath=function(g,B,M,P,K){var Y=B[0],re=B[1],D=M[0],ne=M[1];switch(g){case 2:return[new Vector(Math.round(P.left),Math.round(P.top+re)),new Vector(Math.round(P.left+P.width),Math.round(P.top+re)),new Vector(Math.round(P.left+P.width),Math.round(ne+P.top+re)),new Vector(Math.round(P.left),Math.round(ne+P.top+re))];case 3:return[new Vector(Math.round(P.left+Y),Math.round(P.top)),new Vector(Math.round(P.left+Y+D),Math.round(P.top)),new Vector(Math.round(P.left+Y+D),Math.round(P.height+P.top)),new Vector(Math.round(P.left+Y),Math.round(P.height+P.top))];case 1:return[new Vector(Math.round(P.left+Y),Math.round(P.top+re)),new Vector(Math.round(P.left+Y+D),Math.round(P.top+re)),new Vector(Math.round(P.left+Y+D),Math.round(P.top+re+ne)),new Vector(Math.round(P.left+Y),Math.round(P.top+re+ne))];default:return[new Vector(Math.round(K.left),Math.round(K.top)),new Vector(Math.round(K.left+K.width),Math.round(K.top)),new Vector(Math.round(K.left+K.width),Math.round(K.height+K.top)),new Vector(Math.round(K.left),Math.round(K.height+K.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function g(B){this._data={},this._document=B}return g.prototype.parseMetrics=function(B,M){var P=this._document.createElement("div"),K=this._document.createElement("img"),Y=this._document.createElement("span"),re=this._document.body;P.style.visibility="hidden",P.style.fontFamily=B,P.style.fontSize=M,P.style.margin="0",P.style.padding="0",P.style.whiteSpace="nowrap",re.appendChild(P),K.src=SMALL_IMAGE,K.width=1,K.height=1,K.style.margin="0",K.style.padding="0",K.style.verticalAlign="baseline",Y.style.fontFamily=B,Y.style.fontSize=M,Y.style.margin="0",Y.style.padding="0",Y.appendChild(this._document.createTextNode(SAMPLE_TEXT)),P.appendChild(Y),P.appendChild(K);var D=K.offsetTop-Y.offsetTop+2;P.removeChild(Y),P.appendChild(this._document.createTextNode(SAMPLE_TEXT)),P.style.lineHeight="normal",K.style.verticalAlign="super";var ne=K.offsetTop-P.offsetTop+2;return re.removeChild(P),{baseline:D,middle:ne}},g.prototype.getMetrics=function(B,M){var P=B+" "+M;return typeof this._data[P]>"u"&&(this._data[P]=this.parseMetrics(B,M)),this._data[P]},g}(),Renderer=function(){function g(B,M){this.context=B,this.options=M}return g}(),MASK_OFFSET=1e4,CanvasRenderer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K._activeEffects=[],K.canvas=P.canvas?P.canvas:document.createElement("canvas"),K.ctx=K.canvas.getContext("2d"),P.canvas||(K.canvas.width=Math.floor(P.width*P.scale),K.canvas.height=Math.floor(P.height*P.scale),K.canvas.style.width=P.width+"px",K.canvas.style.height=P.height+"px"),K.fontMetrics=new FontMetrics(document),K.ctx.scale(K.options.scale,K.options.scale),K.ctx.translate(-P.x,-P.y),K.ctx.textBaseline="bottom",K._activeEffects=[],K.context.logger.debug("Canvas renderer initialized ("+P.width+"x"+P.height+") with scale "+P.scale),K}return B.prototype.applyEffects=function(M){for(var P=this;this._activeEffects.length;)this.popEffect();M.forEach(function(K){return P.applyEffect(K)})},B.prototype.applyEffect=function(M){this.ctx.save(),isOpacityEffect(M)&&(this.ctx.globalAlpha=M.opacity),isTransformEffect(M)&&(this.ctx.translate(M.offsetX,M.offsetY),this.ctx.transform(M.matrix[0],M.matrix[1],M.matrix[2],M.matrix[3],M.matrix[4],M.matrix[5]),this.ctx.translate(-M.offsetX,-M.offsetY)),isClipEffect(M)&&(this.path(M.path),this.ctx.clip()),this._activeEffects.push(M)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(M){return __awaiter(this,void 0,void 0,function(){var P;return __generator(this,function(K){switch(K.label){case 0:return P=M.element.container.styles,P.isVisible()?[4,this.renderStackContent(M)]:[3,2];case 1:K.sent(),K.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(M){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(P){switch(P.label){case 0:if(contains(M.container.flags,16))debugger;return M.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(M)]:[3,3];case 1:return P.sent(),[4,this.renderNodeContent(M)];case 2:P.sent(),P.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(M,P,K){var Y=this;if(P===0)this.ctx.fillText(M.text,M.bounds.left,M.bounds.top+K);else{var re=segmentGraphemes(M.text);re.reduce(function(D,ne){return Y.ctx.fillText(ne,D,M.bounds.top+K),D+Y.ctx.measureText(ne).width},M.bounds.left)}},B.prototype.createFontStyle=function(M){var P=M.fontVariant.filter(function(re){return re==="normal"||re==="small-caps"}).join(""),K=fixIOSSystemFonts(M.fontFamily).join(", "),Y=isDimensionToken(M.fontSize)?""+M.fontSize.number+M.fontSize.unit:M.fontSize.number+"px";return[[M.fontStyle,P,M.fontWeight,Y,K].join(" "),K,Y]},B.prototype.renderTextNode=function(M,P){return __awaiter(this,void 0,void 0,function(){var K,Y,re,D,ne,Ae,fe,ge,Be=this;return __generator(this,function(Ue){return K=this.createFontStyle(P),Y=K[0],re=K[1],D=K[2],this.ctx.font=Y,this.ctx.direction=P.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ne=this.fontMetrics.getMetrics(re,D),Ae=ne.baseline,fe=ne.middle,ge=P.paintOrder,M.textBounds.forEach(function(ze){ge.forEach(function(Re){switch(Re){case 0:Be.ctx.fillStyle=asString(P.color),Be.renderTextWithLetterSpacing(ze,P.letterSpacing,Ae);var $e=P.textShadow;$e.length&&ze.text.trim().length&&($e.slice(0).reverse().forEach(function(We){Be.ctx.shadowColor=asString(We.color),Be.ctx.shadowOffsetX=We.offsetX.number*Be.options.scale,Be.ctx.shadowOffsetY=We.offsetY.number*Be.options.scale,Be.ctx.shadowBlur=We.blur.number,Be.renderTextWithLetterSpacing(ze,P.letterSpacing,Ae)}),Be.ctx.shadowColor="",Be.ctx.shadowOffsetX=0,Be.ctx.shadowOffsetY=0,Be.ctx.shadowBlur=0),P.textDecorationLine.length&&(Be.ctx.fillStyle=asString(P.textDecorationColor||P.color),P.textDecorationLine.forEach(function(We){switch(We){case 1:Be.ctx.fillRect(ze.bounds.left,Math.round(ze.bounds.top+Ae),ze.bounds.width,1);break;case 2:Be.ctx.fillRect(ze.bounds.left,Math.round(ze.bounds.top),ze.bounds.width,1);break;case 3:Be.ctx.fillRect(ze.bounds.left,Math.ceil(ze.bounds.top+fe),ze.bounds.width,1);break}}));break;case 1:P.webkitTextStrokeWidth&&ze.text.trim().length&&(Be.ctx.strokeStyle=asString(P.webkitTextStrokeColor),Be.ctx.lineWidth=P.webkitTextStrokeWidth,Be.ctx.lineJoin=window.chrome?"miter":"round",Be.ctx.strokeText(ze.text,ze.bounds.left,ze.bounds.top+Ae)),Be.ctx.strokeStyle="",Be.ctx.lineWidth=0,Be.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(M,P,K){if(K&&M.intrinsicWidth>0&&M.intrinsicHeight>0){var Y=contentBox(M),re=calculatePaddingBoxPath(P);this.path(re),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(K,0,0,M.intrinsicWidth,M.intrinsicHeight,Y.left,Y.top,Y.width,Y.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Y,re,D,ne,ut,ut,Ae,fe,ge,Be,At,Ue,ze,nt,Re,$e,We,ut,et,At,nt;return __generator(this,function(ft){switch(ft.label){case 0:this.applyEffects(M.getEffects(4)),P=M.container,K=M.curves,Y=P.styles,re=0,D=P.textNodes,ft.label=1;case 1:return re<D.length?(ne=D[re],[4,this.renderTextNode(ne,Y)]):[3,4];case 2:ft.sent(),ft.label=3;case 3:return re++,[3,1];case 4:if(!(P instanceof ImageElementContainer))return[3,8];ft.label=5;case 5:return ft.trys.push([5,7,,8]),[4,this.context.cache.match(P.src)];case 6:return ut=ft.sent(),this.renderReplacedElement(P,K,ut),[3,8];case 7:return ft.sent(),this.context.logger.error("Error loading image "+P.src),[3,8];case 8:if(P instanceof CanvasElementContainer&&this.renderReplacedElement(P,K,P.canvas),!(P instanceof SVGElementContainer))return[3,12];ft.label=9;case 9:return ft.trys.push([9,11,,12]),[4,this.context.cache.match(P.svg)];case 10:return ut=ft.sent(),this.renderReplacedElement(P,K,ut),[3,12];case 11:return ft.sent(),this.context.logger.error("Error loading svg "+P.svg.substring(0,255)),[3,12];case 12:return P instanceof IFrameElementContainer&&P.tree?(Ae=new B(this.context,{scale:this.options.scale,backgroundColor:P.backgroundColor,x:0,y:0,width:P.width,height:P.height}),[4,Ae.render(P.tree)]):[3,14];case 13:fe=ft.sent(),P.width&&P.height&&this.ctx.drawImage(fe,0,0,P.width,P.height,P.bounds.left,P.bounds.top,P.bounds.width,P.bounds.height),ft.label=14;case 14:if(P instanceof InputElementContainer&&(ge=Math.min(P.bounds.width,P.bounds.height),P.type===CHECKBOX?P.checked&&(this.ctx.save(),this.path([new Vector(P.bounds.left+ge*.39363,P.bounds.top+ge*.79),new Vector(P.bounds.left+ge*.16,P.bounds.top+ge*.5549),new Vector(P.bounds.left+ge*.27347,P.bounds.top+ge*.44071),new Vector(P.bounds.left+ge*.39694,P.bounds.top+ge*.5649),new Vector(P.bounds.left+ge*.72983,P.bounds.top+ge*.23),new Vector(P.bounds.left+ge*.84,P.bounds.top+ge*.34085),new Vector(P.bounds.left+ge*.39363,P.bounds.top+ge*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):P.type===RADIO&&P.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(P.bounds.left+ge/2,P.bounds.top+ge/2,ge/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(P)&&P.value.length){switch(Be=this.createFontStyle(Y),At=Be[0],Ue=Be[1],ze=this.fontMetrics.getMetrics(At,Ue).baseline,this.ctx.font=At,this.ctx.fillStyle=asString(Y.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(P.styles.textAlign),nt=contentBox(P),Re=0,P.styles.textAlign){case 1:Re+=nt.width/2;break;case 2:Re+=nt.width;break}$e=nt.add(Re,0,0,-nt.height/2+1),this.ctx.save(),this.path([new Vector(nt.left,nt.top),new Vector(nt.left+nt.width,nt.top),new Vector(nt.left+nt.width,nt.top+nt.height),new Vector(nt.left,nt.top+nt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(P.value,$e),Y.letterSpacing,ze),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(P.styles.display,2048))return[3,20];if(P.styles.listStyleImage===null)return[3,19];if(We=P.styles.listStyleImage,We.type!==0)return[3,18];ut=void 0,et=We.url,ft.label=15;case 15:return ft.trys.push([15,17,,18]),[4,this.context.cache.match(et)];case 16:return ut=ft.sent(),this.ctx.drawImage(ut,P.bounds.left-(ut.width+10),P.bounds.top),[3,18];case 17:return ft.sent(),this.context.logger.error("Error loading list-style-image "+et),[3,18];case 18:return[3,20];case 19:M.listValue&&P.styles.listStyleType!==-1&&(At=this.createFontStyle(Y)[0],this.ctx.font=At,this.ctx.fillStyle=asString(Y.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",nt=new Bounds(P.bounds.left,P.bounds.top+getAbsoluteValue(P.styles.paddingTop,P.bounds.width),P.bounds.width,computeLineHeight(Y.lineHeight,Y.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(M.listValue,nt),Y.letterSpacing,computeLineHeight(Y.lineHeight,Y.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ft.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,We,Y,re,We,D,ne,We,Ae,fe,We,ge,Be,We,Ue,ze,We,Re,$e,We;return __generator(this,function(ut){switch(ut.label){case 0:if(contains(M.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(M.element)];case 1:ut.sent(),P=0,K=M.negativeZIndex,ut.label=2;case 2:return P<K.length?(We=K[P],[4,this.renderStack(We)]):[3,5];case 3:ut.sent(),ut.label=4;case 4:return P++,[3,2];case 5:return[4,this.renderNodeContent(M.element)];case 6:ut.sent(),Y=0,re=M.nonInlineLevel,ut.label=7;case 7:return Y<re.length?(We=re[Y],[4,this.renderNode(We)]):[3,10];case 8:ut.sent(),ut.label=9;case 9:return Y++,[3,7];case 10:D=0,ne=M.nonPositionedFloats,ut.label=11;case 11:return D<ne.length?(We=ne[D],[4,this.renderStack(We)]):[3,14];case 12:ut.sent(),ut.label=13;case 13:return D++,[3,11];case 14:Ae=0,fe=M.nonPositionedInlineLevel,ut.label=15;case 15:return Ae<fe.length?(We=fe[Ae],[4,this.renderStack(We)]):[3,18];case 16:ut.sent(),ut.label=17;case 17:return Ae++,[3,15];case 18:ge=0,Be=M.inlineLevel,ut.label=19;case 19:return ge<Be.length?(We=Be[ge],[4,this.renderNode(We)]):[3,22];case 20:ut.sent(),ut.label=21;case 21:return ge++,[3,19];case 22:Ue=0,ze=M.zeroOrAutoZIndexOrTransformedOrOpacity,ut.label=23;case 23:return Ue<ze.length?(We=ze[Ue],[4,this.renderStack(We)]):[3,26];case 24:ut.sent(),ut.label=25;case 25:return Ue++,[3,23];case 26:Re=0,$e=M.positiveZIndex,ut.label=27;case 27:return Re<$e.length?(We=$e[Re],[4,this.renderStack(We)]):[3,30];case 28:ut.sent(),ut.label=29;case 29:return Re++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(M){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(M.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(M){this.ctx.beginPath(),this.formatPath(M),this.ctx.closePath()},B.prototype.formatPath=function(M){var P=this;M.forEach(function(K,Y){var re=isBezierCurve(K)?K.start:K;Y===0?P.ctx.moveTo(re.x,re.y):P.ctx.lineTo(re.x,re.y),isBezierCurve(K)&&P.ctx.bezierCurveTo(K.startControl.x,K.startControl.y,K.endControl.x,K.endControl.y,K.end.x,K.end.y)})},B.prototype.renderRepeat=function(M,P,K,Y){this.path(M),this.ctx.fillStyle=P,this.ctx.translate(K,Y),this.ctx.fill(),this.ctx.translate(-K,-Y)},B.prototype.resizeImage=function(M,P,K){var Y;if(M.width===P&&M.height===K)return M;var re=(Y=this.canvas.ownerDocument)!==null&&Y!==void 0?Y:document,D=re.createElement("canvas");D.width=Math.max(1,P),D.height=Math.max(1,K);var ne=D.getContext("2d");return ne.drawImage(M,0,0,M.width,M.height,0,0,P,K),D},B.prototype.renderBackgroundImage=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Y,re,D,ne;return __generator(this,function(Ae){switch(Ae.label){case 0:P=M.styles.backgroundImage.length-1,K=function(fe){var ge,Be,Ue,vt,Ei,Li,Yt,Ai,qt,ze,vt,Ei,Li,Yt,Ai,Re,$e,We,ut,et,At,nt,ft,Tt,qt,Vt,vt,Ut,Pt,Yt,Ai,Ri,Ei,Li,Yi,vi,d,w,I,k,R,W;return __generator(this,function(se){switch(se.label){case 0:if(fe.type!==0)return[3,5];ge=void 0,Be=fe.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,Y.context.cache.match(Be)];case 2:return ge=se.sent(),[3,4];case 3:return se.sent(),Y.context.logger.error("Error loading background-image "+Be),[3,4];case 4:return ge&&(Ue=calculateBackgroundRendering(M,P,[ge.width,ge.height,ge.width/ge.height]),vt=Ue[0],Ei=Ue[1],Li=Ue[2],Yt=Ue[3],Ai=Ue[4],qt=Y.ctx.createPattern(Y.resizeImage(ge,Yt,Ai),"repeat"),Y.renderRepeat(vt,qt,Ei,Li)),[3,6];case 5:isLinearGradient(fe)?(ze=calculateBackgroundRendering(M,P,[null,null,null]),vt=ze[0],Ei=ze[1],Li=ze[2],Yt=ze[3],Ai=ze[4],Re=calculateGradientDirection(fe.angle,Yt,Ai),$e=Re[0],We=Re[1],ut=Re[2],et=Re[3],At=Re[4],nt=document.createElement("canvas"),nt.width=Yt,nt.height=Ai,ft=nt.getContext("2d"),Tt=ft.createLinearGradient(We,et,ut,At),processColorStops(fe.stops,$e).forEach(function(oe){return Tt.addColorStop(oe.stop,asString(oe.color))}),ft.fillStyle=Tt,ft.fillRect(0,0,Yt,Ai),Yt>0&&Ai>0&&(qt=Y.ctx.createPattern(nt,"repeat"),Y.renderRepeat(vt,qt,Ei,Li))):isRadialGradient(fe)&&(Vt=calculateBackgroundRendering(M,P,[null,null,null]),vt=Vt[0],Ut=Vt[1],Pt=Vt[2],Yt=Vt[3],Ai=Vt[4],Ri=fe.position.length===0?[FIFTY_PERCENT]:fe.position,Ei=getAbsoluteValue(Ri[0],Yt),Li=getAbsoluteValue(Ri[Ri.length-1],Ai),Yi=calculateRadius(fe,Ei,Li,Yt,Ai),vi=Yi[0],d=Yi[1],vi>0&&d>0&&(w=Y.ctx.createRadialGradient(Ut+Ei,Pt+Li,0,Ut+Ei,Pt+Li,vi),processColorStops(fe.stops,vi*2).forEach(function(oe){return w.addColorStop(oe.stop,asString(oe.color))}),Y.path(vt),Y.ctx.fillStyle=w,vi!==d?(I=M.bounds.left+.5*M.bounds.width,k=M.bounds.top+.5*M.bounds.height,R=d/vi,W=1/R,Y.ctx.save(),Y.ctx.translate(I,k),Y.ctx.transform(1,0,0,R,0,0),Y.ctx.translate(-I,-k),Y.ctx.fillRect(Ut,W*(Pt-k)+k,Yt,Ai*W),Y.ctx.restore()):Y.ctx.fill())),se.label=6;case 6:return P--,[2]}})},Y=this,re=0,D=M.styles.backgroundImage.slice(0).reverse(),Ae.label=1;case 1:return re<D.length?(ne=D[re],[5,K(ne)]):[3,4];case 2:Ae.sent(),Ae.label=3;case 3:return re++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(M,P,K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(Y){return this.path(parsePathForBorder(K,P)),this.ctx.fillStyle=asString(M),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(M,P,K,Y){return __awaiter(this,void 0,void 0,function(){var re,D;return __generator(this,function(ne){switch(ne.label){case 0:return P<3?[4,this.renderSolidBorder(M,K,Y)]:[3,2];case 1:return ne.sent(),[2];case 2:return re=parsePathForBorderDoubleOuter(Y,K),this.path(re),this.ctx.fillStyle=asString(M),this.ctx.fill(),D=parsePathForBorderDoubleInner(Y,K),this.path(D),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(M){return __awaiter(this,void 0,void 0,function(){var P,K,Y,re,D,ne,Ae,fe,ge=this;return __generator(this,function(Be){switch(Be.label){case 0:return this.applyEffects(M.getEffects(2)),P=M.container.styles,K=!isTransparent(P.backgroundColor)||P.backgroundImage.length,Y=[{style:P.borderTopStyle,color:P.borderTopColor,width:P.borderTopWidth},{style:P.borderRightStyle,color:P.borderRightColor,width:P.borderRightWidth},{style:P.borderBottomStyle,color:P.borderBottomColor,width:P.borderBottomWidth},{style:P.borderLeftStyle,color:P.borderLeftColor,width:P.borderLeftWidth}],re=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(P.backgroundClip,0),M.curves),K||P.boxShadow.length?(this.ctx.save(),this.path(re),this.ctx.clip(),isTransparent(P.backgroundColor)||(this.ctx.fillStyle=asString(P.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(M.container)]):[3,2];case 1:Be.sent(),this.ctx.restore(),P.boxShadow.slice(0).reverse().forEach(function(Ue){ge.ctx.save();var ze=calculateBorderBoxPath(M.curves),Re=Ue.inset?0:MASK_OFFSET,$e=transformPath(ze,-Re+(Ue.inset?1:-1)*Ue.spread.number,(Ue.inset?1:-1)*Ue.spread.number,Ue.spread.number*(Ue.inset?-2:2),Ue.spread.number*(Ue.inset?-2:2));Ue.inset?(ge.path(ze),ge.ctx.clip(),ge.mask($e)):(ge.mask(ze),ge.ctx.clip(),ge.path($e)),ge.ctx.shadowOffsetX=Ue.offsetX.number+Re,ge.ctx.shadowOffsetY=Ue.offsetY.number,ge.ctx.shadowColor=asString(Ue.color),ge.ctx.shadowBlur=Ue.blur.number,ge.ctx.fillStyle=Ue.inset?asString(Ue.color):"rgba(0,0,0,1)",ge.ctx.fill(),ge.ctx.restore()}),Be.label=2;case 2:D=0,ne=0,Ae=Y,Be.label=3;case 3:return ne<Ae.length?(fe=Ae[ne],fe.style!==0&&!isTransparent(fe.color)&&fe.width>0?fe.style!==2?[3,5]:[4,this.renderDashedDottedBorder(fe.color,fe.width,D,M.curves,2)]:[3,11]):[3,13];case 4:return Be.sent(),[3,11];case 5:return fe.style!==3?[3,7]:[4,this.renderDashedDottedBorder(fe.color,fe.width,D,M.curves,3)];case 6:return Be.sent(),[3,11];case 7:return fe.style!==4?[3,9]:[4,this.renderDoubleBorder(fe.color,fe.width,D,M.curves)];case 8:return Be.sent(),[3,11];case 9:return[4,this.renderSolidBorder(fe.color,D,M.curves)];case 10:Be.sent(),Be.label=11;case 11:D++,Be.label=12;case 12:return ne++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(M,P,K,Y,re){return __awaiter(this,void 0,void 0,function(){var D,ne,Ae,fe,ge,Be,Ue,ze,Re,$e,We,ut,et,At,nt,ft,nt,ft;return __generator(this,function(Tt){return this.ctx.save(),D=parsePathForBorderStroke(Y,K),ne=parsePathForBorder(Y,K),re===2&&(this.path(ne),this.ctx.clip()),isBezierCurve(ne[0])?(Ae=ne[0].start.x,fe=ne[0].start.y):(Ae=ne[0].x,fe=ne[0].y),isBezierCurve(ne[1])?(ge=ne[1].end.x,Be=ne[1].end.y):(ge=ne[1].x,Be=ne[1].y),K===0||K===2?Ue=Math.abs(Ae-ge):Ue=Math.abs(fe-Be),this.ctx.beginPath(),re===3?this.formatPath(D):this.formatPath(ne.slice(0,2)),ze=P<3?P*3:P*2,Re=P<3?P*2:P,re===3&&(ze=P,Re=P),$e=!0,Ue<=ze*2?$e=!1:Ue<=ze*2+Re?(We=Ue/(2*ze+Re),ze*=We,Re*=We):(ut=Math.floor((Ue+Re)/(ze+Re)),et=(Ue-ut*ze)/(ut-1),At=(Ue-(ut+1)*ze)/ut,Re=At<=0||Math.abs(Re-et)<Math.abs(Re-At)?et:At),$e&&(re===3?this.ctx.setLineDash([0,ze+Re]):this.ctx.setLineDash([ze,Re])),re===3?(this.ctx.lineCap="round",this.ctx.lineWidth=P):this.ctx.lineWidth=P*2+1.1,this.ctx.strokeStyle=asString(M),this.ctx.stroke(),this.ctx.setLineDash([]),re===2&&(isBezierCurve(ne[0])&&(nt=ne[3],ft=ne[0],this.ctx.beginPath(),this.formatPath([new Vector(nt.end.x,nt.end.y),new Vector(ft.start.x,ft.start.y)]),this.ctx.stroke()),isBezierCurve(ne[1])&&(nt=ne[1],ft=ne[2],this.ctx.beginPath(),this.formatPath([new Vector(nt.end.x,nt.end.y),new Vector(ft.start.x,ft.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(M){return __awaiter(this,void 0,void 0,function(){var P;return __generator(this,function(K){switch(K.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),P=parseStackingContexts(M),[4,this.renderStack(P)];case 1:return K.sent(),this.applyEffects([]),[2,this.canvas]}})})},B}(Renderer),isTextInputElement=function(g){return g instanceof TextareaElementContainer||g instanceof SelectElementContainer?!0:g instanceof InputElementContainer&&g.type!==RADIO&&g.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(g,B){switch(g){case 0:return calculateBorderBoxPath(B);case 2:return calculateContentBoxPath(B);case 1:default:return calculatePaddingBoxPath(B)}},canvasTextAlign=function(g){switch(g){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(g){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?g.filter(function(B){return iOSBrokenFonts.indexOf(B)===-1}):g},ForeignObjectRenderer=function(g){__extends(B,g);function B(M,P){var K=g.call(this,M,P)||this;return K.canvas=P.canvas?P.canvas:document.createElement("canvas"),K.ctx=K.canvas.getContext("2d"),K.options=P,K.canvas.width=Math.floor(P.width*P.scale),K.canvas.height=Math.floor(P.height*P.scale),K.canvas.style.width=P.width+"px",K.canvas.style.height=P.height+"px",K.ctx.scale(K.options.scale,K.options.scale),K.ctx.translate(-P.x,-P.y),K.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+P.width+"x"+P.height+" at "+P.x+","+P.y+") with scale "+P.scale),K}return B.prototype.render=function(M){return __awaiter(this,void 0,void 0,function(){var P,K;return __generator(this,function(Y){switch(Y.label){case 0:return P=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,M),[4,loadSerializedSVG(P)];case 1:return K=Y.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(K,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B}(Renderer),loadSerializedSVG=function(g){return new Promise(function(B,M){var P=new Image;P.onload=function(){B(P)},P.onerror=M,P.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(g))})},Logger=function(){function g(B){var M=B.id,P=B.enabled;this.id=M,this.enabled=P,this.start=Date.now()}return g.prototype.debug=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},g.prototype.getTime=function(){return Date.now()-this.start},g.prototype.info=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B))},g.prototype.warn=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},g.prototype.error=function(){for(var B=[],M=0;M<arguments.length;M++)B[M]=arguments[M];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},g.instances={},g}(),Context=function(){function g(B,M){var P;this.windowBounds=M,this.instanceName="#"+g.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:B.logging}),this.cache=(P=B.cache)!==null&&P!==void 0?P:new Cache(this,B)}return g.instanceCount=1,g}(),html2canvas=function(g,B){return B===void 0&&(B={}),renderElement(g,B)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(g,B){return __awaiter(void 0,void 0,void 0,function(){var M,P,K,Y,re,D,ne,Ae,fe,ge,Be,Ue,ze,Re,$e,We,ut,et,At,nt,Tt,ft,Tt,qt,Vt,vt,Ut,Pt,Yt,Ai,Ri,Ei,Li,Yi,vi,d,w,I,k,R;return __generator(this,function(W){switch(W.label){case 0:if(!g||typeof g!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(M=g.ownerDocument,!M)throw new Error("Element is not attached to a Document");if(P=M.defaultView,!P)throw new Error("Document is not attached to a Window");return K={allowTaint:(qt=B.allowTaint)!==null&&qt!==void 0?qt:!1,imageTimeout:(Vt=B.imageTimeout)!==null&&Vt!==void 0?Vt:15e3,proxy:B.proxy,useCORS:(vt=B.useCORS)!==null&&vt!==void 0?vt:!1},Y=__assign({logging:(Ut=B.logging)!==null&&Ut!==void 0?Ut:!0,cache:B.cache},K),re={windowWidth:(Pt=B.windowWidth)!==null&&Pt!==void 0?Pt:P.innerWidth,windowHeight:(Yt=B.windowHeight)!==null&&Yt!==void 0?Yt:P.innerHeight,scrollX:(Ai=B.scrollX)!==null&&Ai!==void 0?Ai:P.pageXOffset,scrollY:(Ri=B.scrollY)!==null&&Ri!==void 0?Ri:P.pageYOffset},D=new Bounds(re.scrollX,re.scrollY,re.windowWidth,re.windowHeight),ne=new Context(Y,D),Ae=(Ei=B.foreignObjectRendering)!==null&&Ei!==void 0?Ei:!1,fe={allowTaint:(Li=B.allowTaint)!==null&&Li!==void 0?Li:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:Ae,copyStyles:Ae},ne.logger.debug("Starting document clone with size "+D.width+"x"+D.height+" scrolled to "+-D.left+","+-D.top),ge=new DocumentCloner(ne,g,fe),Be=ge.clonedReferenceElement,Be?[4,ge.toIFrame(M,D)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Ue=W.sent(),ze=isBodyElement(Be)||isHTMLElement(Be)?parseDocumentSize(Be.ownerDocument):parseBounds(ne,Be),Re=ze.width,$e=ze.height,We=ze.left,ut=ze.top,et=parseBackgroundColor(ne,Be,B.backgroundColor),At={canvas:B.canvas,backgroundColor:et,scale:(vi=(Yi=B.scale)!==null&&Yi!==void 0?Yi:P.devicePixelRatio)!==null&&vi!==void 0?vi:1,x:((d=B.x)!==null&&d!==void 0?d:0)+We,y:((w=B.y)!==null&&w!==void 0?w:0)+ut,width:(I=B.width)!==null&&I!==void 0?I:Math.ceil(Re),height:(k=B.height)!==null&&k!==void 0?k:Math.ceil($e)},Ae?(ne.logger.debug("Document cloned, using foreign object rendering"),Tt=new ForeignObjectRenderer(ne,At),[4,Tt.render(Be)]):[3,3];case 2:return nt=W.sent(),[3,5];case 3:return ne.logger.debug("Document cloned, element located at "+We+","+ut+" with size "+Re+"x"+$e+" using computed rendering"),ne.logger.debug("Starting DOM parsing"),ft=parseTree(ne,Be),et===ft.styles.backgroundColor&&(ft.styles.backgroundColor=COLORS.TRANSPARENT),ne.logger.debug("Starting renderer for element at "+At.x+","+At.y+" with size "+At.width+"x"+At.height),Tt=new CanvasRenderer(ne,At),[4,Tt.render(ft)];case 4:nt=W.sent(),W.label=5;case 5:return(!((R=B.removeContainer)!==null&&R!==void 0)||R)&&(DocumentCloner.destroy(Ue)||ne.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ne.logger.debug("Finished rendering"),[2,nt]}})})},parseBackgroundColor=function(g,B,M){var P=B.ownerDocument,K=P.documentElement?parseColor(g,getComputedStyle(P.documentElement).backgroundColor):COLORS.TRANSPARENT,Y=P.body?parseColor(g,getComputedStyle(P.body).backgroundColor):COLORS.TRANSPARENT,re=typeof M=="string"?parseColor(g,M):M===null?COLORS.TRANSPARENT:4294967295;return B===P.documentElement?isTransparent(K)?isTransparent(Y)?re:Y:K:re};const codemirror="",locationfilter="",all$2="",all$1="",bulma="",_default="",compact="";var raf$1={exports:{}},performanceNow={exports:{}};(function(){var g,B,M,P,K,Y;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(g()-K)/1e6},B=process.hrtime,g=function(){var re;return re=B(),re[0]*1e9+re[1]},P=g(),Y=process.uptime()*1e9,K=P-Y):Date.now?(performanceNow.exports=function(){return Date.now()-M},M=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-M},M=new Date().getTime())}).call(commonjsGlobal);var performanceNowExports=performanceNow.exports,now=performanceNowExports,root$1=typeof window>"u"?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root$1["request"+suffix],caf=root$1["cancel"+suffix]||root$1["cancelRequest"+suffix];for(var i$1=0;!raf&&i$1<vendors.length;i$1++)raf=root$1[vendors[i$1]+"Request"+suffix],caf=root$1[vendors[i$1]+"Cancel"+suffix]||root$1[vendors[i$1]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(g){if(queue.length===0){var B=now(),M=Math.max(0,frameDuration-(B-last));last=M+B,setTimeout(function(){var P=queue.slice(0);queue.length=0;for(var K=0;K<P.length;K++)if(!P[K].cancelled)try{P[K].callback(last)}catch(Y){setTimeout(function(){throw Y},0)}},Math.round(M))}return queue.push({handle:++id,callback:g,cancelled:!1}),id},caf=function(g){for(var B=0;B<queue.length;B++)queue[B].handle===g&&(queue[B].cancelled=!0)}}raf$1.exports=function(g){return raf.call(root$1,g)};raf$1.exports.cancel=function(){caf.apply(root$1,arguments)};raf$1.exports.polyfill=function(g){g||(g=root$1),g.requestAnimationFrame=raf,g.cancelAnimationFrame=caf};var rafExports=raf$1.exports;const requestAnimationFrame$1=getDefaultExportFromCjs(rafExports);var rgbcolor=function(g){this.ok=!1,this.alpha=1,g.charAt(0)=="#"&&(g=g.substr(1,6)),g=g.replace(/ /g,""),g=g.toLowerCase();var B={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};g=B[g]||g;for(var M=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(ne){return[parseInt(ne[1]),parseInt(ne[2]),parseInt(ne[3]),parseFloat(ne[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(ne){return[parseInt(ne[1]),parseInt(ne[2]),parseInt(ne[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(ne){return[parseInt(ne[1],16),parseInt(ne[2],16),parseInt(ne[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(ne){return[parseInt(ne[1]+ne[1],16),parseInt(ne[2]+ne[2],16),parseInt(ne[3]+ne[3],16)]}}],P=0;P<M.length;P++){var K=M[P].re,Y=M[P].process,re=K.exec(g);if(re){var D=Y(re);this.r=D[0],this.g=D[1],this.b=D[2],D.length>3&&(this.alpha=D[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var ne=this.r.toString(16),Ae=this.g.toString(16),fe=this.b.toString(16);return ne.length==1&&(ne="0"+ne),Ae.length==1&&(Ae="0"+Ae),fe.length==1&&(fe="0"+fe),"#"+ne+Ae+fe},this.getHelpXML=function(){for(var ne=new Array,Ae=0;Ae<M.length;Ae++)for(var fe=M[Ae].example,ge=0;ge<fe.length;ge++)ne[ne.length]=fe[ge];for(var Be in B)ne[ne.length]=Be;var Ue=document.createElement("ul");Ue.setAttribute("id","rgbcolor-examples");for(var Ae=0;Ae<ne.length;Ae++)try{var ze=document.createElement("li"),Re=new RGBColor(ne[Ae]),$e=document.createElement("div");$e.style.cssText="margin: 3px; border: 1px solid black; background:"+Re.toHex()+"; color:"+Re.toHex(),$e.appendChild(document.createTextNode("test"));var We=document.createTextNode(" "+ne[Ae]+" -> "+Re.toRGB()+" -> "+Re.toHex());ze.appendChild($e),ze.appendChild(We),Ue.appendChild(ze)}catch{}return Ue}};const RGBColor$1=getDefaultExportFromCjs(rgbcolor);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(g,B){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,P){M.__proto__=P}||function(M,P){for(var K in P)Object.prototype.hasOwnProperty.call(P,K)&&(M[K]=P[K])})(g,B)};function r(g,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function M(){this.constructor=g}t(g,B),g.prototype=B===null?Object.create(B):(M.prototype=B.prototype,new M)}function e(g){var B="";Array.isArray(g)||(g=[g]);for(var M=0;M<g.length;M++){var P=g[M];if(P.type===_.CLOSE_PATH)B+="z";else if(P.type===_.HORIZ_LINE_TO)B+=(P.relative?"h":"H")+P.x;else if(P.type===_.VERT_LINE_TO)B+=(P.relative?"v":"V")+P.y;else if(P.type===_.MOVE_TO)B+=(P.relative?"m":"M")+P.x+" "+P.y;else if(P.type===_.LINE_TO)B+=(P.relative?"l":"L")+P.x+" "+P.y;else if(P.type===_.CURVE_TO)B+=(P.relative?"c":"C")+P.x1+" "+P.y1+" "+P.x2+" "+P.y2+" "+P.x+" "+P.y;else if(P.type===_.SMOOTH_CURVE_TO)B+=(P.relative?"s":"S")+P.x2+" "+P.y2+" "+P.x+" "+P.y;else if(P.type===_.QUAD_TO)B+=(P.relative?"q":"Q")+P.x1+" "+P.y1+" "+P.x+" "+P.y;else if(P.type===_.SMOOTH_QUAD_TO)B+=(P.relative?"t":"T")+P.x+" "+P.y;else{if(P.type!==_.ARC)throw new Error('Unexpected command type "'+P.type+'" at index '+M+".");B+=(P.relative?"a":"A")+P.rX+" "+P.rY+" "+P.xRot+" "+ +P.lArcFlag+" "+ +P.sweepFlag+" "+P.x+" "+P.y}}return B}function i(g,B){var M=g[0],P=g[1];return[M*Math.cos(B)-P*Math.sin(B),M*Math.sin(B)+P*Math.cos(B)]}function a(){for(var g=[],B=0;B<arguments.length;B++)g[B]=arguments[B];for(var M=0;M<g.length;M++)if(typeof g[M]!="number")throw new Error("assertNumbers arguments["+M+"] is not a number. "+typeof g[M]+" == typeof "+g[M]);return!0}var n=Math.PI;function o(g,B,M){g.lArcFlag=g.lArcFlag===0?0:1,g.sweepFlag=g.sweepFlag===0?0:1;var P=g.rX,K=g.rY,Y=g.x,re=g.y;P=Math.abs(g.rX),K=Math.abs(g.rY);var D=i([(B-Y)/2,(M-re)/2],-g.xRot/180*n),ne=D[0],Ae=D[1],fe=Math.pow(ne,2)/Math.pow(P,2)+Math.pow(Ae,2)/Math.pow(K,2);1<fe&&(P*=Math.sqrt(fe),K*=Math.sqrt(fe)),g.rX=P,g.rY=K;var ge=Math.pow(P,2)*Math.pow(Ae,2)+Math.pow(K,2)*Math.pow(ne,2),Be=(g.lArcFlag!==g.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(P,2)*Math.pow(K,2)-ge)/ge)),Ue=P*Ae/K*Be,ze=-K*ne/P*Be,Re=i([Ue,ze],g.xRot/180*n);g.cX=Re[0]+(B+Y)/2,g.cY=Re[1]+(M+re)/2,g.phi1=Math.atan2((Ae-ze)/K,(ne-Ue)/P),g.phi2=Math.atan2((-Ae-ze)/K,(-ne-Ue)/P),g.sweepFlag===0&&g.phi2>g.phi1&&(g.phi2-=2*n),g.sweepFlag===1&&g.phi2<g.phi1&&(g.phi2+=2*n),g.phi1*=180/n,g.phi2*=180/n}function s(g,B,M){a(g,B,M);var P=g*g+B*B-M*M;if(0>P)return[];if(P===0)return[[g*M/(g*g+B*B),B*M/(g*g+B*B)]];var K=Math.sqrt(P);return[[(g*M+B*K)/(g*g+B*B),(B*M-g*K)/(g*g+B*B)],[(g*M-B*K)/(g*g+B*B),(B*M+g*K)/(g*g+B*B)]]}var u,h=Math.PI/180;function c$1(g,B,M){return(1-M)*g+M*B}function y(g,B,M,P){return g+Math.cos(P/180*n)*B+Math.sin(P/180*n)*M}function p(g,B,M,P){var K=1e-6,Y=B-g,re=M-B,D=3*Y+3*(P-M)-6*re,ne=6*(re-Y),Ae=3*Y;return Math.abs(D)<K?[-Ae/ne]:function(fe,ge,Be){Be===void 0&&(Be=1e-6);var Ue=fe*fe/4-ge;if(Ue<-Be)return[];if(Ue<=Be)return[-fe/2];var ze=Math.sqrt(Ue);return[-fe/2-ze,-fe/2+ze]}(ne/D,Ae/D,K)}function m$1(g,B,M,P,K){var Y=1-K;return g*(Y*Y*Y)+B*(3*Y*Y*K)+M*(3*Y*K*K)+P*(K*K*K)}(function(g){function B(){return K(function(D,ne,Ae){return D.relative&&(D.x1!==void 0&&(D.x1+=ne),D.y1!==void 0&&(D.y1+=Ae),D.x2!==void 0&&(D.x2+=ne),D.y2!==void 0&&(D.y2+=Ae),D.x!==void 0&&(D.x+=ne),D.y!==void 0&&(D.y+=Ae),D.relative=!1),D})}function M(){var D=NaN,ne=NaN,Ae=NaN,fe=NaN;return K(function(ge,Be,Ue){return ge.type&_.SMOOTH_CURVE_TO&&(ge.type=_.CURVE_TO,D=isNaN(D)?Be:D,ne=isNaN(ne)?Ue:ne,ge.x1=ge.relative?Be-D:2*Be-D,ge.y1=ge.relative?Ue-ne:2*Ue-ne),ge.type&_.CURVE_TO?(D=ge.relative?Be+ge.x2:ge.x2,ne=ge.relative?Ue+ge.y2:ge.y2):(D=NaN,ne=NaN),ge.type&_.SMOOTH_QUAD_TO&&(ge.type=_.QUAD_TO,Ae=isNaN(Ae)?Be:Ae,fe=isNaN(fe)?Ue:fe,ge.x1=ge.relative?Be-Ae:2*Be-Ae,ge.y1=ge.relative?Ue-fe:2*Ue-fe),ge.type&_.QUAD_TO?(Ae=ge.relative?Be+ge.x1:ge.x1,fe=ge.relative?Ue+ge.y1:ge.y1):(Ae=NaN,fe=NaN),ge})}function P(){var D=NaN,ne=NaN;return K(function(Ae,fe,ge){if(Ae.type&_.SMOOTH_QUAD_TO&&(Ae.type=_.QUAD_TO,D=isNaN(D)?fe:D,ne=isNaN(ne)?ge:ne,Ae.x1=Ae.relative?fe-D:2*fe-D,Ae.y1=Ae.relative?ge-ne:2*ge-ne),Ae.type&_.QUAD_TO){D=Ae.relative?fe+Ae.x1:Ae.x1,ne=Ae.relative?ge+Ae.y1:Ae.y1;var Be=Ae.x1,Ue=Ae.y1;Ae.type=_.CURVE_TO,Ae.x1=((Ae.relative?0:fe)+2*Be)/3,Ae.y1=((Ae.relative?0:ge)+2*Ue)/3,Ae.x2=(Ae.x+2*Be)/3,Ae.y2=(Ae.y+2*Ue)/3}else D=NaN,ne=NaN;return Ae})}function K(D){var ne=0,Ae=0,fe=NaN,ge=NaN;return function(Be){if(isNaN(fe)&&!(Be.type&_.MOVE_TO))throw new Error("path must start with moveto");var Ue=D(Be,ne,Ae,fe,ge);return Be.type&_.CLOSE_PATH&&(ne=fe,Ae=ge),Be.x!==void 0&&(ne=Be.relative?ne+Be.x:Be.x),Be.y!==void 0&&(Ae=Be.relative?Ae+Be.y:Be.y),Be.type&_.MOVE_TO&&(fe=ne,ge=Ae),Ue}}function Y(D,ne,Ae,fe,ge,Be){return a(D,ne,Ae,fe,ge,Be),K(function(Ue,ze,Re,$e){var We=Ue.x1,ut=Ue.x2,et=Ue.relative&&!isNaN($e),At=Ue.x!==void 0?Ue.x:et?0:ze,nt=Ue.y!==void 0?Ue.y:et?0:Re;function ft(I){return I*I}Ue.type&_.HORIZ_LINE_TO&&ne!==0&&(Ue.type=_.LINE_TO,Ue.y=Ue.relative?0:Re),Ue.type&_.VERT_LINE_TO&&Ae!==0&&(Ue.type=_.LINE_TO,Ue.x=Ue.relative?0:ze),Ue.x!==void 0&&(Ue.x=Ue.x*D+nt*Ae+(et?0:ge)),Ue.y!==void 0&&(Ue.y=At*ne+Ue.y*fe+(et?0:Be)),Ue.x1!==void 0&&(Ue.x1=Ue.x1*D+Ue.y1*Ae+(et?0:ge)),Ue.y1!==void 0&&(Ue.y1=We*ne+Ue.y1*fe+(et?0:Be)),Ue.x2!==void 0&&(Ue.x2=Ue.x2*D+Ue.y2*Ae+(et?0:ge)),Ue.y2!==void 0&&(Ue.y2=ut*ne+Ue.y2*fe+(et?0:Be));var Tt=D*fe-ne*Ae;if(Ue.xRot!==void 0&&(D!==1||ne!==0||Ae!==0||fe!==1))if(Tt===0)delete Ue.rX,delete Ue.rY,delete Ue.xRot,delete Ue.lArcFlag,delete Ue.sweepFlag,Ue.type=_.LINE_TO;else{var qt=Ue.xRot*Math.PI/180,Vt=Math.sin(qt),vt=Math.cos(qt),Ut=1/ft(Ue.rX),Pt=1/ft(Ue.rY),Yt=ft(vt)*Ut+ft(Vt)*Pt,Ai=2*Vt*vt*(Ut-Pt),Ri=ft(Vt)*Ut+ft(vt)*Pt,Ei=Yt*fe*fe-Ai*ne*fe+Ri*ne*ne,Li=Ai*(D*fe+ne*Ae)-2*(Yt*Ae*fe+Ri*D*ne),Yi=Yt*Ae*Ae-Ai*D*Ae+Ri*D*D,vi=(Math.atan2(Li,Ei-Yi)+Math.PI)%Math.PI/2,d=Math.sin(vi),w=Math.cos(vi);Ue.rX=Math.abs(Tt)/Math.sqrt(Ei*ft(w)+Li*d*w+Yi*ft(d)),Ue.rY=Math.abs(Tt)/Math.sqrt(Ei*ft(d)-Li*d*w+Yi*ft(w)),Ue.xRot=180*vi/Math.PI}return Ue.sweepFlag!==void 0&&0>Tt&&(Ue.sweepFlag=+!Ue.sweepFlag),Ue})}function re(){return function(D){var ne={};for(var Ae in D)ne[Ae]=D[Ae];return ne}}g.ROUND=function(D){function ne(Ae){return Math.round(Ae*D)/D}return D===void 0&&(D=1e13),a(D),function(Ae){return Ae.x1!==void 0&&(Ae.x1=ne(Ae.x1)),Ae.y1!==void 0&&(Ae.y1=ne(Ae.y1)),Ae.x2!==void 0&&(Ae.x2=ne(Ae.x2)),Ae.y2!==void 0&&(Ae.y2=ne(Ae.y2)),Ae.x!==void 0&&(Ae.x=ne(Ae.x)),Ae.y!==void 0&&(Ae.y=ne(Ae.y)),Ae.rX!==void 0&&(Ae.rX=ne(Ae.rX)),Ae.rY!==void 0&&(Ae.rY=ne(Ae.rY)),Ae}},g.TO_ABS=B,g.TO_REL=function(){return K(function(D,ne,Ae){return D.relative||(D.x1!==void 0&&(D.x1-=ne),D.y1!==void 0&&(D.y1-=Ae),D.x2!==void 0&&(D.x2-=ne),D.y2!==void 0&&(D.y2-=Ae),D.x!==void 0&&(D.x-=ne),D.y!==void 0&&(D.y-=Ae),D.relative=!0),D})},g.NORMALIZE_HVZ=function(D,ne,Ae){return D===void 0&&(D=!0),ne===void 0&&(ne=!0),Ae===void 0&&(Ae=!0),K(function(fe,ge,Be,Ue,ze){if(isNaN(Ue)&&!(fe.type&_.MOVE_TO))throw new Error("path must start with moveto");return ne&&fe.type&_.HORIZ_LINE_TO&&(fe.type=_.LINE_TO,fe.y=fe.relative?0:Be),Ae&&fe.type&_.VERT_LINE_TO&&(fe.type=_.LINE_TO,fe.x=fe.relative?0:ge),D&&fe.type&_.CLOSE_PATH&&(fe.type=_.LINE_TO,fe.x=fe.relative?Ue-ge:Ue,fe.y=fe.relative?ze-Be:ze),fe.type&_.ARC&&(fe.rX===0||fe.rY===0)&&(fe.type=_.LINE_TO,delete fe.rX,delete fe.rY,delete fe.xRot,delete fe.lArcFlag,delete fe.sweepFlag),fe})},g.NORMALIZE_ST=M,g.QT_TO_C=P,g.INFO=K,g.SANITIZE=function(D){D===void 0&&(D=0),a(D);var ne=NaN,Ae=NaN,fe=NaN,ge=NaN;return K(function(Be,Ue,ze,Re,$e){var We=Math.abs,ut=!1,et=0,At=0;if(Be.type&_.SMOOTH_CURVE_TO&&(et=isNaN(ne)?0:Ue-ne,At=isNaN(Ae)?0:ze-Ae),Be.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(ne=Be.relative?Ue+Be.x2:Be.x2,Ae=Be.relative?ze+Be.y2:Be.y2):(ne=NaN,Ae=NaN),Be.type&_.SMOOTH_QUAD_TO?(fe=isNaN(fe)?Ue:2*Ue-fe,ge=isNaN(ge)?ze:2*ze-ge):Be.type&_.QUAD_TO?(fe=Be.relative?Ue+Be.x1:Be.x1,ge=Be.relative?ze+Be.y1:Be.y2):(fe=NaN,ge=NaN),Be.type&_.LINE_COMMANDS||Be.type&_.ARC&&(Be.rX===0||Be.rY===0||!Be.lArcFlag)||Be.type&_.CURVE_TO||Be.type&_.SMOOTH_CURVE_TO||Be.type&_.QUAD_TO||Be.type&_.SMOOTH_QUAD_TO){var nt=Be.x===void 0?0:Be.relative?Be.x:Be.x-Ue,ft=Be.y===void 0?0:Be.relative?Be.y:Be.y-ze;et=isNaN(fe)?Be.x1===void 0?et:Be.relative?Be.x:Be.x1-Ue:fe-Ue,At=isNaN(ge)?Be.y1===void 0?At:Be.relative?Be.y:Be.y1-ze:ge-ze;var Tt=Be.x2===void 0?0:Be.relative?Be.x:Be.x2-Ue,qt=Be.y2===void 0?0:Be.relative?Be.y:Be.y2-ze;We(nt)<=D&&We(ft)<=D&&We(et)<=D&&We(At)<=D&&We(Tt)<=D&&We(qt)<=D&&(ut=!0)}return Be.type&_.CLOSE_PATH&&We(Ue-Re)<=D&&We(ze-$e)<=D&&(ut=!0),ut?[]:Be})},g.MATRIX=Y,g.ROTATE=function(D,ne,Ae){ne===void 0&&(ne=0),Ae===void 0&&(Ae=0),a(D,ne,Ae);var fe=Math.sin(D),ge=Math.cos(D);return Y(ge,fe,-fe,ge,ne-ne*ge+Ae*fe,Ae-ne*fe-Ae*ge)},g.TRANSLATE=function(D,ne){return ne===void 0&&(ne=0),a(D,ne),Y(1,0,0,1,D,ne)},g.SCALE=function(D,ne){return ne===void 0&&(ne=D),a(D,ne),Y(D,0,0,ne,0,0)},g.SKEW_X=function(D){return a(D),Y(1,0,Math.atan(D),1,0,0)},g.SKEW_Y=function(D){return a(D),Y(1,Math.atan(D),0,1,0,0)},g.X_AXIS_SYMMETRY=function(D){return D===void 0&&(D=0),a(D),Y(-1,0,0,1,D,0)},g.Y_AXIS_SYMMETRY=function(D){return D===void 0&&(D=0),a(D),Y(1,0,0,-1,0,D)},g.A_TO_C=function(){return K(function(D,ne,Ae){return _.ARC===D.type?function(fe,ge,Be){var Ue,ze,Re,$e;fe.cX||o(fe,ge,Be);for(var We=Math.min(fe.phi1,fe.phi2),ut=Math.max(fe.phi1,fe.phi2)-We,et=Math.ceil(ut/90),At=new Array(et),nt=ge,ft=Be,Tt=0;Tt<et;Tt++){var qt=c$1(fe.phi1,fe.phi2,Tt/et),Vt=c$1(fe.phi1,fe.phi2,(Tt+1)/et),vt=Vt-qt,Ut=4/3*Math.tan(vt*h/4),Pt=[Math.cos(qt*h)-Ut*Math.sin(qt*h),Math.sin(qt*h)+Ut*Math.cos(qt*h)],Yt=Pt[0],Ai=Pt[1],Ri=[Math.cos(Vt*h),Math.sin(Vt*h)],Ei=Ri[0],Li=Ri[1],Yi=[Ei+Ut*Math.sin(Vt*h),Li-Ut*Math.cos(Vt*h)],vi=Yi[0],d=Yi[1];At[Tt]={relative:fe.relative,type:_.CURVE_TO};var w=function(I,k){var R=i([I*fe.rX,k*fe.rY],fe.xRot),W=R[0],se=R[1];return[fe.cX+W,fe.cY+se]};Ue=w(Yt,Ai),At[Tt].x1=Ue[0],At[Tt].y1=Ue[1],ze=w(vi,d),At[Tt].x2=ze[0],At[Tt].y2=ze[1],Re=w(Ei,Li),At[Tt].x=Re[0],At[Tt].y=Re[1],fe.relative&&(At[Tt].x1-=nt,At[Tt].y1-=ft,At[Tt].x2-=nt,At[Tt].y2-=ft,At[Tt].x-=nt,At[Tt].y-=ft),nt=($e=[At[Tt].x,At[Tt].y])[0],ft=$e[1]}return At}(D,D.relative?0:ne,D.relative?0:Ae):D})},g.ANNOTATE_ARCS=function(){return K(function(D,ne,Ae){return D.relative&&(ne=0,Ae=0),_.ARC===D.type&&o(D,ne,Ae),D})},g.CLONE=re,g.CALCULATE_BOUNDS=function(){var D=function(Be){var Ue={};for(var ze in Be)Ue[ze]=Be[ze];return Ue},ne=B(),Ae=P(),fe=M(),ge=K(function(Be,Ue,ze){var Re=fe(Ae(ne(D(Be))));function $e(d){d>ge.maxX&&(ge.maxX=d),d<ge.minX&&(ge.minX=d)}function We(d){d>ge.maxY&&(ge.maxY=d),d<ge.minY&&(ge.minY=d)}if(Re.type&_.DRAWING_COMMANDS&&($e(Ue),We(ze)),Re.type&_.HORIZ_LINE_TO&&$e(Re.x),Re.type&_.VERT_LINE_TO&&We(Re.y),Re.type&_.LINE_TO&&($e(Re.x),We(Re.y)),Re.type&_.CURVE_TO){$e(Re.x),We(Re.y);for(var ut=0,et=p(Ue,Re.x1,Re.x2,Re.x);ut<et.length;ut++)0<(vi=et[ut])&&1>vi&&$e(m$1(Ue,Re.x1,Re.x2,Re.x,vi));for(var At=0,nt=p(ze,Re.y1,Re.y2,Re.y);At<nt.length;At++)0<(vi=nt[At])&&1>vi&&We(m$1(ze,Re.y1,Re.y2,Re.y,vi))}if(Re.type&_.ARC){$e(Re.x),We(Re.y),o(Re,Ue,ze);for(var ft=Re.xRot/180*Math.PI,Tt=Math.cos(ft)*Re.rX,qt=Math.sin(ft)*Re.rX,Vt=-Math.sin(ft)*Re.rY,vt=Math.cos(ft)*Re.rY,Ut=Re.phi1<Re.phi2?[Re.phi1,Re.phi2]:-180>Re.phi2?[Re.phi2+360,Re.phi1+360]:[Re.phi2,Re.phi1],Pt=Ut[0],Yt=Ut[1],Ai=function(d){var w=d[0],I=d[1],k=180*Math.atan2(I,w)/Math.PI;return k<Pt?k+360:k},Ri=0,Ei=s(Vt,-Tt,0).map(Ai);Ri<Ei.length;Ri++)(vi=Ei[Ri])>Pt&&vi<Yt&&$e(y(Re.cX,Tt,Vt,vi));for(var Li=0,Yi=s(vt,-qt,0).map(Ai);Li<Yi.length;Li++){var vi;(vi=Yi[Li])>Pt&&vi<Yt&&We(y(Re.cY,qt,vt,vi))}}return Be});return ge.minX=1/0,ge.maxX=-1/0,ge.minY=1/0,ge.maxY=-1/0,ge}})(u||(u={}));var O,l=function(){function g(){}return g.prototype.round=function(B){return this.transform(u.ROUND(B))},g.prototype.toAbs=function(){return this.transform(u.TO_ABS())},g.prototype.toRel=function(){return this.transform(u.TO_REL())},g.prototype.normalizeHVZ=function(B,M,P){return this.transform(u.NORMALIZE_HVZ(B,M,P))},g.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},g.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},g.prototype.aToC=function(){return this.transform(u.A_TO_C())},g.prototype.sanitize=function(B){return this.transform(u.SANITIZE(B))},g.prototype.translate=function(B,M){return this.transform(u.TRANSLATE(B,M))},g.prototype.scale=function(B,M){return this.transform(u.SCALE(B,M))},g.prototype.rotate=function(B,M,P){return this.transform(u.ROTATE(B,M,P))},g.prototype.matrix=function(B,M,P,K,Y,re){return this.transform(u.MATRIX(B,M,P,K,Y,re))},g.prototype.skewX=function(B){return this.transform(u.SKEW_X(B))},g.prototype.skewY=function(B){return this.transform(u.SKEW_Y(B))},g.prototype.xSymmetry=function(B){return this.transform(u.X_AXIS_SYMMETRY(B))},g.prototype.ySymmetry=function(B){return this.transform(u.Y_AXIS_SYMMETRY(B))},g.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},g}(),T=function(g){return g===" "||g==="	"||g==="\r"||g===`
`},v=function(g){return"0".charCodeAt(0)<=g.charCodeAt(0)&&g.charCodeAt(0)<="9".charCodeAt(0)},f=function(g){function B(){var M=g.call(this)||this;return M.curNumber="",M.curCommandType=-1,M.curCommandRelative=!1,M.canParseCommandOrComma=!0,M.curNumberHasExp=!1,M.curNumberHasExpDigits=!1,M.curNumberHasDecimal=!1,M.curArgs=[],M}return r(B,g),B.prototype.finish=function(M){if(M===void 0&&(M=[]),this.parse(" ",M),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return M},B.prototype.parse=function(M,P){var K=this;P===void 0&&(P=[]);for(var Y=function(ge){P.push(ge),K.curArgs.length=0,K.canParseCommandOrComma=!0},re=0;re<M.length;re++){var D=M[re],ne=!(this.curCommandType!==_.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),Ae=v(D)&&(this.curNumber==="0"&&D==="0"||ne);if(!v(D)||Ae)if(D!=="e"&&D!=="E")if(D!=="-"&&D!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(D!=="."||this.curNumberHasExp||this.curNumberHasDecimal||ne){if(this.curNumber&&this.curCommandType!==-1){var fe=Number(this.curNumber);if(isNaN(fe))throw new SyntaxError("Invalid number ending at "+re);if(this.curCommandType===_.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>fe)throw new SyntaxError('Expected positive number, got "'+fe+'" at index "'+re+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+re+'"')}this.curArgs.push(fe),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?Y({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:fe}):_.VERT_LINE_TO===this.curCommandType?Y({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:fe}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(Y({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?Y({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?Y({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?Y({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&Y({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(D))if(D===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(D!=="+"&&D!=="-"&&D!==".")if(Ae)this.curNumber=D,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+re+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+D+'" at index '+re+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,D!=="z"&&D!=="Z")if(D==="h"||D==="H")this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=D==="h";else if(D==="v"||D==="V")this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=D==="v";else if(D==="m"||D==="M")this.curCommandType=_.MOVE_TO,this.curCommandRelative=D==="m";else if(D==="l"||D==="L")this.curCommandType=_.LINE_TO,this.curCommandRelative=D==="l";else if(D==="c"||D==="C")this.curCommandType=_.CURVE_TO,this.curCommandRelative=D==="c";else if(D==="s"||D==="S")this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=D==="s";else if(D==="q"||D==="Q")this.curCommandType=_.QUAD_TO,this.curCommandRelative=D==="q";else if(D==="t"||D==="T")this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=D==="t";else{if(D!=="a"&&D!=="A")throw new SyntaxError('Unexpected character "'+D+'" at index '+re+".");this.curCommandType=_.ARC,this.curCommandRelative=D==="a"}else P.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=D,this.curNumberHasDecimal=D==="."}else this.curNumber+=D,this.curNumberHasDecimal=!0;else this.curNumber+=D;else this.curNumber+=D,this.curNumberHasExp=!0;else this.curNumber+=D,this.curNumberHasExpDigits=this.curNumberHasExp}return P},B.prototype.transform=function(M){return Object.create(this,{parse:{value:function(P,K){K===void 0&&(K=[]);for(var Y=0,re=Object.getPrototypeOf(this).parse.call(this,P);Y<re.length;Y++){var D=re[Y],ne=M(D);Array.isArray(ne)?K.push.apply(K,ne):K.push(ne)}return K}}})},B}(l),_=function(g){function B(M){var P=g.call(this)||this;return P.commands=typeof M=="string"?B.parse(M):M,P}return r(B,g),B.prototype.encode=function(){return B.encode(this.commands)},B.prototype.getBounds=function(){var M=u.CALCULATE_BOUNDS();return this.transform(M),M},B.prototype.transform=function(M){for(var P=[],K=0,Y=this.commands;K<Y.length;K++){var re=M(Y[K]);Array.isArray(re)?P.push.apply(P,re):P.push(re)}return this.commands=P,this},B.encode=function(M){return e(M)},B.parse=function(M){var P=new f,K=[];return P.parse(M,K),P.finish(K),K},B.CLOSE_PATH=1,B.MOVE_TO=2,B.HORIZ_LINE_TO=4,B.VERT_LINE_TO=8,B.LINE_TO=16,B.CURVE_TO=32,B.SMOOTH_CURVE_TO=64,B.QUAD_TO=128,B.SMOOTH_QUAD_TO=256,B.ARC=512,B.LINE_COMMANDS=B.LINE_TO|B.HORIZ_LINE_TO|B.VERT_LINE_TO,B.DRAWING_COMMANDS=B.HORIZ_LINE_TO|B.VERT_LINE_TO|B.LINE_TO|B.CURVE_TO|B.SMOOTH_CURVE_TO|B.QUAD_TO|B.SMOOTH_QUAD_TO|B.ARC,B}(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O);function _typeof(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(B){return typeof B}:_typeof=function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},_typeof(g)}function _classCallCheck(g,B){if(!(g instanceof B))throw new TypeError("Cannot call a class as a function")}var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas(g,B,M,P,K){if(typeof g=="string"&&(g=document.getElementById(g)),!g||_typeof(g)!=="object"||!("getContext"in g))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var Y=g.getContext("2d");try{return Y.getImageData(B,M,P,K)}catch(re){throw new Error("unable to access image data: "+re)}}function processCanvasRGBA(g,B,M,P,K,Y){if(!(isNaN(Y)||Y<1)){Y|=0;var re=getImageDataFromCanvas(g,B,M,P,K);re=processImageDataRGBA(re,B,M,P,K,Y),g.getContext("2d").putImageData(re,B,M)}}function processImageDataRGBA(g,B,M,P,K,Y){for(var re=g.data,D=2*Y+1,ne=P-1,Ae=K-1,fe=Y+1,ge=fe*(fe+1)/2,Be=new BlurStack,Ue=Be,ze,Re=1;Re<D;Re++)Ue=Ue.next=new BlurStack,Re===fe&&(ze=Ue);Ue.next=Be;for(var $e=null,We=null,ut=0,et=0,At=mulTable[Y],nt=shgTable[Y],ft=0;ft<K;ft++){Ue=Be;for(var Tt=re[et],qt=re[et+1],Vt=re[et+2],vt=re[et+3],Ut=0;Ut<fe;Ut++)Ue.r=Tt,Ue.g=qt,Ue.b=Vt,Ue.a=vt,Ue=Ue.next;for(var Pt=0,Yt=0,Ai=0,Ri=0,Ei=fe*Tt,Li=fe*qt,Yi=fe*Vt,vi=fe*vt,d=ge*Tt,w=ge*qt,I=ge*Vt,k=ge*vt,R=1;R<fe;R++){var W=et+((ne<R?ne:R)<<2),se=re[W],oe=re[W+1],ue=re[W+2],we=re[W+3],Te=fe-R;d+=(Ue.r=se)*Te,w+=(Ue.g=oe)*Te,I+=(Ue.b=ue)*Te,k+=(Ue.a=we)*Te,Pt+=se,Yt+=oe,Ai+=ue,Ri+=we,Ue=Ue.next}$e=Be,We=ze;for(var Ve=0;Ve<P;Ve++){var De=k*At>>nt;if(re[et+3]=De,De!==0){var me=255/De;re[et]=(d*At>>nt)*me,re[et+1]=(w*At>>nt)*me,re[et+2]=(I*At>>nt)*me}else re[et]=re[et+1]=re[et+2]=0;d-=Ei,w-=Li,I-=Yi,k-=vi,Ei-=$e.r,Li-=$e.g,Yi-=$e.b,vi-=$e.a;var ke=Ve+Y+1;ke=ut+(ke<ne?ke:ne)<<2,Pt+=$e.r=re[ke],Yt+=$e.g=re[ke+1],Ai+=$e.b=re[ke+2],Ri+=$e.a=re[ke+3],d+=Pt,w+=Yt,I+=Ai,k+=Ri,$e=$e.next;var qe=We,lt=qe.r,pt=qe.g,Ft=qe.b,zt=qe.a;Ei+=lt,Li+=pt,Yi+=Ft,vi+=zt,Pt-=lt,Yt-=pt,Ai-=Ft,Ri-=zt,We=We.next,et+=4}ut+=P}for(var Nt=0;Nt<P;Nt++){et=Nt<<2;var Mt=re[et],$t=re[et+1],ri=re[et+2],ci=re[et+3],bt=fe*Mt,di=fe*$t,ii=fe*ri,Hi=fe*ci,Vi=ge*Mt,Ot=ge*$t,_i=ge*ri,Ti=ge*ci;Ue=Be;for(var Wi=0;Wi<fe;Wi++)Ue.r=Mt,Ue.g=$t,Ue.b=ri,Ue.a=ci,Ue=Ue.next;for(var Zt=P,mi=0,wi=0,$i=0,tr=0,Ar=1;Ar<=Y;Ar++){et=Zt+Nt<<2;var Tr=fe-Ar;Vi+=(Ue.r=Mt=re[et])*Tr,Ot+=(Ue.g=$t=re[et+1])*Tr,_i+=(Ue.b=ri=re[et+2])*Tr,Ti+=(Ue.a=ci=re[et+3])*Tr,tr+=Mt,mi+=$t,wi+=ri,$i+=ci,Ue=Ue.next,Ar<Ae&&(Zt+=P)}et=Nt,$e=Be,We=ze;for(var ji=0;ji<K;ji++){var Si=et<<2;re[Si+3]=ci=Ti*At>>nt,ci>0?(ci=255/ci,re[Si]=(Vi*At>>nt)*ci,re[Si+1]=(Ot*At>>nt)*ci,re[Si+2]=(_i*At>>nt)*ci):re[Si]=re[Si+1]=re[Si+2]=0,Vi-=bt,Ot-=di,_i-=ii,Ti-=Hi,bt-=$e.r,di-=$e.g,ii-=$e.b,Hi-=$e.a,Si=Nt+((Si=ji+fe)<Ae?Si:Ae)*P<<2,Vi+=tr+=$e.r=re[Si],Ot+=mi+=$e.g=re[Si+1],_i+=wi+=$e.b=re[Si+2],Ti+=$i+=$e.a=re[Si+3],$e=$e.next,bt+=Mt=We.r,di+=$t=We.g,ii+=ri=We.b,Hi+=ci=We.a,tr-=Mt,mi-=$t,wi-=ri,$i-=ci,We=We.next,et+=P}}return g}var BlurStack=function g(){_classCallCheck(this,g),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function compressSpaces(g){return g.replace(/(?!\u3000)\s+/gm," ")}function trimLeft(g){return g.replace(/^[\n \t]+/,"")}function trimRight(g){return g.replace(/[\n \t]+$/,"")}function toNumbers(g){const B=g.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return B?B.map(parseFloat):[]}function toMatrixValue(g){const B=toNumbers(g);return[B[0]||0,B[1]||0,B[2]||0,B[3]||0,B[4]||0,B[5]||0]}const allUppercase=/^[A-Z-]+$/;function normalizeAttributeName(g){return allUppercase.test(g)?g.toLowerCase():g}function parseExternalUrl(g){const B=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(g);return B&&(B[2]||B[3]||B[4])||""}function normalizeColor(g){if(!g.startsWith("rgb"))return g;let B=3;return g.replace(/\d+(\.\d+)?/g,(P,K)=>B--&&K?String(Math.round(parseFloat(P))):P)}const attributeRegex=/(\[[^\]]+\])/g,idRegex=/(#[^\s+>~.[:]+)/g,classRegex=/(\.[^\s+>~.[:]+)/g,pseudoElementRegex=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,pseudoClassWithBracketsRegex=/(:[\w-]+\([^)]*\))/gi,pseudoClassRegex=/(:[^\s+>~.[:]+)/g,elementRegex=/([^\s+>~.[:]+)/g;function findSelectorMatch(g,B){const M=B.exec(g);return M?[g.replace(B," "),M.length]:[g,0]}function getSelectorSpecificity(g){const B=[0,0,0];let M=g.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),P=0;return[M,P]=findSelectorMatch(M,attributeRegex),B[1]+=P,[M,P]=findSelectorMatch(M,idRegex),B[0]+=P,[M,P]=findSelectorMatch(M,classRegex),B[1]+=P,[M,P]=findSelectorMatch(M,pseudoElementRegex),B[2]+=P,[M,P]=findSelectorMatch(M,pseudoClassWithBracketsRegex),B[1]+=P,[M,P]=findSelectorMatch(M,pseudoClassRegex),B[1]+=P,M=M.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[M,P]=findSelectorMatch(M,elementRegex),B[2]+=P,B.join("")}const PSEUDO_ZERO=1e-8;function vectorMagnitude(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))}function vectorsRatio(g,B){return(g[0]*B[0]+g[1]*B[1])/(vectorMagnitude(g)*vectorMagnitude(B))}function vectorsAngle(g,B){return(g[0]*B[1]<g[1]*B[0]?-1:1)*Math.acos(vectorsRatio(g,B))}function CB1(g){return g*g*g}function CB2(g){return 3*g*g*(1-g)}function CB3(g){return 3*g*(1-g)*(1-g)}function CB4(g){return(1-g)*(1-g)*(1-g)}function QB1(g){return g*g}function QB2(g){return 2*g*(1-g)}function QB3(g){return(1-g)*(1-g)}class Property{static empty(B){return new Property(B,"EMPTY","")}split(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:M,name:P}=this;return compressSpaces(this.getString()).trim().split(B).map(K=>new Property(M,P,K))}hasValue(B){const M=this.value;return M!==null&&M!==""&&(B||M!==0)&&typeof M<"u"}isString(B){const{value:M}=this,P=typeof M=="string";return!P||!B?P:B.test(M)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const B=this.getString();switch(!0){case B.endsWith("px"):case/^[0-9]+$/.test(B):return!0;default:return!1}}setValue(B){return this.value=B,this}getValue(B){return typeof B>"u"||this.hasValue()?this.value:B}getNumber(B){if(!this.hasValue())return typeof B>"u"?0:parseFloat(B);const{value:M}=this;let P=parseFloat(M);return this.isString(/%$/)&&(P/=100),P}getString(B){return typeof B>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(B)}getColor(B){let M=this.getString(B);return this.isNormalizedColor||(this.isNormalizedColor=!0,M=normalizeColor(M),this.value=M),M}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[P,K]=typeof B=="boolean"?[void 0,B]:[B],{viewPort:Y}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(Y.computeSize("x"),Y.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(Y.computeSize("x"),Y.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*Y.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*Y.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&K):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*Y.computeSize(P);default:{const re=this.getNumber();return M&&re<1?re*Y.computeSize(P):re}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const B=this.getString(),M=/#([^)'"]+)/.exec(B),P=(M==null?void 0:M[1])||B;return this.document.definitions[P]}getFillStyleDefinition(B,M){let P=this.getDefinition();if(!P)return null;if(typeof P.createGradient=="function"&&"getBoundingBox"in B)return P.createGradient(this.document.ctx,B,M);if(typeof P.createPattern=="function"){if(P.getHrefAttribute().hasValue()){const K=P.getAttribute("patternTransform");P=P.getHrefAttribute().getDefinition(),P&&K.hasValue()&&P.getAttribute("patternTransform",!0).setValue(K.value)}if(P)return P.createPattern(this.document.ctx,B,M)}return null}getTextBaseline(){if(!this.hasValue())return null;const B=this.getString();return Property.textBaselineMapping[B]||null}addOpacity(B){let M=this.getColor();const P=M.length;let K=0;for(let Y=0;Y<P&&(M[Y]===","&&K++,K!==3);Y++);if(B.hasValue()&&this.isString()&&K!==3){const Y=new RGBColor$1(M);Y.ok&&(Y.alpha=B.getNumber(),M=Y.toRGBA())}return new Property(this.document,this.name,M)}constructor(B,M,P){this.document=B,this.name=M,this.value=P,this.isNormalizedColor=!1}}Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ViewPort{clear(){this.viewPorts=[]}setCurrent(B,M){this.viewPorts.push({width:B,height:M})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[B]=this.viewPorts;return B||getDefault()}getCurrent(){const{viewPorts:B}=this,M=B[B.length-1];return M||getDefault()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(B){return typeof B=="number"?B:B==="x"?this.width:B==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}ViewPort.DEFAULT_VIEWPORT_WIDTH=800;ViewPort.DEFAULT_VIEWPORT_HEIGHT=600;function getDefault(){return{width:ViewPort.DEFAULT_VIEWPORT_WIDTH,height:ViewPort.DEFAULT_VIEWPORT_HEIGHT}}class Point{static parse(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[P=M,K=M]=toNumbers(B);return new Point(P,K)}static parseScale(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[P=M,K=P]=toNumbers(B);return new Point(P,K)}static parsePath(B){const M=toNumbers(B),P=M.length,K=[];for(let Y=0;Y<P;Y+=2)K.push(new Point(M[Y],M[Y+1]));return K}angleTo(B){return Math.atan2(B.y-this.y,B.x-this.x)}applyTransform(B){const{x:M,y:P}=this,K=M*B[0]+P*B[2]+B[4],Y=M*B[1]+P*B[3]+B[5];this.x=K,this.y=Y}constructor(B,M){this.x=B,this.y=M}}class Mouse{isWorking(){return this.working}start(){if(this.working)return;const{screen:B,onClick:M,onMouseMove:P}=this,K=B.ctx.canvas;K.onclick=M,K.onmousemove=P,this.working=!0}stop(){if(!this.working)return;const B=this.screen.ctx.canvas;this.working=!1,B.onclick=null,B.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:B,events:M,eventElements:P}=this,{style:K}=B.ctx.canvas;let Y;K&&(K.cursor=""),M.forEach((re,D)=>{let{run:ne}=re;for(Y=P[D];Y;)ne(Y),Y=Y.parent}),this.events=[],this.eventElements=[]}checkPath(B,M){if(!this.working||!M)return;const{events:P,eventElements:K}=this;P.forEach((Y,re)=>{let{x:D,y:ne}=Y;!K[re]&&M.isPointInPath&&M.isPointInPath(D,ne)&&(K[re]=B)})}checkBoundingBox(B,M){if(!this.working||!M)return;const{events:P,eventElements:K}=this;P.forEach((Y,re)=>{let{x:D,y:ne}=Y;!K[re]&&M.isPointInBox(D,ne)&&(K[re]=B)})}mapXY(B,M){const{window:P,ctx:K}=this.screen,Y=new Point(B,M);let re=K.canvas;for(;re;)Y.x-=re.offsetLeft,Y.y-=re.offsetTop,re=re.offsetParent;return P!=null&&P.scrollX&&(Y.x+=P.scrollX),P!=null&&P.scrollY&&(Y.y+=P.scrollY),Y}onClick(B){const{x:M,y:P}=this.mapXY(B.clientX,B.clientY);this.events.push({type:"onclick",x:M,y:P,run(K){K.onClick&&K.onClick()}})}onMouseMove(B){const{x:M,y:P}=this.mapXY(B.clientX,B.clientY);this.events.push({type:"onmousemove",x:M,y:P,run(K){K.onMouseMove&&K.onMouseMove()}})}constructor(B){this.screen=B,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const defaultWindow=typeof window<"u"?window:null,defaultFetch$1=typeof fetch<"u"?fetch.bind(void 0):void 0;class Screen{wait(B){this.waits.push(B)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const B=this.waits.every(M=>M());return B&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=B,B}setDefaults(B){B.strokeStyle="rgba(0,0,0,0)",B.lineCap="butt",B.lineJoin="miter",B.miterLimit=4}setViewBox(B){let{document:M,ctx:P,aspectRatio:K,width:Y,desiredWidth:re,height:D,desiredHeight:ne,minX:Ae=0,minY:fe=0,refX:ge,refY:Be,clip:Ue=!1,clipX:ze=0,clipY:Re=0}=B;const $e=compressSpaces(K).replace(/^defer\s/,""),[We,ut]=$e.split(" "),et=We||"xMidYMid",At=ut||"meet",nt=Y/re,ft=D/ne,Tt=Math.min(nt,ft),qt=Math.max(nt,ft);let Vt=re,vt=ne;At==="meet"&&(Vt*=Tt,vt*=Tt),At==="slice"&&(Vt*=qt,vt*=qt);const Ut=new Property(M,"refX",ge),Pt=new Property(M,"refY",Be),Yt=Ut.hasValue()&&Pt.hasValue();if(Yt&&P.translate(-Tt*Ut.getPixels("x"),-Tt*Pt.getPixels("y")),Ue){const Ai=Tt*ze,Ri=Tt*Re;P.beginPath(),P.moveTo(Ai,Ri),P.lineTo(Y,Ri),P.lineTo(Y,D),P.lineTo(Ai,D),P.closePath(),P.clip()}if(!Yt){const Ai=At==="meet"&&Tt===ft,Ri=At==="slice"&&qt===ft,Ei=At==="meet"&&Tt===nt,Li=At==="slice"&&qt===nt;et.startsWith("xMid")&&(Ai||Ri)&&P.translate(Y/2-Vt/2,0),et.endsWith("YMid")&&(Ei||Li)&&P.translate(0,D/2-vt/2),et.startsWith("xMax")&&(Ai||Ri)&&P.translate(Y-Vt,0),et.endsWith("YMax")&&(Ei||Li)&&P.translate(0,D-vt)}switch(!0){case et==="none":P.scale(nt,ft);break;case At==="meet":P.scale(Tt,Tt);break;case At==="slice":P.scale(qt,qt);break}P.translate(-Ae,-fe)}start(B){let{enableRedraw:M=!1,ignoreMouse:P=!1,ignoreAnimation:K=!1,ignoreDimensions:Y=!1,ignoreClear:re=!1,forceRedraw:D,scaleWidth:ne,scaleHeight:Ae,offsetX:fe,offsetY:ge}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:Be}=this,Ue=1e3/Screen.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=Ue,this.readyPromise=new Promise(ut=>{this.resolveReady=ut}),this.isReady()&&this.render(B,Y,re,ne,Ae,fe,ge),!M)return;let ze=Date.now(),Re=ze,$e=0;const We=()=>{ze=Date.now(),$e=ze-Re,$e>=Ue&&(Re=ze-$e%Ue,this.shouldUpdate(K,D)&&(this.render(B,Y,re,ne,Ae,fe,ge),Be.runEvents())),this.intervalId=requestAnimationFrame$1(We)};P||Be.start(),this.intervalId=requestAnimationFrame$1(We)}stop(){this.intervalId&&(requestAnimationFrame$1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(B,M){if(!B){const{frameDuration:P}=this;if(this.animations.reduce((Y,re)=>re.update(P)||Y,!1))return!0}return!!(typeof M=="function"&&M()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(B,M,P,K,Y,re,D){const{viewPort:ne,ctx:Ae,isFirstRender:fe}=this,ge=Ae.canvas;ne.clear(),ge.width&&ge.height&&ne.setCurrent(ge.width,ge.height);const Be=B.getStyle("width"),Ue=B.getStyle("height");!M&&(fe||typeof K!="number"&&typeof Y!="number")&&(Be.hasValue()&&(ge.width=Be.getPixels("x"),ge.style&&(ge.style.width="".concat(ge.width,"px"))),Ue.hasValue()&&(ge.height=Ue.getPixels("y"),ge.style&&(ge.style.height="".concat(ge.height,"px"))));let ze=ge.clientWidth||ge.width,Re=ge.clientHeight||ge.height;if(M&&Be.hasValue()&&Ue.hasValue()&&(ze=Be.getPixels("x"),Re=Ue.getPixels("y")),ne.setCurrent(ze,Re),typeof re=="number"&&B.getAttribute("x",!0).setValue(re),typeof D=="number"&&B.getAttribute("y",!0).setValue(D),typeof K=="number"||typeof Y=="number"){const $e=toNumbers(B.getAttribute("viewBox").getString());let We=0,ut=0;if(typeof K=="number"){const At=B.getStyle("width");At.hasValue()?We=At.getPixels("x")/K:$e[2]&&!isNaN($e[2])&&(We=$e[2]/K)}if(typeof Y=="number"){const At=B.getStyle("height");At.hasValue()?ut=At.getPixels("y")/Y:$e[3]&&!isNaN($e[3])&&(ut=$e[3]/Y)}We||(We=ut),ut||(ut=We),B.getAttribute("width",!0).setValue(K),B.getAttribute("height",!0).setValue(Y);const et=B.getStyle("transform",!0,!0);et.setValue("".concat(et.getString()," scale(").concat(1/We,", ").concat(1/ut,")"))}P||Ae.clearRect(0,0,ze,Re),B.render(Ae),fe&&(this.isFirstRender=!1)}constructor(B,{fetch:M=defaultFetch$1,window:P=defaultWindow}={}){if(this.ctx=B,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=P,!M)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=M}}Screen.defaultWindow=defaultWindow;Screen.defaultFetch=defaultFetch$1;Screen.FRAMERATE=30;Screen.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch}=Screen,DefaultDOMParser=typeof DOMParser<"u"?DOMParser:void 0;class Parser{async parse(B){return B.startsWith("<")?this.parseFromString(B):this.load(B)}parseFromString(B){const M=new this.DOMParser;try{return this.checkDocument(M.parseFromString(B,"image/svg+xml"))}catch{return this.checkDocument(M.parseFromString(B,"text/xml"))}}checkDocument(B){const M=B.getElementsByTagName("parsererror")[0];if(M)throw new Error(M.textContent||"Unknown parse error");return B}async load(B){const P=await(await this.fetch(B)).text();return this.parseFromString(P)}constructor({fetch:B=defaultFetch,DOMParser:M=DefaultDOMParser}={}){if(!B)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!M)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=B,this.DOMParser=M}}class Translate{apply(B){const{x:M,y:P}=this.point;B.translate(M||0,P||0)}unapply(B){const{x:M,y:P}=this.point;B.translate(-1*M||0,-1*P||0)}applyToPoint(B){const{x:M,y:P}=this.point;B.applyTransform([1,0,0,1,M||0,P||0])}constructor(B,M){this.type="translate",this.point=Point.parse(M)}}class Rotate{apply(B){const{cx:M,cy:P,originX:K,originY:Y,angle:re}=this,D=M+K.getPixels("x"),ne=P+Y.getPixels("y");B.translate(D,ne),B.rotate(re.getRadians()),B.translate(-D,-ne)}unapply(B){const{cx:M,cy:P,originX:K,originY:Y,angle:re}=this,D=M+K.getPixels("x"),ne=P+Y.getPixels("y");B.translate(D,ne),B.rotate(-1*re.getRadians()),B.translate(-D,-ne)}applyToPoint(B){const{cx:M,cy:P,angle:K}=this,Y=K.getRadians();B.applyTransform([1,0,0,1,M||0,P||0]),B.applyTransform([Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0]),B.applyTransform([1,0,0,1,-M||0,-P||0])}constructor(B,M,P){this.type="rotate";const K=toNumbers(M);this.angle=new Property(B,"angle",K[0]),this.originX=P[0],this.originY=P[1],this.cx=K[1]||0,this.cy=K[2]||0}}class Scale{apply(B){const{scale:{x:M,y:P},originX:K,originY:Y}=this,re=K.getPixels("x"),D=Y.getPixels("y");B.translate(re,D),B.scale(M,P||M),B.translate(-re,-D)}unapply(B){const{scale:{x:M,y:P},originX:K,originY:Y}=this,re=K.getPixels("x"),D=Y.getPixels("y");B.translate(re,D),B.scale(1/M,1/P||M),B.translate(-re,-D)}applyToPoint(B){const{x:M,y:P}=this.scale;B.applyTransform([M||0,0,0,P||0,0,0])}constructor(B,M,P){this.type="scale";const K=Point.parseScale(M);(K.x===0||K.y===0)&&(K.x=PSEUDO_ZERO,K.y=PSEUDO_ZERO),this.scale=K,this.originX=P[0],this.originY=P[1]}}class Matrix{apply(B){const{originX:M,originY:P,matrix:K}=this,Y=M.getPixels("x"),re=P.getPixels("y");B.translate(Y,re),B.transform(K[0],K[1],K[2],K[3],K[4],K[5]),B.translate(-Y,-re)}unapply(B){const{originX:M,originY:P,matrix:K}=this,Y=K[0],re=K[2],D=K[4],ne=K[1],Ae=K[3],fe=K[5],ge=0,Be=0,Ue=1,ze=1/(Y*(Ae*Ue-fe*Be)-re*(ne*Ue-fe*ge)+D*(ne*Be-Ae*ge)),Re=M.getPixels("x"),$e=P.getPixels("y");B.translate(Re,$e),B.transform(ze*(Ae*Ue-fe*Be),ze*(fe*ge-ne*Ue),ze*(D*Be-re*Ue),ze*(Y*Ue-D*ge),ze*(re*fe-D*Ae),ze*(D*ne-Y*fe)),B.translate(-Re,-$e)}applyToPoint(B){B.applyTransform(this.matrix)}constructor(B,M,P){this.type="matrix",this.matrix=toMatrixValue(M),this.originX=P[0],this.originY=P[1]}}class Skew extends Matrix{constructor(B,M,P){super(B,M,P),this.type="skew",this.angle=new Property(B,"angle",M)}}class SkewX extends Skew{constructor(B,M,P){super(B,M,P),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class SkewY extends Skew{constructor(B,M,P){super(B,M,P),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms(g){return compressSpaces(g).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(g){const[B="",M=""]=g.split("(");return[B.trim(),M.trim().replace(")","")]}class Transform{static fromElement(B,M){const P=M.getStyle("transform",!1,!0);if(P.hasValue()){const[K,Y=K]=M.getStyle("transform-origin",!1,!0).split();if(K&&Y){const re=[K,Y];return new Transform(B,P.getString(),re)}}return null}apply(B){this.transforms.forEach(M=>M.apply(B))}unapply(B){this.transforms.forEach(M=>M.unapply(B))}applyToPoint(B){this.transforms.forEach(M=>M.applyToPoint(B))}constructor(B,M,P){this.document=B,this.transforms=[],parseTransforms(M).forEach(Y=>{if(Y==="none")return;const[re,D]=parseTransform(Y),ne=Transform.transformTypes[re];ne&&this.transforms.push(new ne(this.document,D,P))})}}Transform.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};class Element{getAttribute(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const P=this.attributes[B];if(!P&&M){const K=new Property(this.document,B,"");return this.attributes[B]=K,K}return P||Property.empty(this.document)}getHrefAttribute(){let B;for(const M in this.attributes)if(M==="href"||M.endsWith(":href")){B=this.attributes[M];break}return B||Property.empty(this.document)}getStyle(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const K=this.styles[B];if(K)return K;const Y=this.getAttribute(B);if(Y.hasValue())return this.styles[B]=Y,Y;if(!P){const{parent:re}=this;if(re){const D=re.getStyle(B);if(D.hasValue())return D}}if(M){const re=new Property(this.document,B,"");return this.styles[B]=re,re}return Property.empty(this.document)}render(B){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(B.save(),this.getStyle("mask").hasValue()){const M=this.getStyle("mask").getDefinition();M&&(this.applyEffects(B),M.apply(B,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const M=this.getStyle("filter").getDefinition();M&&(this.applyEffects(B),M.apply(B,this))}else this.setContext(B),this.renderChildren(B),this.clearContext(B);B.restore()}}setContext(B){}applyEffects(B){const M=Transform.fromElement(this.document,this);M&&M.apply(B);const P=this.getStyle("clip-path",!1,!0);if(P.hasValue()){const K=P.getDefinition();K&&K.apply(B)}}clearContext(B){}renderChildren(B){this.children.forEach(M=>{M.render(B)})}addChild(B){const M=B instanceof Element?B:this.document.createElement(B);M.parent=this,Element.ignoreChildTypes.includes(M.type)||this.children.push(M)}matchesSelector(B){var M;const{node:P}=this;if(typeof P.matches=="function")return P.matches(B);const K=(M=P.getAttribute)===null||M===void 0?void 0:M.call(P,"class");return!K||K===""?!1:K.split(" ").some(Y=>".".concat(Y)===B)}addStylesFromStyleDefinition(){const{styles:B,stylesSpecificity:M}=this.document;let P;for(const K in B)if(!K.startsWith("@")&&this.matchesSelector(K)){const Y=B[K],re=M[K];if(Y)for(const D in Y){let ne=this.stylesSpecificity[D];typeof ne>"u"&&(ne="000"),re&&re>=ne&&(P=Y[D],P&&(this.styles[D]=P),this.stylesSpecificity[D]=re)}}}removeStyles(B,M){return M.reduce((K,Y)=>{const re=B.getStyle(Y);if(!re.hasValue())return K;const D=re.getString();return re.setValue(""),[...K,[Y,D]]},[])}restoreStyles(B,M){M.forEach(P=>{let[K,Y]=P;B.getStyle(K,!0).setValue(Y)})}isFirstChild(){var B;return((B=this.parent)===null||B===void 0?void 0:B.children.indexOf(this))===0}constructor(B,M,P=!1){if(this.document=B,this.node=M,this.captureTextNodes=P,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!M||M.nodeType!==1)return;Array.from(M.attributes).forEach(re=>{const D=normalizeAttributeName(re.nodeName);this.attributes[D]=new Property(B,D,re.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(D=>D.trim()).forEach(D=>{if(!D)return;const[ne,Ae]=D.split(":").map(fe=>fe.trim());ne&&(this.styles[ne]=new Property(B,ne,Ae))});const{definitions:K}=B,Y=this.getAttribute("id");Y.hasValue()&&(K[Y.getString()]||(K[Y.getString()]=this)),Array.from(M.childNodes).forEach(re=>{if(re.nodeType===1)this.addChild(re);else if(P&&(re.nodeType===3||re.nodeType===4)){const D=B.createTextNode(re);D.getText().length>0&&this.addChild(D)}})}}Element.ignoreChildTypes=["title"];class UnknownElement extends Element{constructor(B,M,P){super(B,M,P)}}function wrapFontFamily(g){const B=g.trim();return/^('|")/.test(B)?B:'"'.concat(B,'"')}function prepareFontFamily(g){return typeof process>"u"?g:g.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle(g){if(!g)return"";const B=g.trim().toLowerCase();switch(B){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return B;default:return/^oblique\s+(-|)\d+deg$/.test(B)?B:""}}function prepareFontWeight(g){if(!g)return"";const B=g.trim().toLowerCase();switch(B){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return B;default:return/^[\d.]+$/.test(B)?B:""}}class Font{static parse(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",M=arguments.length>1?arguments[1]:void 0,P="",K="",Y="",re="",D="";const ne=compressSpaces(B).trim().split(" "),Ae={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return ne.forEach(fe=>{switch(!0){case(!Ae.fontStyle&&Font.styles.includes(fe)):fe!=="inherit"&&(P=fe),Ae.fontStyle=!0;break;case(!Ae.fontVariant&&Font.variants.includes(fe)):fe!=="inherit"&&(K=fe),Ae.fontStyle=!0,Ae.fontVariant=!0;break;case(!Ae.fontWeight&&Font.weights.includes(fe)):fe!=="inherit"&&(Y=fe),Ae.fontStyle=!0,Ae.fontVariant=!0,Ae.fontWeight=!0;break;case!Ae.fontSize:fe!=="inherit"&&(re=fe.split("/")[0]||""),Ae.fontStyle=!0,Ae.fontVariant=!0,Ae.fontWeight=!0,Ae.fontSize=!0;break;default:fe!=="inherit"&&(D+=fe)}}),new Font(P,K,Y,re,D,M)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}constructor(B,M,P,K,Y,re){const D=re?typeof re=="string"?Font.parse(re):re:{};this.fontFamily=Y||D.fontFamily,this.fontSize=K||D.fontSize,this.fontStyle=B||D.fontStyle,this.fontWeight=P||D.fontWeight,this.fontVariant=M||D.fontVariant}}Font.styles="normal|italic|oblique|inherit";Font.variants="normal|small-caps|inherit";Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class BoundingBox{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(B,M){typeof B<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=B,this.x2=B),B<this.x1&&(this.x1=B),B>this.x2&&(this.x2=B)),typeof M<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=M,this.y2=M),M<this.y1&&(this.y1=M),M>this.y2&&(this.y2=M))}addX(B){this.addPoint(B,0)}addY(B){this.addPoint(0,B)}addBoundingBox(B){if(!B)return;const{x1:M,y1:P,x2:K,y2:Y}=B;this.addPoint(M,P),this.addPoint(K,Y)}sumCubic(B,M,P,K,Y){return Math.pow(1-B,3)*M+3*Math.pow(1-B,2)*B*P+3*(1-B)*Math.pow(B,2)*K+Math.pow(B,3)*Y}bezierCurveAdd(B,M,P,K,Y){const re=6*M-12*P+6*K,D=-3*M+9*P-9*K+3*Y,ne=3*P-3*M;if(D===0){if(re===0)return;const Be=-ne/re;0<Be&&Be<1&&(B?this.addX(this.sumCubic(Be,M,P,K,Y)):this.addY(this.sumCubic(Be,M,P,K,Y)));return}const Ae=Math.pow(re,2)-4*ne*D;if(Ae<0)return;const fe=(-re+Math.sqrt(Ae))/(2*D);0<fe&&fe<1&&(B?this.addX(this.sumCubic(fe,M,P,K,Y)):this.addY(this.sumCubic(fe,M,P,K,Y)));const ge=(-re-Math.sqrt(Ae))/(2*D);0<ge&&ge<1&&(B?this.addX(this.sumCubic(ge,M,P,K,Y)):this.addY(this.sumCubic(ge,M,P,K,Y)))}addBezierCurve(B,M,P,K,Y,re,D,ne){this.addPoint(B,M),this.addPoint(D,ne),this.bezierCurveAdd(!0,B,P,Y,D),this.bezierCurveAdd(!1,M,K,re,ne)}addQuadraticCurve(B,M,P,K,Y,re){const D=B+.6666666666666666*(P-B),ne=M+2/3*(K-M),Ae=D+1/3*(Y-B),fe=ne+1/3*(re-M);this.addBezierCurve(B,M,D,Ae,ne,fe,Y,re)}isPointInBox(B,M){const{x1:P,y1:K,x2:Y,y2:re}=this;return P<=B&&B<=Y&&K<=M&&M<=re}constructor(B=Number.NaN,M=Number.NaN,P=Number.NaN,K=Number.NaN){this.x1=B,this.y1=M,this.x2=P,this.y2=K,this.addPoint(B,M),this.addPoint(P,K)}}class RenderedElement extends Element{calculateOpacity(){let B=1,M=this;for(;M;){const P=M.getStyle("opacity",!1,!0);P.hasValue(!0)&&(B*=P.getNumber()),M=M.parent}return B}setContext(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!M){const P=this.getStyle("fill"),K=this.getStyle("fill-opacity"),Y=this.getStyle("stroke"),re=this.getStyle("stroke-opacity");if(P.isUrlDefinition()){const Ue=P.getFillStyleDefinition(this,K);Ue&&(B.fillStyle=Ue)}else if(P.hasValue()){P.getString()==="currentColor"&&P.setValue(this.getStyle("color").getColor());const Ue=P.getColor();Ue!=="inherit"&&(B.fillStyle=Ue==="none"?"rgba(0,0,0,0)":Ue)}if(K.hasValue()){const Ue=new Property(this.document,"fill",B.fillStyle).addOpacity(K).getColor();B.fillStyle=Ue}if(Y.isUrlDefinition()){const Ue=Y.getFillStyleDefinition(this,re);Ue&&(B.strokeStyle=Ue)}else if(Y.hasValue()){Y.getString()==="currentColor"&&Y.setValue(this.getStyle("color").getColor());const Ue=Y.getString();Ue!=="inherit"&&(B.strokeStyle=Ue==="none"?"rgba(0,0,0,0)":Ue)}if(re.hasValue()){const Ue=new Property(this.document,"stroke",B.strokeStyle).addOpacity(re).getString();B.strokeStyle=Ue}const D=this.getStyle("stroke-width");if(D.hasValue()){const Ue=D.getPixels();B.lineWidth=Ue||PSEUDO_ZERO}const ne=this.getStyle("stroke-linecap"),Ae=this.getStyle("stroke-linejoin"),fe=this.getStyle("stroke-miterlimit"),ge=this.getStyle("stroke-dasharray"),Be=this.getStyle("stroke-dashoffset");if(ne.hasValue()&&(B.lineCap=ne.getString()),Ae.hasValue()&&(B.lineJoin=Ae.getString()),fe.hasValue()&&(B.miterLimit=fe.getNumber()),ge.hasValue()&&ge.getString()!=="none"){const Ue=toNumbers(ge.getString());typeof B.setLineDash<"u"?B.setLineDash(Ue):typeof B.webkitLineDash<"u"?B.webkitLineDash=Ue:typeof B.mozDash<"u"&&!(Ue.length===1&&Ue[0]===0)&&(B.mozDash=Ue);const ze=Be.getPixels();typeof B.lineDashOffset<"u"?B.lineDashOffset=ze:typeof B.webkitLineDashOffset<"u"?B.webkitLineDashOffset=ze:typeof B.mozDashOffset<"u"&&(B.mozDashOffset=ze)}}if(this.modifiedEmSizeStack=!1,typeof B.font<"u"){const P=this.getStyle("font"),K=this.getStyle("font-style"),Y=this.getStyle("font-variant"),re=this.getStyle("font-weight"),D=this.getStyle("font-size"),ne=this.getStyle("font-family"),Ae=new Font(K.getString(),Y.getString(),re.getString(),D.hasValue()?"".concat(D.getPixels(!0),"px"):"",ne.getString(),Font.parse(P.getString(),B.font));K.setValue(Ae.fontStyle),Y.setValue(Ae.fontVariant),re.setValue(Ae.fontWeight),D.setValue(Ae.fontSize),ne.setValue(Ae.fontFamily),B.font=Ae.toString(),D.isPixels()&&(this.document.emSize=D.getPixels(),this.modifiedEmSizeStack=!0)}M||(this.applyEffects(B),B.globalAlpha=this.calculateOpacity())}clearContext(B){super.clearContext(B),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...B){super(...B),this.modifiedEmSizeStack=!1}}class TextElement extends RenderedElement{setContext(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(B,M);const P=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();P&&(B.textBaseline=P)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(B){if(this.type!=="text")return this.getTElementBoundingBox(B);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(B);let M=null;return this.children.forEach((P,K)=>{const Y=this.getChildBoundingBox(B,this,this,K);M?M.addBoundingBox(Y):M=Y}),M}getFontSize(){const{document:B,parent:M}=this,P=Font.parse(B.ctx.font).fontSize;return M.getStyle("font-size").getNumber(P)}getTElementBoundingBox(B){const M=this.getFontSize();return new BoundingBox(this.x,this.y-M,this.x+this.measureText(B),this.y)}getGlyph(B,M,P){const K=M[P];let Y;if(B.isArabic){var re;const D=M.length,ne=M[P-1],Ae=M[P+1];let fe="isolated";(P===0||ne===" ")&&P<D-1&&Ae!==" "&&(fe="terminal"),P>0&&ne!==" "&&P<D-1&&Ae!==" "&&(fe="medial"),P>0&&ne!==" "&&(P===D-1||Ae===" ")&&(fe="initial"),Y=((re=B.arabicGlyphs[K])===null||re===void 0?void 0:re[fe])||B.glyphs[K]}else Y=B.glyphs[K];return Y||(Y=B.missingGlyph),Y}getText(){return""}getTextFromNode(B){const M=B||this.node,P=Array.from(M.parentNode.childNodes),K=P.indexOf(M),Y=P.length-1;let re=compressSpaces(M.textContent||"");return K===0&&(re=trimLeft(re)),K===Y&&(re=trimRight(re)),re}renderChildren(B){if(this.type!=="text"){this.renderTElementChildren(B);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(B),this.children.forEach((P,K)=>{this.renderChild(B,this,this,K)});const{mouse:M}=this.document.screen;M.isWorking()&&M.checkBoundingBox(this,this.getBoundingBox(B))}renderTElementChildren(B){const{document:M,parent:P}=this,K=this.getText(),Y=P.getStyle("font-family").getDefinition();if(Y){const{unitsPerEm:ne}=Y.fontFace,Ae=Font.parse(M.ctx.font),fe=P.getStyle("font-size").getNumber(Ae.fontSize),ge=P.getStyle("font-style").getString(Ae.fontStyle),Be=fe/ne,Ue=Y.isRTL?K.split("").reverse().join(""):K,ze=toNumbers(P.getAttribute("dx").getString()),Re=Ue.length;for(let $e=0;$e<Re;$e++){const We=this.getGlyph(Y,Ue,$e);B.translate(this.x,this.y),B.scale(Be,-Be);const ut=B.lineWidth;B.lineWidth=B.lineWidth*ne/fe,ge==="italic"&&B.transform(1,0,.4,1,0,0),We.render(B),ge==="italic"&&B.transform(1,0,-.4,1,0,0),B.lineWidth=ut,B.scale(1/Be,-1/Be),B.translate(-this.x,-this.y),this.x+=fe*(We.horizAdvX||Y.horizAdvX)/ne,typeof ze[$e]<"u"&&!isNaN(ze[$e])&&(this.x+=ze[$e])}return}const{x:re,y:D}=this;B.fillStyle&&B.fillText(K,re,D),B.strokeStyle&&B.strokeText(K,re,D)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const B=this.leafTexts[this.textChunkStart],M=B.getStyle("text-anchor").getString("start"),P=!1;let K=0;M==="start"&&!P||M==="end"&&P?K=B.x-this.minX:M==="end"&&!P||M==="start"&&P?K=B.x-this.maxX:K=B.x-(this.minX+this.maxX)/2;for(let Y=this.textChunkStart;Y<this.leafTexts.length;Y++)this.leafTexts[Y].x+=K;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(B){this.children.forEach((M,P)=>{this.adjustChildCoordinatesRecursiveCore(B,this,this,P)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(B,M,P,K){const Y=P.children[K];Y.children.length>0?Y.children.forEach((re,D)=>{M.adjustChildCoordinatesRecursiveCore(B,M,Y,D)}):this.adjustChildCoordinates(B,M,P,K)}adjustChildCoordinates(B,M,P,K){const Y=P.children[K];if(typeof Y.measureText!="function")return Y;B.save(),Y.setContext(B,!0);const re=Y.getAttribute("x"),D=Y.getAttribute("y"),ne=Y.getAttribute("dx"),Ae=Y.getAttribute("dy"),fe=Y.getStyle("font-family").getDefinition(),ge=!!(fe!=null&&fe.isRTL);K===0&&(re.hasValue()||re.setValue(Y.getInheritedAttribute("x")),D.hasValue()||D.setValue(Y.getInheritedAttribute("y")),ne.hasValue()||ne.setValue(Y.getInheritedAttribute("dx")),Ae.hasValue()||Ae.setValue(Y.getInheritedAttribute("dy")));const Be=Y.measureText(B);return ge&&(M.x-=Be),re.hasValue()?(M.applyAnchoring(),Y.x=re.getPixels("x"),ne.hasValue()&&(Y.x+=ne.getPixels("x"))):(ne.hasValue()&&(M.x+=ne.getPixels("x")),Y.x=M.x),M.x=Y.x,ge||(M.x+=Be),D.hasValue()?(Y.y=D.getPixels("y"),Ae.hasValue()&&(Y.y+=Ae.getPixels("y"))):(Ae.hasValue()&&(M.y+=Ae.getPixels("y")),Y.y=M.y),M.y=Y.y,M.leafTexts.push(Y),M.minX=Math.min(M.minX,Y.x,Y.x+Be),M.maxX=Math.max(M.maxX,Y.x,Y.x+Be),Y.clearContext(B),B.restore(),Y}getChildBoundingBox(B,M,P,K){const Y=P.children[K];if(typeof Y.getBoundingBox!="function")return null;const re=Y.getBoundingBox(B);return re&&Y.children.forEach((D,ne)=>{const Ae=M.getChildBoundingBox(B,M,Y,ne);re.addBoundingBox(Ae)}),re}renderChild(B,M,P,K){const Y=P.children[K];Y.render(B),Y.children.forEach((re,D)=>{M.renderChild(B,M,Y,D)})}measureText(B){const{measureCache:M}=this;if(~M)return M;const P=this.getText(),K=this.measureTargetText(B,P);return this.measureCache=K,K}measureTargetText(B,M){if(!M.length)return 0;const{parent:P}=this,K=P.getStyle("font-family").getDefinition();if(K){const re=this.getFontSize(),D=K.isRTL?M.split("").reverse().join(""):M,ne=toNumbers(P.getAttribute("dx").getString()),Ae=D.length;let fe=0;for(let ge=0;ge<Ae;ge++){const Be=this.getGlyph(K,D,ge);fe+=(Be.horizAdvX||K.horizAdvX)*re/K.fontFace.unitsPerEm,typeof ne[ge]<"u"&&!isNaN(ne[ge])&&(fe+=ne[ge])}return fe}if(!B.measureText)return M.length*10;B.save(),this.setContext(B,!0);const{width:Y}=B.measureText(M);return this.clearContext(B),B.restore(),Y}getInheritedAttribute(B){let M=this;for(;M instanceof TextElement&&M.isFirstChild()&&M.parent;){const P=M.parent.getAttribute(B);if(P.hasValue(!0))return P.getString("0");M=M.parent}return null}constructor(B,M,P){super(B,M,new.target===TextElement?!0:P),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class TSpanElement extends TextElement{getText(){return this.text}constructor(B,M,P){super(B,M,new.target===TSpanElement?!0:P),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class TextNode extends TSpanElement{constructor(...B){super(...B),this.type="textNode"}}class PathParser extends _{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]}isEnd(){const{i:B,commands:M}=this;return B>=M.length-1}next(){const B=this.commands[++this.i];return this.previousCommand=this.command,this.command=B,B}getPoint(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const P=new Point(this.command[B],this.command[M]);return this.makeAbsolute(P)}getAsControlPoint(B,M){const P=this.getPoint(B,M);return this.control=P,P}getAsCurrentPoint(B,M){const P=this.getPoint(B,M);return this.current=P,P}getReflectedControlPoint(){const B=this.previousCommand.type;if(B!==_.CURVE_TO&&B!==_.SMOOTH_CURVE_TO&&B!==_.QUAD_TO&&B!==_.SMOOTH_QUAD_TO)return this.current;const{current:{x:M,y:P},control:{x:K,y:Y}}=this;return new Point(2*M-K,2*P-Y)}makeAbsolute(B){if(this.command.relative){const{x:M,y:P}=this.current;B.x+=M,B.y+=P}return B}addMarker(B,M,P){const{points:K,angles:Y}=this;P&&Y.length>0&&!Y[Y.length-1]&&(Y[Y.length-1]=K[K.length-1].angleTo(P)),this.addMarkerAngle(B,M?M.angleTo(B):null)}addMarkerAngle(B,M){this.points.push(B),this.angles.push(M)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:B}=this,M=B.length;for(let P=0;P<M;P++)if(!B[P]){for(let K=P+1;K<M;K++)if(B[K]){B[P]=B[K];break}}return B}constructor(B){super(B.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new Point(0,0),this.start=new Point(0,0),this.current=new Point(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class PathElement extends RenderedElement{path(B){const{pathParser:M}=this,P=new BoundingBox;for(M.reset(),B&&B.beginPath();!M.isEnd();)switch(M.next().type){case PathParser.MOVE_TO:this.pathM(B,P);break;case PathParser.LINE_TO:this.pathL(B,P);break;case PathParser.HORIZ_LINE_TO:this.pathH(B,P);break;case PathParser.VERT_LINE_TO:this.pathV(B,P);break;case PathParser.CURVE_TO:this.pathC(B,P);break;case PathParser.SMOOTH_CURVE_TO:this.pathS(B,P);break;case PathParser.QUAD_TO:this.pathQ(B,P);break;case PathParser.SMOOTH_QUAD_TO:this.pathT(B,P);break;case PathParser.ARC:this.pathA(B,P);break;case PathParser.CLOSE_PATH:this.pathZ(B,P);break}return P}getBoundingBox(B){return this.path()}getMarkers(){const{pathParser:B}=this,M=B.getMarkerPoints(),P=B.getMarkerAngles();return M.map((Y,re)=>[Y,P[re]])}renderChildren(B){this.path(B),this.document.screen.mouse.checkPath(this,B);const M=this.getStyle("fill-rule");B.fillStyle!==""&&(M.getString("inherit")!=="inherit"?B.fill(M.getString()):B.fill()),B.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(B.save(),B.setTransform(1,0,0,1,0,0),B.stroke(),B.restore()):B.stroke());const P=this.getMarkers();if(P){const K=P.length-1,Y=this.getStyle("marker-start"),re=this.getStyle("marker-mid"),D=this.getStyle("marker-end");if(Y.isUrlDefinition()){const ne=Y.getDefinition(),[Ae,fe]=P[0];ne.render(B,Ae,fe)}if(re.isUrlDefinition()){const ne=re.getDefinition();for(let Ae=1;Ae<K;Ae++){const[fe,ge]=P[Ae];ne.render(B,fe,ge)}}if(D.isUrlDefinition()){const ne=D.getDefinition(),[Ae,fe]=P[K];ne.render(B,Ae,fe)}}}static pathM(B){const M=B.getAsCurrentPoint();return B.start=B.current,{point:M}}pathM(B,M){const{pathParser:P}=this,{point:K}=PathElement.pathM(P),{x:Y,y:re}=K;P.addMarker(K),M.addPoint(Y,re),B&&B.moveTo(Y,re)}static pathL(B){const{current:M}=B,P=B.getAsCurrentPoint();return{current:M,point:P}}pathL(B,M){const{pathParser:P}=this,{current:K,point:Y}=PathElement.pathL(P),{x:re,y:D}=Y;P.addMarker(Y,K),M.addPoint(re,D),B&&B.lineTo(re,D)}static pathH(B){const{current:M,command:P}=B,K=new Point((P.relative?M.x:0)+P.x,M.y);return B.current=K,{current:M,point:K}}pathH(B,M){const{pathParser:P}=this,{current:K,point:Y}=PathElement.pathH(P),{x:re,y:D}=Y;P.addMarker(Y,K),M.addPoint(re,D),B&&B.lineTo(re,D)}static pathV(B){const{current:M,command:P}=B,K=new Point(M.x,(P.relative?M.y:0)+P.y);return B.current=K,{current:M,point:K}}pathV(B,M){const{pathParser:P}=this,{current:K,point:Y}=PathElement.pathV(P),{x:re,y:D}=Y;P.addMarker(Y,K),M.addPoint(re,D),B&&B.lineTo(re,D)}static pathC(B){const{current:M}=B,P=B.getPoint("x1","y1"),K=B.getAsControlPoint("x2","y2"),Y=B.getAsCurrentPoint();return{current:M,point:P,controlPoint:K,currentPoint:Y}}pathC(B,M){const{pathParser:P}=this,{current:K,point:Y,controlPoint:re,currentPoint:D}=PathElement.pathC(P);P.addMarker(D,re,Y),M.addBezierCurve(K.x,K.y,Y.x,Y.y,re.x,re.y,D.x,D.y),B&&B.bezierCurveTo(Y.x,Y.y,re.x,re.y,D.x,D.y)}static pathS(B){const{current:M}=B,P=B.getReflectedControlPoint(),K=B.getAsControlPoint("x2","y2"),Y=B.getAsCurrentPoint();return{current:M,point:P,controlPoint:K,currentPoint:Y}}pathS(B,M){const{pathParser:P}=this,{current:K,point:Y,controlPoint:re,currentPoint:D}=PathElement.pathS(P);P.addMarker(D,re,Y),M.addBezierCurve(K.x,K.y,Y.x,Y.y,re.x,re.y,D.x,D.y),B&&B.bezierCurveTo(Y.x,Y.y,re.x,re.y,D.x,D.y)}static pathQ(B){const{current:M}=B,P=B.getAsControlPoint("x1","y1"),K=B.getAsCurrentPoint();return{current:M,controlPoint:P,currentPoint:K}}pathQ(B,M){const{pathParser:P}=this,{current:K,controlPoint:Y,currentPoint:re}=PathElement.pathQ(P);P.addMarker(re,Y,Y),M.addQuadraticCurve(K.x,K.y,Y.x,Y.y,re.x,re.y),B&&B.quadraticCurveTo(Y.x,Y.y,re.x,re.y)}static pathT(B){const{current:M}=B,P=B.getReflectedControlPoint();B.control=P;const K=B.getAsCurrentPoint();return{current:M,controlPoint:P,currentPoint:K}}pathT(B,M){const{pathParser:P}=this,{current:K,controlPoint:Y,currentPoint:re}=PathElement.pathT(P);P.addMarker(re,Y,Y),M.addQuadraticCurve(K.x,K.y,Y.x,Y.y,re.x,re.y),B&&B.quadraticCurveTo(Y.x,Y.y,re.x,re.y)}static pathA(B){const{current:M,command:P}=B;let{rX:K,rY:Y,xRot:re,lArcFlag:D,sweepFlag:ne}=P;const Ae=re*(Math.PI/180),fe=B.getAsCurrentPoint(),ge=new Point(Math.cos(Ae)*(M.x-fe.x)/2+Math.sin(Ae)*(M.y-fe.y)/2,-Math.sin(Ae)*(M.x-fe.x)/2+Math.cos(Ae)*(M.y-fe.y)/2),Be=Math.pow(ge.x,2)/Math.pow(K,2)+Math.pow(ge.y,2)/Math.pow(Y,2);Be>1&&(K*=Math.sqrt(Be),Y*=Math.sqrt(Be));let Ue=(D===ne?-1:1)*Math.sqrt((Math.pow(K,2)*Math.pow(Y,2)-Math.pow(K,2)*Math.pow(ge.y,2)-Math.pow(Y,2)*Math.pow(ge.x,2))/(Math.pow(K,2)*Math.pow(ge.y,2)+Math.pow(Y,2)*Math.pow(ge.x,2)));isNaN(Ue)&&(Ue=0);const ze=new Point(Ue*K*ge.y/Y,Ue*-Y*ge.x/K),Re=new Point((M.x+fe.x)/2+Math.cos(Ae)*ze.x-Math.sin(Ae)*ze.y,(M.y+fe.y)/2+Math.sin(Ae)*ze.x+Math.cos(Ae)*ze.y),$e=vectorsAngle([1,0],[(ge.x-ze.x)/K,(ge.y-ze.y)/Y]),We=[(ge.x-ze.x)/K,(ge.y-ze.y)/Y],ut=[(-ge.x-ze.x)/K,(-ge.y-ze.y)/Y];let et=vectorsAngle(We,ut);return vectorsRatio(We,ut)<=-1&&(et=Math.PI),vectorsRatio(We,ut)>=1&&(et=0),{currentPoint:fe,rX:K,rY:Y,sweepFlag:ne,xAxisRotation:Ae,centp:Re,a1:$e,ad:et}}pathA(B,M){const{pathParser:P}=this,{currentPoint:K,rX:Y,rY:re,sweepFlag:D,xAxisRotation:ne,centp:Ae,a1:fe,ad:ge}=PathElement.pathA(P),Be=1-D?1:-1,Ue=fe+Be*(ge/2),ze=new Point(Ae.x+Y*Math.cos(Ue),Ae.y+re*Math.sin(Ue));if(P.addMarkerAngle(ze,Ue-Be*Math.PI/2),P.addMarkerAngle(K,Ue-Be*Math.PI),M.addPoint(K.x,K.y),B&&!isNaN(fe)&&!isNaN(ge)){const Re=Y>re?Y:re,$e=Y>re?1:Y/re,We=Y>re?re/Y:1;B.translate(Ae.x,Ae.y),B.rotate(ne),B.scale($e,We),B.arc(0,0,Re,fe,fe+ge,!!(1-D)),B.scale(1/$e,1/We),B.rotate(-ne),B.translate(-Ae.x,-Ae.y)}}static pathZ(B){B.current=B.start}pathZ(B,M){PathElement.pathZ(this.pathParser),B&&M.x1!==M.x2&&M.y1!==M.y2&&B.closePath()}constructor(B,M,P){super(B,M,P),this.type="path",this.pathParser=new PathParser(this.getAttribute("d").getString())}}class SVGElement extends RenderedElement{setContext(B){var M;const{document:P}=this,{screen:K,window:Y}=P,re=B.canvas;if(K.setDefaults(B),"style"in re&&typeof B.font<"u"&&Y&&typeof Y.getComputedStyle<"u"){B.font=Y.getComputedStyle(re).getPropertyValue("font");const ut=new Property(P,"fontSize",Font.parse(B.font).fontSize);ut.hasValue()&&(P.rootEmSize=ut.getPixels("y"),P.emSize=P.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:D,height:ne}=K.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const Ae=this.getAttribute("refX"),fe=this.getAttribute("refY"),ge=this.getAttribute("viewBox"),Be=ge.hasValue()?toNumbers(ge.getString()):null,Ue=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let ze=0,Re=0,$e=0,We=0;Be&&(ze=Be[0],Re=Be[1]),this.root||(D=this.getStyle("width").getPixels("x"),ne=this.getStyle("height").getPixels("y"),this.type==="marker"&&($e=ze,We=Re,ze=0,Re=0)),K.viewPort.setCurrent(D,ne),this.node&&(!this.parent||((M=this.node.parentNode)===null||M===void 0?void 0:M.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(B),B.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),Be&&(D=Be[2],ne=Be[3]),P.setViewBox({ctx:B,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:K.viewPort.width,desiredWidth:D,height:K.viewPort.height,desiredHeight:ne,minX:ze,minY:Re,refX:Ae.getValue(),refY:fe.getValue(),clip:Ue,clipX:$e,clipY:We}),Be&&(K.viewPort.removeCurrent(),K.viewPort.setCurrent(D,ne))}clearContext(B){super.clearContext(B),this.document.screen.viewPort.removeCurrent()}resize(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const K=this.getAttribute("width",!0),Y=this.getAttribute("height",!0),re=this.getAttribute("viewBox"),D=this.getAttribute("style"),ne=K.getNumber(0),Ae=Y.getNumber(0);if(P)if(typeof P=="string")this.getAttribute("preserveAspectRatio",!0).setValue(P);else{const fe=this.getAttribute("preserveAspectRatio");fe.hasValue()&&fe.setValue(fe.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(K.setValue(B),Y.setValue(M),re.hasValue()||re.setValue("0 0 ".concat(ne||B," ").concat(Ae||M)),D.hasValue()){const fe=this.getStyle("width"),ge=this.getStyle("height");fe.hasValue()&&fe.setValue("".concat(B,"px")),ge.hasValue()&&ge.setValue("".concat(M,"px"))}}constructor(...B){super(...B),this.type="svg",this.root=!1}}class RectElement extends PathElement{path(B){const M=this.getAttribute("x").getPixels("x"),P=this.getAttribute("y").getPixels("y"),K=this.getStyle("width",!1,!0).getPixels("x"),Y=this.getStyle("height",!1,!0).getPixels("y"),re=this.getAttribute("rx"),D=this.getAttribute("ry");let ne=re.getPixels("x"),Ae=D.getPixels("y");if(re.hasValue()&&!D.hasValue()&&(Ae=ne),D.hasValue()&&!re.hasValue()&&(ne=Ae),ne=Math.min(ne,K/2),Ae=Math.min(Ae,Y/2),B){const fe=4*((Math.sqrt(2)-1)/3);B.beginPath(),Y>0&&K>0&&(B.moveTo(M+ne,P),B.lineTo(M+K-ne,P),B.bezierCurveTo(M+K-ne+fe*ne,P,M+K,P+Ae-fe*Ae,M+K,P+Ae),B.lineTo(M+K,P+Y-Ae),B.bezierCurveTo(M+K,P+Y-Ae+fe*Ae,M+K-ne+fe*ne,P+Y,M+K-ne,P+Y),B.lineTo(M+ne,P+Y),B.bezierCurveTo(M+ne-fe*ne,P+Y,M,P+Y-Ae+fe*Ae,M,P+Y-Ae),B.lineTo(M,P+Ae),B.bezierCurveTo(M,P+Ae-fe*Ae,M+ne-fe*ne,P,M+ne,P),B.closePath())}return new BoundingBox(M,P,M+K,P+Y)}getMarkers(){return null}constructor(...B){super(...B),this.type="rect"}}class CircleElement extends PathElement{path(B){const M=this.getAttribute("cx").getPixels("x"),P=this.getAttribute("cy").getPixels("y"),K=this.getAttribute("r").getPixels();return B&&K>0&&(B.beginPath(),B.arc(M,P,K,0,Math.PI*2,!1),B.closePath()),new BoundingBox(M-K,P-K,M+K,P+K)}getMarkers(){return null}constructor(...B){super(...B),this.type="circle"}}class EllipseElement extends PathElement{path(B){const M=4*((Math.sqrt(2)-1)/3),P=this.getAttribute("rx").getPixels("x"),K=this.getAttribute("ry").getPixels("y"),Y=this.getAttribute("cx").getPixels("x"),re=this.getAttribute("cy").getPixels("y");return B&&P>0&&K>0&&(B.beginPath(),B.moveTo(Y+P,re),B.bezierCurveTo(Y+P,re+M*K,Y+M*P,re+K,Y,re+K),B.bezierCurveTo(Y-M*P,re+K,Y-P,re+M*K,Y-P,re),B.bezierCurveTo(Y-P,re-M*K,Y-M*P,re-K,Y,re-K),B.bezierCurveTo(Y+M*P,re-K,Y+P,re-M*K,Y+P,re),B.closePath()),new BoundingBox(Y-P,re-K,Y+P,re+K)}getMarkers(){return null}constructor(...B){super(...B),this.type="ellipse"}}class LineElement extends PathElement{getPoints(){return[new Point(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(B){const[{x:M,y:P},{x:K,y:Y}]=this.getPoints();return B&&(B.beginPath(),B.moveTo(M,P),B.lineTo(K,Y)),new BoundingBox(M,P,K,Y)}getMarkers(){const[B,M]=this.getPoints(),P=B.angleTo(M);return[[B,P],[M,P]]}constructor(...B){super(...B),this.type="line"}}class PolylineElement extends PathElement{path(B){const{points:M}=this,[{x:P,y:K}]=M,Y=new BoundingBox(P,K);return B&&(B.beginPath(),B.moveTo(P,K)),M.forEach(re=>{let{x:D,y:ne}=re;Y.addPoint(D,ne),B&&B.lineTo(D,ne)}),Y}getMarkers(){const{points:B}=this,M=B.length-1,P=[];return B.forEach((K,Y)=>{Y!==M&&P.push([K,K.angleTo(B[Y+1])])}),P.length>0&&P.push([B[B.length-1],P[P.length-1][1]]),P}constructor(B,M,P){super(B,M,P),this.type="polyline",this.points=[],this.points=Point.parsePath(this.getAttribute("points").getString())}}class PolygonElement extends PolylineElement{path(B){const M=super.path(B),[{x:P,y:K}]=this.points;return B&&(B.lineTo(P,K),B.closePath()),M}constructor(...B){super(...B),this.type="polygon"}}class PatternElement extends Element{createPattern(B,M,P){const K=this.getStyle("width").getPixels("x",!0),Y=this.getStyle("height").getPixels("y",!0),re=new SVGElement(this.document,null);re.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),re.attributes.width=new Property(this.document,"width","".concat(K,"px")),re.attributes.height=new Property(this.document,"height","".concat(Y,"px")),re.attributes.transform=new Property(this.document,"transform",this.getAttribute("patternTransform").getValue()),re.children=this.children;const D=this.document.createCanvas(K,Y),ne=D.getContext("2d"),Ae=this.getAttribute("x"),fe=this.getAttribute("y");Ae.hasValue()&&fe.hasValue()&&ne.translate(Ae.getPixels("x",!0),fe.getPixels("y",!0)),P.hasValue()?this.styles["fill-opacity"]=P:Reflect.deleteProperty(this.styles,"fill-opacity");for(let Be=-1;Be<=1;Be++)for(let Ue=-1;Ue<=1;Ue++)ne.save(),re.attributes.x=new Property(this.document,"x",Be*D.width),re.attributes.y=new Property(this.document,"y",Ue*D.height),re.render(ne),ne.restore();return B.createPattern(D,"repeat")}constructor(...B){super(...B),this.type="pattern"}}class MarkerElement extends Element{render(B,M,P){if(!M)return;const{x:K,y:Y}=M,re=this.getAttribute("orient").getString("auto"),D=this.getAttribute("markerUnits").getString("strokeWidth");B.translate(K,Y),re==="auto"&&B.rotate(P),D==="strokeWidth"&&B.scale(B.lineWidth,B.lineWidth),B.save();const ne=new SVGElement(this.document);ne.type=this.type,ne.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),ne.attributes.refX=new Property(this.document,"refX",this.getAttribute("refX").getValue()),ne.attributes.refY=new Property(this.document,"refY",this.getAttribute("refY").getValue()),ne.attributes.width=new Property(this.document,"width",this.getAttribute("markerWidth").getValue()),ne.attributes.height=new Property(this.document,"height",this.getAttribute("markerHeight").getValue()),ne.attributes.overflow=new Property(this.document,"overflow",this.getAttribute("overflow").getValue()),ne.attributes.fill=new Property(this.document,"fill",this.getAttribute("fill").getColor("black")),ne.attributes.stroke=new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none")),ne.children=this.children,ne.render(B),B.restore(),D==="strokeWidth"&&B.scale(1/B.lineWidth,1/B.lineWidth),re==="auto"&&B.rotate(-P),B.translate(-K,-Y)}constructor(...B){super(...B),this.type="marker"}}class DefsElement extends Element{render(){}constructor(...B){super(...B),this.type="defs"}}class GElement extends RenderedElement{getBoundingBox(B){const M=new BoundingBox;return this.children.forEach(P=>{M.addBoundingBox(P.getBoundingBox(B))}),M}constructor(...B){super(...B),this.type="g"}}class GradientElement extends Element{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(B,M,P){let K=this;this.getHrefAttribute().hasValue()&&(K=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(K));const{stops:Y}=K,re=this.getGradient(B,M);if(!re)return this.addParentOpacity(P,Y[Y.length-1].color);if(Y.forEach(D=>{re.addColorStop(D.offset,this.addParentOpacity(P,D.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:D}=this,{MAX_VIRTUAL_PIXELS:ne}=Screen,{viewPort:Ae}=D.screen,fe=Ae.getRoot(),ge=new RectElement(D);ge.attributes.x=new Property(D,"x",-ne/3),ge.attributes.y=new Property(D,"y",-ne/3),ge.attributes.width=new Property(D,"width",ne),ge.attributes.height=new Property(D,"height",ne);const Be=new GElement(D);Be.attributes.transform=new Property(D,"transform",this.getAttribute("gradientTransform").getValue()),Be.children=[ge];const Ue=new SVGElement(D);Ue.attributes.x=new Property(D,"x",0),Ue.attributes.y=new Property(D,"y",0),Ue.attributes.width=new Property(D,"width",fe.width),Ue.attributes.height=new Property(D,"height",fe.height),Ue.children=[Be];const ze=D.createCanvas(fe.width,fe.height),Re=ze.getContext("2d");return Re.fillStyle=re,Ue.render(Re),Re.createPattern(ze,"no-repeat")}return re}inheritStopContainer(B){this.attributesToInherit.forEach(M=>{!this.getAttribute(M).hasValue()&&B.getAttribute(M).hasValue()&&this.getAttribute(M,!0).setValue(B.getAttribute(M).getValue())})}addParentOpacity(B,M){return B.hasValue()?new Property(this.document,"color",M).addOpacity(B).getColor():M}constructor(B,M,P){super(B,M,P),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:K,children:Y}=this;Y.forEach(re=>{re.type==="stop"&&K.push(re)})}}class LinearGradientElement extends GradientElement{getGradient(B,M){const P=this.getGradientUnits()==="objectBoundingBox",K=P?M.getBoundingBox(B):null;if(P&&!K)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const Y=P?K.x+K.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),re=P?K.y+K.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),D=P?K.x+K.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),ne=P?K.y+K.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return Y===D&&re===ne?null:B.createLinearGradient(Y,re,D,ne)}constructor(B,M,P){super(B,M,P),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class RadialGradientElement extends GradientElement{getGradient(B,M){const P=this.getGradientUnits()==="objectBoundingBox",K=M.getBoundingBox(B);if(P&&!K)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const Y=P?K.x+K.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),re=P?K.y+K.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let D=Y,ne=re;this.getAttribute("fx").hasValue()&&(D=P?K.x+K.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(ne=P?K.y+K.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const Ae=P?(K.width+K.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),fe=this.getAttribute("fr").getPixels();return B.createRadialGradient(D,ne,fe,Y,re,Ae)}constructor(B,M,P){super(B,M,P),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class StopElement extends Element{constructor(B,M,P){super(B,M,P),this.type="stop";const K=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),Y=this.getStyle("stop-opacity");let re=this.getStyle("stop-color",!0);re.getString()===""&&re.setValue("#000"),Y.hasValue()&&(re=re.addOpacity(Y)),this.offset=K,this.color=re.getColor()}}class AnimateElement extends Element{getProperty(){const B=this.getAttribute("attributeType").getString(),M=this.getAttribute("attributeName").getString();return B==="CSS"?this.parent.getStyle(M,!0):this.parent.getAttribute(M,!0)}calcValue(){const{initialUnits:B}=this,{progress:M,from:P,to:K}=this.getProgress();let Y=P.getNumber()+(K.getNumber()-P.getNumber())*M;return B==="%"&&(Y*=100),"".concat(Y).concat(B)}update(B){const{parent:M}=this,P=this.getProperty();if(this.initialValue||(this.initialValue=P.getString(),this.initialUnits=P.getUnits()),this.duration>this.maxDuration){const Y=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(Y==="freeze"&&!this.frozen)this.frozen=!0,M&&P&&(M.animationFrozen=!0,M.animationFrozenValue=P.getString());else if(Y==="remove"&&!this.removed)return this.removed=!0,M&&P&&P.setValue(M.animationFrozen?M.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=B;let K=!1;if(this.begin<this.duration){let Y=this.calcValue();const re=this.getAttribute("type");if(re.hasValue()){const D=re.getString();Y="".concat(D,"(").concat(Y,")")}P.setValue(Y),K=!0}return K}getProgress(){const{document:B,values:M}=this;let P=(this.duration-this.begin)/(this.maxDuration-this.begin),K,Y;if(M.hasValue()){const re=P*(M.getValue().length-1),D=Math.floor(re),ne=Math.ceil(re);let Ae;Ae=M.getValue()[D],K=new Property(B,"from",Ae?parseFloat(Ae):0),Ae=M.getValue()[ne],Y=new Property(B,"to",Ae?parseFloat(Ae):0),P=(re-D)/(ne-D)}else K=this.from,Y=this.to;return{progress:P,from:K,to:Y}}constructor(B,M,P){super(B,M,P),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,B.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property(B,"values",null);const K=this.getAttribute("values");K.hasValue()&&this.values.setValue(K.getString().split(";"))}}class AnimateColorElement extends AnimateElement{calcValue(){const{progress:B,from:M,to:P}=this.getProgress(),K=new RGBColor$1(M.getColor()),Y=new RGBColor$1(P.getColor());if(K.ok&&Y.ok){const re=K.r+(Y.r-K.r)*B,D=K.g+(Y.g-K.g)*B,ne=K.b+(Y.b-K.b)*B;return"rgb(".concat(Math.floor(re),", ").concat(Math.floor(D),", ").concat(Math.floor(ne),")")}return this.getAttribute("from").getColor()}constructor(...B){super(...B),this.type="animateColor"}}class AnimateTransformElement extends AnimateElement{calcValue(){const{progress:B,from:M,to:P}=this.getProgress(),K=toNumbers(M.getString()),Y=toNumbers(P.getString());return K.map((D,ne)=>{const Ae=Y[ne];return D+(Ae-D)*B}).join(" ")}constructor(...B){super(...B),this.type="animateTransform"}}class FontFaceElement extends Element{constructor(B,M,P){super(B,M,P),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class GlyphElement extends PathElement{constructor(B,M,P){super(B,M,P),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class MissingGlyphElement extends GlyphElement{constructor(...B){super(...B),this.type="missing-glyph",this.horizAdvX=0}}class FontElement extends Element{render(){}constructor(B,M,P){super(B,M,P),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:K}=B,{children:Y}=this;for(const re of Y)if(re instanceof FontFaceElement){this.fontFace=re;const D=re.getStyle("font-family");D.hasValue()&&(K[D.getString()]=this)}else if(re instanceof MissingGlyphElement)this.missingGlyph=re;else if(re instanceof GlyphElement)if(re.arabicForm){this.isRTL=!0,this.isArabic=!0;const D=this.arabicGlyphs[re.unicode];typeof D>"u"?this.arabicGlyphs[re.unicode]={[re.arabicForm]:re}:D[re.arabicForm]=re}else this.glyphs[re.unicode]=re}}class TRefElement extends TextElement{getText(){const B=this.getHrefAttribute().getDefinition();if(B){const M=B.children[0];if(M)return M.getText()}return""}constructor(...B){super(...B),this.type="tref"}}class AElement extends TextElement{getText(){return this.text}renderChildren(B){if(this.hasText){super.renderChildren(B);const{document:M,x:P,y:K}=this,{mouse:Y}=M.screen,re=new Property(M,"fontSize",Font.parse(M.ctx.font).fontSize);Y.isWorking()&&Y.checkBoundingBox(this,new BoundingBox(P,K-re.getPixels("y"),P+this.measureText(B),K))}else if(this.children.length>0){const M=new GElement(this.document);M.children=this.children,M.parent=this,M.render(B)}}onClick(){const{window:B}=this.document;B&&B.open(this.getHrefAttribute().getString())}onMouseMove(){const B=this.document.ctx;B.canvas.style.cursor="pointer"}constructor(B,M,P){super(B,M,P),this.type="a";const{childNodes:K}=M,Y=K[0],re=K.length>0&&Array.from(K).every(D=>D.nodeType===3);this.hasText=re,this.text=re?this.getTextFromNode(Y):""}}class TextPathElement extends TextElement{getText(){return this.text}path(B){const{dataArray:M}=this;B&&B.beginPath(),M.forEach(P=>{let{type:K,points:Y}=P;switch(K){case PathParser.LINE_TO:B&&B.lineTo(Y[0],Y[1]);break;case PathParser.MOVE_TO:B&&B.moveTo(Y[0],Y[1]);break;case PathParser.CURVE_TO:B&&B.bezierCurveTo(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);break;case PathParser.QUAD_TO:B&&B.quadraticCurveTo(Y[0],Y[1],Y[2],Y[3]);break;case PathParser.ARC:{const[re,D,ne,Ae,fe,ge,Be,Ue]=Y,ze=ne>Ae?ne:Ae,Re=ne>Ae?1:ne/Ae,$e=ne>Ae?Ae/ne:1;B&&(B.translate(re,D),B.rotate(Be),B.scale(Re,$e),B.arc(0,0,ze,fe,fe+ge,!!(1-Ue)),B.scale(1/Re,1/$e),B.rotate(-Be),B.translate(-re,-D));break}case PathParser.CLOSE_PATH:B&&B.closePath();break}})}renderChildren(B){this.setTextData(B),B.save();const M=this.parent.getStyle("text-decoration").getString(),P=this.getFontSize(),{glyphInfo:K}=this,Y=B.fillStyle;M==="underline"&&B.beginPath(),K.forEach((re,D)=>{const{p0:ne,p1:Ae,rotation:fe,text:ge}=re;B.save(),B.translate(ne.x,ne.y),B.rotate(fe),B.fillStyle&&B.fillText(ge,0,0),B.strokeStyle&&B.strokeText(ge,0,0),B.restore(),M==="underline"&&(D===0&&B.moveTo(ne.x,ne.y+P/8),B.lineTo(Ae.x,Ae.y+P/5))}),M==="underline"&&(B.lineWidth=P/20,B.strokeStyle=Y,B.stroke(),B.closePath()),B.restore()}getLetterSpacingAt(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[B]||0}findSegmentToFitChar(B,M,P,K,Y,re,D,ne,Ae){let fe=re,ge=this.measureText(B,ne);ne===" "&&M==="justify"&&P<K&&(ge+=(K-P)/Y),Ae>-1&&(fe+=this.getLetterSpacingAt(Ae));const Be=this.textHeight/20,Ue=this.getEquidistantPointOnPath(fe,Be,0),ze=this.getEquidistantPointOnPath(fe+ge,Be,0),Re={p0:Ue,p1:ze},$e=Ue&&ze?Math.atan2(ze.y-Ue.y,ze.x-Ue.x):0;if(D){const We=Math.cos(Math.PI/2+$e)*D,ut=Math.cos(-$e)*D;Re.p0={...Ue,x:Ue.x+We,y:Ue.y+ut},Re.p1={...ze,x:ze.x+We,y:ze.y+ut}}return fe+=ge,{offset:fe,segment:Re,rotation:$e}}measureText(B,M){const{measuresCache:P}=this,K=M||this.getText();if(P.has(K))return P.get(K);const Y=this.measureTargetText(B,K);return P.set(K,Y),Y}setTextData(B){if(this.glyphInfo)return;const M=this.getText(),P=M.split(""),K=M.split(" ").length-1,Y=this.parent.getAttribute("dx").split().map(et=>et.getPixels("x")),re=this.parent.getAttribute("dy").getPixels("y"),D=this.parent.getStyle("text-anchor").getString("start"),ne=this.getStyle("letter-spacing"),Ae=this.parent.getStyle("letter-spacing");let fe=0;!ne.hasValue()||ne.getValue()==="inherit"?fe=Ae.getPixels():ne.hasValue()&&ne.getValue()!=="initial"&&ne.getValue()!=="unset"&&(fe=ne.getPixels());const ge=[],Be=M.length;this.letterSpacingCache=ge;for(let et=0;et<Be;et++)ge.push(typeof Y[et]<"u"?Y[et]:fe);const Ue=ge.reduce((et,At,nt)=>nt===0?0:et+At||0,0),ze=this.measureText(B),Re=Math.max(ze+Ue,0);this.textWidth=ze,this.textHeight=this.getFontSize(),this.glyphInfo=[];const $e=this.getPathLength(),We=this.getStyle("startOffset").getNumber(0)*$e;let ut=0;(D==="middle"||D==="center")&&(ut=-Re/2),(D==="end"||D==="right")&&(ut=-Re),ut+=We,P.forEach((et,At)=>{const{offset:nt,segment:ft,rotation:Tt}=this.findSegmentToFitChar(B,D,Re,$e,K,ut,re,et,At);ut=nt,!(!ft.p0||!ft.p1)&&this.glyphInfo.push({text:P[At],p0:ft.p0,p1:ft.p1,rotation:Tt})})}parsePathData(B){if(this.pathLength=-1,!B)return[];const M=[],{pathParser:P}=B;for(P.reset();!P.isEnd();){const{current:K}=P,Y=K?K.x:0,re=K?K.y:0,D=P.next();let ne=D.type,Ae=[];switch(D.type){case PathParser.MOVE_TO:this.pathM(P,Ae);break;case PathParser.LINE_TO:ne=this.pathL(P,Ae);break;case PathParser.HORIZ_LINE_TO:ne=this.pathH(P,Ae);break;case PathParser.VERT_LINE_TO:ne=this.pathV(P,Ae);break;case PathParser.CURVE_TO:this.pathC(P,Ae);break;case PathParser.SMOOTH_CURVE_TO:ne=this.pathS(P,Ae);break;case PathParser.QUAD_TO:this.pathQ(P,Ae);break;case PathParser.SMOOTH_QUAD_TO:ne=this.pathT(P,Ae);break;case PathParser.ARC:Ae=this.pathA(P);break;case PathParser.CLOSE_PATH:PathElement.pathZ(P);break}D.type!==PathParser.CLOSE_PATH?M.push({type:ne,points:Ae,start:{x:Y,y:re},pathLength:this.calcLength(Y,re,ne,Ae)}):M.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return M}pathM(B,M){const{x:P,y:K}=PathElement.pathM(B).point;M.push(P,K)}pathL(B,M){const{x:P,y:K}=PathElement.pathL(B).point;return M.push(P,K),PathParser.LINE_TO}pathH(B,M){const{x:P,y:K}=PathElement.pathH(B).point;return M.push(P,K),PathParser.LINE_TO}pathV(B,M){const{x:P,y:K}=PathElement.pathV(B).point;return M.push(P,K),PathParser.LINE_TO}pathC(B,M){const{point:P,controlPoint:K,currentPoint:Y}=PathElement.pathC(B);M.push(P.x,P.y,K.x,K.y,Y.x,Y.y)}pathS(B,M){const{point:P,controlPoint:K,currentPoint:Y}=PathElement.pathS(B);return M.push(P.x,P.y,K.x,K.y,Y.x,Y.y),PathParser.CURVE_TO}pathQ(B,M){const{controlPoint:P,currentPoint:K}=PathElement.pathQ(B);M.push(P.x,P.y,K.x,K.y)}pathT(B,M){const{controlPoint:P,currentPoint:K}=PathElement.pathT(B);return M.push(P.x,P.y,K.x,K.y),PathParser.QUAD_TO}pathA(B){let{rX:M,rY:P,sweepFlag:K,xAxisRotation:Y,centp:re,a1:D,ad:ne}=PathElement.pathA(B);return K===0&&ne>0&&(ne-=2*Math.PI),K===1&&ne<0&&(ne+=2*Math.PI),[re.x,re.y,M,P,D,ne,Y,K]}calcLength(B,M,P,K){let Y=0,re=null,D=null,ne=0;switch(P){case PathParser.LINE_TO:return this.getLineLength(B,M,K[0],K[1]);case PathParser.CURVE_TO:for(Y=0,re=this.getPointOnCubicBezier(0,B,M,K[0],K[1],K[2],K[3],K[4],K[5]),ne=.01;ne<=1;ne+=.01)D=this.getPointOnCubicBezier(ne,B,M,K[0],K[1],K[2],K[3],K[4],K[5]),Y+=this.getLineLength(re.x,re.y,D.x,D.y),re=D;return Y;case PathParser.QUAD_TO:for(Y=0,re=this.getPointOnQuadraticBezier(0,B,M,K[0],K[1],K[2],K[3]),ne=.01;ne<=1;ne+=.01)D=this.getPointOnQuadraticBezier(ne,B,M,K[0],K[1],K[2],K[3]),Y+=this.getLineLength(re.x,re.y,D.x,D.y),re=D;return Y;case PathParser.ARC:{Y=0;const Ae=K[4],fe=K[5],ge=K[4]+fe;let Be=Math.PI/180;if(Math.abs(Ae-ge)<Be&&(Be=Math.abs(Ae-ge)),re=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],Ae,0),fe<0)for(ne=Ae-Be;ne>ge;ne-=Be)D=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],ne,0),Y+=this.getLineLength(re.x,re.y,D.x,D.y),re=D;else for(ne=Ae+Be;ne<ge;ne+=Be)D=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],ne,0),Y+=this.getLineLength(re.x,re.y,D.x,D.y),re=D;return D=this.getPointOnEllipticalArc(K[0],K[1],K[2],K[3],ge,0),Y+=this.getLineLength(re.x,re.y,D.x,D.y),Y}}return 0}getPointOnLine(B,M,P,K,Y){let re=arguments.length>5&&arguments[5]!==void 0?arguments[5]:M,D=arguments.length>6&&arguments[6]!==void 0?arguments[6]:P;const ne=(Y-P)/(K-M+PSEUDO_ZERO);let Ae=Math.sqrt(B*B/(1+ne*ne));K<M&&(Ae*=-1);let fe=ne*Ae,ge=null;if(K===M)ge={x:re,y:D+fe};else if((D-P)/(re-M+PSEUDO_ZERO)===ne)ge={x:re+Ae,y:D+fe};else{let Be=0,Ue=0;const ze=this.getLineLength(M,P,K,Y);if(ze<PSEUDO_ZERO)return null;let Re=(re-M)*(K-M)+(D-P)*(Y-P);Re/=ze*ze,Be=M+Re*(K-M),Ue=P+Re*(Y-P);const $e=this.getLineLength(re,D,Be,Ue),We=Math.sqrt(B*B-$e*$e);Ae=Math.sqrt(We*We/(1+ne*ne)),K<M&&(Ae*=-1),fe=ne*Ae,ge={x:Be+Ae,y:Ue+fe}}return ge}getPointOnPath(B){const M=this.getPathLength();let P=0,K=null;if(B<-5e-5||B-5e-5>M)return null;const{dataArray:Y}=this;for(const re of Y){if(re&&(re.pathLength<5e-5||P+re.pathLength+5e-5<B)){P+=re.pathLength;continue}const D=B-P;let ne=0;switch(re.type){case PathParser.LINE_TO:K=this.getPointOnLine(D,re.start.x,re.start.y,re.points[0],re.points[1],re.start.x,re.start.y);break;case PathParser.ARC:{const Ae=re.points[4],fe=re.points[5],ge=re.points[4]+fe;if(ne=Ae+D/re.pathLength*fe,fe<0&&ne<ge||fe>=0&&ne>ge)break;K=this.getPointOnEllipticalArc(re.points[0],re.points[1],re.points[2],re.points[3],ne,re.points[6]);break}case PathParser.CURVE_TO:ne=D/re.pathLength,ne>1&&(ne=1),K=this.getPointOnCubicBezier(ne,re.start.x,re.start.y,re.points[0],re.points[1],re.points[2],re.points[3],re.points[4],re.points[5]);break;case PathParser.QUAD_TO:ne=D/re.pathLength,ne>1&&(ne=1),K=this.getPointOnQuadraticBezier(ne,re.start.x,re.start.y,re.points[0],re.points[1],re.points[2],re.points[3]);break}if(K)return K;break}return null}getLineLength(B,M,P,K){return Math.sqrt((P-B)*(P-B)+(K-M)*(K-M))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((B,M)=>M.pathLength>0?B+M.pathLength:B,0)),this.pathLength}getPointOnCubicBezier(B,M,P,K,Y,re,D,ne,Ae){const fe=ne*CB1(B)+re*CB2(B)+K*CB3(B)+M*CB4(B),ge=Ae*CB1(B)+D*CB2(B)+Y*CB3(B)+P*CB4(B);return{x:fe,y:ge}}getPointOnQuadraticBezier(B,M,P,K,Y,re,D){const ne=re*QB1(B)+K*QB2(B)+M*QB3(B),Ae=D*QB1(B)+Y*QB2(B)+P*QB3(B);return{x:ne,y:Ae}}getPointOnEllipticalArc(B,M,P,K,Y,re){const D=Math.cos(re),ne=Math.sin(re),Ae={x:P*Math.cos(Y),y:K*Math.sin(Y)};return{x:B+(Ae.x*D-Ae.y*ne),y:M+(Ae.x*ne+Ae.y*D)}}buildEquidistantCache(B,M){const P=this.getPathLength(),K=M||.25,Y=B||P/100;if(!this.equidistantCache||this.equidistantCache.step!==Y||this.equidistantCache.precision!==K){this.equidistantCache={step:Y,precision:K,points:[]};let re=0;for(let D=0;D<=P;D+=K){const ne=this.getPointOnPath(D),Ae=this.getPointOnPath(D+K);!ne||!Ae||(re+=this.getLineLength(ne.x,ne.y,Ae.x,Ae.y),re>=Y&&(this.equidistantCache.points.push({x:ne.x,y:ne.y,distance:D}),re-=Y))}}}getEquidistantPointOnPath(B,M,P){if(this.buildEquidistantCache(M,P),B<0||B-this.getPathLength()>5e-5)return null;const K=Math.round(B/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[K]||null}constructor(B,M,P){super(B,M,P),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const K=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(K)}}const dataUriRegex=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class ImageElement extends RenderedElement{async loadImage(B){try{const M=await this.document.createImage(B);this.image=M}catch(M){console.error('Error while loading image "'.concat(B,'":'),M)}this.loaded=!0}async loadSvg(B){const M=dataUriRegex.exec(B);if(M){const P=M[5];P&&(M[4]==="base64"?this.image=atob(P):this.image=decodeURIComponent(P))}else try{const K=await(await this.document.fetch(B)).text();this.image=K}catch(P){console.error('Error while loading image "'.concat(B,'":'),P)}this.loaded=!0}renderChildren(B){const{document:M,image:P,loaded:K}=this,Y=this.getAttribute("x").getPixels("x"),re=this.getAttribute("y").getPixels("y"),D=this.getStyle("width").getPixels("x"),ne=this.getStyle("height").getPixels("y");if(!(!K||!P||!D||!ne)){if(B.save(),B.translate(Y,re),typeof P=="string"){const Ae=M.canvg.forkString(B,P,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:D,scaleHeight:ne}),{documentElement:fe}=Ae.document;fe&&(fe.parent=this),Ae.render()}else M.setViewBox({ctx:B,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:D,desiredWidth:P.width,height:ne,desiredHeight:P.height}),this.loaded&&(!("complete"in P)||P.complete)&&B.drawImage(P,0,0);B.restore()}}getBoundingBox(){const B=this.getAttribute("x").getPixels("x"),M=this.getAttribute("y").getPixels("y"),P=this.getStyle("width").getPixels("x"),K=this.getStyle("height").getPixels("y");return new BoundingBox(B,M,B+P,M+K)}constructor(B,M,P){super(B,M,P),this.type="image",this.loaded=!1;const K=this.getHrefAttribute().getString();if(!K)return;const Y=K.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(K);B.images.push(this),Y?this.loadSvg(K):this.loadImage(K)}}class SymbolElement extends RenderedElement{render(B){}constructor(...B){super(...B),this.type="symbol"}}class SVGFontLoader{async load(B,M){try{const{document:P}=this,Y=(await P.canvg.parser.load(M)).getElementsByTagName("font");Array.from(Y).forEach(re=>{const D=P.createElement(re);P.definitions[B]=D})}catch(P){console.error('Error while loading font "'.concat(M,'":'),P)}this.loaded=!0}constructor(B){this.document=B,this.loaded=!1,B.fonts.push(this)}}class StyleElement extends Element{constructor(B,M,P){super(B,M,P),this.type="style",compressSpaces(Array.from(M.childNodes).map(re=>re.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(re=>{const D=re.trim();if(!D)return;const ne=D.split("{"),Ae=ne[0].split(","),fe=ne[1].split(";");Ae.forEach(ge=>{const Be=ge.trim();if(!Be)return;const Ue=B.styles[Be]||{};if(fe.forEach(ze=>{const Re=ze.indexOf(":"),$e=ze.substr(0,Re).trim(),We=ze.substr(Re+1,ze.length-Re).trim();$e&&We&&(Ue[$e]=new Property(B,$e,We))}),B.styles[Be]=Ue,B.stylesSpecificity[Be]=getSelectorSpecificity(Be),Be==="@font-face"){const ze=Ue["font-family"].getString().replace(/"|'/g,"");Ue.src.getString().split(",").forEach($e=>{if($e.indexOf('format("svg")')>0){const We=parseExternalUrl($e);We&&new SVGFontLoader(B).load(ze,We)}})}})})}}StyleElement.parseExternalUrl=parseExternalUrl;class UseElement extends RenderedElement{setContext(B){super.setContext(B);const M=this.getAttribute("x"),P=this.getAttribute("y");M.hasValue()&&B.translate(M.getPixels("x"),0),P.hasValue()&&B.translate(0,P.getPixels("y"))}path(B){const{element:M}=this;M&&M.path(B)}renderChildren(B){const{document:M,element:P}=this;if(P){let K=P;if(P.type==="symbol"&&(K=new SVGElement(M),K.attributes.viewBox=new Property(M,"viewBox",P.getAttribute("viewBox").getString()),K.attributes.preserveAspectRatio=new Property(M,"preserveAspectRatio",P.getAttribute("preserveAspectRatio").getString()),K.attributes.overflow=new Property(M,"overflow",P.getAttribute("overflow").getString()),K.children=P.children,P.styles.opacity=new Property(M,"opacity",this.calculateOpacity())),K.type==="svg"){const re=this.getStyle("width",!1,!0),D=this.getStyle("height",!1,!0);re.hasValue()&&(K.attributes.width=new Property(M,"width",re.getString())),D.hasValue()&&(K.attributes.height=new Property(M,"height",D.getString()))}const Y=K.parent;K.parent=this,K.render(B),K.parent=Y}}getBoundingBox(B){const{element:M}=this;return M?M.getBoundingBox(B):null}elementTransform(){const{document:B,element:M}=this;return M?Transform.fromElement(B,M):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...B){super(...B),this.type="use"}}function imGet(g,B,M,P,K,Y){return g[M*P*4+B*4+Y]}function imSet(g,B,M,P,K,Y,re){g[M*P*4+B*4+Y]=re}function m(g,B,M){return g[B]*M}function c(g,B,M,P){return B+Math.cos(g)*M+Math.sin(g)*P}class FeColorMatrixElement extends Element{apply(B,M,P,K,Y){const{includeOpacity:re,matrix:D}=this,ne=B.getImageData(0,0,K,Y);for(let Ae=0;Ae<Y;Ae++)for(let fe=0;fe<K;fe++){const ge=imGet(ne.data,fe,Ae,K,Y,0),Be=imGet(ne.data,fe,Ae,K,Y,1),Ue=imGet(ne.data,fe,Ae,K,Y,2),ze=imGet(ne.data,fe,Ae,K,Y,3);let Re=m(D,0,ge)+m(D,1,Be)+m(D,2,Ue)+m(D,3,ze)+m(D,4,1),$e=m(D,5,ge)+m(D,6,Be)+m(D,7,Ue)+m(D,8,ze)+m(D,9,1),We=m(D,10,ge)+m(D,11,Be)+m(D,12,Ue)+m(D,13,ze)+m(D,14,1),ut=m(D,15,ge)+m(D,16,Be)+m(D,17,Ue)+m(D,18,ze)+m(D,19,1);re&&(Re=0,$e=0,We=0,ut*=ze/255),imSet(ne.data,fe,Ae,K,Y,0,Re),imSet(ne.data,fe,Ae,K,Y,1,$e),imSet(ne.data,fe,Ae,K,Y,2,We),imSet(ne.data,fe,Ae,K,Y,3,ut)}B.clearRect(0,0,K,Y),B.putImageData(ne,0,0)}constructor(B,M,P){super(B,M,P),this.type="feColorMatrix";let K=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const Y=K[0];K=[.213+.787*Y,.715-.715*Y,.072-.072*Y,0,0,.213-.213*Y,.715+.285*Y,.072-.072*Y,0,0,.213-.213*Y,.715-.715*Y,.072+.928*Y,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const Y=K[0]*Math.PI/180;K=[c(Y,.213,.787,-.213),c(Y,.715,-.715,-.715),c(Y,.072,-.072,.928),0,0,c(Y,.213,-.213,.143),c(Y,.715,.285,.14),c(Y,.072,-.072,-.283),0,0,c(Y,.213,-.213,-.787),c(Y,.715,-.715,.715),c(Y,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=K,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class MaskElement extends Element{apply(B,M){const{document:P}=this;let K=this.getAttribute("x").getPixels("x"),Y=this.getAttribute("y").getPixels("y"),re=this.getStyle("width").getPixels("x"),D=this.getStyle("height").getPixels("y");if(!re&&!D){const Ue=new BoundingBox;this.children.forEach(ze=>{Ue.addBoundingBox(ze.getBoundingBox(B))}),K=Math.floor(Ue.x1),Y=Math.floor(Ue.y1),re=Math.floor(Ue.width),D=Math.floor(Ue.height)}const ne=this.removeStyles(M,MaskElement.ignoreStyles),Ae=P.createCanvas(K+re,Y+D),fe=Ae.getContext("2d");P.screen.setDefaults(fe),this.renderChildren(fe),new FeColorMatrixElement(P,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(fe,0,0,K+re,Y+D);const ge=P.createCanvas(K+re,Y+D),Be=ge.getContext("2d");P.screen.setDefaults(Be),M.render(Be),Be.globalCompositeOperation="destination-in",Be.fillStyle=fe.createPattern(Ae,"no-repeat"),Be.fillRect(0,0,K+re,Y+D),B.fillStyle=Be.createPattern(ge,"no-repeat"),B.fillRect(0,0,K+re,Y+D),this.restoreStyles(M,ne)}render(B){}constructor(...B){super(...B),this.type="mask"}}MaskElement.ignoreStyles=["mask","transform","clip-path"];const noop=()=>{};class ClipPathElement extends Element{apply(B){const{document:M}=this,P=Reflect.getPrototypeOf(B),{beginPath:K,closePath:Y}=B;P&&(P.beginPath=noop,P.closePath=noop),Reflect.apply(K,B,[]),this.children.forEach(re=>{if(!("path"in re))return;let D="elementTransform"in re?re.elementTransform():null;D||(D=Transform.fromElement(M,re)),D&&D.apply(B),re.path(B),P&&(P.closePath=Y),D&&D.unapply(B)}),Reflect.apply(Y,B,[]),B.clip(),P&&(P.beginPath=K,P.closePath=Y)}render(B){}constructor(...B){super(...B),this.type="clipPath"}}class FilterElement extends Element{apply(B,M){const{document:P,children:K}=this,Y="getBoundingBox"in M?M.getBoundingBox(B):null;if(!Y)return;let re=0,D=0;K.forEach(We=>{const ut=We.extraFilterDistance||0;re=Math.max(re,ut),D=Math.max(D,ut)});const ne=Math.floor(Y.width),Ae=Math.floor(Y.height),fe=ne+2*re,ge=Ae+2*D;if(fe<1||ge<1)return;const Be=Math.floor(Y.x),Ue=Math.floor(Y.y),ze=this.removeStyles(M,FilterElement.ignoreStyles),Re=P.createCanvas(fe,ge),$e=Re.getContext("2d");P.screen.setDefaults($e),$e.translate(-Be+re,-Ue+D),M.render($e),K.forEach(We=>{typeof We.apply=="function"&&We.apply($e,0,0,fe,ge)}),B.drawImage(Re,0,0,fe,ge,Be-re,Ue-D,fe,ge),this.restoreStyles(M,ze)}render(B){}constructor(...B){super(...B),this.type="filter"}}FilterElement.ignoreStyles=["filter","transform","clip-path"];class FeDropShadowElement extends Element{apply(B,M,P,K,Y){}constructor(B,M,P){super(B,M,P),this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class FeMorphologyElement extends Element{apply(B,M,P,K,Y){}constructor(...B){super(...B),this.type="feMorphology"}}class FeCompositeElement extends Element{apply(B,M,P,K,Y){}constructor(...B){super(...B),this.type="feComposite"}}class FeGaussianBlurElement extends Element{apply(B,M,P,K,Y){const{document:re,blurRadius:D}=this,ne=re.window?re.window.document.body:null,Ae=B.canvas;Ae.id=re.getUniqueId(),ne&&(Ae.style.display="none",ne.appendChild(Ae)),processCanvasRGBA(Ae,M,P,K,Y,D),ne&&ne.removeChild(Ae)}constructor(B,M,P){super(B,M,P),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class TitleElement extends Element{constructor(...B){super(...B),this.type="title"}}class DescElement extends Element{constructor(...B){super(...B),this.type="desc"}}const elements={svg:SVGElement,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};function createCanvas(g,B){const M=document.createElement("canvas");return M.width=g,M.height=B,M}async function createImage(g){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const M=document.createElement("img");return B&&(M.crossOrigin="Anonymous"),new Promise((P,K)=>{M.onload=()=>{P(M)},M.onerror=(Y,re,D,ne,Ae)=>{K(Ae)},M.src=g})}const DEFAULT_EM_SIZE=12;class Document{bindCreateImage(B,M){return typeof M=="boolean"?(P,K)=>B(P,typeof K=="boolean"?K:M):B}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:B}=this;return B[B.length-1]||DEFAULT_EM_SIZE}set emSize(B){const{emSizeStack:M}=this;M.push(B)}popEmSize(){const{emSizeStack:B}=this;B.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(B=>B.loaded)}isFontsLoaded(){return this.fonts.every(B=>B.loaded)}createDocumentElement(B){const M=this.createElement(B.documentElement);return M.root=!0,M.addStylesFromStyleDefinition(),this.documentElement=M,M}createElement(B){const M=B.nodeName.replace(/^[^:]+:/,""),P=Document.elementTypes[M];return P?new P(this,B):new UnknownElement(this,B)}createTextNode(B){return new TextNode(this,B)}setViewBox(B){this.screen.setViewBox({document:this,...B})}constructor(B,{rootEmSize:M=DEFAULT_EM_SIZE,emSize:P=DEFAULT_EM_SIZE,createCanvas:K=Document.createCanvas,createImage:Y=Document.createImage,anonymousCrossOrigin:re}={}){this.canvg=B,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=B.screen,this.rootEmSize=M,this.emSize=P,this.createCanvas=K,this.createImage=this.bindCreateImage(Y,re),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}Document.createCanvas=createCanvas;Document.createImage=createImage;Document.elementTypes=elements;class Canvg{static async from(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Y=await new Parser(P).parse(M);return new Canvg(B,Y,P)}static fromString(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Y=new Parser(P).parseFromString(M);return new Canvg(B,Y,P)}fork(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.from(B,M,{...this.options,...P})}forkString(B,M){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.fromString(B,M,{...this.options,...P})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...B}),await this.ready(),this.stop()}start(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:M,screen:P,options:K}=this;P.start(M,{enableRedraw:!0,...K,...B})}stop(){this.screen.stop()}resize(B){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(B,M,P)}constructor(B,M,P={}){this.parser=new Parser(P),this.screen=new Screen(B,P),this.options=P;const K=new Document(this,P),Y=K.createDocumentElement(M);this.document=K,this.documentElement=Y}}var strxml$1={};strxml$1.attr=attr;strxml$1.tagClose=tagClose;strxml$1.tag=tag$1;strxml$1.encode=encode$1;function attr(g){return g&&g.length?" "+g.map(function(B){return B[0]+'="'+B[1]+'"'}).join(" "):""}function tagClose(g,B){return"<"+g+attr(B)+"/>"}function tag$1(g,B,M){return"<"+g+attr(M)+">"+B+"</"+g+">"}function encode$1(g){return(g===null?"":g.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var strxml=strxml$1,tag=strxml.tag,encode=strxml.encode,tokml=function(B,M){return M=M||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+tag("kml",tag("Document",documentName(M)+documentDescription(M)+root(B,M)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function feature(g,B){return function(M){if(!M.properties||!geometry.valid(M.geometry))return"";var P=geometry.any(M.geometry);if(!P)return"";var K="",Y="";if(g.simplestyle){var re=hashStyle(M.properties);re&&(geometry.isPoint(M.geometry)&&hasMarkerStyle(M.properties)?(B.indexOf(re)===-1&&(K=markerStyle(M.properties,re),B.push(re)),Y=tag("styleUrl","#"+re)):(geometry.isPolygon(M.geometry)||geometry.isLine(M.geometry))&&hasPolygonAndLineStyle(M.properties)&&(B.indexOf(re)===-1&&(K=polygonAndLineStyle(M.properties,re),B.push(re)),Y=tag("styleUrl","#"+re)))}return K+tag("Placemark",name(M.properties,g)+description(M.properties,g)+extendeddata(M.properties)+timestamp(M.properties,g)+P+Y)}}function root(g,B){if(!g.type)return"";var M=[];switch(g.type){case"FeatureCollection":return g.features?g.features.map(feature(B,M)).join(""):"";case"Feature":return feature(B,M)(g);default:return feature(B,M)({type:"Feature",geometry:g,properties:{}})}}function documentName(g){return g.documentName!==void 0?tag("name",g.documentName):""}function documentDescription(g){return g.documentDescription!==void 0?tag("description",g.documentDescription):""}function name(g,B){return g[B.name]?tag("name",encode(g[B.name])):""}function description(g,B){return g[B.description]?tag("description",encode(g[B.description])):""}function timestamp(g,B){return g[B.timestamp]?tag("TimeStamp",tag("when",encode(g[B.timestamp]))):""}var geometry={Point:function(g){return tag("Point",tag("coordinates",g.coordinates.join(",")))},LineString:function(g){return tag("LineString",tag("coordinates",linearring(g.coordinates)))},Polygon:function(g){if(!g.coordinates.length)return"";var B=g.coordinates[0],M=g.coordinates.slice(1),P=tag("outerBoundaryIs",tag("LinearRing",tag("coordinates",linearring(B)))),K=M.map(function(Y){return tag("innerBoundaryIs",tag("LinearRing",tag("coordinates",linearring(Y))))}).join("");return tag("Polygon",P+K)},MultiPoint:function(g){return g.coordinates.length?tag("MultiGeometry",g.coordinates.map(function(B){return geometry.Point({coordinates:B})}).join("")):""},MultiPolygon:function(g){return g.coordinates.length?tag("MultiGeometry",g.coordinates.map(function(B){return geometry.Polygon({coordinates:B})}).join("")):""},MultiLineString:function(g){return g.coordinates.length?tag("MultiGeometry",g.coordinates.map(function(B){return geometry.LineString({coordinates:B})}).join("")):""},GeometryCollection:function(g){return tag("MultiGeometry",g.geometries.map(geometry.any).join(""))},valid:function(g){return g&&g.type&&(g.coordinates||g.type==="GeometryCollection"&&g.geometries&&g.geometries.every(geometry.valid))},any:function(g){return geometry[g.type]?geometry[g.type](g):""},isPoint:function(g){return g.type==="Point"||g.type==="MultiPoint"},isPolygon:function(g){return g.type==="Polygon"||g.type==="MultiPolygon"},isLine:function(g){return g.type==="LineString"||g.type==="MultiLineString"}};function linearring(g){return g.map(function(B){return B.join(",")}).join(" ")}function extendeddata(g){return tag("ExtendedData",pairs(g).map(data).join(""))}function data(g){return tag("Data",tag("value",encode(g[1])),[["name",encode(g[0])]])}function hasMarkerStyle(g){return!!(g["marker-size"]||g["marker-symbol"]||g["marker-color"])}function markerStyle(g,B){return tag("Style",tag("IconStyle",tag("Icon",tag("href",iconUrl(g))))+iconSize(),[["id",B]])}function iconUrl(g){var B=g["marker-size"]||"medium",M=g["marker-symbol"]?"-"+g["marker-symbol"]:"",P=(g["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+B.charAt(0)+M+"+"+P+".png"}function iconSize(g){return tag("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function hasPolygonAndLineStyle(g){for(var B in g)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[B])return!0}function polygonAndLineStyle(g,B){var M=tag("LineStyle",[tag("color",hexToKmlColor(g.stroke,g["stroke-opacity"])||"ff555555")+tag("width",g["stroke-width"]===void 0?2:g["stroke-width"])]),P="";return(g.fill||g["fill-opacity"])&&(P=tag("PolyStyle",[tag("color",hexToKmlColor(g.fill,g["fill-opacity"])||"88555555")])),tag("Style",M+P,[["id",B]])}function hashStyle(g){var B="";return g["marker-symbol"]&&(B=B+"ms"+g["marker-symbol"]),g["marker-color"]&&(B=B+"mc"+g["marker-color"].replace("#","")),g["marker-size"]&&(B=B+"ms"+g["marker-size"]),g.stroke&&(B=B+"s"+g.stroke.replace("#","")),g["stroke-width"]&&(B=B+"sw"+g["stroke-width"].toString().replace(".","")),g["stroke-opacity"]&&(B=B+"mo"+g["stroke-opacity"].toString().replace(".","")),g.fill&&(B=B+"f"+g.fill.replace("#","")),g["fill-opacity"]&&(B=B+"fo"+g["fill-opacity"].toString().replace(".","")),B}function hexToKmlColor(g,B){if(typeof g!="string")return"";if(g=g.replace("#","").toLowerCase(),g.length===3)g=g[0]+g[0]+g[1]+g[1]+g[2]+g[2];else if(g.length!==6)return"";var M=g[0]+g[1],P=g[2]+g[3],K=g[4]+g[5],Y="ff";return typeof B=="number"&&B>=0&&B<=1&&(Y=(B*255).toString(16),Y.indexOf(".")>-1&&(Y=Y.substr(0,Y.indexOf("."))),Y.length<2&&(Y="0"+Y)),Y+K+P+M}function pairs(g){var B=[];for(var M in g)B.push([M,g[M]]);return B}const tokml$1=getDefaultExportFromCjs(tokml);var jxon={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);(function(g,B){(function(M,P){typeof window=="object"&&window.DOMImplementation&&window.XMLSerializer&&window.DOMParser?g.exports=P(window):g.exports=P(require$$0,!0)})(commonjsGlobal,function(M,P){var K={valueKey:"_",attrKey:"$",attrPrefix:"$",lowerCaseTags:!1,trueIsEmpty:!1,autoDate:!1,ignorePrefixedNodes:!1,parseValues:!1},Y=[],re=/^\s*$/,D=/^(?:true|false)$/i,ne;return new function(){this.config=function(ze){for(var Re in ze)K[Re]=ze[Re];K.parserErrorHandler&&(ne=new M.DOMParser({errorHandler:K.parserErrorHandler,locator:{}}))};function Ae(ze){return K.parseValues?re.test(ze)?null:D.test(ze)?ze.toLowerCase()==="true":isFinite(ze)?parseFloat(ze):K.autoDate&&isFinite(Date.parse(ze))?new Date(ze):ze:ze}function fe(){}fe.prototype.toString=function(){return"null"},fe.prototype.valueOf=function(){return null};function ge(ze){return ze===null?new fe:ze instanceof Object?ze:new ze.constructor(ze)}function Be(ze,Re,$e,We){var ut=4,et=3,At=1,nt=Y.length,ft=ze.hasChildNodes(),Tt=ze.nodeType===ze.ELEMENT_NODE&&ze.hasAttributes(),qt=!!(Re&2),Vt=0,vt="",Ut=qt?{}:K.trueIsEmpty?!0:"",Pt,Yt;if(ft)for(var Ai,Ri=0;Ri<ze.childNodes.length;Ri++)Ai=ze.childNodes.item(Ri),Ai.nodeType===ut?vt+=Ai.nodeValue:Ai.nodeType===et?vt+=Ai.nodeValue.trim():Ai.nodeType===At&&!(K.ignorePrefixedNodes&&Ai.prefix)&&Y.push(Ai);var Ei=Y.length,Li=Ae(vt);!qt&&(ft||Tt)&&(Ut=Re===0?ge(Li):{});for(var Yi=nt;Yi<Ei;Yi++)Pt=Y[Yi].nodeName,K.lowerCaseTags&&(Pt=Pt.toLowerCase()),Yt=Be(Y[Yi],Re,$e,We),Ut.hasOwnProperty(Pt)?(Ut[Pt].constructor!==Array&&(Ut[Pt]=[Ut[Pt]]),Ut[Pt].push(Yt)):(Ut[Pt]=Yt,Vt++);if(Tt){for(var vi=ze.attributes.length,d=We?"":K.attrPrefix,w=We?{}:Ut,I,k,R=0;R<vi;Vt++,R++)I=ze.attributes.item(R),k=I.name,K.lowerCaseTags&&(k=k.toLowerCase()),w[d+k]=Ae(I.value.trim());We&&($e&&Object.freeze(w),Ut[K.attrKey]=w,Vt-=vi-1)}return Re===3||(Re===2||Re===1&&Vt>0)&&vt?Ut[K.valueKey]=Li:!qt&&Vt===0&&vt&&(Ut=Li),$e&&(qt||Vt>0)&&Object.freeze(Ut),Y.length=nt,Ut}function Ue(ze,Re,$e){var We,ut,et;if($e.constructor===String||$e.constructor===Number||$e.constructor===Boolean){if(Re.appendChild(ze.createTextNode($e.toString())),$e===$e.valueOf())return}else $e.constructor===Date&&Re.appendChild(ze.createTextNode($e.toISOString()));for(var At in $e)if(We=$e[At],We!==void 0&&(We===null&&(We={}),!(isFinite(At)||We instanceof Function)))if(At===K.valueKey)We!==null&&We!==!0&&Re.appendChild(ze.createTextNode(We.constructor===Date?We.toISOString():String(We)));else if(At===K.attrKey)for(var nt in We)Re.setAttribute(nt,We[nt]);else if(At===K.attrPrefix+"xmlns")P&&Re.setAttribute(At.slice(1),We);else if(At.charAt(0)===K.attrPrefix)Re.setAttribute(At.slice(1),We);else if(We.constructor===Array)for(var ft in We)We.hasOwnProperty(ft)&&(et=We[ft]&&We[ft][K.attrPrefix+"xmlns"]||Re.namespaceURI,et?ut=ze.createElementNS(et,At):ut=ze.createElement(At),Ue(ze,ut,We[ft]||{}),Re.appendChild(ut));else et=(We||{})[K.attrPrefix+"xmlns"]||Re.namespaceURI,et?ut=ze.createElementNS(et,At):ut=ze.createElement(At),We instanceof Object?Ue(ze,ut,We):We!==null&&(We!==!0||!K.trueIsEmpty)&&ut.appendChild(ze.createTextNode(We.toString())),Re.appendChild(ut)}this.xmlToJs=this.build=function(ze,Re,$e,We){var ut=arguments.length>1&&typeof Re=="number"?Re&3:1;return Be(ze,ut,$e||!1,arguments.length>3?We:ut===3)},this.jsToXml=this.unbuild=function(ze,Re,$e,We){var ut=M.document&&M.document.implementation||new M.DOMImplementation,et=ut.createDocument(Re||null,$e||"",We||null);return Ue(et,et.documentElement||et,ze),et},this.stringToXml=function(ze){return ne||(ne=new M.DOMParser),ne.parseFromString(ze,"application/xml")},this.xmlToString=function(ze){return typeof ze.xml<"u"?ze.xml:new M.XMLSerializer().serializeToString(ze)},this.stringToJs=function(ze){var Re=this.stringToXml(ze);return this.xmlToJs(Re)},this.jsToString=this.stringify=function(ze,Re,$e,We){return this.xmlToString(this.jsToXml(ze,Re,$e,We))},this.each=function(ze,Re,$e){ze instanceof Array?ze.forEach(Re,$e):[ze].forEach(Re,$e)}}})})(jxon);var jxonExports=jxon.exports;const JXON=jxonExports;JXON.config({attrPrefix:"@"});function togpx(g,B){if(B=function(ne,Ae){for(const fe in ne)Ae.hasOwnProperty(fe)&&(ne[fe]=Ae[fe]);return ne}({creator:"togpx",metadata:void 0,featureTitle:M,featureDescription:P,featureLink:void 0,featureCoordTimes:K},B||{}),typeof B.featureCoordTimes=="string"){const ne=B.featureCoordTimes;B.featureCoordTimes=function(Ae){return Ae.properties[ne]}}function M(ne){if(!ne)return"";if(typeof ne.tags=="object"){const Ae=M(ne.tags);if(Ae!=="")return Ae}return ne.name?ne.name:ne.ref?ne.ref:ne.id?ne.id:""}function P(ne){if(!ne)return"";if(typeof ne.tags=="object")return P(ne.tags);let Ae="";for(const fe in ne)typeof ne[fe]!="object"&&(Ae+=fe+"="+ne[fe]+`
`);return Ae.substring(0,Ae.length-1)}function K(ne){return ne.properties&&(ne.properties.times||ne.properties.coordTimes)||null}function Y(ne,Ae){B.featureLink&&(ne.link={"@href":B.featureLink(Ae.properties)})}const re={gpx:{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1",metadata:null,wpt:[],trk:[]}};B.creator&&(re.gpx["@creator"]=B.creator),B.metadata?re.gpx.metadata=B.metadata:delete B.metadata;let D;return g.type==="FeatureCollection"?D=g.features:g.type==="Feature"?D=[g]:D=[{type:"Feature",properties:{},geometry:g}],D.forEach(function ne(Ae){let fe,ge,Be;switch(Ae.geometry.type){case"Point":case"MultiPoint":fe=Ae.geometry.coordinates,Ae.geometry.type=="Point"&&(fe=[fe]),fe.forEach(function(Ue){let ze={"@lat":Ue[1],"@lon":Ue[0],name:B.featureTitle(Ae.properties),desc:B.featureDescription(Ae.properties)};Ue[2]!==void 0&&(ze.ele=Ue[2]),Y(ze,Ae),re.gpx.wpt.push(ze)});break;case"LineString":case"MultiLineString":fe=Ae.geometry.coordinates,ge=B.featureCoordTimes(Ae),Ae.geometry.type=="LineString"&&(fe=[fe]),Be={name:B.featureTitle(Ae.properties),desc:B.featureDescription(Ae.properties)},Y(Be,Ae),Be.trkseg=[],fe.forEach(function(Ue){const ze={trkpt:[]};Ue.forEach(function(Re,$e){const We={"@lat":Re[1],"@lon":Re[0]};Re[2]!==void 0&&(We.ele=Re[2]),ge&&ge[$e]&&(We.time=ge[$e]),ze.trkpt.push(We)}),Be.trkseg.push(ze)}),re.gpx.trk.push(Be);break;case"Polygon":case"MultiPolygon":Be={name:B.featureTitle(Ae.properties),desc:B.featureDescription(Ae.properties)},Y(Be,Ae),Be.trkseg=[],fe=Ae.geometry.coordinates,ge=B.featureCoordTimes(Ae),Ae.geometry.type=="Polygon"&&(fe=[fe]),fe.forEach(function(Ue){Ue.forEach(function(ze){const Re={trkpt:[]};let $e=0;ze.forEach(function(We){const ut={"@lat":We[1],"@lon":We[0]};We[2]!==void 0&&(ut.ele=We[2]),ge&&ge[$e]&&(ut.time=ge[$e]),$e++,Re.trkpt.push(ut)}),Be.trkseg.push(Re)})}),re.gpx.trk.push(Be);break;case"GeometryCollection":Ae.geometry.geometries.forEach(function(Ue){const ze={properties:Ae.properties,geometry:Ue};ne(ze)});break;default:console.log("warning: unsupported geometry type: "+Ae.geometry.type)}}),JXON.stringify(re)}var togpx_1=togpx;const togpx$1=getDefaultExportFromCjs(togpx_1);function autorepair(g,B){const M={},P={};return function(){let Y,re;if(B=="xml"){Y=g.match(/<!--[\s\S]*?-->/g)||[];for(const D of Y)re=`<!--${Base64.encode(Math.random().toString())}-->`,g=g.replace(D,re),P[re]=D}else{Y=g.match(/\/\*[\s\S]*?\*\//g)||[];for(const D of Y)re=`/*${Base64.encode(Math.random().toString())}*/`,g=g.replace(D,re),P[re]=D;Y=g.match(/\/\/[^\n]*/g)||[];for(const D of Y)re=`/*${Base64.encode(Math.random().toString())}*/`,g=g.replace(D,re),P[re]=D}}(),M.getQuery=()=>{for(const K in P)g=g.replace(K,P[K]);return g},M.recurse=()=>{if(B=="xml"){const K=g.match(/(\n?[^\S\n]*<print[\s\S]*?(\/>|<\/print>))/g)||[];for(let Y=0;Y<K.length;Y++){const re=K[Y].match(/^\n?(\s*)/)[1],D=$("print",$.parseXML(K[Y])).attr("from");let ne,Ae,fe;D?(ne=` into="${D}"`,Ae=` set="${D}"`,fe=` from="${D}"`):(ne="",Ae="",fe=""),g=g.replace(K[Y],`
${re}<!-- added by auto repair -->
${re}<union${ne}>
${re}  <item${Ae}/>
${re}  <recurse${fe} type="down"/>
${re}</union>
${re}<!-- end of auto repair --><autorepair>${Y}</autorepair>`)}for(let Y=0;Y<K.length;Y++)g=g.replace(`<autorepair>${Y}</autorepair>`,K[Y])}else{const K=g.match(/(\n?[^\S\n]*(\.[^.;]+)?out[^:;"\]]*;)/g)||[];for(let Y=0;Y<K.length;Y++){const re=K[Y].match(/^\n?(\s*)/)[0],D=K[Y].match(/\.([^;.]+?)\s+out/);let ne;D?ne=`(.${D[1]};.${D[1]} >;)->.${D[1]};`:ne="(._;>;);",g=g.replace(K[Y],`${re}/*added by auto repair*/${re}${ne}${re}/*end of auto repair*/<autorepair>${Y}</autorepair>`)}for(let Y=0;Y<K.length;Y++)g=g.replace(`<autorepair>${Y}</autorepair>`,K[Y])}return!0},M.editors=()=>{if(B=="xml"){const K=g.match(/<osm-script([^>]*)>/);if(K){const re=$("osm-script",$.parseXML(`${K[0]}</osm-script>`)).attr("output");if(re&&re!="xml"){const D=K[0].replace(re,"xml");g=g.replace(K[0],`${D}<!-- fixed by auto repair -->`)}}const Y=g.match(/(<print[\s\S]*?(\/>|<\/print>))/g)||[];for(const re of Y){const D=$("print",$.parseXML(re)),ne=D.attr("mode"),Ae=D.attr("geometry");let fe="",ge,Be=!1;if(ne!=="meta"&&(D.attr("mode","meta"),Be=!0),Ae&&Ae!=="skeleton"){D.attr("geometry",null);const Ue=D.attr("from");Ue?fe=`<union into="${Ue}"><item set="${Ue}"/><recurse from="${Ue}" type="down"/></union>`:fe='<union><item/><recurse type="down"/></union>',Be=!0}Be&&(ge=fe+new XMLSerializer().serializeToString(D[0]),ge+="<!-- fixed by auto repair -->",g=g.replace(re,ge))}}else{const K=g.match(/\[\s*out\s*:\s*([^\]\s]+)\s*\]\s*;?/);K&&K[1]!="xml"&&(g=g.replace(/(\[\s*out\s*:\s*)([^\]\s]+)(\s*\]\s*;?)/,"$1xml$3/*fixed by auto repair*/"));const Y=g.match(/(\.([^;.]+?)\s+)?(out[^:;"\]]*;)/g)||[];for(const re of Y){let[D,,ne,Ae]=re.match(/(\.([^;.]+?)\s+)?(out[^:;"\]]*;)/),fe=D,ge;(Ae.match(/\s(body|skel|ids|tags|count)/)||!Ae.match(/\s(meta)/))&&(ge=Ae.replace(/\s(body|skel|ids|tags|count|meta)/g,"").replace(/^out/,"out meta"),fe=fe.replace(Ae,ge),Ae=ge),Ae.match(/\s(center|bb|geom)/)&&(ge=Ae.replace(/\s(center|bb|geom)/g,""),fe=fe.replace(Ae,ge),Ae=ge,ne?fe=`(.${ne};.${ne} >;)->.${ne}; ${fe}`:fe=`(._;>;); ${fe}`),fe!=D&&(g=g.replace(D,`${fe}/*fixed by auto repair*/`))}}return!0},M}autorepair.detect={};autorepair.detect.editors=(g,B)=>{g=g.replace(/{{.*?}}/g,"");const M={};if(B=="xml")try{const P=$.parseXML(`<x>${g}</x>`),K=$("osm-script",P).attr("output");K!==void 0&&K!=="xml"&&(M.output=!0),$("print",P).each((Y,re)=>{$(re).attr("mode")!=="meta"&&(M.meta=!0)}),$("print",P).each((Y,re)=>{$(re).attr("geometry").match(/(center|bounds|full)/)&&(M.geometry=!0)})}catch{}else{g=g.replace(/\/\*[\s\S]*?\*\//g,""),g=g.replace(/\/\/[^\n]*/g,"");const P=g.match(/\[\s*out\s*:\s*([^\]\s]+)\s*\]/);P&&P[1]!="xml"&&(M.output=!0);const K=g.match(/out([^:;]*);/g);$(K).each((Y,re)=>{(re.match(/\s(body|skel|ids|tags)/)||!re.match(/meta/))&&(M.meta=!0)}),$(K).each((Y,re)=>{re.match(/\s(center|bb|geom)/)&&(M.geometry=!0)})}return $.isEmptyObject(M)};var assign=make_assign(),create$1=make_create(),trim$1=make_trim(),Global$5=typeof window<"u"?window:commonjsGlobal,util$6={assign,create:create$1,trim:trim$1,bind:bind$1,slice:slice$1,each:each$7,map,pluck:pluck$1,isList:isList$1,isFunction:isFunction$1,isObject:isObject$1,Global:Global$5};function make_assign(){return Object.assign?Object.assign:function(B,M,P,K){for(var Y=1;Y<arguments.length;Y++)each$7(Object(arguments[Y]),function(re,D){B[D]=re});return B}}function make_create(){if(Object.create)return function(B,M,P,K){var Y=slice$1(arguments,1);return assign.apply(this,[Object.create(B)].concat(Y))};{let g=function(){};return function(M,P,K,Y){var re=slice$1(arguments,1);return g.prototype=M,assign.apply(this,[new g].concat(re))}}}function make_trim(){return String.prototype.trim?function(B){return String.prototype.trim.call(B)}:function(B){return B.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function bind$1(g,B){return function(){return B.apply(g,Array.prototype.slice.call(arguments,0))}}function slice$1(g,B){return Array.prototype.slice.call(g,B||0)}function each$7(g,B){pluck$1(g,function(M,P){return B(M,P),!1})}function map(g,B){var M=isList$1(g)?[]:{};return pluck$1(g,function(P,K){return M[K]=B(P,K),!1}),M}function pluck$1(g,B){if(isList$1(g)){for(var M=0;M<g.length;M++)if(B(g[M],M))return g[M]}else for(var P in g)if(g.hasOwnProperty(P)&&B(g[P],P))return g[P]}function isList$1(g){return g!=null&&typeof g!="function"&&typeof g.length=="number"}function isFunction$1(g){return g&&{}.toString.call(g)==="[object Function]"}function isObject$1(g){return g&&{}.toString.call(g)==="[object Object]"}var util$5=util$6,slice=util$5.slice,pluck=util$5.pluck,each$6=util$5.each,bind=util$5.bind,create=util$5.create,isList=util$5.isList,isFunction=util$5.isFunction,isObject=util$5.isObject,storeEngine={createStore},storeAPI={version:"2.0.12",enabled:!1,get:function(g,B){var M=this.storage.read(this._namespacePrefix+g);return this._deserialize(M,B)},set:function(g,B){return B===void 0?this.remove(g):(this.storage.write(this._namespacePrefix+g,this._serialize(B)),B)},remove:function(g){this.storage.remove(this._namespacePrefix+g)},each:function(g){var B=this;this.storage.each(function(M,P){g.call(B,B._deserialize(M),(P||"").replace(B._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(g){return this._namespacePrefix=="__storejs_"+g+"_"},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(g){this._addPlugin(g)},namespace:function(g){return createStore(this.storage,this.plugins,g)}};function _warn(){var g=typeof console>"u"?null:console;if(g){var B=g.warn?g.warn:g.log;B.apply(g,arguments)}}function createStore(g,B,M){M||(M=""),g&&!isList(g)&&(g=[g]),B&&!isList(B)&&(B=[B]);var P=M?"__storejs_"+M+"_":"",K=M?new RegExp("^"+P):null,Y=/^[a-zA-Z0-9_\-]*$/;if(!Y.test(M))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var re={_namespacePrefix:P,_namespaceRegexp:K,_testStorage:function(ne){try{var Ae="__storejs__test__";ne.write(Ae,Ae);var fe=ne.read(Ae)===Ae;return ne.remove(Ae),fe}catch{return!1}},_assignPluginFnProp:function(ne,Ae){var fe=this[Ae];this[Ae]=function(){var Be=slice(arguments,0),Ue=this;function ze(){if(fe)return each$6(arguments,function($e,We){Be[We]=$e}),fe.apply(Ue,Be)}var Re=[ze].concat(Be);return ne.apply(Ue,Re)}},_serialize:function(ne){return JSON.stringify(ne)},_deserialize:function(ne,Ae){if(!ne)return Ae;var fe="";try{fe=JSON.parse(ne)}catch{fe=ne}return fe!==void 0?fe:Ae},_addStorage:function(ne){this.enabled||this._testStorage(ne)&&(this.storage=ne,this.enabled=!0)},_addPlugin:function(ne){var Ae=this;if(isList(ne)){each$6(ne,function(Be){Ae._addPlugin(Be)});return}var fe=pluck(this.plugins,function(Be){return ne===Be});if(!fe){if(this.plugins.push(ne),!isFunction(ne))throw new Error("Plugins must be function values that return objects");var ge=ne.call(this);if(!isObject(ge))throw new Error("Plugins must return an object of function properties");each$6(ge,function(Be,Ue){if(!isFunction(Be))throw new Error("Bad plugin property: "+Ue+" from plugin "+ne.name+". Plugins should only return functions.");Ae._assignPluginFnProp(Be,Ue)})}},addStorage:function(ne){_warn("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(ne)}},D=create(re,storeAPI,{plugins:[]});return D.raw={},each$6(D,function(ne,Ae){isFunction(ne)&&(D.raw[Ae]=bind(D,ne))}),each$6(g,function(ne){D._addStorage(ne)}),each$6(B,function(ne){D._addPlugin(ne)}),D}var util$4=util$6,Global$4=util$4.Global,localStorage_1={name:"localStorage",read:read$5,write:write$5,each:each$5,remove:remove$5,clearAll:clearAll$5};function localStorage$1(){return Global$4.localStorage}function read$5(g){return localStorage$1().getItem(g)}function write$5(g,B){return localStorage$1().setItem(g,B)}function each$5(g){for(var B=localStorage$1().length-1;B>=0;B--){var M=localStorage$1().key(B);g(read$5(M),M)}}function remove$5(g){return localStorage$1().removeItem(g)}function clearAll$5(){return localStorage$1().clear()}var util$3=util$6,Global$3=util$3.Global,oldFFGlobalStorage={name:"oldFF-globalStorage",read:read$4,write:write$4,each:each$4,remove:remove$4,clearAll:clearAll$4},globalStorage=Global$3.globalStorage;function read$4(g){return globalStorage[g]}function write$4(g,B){globalStorage[g]=B}function each$4(g){for(var B=globalStorage.length-1;B>=0;B--){var M=globalStorage.key(B);g(globalStorage[M],M)}}function remove$4(g){return globalStorage.removeItem(g)}function clearAll$4(){each$4(function(g,B){delete globalStorage[g]})}var util$2=util$6,Global$2=util$2.Global,oldIEUserDataStorage={name:"oldIE-userDataStorage",write:write$3,read:read$3,each:each$3,remove:remove$3,clearAll:clearAll$3},storageName="storejs",doc$1=Global$2.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$2.navigator?Global$2.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function write$3(g,B){if(!disable){var M=fixKey(g);_withStorageEl(function(P){P.setAttribute(M,B),P.save(storageName)})}}function read$3(g){if(!disable){var B=fixKey(g),M=null;return _withStorageEl(function(P){M=P.getAttribute(B)}),M}}function each$3(g){_withStorageEl(function(B){for(var M=B.XMLDocument.documentElement.attributes,P=M.length-1;P>=0;P--){var K=M[P];g(B.getAttribute(K.name),K.name)}})}function remove$3(g){var B=fixKey(g);_withStorageEl(function(M){M.removeAttribute(B),M.save(storageName)})}function clearAll$3(){_withStorageEl(function(g){var B=g.XMLDocument.documentElement.attributes;g.load(storageName);for(var M=B.length-1;M>=0;M--)g.removeAttribute(B[M].name);g.save(storageName)})}var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function fixKey(g){return g.replace(/^\d/,"___$&").replace(forbiddenCharsRegex,"___")}function _makeIEStorageElFunction(){if(!doc$1||!doc$1.documentElement||!doc$1.documentElement.addBehavior)return null;var g="script",B,M,P;try{M=new ActiveXObject("htmlfile"),M.open(),M.write("<"+g+">document.w=window</"+g+'><iframe src="/favicon.ico"></iframe>'),M.close(),B=M.w.frames[0].document,P=B.createElement("div")}catch{P=doc$1.createElement("div"),B=doc$1.body}return function(K){var Y=[].slice.call(arguments,0);Y.unshift(P),B.appendChild(P),P.addBehavior("#default#userData"),P.load(storageName),K.apply(this,Y),B.removeChild(P)}}var util$1=util$6,Global$1=util$1.Global,trim=util$1.trim,cookieStorage={name:"cookieStorage",read:read$2,write:write$2,each:each$2,remove:remove$2,clearAll:clearAll$2},doc=Global$1.document;function read$2(g){if(!g||!_has(g))return null;var B="(?:^|.*;\\s*)"+escape(g).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc.cookie.replace(new RegExp(B),"$1"))}function each$2(g){for(var B=doc.cookie.split(/; ?/g),M=B.length-1;M>=0;M--)if(trim(B[M])){var P=B[M].split("="),K=unescape(P[0]),Y=unescape(P[1]);g(Y,K)}}function write$2(g,B){g&&(doc.cookie=escape(g)+"="+escape(B)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function remove$2(g){!g||!_has(g)||(doc.cookie=escape(g)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function clearAll$2(){each$2(function(g,B){remove$2(B)})}function _has(g){return new RegExp("(?:^|;\\s*)"+escape(g).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc.cookie)}var util=util$6,Global=util.Global,sessionStorage_1={name:"sessionStorage",read:read$1,write:write$1,each:each$1,remove:remove$1,clearAll:clearAll$1};function sessionStorage(){return Global.sessionStorage}function read$1(g){return sessionStorage().getItem(g)}function write$1(g,B){return sessionStorage().setItem(g,B)}function each$1(g){for(var B=sessionStorage().length-1;B>=0;B--){var M=sessionStorage().key(B);g(read$1(M),M)}}function remove$1(g){return sessionStorage().removeItem(g)}function clearAll$1(){return sessionStorage().clear()}var memoryStorage_1={name:"memoryStorage",read,write,each,remove,clearAll},memoryStorage={};function read(g){return memoryStorage[g]}function write(g,B){memoryStorage[g]=B}function each(g){for(var B in memoryStorage)memoryStorage.hasOwnProperty(B)&&g(memoryStorage[B],B)}function remove(g){delete memoryStorage[g]}function clearAll(g){memoryStorage={}}var all=[localStorage_1,oldFFGlobalStorage,oldIEUserDataStorage,cookieStorage,sessionStorage_1,memoryStorage_1],json2$1={},hasRequiredJson2;function requireJson2(){return hasRequiredJson2||(hasRequiredJson2=1,typeof JSON!="object"&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(g){return g<10?"0"+g:g}function this_value(){return this.valueOf()}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;function quote(g){return rx_escapable.lastIndex=0,rx_escapable.test(g)?'"'+g.replace(rx_escapable,function(B){var M=meta[B];return typeof M=="string"?M:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function str(g,B){var M,P,K,Y,re=gap,D,ne=B[g];switch(ne&&typeof ne=="object"&&typeof ne.toJSON=="function"&&(ne=ne.toJSON(g)),typeof rep=="function"&&(ne=rep.call(B,g,ne)),typeof ne){case"string":return quote(ne);case"number":return isFinite(ne)?String(ne):"null";case"boolean":case"null":return String(ne);case"object":if(!ne)return"null";if(gap+=indent,D=[],Object.prototype.toString.apply(ne)==="[object Array]"){for(Y=ne.length,M=0;M<Y;M+=1)D[M]=str(M,ne)||"null";return K=D.length===0?"[]":gap?`[
`+gap+D.join(`,
`+gap)+`
`+re+"]":"["+D.join(",")+"]",gap=re,K}if(rep&&typeof rep=="object")for(Y=rep.length,M=0;M<Y;M+=1)typeof rep[M]=="string"&&(P=rep[M],K=str(P,ne),K&&D.push(quote(P)+(gap?": ":":")+K));else for(P in ne)Object.prototype.hasOwnProperty.call(ne,P)&&(K=str(P,ne),K&&D.push(quote(P)+(gap?": ":":")+K));return K=D.length===0?"{}":gap?`{
`+gap+D.join(`,
`+gap)+`
`+re+"}":"{"+D.join(",")+"}",gap=re,K}}typeof JSON.stringify!="function"&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(g,B,M){var P;if(gap="",indent="",typeof M=="number")for(P=0;P<M;P+=1)indent+=" ";else typeof M=="string"&&(indent=M);if(rep=B,B&&typeof B!="function"&&(typeof B!="object"||typeof B.length!="number"))throw new Error("JSON.stringify");return str("",{"":g})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){var j;function walk(g,B){var M,P,K=g[B];if(K&&typeof K=="object")for(M in K)Object.prototype.hasOwnProperty.call(K,M)&&(P=walk(K,M),P!==void 0?K[M]=P:delete K[M]);return reviver.call(g,B,K)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),json2$1}var json2=json2Plugin;function json2Plugin(){return requireJson2(),{}}var engine=storeEngine,storages=all,plugins=[json2],store_legacy=engine.createStore(storages,plugins);const store=getDefaultExportFromCjs(store_legacy);function osmAuth(g){var B={};B.authenticated=function(){return!!K("oauth2_access_token")},B.logout=function(){return K("oauth2_access_token",""),K("oauth_token",""),K("oauth_token_secret",""),K("oauth_request_token_secret",""),B},B.authenticate=function(re){if(B.authenticated()){re(null,B);return}B.logout(),_generatePkceChallenge(function(D){M(D,re)})},B.authenticateAsync=function(){return B.authenticated()?Promise.resolve(B):(B.logout(),new Promise((re,D)=>{var ne=(Ae,fe)=>{Ae?D(new Error(Ae)):re(fe)};_generatePkceChallenge(Ae=>M(Ae,ne))}))};function M(re,D){var ne=generateState(),Ae=g.url+"/oauth2/authorize?"+utilQsString({client_id:g.client_id,redirect_uri:g.redirect_uri,response_type:"code",scope:g.scope,state:ne,code_challenge:re.code_challenge,code_challenge_method:re.code_challenge_method});if(g.singlepage){if(!store.enabled){var fe=new Error("local storage unavailable, but require in singlepage mode");fe.status="pkce-localstorage-unavailable",D(fe);return}var ge=utilStringQs(window.location.search.slice(1));ge.code?B.bootstrapToken(ge.code,D):(K("oauth2_state",ne),K("oauth2_pkce_code_verifier",re.code_verifier),window.location=Ae)}else{var Be=600,Ue=550,ze=[["width",Be],["height",Ue],["left",window.screen.width/2-Be/2],["top",window.screen.height/2-Ue/2]].map(function(We){return We.join("=")}).join(","),Re=window.open("about:blank","oauth_window",ze);B.popupWindow=Re,Re.location=Ae,Re||(fe=new Error("Popup was blocked"),fe.status="popup-blocked",D(fe))}window.authComplete=function(We){var ut=utilStringQs(We.split("?")[1]);if(ut.state!==ne){fe=new Error("Invalid state"),fe.status="invalid-state",D(fe);return}P(ut.code,re.code_verifier,$e),delete window.authComplete};function $e(We,ut){if(g.done(),We){D(We);return}var et=JSON.parse(ut.response);K("oauth2_access_token",et.access_token),D(null,B)}}function P(re,D,ne){var Ae=g.url+"/oauth2/token?"+utilQsString({client_id:g.client_id,redirect_uri:g.redirect_uri,grant_type:"authorization_code",code:re,code_verifier:D});B.rawxhr("POST",Ae,null,null,null,ne),g.loading()}B.bringPopupWindowToFront=function(){var re=!1;try{B.popupWindow&&!B.popupWindow.closed&&(B.popupWindow.focus(),re=!0)}catch{}return re},B.bootstrapToken=function(re,D){var ne=K("oauth2_state");K("oauth2_state","");var Ae=utilStringQs(window.location.search.slice(1));if(Ae.state!==ne){var fe=new Error("Invalid state");fe.status="invalid-state",D(fe);return}var ge=K("oauth2_pkce_code_verifier");K("oauth2_pkce_code_verifier",""),P(re,ge,Be);function Be(Ue,ze){if(g.done(),Ue){D(Ue);return}var Re=JSON.parse(ze.response);K("oauth2_access_token",Re.access_token),D(null,B)}},B.fetch=function(re,D){if(B.authenticated())return ne();return g.auto?B.authenticateAsync().then(ne):Promise.reject(new Error("not authenticated"));function ne(){return D=D||{},D.headers||(D.headers={"Content-Type":"application/x-www-form-urlencoded"}),D.headers.Authorization="Bearer "+K("oauth2_access_token"),fetch(re,D)}},B.xhr=function(re,D){if(B.authenticated())return ne();if(g.auto){B.authenticate(ne);return}else{D("not authenticated",null);return}function ne(){var fe=re.prefix!==!1?g.url+re.path:re.path;return B.rawxhr(re.method,fe,K("oauth2_access_token"),re.content,re.headers,Ae)}function Ae(fe,ge){fe?D(fe):ge.responseXML?D(fe,ge.responseXML):D(fe,ge.response)}},B.rawxhr=function(re,D,ne,Ae,fe,ge){fe=fe||{"Content-Type":"application/x-www-form-urlencoded"},ne&&(fe.Authorization="Bearer "+ne);var Be=new XMLHttpRequest;Be.onreadystatechange=function(){Be.readyState===4&&Be.status!==0&&(/^20\d$/.test(Be.status)?ge(null,Be):ge(Be,null))},Be.onerror=function(ze){ge(ze,null)},Be.open(re,D,!0);for(var Ue in fe)Be.setRequestHeader(Ue,fe[Ue]);return Be.send(Ae),Be},B.preauth=function(re){return re&&re.access_token&&K("oauth2_access_token",re.access_token),B},B.options=function(re){return arguments.length?(g=re,g.url=g.url||"https://www.openstreetmap.org",g.auto=g.auto||!1,g.singlepage=g.singlepage||!1,g.loading=g.loading||function(){},g.done=g.done||function(){},B.preauth(g)):g};var K;if(store.enabled)K=function(re,D){if(arguments.length===1)return store.get(g.url+re);if(arguments.length===2)return store.set(g.url+re,D)};else{var Y={};K=function(re,D){if(arguments.length===1)return Y[g.url+re];if(arguments.length===2)return Y[g.url+re]=D}}return B.options(g),B}function utilQsString(g){return Object.keys(g).filter(function(B){return g[B]!==void 0}).sort().map(function(B){return encodeURIComponent(B)+"="+encodeURIComponent(g[B])}).join("&")}function utilStringQs(g){for(var B=0;B<g.length&&(g[B]==="?"||g[B]==="#");)B++;return g=g.slice(B),g.split("&").reduce(function(M,P){var K=P.split("=");return K.length===2&&(M[K[0]]=decodeURIComponent(K[1])),M},{})}function supportsWebCryptoAPI(){return window&&window.crypto&&window.crypto.getRandomValues&&window.crypto.subtle&&window.crypto.subtle.digest}function _generatePkceChallenge(g){var B;if(supportsWebCryptoAPI()){var M=window.crypto.getRandomValues(new Uint8Array(32));B=base64(M.buffer);var P=Uint8Array.from(Array.from(B).map(function(re){return re.charCodeAt(0)}));window.crypto.subtle.digest("SHA-256",P).then(function(re){var D=base64(re);g({code_challenge:D,code_verifier:B,code_challenge_method:"S256"})})}else{var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";B="";for(var Y=0;Y<64;Y++)B+=K[Math.floor(Math.random()*K.length)];g({code_verifier:B,code_challenge:B,code_challenge_method:"plain"})}}function generateState(){var g;if(supportsWebCryptoAPI()){var B=window.crypto.getRandomValues(new Uint8Array(32));g=base64(B.buffer)}else{var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";g="";for(var P=0;P<64;P++)g+=M[Math.floor(Math.random()*M.length)]}return g}function base64(g){return btoa(String.fromCharCode.apply(null,new Uint8Array(g))).replace(/\//g,"_").replace(/\+/g,"-").replace(/[=]/g,"")}const enabled=configs.osmAuth&&configs.osmAuth.client_id;configs.osmAuth.redirect_uri||(configs.osmAuth.redirect_uri=`${window.location.origin}${window.location.pathname}land.html`);configs.osmAuth.scope="read_prefs write_prefs";let auth;enabled&&(auth=osmAuth(configs.osmAuth));const sync={enabled,load(g){auth.authenticated()?loadQueries(g):auth.authenticate(B=>{if(B)return g(B);loadQueries(g)})},save(g,B){auth.authenticated()?saveQuery(g,B):auth.authenticate(M=>{if(M)return B(M);saveQuery(g,B)})},delete(g,B){if(!auth.authenticated())return B(new Error("must be logged in to delete a synced query"));g={name:g,deleteMe:!0},saveQuery(g,B)},logout(){auth.authenticated()&&auth.logout()},authenticated(){return enabled&&auth.authenticated()}};function loadQueries(g){auth.xhr({method:"GET",path:"/api/0.6/user/preferences"},(B,M)=>{if(B)return g(B);let P=0,K;(K=M.querySelector(`preference[k="${configs.settingNamespace}_query-count"]`))&&(P=+K.getAttribute("v"));const Y=[];for(let re=0;re<P;re++){const D=M.querySelector(`preference[k="${configs.settingNamespace}_query_${re}_0"]`);if(!D)continue;const ne=D.getAttribute("v").split("&"),Ae=+ne[0].slice(2),fe=ne[1].slice(2);let ge=ne[2].slice(2);for(let Be=1;Be<Ae;Be++)ge+=M.querySelector(`preference[k="${configs.settingNamespace}_query_${re}_${Be}"]`).getAttribute("v");Y.push({name:fe,query:ge})}g(null,Y,M)})}function saveQuery(g,B){loadQueries((M,P,K)=>{if(M)return B(M);const Y=K.querySelector("preferences"),re=Y.querySelectorAll(`preference[k^="${configs.settingNamespace}_query"]`);for(const Ae of re)Ae.remove();let D=!0;P.forEach((Ae,fe)=>{Ae.name==g.name&&(Ae.query=g.query,D=fe)}),D===!0?P.push(g):g.deleteMe&&P.splice(D,1);const ne=K.createElement("preference");ne.setAttribute("k",`${configs.settingNamespace}_query-count`),ne.setAttribute("v",P.length),Y.appendChild(ne);for(let Ae=0;Ae<P.length;Ae++){const fe=P[Ae];if(fe.name.length>200)return B(new Error("query name too long to be saved on osm.org"));const ge=Math.ceil((fe.query.length+fe.name.length+8)/255);if(ge>9)return B(new Error("query too long to be saved on osm.org"));let Be=`p=${ge}`;Be+=`&n=${fe.name}`,Be+=`&q=${fe.query}`,Be=Be.match(/.{1,255}/g);for(let Ue=0;Ue<ge;Ue++){const ze=K.createElement("preference");ze.setAttribute("k",`${configs.settingNamespace}_query_${Ae}_${Ue}`),ze.setAttribute("v",Be[Ue]),Y.appendChild(ze)}}auth.xhr({method:"PUT",path:"/api/0.6/user/preferences",headers:{"Content-Type":"text/xml"},content:K.firstChild.outerHTML},Ae=>{if(Ae)return B(Ae);B(null,P)})})}const cache={};class nominatim{static request(B,M){$.ajax(`https://nominatim.openstreetmap.org/search?X-Requested-With=${configs.appname}`,{data:{format:"json",q:B},success(P){if(typeof P=="string")try{P=JSON.parse(P)}catch{}cache[B]=P,M(void 0,P)},error(){const P="An error occurred while contacting the osm search server nominatim.openstreetmap.org :(";console.log(P),M(P,null)}})}static get(B,M){return cache[B]===void 0?this.request(B,M):M(void 0,cache[B]),this}static getBest(B,M,P){return P||(P=M,M=null),this.get(B,(K,Y)=>{if(K){P(K,null);return}M&&(Y=Y.filter(M)),Y.length===0?P("No result found",null):P(K,Y[0])}),this}}function map2bbox(g){let B;ide.map.bboxfilter&&ide.map.bboxfilter.isEnabled()?B=ide.map.bboxfilter.getBounds():B=ide.map.getBounds();const M=Math.min(Math.max(B.getSouthWest().lat,-90),90),P=Math.min(Math.max(B.getNorthEast().lat,-90),90),K=Math.min(Math.max(B.getSouthWest().lng,-180),180),Y=Math.min(Math.max(B.getNorthEast().lng,-180),180);if(g=="OverpassQL")return`${M},${K},${P},${Y}`;if(g=="xml")return`s="${M}" w="${K}" n="${P}" e="${Y}"`}function map2coord(g){const B=ide.map.getCenter();if(g=="OverpassQL")return`${B.lat},${B.lng}`;if(g=="xml")return`lat="${B.lat}" lon="${B.lng}"`}function relativeTime(g,B){const M=Date.now();if(g==""&&(g="0 seconds"),g=g.toLowerCase().match(/(-?[0-9]+) ?(seconds?|minutes?|hours?|days?|weeks?|months?|years?)?/),g===null){B("");return}const P=parseInt(g[1]);let K;switch(g[2]){case"second":case"seconds":K=1;break;case"minute":case"minutes":K=60;break;case"hour":case"hours":K=3600;break;case"day":case"days":default:K=86400;break;case"week":case"weeks":K=604800;break;case"month":case"months":K=2628e3;break;case"year":case"years":K=31536e3;break}const Y=M-P*K*1e3;B(new Date(Y).toISOString())}function geocodeId(g,B){const M=ide.getQueryLang();function P(K){return K.osm_type&&K.osm_id}nominatim.getBest(g,P,(K,Y)=>{if(K)return ide.onNominatimError(g,"Id");M=="OverpassQL"?Y=`${Y.osm_type}(${Y.osm_id})`:M=="xml"&&(Y=`type="${Y.osm_type}" ref="${Y.osm_id}"`),B(Y)})}function geocodeArea(g,B){const M=ide.getQueryLang();function P(K){return K.osm_type&&K.osm_id&&K.osm_type!=="node"}nominatim.getBest(g,P,(K,Y)=>{if(K)return ide.onNominatimError(g,"Area");let re=1*Y.osm_id;if(Y.osm_type=="way"&&(re+=24e8),Y.osm_type=="relation"&&(re+=36e8),M=="OverpassQL")return Y.osm_type==="way"&&(re+=`,${Y.osm_id}`),B(`area(id:${re})`);if(M=="xml")return Y.osm_type==="way"&&(re+=`" ref_1="${Y.osm_id}`),B(`type="area" ref="${re}"`)})}function geocodeBbox(g,B){const M=ide.getQueryLang();nominatim.getBest(g,(P,K)=>{if(P)return ide.onNominatimError(g,"Bbox");const Y=Math.min(Math.max(K.boundingbox[0],-90),90),re=Math.min(Math.max(K.boundingbox[1],-90),90),D=Math.min(Math.max(K.boundingbox[2],-180),180),ne=Math.min(Math.max(K.boundingbox[3],-180),180);M=="OverpassQL"?K=`${Y},${D},${re},${ne}`:M=="xml"&&(K=`s="${Y}" w="${D}" n="${re}" e="${ne}"`),B(K)})}function geocodeCoords(g,B){const M=ide.getQueryLang();nominatim.getBest(g,(P,K)=>{if(P)return ide.onNominatimError(g,"Coords");M=="OverpassQL"?K=`${K.lat},${K.lon}`:M=="xml"&&(K=`lat="${K.lat}" lon="${K.lon}"`),B(K)})}function shortcuts(){const g=ide.getQueryLang();return{bbox:map2bbox(g),center:map2coord(g),__bbox__global_bbox_xml__ezs4K8__:map2bbox("OverpassQL"),date:relativeTime,geocodeId,geocodeArea,geocodeBbox,geocodeCoords,nominatimId:g=="xml"?geocodeId:(B,M)=>geocodeId(B,P=>M(`${P};`)),nominatimArea:g=="xml"?geocodeArea:(B,M)=>geocodeArea(B,P=>M(`${P};`)),nominatimBbox:geocodeBbox,nominatimCoords:geocodeCoords}}var maplibreGl={exports:{}};(function(g,B){(function(M,P){g.exports=P()})(commonjsGlobal,function(){var M,P,K;function Y(D,ne){if(!M)M=ne;else if(!P)P=ne;else{var Ae="var sharedChunk = {}; ("+M+")(sharedChunk); ("+P+")(sharedChunk);",fe={};M(fe),K=ne(fe),typeof window<"u"&&(K.workerUrl=window.URL.createObjectURL(new Blob([Ae],{type:"text/javascript"})))}}Y(["exports"],function(D){function ne(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var Ae=fe;function fe(C,b){this.x=C,this.y=b}fe.prototype={clone:function(){return new fe(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,b){return this.clone()._rotateAround(C,b)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var b=C.x-this.x,S=C.y-this.y;return b*b+S*S},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,b){return Math.atan2(this.x*b-this.y*C,this.x*C+this.y*b)},_matMult:function(C){var b=C[2]*this.x+C[3]*this.y;return this.x=C[0]*this.x+C[1]*this.y,this.y=b,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var b=Math.cos(C),S=Math.sin(C),H=S*this.x+b*this.y;return this.x=b*this.x-S*this.y,this.y=H,this},_rotateAround:function(C,b){var S=Math.cos(C),H=Math.sin(C),q=b.y+H*(this.x-b.x)+S*(this.y-b.y);return this.x=b.x+S*(this.x-b.x)-H*(this.y-b.y),this.y=q,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},fe.convert=function(C){return C instanceof fe?C:Array.isArray(C)?new fe(C[0],C[1]):C};var ge=ne(Ae),Be=Ue;function Ue(C,b,S,H){this.cx=3*C,this.bx=3*(S-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(H-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=b,this.p2x=S,this.p2y=H}Ue.prototype={sampleCurveX:function(C){return((this.ax*C+this.bx)*C+this.cx)*C},sampleCurveY:function(C){return((this.ay*C+this.by)*C+this.cy)*C},sampleCurveDerivativeX:function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},solveCurveX:function(C,b){if(b===void 0&&(b=1e-6),C<0)return 0;if(C>1)return 1;for(var S=C,H=0;H<8;H++){var q=this.sampleCurveX(S)-C;if(Math.abs(q)<b)return S;var ee=this.sampleCurveDerivativeX(S);if(Math.abs(ee)<1e-6)break;S-=q/ee}var ie=0,ae=1;for(S=C,H=0;H<20&&(q=this.sampleCurveX(S),!(Math.abs(q-C)<b));H++)C>q?ie=S:ae=S,S=.5*(ae-ie)+ie;return S},solve:function(C,b){return this.sampleCurveY(this.solveCurveX(C,b))}};var ze=ne(Be);function Re(C,b,S,H){const q=new ze(C,b,S,H);return function(ee){return q.solve(ee)}}const $e=Re(.25,.1,.25,1);function We(C,b,S){return Math.min(S,Math.max(b,C))}function ut(C,b,S){const H=S-b,q=((C-b)%H+H)%H+b;return q===b?S:q}function et(C,...b){for(const S of b)for(const H in S)C[H]=S[H];return C}let At=1;function nt(C,b,S){const H={};for(const q in C)H[q]=b.call(S||this,C[q],q,C);return H}function ft(C,b,S){const H={};for(const q in C)b.call(S||this,C[q],q,C)&&(H[q]=C[q]);return H}function Tt(C){return Array.isArray(C)?C.map(Tt):typeof C=="object"&&C?nt(C,Tt):C}const qt={};function Vt(C){qt[C]||(typeof console<"u"&&console.warn(C),qt[C]=!0)}function vt(C,b,S){return(S.y-C.y)*(b.x-C.x)>(b.y-C.y)*(S.x-C.x)}function Ut(C){let b=0;for(let S,H,q=0,ee=C.length,ie=ee-1;q<ee;ie=q++)S=C[q],H=C[ie],b+=(H.x-S.x)*(S.y+H.y);return b}function Pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Yt=null;function Ai(C){if(Yt==null){const b=C.navigator?C.navigator.userAgent:null;Yt=!!C.safari||!(!b||!(/\b(iPad|iPhone|iPod)\b/.test(b)||b.match("Safari")&&!b.match("Chrome")))}return Yt}function Ri(C){return typeof ImageBitmap<"u"&&C instanceof ImageBitmap}const Ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Li,Yi;const vi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(C){const b=requestAnimationFrame(C);return{cancel:()=>cancelAnimationFrame(b)}},getImageData(C,b=0){return this.getImageCanvasContext(C).getImageData(-b,-b,C.width+2*b,C.height+2*b)},getImageCanvasContext(C){const b=window.document.createElement("canvas"),S=b.getContext("2d",{willReadFrequently:!0});if(!S)throw new Error("failed to create canvas 2d context");return b.width=C.width,b.height=C.height,S.drawImage(C,0,0,C.width,C.height),S},resolveURL:C=>(Li||(Li=document.createElement("a")),Li.href=C,Li.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Yi==null&&(Yi=matchMedia("(prefers-reduced-motion: reduce)")),Yi.matches)}},d={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class w extends Error{constructor(b,S,H,q){super(`AJAXError: ${S} (${b}): ${H}`),this.status=b,this.statusText=S,this.url=H,this.body=q}}const I=Pt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,k=C=>d.REGISTERED_PROTOCOLS[C.substring(0,C.indexOf("://"))];function R(C,b){const S=new AbortController,H=new Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,cache:C.cache,referrer:I(),signal:S.signal});let q=!1,ee=!1;return C.type==="json"&&H.headers.set("Accept","application/json"),ee||fetch(H).then(ie=>ie.ok?(ae=>{(C.type==="arrayBuffer"||C.type==="image"?ae.arrayBuffer():C.type==="json"?ae.json():ae.text()).then(de=>{ee||(q=!0,b(null,de,ae.headers.get("Cache-Control"),ae.headers.get("Expires")))}).catch(de=>{ee||b(new Error(de.message))})})(ie):ie.blob().then(ae=>b(new w(ie.status,ie.statusText,C.url,ae)))).catch(ie=>{ie.code!==20&&b(new Error(ie.message))}),{cancel:()=>{ee=!0,q||S.abort()}}}const W=function(C,b){if(/:\/\//.test(C.url)&&!/^https?:|^file:/.test(C.url)){if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",C,b);if(!Pt())return(k(C.url)||R)(C,b)}if(!(/^file:/.test(S=C.url)||/^file:/.test(I())&&!/^\w+:/.test(S))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return R(C,b);if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",C,b,void 0,!0)}var S;return function(H,q){const ee=new XMLHttpRequest;ee.open(H.method||"GET",H.url,!0),H.type!=="arrayBuffer"&&H.type!=="image"||(ee.responseType="arraybuffer");for(const ie in H.headers)ee.setRequestHeader(ie,H.headers[ie]);return H.type==="json"&&(ee.responseType="text",ee.setRequestHeader("Accept","application/json")),ee.withCredentials=H.credentials==="include",ee.onerror=()=>{q(new Error(ee.statusText))},ee.onload=()=>{if((ee.status>=200&&ee.status<300||ee.status===0)&&ee.response!==null){let ie=ee.response;if(H.type==="json")try{ie=JSON.parse(ee.response)}catch(ae){return q(ae)}q(null,ie,ee.getResponseHeader("Cache-Control"),ee.getResponseHeader("Expires"))}else{const ie=new Blob([ee.response],{type:ee.getResponseHeader("Content-Type")});q(new w(ee.status,ee.statusText,H.url,ie))}},ee.send(H.body),{cancel:()=>ee.abort()}}(C,b)},se=function(C,b){return W(et(C,{type:"arrayBuffer"}),b)};function oe(C){if(!C||C.indexOf("://")<=0||C.indexOf("data:image/")===0||C.indexOf("blob:")===0)return!0;const b=new URL(C),S=window.location;return b.protocol===S.protocol&&b.host===S.host}function ue(C,b,S){S[C]&&S[C].indexOf(b)!==-1||(S[C]=S[C]||[],S[C].push(b))}function we(C,b,S){if(S&&S[C]){const H=S[C].indexOf(b);H!==-1&&S[C].splice(H,1)}}class Te{constructor(b,S={}){et(this,S),this.type=b}}class Ve extends Te{constructor(b,S={}){super("error",et({error:b},S))}}class De{on(b,S){return this._listeners=this._listeners||{},ue(b,S,this._listeners),this}off(b,S){return we(b,S,this._listeners),we(b,S,this._oneTimeListeners),this}once(b,S){return S?(this._oneTimeListeners=this._oneTimeListeners||{},ue(b,S,this._oneTimeListeners),this):new Promise(H=>this.once(b,H))}fire(b,S){typeof b=="string"&&(b=new Te(b,S||{}));const H=b.type;if(this.listens(H)){b.target=this;const q=this._listeners&&this._listeners[H]?this._listeners[H].slice():[];for(const ae of q)ae.call(this,b);const ee=this._oneTimeListeners&&this._oneTimeListeners[H]?this._oneTimeListeners[H].slice():[];for(const ae of ee)we(H,ae,this._oneTimeListeners),ae.call(this,b);const ie=this._eventedParent;ie&&(et(b,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ie.fire(b))}else b instanceof Ve&&console.error(b.error);return this}listens(b){return this._listeners&&this._listeners[b]&&this._listeners[b].length>0||this._oneTimeListeners&&this._oneTimeListeners[b]&&this._oneTimeListeners[b].length>0||this._eventedParent&&this._eventedParent.listens(b)}setEventedParent(b,S){return this._eventedParent=b,this._eventedParentData=S,this}}var me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ke=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qe(C,b){const S={};for(const H in C)H!=="ref"&&(S[H]=C[H]);return ke.forEach(H=>{H in b&&(S[H]=b[H])}),S}function lt(C,b){if(Array.isArray(C)){if(!Array.isArray(b)||C.length!==b.length)return!1;for(let S=0;S<C.length;S++)if(!lt(C[S],b[S]))return!1;return!0}if(typeof C=="object"&&C!==null&&b!==null){if(typeof b!="object"||Object.keys(C).length!==Object.keys(b).length)return!1;for(const S in C)if(!lt(C[S],b[S]))return!1;return!0}return C===b}const pt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ft(C,b,S){S.push({command:pt.addSource,args:[C,b[C]]})}function zt(C,b,S){b.push({command:pt.removeSource,args:[C]}),S[C]=!0}function Nt(C,b,S,H){zt(C,S,H),Ft(C,b,S)}function Mt(C,b,S){let H;for(H in C[S])if(Object.prototype.hasOwnProperty.call(C[S],H)&&H!=="data"&&!lt(C[S][H],b[S][H]))return!1;for(H in b[S])if(Object.prototype.hasOwnProperty.call(b[S],H)&&H!=="data"&&!lt(C[S][H],b[S][H]))return!1;return!0}function $t(C,b,S,H,q,ee){let ie;for(ie in b=b||{},C=C||{})Object.prototype.hasOwnProperty.call(C,ie)&&(lt(C[ie],b[ie])||S.push({command:ee,args:[H,ie,b[ie],q]}));for(ie in b)Object.prototype.hasOwnProperty.call(b,ie)&&!Object.prototype.hasOwnProperty.call(C,ie)&&(lt(C[ie],b[ie])||S.push({command:ee,args:[H,ie,b[ie],q]}))}function ri(C){return C.id}function ci(C,b){return C[b.id]=b,C}class bt{constructor(b,S,H,q){this.message=(b?`${b}: `:"")+H,q&&(this.identifier=q),S!=null&&S.__line__&&(this.line=S.__line__)}}function di(C,...b){for(const S of b)for(const H in S)C[H]=S[H];return C}class ii extends Error{constructor(b,S){super(S),this.message=S,this.key=b}}class Hi{constructor(b,S=[]){this.parent=b,this.bindings={};for(const[H,q]of S)this.bindings[H]=q}concat(b){return new Hi(this,b)}get(b){if(this.bindings[b])return this.bindings[b];if(this.parent)return this.parent.get(b);throw new Error(`${b} not found in scope.`)}has(b){return!!this.bindings[b]||!!this.parent&&this.parent.has(b)}}const Vi={kind:"null"},Ot={kind:"number"},_i={kind:"string"},Ti={kind:"boolean"},Wi={kind:"color"},Zt={kind:"object"},mi={kind:"value"},wi={kind:"collator"},$i={kind:"formatted"},tr={kind:"padding"},Ar={kind:"resolvedImage"},Tr={kind:"variableAnchorOffsetCollection"};function ji(C,b){return{kind:"array",itemType:C,N:b}}function Si(C){if(C.kind==="array"){const b=Si(C.itemType);return typeof C.N=="number"?`array<${b}, ${C.N}>`:C.itemType.kind==="value"?"array":`array<${b}>`}return C.kind}const Qs=[Vi,Ot,_i,Ti,Wi,$i,Zt,ji(mi),tr,Ar,Tr];function $r(C,b){if(b.kind==="error")return null;if(C.kind==="array"){if(b.kind==="array"&&(b.N===0&&b.itemType.kind==="value"||!$r(C.itemType,b.itemType))&&(typeof C.N!="number"||C.N===b.N))return null}else{if(C.kind===b.kind)return null;if(C.kind==="value"){for(const S of Qs)if(!$r(S,b))return null}}return`Expected ${Si(C)} but found ${Si(b)} instead.`}function it(C,b){return b.some(S=>S.kind===C.kind)}function Se(C,b){return b.some(S=>S==="null"?C===null:S==="array"?Array.isArray(C):S==="object"?C&&!Array.isArray(C)&&typeof C=="object":S===typeof C)}function ce(C,b){return C.kind==="array"&&b.kind==="array"?C.itemType.kind===b.itemType.kind&&typeof C.N=="number":C.kind===b.kind}const ye=.96422,xe=.82521,Me=4/29,Ge=6/29,Le=3*Ge*Ge,Ke=Ge*Ge*Ge,st=Math.PI/180,_t=180/Math.PI;function xt(C){return(C%=360)<0&&(C+=360),C}function kt([C,b,S,H]){let q,ee;const ie=Di((.2225045*(C=ai(C))+.7168786*(b=ai(b))+.0606169*(S=ai(S)))/1);C===b&&b===S?q=ee=ie:(q=Di((.4360747*C+.3850649*b+.1430804*S)/ye),ee=Di((.0139322*C+.0971045*b+.7141733*S)/xe));const ae=116*ie-16;return[ae<0?0:ae,500*(q-ie),200*(ie-ee),H]}function ai(C){return C<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Di(C){return C>Ke?Math.pow(C,1/3):C/Le+Me}function ni([C,b,S,H]){let q=(C+16)/116,ee=isNaN(b)?q:q+b/500,ie=isNaN(S)?q:q-S/200;return q=1*Ui(q),ee=ye*Ui(ee),ie=xe*Ui(ie),[ei(3.1338561*ee-1.6168667*q-.4906146*ie),ei(-.9787684*ee+1.9161415*q+.033454*ie),ei(.0719453*ee-.2289914*q+1.4052427*ie),H]}function ei(C){return(C=C<=.00304?12.92*C:1.055*Math.pow(C,1/2.4)-.055)<0?0:C>1?1:C}function Ui(C){return C>Ge?C*C*C:Le*(C-Me)}function Qi(C){return parseInt(C.padEnd(2,C),16)/255}function hr(C,b){return Ki(b?C/100:C,0,1)}function Ki(C,b,S){return Math.min(Math.max(b,C),S)}function Xt(C){return!C.some(Number.isNaN)}const wr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class bi{constructor(b,S,H,q=1,ee=!0){this.r=b,this.g=S,this.b=H,this.a=q,ee||(this.r*=q,this.g*=q,this.b*=q,q||this.overwriteGetter("rgb",[b,S,H,q]))}static parse(b){if(b instanceof bi)return b;if(typeof b!="string")return;const S=function(H){if((H=H.toLowerCase().trim())==="transparent")return[0,0,0,0];const q=wr[H];if(q){const[ie,ae,de]=q;return[ie/255,ae/255,de/255,1]}if(H.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(H)){const ie=H.length<6?1:2;let ae=1;return[Qi(H.slice(ae,ae+=ie)),Qi(H.slice(ae,ae+=ie)),Qi(H.slice(ae,ae+=ie)),Qi(H.slice(ae,ae+ie)||"ff")]}if(H.startsWith("rgb")){const ie=H.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ie){const[ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct,mt]=ie,ht=[Ee||" ",He||" ",at].join("");if(ht==="  "||ht==="  /"||ht===",,"||ht===",,,"){const wt=[_e,Pe,tt].join(""),Ct=wt==="%%%"?100:wt===""?255:0;if(Ct){const Qt=[Ki(+de/Ct,0,1),Ki(+Fe/Ct,0,1),Ki(+Ne/Ct,0,1),ct?hr(+ct,mt):1];if(Xt(Qt))return Qt}}return}}const ee=H.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ee){const[ie,ae,de,_e,Ee,Fe,Pe,He,Ne]=ee,tt=[de||" ",Ee||" ",Pe].join("");if(tt==="  "||tt==="  /"||tt===",,"||tt===",,,"){const at=[+ae,Ki(+_e,0,100),Ki(+Fe,0,100),He?hr(+He,Ne):1];if(Xt(at))return function([ct,mt,ht,wt]){function Ct(Qt){const fi=(Qt+ct/30)%12,Ci=mt*Math.min(ht,1-ht);return ht-Ci*Math.max(-1,Math.min(fi-3,9-fi,1))}return ct=xt(ct),mt/=100,ht/=100,[Ct(0),Ct(8),Ct(4),wt]}(at)}}}(b);return S?new bi(...S,!1):void 0}get rgb(){const{r:b,g:S,b:H,a:q}=this,ee=q||1/0;return this.overwriteGetter("rgb",[b/ee,S/ee,H/ee,q])}get hcl(){return this.overwriteGetter("hcl",function(b){const[S,H,q,ee]=kt(b),ie=Math.sqrt(H*H+q*q);return[Math.round(1e4*ie)?xt(Math.atan2(q,H)*_t):NaN,ie,S,ee]}(this.rgb))}get lab(){return this.overwriteGetter("lab",kt(this.rgb))}overwriteGetter(b,S){return Object.defineProperty(this,b,{value:S}),S}toString(){const[b,S,H,q]=this.rgb;return`rgba(${[b,S,H].map(ee=>Math.round(255*ee)).join(",")},${q})`}}bi.black=new bi(0,0,0,1),bi.white=new bi(1,1,1,1),bi.transparent=new bi(0,0,0,0),bi.red=new bi(1,0,0,1);class Sr{constructor(b,S,H){this.sensitivity=b?S?"variant":"case":S?"accent":"base",this.locale=H,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(b,S){return this.collator.compare(b,S)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pr{constructor(b,S,H,q,ee){this.text=b,this.image=S,this.scale=H,this.fontStack=q,this.textColor=ee}}class Zi{constructor(b){this.sections=b}static fromString(b){return new Zi([new Pr(b,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(b=>b.text.length!==0||b.image&&b.image.name.length!==0)}static factory(b){return b instanceof Zi?b:Zi.fromString(b)}toString(){return this.sections.length===0?"":this.sections.map(b=>b.text).join("")}}class pi{constructor(b){this.values=b.slice()}static parse(b){if(b instanceof pi)return b;if(typeof b=="number")return new pi([b,b,b,b]);if(Array.isArray(b)&&!(b.length<1||b.length>4)){for(const S of b)if(typeof S!="number")return;switch(b.length){case 1:b=[b[0],b[0],b[0],b[0]];break;case 2:b=[b[0],b[1],b[0],b[1]];break;case 3:b=[b[0],b[1],b[2],b[1]]}return new pi(b)}}toString(){return JSON.stringify(this.values)}}const _s=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class dr{constructor(b){this.values=b.slice()}static parse(b){if(b instanceof dr)return b;if(Array.isArray(b)&&!(b.length<1)&&b.length%2==0){for(let S=0;S<b.length;S+=2){const H=b[S],q=b[S+1];if(typeof H!="string"||!_s.has(H)||!Array.isArray(q)||q.length!==2||typeof q[0]!="number"||typeof q[1]!="number")return}return new dr(b)}}toString(){return JSON.stringify(this.values)}}class Dt{constructor(b){this.name=b.name,this.available=b.available}toString(){return this.name}static fromString(b){return b?new Dt({name:b,available:!1}):null}}function Yr(C,b,S,H){return typeof C=="number"&&C>=0&&C<=255&&typeof b=="number"&&b>=0&&b<=255&&typeof S=="number"&&S>=0&&S<=255?H===void 0||typeof H=="number"&&H>=0&&H<=1?null:`Invalid rgba value [${[C,b,S,H].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof H=="number"?[C,b,S,H]:[C,b,S]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ys(C){if(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number"||C instanceof bi||C instanceof Sr||C instanceof Zi||C instanceof pi||C instanceof dr||C instanceof Dt)return!0;if(Array.isArray(C)){for(const b of C)if(!Ys(b))return!1;return!0}if(typeof C=="object"){for(const b in C)if(!Ys(C[b]))return!1;return!0}return!1}function _r(C){if(C===null)return Vi;if(typeof C=="string")return _i;if(typeof C=="boolean")return Ti;if(typeof C=="number")return Ot;if(C instanceof bi)return Wi;if(C instanceof Sr)return wi;if(C instanceof Zi)return $i;if(C instanceof pi)return tr;if(C instanceof dr)return Tr;if(C instanceof Dt)return Ar;if(Array.isArray(C)){const b=C.length;let S;for(const H of C){const q=_r(H);if(S){if(S===q)continue;S=mi;break}S=q}return ji(S||mi,b)}return Zt}function Br(C){const b=typeof C;return C===null?"":b==="string"||b==="number"||b==="boolean"?String(C):C instanceof bi||C instanceof Zi||C instanceof pi||C instanceof dr||C instanceof Dt?C.toString():JSON.stringify(C)}class Cr{constructor(b,S){this.type=b,this.value=S}static parse(b,S){if(b.length!==2)return S.error(`'literal' expression requires exactly one argument, but found ${b.length-1} instead.`);if(!Ys(b[1]))return S.error("invalid value");const H=b[1];let q=_r(H);const ee=S.expectedType;return q.kind!=="array"||q.N!==0||!ee||ee.kind!=="array"||typeof ee.N=="number"&&ee.N!==0||(q=ee),new Cr(q,H)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class rr{constructor(b){this.name="ExpressionEvaluationError",this.message=b}toJSON(){return this.message}}const Lr={string:_i,number:Ot,boolean:Ti,object:Zt};class sr{constructor(b,S){this.type=b,this.args=S}static parse(b,S){if(b.length<2)return S.error("Expected at least one argument.");let H,q=1;const ee=b[0];if(ee==="array"){let ae,de;if(b.length>2){const _e=b[1];if(typeof _e!="string"||!(_e in Lr)||_e==="object")return S.error('The item type argument of "array" must be one of string, number, boolean',1);ae=Lr[_e],q++}else ae=mi;if(b.length>3){if(b[2]!==null&&(typeof b[2]!="number"||b[2]<0||b[2]!==Math.floor(b[2])))return S.error('The length argument to "array" must be a positive integer literal',2);de=b[2],q++}H=ji(ae,de)}else{if(!Lr[ee])throw new Error(`Types doesn't contain name = ${ee}`);H=Lr[ee]}const ie=[];for(;q<b.length;q++){const ae=S.parse(b[q],q,mi);if(!ae)return null;ie.push(ae)}return new sr(H,ie)}evaluate(b){for(let S=0;S<this.args.length;S++){const H=this.args[S].evaluate(b);if(!$r(this.type,_r(H)))return H;if(S===this.args.length-1)throw new rr(`Expected value to be of type ${Si(this.type)}, but found ${Si(_r(H))} instead.`)}throw new Error}eachChild(b){this.args.forEach(b)}outputDefined(){return this.args.every(b=>b.outputDefined())}}const jr={"to-boolean":Ti,"to-color":Wi,"to-number":Ot,"to-string":_i};class ss{constructor(b,S){this.type=b,this.args=S}static parse(b,S){if(b.length<2)return S.error("Expected at least one argument.");const H=b[0];if(!jr[H])throw new Error(`Can't parse ${H} as it is not part of the known types`);if((H==="to-boolean"||H==="to-string")&&b.length!==2)return S.error("Expected one argument.");const q=jr[H],ee=[];for(let ie=1;ie<b.length;ie++){const ae=S.parse(b[ie],ie,mi);if(!ae)return null;ee.push(ae)}return new ss(q,ee)}evaluate(b){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(b);case"color":{let S,H;for(const q of this.args){if(S=q.evaluate(b),H=null,S instanceof bi)return S;if(typeof S=="string"){const ee=b.parseColor(S);if(ee)return ee}else if(Array.isArray(S)&&(H=S.length<3||S.length>4?`Invalid rbga value ${JSON.stringify(S)}: expected an array containing either three or four numeric values.`:Yr(S[0],S[1],S[2],S[3]),!H))return new bi(S[0]/255,S[1]/255,S[2]/255,S[3])}throw new rr(H||`Could not parse color from value '${typeof S=="string"?S:JSON.stringify(S)}'`)}case"padding":{let S;for(const H of this.args){S=H.evaluate(b);const q=pi.parse(S);if(q)return q}throw new rr(`Could not parse padding from value '${typeof S=="string"?S:JSON.stringify(S)}'`)}case"variableAnchorOffsetCollection":{let S;for(const H of this.args){S=H.evaluate(b);const q=dr.parse(S);if(q)return q}throw new rr(`Could not parse variableAnchorOffsetCollection from value '${typeof S=="string"?S:JSON.stringify(S)}'`)}case"number":{let S=null;for(const H of this.args){if(S=H.evaluate(b),S===null)return 0;const q=Number(S);if(!isNaN(q))return q}throw new rr(`Could not convert ${JSON.stringify(S)} to number.`)}case"formatted":return Zi.fromString(Br(this.args[0].evaluate(b)));case"resolvedImage":return Dt.fromString(Br(this.args[0].evaluate(b)));default:return Br(this.args[0].evaluate(b))}}eachChild(b){this.args.forEach(b)}outputDefined(){return this.args.every(b=>b.outputDefined())}}const ps=["Unknown","Point","LineString","Polygon"];class cr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ps[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(b){let S=this._parseColorCache[b];return S||(S=this._parseColorCache[b]=bi.parse(b)),S}}class js{constructor(b,S,H=[],q,ee=new Hi,ie=[]){this.registry=b,this.path=H,this.key=H.map(ae=>`[${ae}]`).join(""),this.scope=ee,this.errors=ie,this.expectedType=q,this._isConstant=S}parse(b,S,H,q,ee={}){return S?this.concat(S,H,q)._parse(b,ee):this._parse(b,ee)}_parse(b,S){function H(q,ee,ie){return ie==="assert"?new sr(ee,[q]):ie==="coerce"?new ss(ee,[q]):q}if(b!==null&&typeof b!="string"&&typeof b!="boolean"&&typeof b!="number"||(b=["literal",b]),Array.isArray(b)){if(b.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const q=b[0];if(typeof q!="string")return this.error(`Expression name must be a string, but found ${typeof q} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const ee=this.registry[q];if(ee){let ie=ee.parse(b,this);if(!ie)return null;if(this.expectedType){const ae=this.expectedType,de=ie.type;if(ae.kind!=="string"&&ae.kind!=="number"&&ae.kind!=="boolean"&&ae.kind!=="object"&&ae.kind!=="array"||de.kind!=="value")if(ae.kind!=="color"&&ae.kind!=="formatted"&&ae.kind!=="resolvedImage"||de.kind!=="value"&&de.kind!=="string")if(ae.kind!=="padding"||de.kind!=="value"&&de.kind!=="number"&&de.kind!=="array")if(ae.kind!=="variableAnchorOffsetCollection"||de.kind!=="value"&&de.kind!=="array"){if(this.checkSubtype(ae,de))return null}else ie=H(ie,ae,S.typeAnnotation||"coerce");else ie=H(ie,ae,S.typeAnnotation||"coerce");else ie=H(ie,ae,S.typeAnnotation||"coerce");else ie=H(ie,ae,S.typeAnnotation||"assert")}if(!(ie instanceof Cr)&&ie.type.kind!=="resolvedImage"&&this._isConstant(ie)){const ae=new cr;try{ie=new Cr(ie.type,ie.evaluate(ae))}catch(de){return this.error(de.message),null}}return ie}return this.error(`Unknown expression "${q}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(b===void 0?"'undefined' value invalid. Use null instead.":typeof b=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof b} instead.`)}concat(b,S,H){const q=typeof b=="number"?this.path.concat(b):this.path,ee=H?this.scope.concat(H):this.scope;return new js(this.registry,this._isConstant,q,S||null,ee,this.errors)}error(b,...S){const H=`${this.key}${S.map(q=>`[${q}]`).join("")}`;this.errors.push(new ii(H,b))}checkSubtype(b,S){const H=$r(b,S);return H&&this.error(H),H}}class ys{constructor(b,S,H){this.type=wi,this.locale=H,this.caseSensitive=b,this.diacriticSensitive=S}static parse(b,S){if(b.length!==2)return S.error("Expected one argument.");const H=b[1];if(typeof H!="object"||Array.isArray(H))return S.error("Collator options argument must be an object.");const q=S.parse(H["case-sensitive"]!==void 0&&H["case-sensitive"],1,Ti);if(!q)return null;const ee=S.parse(H["diacritic-sensitive"]!==void 0&&H["diacritic-sensitive"],1,Ti);if(!ee)return null;let ie=null;return H.locale&&(ie=S.parse(H.locale,1,_i),!ie)?null:new ys(q,ee,ie)}evaluate(b){return new Sr(this.caseSensitive.evaluate(b),this.diacriticSensitive.evaluate(b),this.locale?this.locale.evaluate(b):null)}eachChild(b){b(this.caseSensitive),b(this.diacriticSensitive),this.locale&&b(this.locale)}outputDefined(){return!1}}const Os=8192;function pn(C,b){C[0]=Math.min(C[0],b[0]),C[1]=Math.min(C[1],b[1]),C[2]=Math.max(C[2],b[0]),C[3]=Math.max(C[3],b[1])}function Qr(C,b){return!(C[0]<=b[0]||C[2]>=b[2]||C[1]<=b[1]||C[3]>=b[3])}function es(C,b){const S=(180+C[0])/360,H=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C[1]*Math.PI/360)))/360,q=Math.pow(2,b.z);return[Math.round(S*q*Os),Math.round(H*q*Os)]}function xo(C,b,S){const H=C[0]-b[0],q=C[1]-b[1],ee=C[0]-S[0],ie=C[1]-S[1];return H*ie-ee*q==0&&H*ee<=0&&q*ie<=0}function Zs(C,b){let S=!1;for(let ie=0,ae=b.length;ie<ae;ie++){const de=b[ie];for(let _e=0,Ee=de.length;_e<Ee-1;_e++){if(xo(C,de[_e],de[_e+1]))return!1;(q=de[_e])[1]>(H=C)[1]!=(ee=de[_e+1])[1]>H[1]&&H[0]<(ee[0]-q[0])*(H[1]-q[1])/(ee[1]-q[1])+q[0]&&(S=!S)}}var H,q,ee;return S}function An(C,b){for(let S=0;S<b.length;S++)if(Zs(C,b[S]))return!0;return!1}function ta(C,b,S,H){const q=H[0]-S[0],ee=H[1]-S[1],ie=(C[0]-S[0])*ee-q*(C[1]-S[1]),ae=(b[0]-S[0])*ee-q*(b[1]-S[1]);return ie>0&&ae<0||ie<0&&ae>0}function ja(C,b,S){for(const _e of S)for(let Ee=0;Ee<_e.length-1;++Ee)if((ae=[(ie=_e[Ee+1])[0]-(ee=_e[Ee])[0],ie[1]-ee[1]])[0]*(de=[(q=b)[0]-(H=C)[0],q[1]-H[1]])[1]-ae[1]*de[0]!=0&&ta(H,q,ee,ie)&&ta(ee,ie,H,q))return!0;var H,q,ee,ie,ae,de;return!1}function Qn(C,b){for(let S=0;S<C.length;++S)if(!Zs(C[S],b))return!1;for(let S=0;S<C.length-1;++S)if(ja(C[S],C[S+1],b))return!1;return!0}function ba(C,b){for(let S=0;S<b.length;S++)if(Qn(C,b[S]))return!0;return!1}function Nr(C,b,S){const H=[];for(let q=0;q<C.length;q++){const ee=[];for(let ie=0;ie<C[q].length;ie++){const ae=es(C[q][ie],S);pn(b,ae),ee.push(ae)}H.push(ee)}return H}function Vo(C,b,S){const H=[];for(let q=0;q<C.length;q++){const ee=Nr(C[q],b,S);H.push(ee)}return H}function Bo(C,b,S,H){if(C[0]<S[0]||C[0]>S[2]){const q=.5*H;let ee=C[0]-S[0]>q?-H:S[0]-C[0]>q?H:0;ee===0&&(ee=C[0]-S[2]>q?-H:S[2]-C[0]>q?H:0),C[0]+=ee}pn(b,C)}function xa(C,b,S,H){const q=Math.pow(2,H.z)*Os,ee=[H.x*Os,H.y*Os],ie=[];for(const ae of C)for(const de of ae){const _e=[de.x+ee[0],de.y+ee[1]];Bo(_e,b,S,q),ie.push(_e)}return ie}function Tn(C,b,S,H){const q=Math.pow(2,H.z)*Os,ee=[H.x*Os,H.y*Os],ie=[];for(const de of C){const _e=[];for(const Ee of de){const Fe=[Ee.x+ee[0],Ee.y+ee[1]];pn(b,Fe),_e.push(Fe)}ie.push(_e)}if(b[2]-b[0]<=q/2){(ae=b)[0]=ae[1]=1/0,ae[2]=ae[3]=-1/0;for(const de of ie)for(const _e of de)Bo(_e,b,S,q)}var ae;return ie}class br{constructor(b,S){this.type=Ti,this.geojson=b,this.geometries=S}static parse(b,S){if(b.length!==2)return S.error(`'within' expression requires exactly one argument, but found ${b.length-1} instead.`);if(Ys(b[1])){const H=b[1];if(H.type==="FeatureCollection")for(let q=0;q<H.features.length;++q){const ee=H.features[q].geometry.type;if(ee==="Polygon"||ee==="MultiPolygon")return new br(H,H.features[q].geometry)}else if(H.type==="Feature"){const q=H.geometry.type;if(q==="Polygon"||q==="MultiPolygon")return new br(H,H.geometry)}else if(H.type==="Polygon"||H.type==="MultiPolygon")return new br(H,H)}return S.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(b){if(b.geometry()!=null&&b.canonicalID()!=null){if(b.geometryType()==="Point")return function(S,H){const q=[1/0,1/0,-1/0,-1/0],ee=[1/0,1/0,-1/0,-1/0],ie=S.canonicalID();if(H.type==="Polygon"){const ae=Nr(H.coordinates,ee,ie),de=xa(S.geometry(),q,ee,ie);if(!Qr(q,ee))return!1;for(const _e of de)if(!Zs(_e,ae))return!1}if(H.type==="MultiPolygon"){const ae=Vo(H.coordinates,ee,ie),de=xa(S.geometry(),q,ee,ie);if(!Qr(q,ee))return!1;for(const _e of de)if(!An(_e,ae))return!1}return!0}(b,this.geometries);if(b.geometryType()==="LineString")return function(S,H){const q=[1/0,1/0,-1/0,-1/0],ee=[1/0,1/0,-1/0,-1/0],ie=S.canonicalID();if(H.type==="Polygon"){const ae=Nr(H.coordinates,ee,ie),de=Tn(S.geometry(),q,ee,ie);if(!Qr(q,ee))return!1;for(const _e of de)if(!Qn(_e,ae))return!1}if(H.type==="MultiPolygon"){const ae=Vo(H.coordinates,ee,ie),de=Tn(S.geometry(),q,ee,ie);if(!Qr(q,ee))return!1;for(const _e of de)if(!ba(_e,ae))return!1}return!0}(b,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class er{constructor(b,S){this.type=S.type,this.name=b,this.boundExpression=S}static parse(b,S){if(b.length!==2||typeof b[1]!="string")return S.error("'var' expression requires exactly one string literal argument.");const H=b[1];return S.scope.has(H)?new er(H,S.scope.get(H)):S.error(`Unknown variable "${H}". Make sure "${H}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(b){return this.boundExpression.evaluate(b)}eachChild(){}outputDefined(){return!1}}class As{constructor(b,S,H,q){this.name=b,this.type=S,this._evaluate=H,this.args=q}evaluate(b){return this._evaluate(b,this.args)}eachChild(b){this.args.forEach(b)}outputDefined(){return!1}static parse(b,S){const H=b[0],q=As.definitions[H];if(!q)return S.error(`Unknown expression "${H}". If you wanted a literal array, use ["literal", [...]].`,0);const ee=Array.isArray(q)?q[0]:q.type,ie=Array.isArray(q)?[[q[1],q[2]]]:q.overloads,ae=ie.filter(([_e])=>!Array.isArray(_e)||_e.length===b.length-1);let de=null;for(const[_e,Ee]of ae){de=new js(S.registry,ia,S.path,null,S.scope);const Fe=[];let Pe=!1;for(let He=1;He<b.length;He++){const Ne=b[He],tt=Array.isArray(_e)?_e[He-1]:_e.type,at=de.parse(Ne,1+Fe.length,tt);if(!at){Pe=!0;break}Fe.push(at)}if(!Pe)if(Array.isArray(_e)&&_e.length!==Fe.length)de.error(`Expected ${_e.length} arguments, but found ${Fe.length} instead.`);else{for(let He=0;He<Fe.length;He++){const Ne=Array.isArray(_e)?_e[He]:_e.type,tt=Fe[He];de.concat(He+1).checkSubtype(Ne,tt.type)}if(de.errors.length===0)return new As(H,ee,Ee,Fe)}}if(ae.length===1)S.errors.push(...de.errors);else{const _e=(ae.length?ae:ie).map(([Fe])=>{return Pe=Fe,Array.isArray(Pe)?`(${Pe.map(Si).join(", ")})`:`(${Si(Pe.type)}...)`;var Pe}).join(" | "),Ee=[];for(let Fe=1;Fe<b.length;Fe++){const Pe=S.parse(b[Fe],1+Ee.length);if(!Pe)return null;Ee.push(Si(Pe.type))}S.error(`Expected arguments of type ${_e}, but found (${Ee.join(", ")}) instead.`)}return null}static register(b,S){As.definitions=S;for(const H in S)b[H]=As}}function ia(C){if(C instanceof er)return ia(C.boundExpression);if(C instanceof As&&C.name==="error"||C instanceof ys||C instanceof br)return!1;const b=C instanceof ss||C instanceof sr;let S=!0;return C.eachChild(H=>{S=b?S&&ia(H):S&&H instanceof Cr}),!!S&&Ba(C)&&Ea(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ba(C){if(C instanceof As&&(C.name==="get"&&C.args.length===1||C.name==="feature-state"||C.name==="has"&&C.args.length===1||C.name==="properties"||C.name==="geometry-type"||C.name==="id"||/^filter-/.test(C.name))||C instanceof br)return!1;let b=!0;return C.eachChild(S=>{b&&!Ba(S)&&(b=!1)}),b}function Ca(C){if(C instanceof As&&C.name==="feature-state")return!1;let b=!0;return C.eachChild(S=>{b&&!Ca(S)&&(b=!1)}),b}function Ea(C,b){if(C instanceof As&&b.indexOf(C.name)>=0)return!1;let S=!0;return C.eachChild(H=>{S&&!Ea(H,b)&&(S=!1)}),S}function Ta(C,b){const S=C.length-1;let H,q,ee=0,ie=S,ae=0;for(;ee<=ie;)if(ae=Math.floor((ee+ie)/2),H=C[ae],q=C[ae+1],H<=b){if(ae===S||b<q)return ae;ee=ae+1}else{if(!(H>b))throw new rr("Input is not a number.");ie=ae-1}return 0}class Ia{constructor(b,S,H){this.type=b,this.input=S,this.labels=[],this.outputs=[];for(const[q,ee]of H)this.labels.push(q),this.outputs.push(ee)}static parse(b,S){if(b.length-1<4)return S.error(`Expected at least 4 arguments, but found only ${b.length-1}.`);if((b.length-1)%2!=0)return S.error("Expected an even number of arguments.");const H=S.parse(b[1],1,Ot);if(!H)return null;const q=[];let ee=null;S.expectedType&&S.expectedType.kind!=="value"&&(ee=S.expectedType);for(let ie=1;ie<b.length;ie+=2){const ae=ie===1?-1/0:b[ie],de=b[ie+1],_e=ie,Ee=ie+1;if(typeof ae!="number")return S.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(q.length&&q[q.length-1][0]>=ae)return S.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const Fe=S.parse(de,Ee,ee);if(!Fe)return null;ee=ee||Fe.type,q.push([ae,Fe])}return new Ia(ee,H,q)}evaluate(b){const S=this.labels,H=this.outputs;if(S.length===1)return H[0].evaluate(b);const q=this.input.evaluate(b);if(q<=S[0])return H[0].evaluate(b);const ee=S.length;return q>=S[ee-1]?H[ee-1].evaluate(b):H[Ta(S,q)].evaluate(b)}eachChild(b){b(this.input);for(const S of this.outputs)b(S)}outputDefined(){return this.outputs.every(b=>b.outputDefined())}}function On(C,b,S){return C+S*(b-C)}function Za(C,b,S){return C.map((H,q)=>On(H,b[q],S))}const ks={number:On,color:function(C,b,S,H="rgb"){switch(H){case"rgb":{const[q,ee,ie,ae]=Za(C.rgb,b.rgb,S);return new bi(q,ee,ie,ae,!1)}case"hcl":{const[q,ee,ie,ae]=C.hcl,[de,_e,Ee,Fe]=b.hcl;let Pe,He;if(isNaN(q)||isNaN(de))isNaN(q)?isNaN(de)?Pe=NaN:(Pe=de,ie!==1&&ie!==0||(He=_e)):(Pe=q,Ee!==1&&Ee!==0||(He=ee));else{let mt=de-q;de>q&&mt>180?mt-=360:de<q&&q-de>180&&(mt+=360),Pe=q+S*mt}const[Ne,tt,at,ct]=function([mt,ht,wt,Ct]){return mt=isNaN(mt)?0:mt*st,ni([wt,Math.cos(mt)*ht,Math.sin(mt)*ht,Ct])}([Pe,He??On(ee,_e,S),On(ie,Ee,S),On(ae,Fe,S)]);return new bi(Ne,tt,at,ct,!1)}case"lab":{const[q,ee,ie,ae]=ni(Za(C.lab,b.lab,S));return new bi(q,ee,ie,ae,!1)}}},array:Za,padding:function(C,b,S){return new pi(Za(C.values,b.values,S))},variableAnchorOffsetCollection:function(C,b,S){const H=C.values,q=b.values;if(H.length!==q.length)throw new rr(`Cannot interpolate values of different length. from: ${C.toString()}, to: ${b.toString()}`);const ee=[];for(let ie=0;ie<H.length;ie+=2){if(H[ie]!==q[ie])throw new rr(`Cannot interpolate values containing mismatched anchors. from[${ie}]: ${H[ie]}, to[${ie}]: ${q[ie]}`);ee.push(H[ie]);const[ae,de]=H[ie+1],[_e,Ee]=q[ie+1];ee.push([On(ae,_e,S),On(de,Ee,S)])}return new dr(ee)}};class gs{constructor(b,S,H,q,ee){this.type=b,this.operator=S,this.interpolation=H,this.input=q,this.labels=[],this.outputs=[];for(const[ie,ae]of ee)this.labels.push(ie),this.outputs.push(ae)}static interpolationFactor(b,S,H,q){let ee=0;if(b.name==="exponential")ee=Ja(S,b.base,H,q);else if(b.name==="linear")ee=Ja(S,1,H,q);else if(b.name==="cubic-bezier"){const ie=b.controlPoints;ee=new ze(ie[0],ie[1],ie[2],ie[3]).solve(Ja(S,1,H,q))}return ee}static parse(b,S){let[H,q,ee,...ie]=b;if(!Array.isArray(q)||q.length===0)return S.error("Expected an interpolation type expression.",1);if(q[0]==="linear")q={name:"linear"};else if(q[0]==="exponential"){const _e=q[1];if(typeof _e!="number")return S.error("Exponential interpolation requires a numeric base.",1,1);q={name:"exponential",base:_e}}else{if(q[0]!=="cubic-bezier")return S.error(`Unknown interpolation type ${String(q[0])}`,1,0);{const _e=q.slice(1);if(_e.length!==4||_e.some(Ee=>typeof Ee!="number"||Ee<0||Ee>1))return S.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);q={name:"cubic-bezier",controlPoints:_e}}}if(b.length-1<4)return S.error(`Expected at least 4 arguments, but found only ${b.length-1}.`);if((b.length-1)%2!=0)return S.error("Expected an even number of arguments.");if(ee=S.parse(ee,2,Ot),!ee)return null;const ae=[];let de=null;H==="interpolate-hcl"||H==="interpolate-lab"?de=Wi:S.expectedType&&S.expectedType.kind!=="value"&&(de=S.expectedType);for(let _e=0;_e<ie.length;_e+=2){const Ee=ie[_e],Fe=ie[_e+1],Pe=_e+3,He=_e+4;if(typeof Ee!="number")return S.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Pe);if(ae.length&&ae[ae.length-1][0]>=Ee)return S.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Pe);const Ne=S.parse(Fe,He,de);if(!Ne)return null;de=de||Ne.type,ae.push([Ee,Ne])}return ce(de,Ot)||ce(de,Wi)||ce(de,tr)||ce(de,Tr)||ce(de,ji(Ot))?new gs(de,H,q,ee,ae):S.error(`Type ${Si(de)} is not interpolatable.`)}evaluate(b){const S=this.labels,H=this.outputs;if(S.length===1)return H[0].evaluate(b);const q=this.input.evaluate(b);if(q<=S[0])return H[0].evaluate(b);const ee=S.length;if(q>=S[ee-1])return H[ee-1].evaluate(b);const ie=Ta(S,q),ae=gs.interpolationFactor(this.interpolation,q,S[ie],S[ie+1]),de=H[ie].evaluate(b),_e=H[ie+1].evaluate(b);switch(this.operator){case"interpolate":return ks[this.type.kind](de,_e,ae);case"interpolate-hcl":return ks.color(de,_e,ae,"hcl");case"interpolate-lab":return ks.color(de,_e,ae,"lab")}}eachChild(b){b(this.input);for(const S of this.outputs)b(S)}outputDefined(){return this.outputs.every(b=>b.outputDefined())}}function Ja(C,b,S,H){const q=H-S,ee=C-S;return q===0?0:b===1?ee/q:(Math.pow(b,ee)-1)/(Math.pow(b,q)-1)}class Sa{constructor(b,S){this.type=b,this.args=S}static parse(b,S){if(b.length<2)return S.error("Expectected at least one argument.");let H=null;const q=S.expectedType;q&&q.kind!=="value"&&(H=q);const ee=[];for(const ae of b.slice(1)){const de=S.parse(ae,1+ee.length,H,void 0,{typeAnnotation:"omit"});if(!de)return null;H=H||de.type,ee.push(de)}if(!H)throw new Error("No output type");const ie=q&&ee.some(ae=>$r(q,ae.type));return new Sa(ie?mi:H,ee)}evaluate(b){let S,H=null,q=0;for(const ee of this.args)if(q++,H=ee.evaluate(b),H&&H instanceof Dt&&!H.available&&(S||(S=H.name),H=null,q===this.args.length&&(H=S)),H!==null)break;return H}eachChild(b){this.args.forEach(b)}outputDefined(){return this.args.every(b=>b.outputDefined())}}class ra{constructor(b,S){this.type=S.type,this.bindings=[].concat(b),this.result=S}evaluate(b){return this.result.evaluate(b)}eachChild(b){for(const S of this.bindings)b(S[1]);b(this.result)}static parse(b,S){if(b.length<4)return S.error(`Expected at least 3 arguments, but found ${b.length-1} instead.`);const H=[];for(let ee=1;ee<b.length-1;ee+=2){const ie=b[ee];if(typeof ie!="string")return S.error(`Expected string, but found ${typeof ie} instead.`,ee);if(/[^a-zA-Z0-9_]/.test(ie))return S.error("Variable names must contain only alphanumeric characters or '_'.",ee);const ae=S.parse(b[ee+1],ee+1);if(!ae)return null;H.push([ie,ae])}const q=S.parse(b[b.length-1],b.length-1,S.expectedType,H);return q?new ra(H,q):null}outputDefined(){return this.result.outputDefined()}}class In{constructor(b,S,H){this.type=b,this.index=S,this.input=H}static parse(b,S){if(b.length!==3)return S.error(`Expected 2 arguments, but found ${b.length-1} instead.`);const H=S.parse(b[1],1,Ot),q=S.parse(b[2],2,ji(S.expectedType||mi));return H&&q?new In(q.type.itemType,H,q):null}evaluate(b){const S=this.index.evaluate(b),H=this.input.evaluate(b);if(S<0)throw new rr(`Array index out of bounds: ${S} < 0.`);if(S>=H.length)throw new rr(`Array index out of bounds: ${S} > ${H.length-1}.`);if(S!==Math.floor(S))throw new rr(`Array index must be an integer, but found ${S} instead.`);return H[S]}eachChild(b){b(this.index),b(this.input)}outputDefined(){return!1}}class pr{constructor(b,S){this.type=Ti,this.needle=b,this.haystack=S}static parse(b,S){if(b.length!==3)return S.error(`Expected 2 arguments, but found ${b.length-1} instead.`);const H=S.parse(b[1],1,mi),q=S.parse(b[2],2,mi);return H&&q?it(H.type,[Ti,_i,Ot,Vi,mi])?new pr(H,q):S.error(`Expected first argument to be of type boolean, string, number or null, but found ${Si(H.type)} instead`):null}evaluate(b){const S=this.needle.evaluate(b),H=this.haystack.evaluate(b);if(!H)return!1;if(!Se(S,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${Si(_r(S))} instead.`);if(!Se(H,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${Si(_r(H))} instead.`);return H.indexOf(S)>=0}eachChild(b){b(this.needle),b(this.haystack)}outputDefined(){return!0}}class $a{constructor(b,S,H){this.type=Ot,this.needle=b,this.haystack=S,this.fromIndex=H}static parse(b,S){if(b.length<=2||b.length>=5)return S.error(`Expected 3 or 4 arguments, but found ${b.length-1} instead.`);const H=S.parse(b[1],1,mi),q=S.parse(b[2],2,mi);if(!H||!q)return null;if(!it(H.type,[Ti,_i,Ot,Vi,mi]))return S.error(`Expected first argument to be of type boolean, string, number or null, but found ${Si(H.type)} instead`);if(b.length===4){const ee=S.parse(b[3],3,Ot);return ee?new $a(H,q,ee):null}return new $a(H,q)}evaluate(b){const S=this.needle.evaluate(b),H=this.haystack.evaluate(b);if(!Se(S,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${Si(_r(S))} instead.`);if(!Se(H,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${Si(_r(H))} instead.`);if(this.fromIndex){const q=this.fromIndex.evaluate(b);return H.indexOf(S,q)}return H.indexOf(S)}eachChild(b){b(this.needle),b(this.haystack),this.fromIndex&&b(this.fromIndex)}outputDefined(){return!1}}class Co{constructor(b,S,H,q,ee,ie){this.inputType=b,this.type=S,this.input=H,this.cases=q,this.outputs=ee,this.otherwise=ie}static parse(b,S){if(b.length<5)return S.error(`Expected at least 4 arguments, but found only ${b.length-1}.`);if(b.length%2!=1)return S.error("Expected an even number of arguments.");let H,q;S.expectedType&&S.expectedType.kind!=="value"&&(q=S.expectedType);const ee={},ie=[];for(let _e=2;_e<b.length-1;_e+=2){let Ee=b[_e];const Fe=b[_e+1];Array.isArray(Ee)||(Ee=[Ee]);const Pe=S.concat(_e);if(Ee.length===0)return Pe.error("Expected at least one branch label.");for(const Ne of Ee){if(typeof Ne!="number"&&typeof Ne!="string")return Pe.error("Branch labels must be numbers or strings.");if(typeof Ne=="number"&&Math.abs(Ne)>Number.MAX_SAFE_INTEGER)return Pe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ne=="number"&&Math.floor(Ne)!==Ne)return Pe.error("Numeric branch labels must be integer values.");if(H){if(Pe.checkSubtype(H,_r(Ne)))return null}else H=_r(Ne);if(ee[String(Ne)]!==void 0)return Pe.error("Branch labels must be unique.");ee[String(Ne)]=ie.length}const He=S.parse(Fe,_e,q);if(!He)return null;q=q||He.type,ie.push(He)}const ae=S.parse(b[1],1,mi);if(!ae)return null;const de=S.parse(b[b.length-1],b.length-1,q);return de?ae.type.kind!=="value"&&S.concat(1).checkSubtype(H,ae.type)?null:new Co(H,q,ae,ee,ie,de):null}evaluate(b){const S=this.input.evaluate(b);return(_r(S)===this.inputType&&this.outputs[this.cases[S]]||this.otherwise).evaluate(b)}eachChild(b){b(this.input),this.outputs.forEach(b),b(this.otherwise)}outputDefined(){return this.outputs.every(b=>b.outputDefined())&&this.otherwise.outputDefined()}}class Sn{constructor(b,S,H){this.type=b,this.branches=S,this.otherwise=H}static parse(b,S){if(b.length<4)return S.error(`Expected at least 3 arguments, but found only ${b.length-1}.`);if(b.length%2!=0)return S.error("Expected an odd number of arguments.");let H;S.expectedType&&S.expectedType.kind!=="value"&&(H=S.expectedType);const q=[];for(let ie=1;ie<b.length-1;ie+=2){const ae=S.parse(b[ie],ie,Ti);if(!ae)return null;const de=S.parse(b[ie+1],ie+1,H);if(!de)return null;q.push([ae,de]),H=H||de.type}const ee=S.parse(b[b.length-1],b.length-1,H);if(!ee)return null;if(!H)throw new Error("Can't infer output type");return new Sn(H,q,ee)}evaluate(b){for(const[S,H]of this.branches)if(S.evaluate(b))return H.evaluate(b);return this.otherwise.evaluate(b)}eachChild(b){for(const[S,H]of this.branches)b(S),b(H);b(this.otherwise)}outputDefined(){return this.branches.every(([b,S])=>S.outputDefined())&&this.otherwise.outputDefined()}}class sa{constructor(b,S,H,q){this.type=b,this.input=S,this.beginIndex=H,this.endIndex=q}static parse(b,S){if(b.length<=2||b.length>=5)return S.error(`Expected 3 or 4 arguments, but found ${b.length-1} instead.`);const H=S.parse(b[1],1,mi),q=S.parse(b[2],2,Ot);if(!H||!q)return null;if(!it(H.type,[ji(mi),_i,mi]))return S.error(`Expected first argument to be of type array or string, but found ${Si(H.type)} instead`);if(b.length===4){const ee=S.parse(b[3],3,Ot);return ee?new sa(H.type,H,q,ee):null}return new sa(H.type,H,q)}evaluate(b){const S=this.input.evaluate(b),H=this.beginIndex.evaluate(b);if(!Se(S,["string","array"]))throw new rr(`Expected first argument to be of type array or string, but found ${Si(_r(S))} instead.`);if(this.endIndex){const q=this.endIndex.evaluate(b);return S.slice(H,q)}return S.slice(H)}eachChild(b){b(this.input),b(this.beginIndex),this.endIndex&&b(this.endIndex)}outputDefined(){return!1}}function Eo(C,b){return C==="=="||C==="!="?b.kind==="boolean"||b.kind==="string"||b.kind==="number"||b.kind==="null"||b.kind==="value":b.kind==="string"||b.kind==="number"||b.kind==="value"}function To(C,b,S,H){return H.compare(b,S)===0}function na(C,b,S){const H=C!=="=="&&C!=="!=";return class Ph{constructor(ee,ie,ae){this.type=Ti,this.lhs=ee,this.rhs=ie,this.collator=ae,this.hasUntypedArgument=ee.type.kind==="value"||ie.type.kind==="value"}static parse(ee,ie){if(ee.length!==3&&ee.length!==4)return ie.error("Expected two or three arguments.");const ae=ee[0];let de=ie.parse(ee[1],1,mi);if(!de)return null;if(!Eo(ae,de.type))return ie.concat(1).error(`"${ae}" comparisons are not supported for type '${Si(de.type)}'.`);let _e=ie.parse(ee[2],2,mi);if(!_e)return null;if(!Eo(ae,_e.type))return ie.concat(2).error(`"${ae}" comparisons are not supported for type '${Si(_e.type)}'.`);if(de.type.kind!==_e.type.kind&&de.type.kind!=="value"&&_e.type.kind!=="value")return ie.error(`Cannot compare types '${Si(de.type)}' and '${Si(_e.type)}'.`);H&&(de.type.kind==="value"&&_e.type.kind!=="value"?de=new sr(_e.type,[de]):de.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new sr(de.type,[_e])));let Ee=null;if(ee.length===4){if(de.type.kind!=="string"&&_e.type.kind!=="string"&&de.type.kind!=="value"&&_e.type.kind!=="value")return ie.error("Cannot use collator to compare non-string types.");if(Ee=ie.parse(ee[3],3,wi),!Ee)return null}return new Ph(de,_e,Ee)}evaluate(ee){const ie=this.lhs.evaluate(ee),ae=this.rhs.evaluate(ee);if(H&&this.hasUntypedArgument){const de=_r(ie),_e=_r(ae);if(de.kind!==_e.kind||de.kind!=="string"&&de.kind!=="number")throw new rr(`Expected arguments for "${C}" to be (string, string) or (number, number), but found (${de.kind}, ${_e.kind}) instead.`)}if(this.collator&&!H&&this.hasUntypedArgument){const de=_r(ie),_e=_r(ae);if(de.kind!=="string"||_e.kind!=="string")return b(ee,ie,ae)}return this.collator?S(ee,ie,ae,this.collator.evaluate(ee)):b(ee,ie,ae)}eachChild(ee){ee(this.lhs),ee(this.rhs),this.collator&&ee(this.collator)}outputDefined(){return!0}}}const pl=na("==",function(C,b,S){return b===S},To),Ko=na("!=",function(C,b,S){return b!==S},function(C,b,S,H){return!To(0,b,S,H)}),Go=na("<",function(C,b,S){return b<S},function(C,b,S,H){return H.compare(b,S)<0}),Io=na(">",function(C,b,S){return b>S},function(C,b,S,H){return H.compare(b,S)>0}),Wo=na("<=",function(C,b,S){return b<=S},function(C,b,S,H){return H.compare(b,S)<=0}),cn=na(">=",function(C,b,S){return b>=S},function(C,b,S,H){return H.compare(b,S)>=0});class Rn{constructor(b,S,H,q,ee){this.type=_i,this.number=b,this.locale=S,this.currency=H,this.minFractionDigits=q,this.maxFractionDigits=ee}static parse(b,S){if(b.length!==3)return S.error("Expected two arguments.");const H=S.parse(b[1],1,Ot);if(!H)return null;const q=b[2];if(typeof q!="object"||Array.isArray(q))return S.error("NumberFormat options argument must be an object.");let ee=null;if(q.locale&&(ee=S.parse(q.locale,1,_i),!ee))return null;let ie=null;if(q.currency&&(ie=S.parse(q.currency,1,_i),!ie))return null;let ae=null;if(q["min-fraction-digits"]&&(ae=S.parse(q["min-fraction-digits"],1,Ot),!ae))return null;let de=null;return q["max-fraction-digits"]&&(de=S.parse(q["max-fraction-digits"],1,Ot),!de)?null:new Rn(H,ee,ie,ae,de)}evaluate(b){return new Intl.NumberFormat(this.locale?this.locale.evaluate(b):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(b):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(b):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(b):void 0}).format(this.number.evaluate(b))}eachChild(b){b(this.number),this.locale&&b(this.locale),this.currency&&b(this.currency),this.minFractionDigits&&b(this.minFractionDigits),this.maxFractionDigits&&b(this.maxFractionDigits)}outputDefined(){return!1}}class Fa{constructor(b){this.type=$i,this.sections=b}static parse(b,S){if(b.length<2)return S.error("Expected at least one argument.");const H=b[1];if(!Array.isArray(H)&&typeof H=="object")return S.error("First argument must be an image or text section.");const q=[];let ee=!1;for(let ie=1;ie<=b.length-1;++ie){const ae=b[ie];if(ee&&typeof ae=="object"&&!Array.isArray(ae)){ee=!1;let de=null;if(ae["font-scale"]&&(de=S.parse(ae["font-scale"],1,Ot),!de))return null;let _e=null;if(ae["text-font"]&&(_e=S.parse(ae["text-font"],1,ji(_i)),!_e))return null;let Ee=null;if(ae["text-color"]&&(Ee=S.parse(ae["text-color"],1,Wi),!Ee))return null;const Fe=q[q.length-1];Fe.scale=de,Fe.font=_e,Fe.textColor=Ee}else{const de=S.parse(b[ie],1,mi);if(!de)return null;const _e=de.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return S.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ee=!0,q.push({content:de,scale:null,font:null,textColor:null})}}return new Fa(q)}evaluate(b){return new Zi(this.sections.map(S=>{const H=S.content.evaluate(b);return _r(H)===Ar?new Pr("",H,null,null,null):new Pr(Br(H),null,S.scale?S.scale.evaluate(b):null,S.font?S.font.evaluate(b).join(","):null,S.textColor?S.textColor.evaluate(b):null)}))}eachChild(b){for(const S of this.sections)b(S.content),S.scale&&b(S.scale),S.font&&b(S.font),S.textColor&&b(S.textColor)}outputDefined(){return!1}}class eo{constructor(b){this.type=Ar,this.input=b}static parse(b,S){if(b.length!==2)return S.error("Expected two arguments.");const H=S.parse(b[1],1,_i);return H?new eo(H):S.error("No image name provided.")}evaluate(b){const S=this.input.evaluate(b),H=Dt.fromString(S);return H&&b.availableImages&&(H.available=b.availableImages.indexOf(S)>-1),H}eachChild(b){b(this.input)}outputDefined(){return!1}}class ka{constructor(b){this.type=Ot,this.input=b}static parse(b,S){if(b.length!==2)return S.error(`Expected 1 argument, but found ${b.length-1} instead.`);const H=S.parse(b[1],1);return H?H.type.kind!=="array"&&H.type.kind!=="string"&&H.type.kind!=="value"?S.error(`Expected argument of type string or array, but found ${Si(H.type)} instead.`):new ka(H):null}evaluate(b){const S=this.input.evaluate(b);if(typeof S=="string"||Array.isArray(S))return S.length;throw new rr(`Expected value to be of type string or array, but found ${Si(_r(S))} instead.`)}eachChild(b){b(this.input)}outputDefined(){return!1}}const gn={"==":pl,"!=":Ko,">":Io,"<":Go,">=":cn,"<=":Wo,array:sr,at:In,boolean:sr,case:Sn,coalesce:Sa,collator:ys,format:Fa,image:eo,in:pr,"index-of":$a,interpolate:gs,"interpolate-hcl":gs,"interpolate-lab":gs,length:ka,let:ra,literal:Cr,match:Co,number:sr,"number-format":Rn,object:sr,slice:sa,step:Ia,string:sr,"to-boolean":ss,"to-color":ss,"to-number":ss,"to-string":ss,var:er,within:br};function aa(C,[b,S,H,q]){b=b.evaluate(C),S=S.evaluate(C),H=H.evaluate(C);const ee=q?q.evaluate(C):1,ie=Yr(b,S,H,ee);if(ie)throw new rr(ie);return new bi(b/255,S/255,H/255,ee,!1)}function Ds(C,b){return C in b}function oa(C,b){const S=b[C];return S===void 0?null:S}function hn(C){return{type:C}}function Rs(C){return{result:"success",value:C}}function la(C){return{result:"error",value:C}}function Hn(C){return C["property-type"]==="data-driven"||C["property-type"]==="cross-faded-data-driven"}function to(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function io(C){return!!C.expression&&C.expression.interpolated}function gr(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":C===null?"null":typeof C}function Js(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function gl(C){return C}function qo(C,b){const S=b.type==="color",H=C.stops&&typeof C.stops[0][0]=="object",q=H||!(H||C.property!==void 0),ee=C.type||(io(b)?"exponential":"interval");if(S||b.type==="padding"){const Ee=S?bi.parse:pi.parse;(C=di({},C)).stops&&(C.stops=C.stops.map(Fe=>[Fe[0],Ee(Fe[1])])),C.default=Ee(C.default?C.default:b.default)}if(C.colorSpace&&(ie=C.colorSpace)!=="rgb"&&ie!=="hcl"&&ie!=="lab")throw new Error(`Unknown color space: "${C.colorSpace}"`);var ie;let ae,de,_e;if(ee==="exponential")ae=Hs;else if(ee==="interval")ae=Xo;else if(ee==="categorical"){ae=So,de=Object.create(null);for(const Ee of C.stops)de[Ee[0]]=Ee[1];_e=typeof C.stops[0][0]}else{if(ee!=="identity")throw new Error(`Unknown function type "${ee}"`);ae=Da}if(H){const Ee={},Fe=[];for(let Ne=0;Ne<C.stops.length;Ne++){const tt=C.stops[Ne],at=tt[0].zoom;Ee[at]===void 0&&(Ee[at]={zoom:at,type:C.type,property:C.property,default:C.default,stops:[]},Fe.push(at)),Ee[at].stops.push([tt[0].value,tt[1]])}const Pe=[];for(const Ne of Fe)Pe.push([Ee[Ne].zoom,qo(Ee[Ne],b)]);const He={name:"linear"};return{kind:"composite",interpolationType:He,interpolationFactor:gs.interpolationFactor.bind(void 0,He),zoomStops:Pe.map(Ne=>Ne[0]),evaluate:({zoom:Ne},tt)=>Hs({stops:Pe,base:C.base},b,Ne).evaluate(Ne,tt)}}if(q){const Ee=ee==="exponential"?{name:"exponential",base:C.base!==void 0?C.base:1}:null;return{kind:"camera",interpolationType:Ee,interpolationFactor:gs.interpolationFactor.bind(void 0,Ee),zoomStops:C.stops.map(Fe=>Fe[0]),evaluate:({zoom:Fe})=>ae(C,b,Fe,de,_e)}}return{kind:"source",evaluate(Ee,Fe){const Pe=Fe&&Fe.properties?Fe.properties[C.property]:void 0;return Pe===void 0?mn(C.default,b.default):ae(C,b,Pe,de,_e)}}}function mn(C,b,S){return C!==void 0?C:b!==void 0?b:S!==void 0?S:void 0}function So(C,b,S,H,q){return mn(typeof S===q?H[S]:void 0,C.default,b.default)}function Xo(C,b,S){if(gr(S)!=="number")return mn(C.default,b.default);const H=C.stops.length;if(H===1||S<=C.stops[0][0])return C.stops[0][1];if(S>=C.stops[H-1][0])return C.stops[H-1][1];const q=Ta(C.stops.map(ee=>ee[0]),S);return C.stops[q][1]}function Hs(C,b,S){const H=C.base!==void 0?C.base:1;if(gr(S)!=="number")return mn(C.default,b.default);const q=C.stops.length;if(q===1||S<=C.stops[0][0])return C.stops[0][1];if(S>=C.stops[q-1][0])return C.stops[q-1][1];const ee=Ta(C.stops.map(Ee=>Ee[0]),S),ie=function(Ee,Fe,Pe,He){const Ne=He-Pe,tt=Ee-Pe;return Ne===0?0:Fe===1?tt/Ne:(Math.pow(Fe,tt)-1)/(Math.pow(Fe,Ne)-1)}(S,H,C.stops[ee][0],C.stops[ee+1][0]),ae=C.stops[ee][1],de=C.stops[ee+1][1],_e=ks[b.type]||gl;return typeof ae.evaluate=="function"?{evaluate(...Ee){const Fe=ae.evaluate.apply(void 0,Ee),Pe=de.evaluate.apply(void 0,Ee);if(Fe!==void 0&&Pe!==void 0)return _e(Fe,Pe,ie,C.colorSpace)}}:_e(ae,de,ie,C.colorSpace)}function Da(C,b,S){switch(b.type){case"color":S=bi.parse(S);break;case"formatted":S=Zi.fromString(S.toString());break;case"resolvedImage":S=Dt.fromString(S.toString());break;case"padding":S=pi.parse(S);break;default:gr(S)===b.type||b.type==="enum"&&b.values[S]||(S=void 0)}return mn(S,C.default,b.default)}As.register(gn,{error:[{kind:"error"},[_i],(C,[b])=>{throw new rr(b.evaluate(C))}],typeof:[_i,[mi],(C,[b])=>Si(_r(b.evaluate(C)))],"to-rgba":[ji(Ot,4),[Wi],(C,[b])=>{const[S,H,q,ee]=b.evaluate(C).rgb;return[255*S,255*H,255*q,ee]}],rgb:[Wi,[Ot,Ot,Ot],aa],rgba:[Wi,[Ot,Ot,Ot,Ot],aa],has:{type:Ti,overloads:[[[_i],(C,[b])=>Ds(b.evaluate(C),C.properties())],[[_i,Zt],(C,[b,S])=>Ds(b.evaluate(C),S.evaluate(C))]]},get:{type:mi,overloads:[[[_i],(C,[b])=>oa(b.evaluate(C),C.properties())],[[_i,Zt],(C,[b,S])=>oa(b.evaluate(C),S.evaluate(C))]]},"feature-state":[mi,[_i],(C,[b])=>oa(b.evaluate(C),C.featureState||{})],properties:[Zt,[],C=>C.properties()],"geometry-type":[_i,[],C=>C.geometryType()],id:[mi,[],C=>C.id()],zoom:[Ot,[],C=>C.globals.zoom],"heatmap-density":[Ot,[],C=>C.globals.heatmapDensity||0],"line-progress":[Ot,[],C=>C.globals.lineProgress||0],accumulated:[mi,[],C=>C.globals.accumulated===void 0?null:C.globals.accumulated],"+":[Ot,hn(Ot),(C,b)=>{let S=0;for(const H of b)S+=H.evaluate(C);return S}],"*":[Ot,hn(Ot),(C,b)=>{let S=1;for(const H of b)S*=H.evaluate(C);return S}],"-":{type:Ot,overloads:[[[Ot,Ot],(C,[b,S])=>b.evaluate(C)-S.evaluate(C)],[[Ot],(C,[b])=>-b.evaluate(C)]]},"/":[Ot,[Ot,Ot],(C,[b,S])=>b.evaluate(C)/S.evaluate(C)],"%":[Ot,[Ot,Ot],(C,[b,S])=>b.evaluate(C)%S.evaluate(C)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(C,[b,S])=>Math.pow(b.evaluate(C),S.evaluate(C))],sqrt:[Ot,[Ot],(C,[b])=>Math.sqrt(b.evaluate(C))],log10:[Ot,[Ot],(C,[b])=>Math.log(b.evaluate(C))/Math.LN10],ln:[Ot,[Ot],(C,[b])=>Math.log(b.evaluate(C))],log2:[Ot,[Ot],(C,[b])=>Math.log(b.evaluate(C))/Math.LN2],sin:[Ot,[Ot],(C,[b])=>Math.sin(b.evaluate(C))],cos:[Ot,[Ot],(C,[b])=>Math.cos(b.evaluate(C))],tan:[Ot,[Ot],(C,[b])=>Math.tan(b.evaluate(C))],asin:[Ot,[Ot],(C,[b])=>Math.asin(b.evaluate(C))],acos:[Ot,[Ot],(C,[b])=>Math.acos(b.evaluate(C))],atan:[Ot,[Ot],(C,[b])=>Math.atan(b.evaluate(C))],min:[Ot,hn(Ot),(C,b)=>Math.min(...b.map(S=>S.evaluate(C)))],max:[Ot,hn(Ot),(C,b)=>Math.max(...b.map(S=>S.evaluate(C)))],abs:[Ot,[Ot],(C,[b])=>Math.abs(b.evaluate(C))],round:[Ot,[Ot],(C,[b])=>{const S=b.evaluate(C);return S<0?-Math.round(-S):Math.round(S)}],floor:[Ot,[Ot],(C,[b])=>Math.floor(b.evaluate(C))],ceil:[Ot,[Ot],(C,[b])=>Math.ceil(b.evaluate(C))],"filter-==":[Ti,[_i,mi],(C,[b,S])=>C.properties()[b.value]===S.value],"filter-id-==":[Ti,[mi],(C,[b])=>C.id()===b.value],"filter-type-==":[Ti,[_i],(C,[b])=>C.geometryType()===b.value],"filter-<":[Ti,[_i,mi],(C,[b,S])=>{const H=C.properties()[b.value],q=S.value;return typeof H==typeof q&&H<q}],"filter-id-<":[Ti,[mi],(C,[b])=>{const S=C.id(),H=b.value;return typeof S==typeof H&&S<H}],"filter->":[Ti,[_i,mi],(C,[b,S])=>{const H=C.properties()[b.value],q=S.value;return typeof H==typeof q&&H>q}],"filter-id->":[Ti,[mi],(C,[b])=>{const S=C.id(),H=b.value;return typeof S==typeof H&&S>H}],"filter-<=":[Ti,[_i,mi],(C,[b,S])=>{const H=C.properties()[b.value],q=S.value;return typeof H==typeof q&&H<=q}],"filter-id-<=":[Ti,[mi],(C,[b])=>{const S=C.id(),H=b.value;return typeof S==typeof H&&S<=H}],"filter->=":[Ti,[_i,mi],(C,[b,S])=>{const H=C.properties()[b.value],q=S.value;return typeof H==typeof q&&H>=q}],"filter-id->=":[Ti,[mi],(C,[b])=>{const S=C.id(),H=b.value;return typeof S==typeof H&&S>=H}],"filter-has":[Ti,[mi],(C,[b])=>b.value in C.properties()],"filter-has-id":[Ti,[],C=>C.id()!==null&&C.id()!==void 0],"filter-type-in":[Ti,[ji(_i)],(C,[b])=>b.value.indexOf(C.geometryType())>=0],"filter-id-in":[Ti,[ji(mi)],(C,[b])=>b.value.indexOf(C.id())>=0],"filter-in-small":[Ti,[_i,ji(mi)],(C,[b,S])=>S.value.indexOf(C.properties()[b.value])>=0],"filter-in-large":[Ti,[_i,ji(mi)],(C,[b,S])=>function(H,q,ee,ie){for(;ee<=ie;){const ae=ee+ie>>1;if(q[ae]===H)return!0;q[ae]>H?ie=ae-1:ee=ae+1}return!1}(C.properties()[b.value],S.value,0,S.value.length-1)],all:{type:Ti,overloads:[[[Ti,Ti],(C,[b,S])=>b.evaluate(C)&&S.evaluate(C)],[hn(Ti),(C,b)=>{for(const S of b)if(!S.evaluate(C))return!1;return!0}]]},any:{type:Ti,overloads:[[[Ti,Ti],(C,[b,S])=>b.evaluate(C)||S.evaluate(C)],[hn(Ti),(C,b)=>{for(const S of b)if(S.evaluate(C))return!0;return!1}]]},"!":[Ti,[Ti],(C,[b])=>!b.evaluate(C)],"is-supported-script":[Ti,[_i],(C,[b])=>{const S=C.globals&&C.globals.isSupportedScript;return!S||S(b.evaluate(C))}],upcase:[_i,[_i],(C,[b])=>b.evaluate(C).toUpperCase()],downcase:[_i,[_i],(C,[b])=>b.evaluate(C).toLowerCase()],concat:[_i,hn(mi),(C,b)=>b.map(S=>Br(S.evaluate(C))).join("")],"resolved-locale":[_i,[wi],(C,[b])=>b.evaluate(C).resolvedLocale()]});class Ur{constructor(b,S){var H;this.expression=b,this._warningHistory={},this._evaluator=new cr,this._defaultValue=S?(H=S).type==="color"&&Js(H.default)?new bi(0,0,0,0):H.type==="color"?bi.parse(H.default)||null:H.type==="padding"?pi.parse(H.default)||null:H.type==="variableAnchorOffsetCollection"?dr.parse(H.default)||null:H.default===void 0?null:H.default:null,this._enumValues=S&&S.type==="enum"?S.values:null}evaluateWithoutErrorHandling(b,S,H,q,ee,ie){return this._evaluator.globals=b,this._evaluator.feature=S,this._evaluator.featureState=H,this._evaluator.canonical=q,this._evaluator.availableImages=ee||null,this._evaluator.formattedSection=ie,this.expression.evaluate(this._evaluator)}evaluate(b,S,H,q,ee,ie){this._evaluator.globals=b,this._evaluator.feature=S||null,this._evaluator.featureState=H||null,this._evaluator.canonical=q,this._evaluator.availableImages=ee||null,this._evaluator.formattedSection=ie||null;try{const ae=this.expression.evaluate(this._evaluator);if(ae==null||typeof ae=="number"&&ae!=ae)return this._defaultValue;if(this._enumValues&&!(ae in this._enumValues))throw new rr(`Expected value to be one of ${Object.keys(this._enumValues).map(de=>JSON.stringify(de)).join(", ")}, but found ${JSON.stringify(ae)} instead.`);return ae}catch(ae){return this._warningHistory[ae.message]||(this._warningHistory[ae.message]=!0,typeof console<"u"&&console.warn(ae.message)),this._defaultValue}}}function $s(C){return Array.isArray(C)&&C.length>0&&typeof C[0]=="string"&&C[0]in gn}function Ji(C,b){const S=new js(gn,ia,[],b?function(q){const ee={color:Wi,string:_i,number:Ot,enum:_i,boolean:Ti,formatted:$i,padding:tr,resolvedImage:Ar,variableAnchorOffsetCollection:Tr};return q.type==="array"?ji(ee[q.value]||mi,q.length):ee[q.type]}(b):void 0),H=S.parse(C,void 0,void 0,void 0,b&&b.type==="string"?{typeAnnotation:"coerce"}:void 0);return H?Rs(new Ur(H,b)):la(S.errors)}class yr{constructor(b,S){this.kind=b,this._styleExpression=S,this.isStateDependent=b!=="constant"&&!Ca(S.expression)}evaluateWithoutErrorHandling(b,S,H,q,ee,ie){return this._styleExpression.evaluateWithoutErrorHandling(b,S,H,q,ee,ie)}evaluate(b,S,H,q,ee,ie){return this._styleExpression.evaluate(b,S,H,q,ee,ie)}}class Fr{constructor(b,S,H,q){this.kind=b,this.zoomStops=H,this._styleExpression=S,this.isStateDependent=b!=="camera"&&!Ca(S.expression),this.interpolationType=q}evaluateWithoutErrorHandling(b,S,H,q,ee,ie){return this._styleExpression.evaluateWithoutErrorHandling(b,S,H,q,ee,ie)}evaluate(b,S,H,q,ee,ie){return this._styleExpression.evaluate(b,S,H,q,ee,ie)}interpolationFactor(b,S,H){return this.interpolationType?gs.interpolationFactor(this.interpolationType,b,S,H):0}}function Mr(C,b){const S=Ji(C,b);if(S.result==="error")return S;const H=S.value.expression,q=Ba(H);if(!q&&!Hn(b))return la([new ii("","data expressions not supported")]);const ee=Ea(H,["zoom"]);if(!ee&&!to(b))return la([new ii("","zoom expressions not supported")]);const ie=Ua(H);return ie||ee?ie instanceof ii?la([ie]):ie instanceof gs&&!io(b)?la([new ii("",'"interpolate" expressions cannot be used with this property')]):Rs(ie?new Fr(q?"camera":"composite",S.value,ie.labels,ie instanceof gs?ie.interpolation:void 0):new yr(q?"constant":"source",S.value)):la([new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class zn{constructor(b,S){this._parameters=b,this._specification=S,di(this,qo(this._parameters,this._specification))}static deserialize(b){return new zn(b._parameters,b._specification)}static serialize(b){return{_parameters:b._parameters,_specification:b._specification}}}function Ua(C){let b=null;if(C instanceof ra)b=Ua(C.result);else if(C instanceof Sa){for(const S of C.args)if(b=Ua(S),b)break}else(C instanceof Ia||C instanceof gs)&&C.input instanceof As&&C.input.name==="zoom"&&(b=C);return b instanceof ii||C.eachChild(S=>{const H=Ua(S);H instanceof ii?b=H:!b&&H?b=new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):b&&H&&b!==H&&(b=new ii("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),b}function ro(C){if(C===!0||C===!1)return!0;if(!Array.isArray(C)||C.length===0)return!1;switch(C[0]){case"has":return C.length>=2&&C[1]!=="$id"&&C[1]!=="$type";case"in":return C.length>=3&&(typeof C[1]!="string"||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return C.length!==3||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(const b of C.slice(1))if(!ro(b)&&typeof b!="boolean")return!1;return!0;default:return!0}}const ml={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fo(C){if(C==null)return{filter:()=>!0,needGeometry:!1};ro(C)||(C=Ma(C));const b=Ji(C,ml);if(b.result==="error")throw new Error(b.value.map(S=>`${S.key}: ${S.message}`).join(", "));return{filter:(S,H,q)=>b.value.evaluate(S,H,{},q),needGeometry:no(C)}}function so(C,b){return C<b?-1:C>b?1:0}function no(C){if(!Array.isArray(C))return!1;if(C[0]==="within")return!0;for(let b=1;b<C.length;b++)if(no(C[b]))return!0;return!1}function Ma(C){if(!C)return!0;const b=C[0];return C.length<=1?b!=="any":b==="=="?ao(C[1],C[2],"=="):b==="!="?Nn(ao(C[1],C[2],"==")):b==="<"||b===">"||b==="<="||b===">="?ao(C[1],C[2],b):b==="any"?(S=C.slice(1),["any"].concat(S.map(Ma))):b==="all"?["all"].concat(C.slice(1).map(Ma)):b==="none"?["all"].concat(C.slice(1).map(Ma).map(Nn)):b==="in"?oo(C[1],C.slice(2)):b==="!in"?Nn(oo(C[1],C.slice(2))):b==="has"?Pa(C[1]):b==="!has"?Nn(Pa(C[1])):b!=="within"||C;var S}function ao(C,b,S){switch(C){case"$type":return[`filter-type-${S}`,b];case"$id":return[`filter-id-${S}`,b];default:return[`filter-${S}`,C,b]}}function oo(C,b){if(b.length===0)return!1;switch(C){case"$type":return["filter-type-in",["literal",b]];case"$id":return["filter-id-in",["literal",b]];default:return b.length>200&&!b.some(S=>typeof S!=typeof b[0])?["filter-in-large",C,["literal",b.sort(so)]]:["filter-in-small",C,["literal",b]]}}function Pa(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function Nn(C){return["!",C]}function La(C){const b=typeof C;if(b==="number"||b==="boolean"||b==="string"||C==null)return JSON.stringify(C);if(Array.isArray(C)){let q="[";for(const ee of C)q+=`${La(ee)},`;return`${q}]`}const S=Object.keys(C).sort();let H="{";for(let q=0;q<S.length;q++)H+=`${JSON.stringify(S[q])}:${La(C[S[q]])},`;return`${H}}`}function _l(C){let b="";for(const S of ke)b+=`/${La(C[S])}`;return b}function Yo(C){const b=C.value;return b?[new bt(C.key,b,"constants have been deprecated as of v8")]:[]}function Wr(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function Vn(C){if(Array.isArray(C))return C.map(Vn);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){const b={};for(const S in C)b[S]=Vn(C[S]);return b}return Wr(C)}function Us(C){const b=C.key,S=C.value,H=C.valueSpec||{},q=C.objectElementValidators||{},ee=C.style,ie=C.styleSpec,ae=C.validateSpec;let de=[];const _e=gr(S);if(_e!=="object")return[new bt(b,S,`object expected, ${_e} found`)];for(const Ee in S){const Fe=Ee.split(".")[0],Pe=H[Fe]||H["*"];let He;if(q[Fe])He=q[Fe];else if(H[Fe])He=ae;else if(q["*"])He=q["*"];else{if(!H["*"]){de.push(new bt(b,S[Ee],`unknown property "${Ee}"`));continue}He=ae}de=de.concat(He({key:(b&&`${b}.`)+Ee,value:S[Ee],valueSpec:Pe,style:ee,styleSpec:ie,object:S,objectKey:Ee,validateSpec:ae},S))}for(const Ee in H)q[Ee]||H[Ee].required&&H[Ee].default===void 0&&S[Ee]===void 0&&de.push(new bt(b,S,`missing required property "${Ee}"`));return de}function ko(C){const b=C.value,S=C.valueSpec,H=C.style,q=C.styleSpec,ee=C.key,ie=C.arrayElementValidator||C.validateSpec;if(gr(b)!=="array")return[new bt(ee,b,`array expected, ${gr(b)} found`)];if(S.length&&b.length!==S.length)return[new bt(ee,b,`array length ${S.length} expected, length ${b.length} found`)];if(S["min-length"]&&b.length<S["min-length"])return[new bt(ee,b,`array length at least ${S["min-length"]} expected, length ${b.length} found`)];let ae={type:S.value,values:S.values};q.$version<7&&(ae.function=S.function),gr(S.value)==="object"&&(ae=S.value);let de=[];for(let _e=0;_e<b.length;_e++)de=de.concat(ie({array:b,arrayIndex:_e,value:b[_e],valueSpec:ae,validateSpec:C.validateSpec,style:H,styleSpec:q,key:`${ee}[${_e}]`}));return de}function Aa(C){const b=C.key,S=C.value,H=C.valueSpec;let q=gr(S);return q==="number"&&S!=S&&(q="NaN"),q!=="number"?[new bt(b,S,`number expected, ${q} found`)]:"minimum"in H&&S<H.minimum?[new bt(b,S,`${S} is less than the minimum value ${H.minimum}`)]:"maximum"in H&&S>H.maximum?[new bt(b,S,`${S} is greater than the maximum value ${H.maximum}`)]:[]}function Do(C){const b=C.valueSpec,S=Wr(C.value.type);let H,q,ee,ie={};const ae=S!=="categorical"&&C.value.property===void 0,de=!ae,_e=gr(C.value.stops)==="array"&&gr(C.value.stops[0])==="array"&&gr(C.value.stops[0][0])==="object",Ee=Us({key:C.key,value:C.value,valueSpec:C.styleSpec.function,validateSpec:C.validateSpec,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:function(He){if(S==="identity")return[new bt(He.key,He.value,'identity function may not have a "stops" property')];let Ne=[];const tt=He.value;return Ne=Ne.concat(ko({key:He.key,value:tt,valueSpec:He.valueSpec,validateSpec:He.validateSpec,style:He.style,styleSpec:He.styleSpec,arrayElementValidator:Fe})),gr(tt)==="array"&&tt.length===0&&Ne.push(new bt(He.key,tt,"array must have at least one stop")),Ne},default:function(He){return He.validateSpec({key:He.key,value:He.value,valueSpec:b,validateSpec:He.validateSpec,style:He.style,styleSpec:He.styleSpec})}}});return S==="identity"&&ae&&Ee.push(new bt(C.key,C.value,'missing required property "property"')),S==="identity"||C.value.stops||Ee.push(new bt(C.key,C.value,'missing required property "stops"')),S==="exponential"&&C.valueSpec.expression&&!io(C.valueSpec)&&Ee.push(new bt(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(de&&!Hn(C.valueSpec)?Ee.push(new bt(C.key,C.value,"property functions not supported")):ae&&!to(C.valueSpec)&&Ee.push(new bt(C.key,C.value,"zoom functions not supported"))),S!=="categorical"&&!_e||C.value.property!==void 0||Ee.push(new bt(C.key,C.value,'"property" property is required')),Ee;function Fe(He){let Ne=[];const tt=He.value,at=He.key;if(gr(tt)!=="array")return[new bt(at,tt,`array expected, ${gr(tt)} found`)];if(tt.length!==2)return[new bt(at,tt,`array length 2 expected, length ${tt.length} found`)];if(_e){if(gr(tt[0])!=="object")return[new bt(at,tt,`object expected, ${gr(tt[0])} found`)];if(tt[0].zoom===void 0)return[new bt(at,tt,"object stop key must have zoom")];if(tt[0].value===void 0)return[new bt(at,tt,"object stop key must have value")];if(ee&&ee>Wr(tt[0].zoom))return[new bt(at,tt[0].zoom,"stop zoom values must appear in ascending order")];Wr(tt[0].zoom)!==ee&&(ee=Wr(tt[0].zoom),q=void 0,ie={}),Ne=Ne.concat(Us({key:`${at}[0]`,value:tt[0],valueSpec:{zoom:{}},validateSpec:He.validateSpec,style:He.style,styleSpec:He.styleSpec,objectElementValidators:{zoom:Aa,value:Pe}}))}else Ne=Ne.concat(Pe({key:`${at}[0]`,value:tt[0],valueSpec:{},validateSpec:He.validateSpec,style:He.style,styleSpec:He.styleSpec},tt));return $s(Vn(tt[1]))?Ne.concat([new bt(`${at}[1]`,tt[1],"expressions are not allowed in function stops.")]):Ne.concat(He.validateSpec({key:`${at}[1]`,value:tt[1],valueSpec:b,validateSpec:He.validateSpec,style:He.style,styleSpec:He.styleSpec}))}function Pe(He,Ne){const tt=gr(He.value),at=Wr(He.value),ct=He.value!==null?He.value:Ne;if(H){if(tt!==H)return[new bt(He.key,ct,`${tt} stop domain type must match previous stop domain type ${H}`)]}else H=tt;if(tt!=="number"&&tt!=="string"&&tt!=="boolean")return[new bt(He.key,ct,"stop domain value must be a number, string, or boolean")];if(tt!=="number"&&S!=="categorical"){let mt=`number expected, ${tt} found`;return Hn(b)&&S===void 0&&(mt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bt(He.key,ct,mt)]}return S!=="categorical"||tt!=="number"||isFinite(at)&&Math.floor(at)===at?S!=="categorical"&&tt==="number"&&q!==void 0&&at<q?[new bt(He.key,ct,"stop domain values must appear in ascending order")]:(q=at,S==="categorical"&&at in ie?[new bt(He.key,ct,"stop domain values must be unique")]:(ie[at]=!0,[])):[new bt(He.key,ct,`integer expected, found ${at}`)]}}function en(C){const b=(C.expressionContext==="property"?Mr:Ji)(Vn(C.value),C.valueSpec);if(b.result==="error")return b.value.map(H=>new bt(`${C.key}${H.key}`,C.value,H.message));const S=b.value.expression||b.value._styleExpression.expression;if(C.expressionContext==="property"&&C.propertyKey==="text-font"&&!S.outputDefined())return[new bt(C.key,C.value,`Invalid data expression for "${C.propertyKey}". Output values must be contained as literals within the expression.`)];if(C.expressionContext==="property"&&C.propertyType==="layout"&&!Ca(S))return[new bt(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if(C.expressionContext==="filter"&&!Ca(S))return[new bt(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&C.expressionContext.indexOf("cluster")===0){if(!Ea(S,["zoom","feature-state"]))return[new bt(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(C.expressionContext==="cluster-initial"&&!Ba(S))return[new bt(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xs(C){const b=C.key,S=C.value,H=C.valueSpec,q=[];return Array.isArray(H.values)?H.values.indexOf(Wr(S))===-1&&q.push(new bt(b,S,`expected one of [${H.values.join(", ")}], ${JSON.stringify(S)} found`)):Object.keys(H.values).indexOf(Wr(S))===-1&&q.push(new bt(b,S,`expected one of [${Object.keys(H.values).join(", ")}], ${JSON.stringify(S)} found`)),q}function Kn(C){return ro(Vn(C.value))?en(di({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):jo(C)}function jo(C){const b=C.value,S=C.key;if(gr(b)!=="array")return[new bt(S,b,`array expected, ${gr(b)} found`)];const H=C.styleSpec;let q,ee=[];if(b.length<1)return[new bt(S,b,"filter array must have at least 1 element")];switch(ee=ee.concat(xs({key:`${S}[0]`,value:b[0],valueSpec:H.filter_operator,style:C.style,styleSpec:C.styleSpec})),Wr(b[0])){case"<":case"<=":case">":case">=":b.length>=2&&Wr(b[1])==="$type"&&ee.push(new bt(S,b,`"$type" cannot be use with operator "${b[0]}"`));case"==":case"!=":b.length!==3&&ee.push(new bt(S,b,`filter array for operator "${b[0]}" must have 3 elements`));case"in":case"!in":b.length>=2&&(q=gr(b[1]),q!=="string"&&ee.push(new bt(`${S}[1]`,b[1],`string expected, ${q} found`)));for(let ie=2;ie<b.length;ie++)q=gr(b[ie]),Wr(b[1])==="$type"?ee=ee.concat(xs({key:`${S}[${ie}]`,value:b[ie],valueSpec:H.geometry_type,style:C.style,styleSpec:C.styleSpec})):q!=="string"&&q!=="number"&&q!=="boolean"&&ee.push(new bt(`${S}[${ie}]`,b[ie],`string, number, or boolean expected, ${q} found`));break;case"any":case"all":case"none":for(let ie=1;ie<b.length;ie++)ee=ee.concat(jo({key:`${S}[${ie}]`,value:b[ie],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":q=gr(b[1]),b.length!==2?ee.push(new bt(S,b,`filter array for "${b[0]}" operator must have 2 elements`)):q!=="string"&&ee.push(new bt(`${S}[1]`,b[1],`string expected, ${q} found`));break;case"within":q=gr(b[1]),b.length!==2?ee.push(new bt(S,b,`filter array for "${b[0]}" operator must have 2 elements`)):q!=="object"&&ee.push(new bt(`${S}[1]`,b[1],`object expected, ${q} found`))}return ee}function ca(C,b){const S=C.key,H=C.validateSpec,q=C.style,ee=C.styleSpec,ie=C.value,ae=C.objectKey,de=ee[`${b}_${C.layerType}`];if(!de)return[];const _e=ae.match(/^(.*)-transition$/);if(b==="paint"&&_e&&de[_e[1]]&&de[_e[1]].transition)return H({key:S,value:ie,valueSpec:ee.transition,style:q,styleSpec:ee});const Ee=C.valueSpec||de[ae];if(!Ee)return[new bt(S,ie,`unknown property "${ae}"`)];let Fe;if(gr(ie)==="string"&&Hn(Ee)&&!Ee.tokens&&(Fe=/^{([^}]+)}$/.exec(ie)))return[new bt(S,ie,`"${ae}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Fe[1])} }\`.`)];const Pe=[];return C.layerType==="symbol"&&(ae==="text-field"&&q&&!q.glyphs&&Pe.push(new bt(S,ie,'use of "text-field" requires a style "glyphs" property')),ae==="text-font"&&Js(Vn(ie))&&Wr(ie.type)==="identity"&&Pe.push(new bt(S,ie,'"text-font" does not support identity functions'))),Pe.concat(H({key:C.key,value:ie,valueSpec:Ee,style:q,styleSpec:ee,expressionContext:"property",propertyType:b,propertyKey:ae}))}function ha(C){return ca(C,"paint")}function _n(C){return ca(C,"layout")}function Bs(C){let b=[];const S=C.value,H=C.key,q=C.style,ee=C.styleSpec;S.type||S.ref||b.push(new bt(H,S,'either "type" or "ref" is required'));let ie=Wr(S.type);const ae=Wr(S.ref);if(S.id){const de=Wr(S.id);for(let _e=0;_e<C.arrayIndex;_e++){const Ee=q.layers[_e];Wr(Ee.id)===de&&b.push(new bt(H,S.id,`duplicate layer id "${S.id}", previously used at line ${Ee.id.__line__}`))}}if("ref"in S){let de;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in S&&b.push(new bt(H,S[_e],`"${_e}" is prohibited for ref layers`))}),q.layers.forEach(_e=>{Wr(_e.id)===ae&&(de=_e)}),de?de.ref?b.push(new bt(H,S.ref,"ref cannot reference another ref layer")):ie=Wr(de.type):b.push(new bt(H,S.ref,`ref layer "${ae}" not found`))}else if(ie!=="background")if(S.source){const de=q.sources&&q.sources[S.source],_e=de&&Wr(de.type);de?_e==="vector"&&ie==="raster"?b.push(new bt(H,S.source,`layer "${S.id}" requires a raster source`)):_e==="raster"&&ie!=="raster"?b.push(new bt(H,S.source,`layer "${S.id}" requires a vector source`)):_e!=="vector"||S["source-layer"]?_e==="raster-dem"&&ie!=="hillshade"?b.push(new bt(H,S.source,"raster-dem source can only be used with layer type 'hillshade'.")):ie!=="line"||!S.paint||!S.paint["line-gradient"]||_e==="geojson"&&de.lineMetrics||b.push(new bt(H,S,`layer "${S.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):b.push(new bt(H,S,`layer "${S.id}" must specify a "source-layer"`)):b.push(new bt(H,S.source,`source "${S.source}" not found`))}else b.push(new bt(H,S,'missing required property "source"'));return b=b.concat(Us({key:H,value:S,valueSpec:ee.layer,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":()=>[],type:()=>C.validateSpec({key:`${H}.type`,value:S.type,valueSpec:ee.layer.type,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,object:S,objectKey:"type"}),filter:Kn,layout:de=>Us({layer:S,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,validateSpec:de.validateSpec,objectElementValidators:{"*":_e=>_n(di({layerType:ie},_e))}}),paint:de=>Us({layer:S,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,validateSpec:de.validateSpec,objectElementValidators:{"*":_e=>ha(di({layerType:ie},_e))}})}})),b}function yn(C){const b=C.value,S=C.key,H=gr(b);return H!=="string"?[new bt(S,b,`string expected, ${H} found`)]:[]}const Uo={promoteId:function({key:C,value:b}){if(gr(b)==="string")return yn({key:C,value:b});{const S=[];for(const H in b)S.push(...yn({key:`${C}.${H}`,value:b[H]}));return S}}};function Gn(C){const b=C.value,S=C.key,H=C.styleSpec,q=C.style,ee=C.validateSpec;if(!b.type)return[new bt(S,b,'"type" is required')];const ie=Wr(b.type);let ae;switch(ie){case"vector":case"raster":case"raster-dem":return ae=Us({key:S,value:b,valueSpec:H[`source_${ie.replace("-","_")}`],style:C.style,styleSpec:H,objectElementValidators:Uo,validateSpec:ee}),ae;case"geojson":if(ae=Us({key:S,value:b,valueSpec:H.source_geojson,style:q,styleSpec:H,validateSpec:ee,objectElementValidators:Uo}),b.cluster)for(const de in b.clusterProperties){const[_e,Ee]=b.clusterProperties[de],Fe=typeof _e=="string"?[_e,["accumulated"],["get",de]]:_e;ae.push(...en({key:`${S}.${de}.map`,value:Ee,validateSpec:ee,expressionContext:"cluster-map"})),ae.push(...en({key:`${S}.${de}.reduce`,value:Fe,validateSpec:ee,expressionContext:"cluster-reduce"}))}return ae;case"video":return Us({key:S,value:b,valueSpec:H.source_video,style:q,validateSpec:ee,styleSpec:H});case"image":return Us({key:S,value:b,valueSpec:H.source_image,style:q,validateSpec:ee,styleSpec:H});case"canvas":return[new bt(S,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xs({key:`${S}.type`,value:b.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:q,validateSpec:ee,styleSpec:H})}}function Qa(C){const b=C.value,S=C.styleSpec,H=S.light,q=C.style;let ee=[];const ie=gr(b);if(b===void 0)return ee;if(ie!=="object")return ee=ee.concat([new bt("light",b,`object expected, ${ie} found`)]),ee;for(const ae in b){const de=ae.match(/^(.*)-transition$/);ee=ee.concat(de&&H[de[1]]&&H[de[1]].transition?C.validateSpec({key:ae,value:b[ae],valueSpec:S.transition,validateSpec:C.validateSpec,style:q,styleSpec:S}):H[ae]?C.validateSpec({key:ae,value:b[ae],valueSpec:H[ae],validateSpec:C.validateSpec,style:q,styleSpec:S}):[new bt(ae,b[ae],`unknown property "${ae}"`)])}return ee}function lo(C){const b=C.value,S=C.styleSpec,H=S.terrain,q=C.style;let ee=[];const ie=gr(b);if(b===void 0)return ee;if(ie!=="object")return ee=ee.concat([new bt("terrain",b,`object expected, ${ie} found`)]),ee;for(const ae in b)ee=ee.concat(H[ae]?C.validateSpec({key:ae,value:b[ae],valueSpec:H[ae],validateSpec:C.validateSpec,style:q,styleSpec:S}):[new bt(ae,b[ae],`unknown property "${ae}"`)]);return ee}function ua(C){let b=[];const S=C.value,H=C.key;if(Array.isArray(S)){const q=[],ee=[];for(const ie in S)S[ie].id&&q.includes(S[ie].id)&&b.push(new bt(H,S,`all the sprites' ids must be unique, but ${S[ie].id} is duplicated`)),q.push(S[ie].id),S[ie].url&&ee.includes(S[ie].url)&&b.push(new bt(H,S,`all the sprites' URLs must be unique, but ${S[ie].url} is duplicated`)),ee.push(S[ie].url),b=b.concat(Us({key:`${H}[${ie}]`,value:S[ie],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:C.validateSpec}));return b}return yn({key:H,value:S})}const Ao={"*":()=>[],array:ko,boolean:function(C){const b=C.value,S=C.key,H=gr(b);return H!=="boolean"?[new bt(S,b,`boolean expected, ${H} found`)]:[]},number:Aa,color:function(C){const b=C.key,S=C.value,H=gr(S);return H!=="string"?[new bt(b,S,`color expected, ${H} found`)]:bi.parse(String(S))?[]:[new bt(b,S,`color expected, "${S}" found`)]},constants:Yo,enum:xs,filter:Kn,function:Do,layer:Bs,object:Us,source:Gn,light:Qa,terrain:lo,string:yn,formatted:function(C){return yn(C).length===0?[]:en(C)},resolvedImage:function(C){return yn(C).length===0?[]:en(C)},padding:function(C){const b=C.key,S=C.value;if(gr(S)==="array"){if(S.length<1||S.length>4)return[new bt(b,S,`padding requires 1 to 4 values; ${S.length} values found`)];const H={type:"number"};let q=[];for(let ee=0;ee<S.length;ee++)q=q.concat(C.validateSpec({key:`${b}[${ee}]`,value:S[ee],validateSpec:C.validateSpec,valueSpec:H}));return q}return Aa({key:b,value:S,valueSpec:{}})},variableAnchorOffsetCollection:function(C){const b=C.key,S=C.value,H=gr(S),q=C.styleSpec;if(H!=="array"||S.length<1||S.length%2!=0)return[new bt(b,S,"variableAnchorOffsetCollection requires a non-empty array of even length")];let ee=[];for(let ie=0;ie<S.length;ie+=2)ee=ee.concat(xs({key:`${b}[${ie}]`,value:S[ie],valueSpec:q.layout_symbol["text-anchor"]})),ee=ee.concat(ko({key:`${b}[${ie+1}]`,value:S[ie+1],valueSpec:{length:2,value:"number"},validateSpec:C.validateSpec,style:C.style,styleSpec:q}));return ee},sprite:ua};function fa(C){const b=C.value,S=C.valueSpec,H=C.styleSpec;return C.validateSpec=fa,S.expression&&Js(Wr(b))?Do(C):S.expression&&$s(Vn(b))?en(C):S.type&&Ao[S.type]?Ao[S.type](C):Us(di({},C,{valueSpec:S.type?H[S.type]:S}))}function Fn(C){const b=C.value,S=C.key,H=yn(C);return H.length||(b.indexOf("{fontstack}")===-1&&H.push(new bt(S,b,'"glyphs" url must include a "{fontstack}" token')),b.indexOf("{range}")===-1&&H.push(new bt(S,b,'"glyphs" url must include a "{range}" token'))),H}function vs(C,b=me){let S=[];return S=S.concat(fa({key:"",value:C,valueSpec:b.$root,styleSpec:b,style:C,validateSpec:fa,objectElementValidators:{glyphs:Fn,"*":()=>[]}})),C.constants&&(S=S.concat(Yo({key:"constants",value:C.constants,style:C,styleSpec:b,validateSpec:fa}))),Oa(S)}function qr(C){return function(b){return C({...b,validateSpec:fa})}}function Oa(C){return[].concat(C).sort((b,S)=>b.line-S.line)}function Ms(C){return function(...b){return Oa(C.apply(this,b))}}vs.source=Ms(qr(Gn)),vs.sprite=Ms(qr(ua)),vs.glyphs=Ms(qr(Fn)),vs.light=Ms(qr(Qa)),vs.terrain=Ms(qr(lo)),vs.layer=Ms(qr(Bs)),vs.filter=Ms(qr(Kn)),vs.paintProperty=Ms(qr(ha)),vs.layoutProperty=Ms(qr(_n));const Ra=vs,co=Ra.light,da=Ra.paintProperty,Zo=Ra.layoutProperty;function Wn(C,b){let S=!1;if(b&&b.length)for(const H of b)C.fire(new Ve(new Error(H.message))),S=!0;return S}class qi{constructor(b,S,H){const q=this.cells=[];if(b instanceof ArrayBuffer){this.arrayBuffer=b;const ie=new Int32Array(this.arrayBuffer);b=ie[0],this.d=(S=ie[1])+2*(H=ie[2]);for(let de=0;de<this.d*this.d;de++){const _e=ie[3+de],Ee=ie[3+de+1];q.push(_e===Ee?null:ie.subarray(_e,Ee))}const ae=ie[3+q.length+1];this.keys=ie.subarray(ie[3+q.length],ae),this.bboxes=ie.subarray(ae),this.insert=this._insertReadonly}else{this.d=S+2*H;for(let ie=0;ie<this.d*this.d;ie++)q.push([]);this.keys=[],this.bboxes=[]}this.n=S,this.extent=b,this.padding=H,this.scale=S/b,this.uid=0;const ee=H/S*b;this.min=-ee,this.max=b+ee}insert(b,S,H,q,ee){this._forEachCell(S,H,q,ee,this._insertCell,this.uid++,void 0,void 0),this.keys.push(b),this.bboxes.push(S),this.bboxes.push(H),this.bboxes.push(q),this.bboxes.push(ee)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(b,S,H,q,ee,ie){this.cells[ee].push(ie)}query(b,S,H,q,ee){const ie=this.min,ae=this.max;if(b<=ie&&S<=ie&&ae<=H&&ae<=q&&!ee)return Array.prototype.slice.call(this.keys);{const de=[];return this._forEachCell(b,S,H,q,this._queryCell,de,{},ee),de}}_queryCell(b,S,H,q,ee,ie,ae,de){const _e=this.cells[ee];if(_e!==null){const Ee=this.keys,Fe=this.bboxes;for(let Pe=0;Pe<_e.length;Pe++){const He=_e[Pe];if(ae[He]===void 0){const Ne=4*He;(de?de(Fe[Ne+0],Fe[Ne+1],Fe[Ne+2],Fe[Ne+3]):b<=Fe[Ne+2]&&S<=Fe[Ne+3]&&H>=Fe[Ne+0]&&q>=Fe[Ne+1])?(ae[He]=!0,ie.push(Ee[He])):ae[He]=!1}}}}_forEachCell(b,S,H,q,ee,ie,ae,de){const _e=this._convertToCellCoord(b),Ee=this._convertToCellCoord(S),Fe=this._convertToCellCoord(H),Pe=this._convertToCellCoord(q);for(let He=_e;He<=Fe;He++)for(let Ne=Ee;Ne<=Pe;Ne++){const tt=this.d*Ne+He;if((!de||de(this._convertFromCellCoord(He),this._convertFromCellCoord(Ne),this._convertFromCellCoord(He+1),this._convertFromCellCoord(Ne+1)))&&ee.call(this,b,S,H,q,tt,ie,ae,de))return}}_convertFromCellCoord(b){return(b-this.padding)/this.scale}_convertToCellCoord(b){return Math.max(0,Math.min(this.d-1,Math.floor(b*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const b=this.cells,S=3+this.cells.length+1+1;let H=0;for(let ie=0;ie<this.cells.length;ie++)H+=this.cells[ie].length;const q=new Int32Array(S+H+this.keys.length+this.bboxes.length);q[0]=this.extent,q[1]=this.n,q[2]=this.padding;let ee=S;for(let ie=0;ie<b.length;ie++){const ae=b[ie];q[3+ie]=ee,q.set(ae,ee),ee+=ae.length}return q[3+b.length]=ee,q.set(this.keys,ee),ee+=this.keys.length,q[3+b.length+1]=ee,q.set(this.bboxes,ee),ee+=this.bboxes.length,q.buffer}static serialize(b,S){const H=b.toArrayBuffer();return S&&S.push(H),{buffer:H}}static deserialize(b){return new qi(b.buffer)}}const tn={};function gi(C,b,S={}){if(tn[C])throw new Error(`${C} is already registered.`);Object.defineProperty(b,"_classRegistryKey",{value:C,writeable:!1}),tn[C]={klass:b,omit:S.omit||[],shallow:S.shallow||[]}}gi("Object",Object),gi("TransferableGridIndex",qi),gi("Color",bi),gi("Error",Error),gi("AJAXError",w),gi("ResolvedImage",Dt),gi("StylePropertyFunction",zn),gi("StyleExpression",Ur,{omit:["_evaluator"]}),gi("ZoomDependentExpression",Fr),gi("ZoomConstantExpression",yr),gi("CompoundExpression",As,{omit:["_evaluate"]});for(const C in gn)gn[C]._classRegistryKey||gi(`Expression_${C}`,gn[C]);function kn(C){return C&&typeof ArrayBuffer<"u"&&(C instanceof ArrayBuffer||C.constructor&&C.constructor.name==="ArrayBuffer")}function be(C,b){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||C instanceof Blob)return C;if(kn(C)||Ri(C))return b&&b.push(C),C;if(ArrayBuffer.isView(C)){const S=C;return b&&b.push(S.buffer),S}if(C instanceof ImageData)return b&&b.push(C.data.buffer),C;if(Array.isArray(C)){const S=[];for(const H of C)S.push(be(H,b));return S}if(typeof C=="object"){const S=C.constructor,H=S._classRegistryKey;if(!H)throw new Error("can't serialize object of unregistered class");if(!tn[H])throw new Error(`${H} is not registered.`);const q=S.serialize?S.serialize(C,b):{};if(S.serialize){if(b&&q===b[b.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const ee in C){if(!C.hasOwnProperty(ee)||tn[H].omit.indexOf(ee)>=0)continue;const ie=C[ee];q[ee]=tn[H].shallow.indexOf(ee)>=0?ie:be(ie,b)}C instanceof Error&&(q.message=C.message)}if(q.$name)throw new Error("$name property is reserved for worker serialization logic.");return H!=="Object"&&(q.$name=H),q}throw new Error("can't serialize object of type "+typeof C)}function Oe(C){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||C instanceof Blob||kn(C)||Ri(C)||ArrayBuffer.isView(C)||C instanceof ImageData)return C;if(Array.isArray(C))return C.map(Oe);if(typeof C=="object"){const b=C.$name||"Object";if(!tn[b])throw new Error(`can't deserialize unregistered class ${b}`);const{klass:S}=tn[b];if(!S)throw new Error(`can't deserialize unregistered class ${b}`);if(S.deserialize)return S.deserialize(C);const H=Object.create(S.prototype);for(const q of Object.keys(C)){if(q==="$name")continue;const ee=C[q];H[q]=tn[b].shallow.indexOf(q)>=0?ee:Oe(ee)}return H}throw new Error("can't deserialize object of type "+typeof C)}class Xe{constructor(){this.first=!0}update(b,S){const H=Math.floor(b);return this.first?(this.first=!1,this.lastIntegerZoom=H,this.lastIntegerZoomTime=0,this.lastZoom=b,this.lastFloorZoom=H,!0):(this.lastFloorZoom>H?(this.lastIntegerZoom=H+1,this.lastIntegerZoomTime=S):this.lastFloorZoom<H&&(this.lastIntegerZoom=H,this.lastIntegerZoomTime=S),b!==this.lastZoom&&(this.lastZoom=b,this.lastFloorZoom=H,!0))}}const je={"Latin-1 Supplement":C=>C>=128&&C<=255,Arabic:C=>C>=1536&&C<=1791,"Arabic Supplement":C=>C>=1872&&C<=1919,"Arabic Extended-A":C=>C>=2208&&C<=2303,"Hangul Jamo":C=>C>=4352&&C<=4607,"Unified Canadian Aboriginal Syllabics":C=>C>=5120&&C<=5759,Khmer:C=>C>=6016&&C<=6143,"Unified Canadian Aboriginal Syllabics Extended":C=>C>=6320&&C<=6399,"General Punctuation":C=>C>=8192&&C<=8303,"Letterlike Symbols":C=>C>=8448&&C<=8527,"Number Forms":C=>C>=8528&&C<=8591,"Miscellaneous Technical":C=>C>=8960&&C<=9215,"Control Pictures":C=>C>=9216&&C<=9279,"Optical Character Recognition":C=>C>=9280&&C<=9311,"Enclosed Alphanumerics":C=>C>=9312&&C<=9471,"Geometric Shapes":C=>C>=9632&&C<=9727,"Miscellaneous Symbols":C=>C>=9728&&C<=9983,"Miscellaneous Symbols and Arrows":C=>C>=11008&&C<=11263,"CJK Radicals Supplement":C=>C>=11904&&C<=12031,"Kangxi Radicals":C=>C>=12032&&C<=12255,"Ideographic Description Characters":C=>C>=12272&&C<=12287,"CJK Symbols and Punctuation":C=>C>=12288&&C<=12351,Hiragana:C=>C>=12352&&C<=12447,Katakana:C=>C>=12448&&C<=12543,Bopomofo:C=>C>=12544&&C<=12591,"Hangul Compatibility Jamo":C=>C>=12592&&C<=12687,Kanbun:C=>C>=12688&&C<=12703,"Bopomofo Extended":C=>C>=12704&&C<=12735,"CJK Strokes":C=>C>=12736&&C<=12783,"Katakana Phonetic Extensions":C=>C>=12784&&C<=12799,"Enclosed CJK Letters and Months":C=>C>=12800&&C<=13055,"CJK Compatibility":C=>C>=13056&&C<=13311,"CJK Unified Ideographs Extension A":C=>C>=13312&&C<=19903,"Yijing Hexagram Symbols":C=>C>=19904&&C<=19967,"CJK Unified Ideographs":C=>C>=19968&&C<=40959,"Yi Syllables":C=>C>=40960&&C<=42127,"Yi Radicals":C=>C>=42128&&C<=42191,"Hangul Jamo Extended-A":C=>C>=43360&&C<=43391,"Hangul Syllables":C=>C>=44032&&C<=55215,"Hangul Jamo Extended-B":C=>C>=55216&&C<=55295,"Private Use Area":C=>C>=57344&&C<=63743,"CJK Compatibility Ideographs":C=>C>=63744&&C<=64255,"Arabic Presentation Forms-A":C=>C>=64336&&C<=65023,"Vertical Forms":C=>C>=65040&&C<=65055,"CJK Compatibility Forms":C=>C>=65072&&C<=65103,"Small Form Variants":C=>C>=65104&&C<=65135,"Arabic Presentation Forms-B":C=>C>=65136&&C<=65279,"Halfwidth and Fullwidth Forms":C=>C>=65280&&C<=65519};function yt(C){for(const b of C)if(jt(b.charCodeAt(0)))return!0;return!1}function Et(C){for(const b of C)if(!Ht(b.charCodeAt(0)))return!1;return!0}function Ht(C){return!(je.Arabic(C)||je["Arabic Supplement"](C)||je["Arabic Extended-A"](C)||je["Arabic Presentation Forms-A"](C)||je["Arabic Presentation Forms-B"](C))}function jt(C){return!(C!==746&&C!==747&&(C<4352||!(je["Bopomofo Extended"](C)||je.Bopomofo(C)||je["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||je["CJK Compatibility Ideographs"](C)||je["CJK Compatibility"](C)||je["CJK Radicals Supplement"](C)||je["CJK Strokes"](C)||!(!je["CJK Symbols and Punctuation"](C)||C>=12296&&C<=12305||C>=12308&&C<=12319||C===12336)||je["CJK Unified Ideographs Extension A"](C)||je["CJK Unified Ideographs"](C)||je["Enclosed CJK Letters and Months"](C)||je["Hangul Compatibility Jamo"](C)||je["Hangul Jamo Extended-A"](C)||je["Hangul Jamo Extended-B"](C)||je["Hangul Jamo"](C)||je["Hangul Syllables"](C)||je.Hiragana(C)||je["Ideographic Description Characters"](C)||je.Kanbun(C)||je["Kangxi Radicals"](C)||je["Katakana Phonetic Extensions"](C)||je.Katakana(C)&&C!==12540||!(!je["Halfwidth and Fullwidth Forms"](C)||C===65288||C===65289||C===65293||C>=65306&&C<=65310||C===65339||C===65341||C===65343||C>=65371&&C<=65503||C===65507||C>=65512&&C<=65519)||!(!je["Small Form Variants"](C)||C>=65112&&C<=65118||C>=65123&&C<=65126)||je["Unified Canadian Aboriginal Syllabics"](C)||je["Unified Canadian Aboriginal Syllabics Extended"](C)||je["Vertical Forms"](C)||je["Yijing Hexagram Symbols"](C)||je["Yi Syllables"](C)||je["Yi Radicals"](C))))}function hi(C){return!(jt(C)||function(b){return!!(je["Latin-1 Supplement"](b)&&(b===167||b===169||b===174||b===177||b===188||b===189||b===190||b===215||b===247)||je["General Punctuation"](b)&&(b===8214||b===8224||b===8225||b===8240||b===8241||b===8251||b===8252||b===8258||b===8263||b===8264||b===8265||b===8273)||je["Letterlike Symbols"](b)||je["Number Forms"](b)||je["Miscellaneous Technical"](b)&&(b>=8960&&b<=8967||b>=8972&&b<=8991||b>=8996&&b<=9e3||b===9003||b>=9085&&b<=9114||b>=9150&&b<=9165||b===9167||b>=9169&&b<=9179||b>=9186&&b<=9215)||je["Control Pictures"](b)&&b!==9251||je["Optical Character Recognition"](b)||je["Enclosed Alphanumerics"](b)||je["Geometric Shapes"](b)||je["Miscellaneous Symbols"](b)&&!(b>=9754&&b<=9759)||je["Miscellaneous Symbols and Arrows"](b)&&(b>=11026&&b<=11055||b>=11088&&b<=11097||b>=11192&&b<=11243)||je["CJK Symbols and Punctuation"](b)||je.Katakana(b)||je["Private Use Area"](b)||je["CJK Compatibility Forms"](b)||je["Small Form Variants"](b)||je["Halfwidth and Fullwidth Forms"](b)||b===8734||b===8756||b===8757||b>=9984&&b<=10087||b>=10102&&b<=10131||b===65532||b===65533)}(C))}function Wt(C){return C>=1424&&C<=2303||je["Arabic Presentation Forms-A"](C)||je["Arabic Presentation Forms-B"](C)}function Gi(C,b){return!(!b&&Wt(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||je.Khmer(C))}function zi(C){for(const b of C)if(Wt(b.charCodeAt(0)))return!0;return!1}const Oi="deferred",mr="loading",ur="loaded";let vr=null,nr="unavailable",Xi=null;const Or=function(C){C&&typeof C=="string"&&C.indexOf("NetworkError")>-1&&(nr="error"),vr&&vr(C)};function Ir(){ws.fire(new Te("pluginStateChange",{pluginStatus:nr,pluginURL:Xi}))}const ws=new De,Ha=function(){return nr},pa=function(){if(nr!==Oi||!Xi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nr=mr,Ir(),Xi&&se({url:Xi},C=>{C?Or(C):(nr=ur,Ir())})},ns={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>nr===ur||ns.applyArabicShaping!=null,isLoading:()=>nr===mr,setState(C){if(!Pt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");nr=C.pluginStatus,Xi=C.pluginURL},isParsed(){if(!Pt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ns.applyArabicShaping!=null&&ns.processBidirectionalText!=null&&ns.processStyledBidirectionalText!=null},getPluginURL(){if(!Pt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Xi}};class Er{constructor(b,S){this.zoom=b,S?(this.now=S.now,this.fadeDuration=S.fadeDuration,this.zoomHistory=S.zoomHistory,this.transition=S.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Xe,this.transition={})}isSupportedScript(b){return function(S,H){for(const q of S)if(!Gi(q.charCodeAt(0),H))return!1;return!0}(b,ns.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const b=this.zoom,S=b-Math.floor(b),H=this.crossFadingFactor();return b>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:S+(1-S)*H}:{fromScale:.5,toScale:1,t:1-(1-H)*S}}}class ga{constructor(b,S){this.property=b,this.value=S,this.expression=function(H,q){if(Js(H))return new zn(H,q);if($s(H)){const ee=Mr(H,q);if(ee.result==="error")throw new Error(ee.value.map(ie=>`${ie.key}: ${ie.message}`).join(", "));return ee.value}{let ee=H;return q.type==="color"&&typeof H=="string"?ee=bi.parse(H):q.type!=="padding"||typeof H!="number"&&!Array.isArray(H)?q.type==="variableAnchorOffsetCollection"&&Array.isArray(H)&&(ee=dr.parse(H)):ee=pi.parse(H),{kind:"constant",evaluate:()=>ee}}}(S===void 0?b.specification.default:S,b.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(b,S,H){return this.property.possiblyEvaluate(this,b,S,H)}}class vn{constructor(b){this.property=b,this.value=new ga(b,void 0)}transitioned(b,S){return new qn(this.property,this.value,S,et({},b.transition,this.transition),b.now)}untransitioned(){return new qn(this.property,this.value,null,{},0)}}class Jo{constructor(b){this._properties=b,this._values=Object.create(b.defaultTransitionablePropertyValues)}getValue(b){return Tt(this._values[b].value.value)}setValue(b,S){Object.prototype.hasOwnProperty.call(this._values,b)||(this._values[b]=new vn(this._values[b].property)),this._values[b].value=new ga(this._values[b].property,S===null?void 0:Tt(S))}getTransition(b){return Tt(this._values[b].transition)}setTransition(b,S){Object.prototype.hasOwnProperty.call(this._values,b)||(this._values[b]=new vn(this._values[b].property)),this._values[b].transition=Tt(S)||void 0}serialize(){const b={};for(const S of Object.keys(this._values)){const H=this.getValue(S);H!==void 0&&(b[S]=H);const q=this.getTransition(S);q!==void 0&&(b[`${S}-transition`]=q)}return b}transitioned(b,S){const H=new ho(this._properties);for(const q of Object.keys(this._values))H._values[q]=this._values[q].transitioned(b,S._values[q]);return H}untransitioned(){const b=new ho(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].untransitioned();return b}}class qn{constructor(b,S,H,q,ee){this.property=b,this.value=S,this.begin=ee+q.delay||0,this.end=this.begin+q.duration||0,b.specification.transition&&(q.delay||q.duration)&&(this.prior=H)}possiblyEvaluate(b,S,H){const q=b.now||0,ee=this.value.possiblyEvaluate(b,S,H),ie=this.prior;if(ie){if(q>this.end)return this.prior=null,ee;if(this.value.isDataDriven())return this.prior=null,ee;if(q<this.begin)return ie.possiblyEvaluate(b,S,H);{const ae=(q-this.begin)/(this.end-this.begin);return this.property.interpolate(ie.possiblyEvaluate(b,S,H),ee,function(de){if(de<=0)return 0;if(de>=1)return 1;const _e=de*de,Ee=_e*de;return 4*(de<.5?Ee:3*(de-_e)+Ee-.75)}(ae))}}return ee}}class ho{constructor(b){this._properties=b,this._values=Object.create(b.defaultTransitioningPropertyValues)}possiblyEvaluate(b,S,H){const q=new Mo(this._properties);for(const ee of Object.keys(this._values))q._values[ee]=this._values[ee].possiblyEvaluate(b,S,H);return q}hasTransition(){for(const b of Object.keys(this._values))if(this._values[b].prior)return!0;return!1}}class yl{constructor(b){this._properties=b,this._values=Object.create(b.defaultPropertyValues)}hasValue(b){return this._values[b].value!==void 0}getValue(b){return Tt(this._values[b].value)}setValue(b,S){this._values[b]=new ga(this._values[b].property,S===null?void 0:Tt(S))}serialize(){const b={};for(const S of Object.keys(this._values)){const H=this.getValue(S);H!==void 0&&(b[S]=H)}return b}possiblyEvaluate(b,S,H){const q=new Mo(this._properties);for(const ee of Object.keys(this._values))q._values[ee]=this._values[ee].possiblyEvaluate(b,S,H);return q}}class zs{constructor(b,S,H){this.property=b,this.value=S,this.parameters=H}isConstant(){return this.value.kind==="constant"}constantOr(b){return this.value.kind==="constant"?this.value.value:b}evaluate(b,S,H,q){return this.property.evaluate(this.value,this.parameters,b,S,H,q)}}class Mo{constructor(b){this._properties=b,this._values=Object.create(b.defaultPossiblyEvaluatedValues)}get(b){return this._values[b]}}class Fi{constructor(b){this.specification=b}possiblyEvaluate(b,S){if(b.isDataDriven())throw new Error("Value should not be data driven");return b.expression.evaluate(S)}interpolate(b,S,H){const q=ks[this.specification.type];return q?q(b,S,H):b}}class Ni{constructor(b,S){this.specification=b,this.overrides=S}possiblyEvaluate(b,S,H,q){return new zs(this,b.expression.kind==="constant"||b.expression.kind==="camera"?{kind:"constant",value:b.expression.evaluate(S,null,{},H,q)}:b.expression,S)}interpolate(b,S,H){if(b.value.kind!=="constant"||S.value.kind!=="constant")return b;if(b.value.value===void 0||S.value.value===void 0)return new zs(this,{kind:"constant",value:void 0},b.parameters);const q=ks[this.specification.type];if(q){const ee=q(b.value.value,S.value.value,H);return new zs(this,{kind:"constant",value:ee},b.parameters)}return b}evaluate(b,S,H,q,ee,ie){return b.kind==="constant"?b.value:b.evaluate(S,H,q,ee,ie)}}class $o extends Ni{possiblyEvaluate(b,S,H,q){if(b.value===void 0)return new zs(this,{kind:"constant",value:void 0},S);if(b.expression.kind==="constant"){const ee=b.expression.evaluate(S,null,{},H,q),ie=b.property.specification.type==="resolvedImage"&&typeof ee!="string"?ee.name:ee,ae=this._calculate(ie,ie,ie,S);return new zs(this,{kind:"constant",value:ae},S)}if(b.expression.kind==="camera"){const ee=this._calculate(b.expression.evaluate({zoom:S.zoom-1}),b.expression.evaluate({zoom:S.zoom}),b.expression.evaluate({zoom:S.zoom+1}),S);return new zs(this,{kind:"constant",value:ee},S)}return new zs(this,b.expression,S)}evaluate(b,S,H,q,ee,ie){if(b.kind==="source"){const ae=b.evaluate(S,H,q,ee,ie);return this._calculate(ae,ae,ae,S)}return b.kind==="composite"?this._calculate(b.evaluate({zoom:Math.floor(S.zoom)-1},H,q),b.evaluate({zoom:Math.floor(S.zoom)},H,q),b.evaluate({zoom:Math.floor(S.zoom)+1},H,q),S):b.value}_calculate(b,S,H,q){return q.zoom>q.zoomHistory.lastIntegerZoom?{from:b,to:S}:{from:H,to:S}}interpolate(b){return b}}class vl{constructor(b){this.specification=b}possiblyEvaluate(b,S,H,q){if(b.value!==void 0){if(b.expression.kind==="constant"){const ee=b.expression.evaluate(S,null,{},H,q);return this._calculate(ee,ee,ee,S)}return this._calculate(b.expression.evaluate(new Er(Math.floor(S.zoom-1),S)),b.expression.evaluate(new Er(Math.floor(S.zoom),S)),b.expression.evaluate(new Er(Math.floor(S.zoom+1),S)),S)}}_calculate(b,S,H,q){return q.zoom>q.zoomHistory.lastIntegerZoom?{from:b,to:S}:{from:H,to:S}}interpolate(b){return b}}class wl{constructor(b){this.specification=b}possiblyEvaluate(b,S,H,q){return!!b.expression.evaluate(S,null,{},H,q)}interpolate(){return!1}}class Ns{constructor(b){this.properties=b,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const S in b){const H=b[S];H.specification.overridable&&this.overridableProperties.push(S);const q=this.defaultPropertyValues[S]=new ga(H,void 0),ee=this.defaultTransitionablePropertyValues[S]=new vn(H);this.defaultTransitioningPropertyValues[S]=ee.untransitioned(),this.defaultPossiblyEvaluatedValues[S]=q.possiblyEvaluate({})}}}gi("DataDrivenProperty",Ni),gi("DataConstantProperty",Fi),gi("CrossFadedDataDrivenProperty",$o),gi("CrossFadedProperty",vl),gi("ColorRampProperty",wl);const za="-transition";class Dn extends De{constructor(b,S){if(super(),this.id=b.id,this.type=b.type,this._featureFilter={filter:()=>!0,needGeometry:!1},b.type!=="custom"&&(this.metadata=b.metadata,this.minzoom=b.minzoom,this.maxzoom=b.maxzoom,b.type!=="background"&&(this.source=b.source,this.sourceLayer=b["source-layer"],this.filter=b.filter),S.layout&&(this._unevaluatedLayout=new yl(S.layout)),S.paint)){this._transitionablePaint=new Jo(S.paint);for(const H in b.paint)this.setPaintProperty(H,b.paint[H],{validate:!1});for(const H in b.layout)this.setLayoutProperty(H,b.layout[H],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Mo(S.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(b){return b==="visibility"?this.visibility:this._unevaluatedLayout.getValue(b)}setLayoutProperty(b,S,H={}){S!=null&&this._validate(Zo,`layers.${this.id}.layout.${b}`,b,S,H)||(b!=="visibility"?this._unevaluatedLayout.setValue(b,S):this.visibility=S)}getPaintProperty(b){return b.endsWith(za)?this._transitionablePaint.getTransition(b.slice(0,-11)):this._transitionablePaint.getValue(b)}setPaintProperty(b,S,H={}){if(S!=null&&this._validate(da,`layers.${this.id}.paint.${b}`,b,S,H))return!1;if(b.endsWith(za))return this._transitionablePaint.setTransition(b.slice(0,-11),S||void 0),!1;{const q=this._transitionablePaint._values[b],ee=q.property.specification["property-type"]==="cross-faded-data-driven",ie=q.value.isDataDriven(),ae=q.value;this._transitionablePaint.setValue(b,S),this._handleSpecialPaintPropertyUpdate(b);const de=this._transitionablePaint._values[b].value;return de.isDataDriven()||ie||ee||this._handleOverridablePaintPropertyUpdate(b,ae,de)}}_handleSpecialPaintPropertyUpdate(b){}_handleOverridablePaintPropertyUpdate(b,S,H){return!1}isHidden(b){return!!(this.minzoom&&b<this.minzoom)||!!(this.maxzoom&&b>=this.maxzoom)||this.visibility==="none"}updateTransitions(b){this._transitioningPaint=this._transitionablePaint.transitioned(b,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(b,S){b.getCrossfadeParameters&&(this._crossfadeParameters=b.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(b,void 0,S)),this.paint=this._transitioningPaint.possiblyEvaluate(b,void 0,S)}serialize(){const b={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(b.layout=b.layout||{},b.layout.visibility=this.visibility),ft(b,(S,H)=>!(S===void 0||H==="layout"&&!Object.keys(S).length||H==="paint"&&!Object.keys(S).length))}_validate(b,S,H,q,ee={}){return(!ee||ee.validate!==!1)&&Wn(this,b.call(Ra,{key:S,layerType:this.type,objectKey:H,value:q,styleSpec:me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const b in this.paint._values){const S=this.paint.get(b);if(S instanceof zs&&Hn(S.property.specification)&&(S.value.kind==="source"||S.value.kind==="composite")&&S.value.isStateDependent)return!0}return!1}}const uA={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Po{constructor(b,S){this._structArray=b,this._pos1=S*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(b,S){return b._trim(),S&&(b.isTransferred=!0,S.push(b.arrayBuffer)),{length:b.length,arrayBuffer:b.arrayBuffer}}static deserialize(b){const S=Object.create(this.prototype);return S.arrayBuffer=b.arrayBuffer,S.length=b.length,S.capacity=b.arrayBuffer.byteLength/S.bytesPerElement,S._refreshViews(),S}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(b){this.reserve(b),this.length=b}reserve(b){if(b>this.capacity){this.capacity=Math.max(b,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const S=this.uint8;this._refreshViews(),S&&this.uint8.set(S)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ts(C,b=1){let S=0,H=0;return{members:C.map(q=>{const ee=uA[q.type].BYTES_PER_ELEMENT,ie=S=Kl(S,Math.max(b,ee)),ae=q.components||1;return H=Math.max(H,ee),S+=ee*ae,{name:q.name,type:q.type,components:ae,offset:ie}}),size:Kl(S,Math.max(H,b)),alignment:b}}function Kl(C,b){return Math.ceil(C/b)*b}class un extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S){const H=this.length;return this.resize(H+1),this.emplace(H,b,S)}emplace(b,S,H){const q=2*b;return this.int16[q+0]=S,this.int16[q+1]=H,b}}un.prototype.bytesPerElement=4,gi("StructArrayLayout2i4",un);class Lo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,S,H)}emplace(b,S,H,q){const ee=3*b;return this.int16[ee+0]=S,this.int16[ee+1]=H,this.int16[ee+2]=q,b}}Lo.prototype.bytesPerElement=6,gi("StructArrayLayout3i6",Lo);class Qo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S,H,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,b,S,H,q)}emplace(b,S,H,q,ee){const ie=4*b;return this.int16[ie+0]=S,this.int16[ie+1]=H,this.int16[ie+2]=q,this.int16[ie+3]=ee,b}}Qo.prototype.bytesPerElement=8,gi("StructArrayLayout4i8",Qo);class el extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie){const ae=this.length;return this.resize(ae+1),this.emplace(ae,b,S,H,q,ee,ie)}emplace(b,S,H,q,ee,ie,ae){const de=6*b;return this.int16[de+0]=S,this.int16[de+1]=H,this.int16[de+2]=q,this.int16[de+3]=ee,this.int16[de+4]=ie,this.int16[de+5]=ae,b}}el.prototype.bytesPerElement=12,gi("StructArrayLayout2i4i12",el);class Oo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie){const ae=this.length;return this.resize(ae+1),this.emplace(ae,b,S,H,q,ee,ie)}emplace(b,S,H,q,ee,ie,ae){const de=4*b,_e=8*b;return this.int16[de+0]=S,this.int16[de+1]=H,this.uint8[_e+4]=q,this.uint8[_e+5]=ee,this.uint8[_e+6]=ie,this.uint8[_e+7]=ae,b}}Oo.prototype.bytesPerElement=8,gi("StructArrayLayout2i4ub8",Oo);class Ro extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S){const H=this.length;return this.resize(H+1),this.emplace(H,b,S)}emplace(b,S,H){const q=2*b;return this.float32[q+0]=S,this.float32[q+1]=H,b}}Ro.prototype.bytesPerElement=8,gi("StructArrayLayout2f8",Ro);class uo extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie,ae,de,_e,Ee){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,b,S,H,q,ee,ie,ae,de,_e,Ee)}emplace(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe){const Pe=10*b;return this.uint16[Pe+0]=S,this.uint16[Pe+1]=H,this.uint16[Pe+2]=q,this.uint16[Pe+3]=ee,this.uint16[Pe+4]=ie,this.uint16[Pe+5]=ae,this.uint16[Pe+6]=de,this.uint16[Pe+7]=_e,this.uint16[Pe+8]=Ee,this.uint16[Pe+9]=Fe,b}}uo.prototype.bytesPerElement=20,gi("StructArrayLayout10ui20",uo);class Na extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe){const He=this.length;return this.resize(He+1),this.emplace(He,b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe)}emplace(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He){const Ne=12*b;return this.int16[Ne+0]=S,this.int16[Ne+1]=H,this.int16[Ne+2]=q,this.int16[Ne+3]=ee,this.uint16[Ne+4]=ie,this.uint16[Ne+5]=ae,this.uint16[Ne+6]=de,this.uint16[Ne+7]=_e,this.int16[Ne+8]=Ee,this.int16[Ne+9]=Fe,this.int16[Ne+10]=Pe,this.int16[Ne+11]=He,b}}Na.prototype.bytesPerElement=24,gi("StructArrayLayout4i4ui4i24",Na);class bl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,S,H)}emplace(b,S,H,q){const ee=3*b;return this.float32[ee+0]=S,this.float32[ee+1]=H,this.float32[ee+2]=q,b}}bl.prototype.bytesPerElement=12,gi("StructArrayLayout3f12",bl);class tl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(b){const S=this.length;return this.resize(S+1),this.emplace(S,b)}emplace(b,S){return this.uint32[1*b+0]=S,b}}tl.prototype.bytesPerElement=4,gi("StructArrayLayout1ul4",tl);class Va extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie,ae,de,_e){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,b,S,H,q,ee,ie,ae,de,_e)}emplace(b,S,H,q,ee,ie,ae,de,_e,Ee){const Fe=10*b,Pe=5*b;return this.int16[Fe+0]=S,this.int16[Fe+1]=H,this.int16[Fe+2]=q,this.int16[Fe+3]=ee,this.int16[Fe+4]=ie,this.int16[Fe+5]=ae,this.uint32[Pe+3]=de,this.uint16[Fe+8]=_e,this.uint16[Fe+9]=Ee,b}}Va.prototype.bytesPerElement=20,gi("StructArrayLayout6i1ul2ui20",Va);class xl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie){const ae=this.length;return this.resize(ae+1),this.emplace(ae,b,S,H,q,ee,ie)}emplace(b,S,H,q,ee,ie,ae){const de=6*b;return this.int16[de+0]=S,this.int16[de+1]=H,this.int16[de+2]=q,this.int16[de+3]=ee,this.int16[de+4]=ie,this.int16[de+5]=ae,b}}xl.prototype.bytesPerElement=12,gi("StructArrayLayout2i2i2i12",xl);class Bl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee){const ie=this.length;return this.resize(ie+1),this.emplace(ie,b,S,H,q,ee)}emplace(b,S,H,q,ee,ie){const ae=4*b,de=8*b;return this.float32[ae+0]=S,this.float32[ae+1]=H,this.float32[ae+2]=q,this.int16[de+6]=ee,this.int16[de+7]=ie,b}}Bl.prototype.bytesPerElement=16,gi("StructArrayLayout2f1f2i16",Bl);class il extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S,H,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,b,S,H,q)}emplace(b,S,H,q,ee){const ie=12*b,ae=3*b;return this.uint8[ie+0]=S,this.uint8[ie+1]=H,this.float32[ae+1]=q,this.float32[ae+2]=ee,b}}il.prototype.bytesPerElement=12,gi("StructArrayLayout2ub2f12",il);class rl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,S,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,S,H)}emplace(b,S,H,q){const ee=3*b;return this.uint16[ee+0]=S,this.uint16[ee+1]=H,this.uint16[ee+2]=q,b}}rl.prototype.bytesPerElement=6,gi("StructArrayLayout3ui6",rl);class Cl extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct){const mt=this.length;return this.resize(mt+1),this.emplace(mt,b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct)}emplace(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct,mt){const ht=24*b,wt=12*b,Ct=48*b;return this.int16[ht+0]=S,this.int16[ht+1]=H,this.uint16[ht+2]=q,this.uint16[ht+3]=ee,this.uint32[wt+2]=ie,this.uint32[wt+3]=ae,this.uint32[wt+4]=de,this.uint16[ht+10]=_e,this.uint16[ht+11]=Ee,this.uint16[ht+12]=Fe,this.float32[wt+7]=Pe,this.float32[wt+8]=He,this.uint8[Ct+36]=Ne,this.uint8[Ct+37]=tt,this.uint8[Ct+38]=at,this.uint32[wt+10]=ct,this.int16[ht+22]=mt,b}}Cl.prototype.bytesPerElement=48,gi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Cl);class xr extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct,mt,ht,wt,Ct,Qt,fi,Ci,ui,li,ti,yi){const si=this.length;return this.resize(si+1),this.emplace(si,b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct,mt,ht,wt,Ct,Qt,fi,Ci,ui,li,ti,yi)}emplace(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt,at,ct,mt,ht,wt,Ct,Qt,fi,Ci,ui,li,ti,yi,si){const Gt=32*b,Pi=16*b;return this.int16[Gt+0]=S,this.int16[Gt+1]=H,this.int16[Gt+2]=q,this.int16[Gt+3]=ee,this.int16[Gt+4]=ie,this.int16[Gt+5]=ae,this.int16[Gt+6]=de,this.int16[Gt+7]=_e,this.uint16[Gt+8]=Ee,this.uint16[Gt+9]=Fe,this.uint16[Gt+10]=Pe,this.uint16[Gt+11]=He,this.uint16[Gt+12]=Ne,this.uint16[Gt+13]=tt,this.uint16[Gt+14]=at,this.uint16[Gt+15]=ct,this.uint16[Gt+16]=mt,this.uint16[Gt+17]=ht,this.uint16[Gt+18]=wt,this.uint16[Gt+19]=Ct,this.uint16[Gt+20]=Qt,this.uint16[Gt+21]=fi,this.uint16[Gt+22]=Ci,this.uint32[Pi+12]=ui,this.float32[Pi+13]=li,this.float32[Pi+14]=ti,this.uint16[Gt+30]=yi,this.uint16[Gt+31]=si,b}}xr.prototype.bytesPerElement=64,gi("StructArrayLayout8i15ui1ul2f2ui64",xr);class J extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b){const S=this.length;return this.resize(S+1),this.emplace(S,b)}emplace(b,S){return this.float32[1*b+0]=S,b}}J.prototype.bytesPerElement=4,gi("StructArrayLayout1f4",J);class x extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,S,H)}emplace(b,S,H,q){const ee=3*b;return this.uint16[6*b+0]=S,this.float32[ee+1]=H,this.float32[ee+2]=q,b}}x.prototype.bytesPerElement=12,gi("StructArrayLayout1ui2f12",x);class Q extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,S,H){const q=this.length;return this.resize(q+1),this.emplace(q,b,S,H)}emplace(b,S,H,q){const ee=4*b;return this.uint32[2*b+0]=S,this.uint16[ee+2]=H,this.uint16[ee+3]=q,b}}Q.prototype.bytesPerElement=8,gi("StructArrayLayout1ul2ui8",Q);class G extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b,S){const H=this.length;return this.resize(H+1),this.emplace(H,b,S)}emplace(b,S,H){const q=2*b;return this.uint16[q+0]=S,this.uint16[q+1]=H,b}}G.prototype.bytesPerElement=4,gi("StructArrayLayout2ui4",G);class X extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(b){const S=this.length;return this.resize(S+1),this.emplace(S,b)}emplace(b,S){return this.uint16[1*b+0]=S,b}}X.prototype.bytesPerElement=2,gi("StructArrayLayout1ui2",X);class te extends Vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(b,S,H,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,b,S,H,q)}emplace(b,S,H,q,ee){const ie=4*b;return this.float32[ie+0]=S,this.float32[ie+1]=H,this.float32[ie+2]=q,this.float32[ie+3]=ee,b}}te.prototype.bytesPerElement=16,gi("StructArrayLayout4f16",te);class le extends Po{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ge(this.anchorPointX,this.anchorPointY)}}le.prototype.size=20;class he extends Va{get(b){return new le(this,b)}}gi("CollisionBoxArray",he);class pe extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(b){this._structArray.uint8[this._pos1+37]=b}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(b){this._structArray.uint8[this._pos1+38]=b}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(b){this._structArray.uint32[this._pos4+10]=b}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}pe.prototype.size=48;class ve extends Cl{get(b){return new pe(this,b)}}gi("PlacedSymbolArray",ve);class Ce extends Po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(b){this._structArray.uint32[this._pos4+12]=b}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ce.prototype.size=64;class Ie extends xr{get(b){return new Ce(this,b)}}gi("SymbolInstanceArray",Ie);class Qe extends J{getoffsetX(b){return this.float32[1*b+0]}}gi("GlyphOffsetArray",Qe);class Je extends Lo{getx(b){return this.int16[3*b+0]}gety(b){return this.int16[3*b+1]}gettileUnitDistanceFromAnchor(b){return this.int16[3*b+2]}}gi("SymbolLineVertexArray",Je);class Ze extends Po{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ze.prototype.size=12;class rt extends x{get(b){return new Ze(this,b)}}gi("TextAnchorOffsetArray",rt);class Ye extends Po{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ye.prototype.size=8;class dt extends Q{get(b){return new Ye(this,b)}}gi("FeatureIndexArray",dt);class Bt extends un{}class ot extends un{}class gt extends un{}class It extends el{}class St extends Oo{}class Lt extends Ro{}class Kt extends uo{}class Rt extends Na{}class Jt extends bl{}class Bi extends tl{}class ar extends xl{}class oi extends il{}class ki extends rl{}class xi extends G{}const Hr=ts([{name:"a_pos",components:2,type:"Int16"}],4),{members:or}=Hr;class Mi{constructor(b=[]){this.segments=b}prepareSegment(b,S,H,q){let ee=this.segments[this.segments.length-1];return b>Mi.MAX_VERTEX_ARRAY_LENGTH&&Vt(`Max vertices per segment is ${Mi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${b}`),(!ee||ee.vertexLength+b>Mi.MAX_VERTEX_ARRAY_LENGTH||ee.sortKey!==q)&&(ee={vertexOffset:S.length,primitiveOffset:H.length,vertexLength:0,primitiveLength:0},q!==void 0&&(ee.sortKey=q),this.segments.push(ee)),ee}get(){return this.segments}destroy(){for(const b of this.segments)for(const S in b.vaos)b.vaos[S].destroy()}static simpleSegment(b,S,H,q){return new Mi([{vertexOffset:b,primitiveOffset:S,vertexLength:H,primitiveLength:q,vaos:{},sortKey:0}])}}function lr(C,b){return 256*(C=We(Math.floor(C),0,255))+We(Math.floor(b),0,255)}Mi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gi("SegmentVector",Mi);const Kr=ts([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var kr={exports:{}},rn={exports:{}};rn.exports=function(C,b){var S,H,q,ee,ie,ae,de,_e;for(H=C.length-(S=3&C.length),q=b,ie=3432918353,ae=461845907,_e=0;_e<H;)de=255&C.charCodeAt(_e)|(255&C.charCodeAt(++_e))<<8|(255&C.charCodeAt(++_e))<<16|(255&C.charCodeAt(++_e))<<24,++_e,q=27492+(65535&(ee=5*(65535&(q=(q^=de=(65535&(de=(de=(65535&de)*ie+(((de>>>16)*ie&65535)<<16)&4294967295)<<15|de>>>17))*ae+(((de>>>16)*ae&65535)<<16)&4294967295)<<13|q>>>19))+((5*(q>>>16)&65535)<<16)&4294967295))+((58964+(ee>>>16)&65535)<<16);switch(de=0,S){case 3:de^=(255&C.charCodeAt(_e+2))<<16;case 2:de^=(255&C.charCodeAt(_e+1))<<8;case 1:q^=de=(65535&(de=(de=(65535&(de^=255&C.charCodeAt(_e)))*ie+(((de>>>16)*ie&65535)<<16)&4294967295)<<15|de>>>17))*ae+(((de>>>16)*ae&65535)<<16)&4294967295}return q^=C.length,q=2246822507*(65535&(q^=q>>>16))+((2246822507*(q>>>16)&65535)<<16)&4294967295,q=3266489909*(65535&(q^=q>>>13))+((3266489909*(q>>>16)&65535)<<16)&4294967295,(q^=q>>>16)>>>0};var bs=rn.exports,Zr={exports:{}};Zr.exports=function(C,b){for(var S,H=C.length,q=b^H,ee=0;H>=4;)S=1540483477*(65535&(S=255&C.charCodeAt(ee)|(255&C.charCodeAt(++ee))<<8|(255&C.charCodeAt(++ee))<<16|(255&C.charCodeAt(++ee))<<24))+((1540483477*(S>>>16)&65535)<<16),q=1540483477*(65535&q)+((1540483477*(q>>>16)&65535)<<16)^(S=1540483477*(65535&(S^=S>>>24))+((1540483477*(S>>>16)&65535)<<16)),H-=4,++ee;switch(H){case 3:q^=(255&C.charCodeAt(ee+2))<<16;case 2:q^=(255&C.charCodeAt(ee+1))<<8;case 1:q=1540483477*(65535&(q^=255&C.charCodeAt(ee)))+((1540483477*(q>>>16)&65535)<<16)}return q=1540483477*(65535&(q^=q>>>13))+((1540483477*(q>>>16)&65535)<<16),(q^=q>>>15)>>>0};var Vs=bs,Un=Zr.exports;kr.exports=Vs,kr.exports.murmur3=Vs,kr.exports.murmur2=Un;var wn=ne(kr.exports);class Mn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(b,S,H,q){this.ids.push(fo(b)),this.positions.push(S,H,q)}getPositions(b){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const S=fo(b);let H=0,q=this.ids.length-1;for(;H<q;){const ie=H+q>>1;this.ids[ie]>=S?q=ie:H=ie+1}const ee=[];for(;this.ids[H]===S;)ee.push({index:this.positions[3*H],start:this.positions[3*H+1],end:this.positions[3*H+2]}),H++;return ee}static serialize(b,S){const H=new Float64Array(b.ids),q=new Uint32Array(b.positions);return ma(H,q,0,H.length-1),S&&S.push(H.buffer,q.buffer),{ids:H,positions:q}}static deserialize(b){const S=new Mn;return S.ids=b.ids,S.positions=b.positions,S.indexed=!0,S}}function fo(C){const b=+C;return!isNaN(b)&&b<=Number.MAX_SAFE_INTEGER?b:wn(String(C))}function ma(C,b,S,H){for(;S<H;){const q=C[S+H>>1];let ee=S-1,ie=H+1;for(;;){do ee++;while(C[ee]<q);do ie--;while(C[ie]>q);if(ee>=ie)break;Xn(C,ee,ie),Xn(b,3*ee,3*ie),Xn(b,3*ee+1,3*ie+1),Xn(b,3*ee+2,3*ie+2)}ie-S<H-ie?(ma(C,b,S,ie),S=ie+1):(ma(C,b,ie+1,H),H=ie)}}function Xn(C,b,S){const H=C[b];C[b]=C[S],C[S]=H}gi("FeaturePositionMap",Mn);class is{constructor(b,S){this.gl=b.gl,this.location=S}}class cs extends is{constructor(b,S){super(b,S),this.current=0}set(b){this.current!==b&&(this.current=b,this.gl.uniform1f(this.location,b))}}class Cs extends is{constructor(b,S){super(b,S),this.current=[0,0,0,0]}set(b){b[0]===this.current[0]&&b[1]===this.current[1]&&b[2]===this.current[2]&&b[3]===this.current[3]||(this.current=b,this.gl.uniform4f(this.location,b[0],b[1],b[2],b[3]))}}class po extends is{constructor(b,S){super(b,S),this.current=bi.transparent}set(b){b.r===this.current.r&&b.g===this.current.g&&b.b===this.current.b&&b.a===this.current.a||(this.current=b,this.gl.uniform4f(this.location,b.r,b.g,b.b,b.a))}}const hs=new Float32Array(16);function as(C){return[lr(255*C.r,255*C.g),lr(255*C.b,255*C.a)]}class Es{constructor(b,S,H){this.value=b,this.uniformNames=S.map(q=>`u_${q}`),this.type=H}setUniform(b,S,H){b.set(H.constantOr(this.value))}getBinding(b,S,H){return this.type==="color"?new po(b,S):new cs(b,S)}}class Gr{constructor(b,S){this.uniformNames=S.map(H=>`u_${H}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(b,S){this.pixelRatioFrom=S.pixelRatio,this.pixelRatioTo=b.pixelRatio,this.patternFrom=S.tlbr,this.patternTo=b.tlbr}setUniform(b,S,H,q){const ee=q==="u_pattern_to"?this.patternTo:q==="u_pattern_from"?this.patternFrom:q==="u_pixel_ratio_to"?this.pixelRatioTo:q==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ee&&b.set(ee)}getBinding(b,S,H){return H.substr(0,9)==="u_pattern"?new Cs(b,S):new cs(b,S)}}class Yn{constructor(b,S,H,q){this.expression=b,this.type=H,this.maxValue=0,this.paintVertexAttributes=S.map(ee=>({name:`a_${ee}`,type:"Float32",components:H==="color"?2:1,offset:0})),this.paintVertexArray=new q}populatePaintArray(b,S,H,q,ee){const ie=this.paintVertexArray.length,ae=this.expression.evaluate(new Er(0),S,{},q,[],ee);this.paintVertexArray.resize(b),this._setPaintValue(ie,b,ae)}updatePaintArray(b,S,H,q){const ee=this.expression.evaluate({zoom:0},H,q);this._setPaintValue(b,S,ee)}_setPaintValue(b,S,H){if(this.type==="color"){const q=as(H);for(let ee=b;ee<S;ee++)this.paintVertexArray.emplace(ee,q[0],q[1])}else{for(let q=b;q<S;q++)this.paintVertexArray.emplace(q,H);this.maxValue=Math.max(this.maxValue,Math.abs(H))}}upload(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bn{constructor(b,S,H,q,ee,ie){this.expression=b,this.uniformNames=S.map(ae=>`u_${ae}_t`),this.type=H,this.useIntegerZoom=q,this.zoom=ee,this.maxValue=0,this.paintVertexAttributes=S.map(ae=>({name:`a_${ae}`,type:"Float32",components:H==="color"?4:2,offset:0})),this.paintVertexArray=new ie}populatePaintArray(b,S,H,q,ee){const ie=this.expression.evaluate(new Er(this.zoom),S,{},q,[],ee),ae=this.expression.evaluate(new Er(this.zoom+1),S,{},q,[],ee),de=this.paintVertexArray.length;this.paintVertexArray.resize(b),this._setPaintValue(de,b,ie,ae)}updatePaintArray(b,S,H,q){const ee=this.expression.evaluate({zoom:this.zoom},H,q),ie=this.expression.evaluate({zoom:this.zoom+1},H,q);this._setPaintValue(b,S,ee,ie)}_setPaintValue(b,S,H,q){if(this.type==="color"){const ee=as(H),ie=as(q);for(let ae=b;ae<S;ae++)this.paintVertexArray.emplace(ae,ee[0],ee[1],ie[0],ie[1])}else{for(let ee=b;ee<S;ee++)this.paintVertexArray.emplace(ee,H,q);this.maxValue=Math.max(this.maxValue,Math.abs(H),Math.abs(q))}}upload(b){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(b,S){const H=this.useIntegerZoom?Math.floor(S.zoom):S.zoom,q=We(this.expression.interpolationFactor(H,this.zoom,this.zoom+1),0,1);b.set(q)}getBinding(b,S,H){return new cs(b,S)}}class _a{constructor(b,S,H,q,ee,ie){this.expression=b,this.type=S,this.useIntegerZoom=H,this.zoom=q,this.layerId=ie,this.zoomInPaintVertexArray=new ee,this.zoomOutPaintVertexArray=new ee}populatePaintArray(b,S,H){const q=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(b),this.zoomOutPaintVertexArray.resize(b),this._setPaintValues(q,b,S.patterns&&S.patterns[this.layerId],H)}updatePaintArray(b,S,H,q,ee){this._setPaintValues(b,S,H.patterns&&H.patterns[this.layerId],ee)}_setPaintValues(b,S,H,q){if(!q||!H)return;const{min:ee,mid:ie,max:ae}=H,de=q[ee],_e=q[ie],Ee=q[ae];if(de&&_e&&Ee)for(let Fe=b;Fe<S;Fe++)this.zoomInPaintVertexArray.emplace(Fe,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],_e.pixelRatio,de.pixelRatio),this.zoomOutPaintVertexArray.emplace(Fe,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],Ee.tl[0],Ee.tl[1],Ee.br[0],Ee.br[1],_e.pixelRatio,Ee.pixelRatio)}upload(b){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=b.createVertexBuffer(this.zoomInPaintVertexArray,Kr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=b.createVertexBuffer(this.zoomOutPaintVertexArray,Kr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gl{constructor(b,S,H){this.binders={},this._buffers=[];const q=[];for(const ee in b.paint._values){if(!H(ee))continue;const ie=b.paint.get(ee);if(!(ie instanceof zs&&Hn(ie.property.specification)))continue;const ae=fA(ee,b.type),de=ie.value,_e=ie.property.specification.type,Ee=ie.property.useIntegerZoom,Fe=ie.property.specification["property-type"],Pe=Fe==="cross-faded"||Fe==="cross-faded-data-driven";if(de.kind==="constant")this.binders[ee]=Pe?new Gr(de.value,ae):new Es(de.value,ae,_e),q.push(`/u_${ee}`);else if(de.kind==="source"||Pe){const He=Ga(ee,_e,"source");this.binders[ee]=Pe?new _a(de,_e,Ee,S,He,b.id):new Yn(de,ae,_e,He),q.push(`/a_${ee}`)}else{const He=Ga(ee,_e,"composite");this.binders[ee]=new bn(de,ae,_e,Ee,S,He),q.push(`/z_${ee}`)}}this.cacheKey=q.sort().join("")}getMaxValue(b){const S=this.binders[b];return S instanceof Yn||S instanceof bn?S.maxValue:0}populatePaintArrays(b,S,H,q,ee){for(const ie in this.binders){const ae=this.binders[ie];(ae instanceof Yn||ae instanceof bn||ae instanceof _a)&&ae.populatePaintArray(b,S,H,q,ee)}}setConstantPatternPositions(b,S){for(const H in this.binders){const q=this.binders[H];q instanceof Gr&&q.setConstantPatternPositions(b,S)}}updatePaintArrays(b,S,H,q,ee){let ie=!1;for(const ae in b){const de=S.getPositions(ae);for(const _e of de){const Ee=H.feature(_e.index);for(const Fe in this.binders){const Pe=this.binders[Fe];if((Pe instanceof Yn||Pe instanceof bn||Pe instanceof _a)&&Pe.expression.isStateDependent===!0){const He=q.paint.get(Fe);Pe.expression=He.value,Pe.updatePaintArray(_e.start,_e.end,Ee,b[ae],ee),ie=!0}}}}return ie}defines(){const b=[];for(const S in this.binders){const H=this.binders[S];(H instanceof Es||H instanceof Gr)&&b.push(...H.uniformNames.map(q=>`#define HAS_UNIFORM_${q}`))}return b}getBinderAttributes(){const b=[];for(const S in this.binders){const H=this.binders[S];if(H instanceof Yn||H instanceof bn)for(let q=0;q<H.paintVertexAttributes.length;q++)b.push(H.paintVertexAttributes[q].name);else if(H instanceof _a)for(let q=0;q<Kr.members.length;q++)b.push(Kr.members[q].name)}return b}getBinderUniforms(){const b=[];for(const S in this.binders){const H=this.binders[S];if(H instanceof Es||H instanceof Gr||H instanceof bn)for(const q of H.uniformNames)b.push(q)}return b}getPaintVertexBuffers(){return this._buffers}getUniforms(b,S){const H=[];for(const q in this.binders){const ee=this.binders[q];if(ee instanceof Es||ee instanceof Gr||ee instanceof bn){for(const ie of ee.uniformNames)if(S[ie]){const ae=ee.getBinding(b,S[ie],ie);H.push({name:ie,property:q,binding:ae})}}}return H}setUniforms(b,S,H,q){for(const{name:ee,property:ie,binding:ae}of S)this.binders[ie].setUniform(ae,q,H.get(ie),ee)}updatePaintBuffers(b){this._buffers=[];for(const S in this.binders){const H=this.binders[S];if(b&&H instanceof _a){const q=b.fromScale===2?H.zoomInPaintVertexBuffer:H.zoomOutPaintVertexBuffer;q&&this._buffers.push(q)}else(H instanceof Yn||H instanceof bn)&&H.paintVertexBuffer&&this._buffers.push(H.paintVertexBuffer)}}upload(b){for(const S in this.binders){const H=this.binders[S];(H instanceof Yn||H instanceof bn||H instanceof _a)&&H.upload(b)}this.updatePaintBuffers()}destroy(){for(const b in this.binders){const S=this.binders[b];(S instanceof Yn||S instanceof bn||S instanceof _a)&&S.destroy()}}}class Ka{constructor(b,S,H=()=>!0){this.programConfigurations={};for(const q of b)this.programConfigurations[q.id]=new Gl(q,S,H);this.needsUpload=!1,this._featureMap=new Mn,this._bufferOffset=0}populatePaintArrays(b,S,H,q,ee,ie){for(const ae in this.programConfigurations)this.programConfigurations[ae].populatePaintArrays(b,S,q,ee,ie);S.id!==void 0&&this._featureMap.add(S.id,H,this._bufferOffset,b),this._bufferOffset=b,this.needsUpload=!0}updatePaintArrays(b,S,H,q){for(const ee of H)this.needsUpload=this.programConfigurations[ee.id].updatePaintArrays(b,this._featureMap,S,ee,q)||this.needsUpload}get(b){return this.programConfigurations[b]}upload(b){if(this.needsUpload){for(const S in this.programConfigurations)this.programConfigurations[S].upload(b);this.needsUpload=!1}}destroy(){for(const b in this.programConfigurations)this.programConfigurations[b].destroy()}}function fA(C,b){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[C]||[C.replace(`${b}-`,"").replace(/-/g,"_")]}function Ga(C,b,S){const H={color:{source:Ro,composite:te},number:{source:J,composite:Ro}},q=function(ee){return{"line-pattern":{source:Kt,composite:Kt},"fill-pattern":{source:Kt,composite:Kt},"fill-extrusion-pattern":{source:Kt,composite:Kt}}[ee]}(C);return q&&q[S]||H[b][S]}gi("ConstantBinder",Es),gi("CrossFadedConstantBinder",Gr),gi("SourceExpressionBinder",Yn),gi("CrossFadedCompositeBinder",_a),gi("CompositeExpressionBinder",bn),gi("ProgramConfiguration",Gl,{omit:["_buffers"]}),gi("ProgramConfigurationSet",Ka);const Xr=8192,sl=Math.pow(2,14)-1,El=-sl-1;function jn(C){const b=Xr/C.extent,S=C.loadGeometry();for(let H=0;H<S.length;H++){const q=S[H];for(let ee=0;ee<q.length;ee++){const ie=q[ee],ae=Math.round(ie.x*b),de=Math.round(ie.y*b);ie.x=We(ae,El,sl),ie.y=We(de,El,sl),(ae<ie.x||ae>ie.x+1||de<ie.y||de>ie.y+1)&&Vt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return S}function ya(C,b){return{type:C.type,id:C.id,properties:C.properties,geometry:b?jn(C):[]}}function go(C,b,S,H,q){C.emplaceBack(2*b+(H+1)/2,2*S+(q+1)/2)}class dA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(S=>S.id),this.index=b.index,this.hasPattern=!1,this.layoutVertexArray=new ot,this.indexArray=new ki,this.segments=new Mi,this.programConfigurations=new Ka(b.layers,b.zoom),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id)}populate(b,S,H){const q=this.layers[0],ee=[];let ie=null,ae=!1;q.type==="circle"&&(ie=q.layout.get("circle-sort-key"),ae=!ie.isConstant());for(const{feature:de,id:_e,index:Ee,sourceLayerIndex:Fe}of b){const Pe=this.layers[0]._featureFilter.needGeometry,He=ya(de,Pe);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),He,H))continue;const Ne=ae?ie.evaluate(He,{},H):void 0,tt={id:_e,properties:de.properties,type:de.type,sourceLayerIndex:Fe,index:Ee,geometry:Pe?He.geometry:jn(de),patterns:{},sortKey:Ne};ee.push(tt)}ae&&ee.sort((de,_e)=>de.sortKey-_e.sortKey);for(const de of ee){const{geometry:_e,index:Ee,sourceLayerIndex:Fe}=de,Pe=b[Ee].feature;this.addFeature(de,_e,Ee,H),S.featureIndex.insert(Pe,_e,Ee,Fe,this.index)}}update(b,S,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,S,this.stateDependentLayers,H)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,or),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(b,S,H,q){for(const ee of S)for(const ie of ee){const ae=ie.x,de=ie.y;if(ae<0||ae>=Xr||de<0||de>=Xr)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,b.sortKey),Ee=_e.vertexLength;go(this.layoutVertexArray,ae,de,-1,-1),go(this.layoutVertexArray,ae,de,1,-1),go(this.layoutVertexArray,ae,de,1,1),go(this.layoutVertexArray,ae,de,-1,1),this.indexArray.emplaceBack(Ee,Ee+1,Ee+2),this.indexArray.emplaceBack(Ee,Ee+3,Ee+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,{},q)}}function sc(C,b){for(let S=0;S<C.length;S++)if(nl(b,C[S]))return!0;for(let S=0;S<b.length;S++)if(nl(C,b[S]))return!0;return!!pA(C,b)}function Lh(C,b,S){return!!nl(C,b)||!!gA(b,C,S)}function nc(C,b){if(C.length===1)return oc(b,C[0]);for(let S=0;S<b.length;S++){const H=b[S];for(let q=0;q<H.length;q++)if(nl(C,H[q]))return!0}for(let S=0;S<C.length;S++)if(oc(b,C[S]))return!0;for(let S=0;S<b.length;S++)if(pA(C,b[S]))return!0;return!1}function Qh(C,b,S){if(C.length>1){if(pA(C,b))return!0;for(let H=0;H<b.length;H++)if(gA(b[H],C,S))return!0}for(let H=0;H<C.length;H++)if(gA(C[H],b,S))return!0;return!1}function pA(C,b){if(C.length===0||b.length===0)return!1;for(let S=0;S<C.length-1;S++){const H=C[S],q=C[S+1];for(let ee=0;ee<b.length-1;ee++)if(Oh(H,q,b[ee],b[ee+1]))return!0}return!1}function Oh(C,b,S,H){return vt(C,S,H)!==vt(b,S,H)&&vt(C,b,S)!==vt(C,b,H)}function gA(C,b,S){const H=S*S;if(b.length===1)return C.distSqr(b[0])<H;for(let q=1;q<b.length;q++)if(ac(C,b[q-1],b[q])<H)return!0;return!1}function ac(C,b,S){const H=b.distSqr(S);if(H===0)return C.distSqr(b);const q=((C.x-b.x)*(S.x-b.x)+(C.y-b.y)*(S.y-b.y))/H;return C.distSqr(q<0?b:q>1?S:S.sub(b)._mult(q)._add(b))}function oc(C,b){let S,H,q,ee=!1;for(let ie=0;ie<C.length;ie++){S=C[ie];for(let ae=0,de=S.length-1;ae<S.length;de=ae++)H=S[ae],q=S[de],H.y>b.y!=q.y>b.y&&b.x<(q.x-H.x)*(b.y-H.y)/(q.y-H.y)+H.x&&(ee=!ee)}return ee}function nl(C,b){let S=!1;for(let H=0,q=C.length-1;H<C.length;q=H++){const ee=C[H],ie=C[q];ee.y>b.y!=ie.y>b.y&&b.x<(ie.x-ee.x)*(b.y-ee.y)/(ie.y-ee.y)+ee.x&&(S=!S)}return S}function Rh(C,b,S){const H=S[0],q=S[2];if(C.x<H.x&&b.x<H.x||C.x>q.x&&b.x>q.x||C.y<H.y&&b.y<H.y||C.y>q.y&&b.y>q.y)return!1;const ee=vt(C,b,S[0]);return ee!==vt(C,b,S[1])||ee!==vt(C,b,S[2])||ee!==vt(C,b,S[3])}function Tl(C,b,S){const H=b.paint.get(C).value;return H.kind==="constant"?H.value:S.programConfigurations.get(b.id).getMaxValue(C)}function Wl(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function ql(C,b,S,H,q){if(!b[0]&&!b[1])return C;const ee=ge.convert(b)._mult(q);S==="viewport"&&ee._rotate(-H);const ie=[];for(let ae=0;ae<C.length;ae++)ie.push(C[ae].sub(ee));return ie}let lc,Ac;gi("CircleBucket",dA,{omit:["layers"]});var Hh={get paint(){return Ac=Ac||new Ns({"circle-radius":new Ni(me.paint_circle["circle-radius"]),"circle-color":new Ni(me.paint_circle["circle-color"]),"circle-blur":new Ni(me.paint_circle["circle-blur"]),"circle-opacity":new Ni(me.paint_circle["circle-opacity"]),"circle-translate":new Fi(me.paint_circle["circle-translate"]),"circle-translate-anchor":new Fi(me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fi(me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fi(me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ni(me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ni(me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ni(me.paint_circle["circle-stroke-opacity"])})},get layout(){return lc=lc||new Ns({"circle-sort-key":new Ni(me.layout_circle["circle-sort-key"])})}},Ks=1e-6,al=typeof Float32Array<"u"?Float32Array:Array;function mA(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function cc(C,b,S){var H=b[0],q=b[1],ee=b[2],ie=b[3],ae=b[4],de=b[5],_e=b[6],Ee=b[7],Fe=b[8],Pe=b[9],He=b[10],Ne=b[11],tt=b[12],at=b[13],ct=b[14],mt=b[15],ht=S[0],wt=S[1],Ct=S[2],Qt=S[3];return C[0]=ht*H+wt*ae+Ct*Fe+Qt*tt,C[1]=ht*q+wt*de+Ct*Pe+Qt*at,C[2]=ht*ee+wt*_e+Ct*He+Qt*ct,C[3]=ht*ie+wt*Ee+Ct*Ne+Qt*mt,C[4]=(ht=S[4])*H+(wt=S[5])*ae+(Ct=S[6])*Fe+(Qt=S[7])*tt,C[5]=ht*q+wt*de+Ct*Pe+Qt*at,C[6]=ht*ee+wt*_e+Ct*He+Qt*ct,C[7]=ht*ie+wt*Ee+Ct*Ne+Qt*mt,C[8]=(ht=S[8])*H+(wt=S[9])*ae+(Ct=S[10])*Fe+(Qt=S[11])*tt,C[9]=ht*q+wt*de+Ct*Pe+Qt*at,C[10]=ht*ee+wt*_e+Ct*He+Qt*ct,C[11]=ht*ie+wt*Ee+Ct*Ne+Qt*mt,C[12]=(ht=S[12])*H+(wt=S[13])*ae+(Ct=S[14])*Fe+(Qt=S[15])*tt,C[13]=ht*q+wt*de+Ct*Pe+Qt*at,C[14]=ht*ee+wt*_e+Ct*He+Qt*ct,C[15]=ht*ie+wt*Ee+Ct*Ne+Qt*mt,C}Math.hypot||(Math.hypot=function(){for(var C=0,b=arguments.length;b--;)C+=arguments[b]*arguments[b];return Math.sqrt(C)});var Il,zh=cc;function Xl(C,b,S){var H=b[0],q=b[1],ee=b[2],ie=b[3];return C[0]=S[0]*H+S[4]*q+S[8]*ee+S[12]*ie,C[1]=S[1]*H+S[5]*q+S[9]*ee+S[13]*ie,C[2]=S[2]*H+S[6]*q+S[10]*ee+S[14]*ie,C[3]=S[3]*H+S[7]*q+S[11]*ee+S[15]*ie,C}Il=new al(4),al!=Float32Array&&(Il[0]=0,Il[1]=0,Il[2]=0,Il[3]=0);class Nh extends Dn{constructor(b){super(b,Hh)}createBucket(b){return new dA(b)}queryRadius(b){const S=b;return Tl("circle-radius",this,S)+Tl("circle-stroke-width",this,S)+Wl(this.paint.get("circle-translate"))}queryIntersectsFeature(b,S,H,q,ee,ie,ae,de){const _e=ql(b,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ie.angle,ae),Ee=this.paint.get("circle-radius").evaluate(S,H)+this.paint.get("circle-stroke-width").evaluate(S,H),Fe=this.paint.get("circle-pitch-alignment")==="map",Pe=Fe?_e:function(Ne,tt){return Ne.map(at=>hc(at,tt))}(_e,de),He=Fe?Ee*ae:Ee;for(const Ne of q)for(const tt of Ne){const at=Fe?tt:hc(tt,de);let ct=He;const mt=Xl([],[tt.x,tt.y,0,1],de);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ct*=mt[3]/ie.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ct*=ie.cameraToCenterDistance/mt[3]),Lh(Pe,at,ct))return!0}return!1}}function hc(C,b){const S=Xl([],[C.x,C.y,0,1],b);return new ge(S[0]/S[3],S[1]/S[3])}class uc extends dA{}let fc;gi("HeatmapBucket",uc,{omit:["layers"]});var Vh={get paint(){return fc=fc||new Ns({"heatmap-radius":new Ni(me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ni(me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fi(me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wl(me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fi(me.paint_heatmap["heatmap-opacity"])})}};function _A(C,{width:b,height:S},H,q){if(q){if(q instanceof Uint8ClampedArray)q=new Uint8Array(q.buffer);else if(q.length!==b*S*H)throw new RangeError(`mismatched image size. expected: ${q.length} but got: ${b*S*H}`)}else q=new Uint8Array(b*S*H);return C.width=b,C.height=S,C.data=q,C}function dc(C,{width:b,height:S},H){if(b===C.width&&S===C.height)return;const q=_A({},{width:b,height:S},H);yA(C,q,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,b),height:Math.min(C.height,S)},H),C.width=b,C.height=S,C.data=q.data}function yA(C,b,S,H,q,ee){if(q.width===0||q.height===0)return b;if(q.width>C.width||q.height>C.height||S.x>C.width-q.width||S.y>C.height-q.height)throw new RangeError("out of range source coordinates for image copy");if(q.width>b.width||q.height>b.height||H.x>b.width-q.width||H.y>b.height-q.height)throw new RangeError("out of range destination coordinates for image copy");const ie=C.data,ae=b.data;if(ie===ae)throw new Error("srcData equals dstData, so image is already copied");for(let de=0;de<q.height;de++){const _e=((S.y+de)*C.width+S.x)*ee,Ee=((H.y+de)*b.width+H.x)*ee;for(let Fe=0;Fe<q.width*ee;Fe++)ae[Ee+Fe]=ie[_e+Fe]}return b}class Sl{constructor(b,S){_A(this,b,1,S)}resize(b){dc(this,b,1)}clone(){return new Sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(b,S,H,q,ee){yA(b,S,H,q,ee,1)}}class xn{constructor(b,S){_A(this,b,4,S)}resize(b){dc(this,b,4)}replace(b,S){S?this.data.set(b):this.data=b instanceof Uint8ClampedArray?new Uint8Array(b.buffer):b}clone(){return new xn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(b,S,H,q,ee){yA(b,S,H,q,ee,4)}}function pc(C){const b={},S=C.resolution||256,H=C.clips?C.clips.length:1,q=C.image||new xn({width:S,height:H});if(Math.log(S)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${S}`);const ee=(ie,ae,de)=>{b[C.evaluationKey]=de;const _e=C.expression.evaluate(b);q.data[ie+ae+0]=Math.floor(255*_e.r/_e.a),q.data[ie+ae+1]=Math.floor(255*_e.g/_e.a),q.data[ie+ae+2]=Math.floor(255*_e.b/_e.a),q.data[ie+ae+3]=Math.floor(255*_e.a)};if(C.clips)for(let ie=0,ae=0;ie<H;++ie,ae+=4*S)for(let de=0,_e=0;de<S;de++,_e+=4){const Ee=de/(S-1),{start:Fe,end:Pe}=C.clips[ie];ee(ae,_e,Fe*(1-Ee)+Pe*Ee)}else for(let ie=0,ae=0;ie<S;ie++,ae+=4)ee(0,ae,ie/(S-1));return q}gi("AlphaImage",Sl),gi("RGBAImage",xn);class Kh extends Dn{createBucket(b){return new uc(b)}constructor(b){super(b,Vh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(b){b==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gc;var Gh={get paint(){return gc=gc||new Ns({"hillshade-illumination-direction":new Fi(me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fi(me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fi(me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fi(me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fi(me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fi(me.paint_hillshade["hillshade-accent-color"])})}};class Wh extends Dn{constructor(b){super(b,Gh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const qh=ts([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xh}=qh;var vA={exports:{}};function Yl(C,b,S){S=S||2;var H,q,ee,ie,ae,de,_e,Ee=b&&b.length,Fe=Ee?b[0]*S:C.length,Pe=mc(C,0,Fe,S,!0),He=[];if(!Pe||Pe.next===Pe.prev)return He;if(Ee&&(Pe=function(tt,at,ct,mt){var ht,wt,Ct,Qt=[];for(ht=0,wt=at.length;ht<wt;ht++)(Ct=mc(tt,at[ht]*mt,ht<wt-1?at[ht+1]*mt:tt.length,mt,!1))===Ct.next&&(Ct.steiner=!0),Qt.push(iu(Ct));for(Qt.sort($h),ht=0;ht<Qt.length;ht++)ct=eu(Qt[ht],ct);return ct}(C,b,Pe,S)),C.length>80*S){H=ee=C[0],q=ie=C[1];for(var Ne=S;Ne<Fe;Ne+=S)(ae=C[Ne])<H&&(H=ae),(de=C[Ne+1])<q&&(q=de),ae>ee&&(ee=ae),de>ie&&(ie=de);_e=(_e=Math.max(ee-H,ie-q))!==0?32767/_e:0}return Fl(Pe,He,S,H,q,_e,0),He}function mc(C,b,S,H,q){var ee,ie;if(q===xA(C,b,S,H)>0)for(ee=b;ee<S;ee+=H)ie=vc(ee,C[ee],C[ee+1],ie);else for(ee=S-H;ee>=b;ee-=H)ie=vc(ee,C[ee],C[ee+1],ie);return ie&&jl(ie,ie.next)&&(Dl(ie),ie=ie.next),ie}function Ho(C,b){if(!C)return C;b||(b=C);var S,H=C;do if(S=!1,H.steiner||!jl(H,H.next)&&rs(H.prev,H,H.next)!==0)H=H.next;else{if(Dl(H),(H=b=H.prev)===H.next)break;S=!0}while(S||H!==b);return b}function Fl(C,b,S,H,q,ee,ie){if(C){!ie&&ee&&function(Ee,Fe,Pe,He){var Ne=Ee;do Ne.z===0&&(Ne.z=wA(Ne.x,Ne.y,Fe,Pe,He)),Ne.prevZ=Ne.prev,Ne.nextZ=Ne.next,Ne=Ne.next;while(Ne!==Ee);Ne.prevZ.nextZ=null,Ne.prevZ=null,function(tt){var at,ct,mt,ht,wt,Ct,Qt,fi,Ci=1;do{for(ct=tt,tt=null,wt=null,Ct=0;ct;){for(Ct++,mt=ct,Qt=0,at=0;at<Ci&&(Qt++,mt=mt.nextZ);at++);for(fi=Ci;Qt>0||fi>0&&mt;)Qt!==0&&(fi===0||!mt||ct.z<=mt.z)?(ht=ct,ct=ct.nextZ,Qt--):(ht=mt,mt=mt.nextZ,fi--),wt?wt.nextZ=ht:tt=ht,ht.prevZ=wt,wt=ht;ct=mt}wt.nextZ=null,Ci*=2}while(Ct>1)}(Ne)}(C,H,q,ee);for(var ae,de,_e=C;C.prev!==C.next;)if(ae=C.prev,de=C.next,ee?jh(C,H,q,ee):Yh(C))b.push(ae.i/S|0),b.push(C.i/S|0),b.push(de.i/S|0),Dl(C),C=de.next,_e=de.next;else if((C=de)===_e){ie?ie===1?Fl(C=Zh(Ho(C),b,S),b,S,H,q,ee,2):ie===2&&Jh(C,b,S,H,q,ee):Fl(Ho(C),b,S,H,q,ee,1);break}}}function Yh(C){var b=C.prev,S=C,H=C.next;if(rs(b,S,H)>=0)return!1;for(var q=b.x,ee=S.x,ie=H.x,ae=b.y,de=S.y,_e=H.y,Ee=q<ee?q<ie?q:ie:ee<ie?ee:ie,Fe=ae<de?ae<_e?ae:_e:de<_e?de:_e,Pe=q>ee?q>ie?q:ie:ee>ie?ee:ie,He=ae>de?ae>_e?ae:_e:de>_e?de:_e,Ne=H.next;Ne!==b;){if(Ne.x>=Ee&&Ne.x<=Pe&&Ne.y>=Fe&&Ne.y<=He&&ol(q,ae,ee,de,ie,_e,Ne.x,Ne.y)&&rs(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.next}return!0}function jh(C,b,S,H){var q=C.prev,ee=C,ie=C.next;if(rs(q,ee,ie)>=0)return!1;for(var ae=q.x,de=ee.x,_e=ie.x,Ee=q.y,Fe=ee.y,Pe=ie.y,He=ae<de?ae<_e?ae:_e:de<_e?de:_e,Ne=Ee<Fe?Ee<Pe?Ee:Pe:Fe<Pe?Fe:Pe,tt=ae>de?ae>_e?ae:_e:de>_e?de:_e,at=Ee>Fe?Ee>Pe?Ee:Pe:Fe>Pe?Fe:Pe,ct=wA(He,Ne,b,S,H),mt=wA(tt,at,b,S,H),ht=C.prevZ,wt=C.nextZ;ht&&ht.z>=ct&&wt&&wt.z<=mt;){if(ht.x>=He&&ht.x<=tt&&ht.y>=Ne&&ht.y<=at&&ht!==q&&ht!==ie&&ol(ae,Ee,de,Fe,_e,Pe,ht.x,ht.y)&&rs(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,wt.x>=He&&wt.x<=tt&&wt.y>=Ne&&wt.y<=at&&wt!==q&&wt!==ie&&ol(ae,Ee,de,Fe,_e,Pe,wt.x,wt.y)&&rs(wt.prev,wt,wt.next)>=0))return!1;wt=wt.nextZ}for(;ht&&ht.z>=ct;){if(ht.x>=He&&ht.x<=tt&&ht.y>=Ne&&ht.y<=at&&ht!==q&&ht!==ie&&ol(ae,Ee,de,Fe,_e,Pe,ht.x,ht.y)&&rs(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;wt&&wt.z<=mt;){if(wt.x>=He&&wt.x<=tt&&wt.y>=Ne&&wt.y<=at&&wt!==q&&wt!==ie&&ol(ae,Ee,de,Fe,_e,Pe,wt.x,wt.y)&&rs(wt.prev,wt,wt.next)>=0)return!1;wt=wt.nextZ}return!0}function Zh(C,b,S){var H=C;do{var q=H.prev,ee=H.next.next;!jl(q,ee)&&_c(q,H,H.next,ee)&&kl(q,ee)&&kl(ee,q)&&(b.push(q.i/S|0),b.push(H.i/S|0),b.push(ee.i/S|0),Dl(H),Dl(H.next),H=C=ee),H=H.next}while(H!==C);return Ho(H)}function Jh(C,b,S,H,q,ee){var ie=C;do{for(var ae=ie.next.next;ae!==ie.prev;){if(ie.i!==ae.i&&ru(ie,ae)){var de=yc(ie,ae);return ie=Ho(ie,ie.next),de=Ho(de,de.next),Fl(ie,b,S,H,q,ee,0),void Fl(de,b,S,H,q,ee,0)}ae=ae.next}ie=ie.next}while(ie!==C)}function $h(C,b){return C.x-b.x}function eu(C,b){var S=function(q,ee){var ie,ae=ee,de=q.x,_e=q.y,Ee=-1/0;do{if(_e<=ae.y&&_e>=ae.next.y&&ae.next.y!==ae.y){var Fe=ae.x+(_e-ae.y)*(ae.next.x-ae.x)/(ae.next.y-ae.y);if(Fe<=de&&Fe>Ee&&(Ee=Fe,ie=ae.x<ae.next.x?ae:ae.next,Fe===de))return ie}ae=ae.next}while(ae!==ee);if(!ie)return null;var Pe,He=ie,Ne=ie.x,tt=ie.y,at=1/0;ae=ie;do de>=ae.x&&ae.x>=Ne&&de!==ae.x&&ol(_e<tt?de:Ee,_e,Ne,tt,_e<tt?Ee:de,_e,ae.x,ae.y)&&(Pe=Math.abs(_e-ae.y)/(de-ae.x),kl(ae,q)&&(Pe<at||Pe===at&&(ae.x>ie.x||ae.x===ie.x&&tu(ie,ae)))&&(ie=ae,at=Pe)),ae=ae.next;while(ae!==He);return ie}(C,b);if(!S)return b;var H=yc(S,C);return Ho(H,H.next),Ho(S,S.next)}function tu(C,b){return rs(C.prev,C,b.prev)<0&&rs(b.next,C,C.next)<0}function wA(C,b,S,H,q){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=(C-S)*q|0)|C<<8))|C<<4))|C<<2))|C<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=(b-H)*q|0)|b<<8))|b<<4))|b<<2))|b<<1))<<1}function iu(C){var b=C,S=C;do(b.x<S.x||b.x===S.x&&b.y<S.y)&&(S=b),b=b.next;while(b!==C);return S}function ol(C,b,S,H,q,ee,ie,ae){return(q-ie)*(b-ae)>=(C-ie)*(ee-ae)&&(C-ie)*(H-ae)>=(S-ie)*(b-ae)&&(S-ie)*(ee-ae)>=(q-ie)*(H-ae)}function ru(C,b){return C.next.i!==b.i&&C.prev.i!==b.i&&!function(S,H){var q=S;do{if(q.i!==S.i&&q.next.i!==S.i&&q.i!==H.i&&q.next.i!==H.i&&_c(q,q.next,S,H))return!0;q=q.next}while(q!==S);return!1}(C,b)&&(kl(C,b)&&kl(b,C)&&function(S,H){var q=S,ee=!1,ie=(S.x+H.x)/2,ae=(S.y+H.y)/2;do q.y>ae!=q.next.y>ae&&q.next.y!==q.y&&ie<(q.next.x-q.x)*(ae-q.y)/(q.next.y-q.y)+q.x&&(ee=!ee),q=q.next;while(q!==S);return ee}(C,b)&&(rs(C.prev,C,b.prev)||rs(C,b.prev,b))||jl(C,b)&&rs(C.prev,C,C.next)>0&&rs(b.prev,b,b.next)>0)}function rs(C,b,S){return(b.y-C.y)*(S.x-b.x)-(b.x-C.x)*(S.y-b.y)}function jl(C,b){return C.x===b.x&&C.y===b.y}function _c(C,b,S,H){var q=Jl(rs(C,b,S)),ee=Jl(rs(C,b,H)),ie=Jl(rs(S,H,C)),ae=Jl(rs(S,H,b));return q!==ee&&ie!==ae||!(q!==0||!Zl(C,S,b))||!(ee!==0||!Zl(C,H,b))||!(ie!==0||!Zl(S,C,H))||!(ae!==0||!Zl(S,b,H))}function Zl(C,b,S){return b.x<=Math.max(C.x,S.x)&&b.x>=Math.min(C.x,S.x)&&b.y<=Math.max(C.y,S.y)&&b.y>=Math.min(C.y,S.y)}function Jl(C){return C>0?1:C<0?-1:0}function kl(C,b){return rs(C.prev,C,C.next)<0?rs(C,b,C.next)>=0&&rs(C,C.prev,b)>=0:rs(C,b,C.prev)<0||rs(C,C.next,b)<0}function yc(C,b){var S=new bA(C.i,C.x,C.y),H=new bA(b.i,b.x,b.y),q=C.next,ee=b.prev;return C.next=b,b.prev=C,S.next=q,q.prev=S,H.next=S,S.prev=H,ee.next=H,H.prev=ee,H}function vc(C,b,S,H){var q=new bA(C,b,S);return H?(q.next=H.next,q.prev=H,H.next.prev=q,H.next=q):(q.prev=q,q.next=q),q}function Dl(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function bA(C,b,S){this.i=C,this.x=b,this.y=S,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xA(C,b,S,H){for(var q=0,ee=b,ie=S-H;ee<S;ee+=H)q+=(C[ie]-C[ee])*(C[ee+1]+C[ie+1]),ie=ee;return q}vA.exports=Yl,vA.exports.default=Yl,Yl.deviation=function(C,b,S,H){var q=b&&b.length,ee=Math.abs(xA(C,0,q?b[0]*S:C.length,S));if(q)for(var ie=0,ae=b.length;ie<ae;ie++)ee-=Math.abs(xA(C,b[ie]*S,ie<ae-1?b[ie+1]*S:C.length,S));var de=0;for(ie=0;ie<H.length;ie+=3){var _e=H[ie]*S,Ee=H[ie+1]*S,Fe=H[ie+2]*S;de+=Math.abs((C[_e]-C[Fe])*(C[Ee+1]-C[_e+1])-(C[_e]-C[Ee])*(C[Fe+1]-C[_e+1]))}return ee===0&&de===0?0:Math.abs((de-ee)/ee)},Yl.flatten=function(C){for(var b=C[0][0].length,S={vertices:[],holes:[],dimensions:b},H=0,q=0;q<C.length;q++){for(var ee=0;ee<C[q].length;ee++)for(var ie=0;ie<b;ie++)S.vertices.push(C[q][ee][ie]);q>0&&S.holes.push(H+=C[q-1].length)}return S};var wc=ne(vA.exports);function su(C,b,S,H,q){bc(C,b,S||0,H||C.length-1,q||nu)}function bc(C,b,S,H,q){for(;H>S;){if(H-S>600){var ee=H-S+1,ie=b-S+1,ae=Math.log(ee),de=.5*Math.exp(2*ae/3),_e=.5*Math.sqrt(ae*de*(ee-de)/ee)*(ie-ee/2<0?-1:1);bc(C,b,Math.max(S,Math.floor(b-ie*de/ee+_e)),Math.min(H,Math.floor(b+(ee-ie)*de/ee+_e)),q)}var Ee=C[b],Fe=S,Pe=H;for(Ul(C,S,b),q(C[H],Ee)>0&&Ul(C,S,H);Fe<Pe;){for(Ul(C,Fe,Pe),Fe++,Pe--;q(C[Fe],Ee)<0;)Fe++;for(;q(C[Pe],Ee)>0;)Pe--}q(C[S],Ee)===0?Ul(C,S,Pe):Ul(C,++Pe,H),Pe<=b&&(S=Pe+1),b<=Pe&&(H=Pe-1)}}function Ul(C,b,S){var H=C[b];C[b]=C[S],C[S]=H}function nu(C,b){return C<b?-1:C>b?1:0}function CA(C,b){const S=C.length;if(S<=1)return[C];const H=[];let q,ee;for(let ie=0;ie<S;ie++){const ae=Ut(C[ie]);ae!==0&&(C[ie].area=Math.abs(ae),ee===void 0&&(ee=ae<0),ee===ae<0?(q&&H.push(q),q=[C[ie]]):q.push(C[ie]))}if(q&&H.push(q),b>1)for(let ie=0;ie<H.length;ie++)H[ie].length<=b||(su(H[ie],b,1,H[ie].length-1,au),H[ie]=H[ie].slice(0,b));return H}function au(C,b){return b.area-C.area}function EA(C,b,S){const H=S.patternDependencies;let q=!1;for(const ee of b){const ie=ee.paint.get(`${C}-pattern`);ie.isConstant()||(q=!0);const ae=ie.constantOr(null);ae&&(q=!0,H[ae.to]=!0,H[ae.from]=!0)}return q}function TA(C,b,S,H,q){const ee=q.patternDependencies;for(const ie of b){const ae=ie.paint.get(`${C}-pattern`).value;if(ae.kind!=="constant"){let de=ae.evaluate({zoom:H-1},S,{},q.availableImages),_e=ae.evaluate({zoom:H},S,{},q.availableImages),Ee=ae.evaluate({zoom:H+1},S,{},q.availableImages);de=de&&de.name?de.name:de,_e=_e&&_e.name?_e.name:_e,Ee=Ee&&Ee.name?Ee.name:Ee,ee[de]=!0,ee[_e]=!0,ee[Ee]=!0,S.patterns[ie.id]={min:de,mid:_e,max:Ee}}}return S}class IA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(S=>S.id),this.index=b.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gt,this.indexArray=new ki,this.indexArray2=new xi,this.programConfigurations=new Ka(b.layers,b.zoom),this.segments=new Mi,this.segments2=new Mi,this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id)}populate(b,S,H){this.hasPattern=EA("fill",this.layers,S);const q=this.layers[0].layout.get("fill-sort-key"),ee=!q.isConstant(),ie=[];for(const{feature:ae,id:de,index:_e,sourceLayerIndex:Ee}of b){const Fe=this.layers[0]._featureFilter.needGeometry,Pe=ya(ae,Fe);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Pe,H))continue;const He=ee?q.evaluate(Pe,{},H,S.availableImages):void 0,Ne={id:de,properties:ae.properties,type:ae.type,sourceLayerIndex:Ee,index:_e,geometry:Fe?Pe.geometry:jn(ae),patterns:{},sortKey:He};ie.push(Ne)}ee&&ie.sort((ae,de)=>ae.sortKey-de.sortKey);for(const ae of ie){const{geometry:de,index:_e,sourceLayerIndex:Ee}=ae;if(this.hasPattern){const Fe=TA("fill",this.layers,ae,this.zoom,S);this.patternFeatures.push(Fe)}else this.addFeature(ae,de,_e,H,{});S.featureIndex.insert(b[_e].feature,de,_e,Ee,this.index)}}update(b,S,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,S,this.stateDependentLayers,H)}addFeatures(b,S,H){for(const q of this.patternFeatures)this.addFeature(q,q.geometry,q.index,S,H)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Xh),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.indexBuffer2=b.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(b,S,H,q,ee){for(const ie of CA(S,500)){let ae=0;for(const He of ie)ae+=He.length;const de=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray),_e=de.vertexLength,Ee=[],Fe=[];for(const He of ie){if(He.length===0)continue;He!==ie[0]&&Fe.push(Ee.length/2);const Ne=this.segments2.prepareSegment(He.length,this.layoutVertexArray,this.indexArray2),tt=Ne.vertexLength;this.layoutVertexArray.emplaceBack(He[0].x,He[0].y),this.indexArray2.emplaceBack(tt+He.length-1,tt),Ee.push(He[0].x),Ee.push(He[0].y);for(let at=1;at<He.length;at++)this.layoutVertexArray.emplaceBack(He[at].x,He[at].y),this.indexArray2.emplaceBack(tt+at-1,tt+at),Ee.push(He[at].x),Ee.push(He[at].y);Ne.vertexLength+=He.length,Ne.primitiveLength+=He.length}const Pe=wc(Ee,Fe);for(let He=0;He<Pe.length;He+=3)this.indexArray.emplaceBack(_e+Pe[He],_e+Pe[He+1],_e+Pe[He+2]);de.vertexLength+=ae,de.primitiveLength+=Pe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,ee,q)}}let xc,Bc;gi("FillBucket",IA,{omit:["layers","patternFeatures"]});var ou={get paint(){return Bc=Bc||new Ns({"fill-antialias":new Fi(me.paint_fill["fill-antialias"]),"fill-opacity":new Ni(me.paint_fill["fill-opacity"]),"fill-color":new Ni(me.paint_fill["fill-color"]),"fill-outline-color":new Ni(me.paint_fill["fill-outline-color"]),"fill-translate":new Fi(me.paint_fill["fill-translate"]),"fill-translate-anchor":new Fi(me.paint_fill["fill-translate-anchor"]),"fill-pattern":new $o(me.paint_fill["fill-pattern"])})},get layout(){return xc=xc||new Ns({"fill-sort-key":new Ni(me.layout_fill["fill-sort-key"])})}};class lu extends Dn{constructor(b){super(b,ou)}recalculate(b,S){super.recalculate(b,S);const H=this.paint._values["fill-outline-color"];H.value.kind==="constant"&&H.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(b){return new IA(b)}queryRadius(){return Wl(this.paint.get("fill-translate"))}queryIntersectsFeature(b,S,H,q,ee,ie,ae){return nc(ql(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ie.angle,ae),q)}isTileClipped(){return!0}}const Au=ts([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cu=ts([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hu}=Au;var mo={},uu=Ae,Cc=ll;function ll(C,b,S,H,q){this.properties={},this.extent=S,this.type=0,this._pbf=C,this._geometry=-1,this._keys=H,this._values=q,C.readFields(fu,this,b)}function fu(C,b,S){C==1?b.id=S.readVarint():C==2?function(H,q){for(var ee=H.readVarint()+H.pos;H.pos<ee;){var ie=q._keys[H.readVarint()],ae=q._values[H.readVarint()];q.properties[ie]=ae}}(S,b):C==3?b.type=S.readVarint():C==4&&(b._geometry=S.pos)}function du(C){for(var b,S,H=0,q=0,ee=C.length,ie=ee-1;q<ee;ie=q++)H+=((S=C[ie]).x-(b=C[q]).x)*(b.y+S.y);return H}ll.types=["Unknown","Point","LineString","Polygon"],ll.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var b,S=C.readVarint()+C.pos,H=1,q=0,ee=0,ie=0,ae=[];C.pos<S;){if(q<=0){var de=C.readVarint();H=7&de,q=de>>3}if(q--,H===1||H===2)ee+=C.readSVarint(),ie+=C.readSVarint(),H===1&&(b&&ae.push(b),b=[]),b.push(new uu(ee,ie));else{if(H!==7)throw new Error("unknown command "+H);b&&b.push(b[0].clone())}}return b&&ae.push(b),ae},ll.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var b=C.readVarint()+C.pos,S=1,H=0,q=0,ee=0,ie=1/0,ae=-1/0,de=1/0,_e=-1/0;C.pos<b;){if(H<=0){var Ee=C.readVarint();S=7&Ee,H=Ee>>3}if(H--,S===1||S===2)(q+=C.readSVarint())<ie&&(ie=q),q>ae&&(ae=q),(ee+=C.readSVarint())<de&&(de=ee),ee>_e&&(_e=ee);else if(S!==7)throw new Error("unknown command "+S)}return[ie,de,ae,_e]},ll.prototype.toGeoJSON=function(C,b,S){var H,q,ee=this.extent*Math.pow(2,S),ie=this.extent*C,ae=this.extent*b,de=this.loadGeometry(),_e=ll.types[this.type];function Ee(He){for(var Ne=0;Ne<He.length;Ne++){var tt=He[Ne];He[Ne]=[360*(tt.x+ie)/ee-180,360/Math.PI*Math.atan(Math.exp((180-360*(tt.y+ae)/ee)*Math.PI/180))-90]}}switch(this.type){case 1:var Fe=[];for(H=0;H<de.length;H++)Fe[H]=de[H][0];Ee(de=Fe);break;case 2:for(H=0;H<de.length;H++)Ee(de[H]);break;case 3:for(de=function(He){var Ne=He.length;if(Ne<=1)return[He];for(var tt,at,ct=[],mt=0;mt<Ne;mt++){var ht=du(He[mt]);ht!==0&&(at===void 0&&(at=ht<0),at===ht<0?(tt&&ct.push(tt),tt=[He[mt]]):tt.push(He[mt]))}return tt&&ct.push(tt),ct}(de),H=0;H<de.length;H++)for(q=0;q<de[H].length;q++)Ee(de[H][q])}de.length===1?de=de[0]:_e="Multi"+_e;var Pe={type:"Feature",geometry:{type:_e,coordinates:de},properties:this.properties};return"id"in this&&(Pe.id=this.id),Pe};var pu=Cc,Ec=Tc;function Tc(C,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(gu,this,b),this.length=this._features.length}function gu(C,b,S){C===15?b.version=S.readVarint():C===1?b.name=S.readString():C===5?b.extent=S.readVarint():C===2?b._features.push(S.pos):C===3?b._keys.push(S.readString()):C===4&&b._values.push(function(H){for(var q=null,ee=H.readVarint()+H.pos;H.pos<ee;){var ie=H.readVarint()>>3;q=ie===1?H.readString():ie===2?H.readFloat():ie===3?H.readDouble():ie===4?H.readVarint64():ie===5?H.readVarint():ie===6?H.readSVarint():ie===7?H.readBoolean():null}return q}(S))}Tc.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var b=this._pbf.readVarint()+this._pbf.pos;return new pu(this._pbf,b,this.extent,this._keys,this._values)};var mu=Ec;function _u(C,b,S){if(C===3){var H=new mu(S,S.readVarint()+S.pos);H.length&&(b[H.name]=H)}}mo.VectorTile=function(C,b){this.layers=C.readFields(_u,{},b)},mo.VectorTileFeature=Cc,mo.VectorTileLayer=Ec;const yu=mo.VectorTileFeature.types,FA=Math.pow(2,13);function Ml(C,b,S,H,q,ee,ie,ae){C.emplaceBack(b,S,2*Math.floor(H*FA)+ie,q*FA*2,ee*FA*2,Math.round(ae))}class kA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(S=>S.id),this.index=b.index,this.hasPattern=!1,this.layoutVertexArray=new It,this.centroidVertexArray=new Bt,this.indexArray=new ki,this.programConfigurations=new Ka(b.layers,b.zoom),this.segments=new Mi,this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id)}populate(b,S,H){this.features=[],this.hasPattern=EA("fill-extrusion",this.layers,S);for(const{feature:q,id:ee,index:ie,sourceLayerIndex:ae}of b){const de=this.layers[0]._featureFilter.needGeometry,_e=ya(q,de);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),_e,H))continue;const Ee={id:ee,sourceLayerIndex:ae,index:ie,geometry:de?_e.geometry:jn(q),properties:q.properties,type:q.type,patterns:{}};this.hasPattern?this.features.push(TA("fill-extrusion",this.layers,Ee,this.zoom,S)):this.addFeature(Ee,Ee.geometry,ie,H,{}),S.featureIndex.insert(q,Ee.geometry,ie,ae,this.index,!0)}}addFeatures(b,S,H){for(const q of this.features){const{geometry:ee}=q;this.addFeature(q,ee,q.index,S,H)}}update(b,S,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,S,this.stateDependentLayers,H)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,hu),this.centroidVertexBuffer=b.createVertexBuffer(this.centroidVertexArray,cu.members,!0),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(b,S,H,q,ee){const ie={x:0,y:0,vertexCount:0};for(const ae of CA(S,500)){let de=0;for(const Ne of ae)de+=Ne.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ne of ae){if(Ne.length===0||wu(Ne))continue;let tt=0;for(let at=0;at<Ne.length;at++){const ct=Ne[at];if(at>=1){const mt=Ne[at-1];if(!vu(ct,mt)){_e.vertexLength+4>Mi.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ht=ct.sub(mt)._perp()._unit(),wt=mt.dist(ct);tt+wt>32768&&(tt=0),Ml(this.layoutVertexArray,ct.x,ct.y,ht.x,ht.y,0,0,tt),Ml(this.layoutVertexArray,ct.x,ct.y,ht.x,ht.y,0,1,tt),ie.x+=2*ct.x,ie.y+=2*ct.y,ie.vertexCount+=2,tt+=wt,Ml(this.layoutVertexArray,mt.x,mt.y,ht.x,ht.y,0,0,tt),Ml(this.layoutVertexArray,mt.x,mt.y,ht.x,ht.y,0,1,tt),ie.x+=2*mt.x,ie.y+=2*mt.y,ie.vertexCount+=2;const Ct=_e.vertexLength;this.indexArray.emplaceBack(Ct,Ct+2,Ct+1),this.indexArray.emplaceBack(Ct+1,Ct+2,Ct+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+de>Mi.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(de,this.layoutVertexArray,this.indexArray)),yu[b.type]!=="Polygon")continue;const Ee=[],Fe=[],Pe=_e.vertexLength;for(const Ne of ae)if(Ne.length!==0){Ne!==ae[0]&&Fe.push(Ee.length/2);for(let tt=0;tt<Ne.length;tt++){const at=Ne[tt];Ml(this.layoutVertexArray,at.x,at.y,0,0,1,1,0),ie.x+=at.x,ie.y+=at.y,ie.vertexCount+=1,Ee.push(at.x),Ee.push(at.y)}}const He=wc(Ee,Fe);for(let Ne=0;Ne<He.length;Ne+=3)this.indexArray.emplaceBack(Pe+He[Ne],Pe+He[Ne+2],Pe+He[Ne+1]);_e.primitiveLength+=He.length/3,_e.vertexLength+=de}for(let ae=0;ae<ie.vertexCount;ae++)this.centroidVertexArray.emplaceBack(Math.floor(ie.x/ie.vertexCount),Math.floor(ie.y/ie.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,ee,q)}}function vu(C,b){return C.x===b.x&&(C.x<0||C.x>Xr)||C.y===b.y&&(C.y<0||C.y>Xr)}function wu(C){return C.every(b=>b.x<0)||C.every(b=>b.x>Xr)||C.every(b=>b.y<0)||C.every(b=>b.y>Xr)}let Ic;gi("FillExtrusionBucket",kA,{omit:["layers","features"]});var bu={get paint(){return Ic=Ic||new Ns({"fill-extrusion-opacity":new Fi(me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ni(me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fi(me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fi(me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $o(me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ni(me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ni(me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fi(me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class xu extends Dn{constructor(b){super(b,bu)}createBucket(b){return new kA(b)}queryRadius(){return Wl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(b,S,H,q,ee,ie,ae,de){const _e=ql(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ie.angle,ae),Ee=this.paint.get("fill-extrusion-height").evaluate(S,H),Fe=this.paint.get("fill-extrusion-base").evaluate(S,H),Pe=function(Ne,tt,at,ct){const mt=[];for(const ht of Ne){const wt=[ht.x,ht.y,0,1];Xl(wt,wt,tt),mt.push(new ge(wt[0]/wt[3],wt[1]/wt[3]))}return mt}(_e,de),He=function(Ne,tt,at,ct){const mt=[],ht=[],wt=ct[8]*tt,Ct=ct[9]*tt,Qt=ct[10]*tt,fi=ct[11]*tt,Ci=ct[8]*at,ui=ct[9]*at,li=ct[10]*at,ti=ct[11]*at;for(const yi of Ne){const si=[],Gt=[];for(const Pi of yi){const Ii=Pi.x,ir=Pi.y,Rr=ct[0]*Ii+ct[4]*ir+ct[12],zr=ct[1]*Ii+ct[5]*ir+ct[13],fs=ct[2]*Ii+ct[6]*ir+ct[14],fn=ct[3]*Ii+ct[7]*ir+ct[15],Gs=fs+Qt,os=fn+fi,ms=Rr+Ci,Is=zr+ui,nn=fs+li,Ws=fn+ti,ls=new ge((Rr+wt)/os,(zr+Ct)/os);ls.z=Gs/os,si.push(ls);const ds=new ge(ms/Ws,Is/Ws);ds.z=nn/Ws,Gt.push(ds)}mt.push(si),ht.push(Gt)}return[mt,ht]}(q,Fe,Ee,de);return function(Ne,tt,at){let ct=1/0;nc(at,tt)&&(ct=Sc(at,tt[0]));for(let mt=0;mt<tt.length;mt++){const ht=tt[mt],wt=Ne[mt];for(let Ct=0;Ct<ht.length-1;Ct++){const Qt=ht[Ct],fi=[Qt,ht[Ct+1],wt[Ct+1],wt[Ct],Qt];sc(at,fi)&&(ct=Math.min(ct,Sc(at,fi)))}}return ct!==1/0&&ct}(He[0],He[1],Pe)}}function Pl(C,b){return C.x*b.x+C.y*b.y}function Sc(C,b){if(C.length===1){let S=0;const H=b[S++];let q;for(;!q||H.equals(q);)if(q=b[S++],!q)return 1/0;for(;S<b.length;S++){const ee=b[S],ie=C[0],ae=q.sub(H),de=ee.sub(H),_e=ie.sub(H),Ee=Pl(ae,ae),Fe=Pl(ae,de),Pe=Pl(de,de),He=Pl(_e,ae),Ne=Pl(_e,de),tt=Ee*Pe-Fe*Fe,at=(Pe*He-Fe*Ne)/tt,ct=(Ee*Ne-Fe*He)/tt,mt=H.z*(1-at-ct)+q.z*at+ee.z*ct;if(isFinite(mt))return mt}return 1/0}{let S=1/0;for(const H of b)S=Math.min(S,H.z);return S}}const Bu=ts([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Cu}=Bu,Eu=ts([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Tu}=Eu,Iu=mo.VectorTileFeature.types,Su=Math.cos(Math.PI/180*37.5),Fc=Math.pow(2,14)/.5;class DA{constructor(b){this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(S=>S.id),this.index=b.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(S=>{this.gradients[S.id]={}}),this.layoutVertexArray=new St,this.layoutVertexArray2=new Lt,this.indexArray=new ki,this.programConfigurations=new Ka(b.layers,b.zoom),this.segments=new Mi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id)}populate(b,S,H){this.hasPattern=EA("line",this.layers,S);const q=this.layers[0].layout.get("line-sort-key"),ee=!q.isConstant(),ie=[];for(const{feature:ae,id:de,index:_e,sourceLayerIndex:Ee}of b){const Fe=this.layers[0]._featureFilter.needGeometry,Pe=ya(ae,Fe);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom),Pe,H))continue;const He=ee?q.evaluate(Pe,{},H):void 0,Ne={id:de,properties:ae.properties,type:ae.type,sourceLayerIndex:Ee,index:_e,geometry:Fe?Pe.geometry:jn(ae),patterns:{},sortKey:He};ie.push(Ne)}ee&&ie.sort((ae,de)=>ae.sortKey-de.sortKey);for(const ae of ie){const{geometry:de,index:_e,sourceLayerIndex:Ee}=ae;if(this.hasPattern){const Fe=TA("line",this.layers,ae,this.zoom,S);this.patternFeatures.push(Fe)}else this.addFeature(ae,de,_e,H,{});S.featureIndex.insert(b[_e].feature,de,_e,Ee,this.index)}}update(b,S,H){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(b,S,this.stateDependentLayers,H)}addFeatures(b,S,H){for(const q of this.patternFeatures)this.addFeature(q,q.geometry,q.index,S,H)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(b){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=b.createVertexBuffer(this.layoutVertexArray2,Tu)),this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Cu),this.indexBuffer=b.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(b),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(b){if(b.properties&&Object.prototype.hasOwnProperty.call(b.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(b.properties,"mapbox_clip_end"))return{start:+b.properties.mapbox_clip_start,end:+b.properties.mapbox_clip_end}}addFeature(b,S,H,q,ee){const ie=this.layers[0].layout,ae=ie.get("line-join").evaluate(b,{}),de=ie.get("line-cap"),_e=ie.get("line-miter-limit"),Ee=ie.get("line-round-limit");this.lineClips=this.lineFeatureClips(b);for(const Fe of S)this.addLine(Fe,b,ae,de,_e,Ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b,H,ee,q)}addLine(b,S,H,q,ee,ie){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ct=0;ct<b.length-1;ct++)this.totalDistance+=b[ct].dist(b[ct+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ae=Iu[S.type]==="Polygon";let de=b.length;for(;de>=2&&b[de-1].equals(b[de-2]);)de--;let _e=0;for(;_e<de-1&&b[_e].equals(b[_e+1]);)_e++;if(de<(ae?3:2))return;H==="bevel"&&(ee=1.05);const Ee=this.overscaling<=16?15*Xr/(512*this.overscaling):0,Fe=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Pe,He,Ne,tt,at;this.e1=this.e2=-1,ae&&(Pe=b[de-2],at=b[_e].sub(Pe)._unit()._perp());for(let ct=_e;ct<de;ct++){if(Ne=ct===de-1?ae?b[_e+1]:void 0:b[ct+1],Ne&&b[ct].equals(Ne))continue;at&&(tt=at),Pe&&(He=Pe),Pe=b[ct],at=Ne?Ne.sub(Pe)._unit()._perp():tt,tt=tt||at;let mt=tt.add(at);mt.x===0&&mt.y===0||mt._unit();const ht=tt.x*at.x+tt.y*at.y,wt=mt.x*at.x+mt.y*at.y,Ct=wt!==0?1/wt:1/0,Qt=2*Math.sqrt(2-2*wt),fi=wt<Su&&He&&Ne,Ci=tt.x*at.y-tt.y*at.x>0;if(fi&&ct>_e){const ti=Pe.dist(He);if(ti>2*Ee){const yi=Pe.sub(Pe.sub(He)._mult(Ee/ti)._round());this.updateDistance(He,yi),this.addCurrentVertex(yi,tt,0,0,Fe),He=yi}}const ui=He&&Ne;let li=ui?H:ae?"butt":q;if(ui&&li==="round"&&(Ct<ie?li="miter":Ct<=2&&(li="fakeround")),li==="miter"&&Ct>ee&&(li="bevel"),li==="bevel"&&(Ct>2&&(li="flipbevel"),Ct<ee&&(li="miter")),He&&this.updateDistance(He,Pe),li==="miter")mt._mult(Ct),this.addCurrentVertex(Pe,mt,0,0,Fe);else if(li==="flipbevel"){if(Ct>100)mt=at.mult(-1);else{const ti=Ct*tt.add(at).mag()/tt.sub(at).mag();mt._perp()._mult(ti*(Ci?-1:1))}this.addCurrentVertex(Pe,mt,0,0,Fe),this.addCurrentVertex(Pe,mt.mult(-1),0,0,Fe)}else if(li==="bevel"||li==="fakeround"){const ti=-Math.sqrt(Ct*Ct-1),yi=Ci?ti:0,si=Ci?0:ti;if(He&&this.addCurrentVertex(Pe,tt,yi,si,Fe),li==="fakeround"){const Gt=Math.round(180*Qt/Math.PI/20);for(let Pi=1;Pi<Gt;Pi++){let Ii=Pi/Gt;if(Ii!==.5){const Rr=Ii-.5;Ii+=Ii*Rr*(Ii-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*Rr*Rr+(.848013+ht*(.215638*ht-1.06021)))}const ir=at.sub(tt)._mult(Ii)._add(tt)._unit()._mult(Ci?-1:1);this.addHalfVertex(Pe,ir.x,ir.y,!1,Ci,0,Fe)}}Ne&&this.addCurrentVertex(Pe,at,-yi,-si,Fe)}else if(li==="butt")this.addCurrentVertex(Pe,mt,0,0,Fe);else if(li==="square"){const ti=He?1:-1;this.addCurrentVertex(Pe,mt,ti,ti,Fe)}else li==="round"&&(He&&(this.addCurrentVertex(Pe,tt,0,0,Fe),this.addCurrentVertex(Pe,tt,1,1,Fe,!0)),Ne&&(this.addCurrentVertex(Pe,at,-1,-1,Fe,!0),this.addCurrentVertex(Pe,at,0,0,Fe)));if(fi&&ct<de-1){const ti=Pe.dist(Ne);if(ti>2*Ee){const yi=Pe.add(Ne.sub(Pe)._mult(Ee/ti)._round());this.updateDistance(Pe,yi),this.addCurrentVertex(yi,at,0,0,Fe),Pe=yi}}}}addCurrentVertex(b,S,H,q,ee,ie=!1){const ae=S.y*q-S.x,de=-S.y-S.x*q;this.addHalfVertex(b,S.x+S.y*H,S.y-S.x*H,ie,!1,H,ee),this.addHalfVertex(b,ae,de,ie,!0,-q,ee),this.distance>Fc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(b,S,H,q,ee,ie))}addHalfVertex({x:b,y:S},H,q,ee,ie,ae,de){const _e=.5*(this.lineClips?this.scaledDistance*(Fc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((b<<1)+(ee?1:0),(S<<1)+(ie?1:0),Math.round(63*H)+128,Math.round(63*q)+128,1+(ae===0?0:ae<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ee=de.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ee),de.primitiveLength++),ie?this.e2=Ee:this.e1=Ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(b,S){this.distance+=b.dist(S),this.updateScaledDistance()}}let kc,Dc;gi("LineBucket",DA,{omit:["layers","patternFeatures"]});var Uc={get paint(){return Dc=Dc||new Ns({"line-opacity":new Ni(me.paint_line["line-opacity"]),"line-color":new Ni(me.paint_line["line-color"]),"line-translate":new Fi(me.paint_line["line-translate"]),"line-translate-anchor":new Fi(me.paint_line["line-translate-anchor"]),"line-width":new Ni(me.paint_line["line-width"]),"line-gap-width":new Ni(me.paint_line["line-gap-width"]),"line-offset":new Ni(me.paint_line["line-offset"]),"line-blur":new Ni(me.paint_line["line-blur"]),"line-dasharray":new vl(me.paint_line["line-dasharray"]),"line-pattern":new $o(me.paint_line["line-pattern"]),"line-gradient":new wl(me.paint_line["line-gradient"])})},get layout(){return kc=kc||new Ns({"line-cap":new Fi(me.layout_line["line-cap"]),"line-join":new Ni(me.layout_line["line-join"]),"line-miter-limit":new Fi(me.layout_line["line-miter-limit"]),"line-round-limit":new Fi(me.layout_line["line-round-limit"]),"line-sort-key":new Ni(me.layout_line["line-sort-key"])})}};class Fu extends Ni{possiblyEvaluate(b,S){return S=new Er(Math.floor(S.zoom),{now:S.now,fadeDuration:S.fadeDuration,zoomHistory:S.zoomHistory,transition:S.transition}),super.possiblyEvaluate(b,S)}evaluate(b,S,H,q){return S=et({},S,{zoom:Math.floor(S.zoom)}),super.evaluate(b,S,H,q)}}let $l;class ku extends Dn{constructor(b){super(b,Uc),this.gradientVersion=0,$l||($l=new Fu(Uc.paint.properties["line-width"].specification),$l.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(b){b==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ia,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(b,S){super.recalculate(b,S),this.paint._values["line-floorwidth"]=$l.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,b)}createBucket(b){return new DA(b)}queryRadius(b){const S=b,H=Mc(Tl("line-width",this,S),Tl("line-gap-width",this,S)),q=Tl("line-offset",this,S);return H/2+Math.abs(q)+Wl(this.paint.get("line-translate"))}queryIntersectsFeature(b,S,H,q,ee,ie,ae){const de=ql(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ie.angle,ae),_e=ae/2*Mc(this.paint.get("line-width").evaluate(S,H),this.paint.get("line-gap-width").evaluate(S,H)),Ee=this.paint.get("line-offset").evaluate(S,H);return Ee&&(q=function(Fe,Pe){const He=[];for(let Ne=0;Ne<Fe.length;Ne++){const tt=Fe[Ne],at=[];for(let ct=0;ct<tt.length;ct++){const mt=tt[ct-1],ht=tt[ct],wt=tt[ct+1],Ct=ct===0?new ge(0,0):ht.sub(mt)._unit()._perp(),Qt=ct===tt.length-1?new ge(0,0):wt.sub(ht)._unit()._perp(),fi=Ct._add(Qt)._unit(),Ci=fi.x*Qt.x+fi.y*Qt.y;Ci!==0&&fi._mult(1/Ci),at.push(fi._mult(Pe)._add(ht))}He.push(at)}return He}(q,Ee*ae)),function(Fe,Pe,He){for(let Ne=0;Ne<Pe.length;Ne++){const tt=Pe[Ne];if(Fe.length>=3){for(let at=0;at<tt.length;at++)if(nl(Fe,tt[at]))return!0}if(Qh(Fe,tt,He))return!0}return!1}(de,q,_e)}isTileClipped(){return!0}}function Mc(C,b){return b>0?b+2*C:C}const Du=ts([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Uu=ts([{name:"a_projected_pos",components:3,type:"Float32"}],4);ts([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Mu=ts([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ts([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Pc=ts([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Pu=ts([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Lu(C,b,S){return C.sections.forEach(H=>{H.text=function(q,ee,ie){const ae=ee.layout.get("text-transform").evaluate(ie,{});return ae==="uppercase"?q=q.toLocaleUpperCase():ae==="lowercase"&&(q=q.toLocaleLowerCase()),ns.applyArabicShaping&&(q=ns.applyArabicShaping(q)),q}(H.text,b,S)}),C}ts([{name:"triangle",components:3,type:"Uint16"}]),ts([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ts([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ts([{type:"Float32",name:"offsetX"}]),ts([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ts([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ll={"!":"ï¸","#":"ï¼",$:"ï¼","%":"ï¼","&":"ï¼","(":"ï¸µ",")":"ï¸¶","*":"ï¼","+":"ï¼",",":"ï¸","-":"ï¸²",".":"ã»","/":"ï¼",":":"ï¸",";":"ï¸","<":"ï¸¿","=":"ï¼",">":"ï¹","?":"ï¸","@":"ï¼ ","[":"ï¹","\\":"ï¼¼","]":"ï¹","^":"ï¼¾",_:"ï¸³","`":"ï½","{":"ï¸·","|":"â","}":"ï¸¸","~":"ï½","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â":"ï¸²","â":"ï¸±","â":"ï¹","â":"ï¹","â":"ï¹","â":"ï¹","â¦":"ï¸","â§":"ã»","â©":"ï¿¦","ã":"ï¸","ã":"ï¸","ã":"ï¸¿","ã":"ï¹","ã":"ï¸½","ã":"ï¸¾","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¸»","ã":"ï¸¼","ã":"ï¸¹","ã":"ï¸º","ã":"ï¸","ã":"ï¸","ï¼":"ï¸","ï¼":"ï¸µ","ï¼":"ï¸¶","ï¼":"ï¸","ï¼":"ï¸²","ï¼":"ã»","ï¼":"ï¸","ï¼":"ï¸","ï¼":"ï¸¿","ï¼":"ï¹","ï¼":"ï¸","ï¼»":"ï¹","ï¼½":"ï¹","ï¼¿":"ï¸³","ï½":"ï¸·","ï½":"â","ï½":"ï¸¸","ï½":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸","ï½¢":"ï¹","ï½£":"ï¹"};var us=24,Lc=Dr,Qc=function(C,b,S,H,q){var ee,ie,ae=8*q-H-1,de=(1<<ae)-1,_e=de>>1,Ee=-7,Fe=S?q-1:0,Pe=S?-1:1,He=C[b+Fe];for(Fe+=Pe,ee=He&(1<<-Ee)-1,He>>=-Ee,Ee+=ae;Ee>0;ee=256*ee+C[b+Fe],Fe+=Pe,Ee-=8);for(ie=ee&(1<<-Ee)-1,ee>>=-Ee,Ee+=H;Ee>0;ie=256*ie+C[b+Fe],Fe+=Pe,Ee-=8);if(ee===0)ee=1-_e;else{if(ee===de)return ie?NaN:1/0*(He?-1:1);ie+=Math.pow(2,H),ee-=_e}return(He?-1:1)*ie*Math.pow(2,ee-H)},Oc=function(C,b,S,H,q,ee){var ie,ae,de,_e=8*ee-q-1,Ee=(1<<_e)-1,Fe=Ee>>1,Pe=q===23?Math.pow(2,-24)-Math.pow(2,-77):0,He=H?0:ee-1,Ne=H?1:-1,tt=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(ae=isNaN(b)?1:0,ie=Ee):(ie=Math.floor(Math.log(b)/Math.LN2),b*(de=Math.pow(2,-ie))<1&&(ie--,de*=2),(b+=ie+Fe>=1?Pe/de:Pe*Math.pow(2,1-Fe))*de>=2&&(ie++,de/=2),ie+Fe>=Ee?(ae=0,ie=Ee):ie+Fe>=1?(ae=(b*de-1)*Math.pow(2,q),ie+=Fe):(ae=b*Math.pow(2,Fe-1)*Math.pow(2,q),ie=0));q>=8;C[S+He]=255&ae,He+=Ne,ae/=256,q-=8);for(ie=ie<<q|ae,_e+=q;_e>0;C[S+He]=255&ie,He+=Ne,ie/=256,_e-=8);C[S+He-Ne]|=128*tt};function Dr(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}Dr.Varint=0,Dr.Fixed64=1,Dr.Bytes=2,Dr.Fixed32=5;var UA=4294967296,Rc=1/UA,Hc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Wa(C){return C.type===Dr.Bytes?C.readVarint()+C.pos:C.pos+1}function Al(C,b,S){return S?4294967296*b+(C>>>0):4294967296*(b>>>0)+(C>>>0)}function zc(C,b,S){var H=b<=16383?1:b<=2097151?2:b<=268435455?3:Math.floor(Math.log(b)/(7*Math.LN2));S.realloc(H);for(var q=S.pos-1;q>=C;q--)S.buf[q+H]=S.buf[q]}function Qu(C,b){for(var S=0;S<C.length;S++)b.writeVarint(C[S])}function Ou(C,b){for(var S=0;S<C.length;S++)b.writeSVarint(C[S])}function Ru(C,b){for(var S=0;S<C.length;S++)b.writeFloat(C[S])}function Hu(C,b){for(var S=0;S<C.length;S++)b.writeDouble(C[S])}function zu(C,b){for(var S=0;S<C.length;S++)b.writeBoolean(C[S])}function Nu(C,b){for(var S=0;S<C.length;S++)b.writeFixed32(C[S])}function Vu(C,b){for(var S=0;S<C.length;S++)b.writeSFixed32(C[S])}function Ku(C,b){for(var S=0;S<C.length;S++)b.writeFixed64(C[S])}function Gu(C,b){for(var S=0;S<C.length;S++)b.writeSFixed64(C[S])}function eA(C,b){return(C[b]|C[b+1]<<8|C[b+2]<<16)+16777216*C[b+3]}function cl(C,b,S){C[S]=b,C[S+1]=b>>>8,C[S+2]=b>>>16,C[S+3]=b>>>24}function Nc(C,b){return(C[b]|C[b+1]<<8|C[b+2]<<16)+(C[b+3]<<24)}Dr.prototype={destroy:function(){this.buf=null},readFields:function(C,b,S){for(S=S||this.length;this.pos<S;){var H=this.readVarint(),q=H>>3,ee=this.pos;this.type=7&H,C(q,b,this),this.pos===ee&&this.skip(H)}return b},readMessage:function(C,b){return this.readFields(C,b,this.readVarint()+this.pos)},readFixed32:function(){var C=eA(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=Nc(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=eA(this.buf,this.pos)+eA(this.buf,this.pos+4)*UA;return this.pos+=8,C},readSFixed64:function(){var C=eA(this.buf,this.pos)+Nc(this.buf,this.pos+4)*UA;return this.pos+=8,C},readFloat:function(){var C=Qc(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=Qc(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var b,S,H=this.buf;return b=127&(S=H[this.pos++]),S<128?b:(b|=(127&(S=H[this.pos++]))<<7,S<128?b:(b|=(127&(S=H[this.pos++]))<<14,S<128?b:(b|=(127&(S=H[this.pos++]))<<21,S<128?b:function(q,ee,ie){var ae,de,_e=ie.buf;if(ae=(112&(de=_e[ie.pos++]))>>4,de<128||(ae|=(127&(de=_e[ie.pos++]))<<3,de<128)||(ae|=(127&(de=_e[ie.pos++]))<<10,de<128)||(ae|=(127&(de=_e[ie.pos++]))<<17,de<128)||(ae|=(127&(de=_e[ie.pos++]))<<24,de<128)||(ae|=(1&(de=_e[ie.pos++]))<<31,de<128))return Al(q,ae,ee);throw new Error("Expected varint not more than 10 bytes")}(b|=(15&(S=H[this.pos]))<<28,C,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2==1?(C+1)/-2:C/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var C=this.readVarint()+this.pos,b=this.pos;return this.pos=C,C-b>=12&&Hc?function(S,H,q){return Hc.decode(S.subarray(H,q))}(this.buf,b,C):function(S,H,q){for(var ee="",ie=H;ie<q;){var ae,de,_e,Ee=S[ie],Fe=null,Pe=Ee>239?4:Ee>223?3:Ee>191?2:1;if(ie+Pe>q)break;Pe===1?Ee<128&&(Fe=Ee):Pe===2?(192&(ae=S[ie+1]))==128&&(Fe=(31&Ee)<<6|63&ae)<=127&&(Fe=null):Pe===3?(de=S[ie+2],(192&(ae=S[ie+1]))==128&&(192&de)==128&&((Fe=(15&Ee)<<12|(63&ae)<<6|63&de)<=2047||Fe>=55296&&Fe<=57343)&&(Fe=null)):Pe===4&&(de=S[ie+2],_e=S[ie+3],(192&(ae=S[ie+1]))==128&&(192&de)==128&&(192&_e)==128&&((Fe=(15&Ee)<<18|(63&ae)<<12|(63&de)<<6|63&_e)<=65535||Fe>=1114112)&&(Fe=null)),Fe===null?(Fe=65533,Pe=1):Fe>65535&&(Fe-=65536,ee+=String.fromCharCode(Fe>>>10&1023|55296),Fe=56320|1023&Fe),ee+=String.fromCharCode(Fe),ie+=Pe}return ee}(this.buf,b,C)},readBytes:function(){var C=this.readVarint()+this.pos,b=this.buf.subarray(this.pos,C);return this.pos=C,b},readPackedVarint:function(C,b){if(this.type!==Dr.Bytes)return C.push(this.readVarint(b));var S=Wa(this);for(C=C||[];this.pos<S;)C.push(this.readVarint(b));return C},readPackedSVarint:function(C){if(this.type!==Dr.Bytes)return C.push(this.readSVarint());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==Dr.Bytes)return C.push(this.readBoolean());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==Dr.Bytes)return C.push(this.readFloat());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==Dr.Bytes)return C.push(this.readDouble());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==Dr.Bytes)return C.push(this.readFixed32());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==Dr.Bytes)return C.push(this.readSFixed32());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==Dr.Bytes)return C.push(this.readFixed64());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==Dr.Bytes)return C.push(this.readSFixed64());var b=Wa(this);for(C=C||[];this.pos<b;)C.push(this.readSFixed64());return C},skip:function(C){var b=7&C;if(b===Dr.Varint)for(;this.buf[this.pos++]>127;);else if(b===Dr.Bytes)this.pos=this.readVarint()+this.pos;else if(b===Dr.Fixed32)this.pos+=4;else{if(b!==Dr.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(C,b){this.writeVarint(C<<3|b)},realloc:function(C){for(var b=this.length||16;b<this.pos+C;)b*=2;if(b!==this.length){var S=new Uint8Array(b);S.set(this.buf),this.buf=S,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),cl(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),cl(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),cl(this.buf,-1&C,this.pos),cl(this.buf,Math.floor(C*Rc),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),cl(this.buf,-1&C,this.pos),cl(this.buf,Math.floor(C*Rc),this.pos+4),this.pos+=8},writeVarint:function(C){(C=+C||0)>268435455||C<0?function(b,S){var H,q;if(b>=0?(H=b%4294967296|0,q=b/4294967296|0):(q=~(-b/4294967296),4294967295^(H=~(-b%4294967296))?H=H+1|0:(H=0,q=q+1|0)),b>=18446744073709552e3||b<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");S.realloc(10),function(ee,ie,ae){ae.buf[ae.pos++]=127&ee|128,ee>>>=7,ae.buf[ae.pos++]=127&ee|128,ee>>>=7,ae.buf[ae.pos++]=127&ee|128,ee>>>=7,ae.buf[ae.pos++]=127&ee|128,ae.buf[ae.pos]=127&(ee>>>=7)}(H,0,S),function(ee,ie){var ae=(7&ee)<<4;ie.buf[ie.pos++]|=ae|((ee>>>=3)?128:0),ee&&(ie.buf[ie.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(ie.buf[ie.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(ie.buf[ie.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(ie.buf[ie.pos++]=127&ee|((ee>>>=7)?128:0),ee&&(ie.buf[ie.pos++]=127&ee)))))}(q,S)}(C,this):(this.realloc(4),this.buf[this.pos++]=127&C|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=C>>>7&127))))},writeSVarint:function(C){this.writeVarint(C<0?2*-C-1:2*C)},writeBoolean:function(C){this.writeVarint(!!C)},writeString:function(C){C=String(C),this.realloc(4*C.length),this.pos++;var b=this.pos;this.pos=function(H,q,ee){for(var ie,ae,de=0;de<q.length;de++){if((ie=q.charCodeAt(de))>55295&&ie<57344){if(!ae){ie>56319||de+1===q.length?(H[ee++]=239,H[ee++]=191,H[ee++]=189):ae=ie;continue}if(ie<56320){H[ee++]=239,H[ee++]=191,H[ee++]=189,ae=ie;continue}ie=ae-55296<<10|ie-56320|65536,ae=null}else ae&&(H[ee++]=239,H[ee++]=191,H[ee++]=189,ae=null);ie<128?H[ee++]=ie:(ie<2048?H[ee++]=ie>>6|192:(ie<65536?H[ee++]=ie>>12|224:(H[ee++]=ie>>18|240,H[ee++]=ie>>12&63|128),H[ee++]=ie>>6&63|128),H[ee++]=63&ie|128)}return ee}(this.buf,C,this.pos);var S=this.pos-b;S>=128&&zc(b,S,this),this.pos=b-1,this.writeVarint(S),this.pos+=S},writeFloat:function(C){this.realloc(4),Oc(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),Oc(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var b=C.length;this.writeVarint(b),this.realloc(b);for(var S=0;S<b;S++)this.buf[this.pos++]=C[S]},writeRawMessage:function(C,b){this.pos++;var S=this.pos;C(b,this);var H=this.pos-S;H>=128&&zc(S,H,this),this.pos=S-1,this.writeVarint(H),this.pos+=H},writeMessage:function(C,b,S){this.writeTag(C,Dr.Bytes),this.writeRawMessage(b,S)},writePackedVarint:function(C,b){b.length&&this.writeMessage(C,Qu,b)},writePackedSVarint:function(C,b){b.length&&this.writeMessage(C,Ou,b)},writePackedBoolean:function(C,b){b.length&&this.writeMessage(C,zu,b)},writePackedFloat:function(C,b){b.length&&this.writeMessage(C,Ru,b)},writePackedDouble:function(C,b){b.length&&this.writeMessage(C,Hu,b)},writePackedFixed32:function(C,b){b.length&&this.writeMessage(C,Nu,b)},writePackedSFixed32:function(C,b){b.length&&this.writeMessage(C,Vu,b)},writePackedFixed64:function(C,b){b.length&&this.writeMessage(C,Ku,b)},writePackedSFixed64:function(C,b){b.length&&this.writeMessage(C,Gu,b)},writeBytesField:function(C,b){this.writeTag(C,Dr.Bytes),this.writeBytes(b)},writeFixed32Field:function(C,b){this.writeTag(C,Dr.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(C,b){this.writeTag(C,Dr.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(C,b){this.writeTag(C,Dr.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(C,b){this.writeTag(C,Dr.Fixed64),this.writeSFixed64(b)},writeVarintField:function(C,b){this.writeTag(C,Dr.Varint),this.writeVarint(b)},writeSVarintField:function(C,b){this.writeTag(C,Dr.Varint),this.writeSVarint(b)},writeStringField:function(C,b){this.writeTag(C,Dr.Bytes),this.writeString(b)},writeFloatField:function(C,b){this.writeTag(C,Dr.Fixed32),this.writeFloat(b)},writeDoubleField:function(C,b){this.writeTag(C,Dr.Fixed64),this.writeDouble(b)},writeBooleanField:function(C,b){this.writeVarintField(C,!!b)}};var MA=ne(Lc);const PA=3;function Wu(C,b,S){C===1&&S.readMessage(qu,b)}function qu(C,b,S){if(C===3){const{id:H,bitmap:q,width:ee,height:ie,left:ae,top:de,advance:_e}=S.readMessage(Xu,{});b.push({id:H,bitmap:new Sl({width:ee+2*PA,height:ie+2*PA},q),metrics:{width:ee,height:ie,left:ae,top:de,advance:_e}})}}function Xu(C,b,S){C===1?b.id=S.readVarint():C===2?b.bitmap=S.readBytes():C===3?b.width=S.readVarint():C===4?b.height=S.readVarint():C===5?b.left=S.readSVarint():C===6?b.top=S.readSVarint():C===7&&(b.advance=S.readVarint())}const Vc=PA;function Kc(C){let b=0,S=0;for(const ie of C)b+=ie.w*ie.h,S=Math.max(S,ie.w);C.sort((ie,ae)=>ae.h-ie.h);const H=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(b/.95)),S),h:1/0}];let q=0,ee=0;for(const ie of C)for(let ae=H.length-1;ae>=0;ae--){const de=H[ae];if(!(ie.w>de.w||ie.h>de.h)){if(ie.x=de.x,ie.y=de.y,ee=Math.max(ee,ie.y+ie.h),q=Math.max(q,ie.x+ie.w),ie.w===de.w&&ie.h===de.h){const _e=H.pop();ae<H.length&&(H[ae]=_e)}else ie.h===de.h?(de.x+=ie.w,de.w-=ie.w):ie.w===de.w?(de.y+=ie.h,de.h-=ie.h):(H.push({x:de.x+ie.w,y:de.y,w:de.w-ie.w,h:ie.h}),de.y+=ie.h,de.h-=ie.h);break}}return{w:q,h:ee,fill:b/(q*ee)||0}}const sn=1;class LA{constructor(b,{pixelRatio:S,version:H,stretchX:q,stretchY:ee,content:ie}){this.paddedRect=b,this.pixelRatio=S,this.stretchX=q,this.stretchY=ee,this.content=ie,this.version=H}get tl(){return[this.paddedRect.x+sn,this.paddedRect.y+sn]}get br(){return[this.paddedRect.x+this.paddedRect.w-sn,this.paddedRect.y+this.paddedRect.h-sn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*sn)/this.pixelRatio,(this.paddedRect.h-2*sn)/this.pixelRatio]}}class Gc{constructor(b,S){const H={},q={};this.haveRenderCallbacks=[];const ee=[];this.addImages(b,H,ee),this.addImages(S,q,ee);const{w:ie,h:ae}=Kc(ee),de=new xn({width:ie||1,height:ae||1});for(const _e in b){const Ee=b[_e],Fe=H[_e].paddedRect;xn.copy(Ee.data,de,{x:0,y:0},{x:Fe.x+sn,y:Fe.y+sn},Ee.data)}for(const _e in S){const Ee=S[_e],Fe=q[_e].paddedRect,Pe=Fe.x+sn,He=Fe.y+sn,Ne=Ee.data.width,tt=Ee.data.height;xn.copy(Ee.data,de,{x:0,y:0},{x:Pe,y:He},Ee.data),xn.copy(Ee.data,de,{x:0,y:tt-1},{x:Pe,y:He-1},{width:Ne,height:1}),xn.copy(Ee.data,de,{x:0,y:0},{x:Pe,y:He+tt},{width:Ne,height:1}),xn.copy(Ee.data,de,{x:Ne-1,y:0},{x:Pe-1,y:He},{width:1,height:tt}),xn.copy(Ee.data,de,{x:0,y:0},{x:Pe+Ne,y:He},{width:1,height:tt})}this.image=de,this.iconPositions=H,this.patternPositions=q}addImages(b,S,H){for(const q in b){const ee=b[q],ie={x:0,y:0,w:ee.data.width+2*sn,h:ee.data.height+2*sn};H.push(ie),S[q]=new LA(ie,ee),ee.hasRenderCallback&&this.haveRenderCallbacks.push(q)}}patchUpdatedImages(b,S){b.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const H in b.updatedImages)this.patchUpdatedImage(this.iconPositions[H],b.getImage(H),S),this.patchUpdatedImage(this.patternPositions[H],b.getImage(H),S)}patchUpdatedImage(b,S,H){if(!b||!S||b.version===S.version)return;b.version=S.version;const[q,ee]=b.tl;H.update(S.data,void 0,{x:q,y:ee})}}var _o;gi("ImagePosition",LA),gi("ImageAtlas",Gc),D.WritingMode=void 0,(_o=D.WritingMode||(D.WritingMode={}))[_o.none=0]="none",_o[_o.horizontal=1]="horizontal",_o[_o.vertical=2]="vertical",_o[_o.horizontalOnly=3]="horizontalOnly";const Ql=-17;class Ol{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(b,S){const H=new Ol;return H.scale=b||1,H.fontStack=S,H}static forImage(b){const S=new Ol;return S.imageName=b,S}}class hl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(b,S){const H=new hl;for(let q=0;q<b.sections.length;q++){const ee=b.sections[q];ee.image?H.addImageSection(ee):H.addTextSection(ee,S)}return H}length(){return this.text.length}getSection(b){return this.sections[this.sectionIndex[b]]}getSectionIndex(b){return this.sectionIndex[b]}getCharCode(b){return this.text.charCodeAt(b)}verticalizePunctuation(){this.text=function(b){let S="";for(let H=0;H<b.length;H++){const q=b.charCodeAt(H+1)||null,ee=b.charCodeAt(H-1)||null;S+=q&&hi(q)&&!Ll[b[H+1]]||ee&&hi(ee)&&!Ll[b[H-1]]||!Ll[b[H]]?b[H]:Ll[b[H]]}return S}(this.text)}trim(){let b=0;for(let H=0;H<this.text.length&&iA[this.text.charCodeAt(H)];H++)b++;let S=this.text.length;for(let H=this.text.length-1;H>=0&&H>=b&&iA[this.text.charCodeAt(H)];H--)S--;this.text=this.text.substring(b,S),this.sectionIndex=this.sectionIndex.slice(b,S)}substring(b,S){const H=new hl;return H.text=this.text.substring(b,S),H.sectionIndex=this.sectionIndex.slice(b,S),H.sections=this.sections,H}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((b,S)=>Math.max(b,this.sections[S].scale),0)}addTextSection(b,S){this.text+=b.text,this.sections.push(Ol.forText(b.scale,b.fontStack||S));const H=this.sections.length-1;for(let q=0;q<b.text.length;++q)this.sectionIndex.push(H)}addImageSection(b){const S=b.image?b.image.name:"";if(S.length===0)return void Vt("Can't add FormattedSection with an empty image.");const H=this.getNextImageSectionCharCode();H?(this.text+=String.fromCharCode(H),this.sections.push(Ol.forImage(S)),this.sectionIndex.push(this.sections.length-1)):Vt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tA(C,b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt){const at=hl.fromFeature(C,q);let ct;Fe===D.WritingMode.vertical&&at.verticalizePunctuation();const{processBidirectionalText:mt,processStyledBidirectionalText:ht}=ns;if(mt&&at.sections.length===1){ct=[];const Qt=mt(at.toString(),QA(at,_e,ee,b,H,He,Ne));for(const fi of Qt){const Ci=new hl;Ci.text=fi,Ci.sections=at.sections;for(let ui=0;ui<fi.length;ui++)Ci.sectionIndex.push(0);ct.push(Ci)}}else if(ht){ct=[];const Qt=ht(at.text,at.sectionIndex,QA(at,_e,ee,b,H,He,Ne));for(const fi of Qt){const Ci=new hl;Ci.text=fi[0],Ci.sectionIndex=fi[1],Ci.sections=at.sections,ct.push(Ci)}}else ct=function(Qt,fi){const Ci=[],ui=Qt.text;let li=0;for(const ti of fi)Ci.push(Qt.substring(li,ti)),li=ti;return li<ui.length&&Ci.push(Qt.substring(li,ui.length)),Ci}(at,QA(at,_e,ee,b,H,He,Ne));const wt=[],Ct={positionedLines:wt,text:at.toString(),top:Ee[1],bottom:Ee[1],left:Ee[0],right:Ee[0],writingMode:Fe,iconsInText:!1,verticalizable:!1};return function(Qt,fi,Ci,ui,li,ti,yi,si,Gt,Pi,Ii,ir){let Rr=0,zr=Ql,fs=0,fn=0;const Gs=si==="right"?1:si==="left"?0:.5;let os=0;for(const ls of li){ls.trim();const ds=ls.getMaxScale(),Ps=(ds-1)*us,qs={positionedGlyphs:[],lineOffset:0};Qt.positionedLines[os]=qs;const an=qs.positionedGlyphs;let on=0;if(!ls.length()){zr+=ti,++os;continue}for(let Ss=0;Ss<ls.length();Ss++){const fr=ls.getSection(Ss),dn=ls.getSectionIndex(Ss),Fs=ls.getCharCode(Ss);let Xs=0,Pn=null,Zn=null,Jn=null,qa=us;const Ln=!(Gt===D.WritingMode.horizontal||!Ii&&!jt(Fs)||Ii&&(iA[Fs]||(ms=Fs,je.Arabic(ms)||je["Arabic Supplement"](ms)||je["Arabic Extended-A"](ms)||je["Arabic Presentation Forms-A"](ms)||je["Arabic Presentation Forms-B"](ms))));if(fr.imageName){const Cn=ui[fr.imageName];if(!Cn)continue;Jn=fr.imageName,Qt.iconsInText=Qt.iconsInText||!0,Zn=Cn.paddedRect;const ln=Cn.displaySize;fr.scale=fr.scale*us/ir,Pn={width:ln[0],height:ln[1],left:sn,top:-Vc,advance:Ln?ln[1]:ln[0]},Xs=Ps+(us-ln[1]*fr.scale),qa=Pn.advance;const Xa=Ln?ln[0]*fr.scale-us*ds:ln[1]*fr.scale-us*ds;Xa>0&&Xa>on&&(on=Xa)}else{const Cn=Ci[fr.fontStack],ln=Cn&&Cn[Fs];if(ln&&ln.rect)Zn=ln.rect,Pn=ln.metrics;else{const Xa=fi[fr.fontStack],Vl=Xa&&Xa[Fs];if(!Vl)continue;Pn=Vl.metrics}Xs=(ds-fr.scale)*us}Ln?(Qt.verticalizable=!0,an.push({glyph:Fs,imageName:Jn,x:Rr,y:zr+Xs,vertical:Ln,scale:fr.scale,fontStack:fr.fontStack,sectionIndex:dn,metrics:Pn,rect:Zn}),Rr+=qa*fr.scale+Pi):(an.push({glyph:Fs,imageName:Jn,x:Rr,y:zr+Xs,vertical:Ln,scale:fr.scale,fontStack:fr.fontStack,sectionIndex:dn,metrics:Pn,rect:Zn}),Rr+=Pn.advance*fr.scale+Pi)}an.length!==0&&(fs=Math.max(Rr-Pi,fs),Zu(an,0,an.length-1,Gs,on)),Rr=0;const Jr=ti*ds+on;qs.lineOffset=Math.max(on,Ps),zr+=Jr,fn=Math.max(Jr,fn),++os}var ms;const Is=zr-Ql,{horizontalAlign:nn,verticalAlign:Ws}=OA(yi);(function(ls,ds,Ps,qs,an,on,Jr,Ss,fr){const dn=(ds-Ps)*an;let Fs=0;Fs=on!==Jr?-Ss*qs-Ql:(-qs*fr+.5)*Jr;for(const Xs of ls)for(const Pn of Xs.positionedGlyphs)Pn.x+=dn,Pn.y+=Fs})(Qt.positionedLines,Gs,nn,Ws,fs,fn,ti,Is,li.length),Qt.top+=-Ws*Is,Qt.bottom=Qt.top+Is,Qt.left+=-nn*fs,Qt.right=Qt.left+fs}(Ct,b,S,H,ct,ie,ae,de,Fe,_e,Pe,tt),!function(Qt){for(const fi of Qt)if(fi.positionedGlyphs.length!==0)return!1;return!0}(wt)&&Ct}const iA={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Wc(C,b,S,H,q,ee){if(b.imageName){const ie=H[b.imageName];return ie?ie.displaySize[0]*b.scale*us/ee+q:0}{const ie=S[b.fontStack],ae=ie&&ie[C];return ae?ae.metrics.advance*b.scale+q:0}}function qc(C,b,S,H){const q=Math.pow(C-b,2);return H?C<b?q/2:2*q:q+Math.abs(S)*S}function ju(C,b,S){let H=0;return C===10&&(H-=1e4),S&&(H+=150),C!==40&&C!==65288||(H+=50),b!==41&&b!==65289||(H+=50),H}function Xc(C,b,S,H,q,ee){let ie=null,ae=qc(b,S,q,ee);for(const de of H){const _e=qc(b-de.x,S,q,ee)+de.badness;_e<=ae&&(ie=de,ae=_e)}return{index:C,x:b,priorBreak:ie,badness:ae}}function Yc(C){return C?Yc(C.priorBreak).concat(C.index):[]}function QA(C,b,S,H,q,ee,ie){if(ee!=="point")return[];if(!C)return[];const ae=[],de=function(Pe,He,Ne,tt,at,ct){let mt=0;for(let ht=0;ht<Pe.length();ht++){const wt=Pe.getSection(ht);mt+=Wc(Pe.getCharCode(ht),wt,tt,at,He,ct)}return mt/Math.max(1,Math.ceil(mt/Ne))}(C,b,S,H,q,ie),_e=C.text.indexOf("â")>=0;let Ee=0;for(let Pe=0;Pe<C.length();Pe++){const He=C.getSection(Pe),Ne=C.getCharCode(Pe);if(iA[Ne]||(Ee+=Wc(Ne,He,H,q,b,ie)),Pe<C.length()-1){const tt=!((Fe=Ne)<11904||!(je["Bopomofo Extended"](Fe)||je.Bopomofo(Fe)||je["CJK Compatibility Forms"](Fe)||je["CJK Compatibility Ideographs"](Fe)||je["CJK Compatibility"](Fe)||je["CJK Radicals Supplement"](Fe)||je["CJK Strokes"](Fe)||je["CJK Symbols and Punctuation"](Fe)||je["CJK Unified Ideographs Extension A"](Fe)||je["CJK Unified Ideographs"](Fe)||je["Enclosed CJK Letters and Months"](Fe)||je["Halfwidth and Fullwidth Forms"](Fe)||je.Hiragana(Fe)||je["Ideographic Description Characters"](Fe)||je["Kangxi Radicals"](Fe)||je["Katakana Phonetic Extensions"](Fe)||je.Katakana(Fe)||je["Vertical Forms"](Fe)||je["Yi Radicals"](Fe)||je["Yi Syllables"](Fe)));(Yu[Ne]||tt||He.imageName)&&ae.push(Xc(Pe+1,Ee,de,ae,ju(Ne,C.getCharCode(Pe+1),tt&&_e),!1))}}var Fe;return Yc(Xc(C.length(),Ee,de,ae,0,!0))}function OA(C){let b=.5,S=.5;switch(C){case"right":case"top-right":case"bottom-right":b=1;break;case"left":case"top-left":case"bottom-left":b=0}switch(C){case"bottom":case"bottom-right":case"bottom-left":S=1;break;case"top":case"top-right":case"top-left":S=0}return{horizontalAlign:b,verticalAlign:S}}function Zu(C,b,S,H,q){if(!H&&!q)return;const ee=C[S],ie=(C[S].x+ee.metrics.advance*ee.scale)*H;for(let ae=b;ae<=S;ae++)C[ae].x-=ie,C[ae].y+=q}function Ju(C,b,S){const{horizontalAlign:H,verticalAlign:q}=OA(S),ee=b[0]-C.displaySize[0]*H,ie=b[1]-C.displaySize[1]*q;return{image:C,top:ie,bottom:ie+C.displaySize[1],left:ee,right:ee+C.displaySize[0]}}function jc(C,b,S,H,q,ee){const ie=C.image;let ae;if(ie.content){const at=ie.content,ct=ie.pixelRatio||1;ae=[at[0]/ct,at[1]/ct,ie.displaySize[0]-at[2]/ct,ie.displaySize[1]-at[3]/ct]}const de=b.left*ee,_e=b.right*ee;let Ee,Fe,Pe,He;S==="width"||S==="both"?(He=q[0]+de-H[3],Fe=q[0]+_e+H[1]):(He=q[0]+(de+_e-ie.displaySize[0])/2,Fe=He+ie.displaySize[0]);const Ne=b.top*ee,tt=b.bottom*ee;return S==="height"||S==="both"?(Ee=q[1]+Ne-H[0],Pe=q[1]+tt+H[2]):(Ee=q[1]+(Ne+tt-ie.displaySize[1])/2,Pe=Ee+ie.displaySize[1]),{image:ie,top:Ee,right:Fe,bottom:Pe,left:He,collisionPadding:ae}}const Rl=255,va=128,yo=Rl*va;function Zc(C,b){const{expression:S}=b;if(S.kind==="constant")return{kind:"constant",layoutSize:S.evaluate(new Er(C+1))};if(S.kind==="source")return{kind:"source"};{const{zoomStops:H,interpolationType:q}=S;let ee=0;for(;ee<H.length&&H[ee]<=C;)ee++;ee=Math.max(0,ee-1);let ie=ee;for(;ie<H.length&&H[ie]<C+1;)ie++;ie=Math.min(H.length-1,ie);const ae=H[ee],de=H[ie];return S.kind==="composite"?{kind:"composite",minZoom:ae,maxZoom:de,interpolationType:q}:{kind:"camera",minZoom:ae,maxZoom:de,minSize:S.evaluate(new Er(ae)),maxSize:S.evaluate(new Er(de)),interpolationType:q}}}function RA(C,b,S){let H="never";const q=C.get(b);return q?H=q:C.get(S)&&(H="always"),H}const $u=mo.VectorTileFeature.types,ef=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rA(C,b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe){const He=ae?Math.min(yo,Math.round(ae[0])):0,Ne=ae?Math.min(yo,Math.round(ae[1])):0;C.emplaceBack(b,S,Math.round(32*H),Math.round(32*q),ee,ie,(He<<1)+(de?1:0),Ne,16*_e,16*Ee,256*Fe,256*Pe)}function HA(C,b,S){C.emplaceBack(b.x,b.y,S),C.emplaceBack(b.x,b.y,S),C.emplaceBack(b.x,b.y,S),C.emplaceBack(b.x,b.y,S)}function tf(C){for(const b of C.sections)if(zi(b.text))return!0;return!1}class zA{constructor(b){this.layoutVertexArray=new Rt,this.indexArray=new ki,this.programConfigurations=b,this.segments=new Mi,this.dynamicLayoutVertexArray=new Jt,this.opacityVertexArray=new Bi,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(b,S,H,q){this.isEmpty()||(H&&(this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Du.members),this.indexBuffer=b.createIndexBuffer(this.indexArray,S),this.dynamicLayoutVertexBuffer=b.createVertexBuffer(this.dynamicLayoutVertexArray,Uu.members,!0),this.opacityVertexBuffer=b.createVertexBuffer(this.opacityVertexArray,ef,!0),this.opacityVertexBuffer.itemSize=1),(H||q)&&this.programConfigurations.upload(b))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}gi("SymbolBuffers",zA);class NA{constructor(b,S,H){this.layoutVertexArray=new b,this.layoutAttributes=S,this.indexArray=new H,this.segments=new Mi,this.collisionVertexArray=new oi}upload(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=b.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=b.createVertexBuffer(this.collisionVertexArray,Mu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}gi("CollisionBuffers",NA);class ul{constructor(b){this.collisionBoxArray=b.collisionBoxArray,this.zoom=b.zoom,this.overscaling=b.overscaling,this.layers=b.layers,this.layerIds=this.layers.map(ie=>ie.id),this.index=b.index,this.pixelRatio=b.pixelRatio,this.sourceLayerIndex=b.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=mA([]),this.placementViewportMatrix=mA([]);const S=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Zc(this.zoom,S["text-size"]),this.iconSizeData=Zc(this.zoom,S["icon-size"]);const H=this.layers[0].layout,q=H.get("symbol-sort-key"),ee=H.get("symbol-z-order");this.canOverlap=RA(H,"text-overlap","text-allow-overlap")!=="never"||RA(H,"icon-overlap","icon-allow-overlap")!=="never"||H.get("text-ignore-placement")||H.get("icon-ignore-placement"),this.sortFeaturesByKey=ee!=="viewport-y"&&!q.isConstant(),this.sortFeaturesByY=(ee==="viewport-y"||ee==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,H.get("symbol-placement")==="point"&&(this.writingModes=H.get("text-writing-mode").map(ie=>D.WritingMode[ie])),this.stateDependentLayerIds=this.layers.filter(ie=>ie.isStateDependent()).map(ie=>ie.id),this.sourceID=b.sourceID}createArrays(){this.text=new zA(new Ka(this.layers,this.zoom,b=>/^text/.test(b))),this.icon=new zA(new Ka(this.layers,this.zoom,b=>/^icon/.test(b))),this.glyphOffsetArray=new Qe,this.lineVertexArray=new Je,this.symbolInstances=new Ie,this.textAnchorOffsets=new rt}calculateGlyphDependencies(b,S,H,q,ee){for(let ie=0;ie<b.length;ie++)if(S[b.charCodeAt(ie)]=!0,(H||q)&&ee){const ae=Ll[b.charAt(ie)];ae&&(S[ae.charCodeAt(0)]=!0)}}populate(b,S,H){const q=this.layers[0],ee=q.layout,ie=ee.get("text-font"),ae=ee.get("text-field"),de=ee.get("icon-image"),_e=(ae.value.kind!=="constant"||ae.value.value instanceof Zi&&!ae.value.value.isEmpty()||ae.value.value.toString().length>0)&&(ie.value.kind!=="constant"||ie.value.value.length>0),Ee=de.value.kind!=="constant"||!!de.value.value||Object.keys(de.parameters).length>0,Fe=ee.get("symbol-sort-key");if(this.features=[],!_e&&!Ee)return;const Pe=S.iconDependencies,He=S.glyphDependencies,Ne=S.availableImages,tt=new Er(this.zoom);for(const{feature:at,id:ct,index:mt,sourceLayerIndex:ht}of b){const wt=q._featureFilter.needGeometry,Ct=ya(at,wt);if(!q._featureFilter.filter(tt,Ct,H))continue;let Qt,fi;if(wt||(Ct.geometry=jn(at)),_e){const ui=q.getValueAndResolveTokens("text-field",Ct,H,Ne),li=Zi.factory(ui);tf(li)&&(this.hasRTLText=!0),(!this.hasRTLText||Ha()==="unavailable"||this.hasRTLText&&ns.isParsed())&&(Qt=Lu(li,q,Ct))}if(Ee){const ui=q.getValueAndResolveTokens("icon-image",Ct,H,Ne);fi=ui instanceof Dt?ui:Dt.fromString(ui)}if(!Qt&&!fi)continue;const Ci=this.sortFeaturesByKey?Fe.evaluate(Ct,{},H):void 0;if(this.features.push({id:ct,text:Qt,icon:fi,index:mt,sourceLayerIndex:ht,geometry:Ct.geometry,properties:at.properties,type:$u[at.type],sortKey:Ci}),fi&&(Pe[fi.name]=!0),Qt){const ui=ie.evaluate(Ct,{},H).join(","),li=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(D.WritingMode.vertical)>=0;for(const ti of Qt.sections)if(ti.image)Pe[ti.image.name]=!0;else{const yi=yt(Qt.toString()),si=ti.fontStack||ui,Gt=He[si]=He[si]||{};this.calculateGlyphDependencies(ti.text,Gt,li,this.allowVerticalPlacement,yi)}}}ee.get("symbol-placement")==="line"&&(this.features=function(at){const ct={},mt={},ht=[];let wt=0;function Ct(ui){ht.push(at[ui]),wt++}function Qt(ui,li,ti){const yi=mt[ui];return delete mt[ui],mt[li]=yi,ht[yi].geometry[0].pop(),ht[yi].geometry[0]=ht[yi].geometry[0].concat(ti[0]),yi}function fi(ui,li,ti){const yi=ct[li];return delete ct[li],ct[ui]=yi,ht[yi].geometry[0].shift(),ht[yi].geometry[0]=ti[0].concat(ht[yi].geometry[0]),yi}function Ci(ui,li,ti){const yi=ti?li[0][li[0].length-1]:li[0][0];return`${ui}:${yi.x}:${yi.y}`}for(let ui=0;ui<at.length;ui++){const li=at[ui],ti=li.geometry,yi=li.text?li.text.toString():null;if(!yi){Ct(ui);continue}const si=Ci(yi,ti),Gt=Ci(yi,ti,!0);if(si in mt&&Gt in ct&&mt[si]!==ct[Gt]){const Pi=fi(si,Gt,ti),Ii=Qt(si,Gt,ht[Pi].geometry);delete ct[si],delete mt[Gt],mt[Ci(yi,ht[Ii].geometry,!0)]=Ii,ht[Pi].geometry=null}else si in mt?Qt(si,Gt,ti):Gt in ct?fi(si,Gt,ti):(Ct(ui),ct[si]=wt-1,mt[Gt]=wt-1)}return ht.filter(ui=>ui.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((at,ct)=>at.sortKey-ct.sortKey)}update(b,S,H){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(b,S,this.layers,H),this.icon.programConfigurations.updatePaintArrays(b,S,this.layers,H))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(b){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(b),this.iconCollisionBox.upload(b)),this.text.upload(b,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(b,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(b,S){const H=this.lineVertexArray.length;if(b.segment!==void 0){let q=b.dist(S[b.segment+1]),ee=b.dist(S[b.segment]);const ie={};for(let ae=b.segment+1;ae<S.length;ae++)ie[ae]={x:S[ae].x,y:S[ae].y,tileUnitDistanceFromAnchor:q},ae<S.length-1&&(q+=S[ae+1].dist(S[ae]));for(let ae=b.segment||0;ae>=0;ae--)ie[ae]={x:S[ae].x,y:S[ae].y,tileUnitDistanceFromAnchor:ee},ae>0&&(ee+=S[ae-1].dist(S[ae]));for(let ae=0;ae<S.length;ae++){const de=ie[ae];this.lineVertexArray.emplaceBack(de.x,de.y,de.tileUnitDistanceFromAnchor)}}return{lineStartIndex:H,lineLength:this.lineVertexArray.length-H}}addSymbols(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe){const He=b.indexArray,Ne=b.layoutVertexArray,tt=b.segments.prepareSegment(4*S.length,Ne,He,this.canOverlap?ie.sortKey:void 0),at=this.glyphOffsetArray.length,ct=tt.vertexLength,mt=this.allowVerticalPlacement&&ae===D.WritingMode.vertical?Math.PI/2:0,ht=ie.text&&ie.text.sections;for(let wt=0;wt<S.length;wt++){const{tl:Ct,tr:Qt,bl:fi,br:Ci,tex:ui,pixelOffsetTL:li,pixelOffsetBR:ti,minFontScaleX:yi,minFontScaleY:si,glyphOffset:Gt,isSDF:Pi,sectionIndex:Ii}=S[wt],ir=tt.vertexLength,Rr=Gt[1];rA(Ne,de.x,de.y,Ct.x,Rr+Ct.y,ui.x,ui.y,H,Pi,li.x,li.y,yi,si),rA(Ne,de.x,de.y,Qt.x,Rr+Qt.y,ui.x+ui.w,ui.y,H,Pi,ti.x,li.y,yi,si),rA(Ne,de.x,de.y,fi.x,Rr+fi.y,ui.x,ui.y+ui.h,H,Pi,li.x,ti.y,yi,si),rA(Ne,de.x,de.y,Ci.x,Rr+Ci.y,ui.x+ui.w,ui.y+ui.h,H,Pi,ti.x,ti.y,yi,si),HA(b.dynamicLayoutVertexArray,de,mt),He.emplaceBack(ir,ir+1,ir+2),He.emplaceBack(ir+1,ir+2,ir+3),tt.vertexLength+=4,tt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Gt[0]),wt!==S.length-1&&Ii===S[wt+1].sectionIndex||b.programConfigurations.populatePaintArrays(Ne.length,ie,ie.index,{},Pe,ht&&ht[Ii])}b.placedSymbolArray.emplaceBack(de.x,de.y,at,this.glyphOffsetArray.length-at,ct,_e,Ee,de.segment,H?H[0]:0,H?H[1]:0,q[0],q[1],ae,0,!1,0,Fe)}_addCollisionDebugVertex(b,S,H,q,ee,ie){return S.emplaceBack(0,0),b.emplaceBack(H.x,H.y,q,ee,Math.round(ie.x),Math.round(ie.y))}addCollisionDebugVertices(b,S,H,q,ee,ie,ae){const de=ee.segments.prepareSegment(4,ee.layoutVertexArray,ee.indexArray),_e=de.vertexLength,Ee=ee.layoutVertexArray,Fe=ee.collisionVertexArray,Pe=ae.anchorX,He=ae.anchorY;this._addCollisionDebugVertex(Ee,Fe,ie,Pe,He,new ge(b,S)),this._addCollisionDebugVertex(Ee,Fe,ie,Pe,He,new ge(H,S)),this._addCollisionDebugVertex(Ee,Fe,ie,Pe,He,new ge(H,q)),this._addCollisionDebugVertex(Ee,Fe,ie,Pe,He,new ge(b,q)),de.vertexLength+=4;const Ne=ee.indexArray;Ne.emplaceBack(_e,_e+1),Ne.emplaceBack(_e+1,_e+2),Ne.emplaceBack(_e+2,_e+3),Ne.emplaceBack(_e+3,_e),de.primitiveLength+=4}addDebugCollisionBoxes(b,S,H,q){for(let ee=b;ee<S;ee++){const ie=this.collisionBoxArray.get(ee);this.addCollisionDebugVertices(ie.x1,ie.y1,ie.x2,ie.y2,q?this.textCollisionBox:this.iconCollisionBox,ie.anchorPoint,H)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new NA(ar,Pc.members,xi),this.iconCollisionBox=new NA(ar,Pc.members,xi);for(let b=0;b<this.symbolInstances.length;b++){const S=this.symbolInstances.get(b);this.addDebugCollisionBoxes(S.textBoxStartIndex,S.textBoxEndIndex,S,!0),this.addDebugCollisionBoxes(S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S,!0),this.addDebugCollisionBoxes(S.iconBoxStartIndex,S.iconBoxEndIndex,S,!1),this.addDebugCollisionBoxes(S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S,!1)}}_deserializeCollisionBoxesForSymbol(b,S,H,q,ee,ie,ae,de,_e){const Ee={};for(let Fe=S;Fe<H;Fe++){const Pe=b.get(Fe);Ee.textBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},Ee.textFeatureIndex=Pe.featureIndex;break}for(let Fe=q;Fe<ee;Fe++){const Pe=b.get(Fe);Ee.verticalTextBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},Ee.verticalTextFeatureIndex=Pe.featureIndex;break}for(let Fe=ie;Fe<ae;Fe++){const Pe=b.get(Fe);Ee.iconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},Ee.iconFeatureIndex=Pe.featureIndex;break}for(let Fe=de;Fe<_e;Fe++){const Pe=b.get(Fe);Ee.verticalIconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},Ee.verticalIconFeatureIndex=Pe.featureIndex;break}return Ee}deserializeCollisionBoxes(b){this.collisionArrays=[];for(let S=0;S<this.symbolInstances.length;S++){const H=this.symbolInstances.get(S);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(b,H.textBoxStartIndex,H.textBoxEndIndex,H.verticalTextBoxStartIndex,H.verticalTextBoxEndIndex,H.iconBoxStartIndex,H.iconBoxEndIndex,H.verticalIconBoxStartIndex,H.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(b,S){const H=b.placedSymbolArray.get(S),q=H.vertexStartIndex+4*H.numGlyphs;for(let ee=H.vertexStartIndex;ee<q;ee+=4)b.indexArray.emplaceBack(ee,ee+1,ee+2),b.indexArray.emplaceBack(ee+1,ee+2,ee+3)}getSortedSymbolIndexes(b){if(this.sortedAngle===b&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const S=Math.sin(b),H=Math.cos(b),q=[],ee=[],ie=[];for(let ae=0;ae<this.symbolInstances.length;++ae){ie.push(ae);const de=this.symbolInstances.get(ae);q.push(0|Math.round(S*de.anchorX+H*de.anchorY)),ee.push(de.featureIndex)}return ie.sort((ae,de)=>q[ae]-q[de]||ee[de]-ee[ae]),ie}addToSortKeyRanges(b,S){const H=this.sortKeyRanges[this.sortKeyRanges.length-1];H&&H.sortKey===S?H.symbolInstanceEnd=b+1:this.sortKeyRanges.push({sortKey:S,symbolInstanceStart:b,symbolInstanceEnd:b+1})}sortFeatures(b){if(this.sortFeaturesByY&&this.sortedAngle!==b&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(b),this.sortedAngle=b,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const S of this.symbolInstanceIndexes){const H=this.symbolInstances.get(S);this.featureSortOrder.push(H.featureIndex),[H.rightJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.leftJustifiedTextSymbolIndex].forEach((q,ee,ie)=>{q>=0&&ie.indexOf(q)===ee&&this.addIndicesForPlacedSymbol(this.text,q)}),H.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,H.verticalPlacedTextSymbolIndex),H.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,H.placedIconSymbolIndex),H.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,H.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Jc,$c;gi("SymbolBucket",ul,{omit:["layers","collisionBoxArray","features","compareText"]}),ul.MAX_GLYPHS=65535,ul.addDynamicAttributes=HA;var VA={get paint(){return $c=$c||new Ns({"icon-opacity":new Ni(me.paint_symbol["icon-opacity"]),"icon-color":new Ni(me.paint_symbol["icon-color"]),"icon-halo-color":new Ni(me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ni(me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ni(me.paint_symbol["icon-halo-blur"]),"icon-translate":new Fi(me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fi(me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ni(me.paint_symbol["text-opacity"]),"text-color":new Ni(me.paint_symbol["text-color"],{runtimeType:Wi,getOverride:C=>C.textColor,hasOverride:C=>!!C.textColor}),"text-halo-color":new Ni(me.paint_symbol["text-halo-color"]),"text-halo-width":new Ni(me.paint_symbol["text-halo-width"]),"text-halo-blur":new Ni(me.paint_symbol["text-halo-blur"]),"text-translate":new Fi(me.paint_symbol["text-translate"]),"text-translate-anchor":new Fi(me.paint_symbol["text-translate-anchor"])})},get layout(){return Jc=Jc||new Ns({"symbol-placement":new Fi(me.layout_symbol["symbol-placement"]),"symbol-spacing":new Fi(me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fi(me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ni(me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fi(me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fi(me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Fi(me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Fi(me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fi(me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fi(me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ni(me.layout_symbol["icon-size"]),"icon-text-fit":new Fi(me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fi(me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ni(me.layout_symbol["icon-image"]),"icon-rotate":new Ni(me.layout_symbol["icon-rotate"]),"icon-padding":new Ni(me.layout_symbol["icon-padding"]),"icon-keep-upright":new Fi(me.layout_symbol["icon-keep-upright"]),"icon-offset":new Ni(me.layout_symbol["icon-offset"]),"icon-anchor":new Ni(me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fi(me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fi(me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fi(me.layout_symbol["text-rotation-alignment"]),"text-field":new Ni(me.layout_symbol["text-field"]),"text-font":new Ni(me.layout_symbol["text-font"]),"text-size":new Ni(me.layout_symbol["text-size"]),"text-max-width":new Ni(me.layout_symbol["text-max-width"]),"text-line-height":new Fi(me.layout_symbol["text-line-height"]),"text-letter-spacing":new Ni(me.layout_symbol["text-letter-spacing"]),"text-justify":new Ni(me.layout_symbol["text-justify"]),"text-radial-offset":new Ni(me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fi(me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ni(me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ni(me.layout_symbol["text-anchor"]),"text-max-angle":new Fi(me.layout_symbol["text-max-angle"]),"text-writing-mode":new Fi(me.layout_symbol["text-writing-mode"]),"text-rotate":new Ni(me.layout_symbol["text-rotate"]),"text-padding":new Fi(me.layout_symbol["text-padding"]),"text-keep-upright":new Fi(me.layout_symbol["text-keep-upright"]),"text-transform":new Ni(me.layout_symbol["text-transform"]),"text-offset":new Ni(me.layout_symbol["text-offset"]),"text-allow-overlap":new Fi(me.layout_symbol["text-allow-overlap"]),"text-overlap":new Fi(me.layout_symbol["text-overlap"]),"text-ignore-placement":new Fi(me.layout_symbol["text-ignore-placement"]),"text-optional":new Fi(me.layout_symbol["text-optional"])})}};class eh{constructor(b){if(b.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=b.property.overrides?b.property.overrides.runtimeType:Vi,this.defaultValue=b}evaluate(b){if(b.formattedSection){const S=this.defaultValue.property.overrides;if(S&&S.hasOverride(b.formattedSection))return S.getOverride(b.formattedSection)}return b.feature&&b.featureState?this.defaultValue.evaluate(b.feature,b.featureState):this.defaultValue.property.specification.default}eachChild(b){this.defaultValue.isConstant()||b(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}gi("FormatSectionOverride",eh,{omit:["defaultValue"]});class sA extends Dn{constructor(b){super(b,VA)}recalculate(b,S){if(super.recalculate(b,S),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const H=this.layout.get("text-writing-mode");if(H){const q=[];for(const ee of H)q.indexOf(ee)<0&&q.push(ee);this.layout._values["text-writing-mode"]=q}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(b,S,H,q){const ee=this.layout.get(b).evaluate(S,{},H,q),ie=this._unevaluatedLayout._values[b];return ie.isDataDriven()||$s(ie.value)||!ee?ee:function(ae,de){return de.replace(/{([^{}]+)}/g,(_e,Ee)=>Ee in ae?String(ae[Ee]):"")}(S.properties,ee)}createBucket(b){return new ul(b)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const b of VA.paint.overridableProperties){if(!sA.hasPaintOverride(this.layout,b))continue;const S=this.paint.get(b),H=new eh(S),q=new Ur(H,S.property.specification);let ee=null;ee=S.value.kind==="constant"||S.value.kind==="source"?new yr("source",q):new Fr("composite",q,S.value.zoomStops),this.paint._values[b]=new zs(S.property,ee,S.parameters)}}_handleOverridablePaintPropertyUpdate(b,S,H){return!(!this.layout||S.isDataDriven()||H.isDataDriven())&&sA.hasPaintOverride(this.layout,b)}static hasPaintOverride(b,S){const H=b.get("text-field"),q=VA.paint.properties[S];let ee=!1;const ie=ae=>{for(const de of ae)if(q.overrides&&q.overrides.hasOverride(de))return void(ee=!0)};if(H.value.kind==="constant"&&H.value.value instanceof Zi)ie(H.value.value.sections);else if(H.value.kind==="source"){const ae=_e=>{ee||(_e instanceof Cr&&_r(_e.value)===$i?ie(_e.value.sections):_e instanceof Fa?ie(_e.sections):_e.eachChild(ae))},de=H.value;de._styleExpression&&ae(de._styleExpression.expression)}return ee}}let th;var rf={get paint(){return th=th||new Ns({"background-color":new Fi(me.paint_background["background-color"]),"background-pattern":new vl(me.paint_background["background-pattern"]),"background-opacity":new Fi(me.paint_background["background-opacity"])})}};class sf extends Dn{constructor(b){super(b,rf)}}let ih;var nf={get paint(){return ih=ih||new Ns({"raster-opacity":new Fi(me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fi(me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fi(me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fi(me.paint_raster["raster-brightness-max"]),"raster-saturation":new Fi(me.paint_raster["raster-saturation"]),"raster-contrast":new Fi(me.paint_raster["raster-contrast"]),"raster-resampling":new Fi(me.paint_raster["raster-resampling"]),"raster-fade-duration":new Fi(me.paint_raster["raster-fade-duration"])})}};class af extends Dn{constructor(b){super(b,nf)}}class of extends Dn{constructor(b){super(b,{}),this.onAdd=S=>{this.implementation.onAdd&&this.implementation.onAdd(S,S.painter.context.gl)},this.onRemove=S=>{this.implementation.onRemove&&this.implementation.onRemove(S,S.painter.context.gl)},this.implementation=b}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class lf{constructor(b){this._callback=b,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const KA=63710088e-1;class vo{constructor(b,S){if(isNaN(b)||isNaN(S))throw new Error(`Invalid LngLat object: (${b}, ${S})`);if(this.lng=+b,this.lat=+S,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vo(ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(b){const S=Math.PI/180,H=this.lat*S,q=b.lat*S,ee=Math.sin(H)*Math.sin(q)+Math.cos(H)*Math.cos(q)*Math.cos((b.lng-this.lng)*S);return KA*Math.acos(Math.min(ee,1))}static convert(b){if(b instanceof vo)return b;if(Array.isArray(b)&&(b.length===2||b.length===3))return new vo(Number(b[0]),Number(b[1]));if(!Array.isArray(b)&&typeof b=="object"&&b!==null)return new vo(Number("lng"in b?b.lng:b.lon),Number(b.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const rh=2*Math.PI*KA;function sh(C){return rh*Math.cos(C*Math.PI/180)}function nh(C){return(180+C)/360}function ah(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function oh(C,b){return C/sh(b)}function GA(C){return 360/Math.PI*Math.atan(Math.exp((180-360*C)*Math.PI/180))-90}class nA{constructor(b,S,H=0){this.x=+b,this.y=+S,this.z=+H}static fromLngLat(b,S=0){const H=vo.convert(b);return new nA(nh(H.lng),ah(H.lat),oh(S,H.lat))}toLngLat(){return new vo(360*this.x-180,GA(this.y))}toAltitude(){return this.z*sh(GA(this.y))}meterInMercatorCoordinateUnits(){return 1/rh*(b=GA(this.y),1/Math.cos(b*Math.PI/180));var b}}function lh(C,b,S){var H=2*Math.PI*6378137/256/Math.pow(2,S);return[C*H-2*Math.PI*6378137/2,b*H-2*Math.PI*6378137/2]}class WA{constructor(b,S,H){if(b<0||b>25||H<0||H>=Math.pow(2,b)||S<0||S>=Math.pow(2,b))throw new Error(`x=${S}, y=${H}, z=${b} outside of bounds. 0<=x<${Math.pow(2,b)}, 0<=y<${Math.pow(2,b)} 0<=z<=25 `);this.z=b,this.x=S,this.y=H,this.key=Hl(0,b,b,S,H)}equals(b){return this.z===b.z&&this.x===b.x&&this.y===b.y}url(b,S,H){const q=(ie=this.y,ae=this.z,de=lh(256*(ee=this.x),256*(ie=Math.pow(2,ae)-ie-1),ae),_e=lh(256*(ee+1),256*(ie+1),ae),de[0]+","+de[1]+","+_e[0]+","+_e[1]);var ee,ie,ae,de,_e;const Ee=function(Fe,Pe,He){let Ne,tt="";for(let at=Fe;at>0;at--)Ne=1<<at-1,tt+=(Pe&Ne?1:0)+(He&Ne?2:0);return tt}(this.z,this.x,this.y);return b[(this.x+this.y)%b.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(H==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,S>1?"@2x":"").replace(/{quadkey}/g,Ee).replace(/{bbox-epsg-3857}/g,q)}isChildOf(b){const S=this.z-b.z;return S>0&&b.x===this.x>>S&&b.y===this.y>>S}getTilePoint(b){const S=Math.pow(2,this.z);return new ge((b.x*S-this.x)*Xr,(b.y*S-this.y)*Xr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ah{constructor(b,S){this.wrap=b,this.canonical=S,this.key=Hl(b,S.z,S.z,S.x,S.y)}}class Bn{constructor(b,S,H,q,ee){if(b<H)throw new Error(`overscaledZ should be >= z; overscaledZ = ${b}; z = ${H}`);this.overscaledZ=b,this.wrap=S,this.canonical=new WA(H,+q,+ee),this.key=Hl(S,b,H,q,ee)}clone(){return new Bn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(b){return this.overscaledZ===b.overscaledZ&&this.wrap===b.wrap&&this.canonical.equals(b.canonical)}scaledTo(b){if(b>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${b}; overscaledZ = ${this.overscaledZ}`);const S=this.canonical.z-b;return b>this.canonical.z?new Bn(b,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bn(b,this.wrap,b,this.canonical.x>>S,this.canonical.y>>S)}calculateScaledKey(b,S){if(b>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${b}; overscaledZ = ${this.overscaledZ}`);const H=this.canonical.z-b;return b>this.canonical.z?Hl(this.wrap*+S,b,this.canonical.z,this.canonical.x,this.canonical.y):Hl(this.wrap*+S,b,b,this.canonical.x>>H,this.canonical.y>>H)}isChildOf(b){if(b.wrap!==this.wrap)return!1;const S=this.canonical.z-b.canonical.z;return b.overscaledZ===0||b.overscaledZ<this.overscaledZ&&b.canonical.x===this.canonical.x>>S&&b.canonical.y===this.canonical.y>>S}children(b){if(this.overscaledZ>=b)return[new Bn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const S=this.canonical.z+1,H=2*this.canonical.x,q=2*this.canonical.y;return[new Bn(S,this.wrap,S,H,q),new Bn(S,this.wrap,S,H+1,q),new Bn(S,this.wrap,S,H,q+1),new Bn(S,this.wrap,S,H+1,q+1)]}isLessThan(b){return this.wrap<b.wrap||!(this.wrap>b.wrap)&&(this.overscaledZ<b.overscaledZ||!(this.overscaledZ>b.overscaledZ)&&(this.canonical.x<b.canonical.x||!(this.canonical.x>b.canonical.x)&&this.canonical.y<b.canonical.y))}wrapped(){return new Bn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(b){return new Bn(this.overscaledZ,b,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ah(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(b){return this.canonical.getTilePoint(new nA(b.x-this.wrap,b.y))}}function Hl(C,b,S,H,q){(C*=2)<0&&(C=-1*C-1);const ee=1<<S;return(ee*ee*C+ee*q+H).toString(36)+S.toString(36)+b.toString(36)}gi("CanonicalTileID",WA),gi("OverscaledTileID",Bn,{omit:["posMatrix"]});class ch{constructor(b,S,H){if(this.uid=b,S.height!==S.width)throw new RangeError("DEM tiles must be square");if(H&&H!=="mapbox"&&H!=="terrarium")return void Vt(`"${H}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=S.height;const q=this.dim=S.height-2;this.data=new Uint32Array(S.data.buffer),this.encoding=H||"mapbox";for(let ee=0;ee<q;ee++)this.data[this._idx(-1,ee)]=this.data[this._idx(0,ee)],this.data[this._idx(q,ee)]=this.data[this._idx(q-1,ee)],this.data[this._idx(ee,-1)]=this.data[this._idx(ee,0)],this.data[this._idx(ee,q)]=this.data[this._idx(ee,q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(q,-1)]=this.data[this._idx(q-1,0)],this.data[this._idx(-1,q)]=this.data[this._idx(0,q-1)],this.data[this._idx(q,q)]=this.data[this._idx(q-1,q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<q;ee++)for(let ie=0;ie<q;ie++){const ae=this.get(ee,ie);ae>this.max&&(this.max=ae),ae<this.min&&(this.min=ae)}}get(b,S){const H=new Uint8Array(this.data.buffer),q=4*this._idx(b,S);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(H[q],H[q+1],H[q+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(b,S){if(b<-1||b>=this.dim+1||S<-1||S>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(S+1)*this.stride+(b+1)}_unpackMapbox(b,S,H){return(256*b*256+256*S+H)/10-1e4}_unpackTerrarium(b,S,H){return 256*b+S+H/256-32768}getPixels(){return new xn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(b,S,H){if(this.dim!==b.dim)throw new Error("dem dimension mismatch");let q=S*this.dim,ee=S*this.dim+this.dim,ie=H*this.dim,ae=H*this.dim+this.dim;switch(S){case-1:q=ee-1;break;case 1:ee=q+1}switch(H){case-1:ie=ae-1;break;case 1:ae=ie+1}const de=-S*this.dim,_e=-H*this.dim;for(let Ee=ie;Ee<ae;Ee++)for(let Fe=q;Fe<ee;Fe++)this.data[this._idx(Fe,Ee)]=b.data[this._idx(Fe+de,Ee+_e)]}}gi("DEMData",ch);class hh{constructor(b){this._stringToNumber={},this._numberToString=[];for(let S=0;S<b.length;S++){const H=b[S];this._stringToNumber[H]=S,this._numberToString[S]=H}}encode(b){return this._stringToNumber[b]}decode(b){if(b>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${b} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[b]}}class uh{constructor(b,S,H,q,ee){this.type="Feature",this._vectorTileFeature=b,b._z=S,b._x=H,b._y=q,this.properties=b.properties,this.id=ee}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(b){this._geometry=b}toJSON(){const b={geometry:this.geometry};for(const S in this)S!=="_geometry"&&S!=="_vectorTileFeature"&&(b[S]=this[S]);return b}}class fh{constructor(b,S){this.tileID=b,this.x=b.canonical.x,this.y=b.canonical.y,this.z=b.canonical.z,this.grid=new qi(Xr,16,0),this.grid3D=new qi(Xr,16,0),this.featureIndexArray=new dt,this.promoteId=S}insert(b,S,H,q,ee,ie){const ae=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(H,q,ee);const de=ie?this.grid3D:this.grid;for(let _e=0;_e<S.length;_e++){const Ee=S[_e],Fe=[1/0,1/0,-1/0,-1/0];for(let Pe=0;Pe<Ee.length;Pe++){const He=Ee[Pe];Fe[0]=Math.min(Fe[0],He.x),Fe[1]=Math.min(Fe[1],He.y),Fe[2]=Math.max(Fe[2],He.x),Fe[3]=Math.max(Fe[3],He.y)}Fe[0]<Xr&&Fe[1]<Xr&&Fe[2]>=0&&Fe[3]>=0&&de.insert(ae,Fe[0],Fe[1],Fe[2],Fe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new mo.VectorTile(new MA(this.rawTileData)).layers,this.sourceLayerCoder=new hh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(b,S,H,q){this.loadVTLayers();const ee=b.params||{},ie=Xr/b.tileSize/b.scale,ae=Fo(ee.filter),de=b.queryGeometry,_e=b.queryPadding*ie,Ee=ph(de),Fe=this.grid.query(Ee.minX-_e,Ee.minY-_e,Ee.maxX+_e,Ee.maxY+_e),Pe=ph(b.cameraQueryGeometry),He=this.grid3D.query(Pe.minX-_e,Pe.minY-_e,Pe.maxX+_e,Pe.maxY+_e,(at,ct,mt,ht)=>function(wt,Ct,Qt,fi,Ci){for(const li of wt)if(Ct<=li.x&&Qt<=li.y&&fi>=li.x&&Ci>=li.y)return!0;const ui=[new ge(Ct,Qt),new ge(Ct,Ci),new ge(fi,Ci),new ge(fi,Qt)];if(wt.length>2){for(const li of ui)if(nl(wt,li))return!0}for(let li=0;li<wt.length-1;li++)if(Rh(wt[li],wt[li+1],ui))return!0;return!1}(b.cameraQueryGeometry,at-_e,ct-_e,mt+_e,ht+_e));for(const at of He)Fe.push(at);Fe.sort(Af);const Ne={};let tt;for(let at=0;at<Fe.length;at++){const ct=Fe[at];if(ct===tt)continue;tt=ct;const mt=this.featureIndexArray.get(ct);let ht=null;this.loadMatchingFeature(Ne,mt.bucketIndex,mt.sourceLayerIndex,mt.featureIndex,ae,ee.layers,ee.availableImages,S,H,q,(wt,Ct,Qt)=>(ht||(ht=jn(wt)),Ct.queryIntersectsFeature(de,wt,Qt,ht,this.z,b.transform,ie,b.pixelPosMatrix)))}return Ne}loadMatchingFeature(b,S,H,q,ee,ie,ae,de,_e,Ee,Fe){const Pe=this.bucketLayerIDs[S];if(ie&&!function(at,ct){for(let mt=0;mt<at.length;mt++)if(ct.indexOf(at[mt])>=0)return!0;return!1}(ie,Pe))return;const He=this.sourceLayerCoder.decode(H),Ne=this.vtLayers[He].feature(q);if(ee.needGeometry){const at=ya(Ne,!0);if(!ee.filter(new Er(this.tileID.overscaledZ),at,this.tileID.canonical))return}else if(!ee.filter(new Er(this.tileID.overscaledZ),Ne))return;const tt=this.getId(Ne,He);for(let at=0;at<Pe.length;at++){const ct=Pe[at];if(ie&&ie.indexOf(ct)<0)continue;const mt=de[ct];if(!mt)continue;let ht={};tt&&Ee&&(ht=Ee.getState(mt.sourceLayer||"_geojsonTileLayer",tt));const wt=et({},_e[ct]);wt.paint=dh(wt.paint,mt.paint,Ne,ht,ae),wt.layout=dh(wt.layout,mt.layout,Ne,ht,ae);const Ct=!Fe||Fe(Ne,mt,ht);if(!Ct)continue;const Qt=new uh(Ne,this.z,this.x,this.y,tt);Qt.layer=wt;let fi=b[ct];fi===void 0&&(fi=b[ct]=[]),fi.push({featureIndex:q,feature:Qt,intersectionZ:Ct})}}lookupSymbolFeatures(b,S,H,q,ee,ie,ae,de){const _e={};this.loadVTLayers();const Ee=Fo(ee);for(const Fe of b)this.loadMatchingFeature(_e,H,q,Fe,Ee,ie,ae,de,S);return _e}hasLayer(b){for(const S of this.bucketLayerIDs)for(const H of S)if(b===H)return!0;return!1}getId(b,S){let H=b.id;return this.promoteId&&(H=b.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[S]],typeof H=="boolean"&&(H=Number(H))),H}}function dh(C,b,S,H,q){return nt(C,(ee,ie)=>{const ae=b instanceof Mo?b.get(ie):null;return ae&&ae.evaluate?ae.evaluate(S,H,q):ae})}function ph(C){let b=1/0,S=1/0,H=-1/0,q=-1/0;for(const ee of C)b=Math.min(b,ee.x),S=Math.min(S,ee.y),H=Math.max(H,ee.x),q=Math.max(q,ee.y);return{minX:b,minY:S,maxX:H,maxY:q}}function Af(C,b){return b-C}function gh(C,b,S,H,q){const ee=[];for(let ie=0;ie<C.length;ie++){const ae=C[ie];let de;for(let _e=0;_e<ae.length-1;_e++){let Ee=ae[_e],Fe=ae[_e+1];Ee.x<b&&Fe.x<b||(Ee.x<b?Ee=new ge(b,Ee.y+(b-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round():Fe.x<b&&(Fe=new ge(b,Ee.y+(b-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round()),Ee.y<S&&Fe.y<S||(Ee.y<S?Ee=new ge(Ee.x+(S-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),S)._round():Fe.y<S&&(Fe=new ge(Ee.x+(S-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),S)._round()),Ee.x>=H&&Fe.x>=H||(Ee.x>=H?Ee=new ge(H,Ee.y+(H-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round():Fe.x>=H&&(Fe=new ge(H,Ee.y+(H-Ee.x)/(Fe.x-Ee.x)*(Fe.y-Ee.y))._round()),Ee.y>=q&&Fe.y>=q||(Ee.y>=q?Ee=new ge(Ee.x+(q-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),q)._round():Fe.y>=q&&(Fe=new ge(Ee.x+(q-Ee.y)/(Fe.y-Ee.y)*(Fe.x-Ee.x),q)._round()),de&&Ee.equals(de[de.length-1])||(de=[Ee],ee.push(de)),de.push(Fe)))))}}return ee}gi("FeatureIndex",fh,{omit:["rawTileData","sourceLayerCoder"]});class wo extends ge{constructor(b,S,H,q){super(b,S),this.angle=H,q!==void 0&&(this.segment=q)}clone(){return new wo(this.x,this.y,this.angle,this.segment)}}function mh(C,b,S,H,q){if(b.segment===void 0||S===0)return!0;let ee=b,ie=b.segment+1,ae=0;for(;ae>-S/2;){if(ie--,ie<0)return!1;ae-=C[ie].dist(ee),ee=C[ie]}ae+=C[ie].dist(C[ie+1]),ie++;const de=[];let _e=0;for(;ae<S/2;){const Ee=C[ie],Fe=C[ie+1];if(!Fe)return!1;let Pe=C[ie-1].angleTo(Ee)-Ee.angleTo(Fe);for(Pe=Math.abs((Pe+3*Math.PI)%(2*Math.PI)-Math.PI),de.push({distance:ae,angleDelta:Pe}),_e+=Pe;ae-de[0].distance>H;)_e-=de.shift().angleDelta;if(_e>q)return!1;ie++,ae+=Ee.dist(Fe)}return!0}function _h(C){let b=0;for(let S=0;S<C.length-1;S++)b+=C[S].dist(C[S+1]);return b}function yh(C,b,S){return C?.6*b*S:0}function vh(C,b){return Math.max(C?C.right-C.left:0,b?b.right-b.left:0)}function cf(C,b,S,H,q,ee){const ie=yh(S,q,ee),ae=vh(S,H)*ee;let de=0;const _e=_h(C)/2;for(let Ee=0;Ee<C.length-1;Ee++){const Fe=C[Ee],Pe=C[Ee+1],He=Fe.dist(Pe);if(de+He>_e){const Ne=(_e-de)/He,tt=ks.number(Fe.x,Pe.x,Ne),at=ks.number(Fe.y,Pe.y,Ne),ct=new wo(tt,at,Pe.angleTo(Fe),Ee);return ct._round(),!ie||mh(C,ct,ae,ie,b)?ct:void 0}de+=He}}function hf(C,b,S,H,q,ee,ie,ae,de){const _e=yh(H,ee,ie),Ee=vh(H,q),Fe=Ee*ie,Pe=C[0].x===0||C[0].x===de||C[0].y===0||C[0].y===de;return b-Fe<b/4&&(b=Fe+b/4),wh(C,Pe?b/2*ae%b:(Ee/2+2*ee)*ie*ae%b,b,_e,S,Fe,Pe,!1,de)}function wh(C,b,S,H,q,ee,ie,ae,de){const _e=ee/2,Ee=_h(C);let Fe=0,Pe=b-S,He=[];for(let Ne=0;Ne<C.length-1;Ne++){const tt=C[Ne],at=C[Ne+1],ct=tt.dist(at),mt=at.angleTo(tt);for(;Pe+S<Fe+ct;){Pe+=S;const ht=(Pe-Fe)/ct,wt=ks.number(tt.x,at.x,ht),Ct=ks.number(tt.y,at.y,ht);if(wt>=0&&wt<de&&Ct>=0&&Ct<de&&Pe-_e>=0&&Pe+_e<=Ee){const Qt=new wo(wt,Ct,mt,Ne);Qt._round(),H&&!mh(C,Qt,ee,H,q)||He.push(Qt)}}Fe+=ct}return ae||He.length||ie||(He=wh(C,Fe/2,S,H,q,ee,ie,!0,de)),He}gi("Anchor",wo);const fl=sn;function bh(C,b,S,H){const q=[],ee=C.image,ie=ee.pixelRatio,ae=ee.paddedRect.w-2*fl,de=ee.paddedRect.h-2*fl,_e=C.right-C.left,Ee=C.bottom-C.top,Fe=ee.stretchX||[[0,ae]],Pe=ee.stretchY||[[0,de]],He=(ti,yi)=>ti+yi[1]-yi[0],Ne=Fe.reduce(He,0),tt=Pe.reduce(He,0),at=ae-Ne,ct=de-tt;let mt=0,ht=Ne,wt=0,Ct=tt,Qt=0,fi=at,Ci=0,ui=ct;if(ee.content&&H){const ti=ee.content;mt=aA(Fe,0,ti[0]),wt=aA(Pe,0,ti[1]),ht=aA(Fe,ti[0],ti[2]),Ct=aA(Pe,ti[1],ti[3]),Qt=ti[0]-mt,Ci=ti[1]-wt,fi=ti[2]-ti[0]-ht,ui=ti[3]-ti[1]-Ct}const li=(ti,yi,si,Gt)=>{const Pi=oA(ti.stretch-mt,ht,_e,C.left),Ii=lA(ti.fixed-Qt,fi,ti.stretch,Ne),ir=oA(yi.stretch-wt,Ct,Ee,C.top),Rr=lA(yi.fixed-Ci,ui,yi.stretch,tt),zr=oA(si.stretch-mt,ht,_e,C.left),fs=lA(si.fixed-Qt,fi,si.stretch,Ne),fn=oA(Gt.stretch-wt,Ct,Ee,C.top),Gs=lA(Gt.fixed-Ci,ui,Gt.stretch,tt),os=new ge(Pi,ir),ms=new ge(zr,ir),Is=new ge(zr,fn),nn=new ge(Pi,fn),Ws=new ge(Ii/ie,Rr/ie),ls=new ge(fs/ie,Gs/ie),ds=b*Math.PI/180;if(ds){const an=Math.sin(ds),on=Math.cos(ds),Jr=[on,-an,an,on];os._matMult(Jr),ms._matMult(Jr),nn._matMult(Jr),Is._matMult(Jr)}const Ps=ti.stretch+ti.fixed,qs=yi.stretch+yi.fixed;return{tl:os,tr:ms,bl:nn,br:Is,tex:{x:ee.paddedRect.x+fl+Ps,y:ee.paddedRect.y+fl+qs,w:si.stretch+si.fixed-Ps,h:Gt.stretch+Gt.fixed-qs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ws,pixelOffsetBR:ls,minFontScaleX:fi/ie/_e,minFontScaleY:ui/ie/Ee,isSDF:S}};if(H&&(ee.stretchX||ee.stretchY)){const ti=xh(Fe,at,Ne),yi=xh(Pe,ct,tt);for(let si=0;si<ti.length-1;si++){const Gt=ti[si],Pi=ti[si+1];for(let Ii=0;Ii<yi.length-1;Ii++)q.push(li(Gt,yi[Ii],Pi,yi[Ii+1]))}}else q.push(li({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ae+1},{fixed:0,stretch:de+1}));return q}function aA(C,b,S){let H=0;for(const q of C)H+=Math.max(b,Math.min(S,q[1]))-Math.max(b,Math.min(S,q[0]));return H}function xh(C,b,S){const H=[{fixed:-fl,stretch:0}];for(const[q,ee]of C){const ie=H[H.length-1];H.push({fixed:q-ie.stretch,stretch:ie.stretch}),H.push({fixed:q-ie.stretch,stretch:ie.stretch+(ee-q)})}return H.push({fixed:b+fl,stretch:S}),H}function oA(C,b,S,H){return C/b*S+H}function lA(C,b,S,H){return C-b*S/H}class AA{constructor(b,S,H,q,ee,ie,ae,de,_e,Ee){if(this.boxStartIndex=b.length,_e){let Fe=ie.top,Pe=ie.bottom;const He=ie.collisionPadding;He&&(Fe-=He[1],Pe+=He[3]);let Ne=Pe-Fe;Ne>0&&(Ne=Math.max(10,Ne),this.circleDiameter=Ne)}else{let Fe=ie.top*ae-de[0],Pe=ie.bottom*ae+de[2],He=ie.left*ae-de[3],Ne=ie.right*ae+de[1];const tt=ie.collisionPadding;if(tt&&(He-=tt[0]*ae,Fe-=tt[1]*ae,Ne+=tt[2]*ae,Pe+=tt[3]*ae),Ee){const at=new ge(He,Fe),ct=new ge(Ne,Fe),mt=new ge(He,Pe),ht=new ge(Ne,Pe),wt=Ee*Math.PI/180;at._rotate(wt),ct._rotate(wt),mt._rotate(wt),ht._rotate(wt),He=Math.min(at.x,ct.x,mt.x,ht.x),Ne=Math.max(at.x,ct.x,mt.x,ht.x),Fe=Math.min(at.y,ct.y,mt.y,ht.y),Pe=Math.max(at.y,ct.y,mt.y,ht.y)}b.emplaceBack(S.x,S.y,He,Fe,Ne,Pe,H,q,ee)}this.boxEndIndex=b.length}}class uf{constructor(b=[],S=ff){if(this.data=b,this.length=this.data.length,this.compare=S,this.length>0)for(let H=(this.length>>1)-1;H>=0;H--)this._down(H)}push(b){this.data.push(b),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const b=this.data[0],S=this.data.pop();return this.length--,this.length>0&&(this.data[0]=S,this._down(0)),b}peek(){return this.data[0]}_up(b){const{data:S,compare:H}=this,q=S[b];for(;b>0;){const ee=b-1>>1,ie=S[ee];if(H(q,ie)>=0)break;S[b]=ie,b=ee}S[b]=q}_down(b){const{data:S,compare:H}=this,q=this.length>>1,ee=S[b];for(;b<q;){let ie=1+(b<<1),ae=S[ie];const de=ie+1;if(de<this.length&&H(S[de],ae)<0&&(ie=de,ae=S[de]),H(ae,ee)>=0)break;S[b]=ae,b=ie}S[b]=ee}}function ff(C,b){return C<b?-1:C>b?1:0}function df(C,b=1,S=!1){let H=1/0,q=1/0,ee=-1/0,ie=-1/0;const ae=C[0];for(let He=0;He<ae.length;He++){const Ne=ae[He];(!He||Ne.x<H)&&(H=Ne.x),(!He||Ne.y<q)&&(q=Ne.y),(!He||Ne.x>ee)&&(ee=Ne.x),(!He||Ne.y>ie)&&(ie=Ne.y)}const de=Math.min(ee-H,ie-q);let _e=de/2;const Ee=new uf([],pf);if(de===0)return new ge(H,q);for(let He=H;He<ee;He+=de)for(let Ne=q;Ne<ie;Ne+=de)Ee.push(new dl(He+_e,Ne+_e,_e,C));let Fe=function(He){let Ne=0,tt=0,at=0;const ct=He[0];for(let mt=0,ht=ct.length,wt=ht-1;mt<ht;wt=mt++){const Ct=ct[mt],Qt=ct[wt],fi=Ct.x*Qt.y-Qt.x*Ct.y;tt+=(Ct.x+Qt.x)*fi,at+=(Ct.y+Qt.y)*fi,Ne+=3*fi}return new dl(tt/Ne,at/Ne,0,He)}(C),Pe=Ee.length;for(;Ee.length;){const He=Ee.pop();(He.d>Fe.d||!Fe.d)&&(Fe=He,S&&console.log("found best %d after %d probes",Math.round(1e4*He.d)/1e4,Pe)),He.max-Fe.d<=b||(_e=He.h/2,Ee.push(new dl(He.p.x-_e,He.p.y-_e,_e,C)),Ee.push(new dl(He.p.x+_e,He.p.y-_e,_e,C)),Ee.push(new dl(He.p.x-_e,He.p.y+_e,_e,C)),Ee.push(new dl(He.p.x+_e,He.p.y+_e,_e,C)),Pe+=4)}return S&&(console.log(`num probes: ${Pe}`),console.log(`best distance: ${Fe.d}`)),Fe.p}function pf(C,b){return b.max-C.max}function dl(C,b,S,H){this.p=new ge(C,b),this.h=S,this.d=function(q,ee){let ie=!1,ae=1/0;for(let de=0;de<ee.length;de++){const _e=ee[de];for(let Ee=0,Fe=_e.length,Pe=Fe-1;Ee<Fe;Pe=Ee++){const He=_e[Ee],Ne=_e[Pe];He.y>q.y!=Ne.y>q.y&&q.x<(Ne.x-He.x)*(q.y-He.y)/(Ne.y-He.y)+He.x&&(ie=!ie),ae=Math.min(ae,ac(q,He,Ne))}}return(ie?1:-1)*Math.sqrt(ae)}(this.p,H),this.max=this.d+this.h*Math.SQRT2}var Ts;D.TextAnchorEnum=void 0,(Ts=D.TextAnchorEnum||(D.TextAnchorEnum={}))[Ts.center=1]="center",Ts[Ts.left=2]="left",Ts[Ts.right=3]="right",Ts[Ts.top=4]="top",Ts[Ts.bottom=5]="bottom",Ts[Ts["top-left"]=6]="top-left",Ts[Ts["top-right"]=7]="top-right",Ts[Ts["bottom-left"]=8]="bottom-left",Ts[Ts["bottom-right"]=9]="bottom-right";const bo=7,qA=Number.POSITIVE_INFINITY;function Bh(C,b){return b[1]!==qA?function(S,H,q){let ee=0,ie=0;switch(H=Math.abs(H),q=Math.abs(q),S){case"top-right":case"top-left":case"top":ie=q-bo;break;case"bottom-right":case"bottom-left":case"bottom":ie=-q+bo}switch(S){case"top-right":case"bottom-right":case"right":ee=-H;break;case"top-left":case"bottom-left":case"left":ee=H}return[ee,ie]}(C,b[0],b[1]):function(S,H){let q=0,ee=0;H<0&&(H=0);const ie=H/Math.SQRT2;switch(S){case"top-right":case"top-left":ee=ie-bo;break;case"bottom-right":case"bottom-left":ee=-ie+bo;break;case"bottom":ee=-H+bo;break;case"top":ee=H-bo}switch(S){case"top-right":case"bottom-right":q=-ie;break;case"top-left":case"bottom-left":q=ie;break;case"left":q=H;break;case"right":q=-H}return[q,ee]}(C,b[0])}function Ch(C,b,S){var H;const q=C.layout,ee=(H=q.get("text-variable-anchor-offset"))===null||H===void 0?void 0:H.evaluate(b,{},S);if(ee){const ae=ee.values,de=[];for(let _e=0;_e<ae.length;_e+=2){const Ee=de[_e]=ae[_e],Fe=ae[_e+1].map(Pe=>Pe*us);Ee.startsWith("top")?Fe[1]-=bo:Ee.startsWith("bottom")&&(Fe[1]+=bo),de[_e+1]=Fe}return new dr(de)}const ie=q.get("text-variable-anchor");if(ie){let ae;ae=C._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[q.get("text-radial-offset").evaluate(b,{},S)*us,qA]:q.get("text-offset").evaluate(b,{},S).map(_e=>_e*us);const de=[];for(const _e of ie)de.push(_e,Bh(_e,ae));return new dr(de)}return null}function XA(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gf(C,b,S,H,q,ee,ie,ae,de,_e,Ee){let Fe=ee.textMaxSize.evaluate(b,{});Fe===void 0&&(Fe=ie);const Pe=C.layers[0].layout,He=Pe.get("icon-offset").evaluate(b,{},Ee),Ne=Th(S.horizontal),tt=ie/24,at=C.tilePixelRatio*tt,ct=C.tilePixelRatio*Fe/24,mt=C.tilePixelRatio*ae,ht=C.tilePixelRatio*Pe.get("symbol-spacing"),wt=Pe.get("text-padding")*C.tilePixelRatio,Ct=function(Gt,Pi,Ii,ir=1){const Rr=Gt.get("icon-padding").evaluate(Pi,{},Ii),zr=Rr&&Rr.values;return[zr[0]*ir,zr[1]*ir,zr[2]*ir,zr[3]*ir]}(Pe,b,Ee,C.tilePixelRatio),Qt=Pe.get("text-max-angle")/180*Math.PI,fi=Pe.get("text-rotation-alignment")!=="viewport"&&Pe.get("symbol-placement")!=="point",Ci=Pe.get("icon-rotation-alignment")==="map"&&Pe.get("symbol-placement")!=="point",ui=Pe.get("symbol-placement"),li=ht/2,ti=Pe.get("icon-text-fit");let yi;H&&ti!=="none"&&(C.allowVerticalPlacement&&S.vertical&&(yi=jc(H,S.vertical,ti,Pe.get("icon-text-fit-padding"),He,tt)),Ne&&(H=jc(H,Ne,ti,Pe.get("icon-text-fit-padding"),He,tt)));const si=(Gt,Pi)=>{Pi.x<0||Pi.x>=Xr||Pi.y<0||Pi.y>=Xr||function(Ii,ir,Rr,zr,fs,fn,Gs,os,ms,Is,nn,Ws,ls,ds,Ps,qs,an,on,Jr,Ss,fr,dn,Fs,Xs,Pn){const Zn=Ii.addToLineVertexArray(ir,Rr);let Jn,qa,Ln,Cn,ln=0,Xa=0,Vl=0,kh=0,ic=-1,rc=-1;const Ya={};let Dh=wn("");if(Ii.allowVerticalPlacement&&zr.vertical){const Ls=os.layout.get("text-rotate").evaluate(fr,{},Xs)+90;Ln=new AA(ms,ir,Is,nn,Ws,zr.vertical,ls,ds,Ps,Ls),Gs&&(Cn=new AA(ms,ir,Is,nn,Ws,Gs,an,on,Ps,Ls))}if(fs){const Ls=os.layout.get("icon-rotate").evaluate(fr,{}),En=os.layout.get("icon-text-fit")!=="none",zo=bh(fs,Ls,Fs,En),ea=Gs?bh(Gs,Ls,Fs,En):void 0;qa=new AA(ms,ir,Is,nn,Ws,fs,an,on,!1,Ls),ln=4*zo.length;const No=Ii.iconSizeData;let wa=null;No.kind==="source"?(wa=[va*os.layout.get("icon-size").evaluate(fr,{})],wa[0]>yo&&Vt(`${Ii.layerIds[0]}: Value for "icon-size" is >= ${Rl}. Reduce your "icon-size".`)):No.kind==="composite"&&(wa=[va*dn.compositeIconSizes[0].evaluate(fr,{},Xs),va*dn.compositeIconSizes[1].evaluate(fr,{},Xs)],(wa[0]>yo||wa[1]>yo)&&Vt(`${Ii.layerIds[0]}: Value for "icon-size" is >= ${Rl}. Reduce your "icon-size".`)),Ii.addSymbols(Ii.icon,zo,wa,Ss,Jr,fr,D.WritingMode.none,ir,Zn.lineStartIndex,Zn.lineLength,-1,Xs),ic=Ii.icon.placedSymbolArray.length-1,ea&&(Xa=4*ea.length,Ii.addSymbols(Ii.icon,ea,wa,Ss,Jr,fr,D.WritingMode.vertical,ir,Zn.lineStartIndex,Zn.lineLength,-1,Xs),rc=Ii.icon.placedSymbolArray.length-1)}const Uh=Object.keys(zr.horizontal);for(const Ls of Uh){const En=zr.horizontal[Ls];if(!Jn){Dh=wn(En.text);const ea=os.layout.get("text-rotate").evaluate(fr,{},Xs);Jn=new AA(ms,ir,Is,nn,Ws,En,ls,ds,Ps,ea)}const zo=En.positionedLines.length===1;if(Vl+=Eh(Ii,ir,En,fn,os,Ps,fr,qs,Zn,zr.vertical?D.WritingMode.horizontal:D.WritingMode.horizontalOnly,zo?Uh:[Ls],Ya,ic,dn,Xs),zo)break}zr.vertical&&(kh+=Eh(Ii,ir,zr.vertical,fn,os,Ps,fr,qs,Zn,D.WritingMode.vertical,["vertical"],Ya,rc,dn,Xs));const yf=Jn?Jn.boxStartIndex:Ii.collisionBoxArray.length,vf=Jn?Jn.boxEndIndex:Ii.collisionBoxArray.length,wf=Ln?Ln.boxStartIndex:Ii.collisionBoxArray.length,bf=Ln?Ln.boxEndIndex:Ii.collisionBoxArray.length,xf=qa?qa.boxStartIndex:Ii.collisionBoxArray.length,Bf=qa?qa.boxEndIndex:Ii.collisionBoxArray.length,Cf=Cn?Cn.boxStartIndex:Ii.collisionBoxArray.length,Ef=Cn?Cn.boxEndIndex:Ii.collisionBoxArray.length;let $n=-1;const hA=(Ls,En)=>Ls&&Ls.circleDiameter?Math.max(Ls.circleDiameter,En):En;$n=hA(Jn,$n),$n=hA(Ln,$n),$n=hA(qa,$n),$n=hA(Cn,$n);const Mh=$n>-1?1:0;Mh&&($n*=Pn/us),Ii.glyphOffsetArray.length>=ul.MAX_GLYPHS&&Vt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),fr.sortKey!==void 0&&Ii.addToSortKeyRanges(Ii.symbolInstances.length,fr.sortKey);const Tf=Ch(os,fr,Xs),[If,Sf]=function(Ls,En){const zo=Ls.length,ea=En==null?void 0:En.values;if((ea==null?void 0:ea.length)>0)for(let No=0;No<ea.length;No+=2){const wa=ea[No+1];Ls.emplaceBack(D.TextAnchorEnum[ea[No]],wa[0],wa[1])}return[zo,Ls.length]}(Ii.textAnchorOffsets,Tf);Ii.symbolInstances.emplaceBack(ir.x,ir.y,Ya.right>=0?Ya.right:-1,Ya.center>=0?Ya.center:-1,Ya.left>=0?Ya.left:-1,Ya.vertical||-1,ic,rc,Dh,yf,vf,wf,bf,xf,Bf,Cf,Ef,Is,Vl,kh,ln,Xa,Mh,0,ls,$n,If,Sf)}(C,Pi,Gt,S,H,q,yi,C.layers[0],C.collisionBoxArray,b.index,b.sourceLayerIndex,C.index,at,[wt,wt,wt,wt],fi,de,mt,Ct,Ci,He,b,ee,_e,Ee,ie)};if(ui==="line")for(const Gt of gh(b.geometry,0,0,Xr,Xr)){const Pi=hf(Gt,ht,Qt,S.vertical||Ne,H,24,ct,C.overscaling,Xr);for(const Ii of Pi)Ne&&mf(C,Ne.text,li,Ii)||si(Gt,Ii)}else if(ui==="line-center"){for(const Gt of b.geometry)if(Gt.length>1){const Pi=cf(Gt,Qt,S.vertical||Ne,H,24,ct);Pi&&si(Gt,Pi)}}else if(b.type==="Polygon")for(const Gt of CA(b.geometry,0)){const Pi=df(Gt,16);si(Gt[0],new wo(Pi.x,Pi.y,0))}else if(b.type==="LineString")for(const Gt of b.geometry)si(Gt,new wo(Gt[0].x,Gt[0].y,0));else if(b.type==="Point")for(const Gt of b.geometry)for(const Pi of Gt)si([Pi],new wo(Pi.x,Pi.y,0))}function Eh(C,b,S,H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne){const tt=function(mt,ht,wt,Ct,Qt,fi,Ci,ui){const li=Ct.layout.get("text-rotate").evaluate(fi,{})*Math.PI/180,ti=[];for(const yi of ht.positionedLines)for(const si of yi.positionedGlyphs){if(!si.rect)continue;const Gt=si.rect||{};let Pi=Vc+1,Ii=!0,ir=1,Rr=0;const zr=(Qt||ui)&&si.vertical,fs=si.metrics.advance*si.scale/2;if(ui&&ht.verticalizable&&(Rr=yi.lineOffset/2-(si.imageName?-(us-si.metrics.width*si.scale)/2:(si.scale-1)*us)),si.imageName){const Jr=Ci[si.imageName];Ii=Jr.sdf,ir=Jr.pixelRatio,Pi=sn/ir}const fn=Qt?[si.x+fs,si.y]:[0,0];let Gs=Qt?[0,0]:[si.x+fs+wt[0],si.y+wt[1]-Rr],os=[0,0];zr&&(os=Gs,Gs=[0,0]);const ms=(si.metrics.left-Pi)*si.scale-fs+Gs[0],Is=(-si.metrics.top-Pi)*si.scale+Gs[1],nn=ms+Gt.w*si.scale/ir,Ws=Is+Gt.h*si.scale/ir,ls=new ge(ms,Is),ds=new ge(nn,Is),Ps=new ge(ms,Ws),qs=new ge(nn,Ws);if(zr){const Jr=new ge(-fs,fs-Ql),Ss=-Math.PI/2,fr=us/2-fs,dn=new ge(5-Ql-fr,-(si.imageName?fr:0)),Fs=new ge(...os);ls._rotateAround(Ss,Jr)._add(dn)._add(Fs),ds._rotateAround(Ss,Jr)._add(dn)._add(Fs),Ps._rotateAround(Ss,Jr)._add(dn)._add(Fs),qs._rotateAround(Ss,Jr)._add(dn)._add(Fs)}if(li){const Jr=Math.sin(li),Ss=Math.cos(li),fr=[Ss,-Jr,Jr,Ss];ls._matMult(fr),ds._matMult(fr),Ps._matMult(fr),qs._matMult(fr)}const an=new ge(0,0),on=new ge(0,0);ti.push({tl:ls,tr:ds,bl:Ps,br:qs,tex:Gt,writingMode:ht.writingMode,glyphOffset:fn,sectionIndex:si.sectionIndex,isSDF:Ii,pixelOffsetTL:an,pixelOffsetBR:on,minFontScaleX:0,minFontScaleY:0})}return ti}(0,S,ae,q,ee,ie,H,C.allowVerticalPlacement),at=C.textSizeData;let ct=null;at.kind==="source"?(ct=[va*q.layout.get("text-size").evaluate(ie,{})],ct[0]>yo&&Vt(`${C.layerIds[0]}: Value for "text-size" is >= ${Rl}. Reduce your "text-size".`)):at.kind==="composite"&&(ct=[va*He.compositeTextSizes[0].evaluate(ie,{},Ne),va*He.compositeTextSizes[1].evaluate(ie,{},Ne)],(ct[0]>yo||ct[1]>yo)&&Vt(`${C.layerIds[0]}: Value for "text-size" is >= ${Rl}. Reduce your "text-size".`)),C.addSymbols(C.text,tt,ct,ae,ee,ie,_e,b,de.lineStartIndex,de.lineLength,Pe,Ne);for(const mt of Ee)Fe[mt]=C.text.placedSymbolArray.length-1;return 4*tt.length}function Th(C){for(const b in C)return C[b];return null}function mf(C,b,S,H){const q=C.compareText;if(b in q){const ee=q[b];for(let ie=ee.length-1;ie>=0;ie--)if(H.dist(ee[ie])<S)return!0}else q[b]=[];return q[b].push(H),!1}const Ih=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class YA{static from(b){if(!(b instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[S,H]=new Uint8Array(b,0,2);if(S!==219)throw new Error("Data does not appear to be in a KDBush format.");const q=H>>4;if(q!==1)throw new Error(`Got v${q} data when expected v1.`);const ee=Ih[15&H];if(!ee)throw new Error("Unrecognized array type.");const[ie]=new Uint16Array(b,2,1),[ae]=new Uint32Array(b,4,1);return new YA(ae,ie,ee,b)}constructor(b,S=64,H=Float64Array,q){if(isNaN(b)||b<0)throw new Error(`Unpexpected numItems value: ${b}.`);this.numItems=+b,this.nodeSize=Math.min(Math.max(+S,2),65535),this.ArrayType=H,this.IndexArrayType=b<65536?Uint16Array:Uint32Array;const ee=Ih.indexOf(this.ArrayType),ie=2*b*this.ArrayType.BYTES_PER_ELEMENT,ae=b*this.IndexArrayType.BYTES_PER_ELEMENT,de=(8-ae%8)%8;if(ee<0)throw new Error(`Unexpected typed array class: ${H}.`);q&&q instanceof ArrayBuffer?(this.data=q,this.ids=new this.IndexArrayType(this.data,8,b),this.coords=new this.ArrayType(this.data,8+ae+de,2*b),this._pos=2*b,this._finished=!0):(this.data=new ArrayBuffer(8+ie+ae+de),this.ids=new this.IndexArrayType(this.data,8,b),this.coords=new this.ArrayType(this.data,8+ae+de,2*b),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+ee]),new Uint16Array(this.data,2,1)[0]=S,new Uint32Array(this.data,4,1)[0]=b)}add(b,S){const H=this._pos>>1;return this.ids[H]=H,this.coords[this._pos++]=b,this.coords[this._pos++]=S,H}finish(){const b=this._pos>>1;if(b!==this.numItems)throw new Error(`Added ${b} items when expected ${this.numItems}.`);return jA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(b,S,H,q){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ee,coords:ie,nodeSize:ae}=this,de=[0,ee.length-1,0],_e=[];for(;de.length;){const Ee=de.pop()||0,Fe=de.pop()||0,Pe=de.pop()||0;if(Fe-Pe<=ae){for(let at=Pe;at<=Fe;at++){const ct=ie[2*at],mt=ie[2*at+1];ct>=b&&ct<=H&&mt>=S&&mt<=q&&_e.push(ee[at])}continue}const He=Pe+Fe>>1,Ne=ie[2*He],tt=ie[2*He+1];Ne>=b&&Ne<=H&&tt>=S&&tt<=q&&_e.push(ee[He]),(Ee===0?b<=Ne:S<=tt)&&(de.push(Pe),de.push(He-1),de.push(1-Ee)),(Ee===0?H>=Ne:q>=tt)&&(de.push(He+1),de.push(Fe),de.push(1-Ee))}return _e}within(b,S,H){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:q,coords:ee,nodeSize:ie}=this,ae=[0,q.length-1,0],de=[],_e=H*H;for(;ae.length;){const Ee=ae.pop()||0,Fe=ae.pop()||0,Pe=ae.pop()||0;if(Fe-Pe<=ie){for(let at=Pe;at<=Fe;at++)Fh(ee[2*at],ee[2*at+1],b,S)<=_e&&de.push(q[at]);continue}const He=Pe+Fe>>1,Ne=ee[2*He],tt=ee[2*He+1];Fh(Ne,tt,b,S)<=_e&&de.push(q[He]),(Ee===0?b-H<=Ne:S-H<=tt)&&(ae.push(Pe),ae.push(He-1),ae.push(1-Ee)),(Ee===0?b+H>=Ne:S+H>=tt)&&(ae.push(He+1),ae.push(Fe),ae.push(1-Ee))}return de}}function jA(C,b,S,H,q,ee){if(q-H<=S)return;const ie=H+q>>1;Sh(C,b,ie,H,q,ee),jA(C,b,S,H,ie-1,1-ee),jA(C,b,S,ie+1,q,1-ee)}function Sh(C,b,S,H,q,ee){for(;q>H;){if(q-H>600){const _e=q-H+1,Ee=S-H+1,Fe=Math.log(_e),Pe=.5*Math.exp(2*Fe/3),He=.5*Math.sqrt(Fe*Pe*(_e-Pe)/_e)*(Ee-_e/2<0?-1:1);Sh(C,b,S,Math.max(H,Math.floor(S-Ee*Pe/_e+He)),Math.min(q,Math.floor(S+(_e-Ee)*Pe/_e+He)),ee)}const ie=b[2*S+ee];let ae=H,de=q;for(zl(C,b,H,S),b[2*q+ee]>ie&&zl(C,b,H,q);ae<de;){for(zl(C,b,ae,de),ae++,de--;b[2*ae+ee]<ie;)ae++;for(;b[2*de+ee]>ie;)de--}b[2*H+ee]===ie?zl(C,b,H,de):(de++,zl(C,b,de,q)),de<=S&&(H=de+1),S<=de&&(q=de-1)}}function zl(C,b,S,H){ZA(C,S,H),ZA(b,2*S,2*H),ZA(b,2*S+1,2*H+1)}function ZA(C,b,S){const H=C[b];C[b]=C[S],C[S]=H}function Fh(C,b,S,H){const q=C-S,ee=b-H;return q*q+ee*ee}var JA;D.PerformanceMarkers=void 0,(JA=D.PerformanceMarkers||(D.PerformanceMarkers={})).create="create",JA.load="load",JA.fullLoad="fullLoad";let cA=null,Nl=[];const $A=1e3/60,ec="loadTime",tc="fullLoadTime",_f={mark(C){performance.mark(C)},frame(C){const b=C;cA!=null&&Nl.push(b-cA),cA=b},clearMetrics(){cA=null,Nl=[],performance.clearMeasures(ec),performance.clearMeasures(tc);for(const C in D.PerformanceMarkers)performance.clearMarks(D.PerformanceMarkers[C])},getPerformanceMetrics(){performance.measure(ec,D.PerformanceMarkers.create,D.PerformanceMarkers.load),performance.measure(tc,D.PerformanceMarkers.create,D.PerformanceMarkers.fullLoad);const C=performance.getEntriesByName(ec)[0].duration,b=performance.getEntriesByName(tc)[0].duration,S=Nl.length,H=1/(Nl.reduce((ee,ie)=>ee+ie,0)/S/1e3),q=Nl.filter(ee=>ee>$A).reduce((ee,ie)=>ee+(ie-$A)/$A,0);return{loadTime:C,fullLoadTime:b,fps:H,percentDroppedFrames:q/(S+q)*100,totalFrames:S}}};D.AJAXError=w,D.ARRAY_TYPE=al,D.Actor=class{constructor(C,b,S){this.receive=H=>{const q=H.data,ee=q.id;if(ee&&(!q.targetMapId||this.mapId===q.targetMapId))if(q.type==="<cancel>"){delete this.tasks[ee];const ie=this.cancelCallbacks[ee];delete this.cancelCallbacks[ee],ie&&ie()}else Pt()||q.mustQueue?(this.tasks[ee]=q,this.taskQueue.push(ee),this.invoker.trigger()):this.processTask(ee,q)},this.process=()=>{if(!this.taskQueue.length)return;const H=this.taskQueue.shift(),q=this.tasks[H];delete this.tasks[H],this.taskQueue.length&&this.invoker.trigger(),q&&this.processTask(H,q)},this.target=C,this.parent=b,this.mapId=S,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new lf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Pt()?C:window}send(C,b,S,H,q=!1){const ee=Math.round(1e18*Math.random()).toString(36).substring(0,10);S&&(this.callbacks[ee]=S);const ie=Ai(this.globalScope)?void 0:[];return this.target.postMessage({id:ee,type:C,hasCallback:!!S,targetMapId:H,mustQueue:q,sourceMapId:this.mapId,data:be(b,ie)},ie),{cancel:()=>{S&&delete this.callbacks[ee],this.target.postMessage({id:ee,type:"<cancel>",targetMapId:H,sourceMapId:this.mapId})}}}processTask(C,b){if(b.type==="<response>"){const S=this.callbacks[C];delete this.callbacks[C],S&&(b.error?S(Oe(b.error)):S(null,Oe(b.data)))}else{let S=!1;const H=Ai(this.globalScope)?void 0:[],q=b.hasCallback?(ae,de)=>{S=!0,delete this.cancelCallbacks[C],this.target.postMessage({id:C,type:"<response>",sourceMapId:this.mapId,error:ae?be(ae):null,data:be(de,H)},H)}:ae=>{S=!0};let ee=null;const ie=Oe(b.data);if(this.parent[b.type])ee=this.parent[b.type](b.sourceMapId,ie,q);else if(this.parent.getWorkerSource){const ae=b.type.split(".");ee=this.parent.getWorkerSource(b.sourceMapId,ae[0],ie.source)[ae[1]](ie,q)}else q(new Error(`Could not find function ${b.type}`));!S&&ee&&ee.cancel&&(this.cancelCallbacks[C]=ee.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},D.AlphaImage=Sl,D.CanonicalTileID=WA,D.CollisionBoxArray=he,D.CollisionCircleLayoutArray=class extends Bl{},D.Color=bi,D.DEMData=ch,D.DataConstantProperty=Fi,D.DictionaryCoder=hh,D.EXTENT=Xr,D.ErrorEvent=Ve,D.EvaluationParameters=Er,D.Event=Te,D.Evented=De,D.FeatureIndex=fh,D.FillBucket=IA,D.FillExtrusionBucket=kA,D.GeoJSONFeature=uh,D.ImageAtlas=Gc,D.ImagePosition=LA,D.KDBush=YA,D.LineBucket=DA,D.LineStripIndexArray=class extends X{},D.LngLat=vo,D.MercatorCoordinate=nA,D.ONE_EM=us,D.OverscaledTileID=Bn,D.PerformanceUtils=_f,D.Point=ge,D.Pos3dArray=class extends Lo{},D.PosArray=Bt,D.Properties=Ns,D.Protobuf=MA,D.QuadTriangleArray=class extends rl{},D.RGBAImage=xn,D.RasterBoundsArray=class extends Qo{},D.RequestPerformance=class{constructor(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let C=performance.getEntriesByName(this._marks.measure);return C.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),C=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),C}},D.SegmentVector=Mi,D.SymbolBucket=ul,D.Transitionable=Jo,D.TriangleIndexArray=ki,D.Uniform1f=cs,D.Uniform1i=class extends is{constructor(C,b){super(C,b),this.current=0}set(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))}},D.Uniform2f=class extends is{constructor(C,b){super(C,b),this.current=[0,0]}set(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))}},D.Uniform3f=class extends is{constructor(C,b){super(C,b),this.current=[0,0,0]}set(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))}},D.Uniform4f=Cs,D.UniformColor=po,D.UniformMatrix4f=class extends is{constructor(C,b){super(C,b),this.current=hs}set(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(let b=1;b<16;b++)if(C[b]!==this.current[b]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}}},D.UnwrappedTileID=Ah,D.ValidationError=bt,D.ZoomHistory=Xe,D.addDynamicAttributes=HA,D.arrayBufferToImage=function(C,b){const S=new Image;S.onload=()=>{b(null,S),URL.revokeObjectURL(S.src),S.onload=null,window.requestAnimationFrame(()=>{S.src=Ei})},S.onerror=()=>b(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new Blob([new Uint8Array(C)],{type:"image/png"});S.src=C.byteLength?URL.createObjectURL(H):Ei},D.arrayBufferToImageBitmap=function(C,b){const S=new Blob([new Uint8Array(C)],{type:"image/png"});createImageBitmap(S).then(H=>{b(null,H)}).catch(H=>{b(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},D.asyncAll=function(C,b,S){if(!C.length)return S(null,[]);let H=C.length;const q=new Array(C.length);let ee=null;C.forEach((ie,ae)=>{b(ie,(de,_e)=>{de&&(ee=de),q[ae]=_e,--H==0&&S(ee,q)})})},D.bezier=Re,D.browser=vi,D.clamp=We,D.clipLine=gh,D.clone=function(C){var b=new al(16);return b[0]=C[0],b[1]=C[1],b[2]=C[2],b[3]=C[3],b[4]=C[4],b[5]=C[5],b[6]=C[6],b[7]=C[7],b[8]=C[8],b[9]=C[9],b[10]=C[10],b[11]=C[11],b[12]=C[12],b[13]=C[13],b[14]=C[14],b[15]=C[15],b},D.clone$1=Tt,D.collisionCircleLayout=Pu,D.config=d,D.copy=function(C,b){return C[0]=b[0],C[1]=b[1],C[2]=b[2],C[3]=b[3],C[4]=b[4],C[5]=b[5],C[6]=b[6],C[7]=b[7],C[8]=b[8],C[9]=b[9],C[10]=b[10],C[11]=b[11],C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15],C},D.create=function(){var C=new al(16);return al!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},D.createExpression=Ji,D.createFilter=Fo,D.createLayout=ts,D.createStyleLayer=function(C){if(C.type==="custom")return new of(C);switch(C.type){case"background":return new sf(C);case"circle":return new Nh(C);case"fill":return new lu(C);case"fill-extrusion":return new xu(C);case"heatmap":return new Kh(C);case"hillshade":return new Wh(C);case"line":return new ku(C);case"raster":return new af(C);case"symbol":return new sA(C)}},D.deepEqual=function C(b,S){if(Array.isArray(b)){if(!Array.isArray(S)||b.length!==S.length)return!1;for(let H=0;H<b.length;H++)if(!C(b[H],S[H]))return!1;return!0}if(typeof b=="object"&&b!==null&&S!==null){if(typeof S!="object"||Object.keys(b).length!==Object.keys(S).length)return!1;for(const H in b)if(!C(b[H],S[H]))return!1;return!0}return b===S},D.defaultEasing=$e,D.derefLayers=function(C){C=C.slice();const b=Object.create(null);for(let S=0;S<C.length;S++)b[C[S].id]=C[S];for(let S=0;S<C.length;S++)"ref"in C[S]&&(C[S]=qe(C[S],b[C[S].ref]));return C},D.diffStyles=function(C,b){if(!C)return[{command:pt.setStyle,args:[b]}];let S=[];try{if(!lt(C.version,b.version))return[{command:pt.setStyle,args:[b]}];lt(C.center,b.center)||S.push({command:pt.setCenter,args:[b.center]}),lt(C.zoom,b.zoom)||S.push({command:pt.setZoom,args:[b.zoom]}),lt(C.bearing,b.bearing)||S.push({command:pt.setBearing,args:[b.bearing]}),lt(C.pitch,b.pitch)||S.push({command:pt.setPitch,args:[b.pitch]}),lt(C.sprite,b.sprite)||S.push({command:pt.setSprite,args:[b.sprite]}),lt(C.glyphs,b.glyphs)||S.push({command:pt.setGlyphs,args:[b.glyphs]}),lt(C.transition,b.transition)||S.push({command:pt.setTransition,args:[b.transition]}),lt(C.light,b.light)||S.push({command:pt.setLight,args:[b.light]});const H={},q=[];(function(ie,ae,de,_e){let Ee;for(Ee in ae=ae||{},ie=ie||{})Object.prototype.hasOwnProperty.call(ie,Ee)&&(Object.prototype.hasOwnProperty.call(ae,Ee)||zt(Ee,de,_e));for(Ee in ae)Object.prototype.hasOwnProperty.call(ae,Ee)&&(Object.prototype.hasOwnProperty.call(ie,Ee)?lt(ie[Ee],ae[Ee])||(ie[Ee].type==="geojson"&&ae[Ee].type==="geojson"&&Mt(ie,ae,Ee)?de.push({command:pt.setGeoJSONSourceData,args:[Ee,ae[Ee].data]}):Nt(Ee,ae,de,_e)):Ft(Ee,ae,de))})(C.sources,b.sources,q,H);const ee=[];C.layers&&C.layers.forEach(ie=>{H[ie.source]?S.push({command:pt.removeLayer,args:[ie.id]}):ee.push(ie)}),S=S.concat(q),function(ie,ae,de){ae=ae||[];const _e=(ie=ie||[]).map(ri),Ee=ae.map(ri),Fe=ie.reduce(ci,{}),Pe=ae.reduce(ci,{}),He=_e.slice(),Ne=Object.create(null);let tt,at,ct,mt,ht,wt,Ct;for(tt=0,at=0;tt<_e.length;tt++)ct=_e[tt],Object.prototype.hasOwnProperty.call(Pe,ct)?at++:(de.push({command:pt.removeLayer,args:[ct]}),He.splice(He.indexOf(ct,at),1));for(tt=0,at=0;tt<Ee.length;tt++)ct=Ee[Ee.length-1-tt],He[He.length-1-tt]!==ct&&(Object.prototype.hasOwnProperty.call(Fe,ct)?(de.push({command:pt.removeLayer,args:[ct]}),He.splice(He.lastIndexOf(ct,He.length-at),1)):at++,wt=He[He.length-tt],de.push({command:pt.addLayer,args:[Pe[ct],wt]}),He.splice(He.length-tt,0,ct),Ne[ct]=!0);for(tt=0;tt<Ee.length;tt++)if(ct=Ee[tt],mt=Fe[ct],ht=Pe[ct],!Ne[ct]&&!lt(mt,ht))if(lt(mt.source,ht.source)&&lt(mt["source-layer"],ht["source-layer"])&&lt(mt.type,ht.type)){for(Ct in $t(mt.layout,ht.layout,de,ct,null,pt.setLayoutProperty),$t(mt.paint,ht.paint,de,ct,null,pt.setPaintProperty),lt(mt.filter,ht.filter)||de.push({command:pt.setFilter,args:[ct,ht.filter]}),lt(mt.minzoom,ht.minzoom)&&lt(mt.maxzoom,ht.maxzoom)||de.push({command:pt.setLayerZoomRange,args:[ct,ht.minzoom,ht.maxzoom]}),mt)Object.prototype.hasOwnProperty.call(mt,Ct)&&Ct!=="layout"&&Ct!=="paint"&&Ct!=="filter"&&Ct!=="metadata"&&Ct!=="minzoom"&&Ct!=="maxzoom"&&(Ct.indexOf("paint.")===0?$t(mt[Ct],ht[Ct],de,ct,Ct.slice(6),pt.setPaintProperty):lt(mt[Ct],ht[Ct])||de.push({command:pt.setLayerProperty,args:[ct,Ct,ht[Ct]]}));for(Ct in ht)Object.prototype.hasOwnProperty.call(ht,Ct)&&!Object.prototype.hasOwnProperty.call(mt,Ct)&&Ct!=="layout"&&Ct!=="paint"&&Ct!=="filter"&&Ct!=="metadata"&&Ct!=="minzoom"&&Ct!=="maxzoom"&&(Ct.indexOf("paint.")===0?$t(mt[Ct],ht[Ct],de,ct,Ct.slice(6),pt.setPaintProperty):lt(mt[Ct],ht[Ct])||de.push({command:pt.setLayerProperty,args:[ct,Ct,ht[Ct]]}))}else de.push({command:pt.removeLayer,args:[ct]}),wt=He[He.lastIndexOf(ct)+1],de.push({command:pt.addLayer,args:[ht,wt]})}(ee,b.layers,S)}catch(H){console.warn("Unable to compute style diff:",H),S=[{command:pt.setStyle,args:[b]}]}return S},D.dot=function(C,b){return C[0]*b[0]+C[1]*b[1]+C[2]*b[2]+C[3]*b[3]},D.earthRadius=KA,D.emitValidationErrors=Wn,D.emptyStyle=function(){const C={},b=me.$version;for(const S in me.$root){const H=me.$root[S];if(H.required){let q=null;q=S==="version"?b:H.type==="array"?[]:{},q!=null&&(C[S]=q)}}return C},D.equals=function(C,b){var S=C[0],H=C[1],q=C[2],ee=C[3],ie=C[4],ae=C[5],de=C[6],_e=C[7],Ee=C[8],Fe=C[9],Pe=C[10],He=C[11],Ne=C[12],tt=C[13],at=C[14],ct=C[15],mt=b[0],ht=b[1],wt=b[2],Ct=b[3],Qt=b[4],fi=b[5],Ci=b[6],ui=b[7],li=b[8],ti=b[9],yi=b[10],si=b[11],Gt=b[12],Pi=b[13],Ii=b[14],ir=b[15];return Math.abs(S-mt)<=Ks*Math.max(1,Math.abs(S),Math.abs(mt))&&Math.abs(H-ht)<=Ks*Math.max(1,Math.abs(H),Math.abs(ht))&&Math.abs(q-wt)<=Ks*Math.max(1,Math.abs(q),Math.abs(wt))&&Math.abs(ee-Ct)<=Ks*Math.max(1,Math.abs(ee),Math.abs(Ct))&&Math.abs(ie-Qt)<=Ks*Math.max(1,Math.abs(ie),Math.abs(Qt))&&Math.abs(ae-fi)<=Ks*Math.max(1,Math.abs(ae),Math.abs(fi))&&Math.abs(de-Ci)<=Ks*Math.max(1,Math.abs(de),Math.abs(Ci))&&Math.abs(_e-ui)<=Ks*Math.max(1,Math.abs(_e),Math.abs(ui))&&Math.abs(Ee-li)<=Ks*Math.max(1,Math.abs(Ee),Math.abs(li))&&Math.abs(Fe-ti)<=Ks*Math.max(1,Math.abs(Fe),Math.abs(ti))&&Math.abs(Pe-yi)<=Ks*Math.max(1,Math.abs(Pe),Math.abs(yi))&&Math.abs(He-si)<=Ks*Math.max(1,Math.abs(He),Math.abs(si))&&Math.abs(Ne-Gt)<=Ks*Math.max(1,Math.abs(Ne),Math.abs(Gt))&&Math.abs(tt-Pi)<=Ks*Math.max(1,Math.abs(tt),Math.abs(Pi))&&Math.abs(at-Ii)<=Ks*Math.max(1,Math.abs(at),Math.abs(Ii))&&Math.abs(ct-ir)<=Ks*Math.max(1,Math.abs(ct),Math.abs(ir))},D.evaluateSizeForFeature=function(C,{uSize:b,uSizeT:S},{lowerSize:H,upperSize:q}){return C.kind==="source"?H/va:C.kind==="composite"?ks.number(H/va,q/va,S):b},D.evaluateSizeForZoom=function(C,b){let S=0,H=0;if(C.kind==="constant")H=C.layoutSize;else if(C.kind!=="source"){const{interpolationType:q,minZoom:ee,maxZoom:ie}=C,ae=q?We(gs.interpolationFactor(q,b,ee,ie),0,1):0;C.kind==="camera"?H=ks.number(C.minSize,C.maxSize,ae):S=ae}return{uSizeT:S,uSize:H}},D.evented=ws,D.extend=et,D.filterObject=ft,D.findLineIntersection=function(C,b,S,H){const q=b.y-C.y,ee=b.x-C.x,ie=H.y-S.y,ae=H.x-S.x,de=ie*ee-ae*q;if(de===0)return null;const _e=(ae*(C.y-S.y)-ie*(C.x-S.x))/de;return new ge(C.x+_e*ee,C.y+_e*q)},D.fromScaling=function(C,b){return C[0]=b[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=b[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=b[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},D.getAnchorAlignment=OA,D.getAnchorJustification=XA,D.getArrayBuffer=se,D.getDefaultExportFromCjs=ne,D.getJSON=function(C,b){return W(et(C,{type:"json"}),b)},D.getOverlapMode=RA,D.getProtocolAction=k,D.getRTLTextPluginStatus=Ha,D.getReferrer=I,D.getVideo=function(C,b){const S=window.document.createElement("video");S.muted=!0,S.onloadstart=function(){b(null,S)};for(let H=0;H<C.length;H++){const q=window.document.createElement("source");oe(C[H])||(S.crossOrigin="Anonymous"),q.src=C[H],S.appendChild(q)}return{cancel:()=>{}}},D.groupByLayout=function(C,b){const S={};for(let q=0;q<C.length;q++){const ee=b&&b[C[q].id]||_l(C[q]);b&&(b[C[q].id]=ee);let ie=S[ee];ie||(ie=S[ee]=[]),ie.push(C[q])}const H=[];for(const q in S)H.push(S[q]);return H},D.identity=mA,D.interpolate=ks,D.invert=function(C,b){var S=b[0],H=b[1],q=b[2],ee=b[3],ie=b[4],ae=b[5],de=b[6],_e=b[7],Ee=b[8],Fe=b[9],Pe=b[10],He=b[11],Ne=b[12],tt=b[13],at=b[14],ct=b[15],mt=S*ae-H*ie,ht=S*de-q*ie,wt=S*_e-ee*ie,Ct=H*de-q*ae,Qt=H*_e-ee*ae,fi=q*_e-ee*de,Ci=Ee*tt-Fe*Ne,ui=Ee*at-Pe*Ne,li=Ee*ct-He*Ne,ti=Fe*at-Pe*tt,yi=Fe*ct-He*tt,si=Pe*ct-He*at,Gt=mt*si-ht*yi+wt*ti+Ct*li-Qt*ui+fi*Ci;return Gt?(C[0]=(ae*si-de*yi+_e*ti)*(Gt=1/Gt),C[1]=(q*yi-H*si-ee*ti)*Gt,C[2]=(tt*fi-at*Qt+ct*Ct)*Gt,C[3]=(Pe*Qt-Fe*fi-He*Ct)*Gt,C[4]=(de*li-ie*si-_e*ui)*Gt,C[5]=(S*si-q*li+ee*ui)*Gt,C[6]=(at*wt-Ne*fi-ct*ht)*Gt,C[7]=(Ee*fi-Pe*wt+He*ht)*Gt,C[8]=(ie*yi-ae*li+_e*Ci)*Gt,C[9]=(H*li-S*yi-ee*Ci)*Gt,C[10]=(Ne*Qt-tt*wt+ct*mt)*Gt,C[11]=(Fe*wt-Ee*Qt-He*mt)*Gt,C[12]=(ae*ui-ie*ti-de*Ci)*Gt,C[13]=(S*ti-H*ui+q*Ci)*Gt,C[14]=(tt*ht-Ne*Ct-at*mt)*Gt,C[15]=(Ee*Ct-Fe*ht+Pe*mt)*Gt,C):null},D.isImageBitmap=Ri,D.isSafari=Ai,D.isWorker=Pt,D.keysDifference=function(C,b){const S=[];for(const H in C)H in b||S.push(H);return S},D.lazyLoadRTLTextPlugin=function(){ns.isLoading()||ns.isLoaded()||Ha()!=="deferred"||pa()},D.makeRequest=W,D.mapObject=nt,D.mercatorXfromLng=nh,D.mercatorYfromLat=ah,D.mercatorZfromAltitude=oh,D.mul=zh,D.mul$1=function(C,b,S){return C[0]=b[0]*S[0],C[1]=b[1]*S[1],C[2]=b[2]*S[2],C[3]=b[3]*S[3],C},D.multiply=cc,D.nextPowerOfTwo=function(C){return C<=1?1:Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))},D.operations=pt,D.ortho=function(C,b,S,H,q,ee,ie){var ae=1/(b-S),de=1/(H-q),_e=1/(ee-ie);return C[0]=-2*ae,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*de,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*_e,C[11]=0,C[12]=(b+S)*ae,C[13]=(q+H)*de,C[14]=(ie+ee)*_e,C[15]=1,C},D.parseCacheControl=function(C){const b={};if(C.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(S,H,q,ee)=>{const ie=q||ee;return b[H]=!ie||ie.toLowerCase(),""}),b["max-age"]){const S=parseInt(b["max-age"],10);isNaN(S)?delete b["max-age"]:b["max-age"]=S}return b},D.parseGlyphPbf=function(C){return new MA(C).readFields(Wu,[])},D.pbf=Lc,D.performSymbolLayout=function(C){C.bucket.createArrays(),C.bucket.tilePixelRatio=Xr/(512*C.bucket.overscaling),C.bucket.compareText={},C.bucket.iconsNeedLinear=!1;const b=C.bucket.layers[0],S=b.layout,H=b._unevaluatedLayout._values,q={layoutIconSize:H["icon-size"].possiblyEvaluate(new Er(C.bucket.zoom+1),C.canonical),layoutTextSize:H["text-size"].possiblyEvaluate(new Er(C.bucket.zoom+1),C.canonical),textMaxSize:H["text-size"].possiblyEvaluate(new Er(18))};if(C.bucket.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Ee}=C.bucket.textSizeData;q.compositeTextSizes=[H["text-size"].possiblyEvaluate(new Er(_e),C.canonical),H["text-size"].possiblyEvaluate(new Er(Ee),C.canonical)]}if(C.bucket.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Ee}=C.bucket.iconSizeData;q.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new Er(_e),C.canonical),H["icon-size"].possiblyEvaluate(new Er(Ee),C.canonical)]}const ee=S.get("text-line-height")*us,ie=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point",ae=S.get("text-keep-upright"),de=S.get("text-size");for(const _e of C.bucket.features){const Ee=S.get("text-font").evaluate(_e,{},C.canonical).join(","),Fe=de.evaluate(_e,{},C.canonical),Pe=q.layoutTextSize.evaluate(_e,{},C.canonical),He=q.layoutIconSize.evaluate(_e,{},C.canonical),Ne={horizontal:{},vertical:void 0},tt=_e.text;let at,ct=[0,0];if(tt){const wt=tt.toString(),Ct=S.get("text-letter-spacing").evaluate(_e,{},C.canonical)*us,Qt=Et(wt)?Ct:0,fi=S.get("text-anchor").evaluate(_e,{},C.canonical),Ci=Ch(b,_e,C.canonical);if(!Ci){const si=S.get("text-radial-offset").evaluate(_e,{},C.canonical);ct=si?Bh(fi,[si*us,qA]):S.get("text-offset").evaluate(_e,{},C.canonical).map(Gt=>Gt*us)}let ui=ie?"center":S.get("text-justify").evaluate(_e,{},C.canonical);const li=S.get("symbol-placement"),ti=li==="point"?S.get("text-max-width").evaluate(_e,{},C.canonical)*us:0,yi=()=>{C.bucket.allowVerticalPlacement&&yt(wt)&&(Ne.vertical=tA(tt,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,fi,"left",Qt,ct,D.WritingMode.vertical,!0,li,Pe,Fe))};if(!ie&&Ci){const si=new Set;if(ui==="auto")for(let Pi=0;Pi<Ci.values.length;Pi+=2)si.add(XA(Ci.values[Pi]));else si.add(ui);let Gt=!1;for(const Pi of si)if(!Ne.horizontal[Pi])if(Gt)Ne.horizontal[Pi]=Ne.horizontal[0];else{const Ii=tA(tt,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,"center",Pi,Qt,ct,D.WritingMode.horizontal,!1,li,Pe,Fe);Ii&&(Ne.horizontal[Pi]=Ii,Gt=Ii.positionedLines.length===1)}yi()}else{ui==="auto"&&(ui=XA(fi));const si=tA(tt,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,fi,ui,Qt,ct,D.WritingMode.horizontal,!1,li,Pe,Fe);si&&(Ne.horizontal[ui]=si),yi(),yt(wt)&&ie&&ae&&(Ne.vertical=tA(tt,C.glyphMap,C.glyphPositions,C.imagePositions,Ee,ti,ee,fi,ui,Qt,ct,D.WritingMode.vertical,!1,li,Pe,Fe))}}let mt=!1;if(_e.icon&&_e.icon.name){const wt=C.imageMap[_e.icon.name];wt&&(at=Ju(C.imagePositions[_e.icon.name],S.get("icon-offset").evaluate(_e,{},C.canonical),S.get("icon-anchor").evaluate(_e,{},C.canonical)),mt=!!wt.sdf,C.bucket.sdfIcons===void 0?C.bucket.sdfIcons=mt:C.bucket.sdfIcons!==mt&&Vt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wt.pixelRatio!==C.bucket.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(C.bucket.iconsNeedLinear=!0))}const ht=Th(Ne.horizontal)||Ne.vertical;C.bucket.iconsInText=!!ht&&ht.iconsInText,(ht||at)&&gf(C.bucket,_e,Ne,at,C.imageMap,q,Pe,He,ct,mt,C.canonical)}C.showCollisionBoxes&&C.bucket.generateCollisionDebugBuffers()},D.perspective=function(C,b,S,H,q){var ee,ie=1/Math.tan(b/2);return C[0]=ie/S,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=ie,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,q!=null&&q!==1/0?(C[10]=(q+H)*(ee=1/(H-q)),C[14]=2*q*H*ee):(C[10]=-1,C[14]=-2*H),C},D.pick=function(C,b){const S={};for(let H=0;H<b.length;H++){const q=b[H];q in C&&(S[q]=C[q])}return S},D.plugin=ns,D.pointGeometry=Ae,D.polygonIntersectsPolygon=sc,D.potpack=Kc,D.register=gi,D.registerForPluginStateChange=function(C){return C({pluginStatus:nr,pluginURL:Xi}),ws.on("pluginStateChange",C),C},D.renderColorRamp=pc,D.rotateX=function(C,b,S){var H=Math.sin(S),q=Math.cos(S),ee=b[4],ie=b[5],ae=b[6],de=b[7],_e=b[8],Ee=b[9],Fe=b[10],Pe=b[11];return b!==C&&(C[0]=b[0],C[1]=b[1],C[2]=b[2],C[3]=b[3],C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15]),C[4]=ee*q+_e*H,C[5]=ie*q+Ee*H,C[6]=ae*q+Fe*H,C[7]=de*q+Pe*H,C[8]=_e*q-ee*H,C[9]=Ee*q-ie*H,C[10]=Fe*q-ae*H,C[11]=Pe*q-de*H,C},D.rotateZ=function(C,b,S){var H=Math.sin(S),q=Math.cos(S),ee=b[0],ie=b[1],ae=b[2],de=b[3],_e=b[4],Ee=b[5],Fe=b[6],Pe=b[7];return b!==C&&(C[8]=b[8],C[9]=b[9],C[10]=b[10],C[11]=b[11],C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15]),C[0]=ee*q+_e*H,C[1]=ie*q+Ee*H,C[2]=ae*q+Fe*H,C[3]=de*q+Pe*H,C[4]=_e*q-ee*H,C[5]=Ee*q-ie*H,C[6]=Fe*q-ae*H,C[7]=Pe*q-de*H,C},D.sameOrigin=oe,D.scale=function(C,b,S){var H=S[0],q=S[1],ee=S[2];return C[0]=b[0]*H,C[1]=b[1]*H,C[2]=b[2]*H,C[3]=b[3]*H,C[4]=b[4]*q,C[5]=b[5]*q,C[6]=b[6]*q,C[7]=b[7]*q,C[8]=b[8]*ee,C[9]=b[9]*ee,C[10]=b[10]*ee,C[11]=b[11]*ee,C[12]=b[12],C[13]=b[13],C[14]=b[14],C[15]=b[15],C},D.setRTLTextPlugin=function(C,b,S=!1){if(nr===Oi||nr===mr||nr===ur)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xi=vi.resolveURL(C),nr=Oi,vr=b,Ir(),S||pa()},D.sphericalToCartesian=function([C,b,S]){return b+=90,b*=Math.PI/180,S*=Math.PI/180,{x:C*Math.cos(b)*Math.sin(S),y:C*Math.sin(b)*Math.sin(S),z:C*Math.cos(S)}},D.toEvaluationFeature=ya,D.transformMat4=Xl,D.translate=function(C,b,S){var H,q,ee,ie,ae,de,_e,Ee,Fe,Pe,He,Ne,tt=S[0],at=S[1],ct=S[2];return b===C?(C[12]=b[0]*tt+b[4]*at+b[8]*ct+b[12],C[13]=b[1]*tt+b[5]*at+b[9]*ct+b[13],C[14]=b[2]*tt+b[6]*at+b[10]*ct+b[14],C[15]=b[3]*tt+b[7]*at+b[11]*ct+b[15]):(q=b[1],ee=b[2],ie=b[3],ae=b[4],de=b[5],_e=b[6],Ee=b[7],Fe=b[8],Pe=b[9],He=b[10],Ne=b[11],C[0]=H=b[0],C[1]=q,C[2]=ee,C[3]=ie,C[4]=ae,C[5]=de,C[6]=_e,C[7]=Ee,C[8]=Fe,C[9]=Pe,C[10]=He,C[11]=Ne,C[12]=H*tt+ae*at+Fe*ct+b[12],C[13]=q*tt+de*at+Pe*ct+b[13],C[14]=ee*tt+_e*at+He*ct+b[14],C[15]=ie*tt+Ee*at+Ne*ct+b[15]),C},D.triggerPluginCompletionEvent=Or,D.unicodeBlockLookup=je,D.uniqueId=function(){return At++},D.v8Spec=me,D.validateCustomStyleLayer=function(C){const b=[],S=C.id;return S===void 0&&b.push({message:`layers.${S}: missing required property "id"`}),C.render===void 0&&b.push({message:`layers.${S}: missing required method "render"`}),C.renderingMode&&C.renderingMode!=="2d"&&C.renderingMode!=="3d"&&b.push({message:`layers.${S}: property "renderingMode" must be either "2d" or "3d"`}),b},D.validateLight=co,D.validateStyle=Ra,D.vectorTile=mo,D.warnOnce=Vt,D.wrap=ut}),Y(["./shared"],function(D){class ne{constructor(Se){this.keyCache={},Se&&this.replace(Se)}replace(Se){this._layerConfigs={},this._layers={},this.update(Se,[])}update(Se,ce){for(const xe of Se){this._layerConfigs[xe.id]=xe;const Me=this._layers[xe.id]=D.createStyleLayer(xe);Me._featureFilter=D.createFilter(Me.filter),this.keyCache[xe.id]&&delete this.keyCache[xe.id]}for(const xe of ce)delete this.keyCache[xe],delete this._layerConfigs[xe],delete this._layers[xe];this.familiesBySource={};const ye=D.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const xe of ye){const Me=xe.map(xt=>this._layers[xt.id]),Ge=Me[0];if(Ge.visibility==="none")continue;const Le=Ge.source||"";let Ke=this.familiesBySource[Le];Ke||(Ke=this.familiesBySource[Le]={});const st=Ge.sourceLayer||"_geojsonTileLayer";let _t=Ke[st];_t||(_t=Ke[st]=[]),_t.push(Me)}}}class Ae{constructor(Se){const ce={},ye=[];for(const Le in Se){const Ke=Se[Le],st=ce[Le]={};for(const _t in Ke){const xt=Ke[+_t];if(!xt||xt.bitmap.width===0||xt.bitmap.height===0)continue;const kt={x:0,y:0,w:xt.bitmap.width+2,h:xt.bitmap.height+2};ye.push(kt),st[_t]={rect:kt,metrics:xt.metrics}}}const{w:xe,h:Me}=D.potpack(ye),Ge=new D.AlphaImage({width:xe||1,height:Me||1});for(const Le in Se){const Ke=Se[Le];for(const st in Ke){const _t=Ke[+st];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const xt=ce[Le][st].rect;D.AlphaImage.copy(_t.bitmap,Ge,{x:0,y:0},{x:xt.x+1,y:xt.y+1},_t.bitmap)}}this.image=Ge,this.positions=ce}}D.register("GlyphAtlas",Ae);class fe{constructor(Se){this.tileID=new D.OverscaledTileID(Se.tileID.overscaledZ,Se.tileID.wrap,Se.tileID.canonical.z,Se.tileID.canonical.x,Se.tileID.canonical.y),this.uid=Se.uid,this.zoom=Se.zoom,this.pixelRatio=Se.pixelRatio,this.tileSize=Se.tileSize,this.source=Se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Se.showCollisionBoxes,this.collectResourceTiming=!!Se.collectResourceTiming,this.returnDependencies=!!Se.returnDependencies,this.promoteId=Se.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Se,ce,ye,xe,Me){this.status="parsing",this.data=Se,this.collisionBoxArray=new D.CollisionBoxArray;const Ge=new D.DictionaryCoder(Object.keys(Se.layers).sort()),Le=new D.FeatureIndex(this.tileID,this.promoteId);Le.bucketLayerIDs=[];const Ke={},st={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},_t=ce.familiesBySource[this.source];for(const Ki in _t){const Xt=Se.layers[Ki];if(!Xt)continue;Xt.version===1&&D.warnOnce(`Vector tile source "${this.source}" layer "${Ki}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wr=Ge.encode(Ki),bi=[];for(let Sr=0;Sr<Xt.length;Sr++){const Pr=Xt.feature(Sr),Zi=Le.getId(Pr,Ki);bi.push({feature:Pr,id:Zi,index:Sr,sourceLayerIndex:wr})}for(const Sr of _t[Ki]){const Pr=Sr[0];Pr.source!==this.source&&D.warnOnce(`layer.source = ${Pr.source} does not equal this.source = ${this.source}`),Pr.minzoom&&this.zoom<Math.floor(Pr.minzoom)||Pr.maxzoom&&this.zoom>=Pr.maxzoom||Pr.visibility!=="none"&&(ge(Sr,this.zoom,ye),(Ke[Pr.id]=Pr.createBucket({index:Le.bucketLayerIDs.length,layers:Sr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wr,sourceID:this.source})).populate(bi,st,this.tileID.canonical),Le.bucketLayerIDs.push(Sr.map(Zi=>Zi.id)))}}let xt,kt,ai,Di;const ni=D.mapObject(st.glyphDependencies,Ki=>Object.keys(Ki).map(Number));this.inFlightDependencies.forEach(Ki=>Ki==null?void 0:Ki.cancel()),this.inFlightDependencies=[];const ei=++this.dependencySentinel;Object.keys(ni).length?this.inFlightDependencies.push(xe.send("getGlyphs",{uid:this.uid,stacks:ni,source:this.source,tileID:this.tileID,type:"glyphs"},(Ki,Xt)=>{ei===this.dependencySentinel&&(xt||(xt=Ki,kt=Xt,hr.call(this)))})):kt={};const Ui=Object.keys(st.iconDependencies);Ui.length?this.inFlightDependencies.push(xe.send("getImages",{icons:Ui,source:this.source,tileID:this.tileID,type:"icons"},(Ki,Xt)=>{ei===this.dependencySentinel&&(xt||(xt=Ki,ai=Xt,hr.call(this)))})):ai={};const Qi=Object.keys(st.patternDependencies);function hr(){if(xt)return Me(xt);if(kt&&ai&&Di){const Ki=new Ae(kt),Xt=new D.ImageAtlas(ai,Di);for(const wr in Ke){const bi=Ke[wr];bi instanceof D.SymbolBucket?(ge(bi.layers,this.zoom,ye),D.performSymbolLayout({bucket:bi,glyphMap:kt,glyphPositions:Ki.positions,imageMap:ai,imagePositions:Xt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):bi.hasPattern&&(bi instanceof D.LineBucket||bi instanceof D.FillBucket||bi instanceof D.FillExtrusionBucket)&&(ge(bi.layers,this.zoom,ye),bi.addFeatures(st,this.tileID.canonical,Xt.patternPositions))}this.status="done",Me(null,{buckets:Object.values(Ke).filter(wr=>!wr.isEmpty()),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ki.image,imageAtlas:Xt,glyphMap:this.returnDependencies?kt:null,iconMap:this.returnDependencies?ai:null,glyphPositions:this.returnDependencies?Ki.positions:null})}}Qi.length?this.inFlightDependencies.push(xe.send("getImages",{icons:Qi,source:this.source,tileID:this.tileID,type:"patterns"},(Ki,Xt)=>{ei===this.dependencySentinel&&(xt||(xt=Ki,Di=Xt,hr.call(this)))})):Di={},hr.call(this)}}function ge(it,Se,ce){const ye=new D.EvaluationParameters(Se);for(const xe of it)xe.recalculate(ye,ce)}function Be(it,Se){const ce=D.getArrayBuffer(it.request,(ye,xe,Me,Ge)=>{ye?Se(ye):xe&&Se(null,{vectorTile:new D.vectorTile.VectorTile(new D.Protobuf(xe)),rawData:xe,cacheControl:Me,expires:Ge})});return()=>{ce.cancel(),Se()}}class Ue{constructor(Se,ce,ye,xe){this.actor=Se,this.layerIndex=ce,this.availableImages=ye,this.loadVectorData=xe||Be,this.fetching={},this.loading={},this.loaded={}}loadTile(Se,ce){const ye=Se.uid;this.loading||(this.loading={});const xe=!!(Se&&Se.request&&Se.request.collectResourceTiming)&&new D.RequestPerformance(Se.request),Me=this.loading[ye]=new fe(Se);Me.abort=this.loadVectorData(Se,(Ge,Le)=>{if(delete this.loading[ye],Ge||!Le)return Me.status="done",this.loaded[ye]=Me,ce(Ge);const Ke=Le.rawData,st={};Le.expires&&(st.expires=Le.expires),Le.cacheControl&&(st.cacheControl=Le.cacheControl);const _t={};if(xe){const xt=xe.finish();xt&&(_t.resourceTiming=JSON.parse(JSON.stringify(xt)))}Me.vectorTile=Le.vectorTile,Me.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,(xt,kt)=>{if(delete this.fetching[ye],xt||!kt)return ce(xt);ce(null,D.extend({rawTileData:Ke.slice(0)},kt,st,_t))}),this.loaded=this.loaded||{},this.loaded[ye]=Me,this.fetching[ye]={rawTileData:Ke,cacheControl:st,resourceTiming:_t}})}reloadTile(Se,ce){const ye=this.loaded,xe=Se.uid;if(ye&&ye[xe]){const Me=ye[xe];Me.showCollisionBoxes=Se.showCollisionBoxes,Me.status==="parsing"?Me.parse(Me.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ge,Le)=>{if(Ge||!Le)return ce(Ge,Le);let Ke;if(this.fetching[xe]){const{rawTileData:st,cacheControl:_t,resourceTiming:xt}=this.fetching[xe];delete this.fetching[xe],Ke=D.extend({rawTileData:st.slice(0)},Le,_t,xt)}else Ke=Le;ce(null,Ke)}):Me.status==="done"&&(Me.vectorTile?Me.parse(Me.vectorTile,this.layerIndex,this.availableImages,this.actor,ce):ce())}}abortTile(Se,ce){const ye=this.loading,xe=Se.uid;ye&&ye[xe]&&ye[xe].abort&&(ye[xe].abort(),delete ye[xe]),ce()}removeTile(Se,ce){const ye=this.loaded,xe=Se.uid;ye&&ye[xe]&&delete ye[xe],ce()}}class ze{constructor(){this.loaded={}}loadTile(Se,ce){const{uid:ye,encoding:xe,rawImageData:Me}=Se,Ge=D.isImageBitmap(Me)?this.getImageData(Me):Me,Le=new D.DEMData(ye,Ge,xe);this.loaded=this.loaded||{},this.loaded[ye]=Le,ce(null,Le)}getImageData(Se){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Se.width,Se.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Se.width,this.offscreenCanvas.height=Se.height,this.offscreenCanvasContext.drawImage(Se,0,0,Se.width,Se.height);const ce=this.offscreenCanvasContext.getImageData(-1,-1,Se.width+2,Se.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new D.RGBAImage({width:ce.width,height:ce.height},ce.data)}removeTile(Se){const ce=this.loaded,ye=Se.uid;ce&&ce[ye]&&delete ce[ye]}}function Re(it,Se){if(it.length!==0){$e(it[0],Se);for(var ce=1;ce<it.length;ce++)$e(it[ce],!Se)}}function $e(it,Se){for(var ce=0,ye=0,xe=0,Me=it.length,Ge=Me-1;xe<Me;Ge=xe++){var Le=(it[xe][0]-it[Ge][0])*(it[Ge][1]+it[xe][1]),Ke=ce+Le;ye+=Math.abs(ce)>=Math.abs(Le)?ce-Ke+Le:Le-Ke+ce,ce=Ke}ce+ye>=0!=!!Se&&it.reverse()}var We=D.getDefaultExportFromCjs(function it(Se,ce){var ye,xe=Se&&Se.type;if(xe==="FeatureCollection")for(ye=0;ye<Se.features.length;ye++)it(Se.features[ye],ce);else if(xe==="GeometryCollection")for(ye=0;ye<Se.geometries.length;ye++)it(Se.geometries[ye],ce);else if(xe==="Feature")it(Se.geometry,ce);else if(xe==="Polygon")Re(Se.coordinates,ce);else if(xe==="MultiPolygon")for(ye=0;ye<Se.coordinates.length;ye++)Re(Se.coordinates[ye],ce);return Se});const ut=D.vectorTile.VectorTileFeature.prototype.toGeoJSON;var et={exports:{}},At=D.pointGeometry,nt=D.vectorTile.VectorTileFeature,ft=Tt;function Tt(it,Se){this.options=Se||{},this.features=it,this.length=it.length}function qt(it,Se){this.id=typeof it.id=="number"?it.id:void 0,this.type=it.type,this.rawGeometry=it.type===1?[it.geometry]:it.geometry,this.properties=it.tags,this.extent=Se||4096}Tt.prototype.feature=function(it){return new qt(this.features[it],this.options.extent)},qt.prototype.loadGeometry=function(){var it=this.rawGeometry;this.geometry=[];for(var Se=0;Se<it.length;Se++){for(var ce=it[Se],ye=[],xe=0;xe<ce.length;xe++)ye.push(new At(ce[xe][0],ce[xe][1]));this.geometry.push(ye)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var it=this.geometry,Se=1/0,ce=-1/0,ye=1/0,xe=-1/0,Me=0;Me<it.length;Me++)for(var Ge=it[Me],Le=0;Le<Ge.length;Le++){var Ke=Ge[Le];Se=Math.min(Se,Ke.x),ce=Math.max(ce,Ke.x),ye=Math.min(ye,Ke.y),xe=Math.max(xe,Ke.y)}return[Se,ye,ce,xe]},qt.prototype.toGeoJSON=nt.prototype.toGeoJSON;var Vt=D.pbf,vt=ft;function Ut(it){var Se=new Vt;return function(ce,ye){for(var xe in ce.layers)ye.writeMessage(3,Pt,ce.layers[xe])}(it,Se),Se.finish()}function Pt(it,Se){var ce;Se.writeVarintField(15,it.version||1),Se.writeStringField(1,it.name||""),Se.writeVarintField(5,it.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<it.length;ce++)ye.feature=it.feature(ce),Se.writeMessage(2,Yt,ye);var xe=ye.keys;for(ce=0;ce<xe.length;ce++)Se.writeStringField(3,xe[ce]);var Me=ye.values;for(ce=0;ce<Me.length;ce++)Se.writeMessage(4,Yi,Me[ce])}function Yt(it,Se){var ce=it.feature;ce.id!==void 0&&Se.writeVarintField(1,ce.id),Se.writeMessage(2,Ai,it),Se.writeVarintField(3,ce.type),Se.writeMessage(4,Li,ce)}function Ai(it,Se){var ce=it.feature,ye=it.keys,xe=it.values,Me=it.keycache,Ge=it.valuecache;for(var Le in ce.properties){var Ke=ce.properties[Le],st=Me[Le];if(Ke!==null){st===void 0&&(ye.push(Le),Me[Le]=st=ye.length-1),Se.writeVarint(st);var _t=typeof Ke;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(Ke=JSON.stringify(Ke));var xt=_t+":"+Ke,kt=Ge[xt];kt===void 0&&(xe.push(Ke),Ge[xt]=kt=xe.length-1),Se.writeVarint(kt)}}}function Ri(it,Se){return(Se<<3)+(7&it)}function Ei(it){return it<<1^it>>31}function Li(it,Se){for(var ce=it.loadGeometry(),ye=it.type,xe=0,Me=0,Ge=ce.length,Le=0;Le<Ge;Le++){var Ke=ce[Le],st=1;ye===1&&(st=Ke.length),Se.writeVarint(Ri(1,st));for(var _t=ye===3?Ke.length-1:Ke.length,xt=0;xt<_t;xt++){xt===1&&ye!==1&&Se.writeVarint(Ri(2,_t-1));var kt=Ke[xt].x-xe,ai=Ke[xt].y-Me;Se.writeVarint(Ei(kt)),Se.writeVarint(Ei(ai)),xe+=kt,Me+=ai}ye===3&&Se.writeVarint(Ri(7,1))}}function Yi(it,Se){var ce=typeof it;ce==="string"?Se.writeStringField(1,it):ce==="boolean"?Se.writeBooleanField(7,it):ce==="number"&&(it%1!=0?Se.writeDoubleField(3,it):it<0?Se.writeSVarintField(6,it):Se.writeVarintField(5,it))}et.exports=Ut,et.exports.fromVectorTileJs=Ut,et.exports.fromGeojsonVt=function(it,Se){Se=Se||{};var ce={};for(var ye in it)ce[ye]=new vt(it[ye].features,Se),ce[ye].name=ye,ce[ye].version=Se.version,ce[ye].extent=Se.extent;return Ut({layers:ce})},et.exports.GeoJSONWrapper=vt;var vi=D.getDefaultExportFromCjs(et.exports);const d={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:it=>it},w=Math.fround||(I=new Float32Array(1),it=>(I[0]=+it,I[0]));var I;const k=3,R=5,W=6;class se{constructor(Se){this.options=Object.assign(Object.create(d),Se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Se){const{log:ce,minZoom:ye,maxZoom:xe}=this.options;ce&&console.time("total time");const Me=`prepare ${Se.length} points`;ce&&console.time(Me),this.points=Se;const Ge=[];for(let Ke=0;Ke<Se.length;Ke++){const st=Se[Ke];if(!st.geometry)continue;const[_t,xt]=st.geometry.coordinates,kt=w(we(_t)),ai=w(Te(xt));Ge.push(kt,ai,1/0,Ke,-1,1),this.options.reduce&&Ge.push(0)}let Le=this.trees[xe+1]=this._createTree(Ge);ce&&console.timeEnd(Me);for(let Ke=xe;Ke>=ye;Ke--){const st=+Date.now();Le=this.trees[Ke]=this._createTree(this._cluster(Le,Ke)),ce&&console.log("z%d: %d clusters in %dms",Ke,Le.numItems,+Date.now()-st)}return ce&&console.timeEnd("total time"),this}getClusters(Se,ce){let ye=((Se[0]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,Se[1]));let Me=Se[2]===180?180:((Se[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Se[3]));if(Se[2]-Se[0]>=360)ye=-180,Me=180;else if(ye>Me){const xt=this.getClusters([ye,xe,180,Ge],ce),kt=this.getClusters([-180,xe,Me,Ge],ce);return xt.concat(kt)}const Le=this.trees[this._limitZoom(ce)],Ke=Le.range(we(ye),Te(Ge),we(Me),Te(xe)),st=Le.data,_t=[];for(const xt of Ke){const kt=this.stride*xt;_t.push(st[kt+R]>1?oe(st,kt,this.clusterProps):this.points[st[kt+k]])}return _t}getChildren(Se){const ce=this._getOriginId(Se),ye=this._getOriginZoom(Se),xe="No cluster with the specified id.",Me=this.trees[ye];if(!Me)throw new Error(xe);const Ge=Me.data;if(ce*this.stride>=Ge.length)throw new Error(xe);const Le=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ke=Me.within(Ge[ce*this.stride],Ge[ce*this.stride+1],Le),st=[];for(const _t of Ke){const xt=_t*this.stride;Ge[xt+4]===Se&&st.push(Ge[xt+R]>1?oe(Ge,xt,this.clusterProps):this.points[Ge[xt+k]])}if(st.length===0)throw new Error(xe);return st}getLeaves(Se,ce,ye){const xe=[];return this._appendLeaves(xe,Se,ce=ce||10,ye=ye||0,0),xe}getTile(Se,ce,ye){const xe=this.trees[this._limitZoom(Se)],Me=Math.pow(2,Se),{extent:Ge,radius:Le}=this.options,Ke=Le/Ge,st=(ye-Ke)/Me,_t=(ye+1+Ke)/Me,xt={features:[]};return this._addTileFeatures(xe.range((ce-Ke)/Me,st,(ce+1+Ke)/Me,_t),xe.data,ce,ye,Me,xt),ce===0&&this._addTileFeatures(xe.range(1-Ke/Me,st,1,_t),xe.data,Me,ye,Me,xt),ce===Me-1&&this._addTileFeatures(xe.range(0,st,Ke/Me,_t),xe.data,-1,ye,Me,xt),xt.features.length?xt:null}getClusterExpansionZoom(Se){let ce=this._getOriginZoom(Se)-1;for(;ce<=this.options.maxZoom;){const ye=this.getChildren(Se);if(ce++,ye.length!==1)break;Se=ye[0].properties.cluster_id}return ce}_appendLeaves(Se,ce,ye,xe,Me){const Ge=this.getChildren(ce);for(const Le of Ge){const Ke=Le.properties;if(Ke&&Ke.cluster?Me+Ke.point_count<=xe?Me+=Ke.point_count:Me=this._appendLeaves(Se,Ke.cluster_id,ye,xe,Me):Me<xe?Me++:Se.push(Le),Se.length===ye)break}return Me}_createTree(Se){const ce=new D.KDBush(Se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<Se.length;ye+=this.stride)ce.add(Se[ye],Se[ye+1]);return ce.finish(),ce.data=Se,ce}_addTileFeatures(Se,ce,ye,xe,Me,Ge){for(const Le of Se){const Ke=Le*this.stride,st=ce[Ke+R]>1;let _t,xt,kt;if(st)_t=ue(ce,Ke,this.clusterProps),xt=ce[Ke],kt=ce[Ke+1];else{const ni=this.points[ce[Ke+k]];_t=ni.properties;const[ei,Ui]=ni.geometry.coordinates;xt=we(ei),kt=Te(Ui)}const ai={type:1,geometry:[[Math.round(this.options.extent*(xt*Me-ye)),Math.round(this.options.extent*(kt*Me-xe))]],tags:_t};let Di;Di=st||this.options.generateId?ce[Ke+k]:this.points[ce[Ke+k]].id,Di!==void 0&&(ai.id=Di),Ge.features.push(ai)}}_limitZoom(Se){return Math.max(this.options.minZoom,Math.min(Math.floor(+Se),this.options.maxZoom+1))}_cluster(Se,ce){const{radius:ye,extent:xe,reduce:Me,minPoints:Ge}=this.options,Le=ye/(xe*Math.pow(2,ce)),Ke=Se.data,st=[],_t=this.stride;for(let xt=0;xt<Ke.length;xt+=_t){if(Ke[xt+2]<=ce)continue;Ke[xt+2]=ce;const kt=Ke[xt],ai=Ke[xt+1],Di=Se.within(Ke[xt],Ke[xt+1],Le),ni=Ke[xt+R];let ei=ni;for(const Ui of Di){const Qi=Ui*_t;Ke[Qi+2]>ce&&(ei+=Ke[Qi+R])}if(ei>ni&&ei>=Ge){let Ui,Qi=kt*ni,hr=ai*ni,Ki=-1;const Xt=((xt/_t|0)<<5)+(ce+1)+this.points.length;for(const wr of Di){const bi=wr*_t;if(Ke[bi+2]<=ce)continue;Ke[bi+2]=ce;const Sr=Ke[bi+R];Qi+=Ke[bi]*Sr,hr+=Ke[bi+1]*Sr,Ke[bi+4]=Xt,Me&&(Ui||(Ui=this._map(Ke,xt,!0),Ki=this.clusterProps.length,this.clusterProps.push(Ui)),Me(Ui,this._map(Ke,bi)))}Ke[xt+4]=Xt,st.push(Qi/ei,hr/ei,1/0,Xt,-1,ei),Me&&st.push(Ki)}else{for(let Ui=0;Ui<_t;Ui++)st.push(Ke[xt+Ui]);if(ei>1)for(const Ui of Di){const Qi=Ui*_t;if(!(Ke[Qi+2]<=ce)){Ke[Qi+2]=ce;for(let hr=0;hr<_t;hr++)st.push(Ke[Qi+hr])}}}}return st}_getOriginId(Se){return Se-this.points.length>>5}_getOriginZoom(Se){return(Se-this.points.length)%32}_map(Se,ce,ye){if(Se[ce+R]>1){const Ge=this.clusterProps[Se[ce+W]];return ye?Object.assign({},Ge):Ge}const xe=this.points[Se[ce+k]].properties,Me=this.options.map(xe);return ye&&Me===xe?Object.assign({},Me):Me}}function oe(it,Se,ce){return{type:"Feature",id:it[Se+k],properties:ue(it,Se,ce),geometry:{type:"Point",coordinates:[(ye=it[Se],360*(ye-.5)),Ve(it[Se+1])]}};var ye}function ue(it,Se,ce){const ye=it[Se+R],xe=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Me=it[Se+W],Ge=Me===-1?{}:Object.assign({},ce[Me]);return Object.assign(Ge,{cluster:!0,cluster_id:it[Se+k],point_count:ye,point_count_abbreviated:xe})}function we(it){return it/360+.5}function Te(it){const Se=Math.sin(it*Math.PI/180),ce=.5-.25*Math.log((1+Se)/(1-Se))/Math.PI;return ce<0?0:ce>1?1:ce}function Ve(it){const Se=(180-360*it)*Math.PI/180;return 360*Math.atan(Math.exp(Se))/Math.PI-90}function De(it,Se,ce,ye){for(var xe,Me=ye,Ge=ce-Se>>1,Le=ce-Se,Ke=it[Se],st=it[Se+1],_t=it[ce],xt=it[ce+1],kt=Se+3;kt<ce;kt+=3){var ai=me(it[kt],it[kt+1],Ke,st,_t,xt);if(ai>Me)xe=kt,Me=ai;else if(ai===Me){var Di=Math.abs(kt-Ge);Di<Le&&(xe=kt,Le=Di)}}Me>ye&&(xe-Se>3&&De(it,Se,xe,ye),it[xe+2]=Me,ce-xe>3&&De(it,xe,ce,ye))}function me(it,Se,ce,ye,xe,Me){var Ge=xe-ce,Le=Me-ye;if(Ge!==0||Le!==0){var Ke=((it-ce)*Ge+(Se-ye)*Le)/(Ge*Ge+Le*Le);Ke>1?(ce=xe,ye=Me):Ke>0&&(ce+=Ge*Ke,ye+=Le*Ke)}return(Ge=it-ce)*Ge+(Le=Se-ye)*Le}function ke(it,Se,ce,ye){var xe={id:it===void 0?null:it,type:Se,geometry:ce,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Me){var Ge=Me.geometry,Le=Me.type;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")qe(Me,Ge);else if(Le==="Polygon"||Le==="MultiLineString")for(var Ke=0;Ke<Ge.length;Ke++)qe(Me,Ge[Ke]);else if(Le==="MultiPolygon")for(Ke=0;Ke<Ge.length;Ke++)for(var st=0;st<Ge[Ke].length;st++)qe(Me,Ge[Ke][st])}(xe),xe}function qe(it,Se){for(var ce=0;ce<Se.length;ce+=3)it.minX=Math.min(it.minX,Se[ce]),it.minY=Math.min(it.minY,Se[ce+1]),it.maxX=Math.max(it.maxX,Se[ce]),it.maxY=Math.max(it.maxY,Se[ce+1])}function lt(it,Se,ce,ye){if(Se.geometry){var xe=Se.geometry.coordinates,Me=Se.geometry.type,Ge=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),Le=[],Ke=Se.id;if(ce.promoteId?Ke=Se.properties[ce.promoteId]:ce.generateId&&(Ke=ye||0),Me==="Point")pt(xe,Le);else if(Me==="MultiPoint")for(var st=0;st<xe.length;st++)pt(xe[st],Le);else if(Me==="LineString")Ft(xe,Le,Ge,!1);else if(Me==="MultiLineString"){if(ce.lineMetrics){for(st=0;st<xe.length;st++)Ft(xe[st],Le=[],Ge,!1),it.push(ke(Ke,"LineString",Le,Se.properties));return}zt(xe,Le,Ge,!1)}else if(Me==="Polygon")zt(xe,Le,Ge,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(st=0;st<Se.geometry.geometries.length;st++)lt(it,{id:Ke,geometry:Se.geometry.geometries[st],properties:Se.properties},ce,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(st=0;st<xe.length;st++){var _t=[];zt(xe[st],_t,Ge,!0),Le.push(_t)}}it.push(ke(Ke,Me,Le,Se.properties))}}function pt(it,Se){Se.push(Nt(it[0])),Se.push(Mt(it[1])),Se.push(0)}function Ft(it,Se,ce,ye){for(var xe,Me,Ge=0,Le=0;Le<it.length;Le++){var Ke=Nt(it[Le][0]),st=Mt(it[Le][1]);Se.push(Ke),Se.push(st),Se.push(0),Le>0&&(Ge+=ye?(xe*st-Ke*Me)/2:Math.sqrt(Math.pow(Ke-xe,2)+Math.pow(st-Me,2))),xe=Ke,Me=st}var _t=Se.length-3;Se[2]=1,De(Se,0,_t,ce),Se[_t+2]=1,Se.size=Math.abs(Ge),Se.start=0,Se.end=Se.size}function zt(it,Se,ce,ye){for(var xe=0;xe<it.length;xe++){var Me=[];Ft(it[xe],Me,ce,ye),Se.push(Me)}}function Nt(it){return it/360+.5}function Mt(it){var Se=Math.sin(it*Math.PI/180),ce=.5-.25*Math.log((1+Se)/(1-Se))/Math.PI;return ce<0?0:ce>1?1:ce}function $t(it,Se,ce,ye,xe,Me,Ge,Le){if(ye/=Se,Me>=(ce/=Se)&&Ge<ye)return it;if(Ge<ce||Me>=ye)return null;for(var Ke=[],st=0;st<it.length;st++){var _t=it[st],xt=_t.geometry,kt=_t.type,ai=xe===0?_t.minX:_t.minY,Di=xe===0?_t.maxX:_t.maxY;if(ai>=ce&&Di<ye)Ke.push(_t);else if(!(Di<ce||ai>=ye)){var ni=[];if(kt==="Point"||kt==="MultiPoint")ri(xt,ni,ce,ye,xe);else if(kt==="LineString")ci(xt,ni,ce,ye,xe,!1,Le.lineMetrics);else if(kt==="MultiLineString")di(xt,ni,ce,ye,xe,!1);else if(kt==="Polygon")di(xt,ni,ce,ye,xe,!0);else if(kt==="MultiPolygon")for(var ei=0;ei<xt.length;ei++){var Ui=[];di(xt[ei],Ui,ce,ye,xe,!0),Ui.length&&ni.push(Ui)}if(ni.length){if(Le.lineMetrics&&kt==="LineString"){for(ei=0;ei<ni.length;ei++)Ke.push(ke(_t.id,kt,ni[ei],_t.tags));continue}kt!=="LineString"&&kt!=="MultiLineString"||(ni.length===1?(kt="LineString",ni=ni[0]):kt="MultiLineString"),kt!=="Point"&&kt!=="MultiPoint"||(kt=ni.length===3?"Point":"MultiPoint"),Ke.push(ke(_t.id,kt,ni,_t.tags))}}}return Ke.length?Ke:null}function ri(it,Se,ce,ye,xe){for(var Me=0;Me<it.length;Me+=3){var Ge=it[Me+xe];Ge>=ce&&Ge<=ye&&(Se.push(it[Me]),Se.push(it[Me+1]),Se.push(it[Me+2]))}}function ci(it,Se,ce,ye,xe,Me,Ge){for(var Le,Ke,st=bt(it),_t=xe===0?Hi:Vi,xt=it.start,kt=0;kt<it.length-3;kt+=3){var ai=it[kt],Di=it[kt+1],ni=it[kt+2],ei=it[kt+3],Ui=it[kt+4],Qi=xe===0?ai:Di,hr=xe===0?ei:Ui,Ki=!1;Ge&&(Le=Math.sqrt(Math.pow(ai-ei,2)+Math.pow(Di-Ui,2))),Qi<ce?hr>ce&&(Ke=_t(st,ai,Di,ei,Ui,ce),Ge&&(st.start=xt+Le*Ke)):Qi>ye?hr<ye&&(Ke=_t(st,ai,Di,ei,Ui,ye),Ge&&(st.start=xt+Le*Ke)):ii(st,ai,Di,ni),hr<ce&&Qi>=ce&&(Ke=_t(st,ai,Di,ei,Ui,ce),Ki=!0),hr>ye&&Qi<=ye&&(Ke=_t(st,ai,Di,ei,Ui,ye),Ki=!0),!Me&&Ki&&(Ge&&(st.end=xt+Le*Ke),Se.push(st),st=bt(it)),Ge&&(xt+=Le)}var Xt=it.length-3;ai=it[Xt],Di=it[Xt+1],ni=it[Xt+2],(Qi=xe===0?ai:Di)>=ce&&Qi<=ye&&ii(st,ai,Di,ni),Xt=st.length-3,Me&&Xt>=3&&(st[Xt]!==st[0]||st[Xt+1]!==st[1])&&ii(st,st[0],st[1],st[2]),st.length&&Se.push(st)}function bt(it){var Se=[];return Se.size=it.size,Se.start=it.start,Se.end=it.end,Se}function di(it,Se,ce,ye,xe,Me){for(var Ge=0;Ge<it.length;Ge++)ci(it[Ge],Se,ce,ye,xe,Me,!1)}function ii(it,Se,ce,ye){it.push(Se),it.push(ce),it.push(ye)}function Hi(it,Se,ce,ye,xe,Me){var Ge=(Me-Se)/(ye-Se);return it.push(Me),it.push(ce+(xe-ce)*Ge),it.push(1),Ge}function Vi(it,Se,ce,ye,xe,Me){var Ge=(Me-ce)/(xe-ce);return it.push(Se+(ye-Se)*Ge),it.push(Me),it.push(1),Ge}function Ot(it,Se){for(var ce=[],ye=0;ye<it.length;ye++){var xe,Me=it[ye],Ge=Me.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")xe=_i(Me.geometry,Se);else if(Ge==="MultiLineString"||Ge==="Polygon"){xe=[];for(var Le=0;Le<Me.geometry.length;Le++)xe.push(_i(Me.geometry[Le],Se))}else if(Ge==="MultiPolygon")for(xe=[],Le=0;Le<Me.geometry.length;Le++){for(var Ke=[],st=0;st<Me.geometry[Le].length;st++)Ke.push(_i(Me.geometry[Le][st],Se));xe.push(Ke)}ce.push(ke(Me.id,Ge,xe,Me.tags))}return ce}function _i(it,Se){var ce=[];ce.size=it.size,it.start!==void 0&&(ce.start=it.start,ce.end=it.end);for(var ye=0;ye<it.length;ye+=3)ce.push(it[ye]+Se,it[ye+1],it[ye+2]);return ce}function Ti(it,Se){if(it.transformed)return it;var ce,ye,xe,Me=1<<it.z,Ge=it.x,Le=it.y;for(ce=0;ce<it.features.length;ce++){var Ke=it.features[ce],st=Ke.geometry,_t=Ke.type;if(Ke.geometry=[],_t===1)for(ye=0;ye<st.length;ye+=2)Ke.geometry.push(Wi(st[ye],st[ye+1],Se,Me,Ge,Le));else for(ye=0;ye<st.length;ye++){var xt=[];for(xe=0;xe<st[ye].length;xe+=2)xt.push(Wi(st[ye][xe],st[ye][xe+1],Se,Me,Ge,Le));Ke.geometry.push(xt)}}return it.transformed=!0,it}function Wi(it,Se,ce,ye,xe,Me){return[Math.round(ce*(it*ye-xe)),Math.round(ce*(Se*ye-Me))]}function Zt(it,Se,ce,ye,xe){for(var Me=Se===xe.maxZoom?0:xe.tolerance/((1<<Se)*xe.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:ye,z:Se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Le=0;Le<it.length;Le++){Ge.numFeatures++,mi(Ge,it[Le],Me,xe);var Ke=it[Le].minX,st=it[Le].minY,_t=it[Le].maxX,xt=it[Le].maxY;Ke<Ge.minX&&(Ge.minX=Ke),st<Ge.minY&&(Ge.minY=st),_t>Ge.maxX&&(Ge.maxX=_t),xt>Ge.maxY&&(Ge.maxY=xt)}return Ge}function mi(it,Se,ce,ye){var xe=Se.geometry,Me=Se.type,Ge=[];if(Me==="Point"||Me==="MultiPoint")for(var Le=0;Le<xe.length;Le+=3)Ge.push(xe[Le]),Ge.push(xe[Le+1]),it.numPoints++,it.numSimplified++;else if(Me==="LineString")wi(Ge,xe,it,ce,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(Le=0;Le<xe.length;Le++)wi(Ge,xe[Le],it,ce,Me==="Polygon",Le===0);else if(Me==="MultiPolygon")for(var Ke=0;Ke<xe.length;Ke++){var st=xe[Ke];for(Le=0;Le<st.length;Le++)wi(Ge,st[Le],it,ce,!0,Le===0)}if(Ge.length){var _t=Se.tags||null;if(Me==="LineString"&&ye.lineMetrics){for(var xt in _t={},Se.tags)_t[xt]=Se.tags[xt];_t.mapbox_clip_start=xe.start/xe.size,_t.mapbox_clip_end=xe.end/xe.size}var kt={geometry:Ge,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:_t};Se.id!==null&&(kt.id=Se.id),it.features.push(kt)}}function wi(it,Se,ce,ye,xe,Me){var Ge=ye*ye;if(ye>0&&Se.size<(xe?Ge:ye))ce.numPoints+=Se.length/3;else{for(var Le=[],Ke=0;Ke<Se.length;Ke+=3)(ye===0||Se[Ke+2]>Ge)&&(ce.numSimplified++,Le.push(Se[Ke]),Le.push(Se[Ke+1])),ce.numPoints++;xe&&function(st,_t){for(var xt=0,kt=0,ai=st.length,Di=ai-2;kt<ai;Di=kt,kt+=2)xt+=(st[kt]-st[Di])*(st[kt+1]+st[Di+1]);if(xt>0===_t)for(kt=0,ai=st.length;kt<ai/2;kt+=2){var ni=st[kt],ei=st[kt+1];st[kt]=st[ai-2-kt],st[kt+1]=st[ai-1-kt],st[ai-2-kt]=ni,st[ai-1-kt]=ei}}(Le,Me),it.push(Le)}}function $i(it,Se){var ce=(Se=this.options=function(xe,Me){for(var Ge in Me)xe[Ge]=Me[Ge];return xe}(Object.create(this.options),Se)).debug;if(ce&&console.time("preprocess data"),Se.maxZoom<0||Se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Se.promoteId&&Se.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(xe,Me){var Ge=[];if(xe.type==="FeatureCollection")for(var Le=0;Le<xe.features.length;Le++)lt(Ge,xe.features[Le],Me,Le);else lt(Ge,xe.type==="Feature"?xe:{geometry:xe},Me);return Ge}(it,Se);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Se.indexMaxZoom,Se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(xe,Me){var Ge=Me.buffer/Me.extent,Le=xe,Ke=$t(xe,1,-1-Ge,Ge,0,-1,2,Me),st=$t(xe,1,1-Ge,2+Ge,0,-1,2,Me);return(Ke||st)&&(Le=$t(xe,1,-Ge,1+Ge,0,-1,2,Me)||[],Ke&&(Le=Ot(Ke,1).concat(Le)),st&&(Le=Le.concat(Ot(st,-1)))),Le}(ye,Se),ye.length&&this.splitTile(ye,0,0,0),ce&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tr(it,Se,ce){return 32*((1<<it)*ce+Se)+it}function Ar(it,Se){return Se?it.properties[Se]:it.id}function Tr(it,Se){if(it==null)return!0;if(it.type==="Feature")return Ar(it,Se)!=null;if(it.type==="FeatureCollection"){const ce=new Set;for(const ye of it.features){const xe=Ar(ye,Se);if(xe==null||ce.has(xe))return!1;ce.add(xe)}return!0}return!1}function ji(it,Se){const ce=new Map;if(it!=null)if(it.type==="Feature")ce.set(Ar(it,Se),it);else for(const ye of it.features)ce.set(Ar(ye,Se),ye);return ce}function Si(it,Se){const ce=it.tileID.canonical;if(!this._geoJSONIndex)return Se(null,null);const ye=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!ye)return Se(null,null);const xe=new class{constructor(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=D.EXTENT,this.length=Ge.length,this._features=Ge}feature(Ge){return new class{constructor(Le){this._feature=Le,this.extent=D.EXTENT,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const Ke of this._feature.geometry)Le.push([new D.Point(Ke[0],Ke[1])]);return Le}{const Le=[];for(const Ke of this._feature.geometry){const st=[];for(const _t of Ke)st.push(new D.Point(_t[0],_t[1]));Le.push(st)}return Le}}toGeoJSON(Le,Ke,st){return ut.call(this,Le,Ke,st)}}(this._features[Ge])}}(ye.features);let Me=vi(xe);Me.byteOffset===0&&Me.byteLength===Me.buffer.byteLength||(Me=new Uint8Array(Me)),Se(null,{vectorTile:xe,rawData:Me.buffer})}$i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$i.prototype.splitTile=function(it,Se,ce,ye,xe,Me,Ge){for(var Le=[it,Se,ce,ye],Ke=this.options,st=Ke.debug;Le.length;){ye=Le.pop(),ce=Le.pop(),Se=Le.pop(),it=Le.pop();var _t=1<<Se,xt=tr(Se,ce,ye),kt=this.tiles[xt];if(!kt&&(st>1&&console.time("creation"),kt=this.tiles[xt]=Zt(it,Se,ce,ye,Ke),this.tileCoords.push({z:Se,x:ce,y:ye}),st)){st>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Se,ce,ye,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));var ai="z"+Se;this.stats[ai]=(this.stats[ai]||0)+1,this.total++}if(kt.source=it,xe){if(Se===Ke.maxZoom||Se===xe)continue;var Di=1<<xe-Se;if(ce!==Math.floor(Me/Di)||ye!==Math.floor(Ge/Di))continue}else if(Se===Ke.indexMaxZoom||kt.numPoints<=Ke.indexMaxPoints)continue;if(kt.source=null,it.length!==0){st>1&&console.time("clipping");var ni,ei,Ui,Qi,hr,Ki,Xt=.5*Ke.buffer/Ke.extent,wr=.5-Xt,bi=.5+Xt,Sr=1+Xt;ni=ei=Ui=Qi=null,hr=$t(it,_t,ce-Xt,ce+bi,0,kt.minX,kt.maxX,Ke),Ki=$t(it,_t,ce+wr,ce+Sr,0,kt.minX,kt.maxX,Ke),it=null,hr&&(ni=$t(hr,_t,ye-Xt,ye+bi,1,kt.minY,kt.maxY,Ke),ei=$t(hr,_t,ye+wr,ye+Sr,1,kt.minY,kt.maxY,Ke),hr=null),Ki&&(Ui=$t(Ki,_t,ye-Xt,ye+bi,1,kt.minY,kt.maxY,Ke),Qi=$t(Ki,_t,ye+wr,ye+Sr,1,kt.minY,kt.maxY,Ke),Ki=null),st>1&&console.timeEnd("clipping"),Le.push(ni||[],Se+1,2*ce,2*ye),Le.push(ei||[],Se+1,2*ce,2*ye+1),Le.push(Ui||[],Se+1,2*ce+1,2*ye),Le.push(Qi||[],Se+1,2*ce+1,2*ye+1)}}},$i.prototype.getTile=function(it,Se,ce){var ye=this.options,xe=ye.extent,Me=ye.debug;if(it<0||it>24)return null;var Ge=1<<it,Le=tr(it,Se=(Se%Ge+Ge)%Ge,ce);if(this.tiles[Le])return Ti(this.tiles[Le],xe);Me>1&&console.log("drilling down to z%d-%d-%d",it,Se,ce);for(var Ke,st=it,_t=Se,xt=ce;!Ke&&st>0;)st--,_t=Math.floor(_t/2),xt=Math.floor(xt/2),Ke=this.tiles[tr(st,_t,xt)];return Ke&&Ke.source?(Me>1&&console.log("found parent tile z%d-%d-%d",st,_t,xt),Me>1&&console.time("drilling down"),this.splitTile(Ke.source,st,_t,xt,it,Se,ce),Me>1&&console.timeEnd("drilling down"),this.tiles[Le]?Ti(this.tiles[Le],xe):null):null};class Qs extends Ue{constructor(Se,ce,ye,xe){super(Se,ce,ye,Si),this._dataUpdateable=new Map,this.loadGeoJSON=(Me,Ge)=>{const{promoteId:Le}=Me;if(Me.request)return D.getJSON(Me.request,(Ke,st,_t,xt)=>{this._dataUpdateable=Tr(st,Le)?ji(st,Le):void 0,Ge(Ke,st,_t,xt)});if(typeof Me.data=="string")try{const Ke=JSON.parse(Me.data);this._dataUpdateable=Tr(Ke,Le)?ji(Ke,Le):void 0,Ge(null,Ke)}catch{Ge(new Error(`Input data given to '${Me.source}' is not a valid GeoJSON object.`))}else Me.dataDiff?this._dataUpdateable?(function(Ke,st,_t){var xt,kt,ai,Di;if(st.removeAll&&Ke.clear(),st.remove)for(const ni of st.remove)Ke.delete(ni);if(st.add)for(const ni of st.add){const ei=Ar(ni,_t);ei!=null&&Ke.set(ei,ni)}if(st.update)for(const ni of st.update){let ei=Ke.get(ni.id);if(ei==null)continue;const Ui=!ni.removeAllProperties&&(((xt=ni.removeProperties)===null||xt===void 0?void 0:xt.length)>0||((kt=ni.addOrUpdateProperties)===null||kt===void 0?void 0:kt.length)>0);if((ni.newGeometry||ni.removeAllProperties||Ui)&&(ei={...ei},Ke.set(ni.id,ei),Ui&&(ei.properties={...ei.properties})),ni.newGeometry&&(ei.geometry=ni.newGeometry),ni.removeAllProperties)ei.properties={};else if(((ai=ni.removeProperties)===null||ai===void 0?void 0:ai.length)>0)for(const Qi of ni.removeProperties)Object.prototype.hasOwnProperty.call(ei.properties,Qi)&&delete ei.properties[Qi];if(((Di=ni.addOrUpdateProperties)===null||Di===void 0?void 0:Di.length)>0)for(const{key:Qi,value:hr}of ni.addOrUpdateProperties)ei.properties[Qi]=hr}}(this._dataUpdateable,Me.dataDiff,Le),Ge(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ge(new Error(`Cannot update existing geojson data in ${Me.source}`)):Ge(new Error(`Input data given to '${Me.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},xe&&(this.loadGeoJSON=xe)}loadData(Se,ce){var ye;(ye=this._pendingRequest)===null||ye===void 0||ye.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const xe=!!(Se&&Se.request&&Se.request.collectResourceTiming)&&new D.RequestPerformance(Se.request);this._pendingCallback=ce,this._pendingRequest=this.loadGeoJSON(Se,(Me,Ge)=>{if(delete this._pendingCallback,delete this._pendingRequest,Me||!Ge)return ce(Me);if(typeof Ge!="object")return ce(new Error(`Input data given to '${Se.source}' is not a valid GeoJSON object.`));{We(Ge,!0);try{if(Se.filter){const Ke=D.createExpression(Se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ke.result==="error")throw new Error(Ke.value.map(_t=>`${_t.key}: ${_t.message}`).join(", "));Ge={type:"FeatureCollection",features:Ge.features.filter(_t=>Ke.value.evaluate({zoom:0},_t))}}this._geoJSONIndex=Se.cluster?new se(function({superclusterOptions:Ke,clusterProperties:st}){if(!st||!Ke)return Ke;const _t={},xt={},kt={accumulated:null,zoom:0},ai={properties:null},Di=Object.keys(st);for(const ni of Di){const[ei,Ui]=st[ni],Qi=D.createExpression(Ui),hr=D.createExpression(typeof ei=="string"?[ei,["accumulated"],["get",ni]]:ei);_t[ni]=Qi.value,xt[ni]=hr.value}return Ke.map=ni=>{ai.properties=ni;const ei={};for(const Ui of Di)ei[Ui]=_t[Ui].evaluate(kt,ai);return ei},Ke.reduce=(ni,ei)=>{ai.properties=ei;for(const Ui of Di)kt.accumulated=ni[Ui],ni[Ui]=xt[Ui].evaluate(kt,ai)},Ke}(Se)).load(Ge.features):function(Ke,st){return new $i(Ke,st)}(Ge,Se.geojsonVtOptions)}catch(Ke){return ce(Ke)}this.loaded={};const Le={};if(xe){const Ke=xe.finish();Ke&&(Le.resourceTiming={},Le.resourceTiming[Se.source]=JSON.parse(JSON.stringify(Ke)))}ce(null,Le)}})}reloadTile(Se,ce){const ye=this.loaded;return ye&&ye[Se.uid]?super.reloadTile(Se,ce):this.loadTile(Se,ce)}removeSource(Se,ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ce()}getClusterExpansionZoom(Se,ce){try{ce(null,this._geoJSONIndex.getClusterExpansionZoom(Se.clusterId))}catch(ye){ce(ye)}}getClusterChildren(Se,ce){try{ce(null,this._geoJSONIndex.getChildren(Se.clusterId))}catch(ye){ce(ye)}}getClusterLeaves(Se,ce){try{ce(null,this._geoJSONIndex.getLeaves(Se.clusterId,Se.limit,Se.offset))}catch(ye){ce(ye)}}}class $r{constructor(Se){this.self=Se,this.actor=new D.Actor(Se,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Ue,geojson:Qs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ce,ye)=>{if(this.workerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.workerSourceTypes[ce]=ye},this.self.registerRTLTextPlugin=ce=>{if(D.plugin.isParsed())throw new Error("RTL text plugin already registered.");D.plugin.applyArabicShaping=ce.applyArabicShaping,D.plugin.processBidirectionalText=ce.processBidirectionalText,D.plugin.processStyledBidirectionalText=ce.processStyledBidirectionalText}}setReferrer(Se,ce){this.referrer=ce}setImages(Se,ce,ye){this.availableImages[Se]=ce;for(const xe in this.workerSources[Se]){const Me=this.workerSources[Se][xe];for(const Ge in Me)Me[Ge].availableImages=ce}ye()}setLayers(Se,ce,ye){this.getLayerIndex(Se).replace(ce),ye()}updateLayers(Se,ce,ye){this.getLayerIndex(Se).update(ce.layers,ce.removedIds),ye()}loadTile(Se,ce,ye){this.getWorkerSource(Se,ce.type,ce.source).loadTile(ce,ye)}loadDEMTile(Se,ce,ye){this.getDEMWorkerSource(Se,ce.source).loadTile(ce,ye)}reloadTile(Se,ce,ye){this.getWorkerSource(Se,ce.type,ce.source).reloadTile(ce,ye)}abortTile(Se,ce,ye){this.getWorkerSource(Se,ce.type,ce.source).abortTile(ce,ye)}removeTile(Se,ce,ye){this.getWorkerSource(Se,ce.type,ce.source).removeTile(ce,ye)}removeDEMTile(Se,ce){this.getDEMWorkerSource(Se,ce.source).removeTile(ce)}removeSource(Se,ce,ye){if(!this.workerSources[Se]||!this.workerSources[Se][ce.type]||!this.workerSources[Se][ce.type][ce.source])return;const xe=this.workerSources[Se][ce.type][ce.source];delete this.workerSources[Se][ce.type][ce.source],xe.removeSource!==void 0?xe.removeSource(ce,ye):ye()}loadWorkerSource(Se,ce,ye){try{this.self.importScripts(ce.url),ye()}catch(xe){ye(xe.toString())}}syncRTLPluginState(Se,ce,ye){try{D.plugin.setState(ce);const xe=D.plugin.getPluginURL();if(D.plugin.isLoaded()&&!D.plugin.isParsed()&&xe!=null){this.self.importScripts(xe);const Me=D.plugin.isParsed();ye(Me?void 0:new Error(`RTL Text Plugin failed to import scripts from ${xe}`),Me)}}catch(xe){ye(xe.toString())}}getAvailableImages(Se){let ce=this.availableImages[Se];return ce||(ce=[]),ce}getLayerIndex(Se){let ce=this.layerIndexes[Se];return ce||(ce=this.layerIndexes[Se]=new ne),ce}getWorkerSource(Se,ce,ye){if(this.workerSources[Se]||(this.workerSources[Se]={}),this.workerSources[Se][ce]||(this.workerSources[Se][ce]={}),!this.workerSources[Se][ce][ye]){const xe={send:(Me,Ge,Le)=>{this.actor.send(Me,Ge,Le,Se)}};this.workerSources[Se][ce][ye]=new this.workerSourceTypes[ce](xe,this.getLayerIndex(Se),this.getAvailableImages(Se))}return this.workerSources[Se][ce][ye]}getDEMWorkerSource(Se,ce){return this.demWorkerSources[Se]||(this.demWorkerSources[Se]={}),this.demWorkerSources[Se][ce]||(this.demWorkerSources[Se][ce]=new ze),this.demWorkerSources[Se][ce]}}return D.isWorker()&&(self.worker=new $r(self)),$r}),Y(["./shared"],function(D){var ne="3.3.1";class Ae{static testProp(x){if(!Ae.docStyle)return x[0];for(let Q=0;Q<x.length;Q++)if(x[Q]in Ae.docStyle)return x[Q];return x[0]}static create(x,Q,G){const X=window.document.createElement(x);return Q!==void 0&&(X.className=Q),G&&G.appendChild(X),X}static createNS(x,Q){return window.document.createElementNS(x,Q)}static disableDrag(){Ae.docStyle&&Ae.selectProp&&(Ae.userSelect=Ae.docStyle[Ae.selectProp],Ae.docStyle[Ae.selectProp]="none")}static enableDrag(){Ae.docStyle&&Ae.selectProp&&(Ae.docStyle[Ae.selectProp]=Ae.userSelect)}static setTransform(x,Q){x.style[Ae.transformProp]=Q}static addEventListener(x,Q,G,X={}){x.addEventListener(Q,G,"passive"in X?X:X.capture)}static removeEventListener(x,Q,G,X={}){x.removeEventListener(Q,G,"passive"in X?X:X.capture)}static suppressClickInternal(x){x.preventDefault(),x.stopPropagation(),window.removeEventListener("click",Ae.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Ae.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Ae.suppressClickInternal,!0)},0)}static mousePos(x,Q){const G=x.getBoundingClientRect();return new D.Point(Q.clientX-G.left-x.clientLeft,Q.clientY-G.top-x.clientTop)}static touchPos(x,Q){const G=x.getBoundingClientRect(),X=[];for(let te=0;te<Q.length;te++)X.push(new D.Point(Q[te].clientX-G.left-x.clientLeft,Q[te].clientY-G.top-x.clientTop));return X}static mouseButton(x){return x.button}static remove(x){x.parentNode&&x.parentNode.removeChild(x)}}Ae.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Ae.selectProp=Ae.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Ae.transformProp=Ae.testProp(["transform","WebkitTransform"]);const fe={supported:!1,testSupport:function(J){!Ue&&Be&&(ze?Re(J):ge=J)}};let ge,Be,Ue=!1,ze=!1;function Re(J){const x=J.createTexture();J.bindTexture(J.TEXTURE_2D,x);try{if(J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,Be),J.isContextLost())return;fe.supported=!0}catch{}J.deleteTexture(x),Ue=!0}var $e,We;typeof document<"u"&&(Be=document.createElement("img"),Be.onload=function(){ge&&Re(ge),ge=null,ze=!0},Be.onerror=function(){Ue=!0,ge=null},Be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(J){let x,Q,G,X;J.resetRequestQueue=()=>{x=[],Q=0,G=0,X={}},J.addThrottleControl=ve=>{const Ce=G++;return X[Ce]=ve,Ce},J.removeThrottleControl=ve=>{delete X[ve],he()},J.getImage=(ve,Ce,Ie=!0)=>{fe.supported&&(ve.headers||(ve.headers={}),ve.headers.accept="image/webp,*/*");const Qe={requestParameters:ve,supportImageRefresh:Ie,callback:Ce,cancelled:!1,completed:!1,cancel:()=>{Qe.completed||Qe.cancelled||(Qe.cancelled=!0,Qe.innerRequest&&(Qe.innerRequest.cancel(),Q--),he())}};return x.push(Qe),he(),Qe};const te=ve=>{const{requestParameters:Ce,supportImageRefresh:Ie,callback:Qe}=ve;return D.extend(Ce,{type:"image"}),(Ie!==!1||D.isWorker()||D.getProtocolAction(Ce.url)||Ce.headers&&!Object.keys(Ce.headers).reduce((Je,Ze)=>Je&&Ze==="accept",!0)?D.makeRequest:pe)(Ce,(Je,Ze,rt,Ye)=>{le(ve,Qe,Je,Ze,rt,Ye)})},le=(ve,Ce,Ie,Qe,Je,Ze)=>{Ie?Ce(Ie):Qe instanceof HTMLImageElement||D.isImageBitmap(Qe)?Ce(null,Qe):Qe&&((rt,Ye)=>{typeof createImageBitmap=="function"?D.arrayBufferToImageBitmap(rt,Ye):D.arrayBufferToImage(rt,Ye)})(Qe,(rt,Ye)=>{rt!=null?Ce(rt):Ye!=null&&Ce(null,Ye,{cacheControl:Je,expires:Ze})}),ve.cancelled||(ve.completed=!0,Q--,he())},he=()=>{const ve=(()=>{const Ce=Object.keys(X);let Ie=!1;if(Ce.length>0){for(const Qe of Ce)if(Ie=X[Qe](),Ie)break}return Ie})()?D.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:D.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Ce=Q;Ce<ve&&x.length>0;Ce++){const Ie=x.shift();if(Ie.cancelled){Ce--;continue}const Qe=te(Ie);Q++,Ie.innerRequest=Qe}},pe=(ve,Ce)=>{const Ie=new Image,Qe=ve.url;let Je=!1;const Ze=ve.credentials;return Ze&&Ze==="include"?Ie.crossOrigin="use-credentials":(Ze&&Ze==="same-origin"||!D.sameOrigin(Qe))&&(Ie.crossOrigin="anonymous"),Ie.fetchPriority="high",Ie.onload=()=>{Ce(null,Ie),Ie.onerror=Ie.onload=null},Ie.onerror=()=>{Je||Ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Ie.onerror=Ie.onload=null},Ie.src=Qe,{cancel:()=>{Je=!0,Ie.src=""}}}}($e||($e={})),$e.resetRequestQueue(),function(J){J.Glyphs="Glyphs",J.Image="Image",J.Source="Source",J.SpriteImage="SpriteImage",J.SpriteJSON="SpriteJSON",J.Style="Style",J.Tile="Tile",J.Unknown="Unknown"}(We||(We={}));class ut{constructor(x){this._transformRequestFn=x}transformRequest(x,Q){return this._transformRequestFn&&this._transformRequestFn(x,Q)||{url:x}}normalizeSpriteURL(x,Q,G){const X=function(te){const le=te.match(et);if(!le)throw new Error(`Unable to parse URL "${te}"`);return{protocol:le[1],authority:le[2],path:le[3]||"/",params:le[4]?le[4].split("&"):[]}}(x);return X.path+=`${Q}${G}`,function(te){const le=te.params.length?`?${te.params.join("&")}`:"";return`${te.protocol}://${te.authority}${te.path}${le}`}(X)}setTransformRequest(x){this._transformRequestFn=x}}const et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function At(J){var x=new D.ARRAY_TYPE(3);return x[0]=J[0],x[1]=J[1],x[2]=J[2],x}var nt,ft=function(J,x,Q){return J[0]=x[0]-Q[0],J[1]=x[1]-Q[1],J[2]=x[2]-Q[2],J};nt=new D.ARRAY_TYPE(3),D.ARRAY_TYPE!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0);var Tt=function(J){var x=J[0],Q=J[1];return x*x+Q*Q};function qt(J){const x=[];if(typeof J=="string")x.push({id:"default",url:J});else if(J&&J.length>0){const Q=[];for(const{id:G,url:X}of J){const te=`${G}${X}`;Q.indexOf(te)===-1&&(Q.push(te),x.push({id:G,url:X}))}}return x}function Vt(J,x,Q,G,X){if(G)return void J(G);if(X!==Object.values(x).length||X!==Object.values(Q).length)return;const te={};for(const le in x){te[le]={};const he=D.browser.getImageCanvasContext(Q[le]),pe=x[le];for(const ve in pe){const{width:Ce,height:Ie,x:Qe,y:Je,sdf:Ze,pixelRatio:rt,stretchX:Ye,stretchY:dt,content:Bt}=pe[ve];te[le][ve]={data:null,pixelRatio:rt,sdf:Ze,stretchX:Ye,stretchY:dt,content:Bt,spriteData:{width:Ce,height:Ie,x:Qe,y:Je,context:he}}}}J(null,te)}(function(){var J=new D.ARRAY_TYPE(2);D.ARRAY_TYPE!=Float32Array&&(J[0]=0,J[1]=0)})();class vt{constructor(x,Q,G,X){this.context=x,this.format=G,this.texture=x.gl.createTexture(),this.update(Q,X)}update(x,Q,G){const{width:X,height:te}=x,le=!(this.size&&this.size[0]===X&&this.size[1]===te||G),{context:he}=this,{gl:pe}=he;if(this.useMipmap=!!(Q&&Q.useMipmap),pe.bindTexture(pe.TEXTURE_2D,this.texture),he.pixelStoreUnpackFlipY.set(!1),he.pixelStoreUnpack.set(1),he.pixelStoreUnpackPremultiplyAlpha.set(this.format===pe.RGBA&&(!Q||Q.premultiply!==!1)),le)this.size=[X,te],x instanceof HTMLImageElement||x instanceof HTMLCanvasElement||x instanceof HTMLVideoElement||x instanceof ImageData||D.isImageBitmap(x)?pe.texImage2D(pe.TEXTURE_2D,0,this.format,this.format,pe.UNSIGNED_BYTE,x):pe.texImage2D(pe.TEXTURE_2D,0,this.format,X,te,0,this.format,pe.UNSIGNED_BYTE,x.data);else{const{x:ve,y:Ce}=G||{x:0,y:0};x instanceof HTMLImageElement||x instanceof HTMLCanvasElement||x instanceof HTMLVideoElement||x instanceof ImageData||D.isImageBitmap(x)?pe.texSubImage2D(pe.TEXTURE_2D,0,ve,Ce,pe.RGBA,pe.UNSIGNED_BYTE,x):pe.texSubImage2D(pe.TEXTURE_2D,0,ve,Ce,X,te,pe.RGBA,pe.UNSIGNED_BYTE,x.data)}this.useMipmap&&this.isSizePowerOfTwo()&&pe.generateMipmap(pe.TEXTURE_2D)}bind(x,Q,G){const{context:X}=this,{gl:te}=X;te.bindTexture(te.TEXTURE_2D,this.texture),G!==te.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(G=te.LINEAR),x!==this.filter&&(te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,x),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,G||x),this.filter=x),Q!==this.wrap&&(te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,Q),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,Q),this.wrap=Q)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:x}=this.context;x.deleteTexture(this.texture),this.texture=null}}function Ut(J){const{userImage:x}=J;return!!(x&&x.render&&x.render())&&(J.data.replace(new Uint8Array(x.data.buffer)),!0)}class Pt extends D.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new D.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(x){if(this.loaded!==x&&(this.loaded=x,x)){for(const{ids:Q,callback:G}of this.requestors)this._notify(Q,G);this.requestors=[]}}getImage(x){const Q=this.images[x];if(Q&&!Q.data&&Q.spriteData){const G=Q.spriteData;Q.data=new D.RGBAImage({width:G.width,height:G.height},G.context.getImageData(G.x,G.y,G.width,G.height).data),Q.spriteData=null}return Q}addImage(x,Q){if(this.images[x])throw new Error(`Image id ${x} already exist, use updateImage instead`);this._validate(x,Q)&&(this.images[x]=Q)}_validate(x,Q){let G=!0;const X=Q.data||Q.spriteData;return this._validateStretch(Q.stretchX,X&&X.width)||(this.fire(new D.ErrorEvent(new Error(`Image "${x}" has invalid "stretchX" value`))),G=!1),this._validateStretch(Q.stretchY,X&&X.height)||(this.fire(new D.ErrorEvent(new Error(`Image "${x}" has invalid "stretchY" value`))),G=!1),this._validateContent(Q.content,Q)||(this.fire(new D.ErrorEvent(new Error(`Image "${x}" has invalid "content" value`))),G=!1),G}_validateStretch(x,Q){if(!x)return!0;let G=0;for(const X of x){if(X[0]<G||X[1]<X[0]||Q<X[1])return!1;G=X[1]}return!0}_validateContent(x,Q){if(!x)return!0;if(x.length!==4)return!1;const G=Q.spriteData,X=G&&G.width||Q.data.width,te=G&&G.height||Q.data.height;return!(x[0]<0||X<x[0]||x[1]<0||te<x[1]||x[2]<0||X<x[2]||x[3]<0||te<x[3]||x[2]<x[0]||x[3]<x[1])}updateImage(x,Q,G=!0){const X=this.getImage(x);if(G&&(X.data.width!==Q.data.width||X.data.height!==Q.data.height))throw new Error(`size mismatch between old image (${X.data.width}x${X.data.height}) and new image (${Q.data.width}x${Q.data.height}).`);Q.version=X.version+1,this.images[x]=Q,this.updatedImages[x]=!0}removeImage(x){const Q=this.images[x];delete this.images[x],delete this.patterns[x],Q.userImage&&Q.userImage.onRemove&&Q.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(x,Q){let G=!0;if(!this.isLoaded())for(const X of x)this.images[X]||(G=!1);this.isLoaded()||G?this._notify(x,Q):this.requestors.push({ids:x,callback:Q})}_notify(x,Q){const G={};for(const X of x){let te=this.getImage(X);te||(this.fire(new D.Event("styleimagemissing",{id:X})),te=this.getImage(X)),te?G[X]={data:te.data.clone(),pixelRatio:te.pixelRatio,sdf:te.sdf,version:te.version,stretchX:te.stretchX,stretchY:te.stretchY,content:te.content,hasRenderCallback:!!(te.userImage&&te.userImage.render)}:D.warnOnce(`Image "${X}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}Q(null,G)}getPixelSize(){const{width:x,height:Q}=this.atlasImage;return{width:x,height:Q}}getPattern(x){const Q=this.patterns[x],G=this.getImage(x);if(!G)return null;if(Q&&Q.position.version===G.version)return Q.position;if(Q)Q.position.version=G.version;else{const X={w:G.data.width+2,h:G.data.height+2,x:0,y:0},te=new D.ImagePosition(X,G);this.patterns[x]={bin:X,position:te}}return this._updatePatternAtlas(),this.patterns[x].position}bind(x){const Q=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new vt(x,this.atlasImage,Q.RGBA),this.atlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}_updatePatternAtlas(){const x=[];for(const te in this.patterns)x.push(this.patterns[te].bin);const{w:Q,h:G}=D.potpack(x),X=this.atlasImage;X.resize({width:Q||1,height:G||1});for(const te in this.patterns){const{bin:le}=this.patterns[te],he=le.x+1,pe=le.y+1,ve=this.getImage(te).data,Ce=ve.width,Ie=ve.height;D.RGBAImage.copy(ve,X,{x:0,y:0},{x:he,y:pe},{width:Ce,height:Ie}),D.RGBAImage.copy(ve,X,{x:0,y:Ie-1},{x:he,y:pe-1},{width:Ce,height:1}),D.RGBAImage.copy(ve,X,{x:0,y:0},{x:he,y:pe+Ie},{width:Ce,height:1}),D.RGBAImage.copy(ve,X,{x:Ce-1,y:0},{x:he-1,y:pe},{width:1,height:Ie}),D.RGBAImage.copy(ve,X,{x:0,y:0},{x:he+Ce,y:pe},{width:1,height:Ie})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(x){for(const Q of x){if(this.callbackDispatchedThisFrame[Q])continue;this.callbackDispatchedThisFrame[Q]=!0;const G=this.getImage(Q);G||D.warnOnce(`Image with ID: "${Q}" was not found`),Ut(G)&&this.updateImage(Q,G)}}}const Yt=1e20;function Ai(J,x,Q,G,X,te,le,he,pe){for(let ve=x;ve<x+G;ve++)Ri(J,Q*te+ve,te,X,le,he,pe);for(let ve=Q;ve<Q+X;ve++)Ri(J,ve*te+x,1,G,le,he,pe)}function Ri(J,x,Q,G,X,te,le){te[0]=0,le[0]=-Yt,le[1]=Yt,X[0]=J[x];for(let he=1,pe=0,ve=0;he<G;he++){X[he]=J[x+he*Q];const Ce=he*he;do{const Ie=te[pe];ve=(X[he]-X[Ie]+Ce-Ie*Ie)/(he-Ie)/2}while(ve<=le[pe]&&--pe>-1);pe++,te[pe]=he,le[pe]=ve,le[pe+1]=Yt}for(let he=0,pe=0;he<G;he++){for(;le[pe+1]<he;)pe++;const ve=te[pe],Ce=he-ve;J[x+he*Q]=X[ve]+Ce*Ce}}class Ei{constructor(x,Q){this.requestManager=x,this.localIdeographFontFamily=Q,this.entries={}}setURL(x){this.url=x}getGlyphs(x,Q){const G=[];for(const X in x)for(const te of x[X])G.push({stack:X,id:te});D.asyncAll(G,({stack:X,id:te},le)=>{let he=this.entries[X];he||(he=this.entries[X]={glyphs:{},requests:{},ranges:{}});let pe=he.glyphs[te];if(pe!==void 0)return void le(null,{stack:X,id:te,glyph:pe});if(pe=this._tinySDF(he,X,te),pe)return he.glyphs[te]=pe,void le(null,{stack:X,id:te,glyph:pe});const ve=Math.floor(te/256);if(256*ve>65535)return void le(new Error("glyphs > 65535 not supported"));if(he.ranges[ve])return void le(null,{stack:X,id:te,glyph:pe});if(!this.url)return void le(new Error("glyphsUrl is not set"));let Ce=he.requests[ve];Ce||(Ce=he.requests[ve]=[],Ei.loadGlyphRange(X,ve,this.url,this.requestManager,(Ie,Qe)=>{if(Qe){for(const Je in Qe)this._doesCharSupportLocalGlyph(+Je)||(he.glyphs[+Je]=Qe[+Je]);he.ranges[ve]=!0}for(const Je of Ce)Je(Ie,Qe);delete he.requests[ve]})),Ce.push((Ie,Qe)=>{Ie?le(Ie):Qe&&le(null,{stack:X,id:te,glyph:Qe[te]||null})})},(X,te)=>{if(X)Q(X);else if(te){const le={};for(const{stack:he,id:pe,glyph:ve}of te)(le[he]||(le[he]={}))[pe]=ve&&{id:ve.id,bitmap:ve.bitmap.clone(),metrics:ve.metrics};Q(null,le)}})}_doesCharSupportLocalGlyph(x){return!!this.localIdeographFontFamily&&(D.unicodeBlockLookup["CJK Unified Ideographs"](x)||D.unicodeBlockLookup["Hangul Syllables"](x)||D.unicodeBlockLookup.Hiragana(x)||D.unicodeBlockLookup.Katakana(x))}_tinySDF(x,Q,G){const X=this.localIdeographFontFamily;if(!X||!this._doesCharSupportLocalGlyph(G))return;let te=x.tinySDF;if(!te){let he="400";/bold/i.test(Q)?he="900":/medium/i.test(Q)?he="500":/light/i.test(Q)&&(he="200"),te=x.tinySDF=new Ei.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:X,fontWeight:he})}const le=te.draw(String.fromCharCode(G));return{id:G,bitmap:new D.AlphaImage({width:le.width||30,height:le.height||30},le.data),metrics:{width:le.glyphWidth||24,height:le.glyphHeight||24,left:le.glyphLeft||0,top:le.glyphTop-27||-8,advance:le.glyphAdvance||24}}}}Ei.loadGlyphRange=function(J,x,Q,G,X){const te=256*x,le=te+255,he=G.transformRequest(Q.replace("{fontstack}",J).replace("{range}",`${te}-${le}`),We.Glyphs);D.getArrayBuffer(he,(pe,ve)=>{if(pe)X(pe);else if(ve){const Ce={};for(const Ie of D.parseGlyphPbf(ve))Ce[Ie.id]=Ie;X(null,Ce)}})},Ei.TinySDF=class{constructor({fontSize:J=24,buffer:x=3,radius:Q=8,cutoff:G=.25,fontFamily:X="sans-serif",fontWeight:te="normal",fontStyle:le="normal"}={}){this.buffer=x,this.cutoff=G,this.radius=Q;const he=this.size=J+4*x,pe=this._createCanvas(he),ve=this.ctx=pe.getContext("2d",{willReadFrequently:!0});ve.font=`${le} ${te} ${J}px ${X}`,ve.textBaseline="alphabetic",ve.textAlign="left",ve.fillStyle="black",this.gridOuter=new Float64Array(he*he),this.gridInner=new Float64Array(he*he),this.f=new Float64Array(he),this.z=new Float64Array(he+1),this.v=new Uint16Array(he)}_createCanvas(J){const x=document.createElement("canvas");return x.width=x.height=J,x}draw(J){const{width:x,actualBoundingBoxAscent:Q,actualBoundingBoxDescent:G,actualBoundingBoxLeft:X,actualBoundingBoxRight:te}=this.ctx.measureText(J),le=Math.ceil(Q),he=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(te-X))),pe=Math.min(this.size-this.buffer,le+Math.ceil(G)),ve=he+2*this.buffer,Ce=pe+2*this.buffer,Ie=Math.max(ve*Ce,0),Qe=new Uint8ClampedArray(Ie),Je={data:Qe,width:ve,height:Ce,glyphWidth:he,glyphHeight:pe,glyphTop:le,glyphLeft:0,glyphAdvance:x};if(he===0||pe===0)return Je;const{ctx:Ze,buffer:rt,gridInner:Ye,gridOuter:dt}=this;Ze.clearRect(rt,rt,he,pe),Ze.fillText(J,rt,rt+le);const Bt=Ze.getImageData(rt,rt,he,pe);dt.fill(Yt,0,Ie),Ye.fill(0,0,Ie);for(let ot=0;ot<pe;ot++)for(let gt=0;gt<he;gt++){const It=Bt.data[4*(ot*he+gt)+3]/255;if(It===0)continue;const St=(ot+rt)*ve+gt+rt;if(It===1)dt[St]=0,Ye[St]=Yt;else{const Lt=.5-It;dt[St]=Lt>0?Lt*Lt:0,Ye[St]=Lt<0?Lt*Lt:0}}Ai(dt,0,0,ve,Ce,ve,this.f,this.v,this.z),Ai(Ye,rt,rt,he,pe,ve,this.f,this.v,this.z);for(let ot=0;ot<Ie;ot++){const gt=Math.sqrt(dt[ot])-Math.sqrt(Ye[ot]);Qe[ot]=Math.round(255-255*(gt/this.radius+this.cutoff))}return Je}};class Li{constructor(){this.specification=D.v8Spec.light.position}possiblyEvaluate(x,Q){return D.sphericalToCartesian(x.expression.evaluate(Q))}interpolate(x,Q,G){return{x:D.interpolate.number(x.x,Q.x,G),y:D.interpolate.number(x.y,Q.y,G),z:D.interpolate.number(x.z,Q.z,G)}}}let Yi,vi;class d extends D.Evented{constructor(x){super(),Yi=Yi||new D.Properties({anchor:new D.DataConstantProperty(D.v8Spec.light.anchor),position:new Li,color:new D.DataConstantProperty(D.v8Spec.light.color),intensity:new D.DataConstantProperty(D.v8Spec.light.intensity)}),this._transitionable=new D.Transitionable(Yi),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(x,Q={}){if(!this._validate(D.validateLight,x,Q))for(const G in x){const X=x[G];G.endsWith("-transition")?this._transitionable.setTransition(G.slice(0,-11),X):this._transitionable.setValue(G,X)}}updateTransitions(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(x){this.properties=this._transitioning.possiblyEvaluate(x)}_validate(x,Q,G){return(!G||G.validate!==!1)&&D.emitValidationErrors(this,x.call(D.validateStyle,D.extend({value:Q,style:{glyphs:!0,sprite:!0},styleSpec:D.v8Spec})))}}class w{constructor(x,Q){this.width=x,this.height=Q,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(x,Q){const G=x.join(",")+String(Q);return this.dashEntry[G]||(this.dashEntry[G]=this.addDash(x,Q)),this.dashEntry[G]}getDashRanges(x,Q,G){const X=[];let te=x.length%2==1?-x[x.length-1]*G:0,le=x[0]*G,he=!0;X.push({left:te,right:le,isDash:he,zeroLength:x[0]===0});let pe=x[0];for(let ve=1;ve<x.length;ve++){he=!he;const Ce=x[ve];te=pe*G,pe+=Ce,le=pe*G,X.push({left:te,right:le,isDash:he,zeroLength:Ce===0})}return X}addRoundDash(x,Q,G){const X=Q/2;for(let te=-G;te<=G;te++){const le=this.width*(this.nextRow+G+te);let he=0,pe=x[he];for(let ve=0;ve<this.width;ve++){ve/pe.right>1&&(pe=x[++he]);const Ce=Math.abs(ve-pe.left),Ie=Math.abs(ve-pe.right),Qe=Math.min(Ce,Ie);let Je;const Ze=te/G*(X+1);if(pe.isDash){const rt=X-Math.abs(Ze);Je=Math.sqrt(Qe*Qe+rt*rt)}else Je=X-Math.sqrt(Qe*Qe+Ze*Ze);this.data[le+ve]=Math.max(0,Math.min(255,Je+128))}}}addRegularDash(x){for(let he=x.length-1;he>=0;--he){const pe=x[he],ve=x[he+1];pe.zeroLength?x.splice(he,1):ve&&ve.isDash===pe.isDash&&(ve.left=pe.left,x.splice(he,1))}const Q=x[0],G=x[x.length-1];Q.isDash===G.isDash&&(Q.left=G.left-this.width,G.right=Q.right+this.width);const X=this.width*this.nextRow;let te=0,le=x[te];for(let he=0;he<this.width;he++){he/le.right>1&&(le=x[++te]);const pe=Math.abs(he-le.left),ve=Math.abs(he-le.right),Ce=Math.min(pe,ve);this.data[X+he]=Math.max(0,Math.min(255,(le.isDash?Ce:-Ce)+128))}}addDash(x,Q){const G=Q?7:0,X=2*G+1;if(this.nextRow+X>this.height)return D.warnOnce("LineAtlas out of space"),null;let te=0;for(let he=0;he<x.length;he++)te+=x[he];if(te!==0){const he=this.width/te,pe=this.getDashRanges(x,this.width,he);Q?this.addRoundDash(pe,he,G):this.addRegularDash(pe)}const le={y:(this.nextRow+G+.5)/this.height,height:2*G/this.height,width:te};return this.nextRow+=X,this.dirty=!0,le}bind(x){const Q=x.gl;this.texture?(Q.bindTexture(Q.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Q.texSubImage2D(Q.TEXTURE_2D,0,0,0,this.width,this.height,Q.ALPHA,Q.UNSIGNED_BYTE,this.data))):(this.texture=Q.createTexture(),Q.bindTexture(Q.TEXTURE_2D,this.texture),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.REPEAT),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.REPEAT),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),Q.texImage2D(Q.TEXTURE_2D,0,Q.ALPHA,this.width,this.height,0,Q.ALPHA,Q.UNSIGNED_BYTE,this.data))}}class I{constructor(x,Q,G){this.workerPool=x,this.actors=[],this.currentActor=0,this.id=G;const X=this.workerPool.acquire(G);for(let te=0;te<X.length;te++){const le=new I.Actor(X[te],Q,G);le.name=`Worker ${te}`,this.actors.push(le)}if(!this.actors.length)throw new Error("No actors found")}broadcast(x,Q,G){D.asyncAll(this.actors,(X,te)=>{X.send(x,Q,te)},G=G||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(x=!0){this.actors.forEach(Q=>{Q.remove()}),this.actors=[],x&&this.workerPool.release(this.id)}}function k(J,x,Q){const G=function(X,te){if(X)return Q(X);if(te){const le=D.pick(D.extend(te,J),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(le.vectorLayers=te.vector_layers,le.vectorLayerIds=le.vectorLayers.map(he=>he.id)),Q(null,le)}};return J.url?D.getJSON(x.transformRequest(J.url,We.Source),G):D.browser.frame(()=>G(null,J))}I.Actor=D.Actor;class R{constructor(x,Q){x&&(Q?this.setSouthWest(x).setNorthEast(Q):Array.isArray(x)&&(x.length===4?this.setSouthWest([x[0],x[1]]).setNorthEast([x[2],x[3]]):this.setSouthWest(x[0]).setNorthEast(x[1])))}setNorthEast(x){return this._ne=x instanceof D.LngLat?new D.LngLat(x.lng,x.lat):D.LngLat.convert(x),this}setSouthWest(x){return this._sw=x instanceof D.LngLat?new D.LngLat(x.lng,x.lat):D.LngLat.convert(x),this}extend(x){const Q=this._sw,G=this._ne;let X,te;if(x instanceof D.LngLat)X=x,te=x;else{if(!(x instanceof R))return Array.isArray(x)?x.length===4||x.every(Array.isArray)?this.extend(R.convert(x)):this.extend(D.LngLat.convert(x)):x&&("lng"in x||"lon"in x)&&"lat"in x?this.extend(D.LngLat.convert(x)):this;if(X=x._sw,te=x._ne,!X||!te)return this}return Q||G?(Q.lng=Math.min(X.lng,Q.lng),Q.lat=Math.min(X.lat,Q.lat),G.lng=Math.max(te.lng,G.lng),G.lat=Math.max(te.lat,G.lat)):(this._sw=new D.LngLat(X.lng,X.lat),this._ne=new D.LngLat(te.lng,te.lat)),this}getCenter(){return new D.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new D.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new D.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(x){const{lng:Q,lat:G}=D.LngLat.convert(x);let X=this._sw.lng<=Q&&Q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(X=this._sw.lng>=Q&&Q>=this._ne.lng),this._sw.lat<=G&&G<=this._ne.lat&&X}static convert(x){return x instanceof R?x:x&&new R(x)}static fromLngLat(x,Q=0){const G=360*Q/40075017,X=G/Math.cos(Math.PI/180*x.lat);return new R(new D.LngLat(x.lng-X,x.lat-G),new D.LngLat(x.lng+X,x.lat+G))}}class W{constructor(x,Q,G){this.bounds=R.convert(this.validateBounds(x)),this.minzoom=Q||0,this.maxzoom=G||24}validateBounds(x){return Array.isArray(x)&&x.length===4?[Math.max(-180,x[0]),Math.max(-90,x[1]),Math.min(180,x[2]),Math.min(90,x[3])]:[-180,-90,180,90]}contains(x){const Q=Math.pow(2,x.z),G=Math.floor(D.mercatorXfromLng(this.bounds.getWest())*Q),X=Math.floor(D.mercatorYfromLat(this.bounds.getNorth())*Q),te=Math.ceil(D.mercatorXfromLng(this.bounds.getEast())*Q),le=Math.ceil(D.mercatorYfromLat(this.bounds.getSouth())*Q);return x.x>=G&&x.x<te&&x.y>=X&&x.y<le}}class se extends D.Evented{constructor(x,Q,G,X){if(super(),this.load=()=>{this._loaded=!1,this.fire(new D.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(te,le)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),te?this.fire(new D.ErrorEvent(te)):le&&(D.extend(this,le),le.bounds&&(this.tileBounds=new W(le.bounds,this.minzoom,this.maxzoom)),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>D.extend({},this._options),this.id=x,this.dispatcher=G,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,D.extend(this,D.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=D.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(X)}loaded(){return this._loaded}hasTile(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)}onAdd(x){this.map=x,this.load()}setSourceProperty(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.load()}setTiles(x){return this.setSourceProperty(()=>{this._options.tiles=x}),this}setUrl(x){return this.setSourceProperty(()=>{this.url=x,this._options.url=x}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(x,Q){const G=x.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),X={request:this.map._requestManager.transformRequest(G,We.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function te(le,he){return delete x.request,x.aborted?Q(null):le&&le.status!==404?Q(le):(he&&he.resourceTiming&&(x.resourceTiming=he.resourceTiming),this.map._refreshExpiredTiles&&he&&x.setExpiryData(he),x.loadVectorData(he,this.map.painter),Q(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}X.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=Q:x.request=x.actor.send("reloadTile",X,te.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",X,te.bind(this)))}abortTile(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)}unloadTile(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class oe extends D.Evented{constructor(x,Q,G,X){super(),this.id=x,this.dispatcher=G,this.setEventedParent(X),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=D.extend({type:"raster"},Q),D.extend(this,D.pick(Q,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new D.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(x,Q)=>{this._tileJSONRequest=null,this._loaded=!0,x?this.fire(new D.ErrorEvent(x)):Q&&(D.extend(this,Q),Q.bounds&&(this.tileBounds=new W(Q.bounds,this.minzoom,this.maxzoom)),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(x){this.map=x,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return D.extend({},this._options)}hasTile(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)}loadTile(x,Q){const G=x.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);x.request=$e.getImage(this.map._requestManager.transformRequest(G,We.Tile),(X,te,le)=>{if(delete x.request,x.aborted)x.state="unloaded",Q(null);else if(X)x.state="errored",Q(X);else if(te){this.map._refreshExpiredTiles&&le&&x.setExpiryData(le);const he=this.map.painter.context,pe=he.gl;x.texture=this.map.painter.getTileTexture(te.width),x.texture?x.texture.update(te,{useMipmap:!0}):(x.texture=new vt(he,te,pe.RGBA,{useMipmap:!0}),x.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),he.extTextureFilterAnisotropic&&pe.texParameterf(pe.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax)),x.state="loaded",Q(null)}},this.map._refreshExpiredTiles)}abortTile(x,Q){x.request&&(x.request.cancel(),delete x.request),Q()}unloadTile(x,Q){x.texture&&this.map.painter.saveTileTexture(x.texture),Q()}hasTransition(){return!1}}class ue extends oe{constructor(x,Q,G,X){super(x,Q,G,X),this.type="raster-dem",this.maxzoom=22,this._options=D.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}loadTile(x,Q){const G=x.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function X(te,le){te&&(x.state="errored",Q(te)),le&&(x.dem=le,x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0,x.state="loaded",Q(null))}x.request=$e.getImage(this.map._requestManager.transformRequest(G,We.Tile),(function(te,le){if(delete x.request,x.aborted)x.state="unloaded",Q(null);else if(te)x.state="errored",Q(te);else if(le){this.map._refreshExpiredTiles&&x.setExpiryData(le),delete le.cacheControl,delete le.expires;const he=D.isImageBitmap(le)&&(vi==null&&(vi=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),vi)?le:D.browser.getImageData(le,1),pe={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:he,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",pe,X.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),x.neighboringTiles=this._getNeighboringTiles(x.tileID)}_getNeighboringTiles(x){const Q=x.canonical,G=Math.pow(2,Q.z),X=(Q.x-1+G)%G,te=Q.x===0?x.wrap-1:x.wrap,le=(Q.x+1+G)%G,he=Q.x+1===G?x.wrap+1:x.wrap,pe={};return pe[new D.OverscaledTileID(x.overscaledZ,te,Q.z,X,Q.y).key]={backfilled:!1},pe[new D.OverscaledTileID(x.overscaledZ,he,Q.z,le,Q.y).key]={backfilled:!1},Q.y>0&&(pe[new D.OverscaledTileID(x.overscaledZ,te,Q.z,X,Q.y-1).key]={backfilled:!1},pe[new D.OverscaledTileID(x.overscaledZ,x.wrap,Q.z,Q.x,Q.y-1).key]={backfilled:!1},pe[new D.OverscaledTileID(x.overscaledZ,he,Q.z,le,Q.y-1).key]={backfilled:!1}),Q.y+1<G&&(pe[new D.OverscaledTileID(x.overscaledZ,te,Q.z,X,Q.y+1).key]={backfilled:!1},pe[new D.OverscaledTileID(x.overscaledZ,x.wrap,Q.z,Q.x,Q.y+1).key]={backfilled:!1},pe[new D.OverscaledTileID(x.overscaledZ,he,Q.z,le,Q.y+1).key]={backfilled:!1}),pe}unloadTile(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})}}class we extends D.Evented{constructor(x,Q,G,X){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>D.extend({},this._options,{type:this.type,data:this._data}),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=G.getActor(),this.setEventedParent(X),this._data=Q.data,this._options=D.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,Q.maxzoom!==void 0&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;const te=D.EXTENT/this.tileSize;this.workerOptions=D.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(Q.buffer!==void 0?Q.buffer:128)*te,tolerance:(Q.tolerance!==void 0?Q.tolerance:.375)*te,extent:D.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:Q.clusterMaxZoom!==void 0?Q.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,Q.clusterMinPoints||2),extent:D.EXTENT,radius:(Q.clusterRadius||50)*te,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties,filter:Q.filter},Q.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(x){this.map=x,this.load()}setData(x){return this._data=x,this._updateWorkerData(),this}updateData(x){return this._updateWorkerData(x),this}setClusterOptions(x){return this.workerOptions.cluster=x.cluster,x&&(x.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=x.clusterRadius),x.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=x.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(x,Q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},Q),this}getClusterChildren(x,Q){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},Q),this}getClusterLeaves(x,Q,G,X){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:Q,offset:G},X),this}_updateWorkerData(x){const Q=D.extend({},this.workerOptions);x?Q.dataDiff=x:typeof this._data=="string"?(Q.request=this.map._requestManager.transformRequest(D.browser.resolveURL(this._data),We.Source),Q.request.collectResourceTiming=this._collectResourceTiming):Q.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new D.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,Q,(G,X)=>{if(this._pendingLoads--,this._removed||X&&X.abandoned)return void this.fire(new D.Event("dataabort",{dataType:"source"}));let te=null;if(X&&X.resourceTiming&&X.resourceTiming[this.id]&&(te=X.resourceTiming[this.id].slice(0)),G)return void this.fire(new D.ErrorEvent(G));const le={dataType:"source"};this._collectResourceTiming&&te&&te.length>0&&D.extend(le,{resourceTiming:te}),this.fire(new D.Event("data",{...le,sourceDataType:"metadata"})),this.fire(new D.Event("data",{...le,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(x,Q){const G=x.actor?"reloadTile":"loadTile";x.actor=this.actor;const X={type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};x.request=this.actor.send(G,X,(te,le)=>(delete x.request,x.unloadVectorData(),x.aborted?Q(null):te?Q(te):(x.loadVectorData(le,this.map.painter,G==="reloadTile"),Q(null))))}abortTile(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0}unloadTile(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Te=D.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ve extends D.Evented{constructor(x,Q,G,X){super(),this.load=(te,le)=>{this._loaded=!1,this.fire(new D.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$e.getImage(this.map._requestManager.transformRequest(this.url,We.Image),(he,pe)=>{this._request=null,this._loaded=!0,he?this.fire(new D.ErrorEvent(he)):pe&&(this.image=pe,te&&(this.coordinates=te),le&&le(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const te=this.map.painter.context,le=te.gl;this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=D.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new vt(te,this.image,le.RGBA),this.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE));let he=!1;for(const pe in this.tiles){const ve=this.tiles[pe];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture,he=!0)}he&&this.fire(new D.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=x,this.dispatcher=G,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(X),this.options=Q}loaded(){return this._loaded}updateImage(x){return x.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=x.url,this.load(x.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(x){this.map=x,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(x){this.coordinates=x;const Q=x.map(D.MercatorCoordinate.fromLngLat);this.tileID=function(X){let te=1/0,le=1/0,he=-1/0,pe=-1/0;for(const Qe of X)te=Math.min(te,Qe.x),le=Math.min(le,Qe.y),he=Math.max(he,Qe.x),pe=Math.max(pe,Qe.y);const ve=Math.max(he-te,pe-le),Ce=Math.max(0,Math.floor(-Math.log(ve)/Math.LN2)),Ie=Math.pow(2,Ce);return new D.CanonicalTileID(Ce,Math.floor((te+he)/2*Ie),Math.floor((le+pe)/2*Ie))}(Q),this.minzoom=this.maxzoom=this.tileID.z;const G=Q.map(X=>this.tileID.getTilePoint(X)._round());return this._boundsArray=new D.RasterBoundsArray,this._boundsArray.emplaceBack(G[0].x,G[0].y,0,0),this._boundsArray.emplaceBack(G[1].x,G[1].y,D.EXTENT,0),this._boundsArray.emplaceBack(G[3].x,G[3].y,0,D.EXTENT),this._boundsArray.emplaceBack(G[2].x,G[2].y,D.EXTENT,D.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new D.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(x,Q){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},Q(null)):(x.state="errored",Q(null))}hasTransition(){return!1}}class De extends Ve{constructor(x,Q,G,X){super(x,Q,G,X),this.load=()=>{this._loaded=!1;const te=this.options;this.urls=[];for(const le of te.urls)this.urls.push(this.map._requestManager.transformRequest(le,We.Source).url);D.getVideo(this.urls,(le,he)=>{this._loaded=!0,le?this.fire(new D.ErrorEvent(le)):he&&(this.video=he,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const te=this.map.painter.context,le=te.gl;this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=D.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE),le.texSubImage2D(le.TEXTURE_2D,0,0,0,le.RGBA,le.UNSIGNED_BYTE,this.video)):(this.texture=new vt(te,this.video,le.RGBA),this.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE));let he=!1;for(const pe in this.tiles){const ve=this.tiles[pe];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture,he=!0)}he&&this.fire(new D.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=Q}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(x){if(this.video){const Q=this.video.seekable;x<Q.start(0)||x>Q.end(0)?this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${Q.start(0)} and ${Q.end(0)}-second mark.`))):this.video.currentTime=x}}getVideo(){return this.video}onAdd(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class me extends Ve{constructor(x,Q,G,X){super(x,Q,G,X),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new D.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let te=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,te=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,te=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const le=this.map.painter.context,he=le.gl;this.boundsBuffer||(this.boundsBuffer=le.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=D.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(te||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new vt(le,this.canvas,he.RGBA,{premultiply:!0});let pe=!1;for(const ve in this.tiles){const Ce=this.tiles[ve];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture,pe=!0)}pe&&this.fire(new D.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),Q.coordinates?Array.isArray(Q.coordinates)&&Q.coordinates.length===4&&!Q.coordinates.some(te=>!Array.isArray(te)||te.length!==2||te.some(le=>typeof le!="number"))||this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'missing required property "coordinates"'))),Q.animate&&typeof Q.animate!="boolean"&&this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'optional "animate" property must be a boolean value'))),Q.canvas?typeof Q.canvas=="string"||Q.canvas instanceof HTMLCanvasElement||this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new D.ErrorEvent(new D.ValidationError(`sources.${x}`,null,'missing required property "canvas"'))),this.options=Q,this.animate=Q.animate===void 0||Q.animate}getCanvas(){return this.canvas}onAdd(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const x of[this.canvas.width,this.canvas.height])if(isNaN(x)||x<=0)return!0;return!1}}const ke={},qe=J=>{switch(J){case"geojson":return we;case"image":return Ve;case"raster":return oe;case"raster-dem":return ue;case"vector":return se;case"video":return De;case"canvas":return me}return ke[J]};function lt(J,x){const Q=D.create();return D.translate(Q,Q,[1,1,0]),D.scale(Q,Q,[.5*J.width,.5*J.height,1]),D.multiply(Q,Q,J.calculatePosMatrix(x.toUnwrapped()))}function pt(J,x,Q,G,X,te){const le=function(Ie,Qe,Je){if(Ie)for(const Ze of Ie){const rt=Qe[Ze];if(rt&&rt.source===Je&&rt.type==="fill-extrusion")return!0}else for(const Ze in Qe){const rt=Qe[Ze];if(rt.source===Je&&rt.type==="fill-extrusion")return!0}return!1}(X&&X.layers,x,J.id),he=te.maxPitchScaleFactor(),pe=J.tilesIn(G,he,le);pe.sort(Ft);const ve=[];for(const Ie of pe)ve.push({wrappedTileID:Ie.tileID.wrapped().key,queryResults:Ie.tile.queryRenderedFeatures(x,Q,J._state,Ie.queryGeometry,Ie.cameraQueryGeometry,Ie.scale,X,te,he,lt(J.transform,Ie.tileID))});const Ce=function(Ie){const Qe={},Je={};for(const Ze of Ie){const rt=Ze.queryResults,Ye=Ze.wrappedTileID,dt=Je[Ye]=Je[Ye]||{};for(const Bt in rt){const ot=rt[Bt],gt=dt[Bt]=dt[Bt]||{},It=Qe[Bt]=Qe[Bt]||[];for(const St of ot)gt[St.featureIndex]||(gt[St.featureIndex]=!0,It.push(St))}}return Qe}(ve);for(const Ie in Ce)Ce[Ie].forEach(Qe=>{const Je=Qe.feature,Ze=J.getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=Ze});return Ce}function Ft(J,x){const Q=J.tileID,G=x.tileID;return Q.overscaledZ-G.overscaledZ||Q.canonical.y-G.canonical.y||Q.wrap-G.wrap||Q.canonical.x-G.canonical.x}class zt{constructor(x,Q){this.timeAdded=0,this.fadeEndTime=0,this.tileID=x,this.uid=D.uniqueId(),this.uses=0,this.tileSize=Q,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(x){const Q=x+this.timeAdded;Q<this.fadeEndTime||(this.fadeEndTime=Q)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(x){this.demTexture&&x.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(x,Q,G){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",x){x.featureIndex&&(this.latestFeatureIndex=x.featureIndex,x.rawTileData?(this.latestRawTileData=x.rawTileData,this.latestFeatureIndex.rawTileData=x.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=x.collisionBoxArray,this.buckets=function(X,te){const le={};if(!te)return le;for(const he of X){const pe=he.layerIds.map(ve=>te.getLayer(ve)).filter(Boolean);if(pe.length!==0){he.layers=pe,he.stateDependentLayerIds&&(he.stateDependentLayers=he.stateDependentLayerIds.map(ve=>pe.filter(Ce=>Ce.id===ve)[0]));for(const ve of pe)le[ve.id]=he}}return le}(x.buckets,Q.style),this.hasSymbolBuckets=!1;for(const X in this.buckets){const te=this.buckets[X];if(te instanceof D.SymbolBucket){if(this.hasSymbolBuckets=!0,!G)break;te.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const X in this.buckets){const te=this.buckets[X];if(te instanceof D.SymbolBucket&&te.hasRTLText){this.hasRTLText=!0,D.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const X in this.buckets){const te=this.buckets[X];this.queryPadding=Math.max(this.queryPadding,Q.style.getLayer(X).queryRadius(te))}x.imageAtlas&&(this.imageAtlas=x.imageAtlas),x.glyphAtlasImage&&(this.glyphAtlasImage=x.glyphAtlasImage)}else this.collisionBoxArray=new D.CollisionBoxArray}unloadVectorData(){for(const x in this.buckets)this.buckets[x].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(x){return this.buckets[x.id]}upload(x){for(const G in this.buckets){const X=this.buckets[G];X.uploadPending()&&X.upload(x)}const Q=x.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vt(x,this.imageAtlas.image,Q.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vt(x,this.glyphAtlasImage,Q.ALPHA),this.glyphAtlasImage=null)}prepare(x){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(x,this.imageAtlasTexture)}queryRenderedFeatures(x,Q,G,X,te,le,he,pe,ve,Ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:X,cameraQueryGeometry:te,scale:le,tileSize:this.tileSize,pixelPosMatrix:Ce,transform:pe,params:he,queryPadding:this.queryPadding*ve},x,Q,G):{}}querySourceFeatures(x,Q){const G=this.latestFeatureIndex;if(!G||!G.rawTileData)return;const X=G.loadVTLayers(),te=Q&&Q.sourceLayer?Q.sourceLayer:"",le=X._geojsonTileLayer||X[te];if(!le)return;const he=D.createFilter(Q&&Q.filter),{z:pe,x:ve,y:Ce}=this.tileID.canonical,Ie={z:pe,x:ve,y:Ce};for(let Qe=0;Qe<le.length;Qe++){const Je=le.feature(Qe);if(he.needGeometry){const Ye=D.toEvaluationFeature(Je,!0);if(!he.filter(new D.EvaluationParameters(this.tileID.overscaledZ),Ye,this.tileID.canonical))continue}else if(!he.filter(new D.EvaluationParameters(this.tileID.overscaledZ),Je))continue;const Ze=G.getId(Je,te),rt=new D.GeoJSONFeature(Je,pe,ve,Ce,Ze);rt.tile=Ie,x.push(rt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(x){const Q=this.expirationTime;if(x.cacheControl){const G=D.parseCacheControl(x.cacheControl);G["max-age"]&&(this.expirationTime=Date.now()+1e3*G["max-age"])}else x.expires&&(this.expirationTime=new Date(x.expires).getTime());if(this.expirationTime){const G=Date.now();let X=!1;if(this.expirationTime>G)X=!1;else if(Q)if(this.expirationTime<Q)X=!0;else{const te=this.expirationTime-Q;te?this.expirationTime=G+Math.max(te,3e4):X=!0}else X=!0;X?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(x,Q){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(x).length===0)return;const G=this.latestFeatureIndex.loadVTLayers();for(const X in this.buckets){if(!Q.style.hasLayer(X))continue;const te=this.buckets[X],le=te.layers[0].sourceLayer||"_geojsonTileLayer",he=G[le],pe=x[le];if(!he||!pe||Object.keys(pe).length===0)continue;te.update(pe,he,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ve=Q&&Q.style&&Q.style.getLayer(X);ve&&(this.queryPadding=Math.max(this.queryPadding,ve.queryRadius(te)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(x){this.symbolFadeHoldUntil=D.browser.now()+x}setDependencies(x,Q){const G={};for(const X of Q)G[X]=!0;this.dependencies[x]=G}hasDependency(x,Q){for(const G of x){const X=this.dependencies[G];if(X){for(const te of Q)if(X[te])return!0}}return!1}}class Nt{constructor(x,Q){this.max=x,this.onRemove=Q,this.reset()}reset(){for(const x in this.data)for(const Q of this.data[x])Q.timeout&&clearTimeout(Q.timeout),this.onRemove(Q.value);return this.data={},this.order=[],this}add(x,Q,G){const X=x.wrapped().key;this.data[X]===void 0&&(this.data[X]=[]);const te={value:Q,timeout:void 0};if(G!==void 0&&(te.timeout=setTimeout(()=>{this.remove(x,te)},G)),this.data[X].push(te),this.order.push(X),this.order.length>this.max){const le=this._getAndRemoveByKey(this.order[0]);le&&this.onRemove(le)}return this}has(x){return x.wrapped().key in this.data}getAndRemove(x){return this.has(x)?this._getAndRemoveByKey(x.wrapped().key):null}_getAndRemoveByKey(x){const Q=this.data[x].shift();return Q.timeout&&clearTimeout(Q.timeout),this.data[x].length===0&&delete this.data[x],this.order.splice(this.order.indexOf(x),1),Q.value}getByKey(x){const Q=this.data[x];return Q?Q[0].value:null}get(x){return this.has(x)?this.data[x.wrapped().key][0].value:null}remove(x,Q){if(!this.has(x))return this;const G=x.wrapped().key,X=Q===void 0?0:this.data[G].indexOf(Q),te=this.data[G][X];return this.data[G].splice(X,1),te.timeout&&clearTimeout(te.timeout),this.data[G].length===0&&delete this.data[G],this.onRemove(te.value),this.order.splice(this.order.indexOf(G),1),this}setMaxSize(x){for(this.max=x;this.order.length>this.max;){const Q=this._getAndRemoveByKey(this.order[0]);Q&&this.onRemove(Q)}return this}filter(x){const Q=[];for(const G in this.data)for(const X of this.data[G])x(X.value)||Q.push(X);for(const G of Q)this.remove(G.value.tileID,G)}}class Mt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(x,Q,G){const X=String(Q);if(this.stateChanges[x]=this.stateChanges[x]||{},this.stateChanges[x][X]=this.stateChanges[x][X]||{},D.extend(this.stateChanges[x][X],G),this.deletedStates[x]===null){this.deletedStates[x]={};for(const te in this.state[x])te!==X&&(this.deletedStates[x][te]=null)}else if(this.deletedStates[x]&&this.deletedStates[x][X]===null){this.deletedStates[x][X]={};for(const te in this.state[x][X])G[te]||(this.deletedStates[x][X][te]=null)}else for(const te in G)this.deletedStates[x]&&this.deletedStates[x][X]&&this.deletedStates[x][X][te]===null&&delete this.deletedStates[x][X][te]}removeFeatureState(x,Q,G){if(this.deletedStates[x]===null)return;const X=String(Q);if(this.deletedStates[x]=this.deletedStates[x]||{},G&&Q!==void 0)this.deletedStates[x][X]!==null&&(this.deletedStates[x][X]=this.deletedStates[x][X]||{},this.deletedStates[x][X][G]=null);else if(Q!==void 0)if(this.stateChanges[x]&&this.stateChanges[x][X])for(G in this.deletedStates[x][X]={},this.stateChanges[x][X])this.deletedStates[x][X][G]=null;else this.deletedStates[x][X]=null;else this.deletedStates[x]=null}getState(x,Q){const G=String(Q),X=D.extend({},(this.state[x]||{})[G],(this.stateChanges[x]||{})[G]);if(this.deletedStates[x]===null)return{};if(this.deletedStates[x]){const te=this.deletedStates[x][Q];if(te===null)return{};for(const le in te)delete X[le]}return X}initializeTileState(x,Q){x.setFeatureState(this.state,Q)}coalesceChanges(x,Q){const G={};for(const X in this.stateChanges){this.state[X]=this.state[X]||{};const te={};for(const le in this.stateChanges[X])this.state[X][le]||(this.state[X][le]={}),D.extend(this.state[X][le],this.stateChanges[X][le]),te[le]=this.state[X][le];G[X]=te}for(const X in this.deletedStates){this.state[X]=this.state[X]||{};const te={};if(this.deletedStates[X]===null)for(const le in this.state[X])te[le]={},this.state[X][le]={};else for(const le in this.deletedStates[X]){if(this.deletedStates[X][le]===null)this.state[X][le]={};else for(const he of Object.keys(this.deletedStates[X][le]))delete this.state[X][le][he];te[le]=this.state[X][le]}G[X]=G[X]||{},D.extend(G[X],te)}if(this.stateChanges={},this.deletedStates={},Object.keys(G).length!==0)for(const X in x)x[X].setFeatureState(G,Q)}}class $t extends D.Evented{constructor(x,Q,G){super(),this.id=x,this.dispatcher=G,this.on("data",X=>{X.dataType==="source"&&X.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&X.dataType==="source"&&X.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((X,te,le,he)=>{const pe=new(qe(te.type))(X,te,le,he);if(pe.id!==X)throw new Error(`Expected Source id to be ${X} instead of ${pe.id}`);return pe})(x,Q,G,this),this._tiles={},this._cache=new Nt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Mt,this._didEmitContent=!1,this._updated=!1}onAdd(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._maxTileCacheZoomLevels=x?x._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(x)}onRemove(x){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(x)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const x in this._tiles){const Q=this._tiles[x];if(Q.state!=="loaded"&&Q.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(x,Q){return this._source.loadTile(x,Q)}_unloadTile(x){if(this._source.unloadTile)return this._source.unloadTile(x,()=>{})}_abortTile(x){this._source.abortTile&&this._source.abortTile(x,()=>{}),this._source.fire(new D.Event("dataabort",{tile:x,coord:x.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(x){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const Q in this._tiles){const G=this._tiles[Q];G.upload(x),G.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(x=>x.tileID).sort(ri).map(x=>x.key)}getRenderableIds(x){const Q=[];for(const G in this._tiles)this._isIdRenderable(G,x)&&Q.push(this._tiles[G]);return x?Q.sort((G,X)=>{const te=G.tileID,le=X.tileID,he=new D.Point(te.canonical.x,te.canonical.y)._rotate(this.transform.angle),pe=new D.Point(le.canonical.x,le.canonical.y)._rotate(this.transform.angle);return te.overscaledZ-le.overscaledZ||pe.y-he.y||pe.x-he.x}).map(G=>G.tileID.key):Q.map(G=>G.tileID).sort(ri).map(G=>G.key)}hasRenderableParent(x){const Q=this.findLoadedParent(x,0);return!!Q&&this._isIdRenderable(Q.tileID.key)}_isIdRenderable(x,Q){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(Q||!this._tiles[x].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const x in this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")}}_reloadTile(x,Q){const G=this._tiles[x];G&&(G.state!=="loading"&&(G.state=Q),this._loadTile(G,this._tileLoaded.bind(this,G,x,Q)))}_tileLoaded(x,Q,G,X){if(X)return x.state="errored",void(X.status!==404?this._source.fire(new D.ErrorEvent(X,{tile:x})):this.update(this.transform,this.terrain));x.timeAdded=D.browser.now(),G==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(Q,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),x.aborted||this._source.fire(new D.Event("data",{dataType:"source",tile:x,coord:x.tileID}))}_backfillDEM(x){const Q=this.getRenderableIds();for(let X=0;X<Q.length;X++){const te=Q[X];if(x.neighboringTiles&&x.neighboringTiles[te]){const le=this.getTileByID(te);G(x,le),G(le,x)}}function G(X,te){X.needsHillshadePrepare=!0,X.needsTerrainPrepare=!0;let le=te.tileID.canonical.x-X.tileID.canonical.x;const he=te.tileID.canonical.y-X.tileID.canonical.y,pe=Math.pow(2,X.tileID.canonical.z),ve=te.tileID.key;le===0&&he===0||Math.abs(he)>1||(Math.abs(le)>1&&(Math.abs(le+pe)===1?le+=pe:Math.abs(le-pe)===1&&(le-=pe)),te.dem&&X.dem&&(X.dem.backfillBorder(te.dem,le,he),X.neighboringTiles&&X.neighboringTiles[ve]&&(X.neighboringTiles[ve].backfilled=!0)))}}getTile(x){return this.getTileByID(x.key)}getTileByID(x){return this._tiles[x]}_retainLoadedChildren(x,Q,G,X){for(const te in this._tiles){let le=this._tiles[te];if(X[te]||!le.hasData()||le.tileID.overscaledZ<=Q||le.tileID.overscaledZ>G)continue;let he=le.tileID;for(;le&&le.tileID.overscaledZ>Q+1;){const ve=le.tileID.scaledTo(le.tileID.overscaledZ-1);le=this._tiles[ve.key],le&&le.hasData()&&(he=ve)}let pe=he;for(;pe.overscaledZ>Q;)if(pe=pe.scaledTo(pe.overscaledZ-1),x[pe.key]){X[he.key]=he;break}}}findLoadedParent(x,Q){if(x.key in this._loadedParentTiles){const G=this._loadedParentTiles[x.key];return G&&G.tileID.overscaledZ>=Q?G:null}for(let G=x.overscaledZ-1;G>=Q;G--){const X=x.scaledTo(G),te=this._getLoadedTile(X);if(te)return te}}_getLoadedTile(x){const Q=this._tiles[x.key];return Q&&Q.hasData()?Q:this._cache.getByKey(x.wrapped().key)}updateCacheSize(x){const Q=Math.ceil(x.width/this._source.tileSize)+1,G=Math.ceil(x.height/this._source.tileSize)+1,X=Math.floor(Q*G*(this._maxTileCacheZoomLevels===null?D.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),te=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,X):X;this._cache.setMaxSize(te)}handleWrapJump(x){const Q=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,Q){const G={};for(const X in this._tiles){const te=this._tiles[X];te.tileID=te.tileID.unwrapTo(te.tileID.wrap+Q),G[te.tileID.key]=te}this._tiles=G;for(const X in this._timers)clearTimeout(this._timers[X]),delete this._timers[X];for(const X in this._tiles)this._setTileReloadTimer(X,this._tiles[X])}}update(x,Q){if(this.transform=x,this.terrain=Q,!this._sourceLoaded||this._paused)return;let G;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?G=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ce=>new D.OverscaledTileID(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y)):(G=x.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:Q}),this._source.hasTile&&(G=G.filter(Ce=>this._source.hasTile(Ce)))):G=[];const X=x.coveringZoomLevel(this._source),te=Math.max(X-$t.maxOverzooming,this._source.minzoom),le=Math.max(X+$t.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ce={};for(const Ie of G)if(Ie.canonical.z>this._source.minzoom){const Qe=Ie.scaledTo(Ie.canonical.z-1);Ce[Qe.key]=Qe;const Je=Ie.scaledTo(Math.max(this._source.minzoom,Math.min(Ie.canonical.z,5)));Ce[Je.key]=Je}G=G.concat(Object.values(Ce))}const he=G.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,he&&this.fire(new D.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const pe=this._updateRetainedTiles(G,X);if(ci(this._source.type)){const Ce={},Ie={},Qe=Object.keys(pe),Je=D.browser.now();for(const Ze of Qe){const rt=pe[Ze],Ye=this._tiles[Ze];if(!Ye||Ye.fadeEndTime!==0&&Ye.fadeEndTime<=Je)continue;const dt=this.findLoadedParent(rt,te);dt&&(this._addTile(dt.tileID),Ce[dt.tileID.key]=dt.tileID),Ie[Ze]=rt}this._retainLoadedChildren(Ie,X,le,pe);for(const Ze in Ce)pe[Ze]||(this._coveredTiles[Ze]=!0,pe[Ze]=Ce[Ze]);if(Q){const Ze={},rt={};for(const Ye of G)this._tiles[Ye.key].hasData()?Ze[Ye.key]=Ye:rt[Ye.key]=Ye;for(const Ye in rt){const dt=rt[Ye].children(this._source.maxzoom);this._tiles[dt[0].key]&&this._tiles[dt[1].key]&&this._tiles[dt[2].key]&&this._tiles[dt[3].key]&&(Ze[dt[0].key]=pe[dt[0].key]=dt[0],Ze[dt[1].key]=pe[dt[1].key]=dt[1],Ze[dt[2].key]=pe[dt[2].key]=dt[2],Ze[dt[3].key]=pe[dt[3].key]=dt[3],delete rt[Ye])}for(const Ye in rt){const dt=this.findLoadedParent(rt[Ye],this._source.minzoom);if(dt){Ze[dt.tileID.key]=pe[dt.tileID.key]=dt.tileID;for(const Bt in Ze)Ze[Bt].isChildOf(dt.tileID)&&delete Ze[Bt]}}for(const Ye in this._tiles)Ze[Ye]||(this._coveredTiles[Ye]=!0)}}for(const Ce in pe)this._tiles[Ce].clearFadeHold();const ve=D.keysDifference(this._tiles,pe);for(const Ce of ve){const Ie=this._tiles[Ce];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)}_updateRetainedTiles(x,Q){const G={},X={},te=Math.max(Q-$t.maxOverzooming,this._source.minzoom),le=Math.max(Q+$t.maxUnderzooming,this._source.minzoom),he={};for(const pe of x){const ve=this._addTile(pe);G[pe.key]=pe,ve.hasData()||Q<this._source.maxzoom&&(he[pe.key]=pe)}this._retainLoadedChildren(he,Q,le,G);for(const pe of x){let ve=this._tiles[pe.key];if(ve.hasData())continue;if(Q+1>this._source.maxzoom){const Ie=pe.children(this._source.maxzoom)[0],Qe=this.getTile(Ie);if(Qe&&Qe.hasData()){G[Ie.key]=Ie;continue}}else{const Ie=pe.children(this._source.maxzoom);if(G[Ie[0].key]&&G[Ie[1].key]&&G[Ie[2].key]&&G[Ie[3].key])continue}let Ce=ve.wasRequested();for(let Ie=pe.overscaledZ-1;Ie>=te;--Ie){const Qe=pe.scaledTo(Ie);if(X[Qe.key])break;if(X[Qe.key]=!0,ve=this.getTile(Qe),!ve&&Ce&&(ve=this._addTile(Qe)),ve){const Je=ve.hasData();if((Ce||Je)&&(G[Qe.key]=Qe),Ce=ve.wasRequested(),Je)break}}}return G}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const x in this._tiles){const Q=[];let G,X=this._tiles[x].tileID;for(;X.overscaledZ>0;){if(X.key in this._loadedParentTiles){G=this._loadedParentTiles[X.key];break}Q.push(X.key);const te=X.scaledTo(X.overscaledZ-1);if(G=this._getLoadedTile(te),G)break;X=te}for(const te of Q)this._loadedParentTiles[te]=G}}_addTile(x){let Q=this._tiles[x.key];if(Q)return Q;Q=this._cache.getAndRemove(x),Q&&(this._setTileReloadTimer(x.key,Q),Q.tileID=x,this._state.initializeTileState(Q,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,Q)));const G=Q;return Q||(Q=new zt(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(Q,this._tileLoaded.bind(this,Q,x.key,Q.state))),Q.uses++,this._tiles[x.key]=Q,G||this._source.fire(new D.Event("dataloading",{tile:Q,coord:Q.tileID,dataType:"source"})),Q}_setTileReloadTimer(x,Q){x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);const G=Q.getExpiryTimeout();G&&(this._timers[x]=setTimeout(()=>{this._reloadTile(x,"expired"),delete this._timers[x]},G))}_removeTile(x){const Q=this._tiles[x];Q&&(Q.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),Q.uses>0||(Q.hasData()&&Q.state!=="reloading"?this._cache.add(Q.tileID,Q,Q.getExpiryTimeout()):(Q.aborted=!0,this._abortTile(Q),this._unloadTile(Q))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const x in this._tiles)this._removeTile(x);this._cache.reset()}tilesIn(x,Q,G){const X=[],te=this.transform;if(!te)return X;const le=G?te.getCameraQueryGeometry(x):x,he=x.map(Ze=>te.pointCoordinate(Ze,this.terrain)),pe=le.map(Ze=>te.pointCoordinate(Ze,this.terrain)),ve=this.getIds();let Ce=1/0,Ie=1/0,Qe=-1/0,Je=-1/0;for(const Ze of pe)Ce=Math.min(Ce,Ze.x),Ie=Math.min(Ie,Ze.y),Qe=Math.max(Qe,Ze.x),Je=Math.max(Je,Ze.y);for(let Ze=0;Ze<ve.length;Ze++){const rt=this._tiles[ve[Ze]];if(rt.holdingForFade())continue;const Ye=rt.tileID,dt=Math.pow(2,te.zoom-rt.tileID.overscaledZ),Bt=Q*rt.queryPadding*D.EXTENT/rt.tileSize/dt,ot=[Ye.getTilePoint(new D.MercatorCoordinate(Ce,Ie)),Ye.getTilePoint(new D.MercatorCoordinate(Qe,Je))];if(ot[0].x-Bt<D.EXTENT&&ot[0].y-Bt<D.EXTENT&&ot[1].x+Bt>=0&&ot[1].y+Bt>=0){const gt=he.map(St=>Ye.getTilePoint(St)),It=pe.map(St=>Ye.getTilePoint(St));X.push({tile:rt,tileID:Ye,queryGeometry:gt,cameraQueryGeometry:It,scale:dt})}}return X}getVisibleCoordinates(x){const Q=this.getRenderableIds(x).map(G=>this._tiles[G].tileID);for(const G of Q)G.posMatrix=this.transform.calculatePosMatrix(G.toUnwrapped());return Q}hasTransition(){if(this._source.hasTransition())return!0;if(ci(this._source.type)){const x=D.browser.now();for(const Q in this._tiles)if(this._tiles[Q].fadeEndTime>=x)return!0}return!1}setFeatureState(x,Q,G){this._state.updateState(x=x||"_geojsonTileLayer",Q,G)}removeFeatureState(x,Q,G){this._state.removeFeatureState(x=x||"_geojsonTileLayer",Q,G)}getFeatureState(x,Q){return this._state.getState(x=x||"_geojsonTileLayer",Q)}setDependencies(x,Q,G){const X=this._tiles[x];X&&X.setDependencies(Q,G)}reloadTilesForDependencies(x,Q){for(const G in this._tiles)this._tiles[G].hasDependency(x,Q)&&this._reloadTile(G,"reloading");this._cache.filter(G=>!G.hasDependency(x,Q))}}function ri(J,x){const Q=Math.abs(2*J.wrap)-+(J.wrap<0),G=Math.abs(2*x.wrap)-+(x.wrap<0);return J.overscaledZ-x.overscaledZ||G-Q||x.canonical.y-J.canonical.y||x.canonical.x-J.canonical.x}function ci(J){return J==="raster"||J==="image"||J==="video"}$t.maxOverzooming=10,$t.maxUnderzooming=3;const bt="mapboxgl_preloaded_worker_pool";class di{constructor(){this.active={}}acquire(x){if(!this.workers)for(this.workers=[];this.workers.length<di.workerCount;)this.workers.push(new Worker(D.config.WORKER_URL));return this.active[x]=!0,this.workers.slice()}release(x){delete this.active[x],this.numActive()===0&&(this.workers.forEach(Q=>{Q.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bt]}numActive(){return Object.keys(this.active).length}}const ii=Math.floor(D.browser.hardwareConcurrency/2);let Hi;function Vi(){return Hi||(Hi=new di),Hi}di.workerCount=D.isSafari(globalThis)?Math.max(Math.min(ii,3),1):1;class Ot{constructor(x,Q){this.reset(x,Q)}reset(x,Q){this.points=x||[],this._distances=[0];for(let G=1;G<this.points.length;G++)this._distances[G]=this._distances[G-1]+this.points[G].dist(this.points[G-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Q||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(x){if(this.points.length===1)return this.points[0];x=D.clamp(x,0,1);let Q=1,G=this._distances[Q];const X=x*this.paddedLength+this.padding;for(;G<X&&Q<this._distances.length;)G=this._distances[++Q];const te=Q-1,le=this._distances[te],he=G-le,pe=he>0?(X-le)/he:0;return this.points[te].mult(1-pe).add(this.points[Q].mult(pe))}}function _i(J,x){let Q=!0;return J==="always"||J!=="never"&&x!=="never"||(Q=!1),Q}class Ti{constructor(x,Q,G){const X=this.boxCells=[],te=this.circleCells=[];this.xCellCount=Math.ceil(x/G),this.yCellCount=Math.ceil(Q/G);for(let le=0;le<this.xCellCount*this.yCellCount;le++)X.push([]),te.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=x,this.height=Q,this.xScale=this.xCellCount/x,this.yScale=this.yCellCount/Q,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(x,Q,G,X,te){this._forEachCell(Q,G,X,te,this._insertBoxCell,this.boxUid++),this.boxKeys.push(x),this.bboxes.push(Q),this.bboxes.push(G),this.bboxes.push(X),this.bboxes.push(te)}insertCircle(x,Q,G,X){this._forEachCell(Q-X,G-X,Q+X,G+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(x),this.circles.push(Q),this.circles.push(G),this.circles.push(X)}_insertBoxCell(x,Q,G,X,te,le){this.boxCells[te].push(le)}_insertCircleCell(x,Q,G,X,te,le){this.circleCells[te].push(le)}_query(x,Q,G,X,te,le,he){if(G<0||x>this.width||X<0||Q>this.height)return[];const pe=[];if(x<=0&&Q<=0&&this.width<=G&&this.height<=X){if(te)return[{key:null,x1:x,y1:Q,x2:G,y2:X}];for(let ve=0;ve<this.boxKeys.length;ve++)pe.push({key:this.boxKeys[ve],x1:this.bboxes[4*ve],y1:this.bboxes[4*ve+1],x2:this.bboxes[4*ve+2],y2:this.bboxes[4*ve+3]});for(let ve=0;ve<this.circleKeys.length;ve++){const Ce=this.circles[3*ve],Ie=this.circles[3*ve+1],Qe=this.circles[3*ve+2];pe.push({key:this.circleKeys[ve],x1:Ce-Qe,y1:Ie-Qe,x2:Ce+Qe,y2:Ie+Qe})}}else this._forEachCell(x,Q,G,X,this._queryCell,pe,{hitTest:te,overlapMode:le,seenUids:{box:{},circle:{}}},he);return pe}query(x,Q,G,X){return this._query(x,Q,G,X,!1,null)}hitTest(x,Q,G,X,te,le){return this._query(x,Q,G,X,!0,te,le).length>0}hitTestCircle(x,Q,G,X,te){const le=x-G,he=x+G,pe=Q-G,ve=Q+G;if(he<0||le>this.width||ve<0||pe>this.height)return!1;const Ce=[];return this._forEachCell(le,pe,he,ve,this._queryCellCircle,Ce,{hitTest:!0,overlapMode:X,circle:{x,y:Q,radius:G},seenUids:{box:{},circle:{}}},te),Ce.length>0}_queryCell(x,Q,G,X,te,le,he,pe){const{seenUids:ve,hitTest:Ce,overlapMode:Ie}=he,Qe=this.boxCells[te];if(Qe!==null){const Ze=this.bboxes;for(const rt of Qe)if(!ve.box[rt]){ve.box[rt]=!0;const Ye=4*rt,dt=this.boxKeys[rt];if(x<=Ze[Ye+2]&&Q<=Ze[Ye+3]&&G>=Ze[Ye+0]&&X>=Ze[Ye+1]&&(!pe||pe(dt))&&(!Ce||!_i(Ie,dt.overlapMode))&&(le.push({key:dt,x1:Ze[Ye],y1:Ze[Ye+1],x2:Ze[Ye+2],y2:Ze[Ye+3]}),Ce))return!0}}const Je=this.circleCells[te];if(Je!==null){const Ze=this.circles;for(const rt of Je)if(!ve.circle[rt]){ve.circle[rt]=!0;const Ye=3*rt,dt=this.circleKeys[rt];if(this._circleAndRectCollide(Ze[Ye],Ze[Ye+1],Ze[Ye+2],x,Q,G,X)&&(!pe||pe(dt))&&(!Ce||!_i(Ie,dt.overlapMode))){const Bt=Ze[Ye],ot=Ze[Ye+1],gt=Ze[Ye+2];if(le.push({key:dt,x1:Bt-gt,y1:ot-gt,x2:Bt+gt,y2:ot+gt}),Ce)return!0}}}return!1}_queryCellCircle(x,Q,G,X,te,le,he,pe){const{circle:ve,seenUids:Ce,overlapMode:Ie}=he,Qe=this.boxCells[te];if(Qe!==null){const Ze=this.bboxes;for(const rt of Qe)if(!Ce.box[rt]){Ce.box[rt]=!0;const Ye=4*rt,dt=this.boxKeys[rt];if(this._circleAndRectCollide(ve.x,ve.y,ve.radius,Ze[Ye+0],Ze[Ye+1],Ze[Ye+2],Ze[Ye+3])&&(!pe||pe(dt))&&!_i(Ie,dt.overlapMode))return le.push(!0),!0}}const Je=this.circleCells[te];if(Je!==null){const Ze=this.circles;for(const rt of Je)if(!Ce.circle[rt]){Ce.circle[rt]=!0;const Ye=3*rt,dt=this.circleKeys[rt];if(this._circlesCollide(Ze[Ye],Ze[Ye+1],Ze[Ye+2],ve.x,ve.y,ve.radius)&&(!pe||pe(dt))&&!_i(Ie,dt.overlapMode))return le.push(!0),!0}}}_forEachCell(x,Q,G,X,te,le,he,pe){const ve=this._convertToXCellCoord(x),Ce=this._convertToYCellCoord(Q),Ie=this._convertToXCellCoord(G),Qe=this._convertToYCellCoord(X);for(let Je=ve;Je<=Ie;Je++)for(let Ze=Ce;Ze<=Qe;Ze++)if(te.call(this,x,Q,G,X,this.xCellCount*Ze+Je,le,he,pe))return}_convertToXCellCoord(x){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(x*this.xScale)))}_convertToYCellCoord(x){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(x*this.yScale)))}_circlesCollide(x,Q,G,X,te,le){const he=X-x,pe=te-Q,ve=G+le;return ve*ve>he*he+pe*pe}_circleAndRectCollide(x,Q,G,X,te,le,he){const pe=(le-X)/2,ve=Math.abs(x-(X+pe));if(ve>pe+G)return!1;const Ce=(he-te)/2,Ie=Math.abs(Q-(te+Ce));if(Ie>Ce+G)return!1;if(ve<=pe||Ie<=Ce)return!0;const Qe=ve-pe,Je=Ie-Ce;return Qe*Qe+Je*Je<=G*G}}function Wi(J,x,Q,G,X){const te=D.create();return x?(D.scale(te,te,[1/X,1/X,1]),Q||D.rotateZ(te,te,G.angle)):D.multiply(te,G.labelPlaneMatrix,J),te}function Zt(J,x,Q,G,X){if(x){const te=D.clone(J);return D.scale(te,te,[X,X,1]),Q||D.rotateZ(te,te,-G.angle),te}return G.glCoordMatrix}function mi(J,x,Q){let G;Q?(G=[J.x,J.y,Q(J.x,J.y),1],D.transformMat4(G,G,x)):(G=[J.x,J.y,0,1],xe(G,G,x));const X=G[3];return{point:new D.Point(G[0]/X,G[1]/X),signedDistanceFromCamera:X}}function wi(J,x){return .5+J/x*.5}function $i(J,x){const Q=J[0]/J[3],G=J[1]/J[3];return Q>=-x[0]&&Q<=x[0]&&G>=-x[1]&&G<=x[1]}function tr(J,x,Q,G,X,te,le,he,pe,ve){const Ce=G?J.textSizeData:J.iconSizeData,Ie=D.evaluateSizeForZoom(Ce,Q.transform.zoom),Qe=[256/Q.width*2+1,256/Q.height*2+1],Je=G?J.text.dynamicLayoutVertexArray:J.icon.dynamicLayoutVertexArray;Je.clear();const Ze=J.lineVertexArray,rt=G?J.text.placedSymbolArray:J.icon.placedSymbolArray,Ye=Q.transform.width/Q.transform.height;let dt=!1;for(let Bt=0;Bt<rt.length;Bt++){const ot=rt.get(Bt);if(ot.hidden||ot.writingMode===D.WritingMode.vertical&&!dt){ye(ot.numGlyphs,Je);continue}let gt;if(dt=!1,ve?(gt=[ot.anchorX,ot.anchorY,ve(ot.anchorX,ot.anchorY),1],D.transformMat4(gt,gt,x)):(gt=[ot.anchorX,ot.anchorY,0,1],xe(gt,gt,x)),!$i(gt,Qe)){ye(ot.numGlyphs,Je);continue}const It=wi(Q.transform.cameraToCenterDistance,gt[3]),St=D.evaluateSizeForFeature(Ce,Ie,ot),Lt=le?St/It:St*It,Kt=new D.Point(ot.anchorX,ot.anchorY),Rt=mi(Kt,X,ve).point,Jt={projections:{},offsets:{}},Bi=ji(ot,Lt,!1,he,x,X,te,J.glyphOffsetArray,Ze,Je,Rt,Kt,Jt,Ye,pe,ve);dt=Bi.useVertical,(Bi.notEnoughRoom||dt||Bi.needsFlipping&&ji(ot,Lt,!0,he,x,X,te,J.glyphOffsetArray,Ze,Je,Rt,Kt,Jt,Ye,pe,ve).notEnoughRoom)&&ye(ot.numGlyphs,Je)}G?J.text.dynamicLayoutVertexBuffer.updateData(Je):J.icon.dynamicLayoutVertexBuffer.updateData(Je)}function Ar(J,x,Q,G,X,te,le,he,pe,ve,Ce,Ie,Qe){const Je=he.glyphStartIndex+he.numGlyphs,Ze=he.lineStartIndex,rt=he.lineStartIndex+he.lineLength,Ye=x.getoffsetX(he.glyphStartIndex),dt=x.getoffsetX(Je-1),Bt=Se(J*Ye,Q,G,X,te,le,he.segment,Ze,rt,pe,ve,Ce,Ie,Qe);if(!Bt)return null;const ot=Se(J*dt,Q,G,X,te,le,he.segment,Ze,rt,pe,ve,Ce,Ie,Qe);return ot?{first:Bt,last:ot}:null}function Tr(J,x,Q,G){return J===D.WritingMode.horizontal&&Math.abs(Q.y-x.y)>Math.abs(Q.x-x.x)*G?{useVertical:!0}:(J===D.WritingMode.vertical?x.y<Q.y:x.x>Q.x)?{needsFlipping:!0}:null}function ji(J,x,Q,G,X,te,le,he,pe,ve,Ce,Ie,Qe,Je,Ze,rt){const Ye=x/24,dt=J.lineOffsetX*Ye,Bt=J.lineOffsetY*Ye;let ot;if(J.numGlyphs>1){const gt=J.glyphStartIndex+J.numGlyphs,It=J.lineStartIndex,St=J.lineStartIndex+J.lineLength,Lt=Ar(Ye,he,dt,Bt,Q,Ce,Ie,J,pe,te,Qe,Ze,rt);if(!Lt)return{notEnoughRoom:!0};const Kt=mi(Lt.first.point,le,rt).point,Rt=mi(Lt.last.point,le,rt).point;if(G&&!Q){const Jt=Tr(J.writingMode,Kt,Rt,Je);if(Jt)return Jt}ot=[Lt.first];for(let Jt=J.glyphStartIndex+1;Jt<gt-1;Jt++)ot.push(Se(Ye*he.getoffsetX(Jt),dt,Bt,Q,Ce,Ie,J.segment,It,St,pe,te,Qe,Ze,rt));ot.push(Lt.last)}else{if(G&&!Q){const It=mi(Ie,X,rt).point,St=J.lineStartIndex+J.segment+1,Lt=new D.Point(pe.getx(St),pe.gety(St)),Kt=mi(Lt,X,rt),Rt=Kt.signedDistanceFromCamera>0?Kt.point:Si(Ie,Lt,It,1,X,rt),Jt=Tr(J.writingMode,It,Rt,Je);if(Jt)return Jt}const gt=Se(Ye*he.getoffsetX(J.glyphStartIndex),dt,Bt,Q,Ce,Ie,J.segment,J.lineStartIndex,J.lineStartIndex+J.lineLength,pe,te,Qe,Ze,rt);if(!gt)return{notEnoughRoom:!0};ot=[gt]}for(const gt of ot)D.addDynamicAttributes(ve,gt.point,gt.angle);return{}}function Si(J,x,Q,G,X,te){const le=mi(J.add(J.sub(x)._unit()),X,te).point,he=Q.sub(le);return Q.add(he._mult(G/he.mag()))}function Qs(J,x){const{projectionCache:Q,lineVertexArray:G,labelPlaneMatrix:X,tileAnchorPoint:te,distanceFromAnchor:le,getElevation:he,previousVertex:pe,direction:ve,absOffsetX:Ce}=x;if(Q.projections[J])return Q.projections[J];const Ie=new D.Point(G.getx(J),G.gety(J)),Qe=mi(Ie,X,he);if(Qe.signedDistanceFromCamera>0)return Q.projections[J]=Qe.point,Qe.point;const Je=J-ve;return Si(le===0?te:new D.Point(G.getx(Je),G.gety(Je)),Ie,pe,Ce-le+1,X,he)}function $r(J,x,Q){return J._unit()._perp()._mult(x*Q)}function it(J,x,Q,G,X,te,le,he){const{projectionCache:pe,direction:ve}=he;if(pe.offsets[J])return pe.offsets[J];const Ce=Q.add(x);if(J+ve<G||J+ve>=X)return pe.offsets[J]=Ce,Ce;const Ie=Qs(J+ve,he),Qe=$r(Ie.sub(Q),le,ve),Je=Q.add(Qe),Ze=Ie.add(Qe);return pe.offsets[J]=D.findLineIntersection(te,Ce,Je,Ze)||Ce,pe.offsets[J]}function Se(J,x,Q,G,X,te,le,he,pe,ve,Ce,Ie,Qe,Je){const Ze=G?J-x:J+x;let rt=Ze>0?1:-1,Ye=0;G&&(rt*=-1,Ye=Math.PI),rt<0&&(Ye+=Math.PI);let dt,Bt,ot=rt>0?he+le:he+le+1,gt=X,It=X,St=0,Lt=0;const Kt=Math.abs(Ze),Rt=[];let Jt;for(;St+Lt<=Kt;){if(ot+=rt,ot<he||ot>=pe)return null;St+=Lt,It=gt,Bt=dt;const oi={projectionCache:Ie,lineVertexArray:ve,labelPlaneMatrix:Ce,tileAnchorPoint:te,distanceFromAnchor:St,getElevation:Je,previousVertex:It,direction:rt,absOffsetX:Kt};if(gt=Qs(ot,oi),Q===0)Rt.push(It),Jt=gt.sub(It);else{let ki;const xi=gt.sub(It);ki=xi.mag()===0?$r(Qs(ot+rt,oi).sub(gt),Q,rt):$r(xi,Q,rt),Bt||(Bt=It.add(ki)),dt=it(ot,ki,gt,he,pe,Bt,Q,oi),Rt.push(Bt),Jt=dt.sub(Bt)}Lt=Jt.mag()}const Bi=Jt._mult((Kt-St)/Lt)._add(Bt||It),ar=Ye+Math.atan2(gt.y-It.y,gt.x-It.x);return Rt.push(Bi),{point:Bi,angle:Qe?ar:0,path:Rt}}const ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ye(J,x){for(let Q=0;Q<J;Q++){const G=x.length;x.resize(G+4),x.float32.set(ce,3*G)}}function xe(J,x,Q){const G=x[0],X=x[1];return J[0]=Q[0]*G+Q[4]*X+Q[12],J[1]=Q[1]*G+Q[5]*X+Q[13],J[3]=Q[3]*G+Q[7]*X+Q[15],J}const Me=100;class Ge{constructor(x,Q=new Ti(x.width+200,x.height+200,25),G=new Ti(x.width+200,x.height+200,25)){this.transform=x,this.grid=Q,this.ignoredGrid=G,this.pitchfactor=Math.cos(x._pitch)*x.cameraToCenterDistance,this.screenRightBoundary=x.width+Me,this.screenBottomBoundary=x.height+Me,this.gridRightBoundary=x.width+200,this.gridBottomBoundary=x.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(x,Q,G,X,te,le){const he=this.projectAndGetPerspectiveRatio(X,x.anchorPointX,x.anchorPointY,le),pe=G*he.perspectiveRatio,ve=x.x1*pe+he.point.x,Ce=x.y1*pe+he.point.y,Ie=x.x2*pe+he.point.x,Qe=x.y2*pe+he.point.y;return!this.isInsideGrid(ve,Ce,Ie,Qe)||Q!=="always"&&this.grid.hitTest(ve,Ce,Ie,Qe,Q,te)||he.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ve,Ce,Ie,Qe],offscreen:this.isOffscreen(ve,Ce,Ie,Qe)}}placeCollisionCircles(x,Q,G,X,te,le,he,pe,ve,Ce,Ie,Qe,Je,Ze){const rt=[],Ye=new D.Point(Q.anchorX,Q.anchorY),dt=mi(Ye,le,Ze),Bt=wi(this.transform.cameraToCenterDistance,dt.signedDistanceFromCamera),ot=(Ce?te/Bt:te*Bt)/D.ONE_EM,gt=mi(Ye,he,Ze).point,It=Ar(ot,X,Q.lineOffsetX*ot,Q.lineOffsetY*ot,!1,gt,Ye,Q,G,he,{projections:{},offsets:{}},!1,Ze);let St=!1,Lt=!1,Kt=!0;if(It){const Rt=.5*Qe*Bt+Je,Jt=new D.Point(-100,-100),Bi=new D.Point(this.screenRightBoundary,this.screenBottomBoundary),ar=new Ot,oi=It.first,ki=It.last;let xi=[];for(let Mi=oi.path.length-1;Mi>=1;Mi--)xi.push(oi.path[Mi]);for(let Mi=1;Mi<ki.path.length;Mi++)xi.push(ki.path[Mi]);const Hr=2.5*Rt;if(pe){const Mi=xi.map(lr=>mi(lr,pe,Ze));xi=Mi.some(lr=>lr.signedDistanceFromCamera<=0)?[]:Mi.map(lr=>lr.point)}let or=[];if(xi.length>0){const Mi=xi[0].clone(),lr=xi[0].clone();for(let Kr=1;Kr<xi.length;Kr++)Mi.x=Math.min(Mi.x,xi[Kr].x),Mi.y=Math.min(Mi.y,xi[Kr].y),lr.x=Math.max(lr.x,xi[Kr].x),lr.y=Math.max(lr.y,xi[Kr].y);or=Mi.x>=Jt.x&&lr.x<=Bi.x&&Mi.y>=Jt.y&&lr.y<=Bi.y?[xi]:lr.x<Jt.x||Mi.x>Bi.x||lr.y<Jt.y||Mi.y>Bi.y?[]:D.clipLine([xi],Jt.x,Jt.y,Bi.x,Bi.y)}for(const Mi of or){ar.reset(Mi,.25*Rt);let lr=0;lr=ar.length<=.5*Rt?1:Math.ceil(ar.paddedLength/Hr)+1;for(let Kr=0;Kr<lr;Kr++){const kr=Kr/Math.max(lr-1,1),rn=ar.lerp(kr),bs=rn.x+Me,Zr=rn.y+Me;rt.push(bs,Zr,Rt,0);const Vs=bs-Rt,Un=Zr-Rt,wn=bs+Rt,Mn=Zr+Rt;if(Kt=Kt&&this.isOffscreen(Vs,Un,wn,Mn),Lt=Lt||this.isInsideGrid(Vs,Un,wn,Mn),x!=="always"&&this.grid.hitTestCircle(bs,Zr,Rt,x,Ie)&&(St=!0,!ve))return{circles:[],offscreen:!1,collisionDetected:St}}}}return{circles:!ve&&St||!Lt||Bt<this.perspectiveRatioCutoff?[]:rt,offscreen:Kt,collisionDetected:St}}queryRenderedSymbols(x){if(x.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const Q=[];let G=1/0,X=1/0,te=-1/0,le=-1/0;for(const Ce of x){const Ie=new D.Point(Ce.x+Me,Ce.y+Me);G=Math.min(G,Ie.x),X=Math.min(X,Ie.y),te=Math.max(te,Ie.x),le=Math.max(le,Ie.y),Q.push(Ie)}const he=this.grid.query(G,X,te,le).concat(this.ignoredGrid.query(G,X,te,le)),pe={},ve={};for(const Ce of he){const Ie=Ce.key;if(pe[Ie.bucketInstanceId]===void 0&&(pe[Ie.bucketInstanceId]={}),pe[Ie.bucketInstanceId][Ie.featureIndex])continue;const Qe=[new D.Point(Ce.x1,Ce.y1),new D.Point(Ce.x2,Ce.y1),new D.Point(Ce.x2,Ce.y2),new D.Point(Ce.x1,Ce.y2)];D.polygonIntersectsPolygon(Q,Qe)&&(pe[Ie.bucketInstanceId][Ie.featureIndex]=!0,ve[Ie.bucketInstanceId]===void 0&&(ve[Ie.bucketInstanceId]=[]),ve[Ie.bucketInstanceId].push(Ie.featureIndex))}return ve}insertCollisionBox(x,Q,G,X,te,le){(G?this.ignoredGrid:this.grid).insert({bucketInstanceId:X,featureIndex:te,collisionGroupID:le,overlapMode:Q},x[0],x[1],x[2],x[3])}insertCollisionCircles(x,Q,G,X,te,le){const he=G?this.ignoredGrid:this.grid,pe={bucketInstanceId:X,featureIndex:te,collisionGroupID:le,overlapMode:Q};for(let ve=0;ve<x.length;ve+=4)he.insertCircle(pe,x[ve],x[ve+1],x[ve+2])}projectAndGetPerspectiveRatio(x,Q,G,X){let te;return X?(te=[Q,G,X(Q,G),1],D.transformMat4(te,te,x)):(te=[Q,G,0,1],xe(te,te,x)),{point:new D.Point((te[0]/te[3]+1)/2*this.transform.width+Me,(-te[1]/te[3]+1)/2*this.transform.height+Me),perspectiveRatio:.5+this.transform.cameraToCenterDistance/te[3]*.5}}isOffscreen(x,Q,G,X){return G<Me||x>=this.screenRightBoundary||X<Me||Q>this.screenBottomBoundary}isInsideGrid(x,Q,G,X){return G>=0&&x<this.gridRightBoundary&&X>=0&&Q<this.gridBottomBoundary}getViewportMatrix(){const x=D.identity([]);return D.translate(x,x,[-100,-100,0]),x}}function Le(J,x,Q){return x*(D.EXTENT/(J.tileSize*Math.pow(2,Q-J.tileID.overscaledZ)))}class Ke{constructor(x,Q,G,X){this.opacity=x?Math.max(0,Math.min(1,x.opacity+(x.placed?Q:-Q))):X&&G?1:0,this.placed=G}isHidden(){return this.opacity===0&&!this.placed}}class st{constructor(x,Q,G,X,te){this.text=new Ke(x?x.text:null,Q,G,te),this.icon=new Ke(x?x.icon:null,Q,X,te)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _t{constructor(x,Q,G){this.text=x,this.icon=Q,this.skipFade=G}}class xt{constructor(){this.invProjMatrix=D.create(),this.viewportMatrix=D.create(),this.circles=[]}}class kt{constructor(x,Q,G,X,te){this.bucketInstanceId=x,this.featureIndex=Q,this.sourceLayerIndex=G,this.bucketIndex=X,this.tileID=te}}class ai{constructor(x){this.crossSourceCollisions=x,this.maxGroupID=0,this.collisionGroups={}}get(x){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[x]){const Q=++this.maxGroupID;this.collisionGroups[x]={ID:Q,predicate:G=>G.collisionGroupID===Q}}return this.collisionGroups[x]}}function Di(J,x,Q,G,X){const{horizontalAlign:te,verticalAlign:le}=D.getAnchorAlignment(J);return new D.Point(-(te-.5)*x+G[0]*X,-(le-.5)*Q+G[1]*X)}function ni(J,x,Q,G,X,te){const{x1:le,x2:he,y1:pe,y2:ve,anchorPointX:Ce,anchorPointY:Ie}=J,Qe=new D.Point(x,Q);return G&&Qe._rotate(X?te:-te),{x1:le+Qe.x,y1:pe+Qe.y,x2:he+Qe.x,y2:ve+Qe.y,anchorPointX:Ce,anchorPointY:Ie}}class ei{constructor(x,Q,G,X,te){this.transform=x.clone(),this.terrain=Q,this.collisionIndex=new Ge(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new ai(X),this.collisionCircleArrays={},this.prevPlacement=te,te&&(te.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(x,Q,G,X){const te=G.getBucket(Q),le=G.latestFeatureIndex;if(!te||!le||Q.id!==te.layerIds[0])return;const he=G.collisionBoxArray,pe=te.layers[0].layout,ve=Math.pow(2,this.transform.zoom-G.tileID.overscaledZ),Ce=G.tileSize/D.EXTENT,Ie=this.transform.calculatePosMatrix(G.tileID.toUnwrapped()),Qe=pe.get("text-pitch-alignment")==="map",Je=pe.get("text-rotation-alignment")==="map",Ze=Le(G,1,this.transform.zoom),rt=Wi(Ie,Qe,Je,this.transform,Ze);let Ye=null;if(Qe){const Bt=Zt(Ie,Qe,Je,this.transform,Ze);Ye=D.multiply([],this.transform.labelPlaneMatrix,Bt)}this.retainedQueryData[te.bucketInstanceId]=new kt(te.bucketInstanceId,le,te.sourceLayerIndex,te.index,G.tileID);const dt={bucket:te,layout:pe,posMatrix:Ie,textLabelPlaneMatrix:rt,labelToScreenMatrix:Ye,scale:ve,textPixelRatio:Ce,holdingForFade:G.holdingForFade(),collisionBoxArray:he,partiallyEvaluatedTextSize:D.evaluateSizeForZoom(te.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(te.sourceID)};if(X)for(const Bt of te.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:gt,symbolInstanceEnd:It}=Bt;x.push({sortKey:ot,symbolInstanceStart:gt,symbolInstanceEnd:It,parameters:dt})}else x.push({symbolInstanceStart:0,symbolInstanceEnd:te.symbolInstances.length,parameters:dt})}attemptAnchorPlacement(x,Q,G,X,te,le,he,pe,ve,Ce,Ie,Qe,Je,Ze,rt,Ye){const dt=D.TextAnchorEnum[x.textAnchor],Bt=[x.textOffset0,x.textOffset1],ot=Di(dt,G,X,Bt,te),gt=this.collisionIndex.placeCollisionBox(ni(Q,ot.x,ot.y,le,he,this.transform.angle),Ie,pe,ve,Ce.predicate,Ye);if((!rt||this.collisionIndex.placeCollisionBox(ni(rt,ot.x,ot.y,le,he,this.transform.angle),Ie,pe,ve,Ce.predicate,Ye).box.length!==0)&&gt.box.length>0){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Qe.crossTileID]&&this.prevPlacement.placements[Qe.crossTileID]&&this.prevPlacement.placements[Qe.crossTileID].text&&(It=this.prevPlacement.variableOffsets[Qe.crossTileID].anchor),Qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Qe.crossTileID]={textOffset:Bt,width:G,height:X,anchor:dt,textBoxScale:te,prevAnchor:It},this.markUsedJustification(Je,dt,Qe,Ze),Je.allowVerticalPlacement&&(this.markUsedOrientation(Je,Ze,Qe),this.placedOrientations[Qe.crossTileID]=Ze),{shift:ot,placedGlyphBoxes:gt}}}placeLayerBucketPart(x,Q,G){const{bucket:X,layout:te,posMatrix:le,textLabelPlaneMatrix:he,labelToScreenMatrix:pe,textPixelRatio:ve,holdingForFade:Ce,collisionBoxArray:Ie,partiallyEvaluatedTextSize:Qe,collisionGroup:Je}=x.parameters,Ze=te.get("text-optional"),rt=te.get("icon-optional"),Ye=D.getOverlapMode(te,"text-overlap","text-allow-overlap"),dt=Ye==="always",Bt=D.getOverlapMode(te,"icon-overlap","icon-allow-overlap"),ot=Bt==="always",gt=te.get("text-rotation-alignment")==="map",It=te.get("text-pitch-alignment")==="map",St=te.get("icon-text-fit")!=="none",Lt=te.get("symbol-z-order")==="viewport-y",Kt=dt&&(ot||!X.hasIconData()||rt),Rt=ot&&(dt||!X.hasTextData()||Ze);!X.collisionArrays&&Ie&&X.deserializeCollisionBoxes(Ie);const Jt=this.retainedQueryData[X.bucketInstanceId].tileID,Bi=this.terrain?(oi,ki)=>this.terrain.getElevation(Jt,oi,ki):null,ar=(oi,ki)=>{var xi,Hr;if(Q[oi.crossTileID])return;if(Ce)return void(this.placements[oi.crossTileID]=new _t(!1,!1,!1));let or=!1,Mi=!1,lr=!0,Kr=null,kr={box:null,offscreen:null},rn={box:null,offscreen:null},bs=null,Zr=null,Vs=null,Un=0,wn=0,Mn=0;ki.textFeatureIndex?Un=ki.textFeatureIndex:oi.useRuntimeCollisionCircles&&(Un=oi.featureIndex),ki.verticalTextFeatureIndex&&(wn=ki.verticalTextFeatureIndex);const fo=ki.textBox;if(fo){const is=hs=>{let as=D.WritingMode.horizontal;if(X.allowVerticalPlacement&&!hs&&this.prevPlacement){const Es=this.prevPlacement.placedOrientations[oi.crossTileID];Es&&(this.placedOrientations[oi.crossTileID]=Es,as=Es,this.markUsedOrientation(X,as,oi))}return as},cs=(hs,as)=>{if(X.allowVerticalPlacement&&oi.numVerticalGlyphVertices>0&&ki.verticalTextBox){for(const Es of X.writingModes)if(Es===D.WritingMode.vertical?(kr=as(),rn=kr):kr=hs(),kr&&kr.box&&kr.box.length)break}else kr=hs()},Cs=oi.textAnchorOffsetStartIndex,po=oi.textAnchorOffsetEndIndex;if(po===Cs){const hs=(as,Es)=>{const Gr=this.collisionIndex.placeCollisionBox(as,Ye,ve,le,Je.predicate,Bi);return Gr&&Gr.box&&Gr.box.length&&(this.markUsedOrientation(X,Es,oi),this.placedOrientations[oi.crossTileID]=Es),Gr};cs(()=>hs(fo,D.WritingMode.horizontal),()=>{const as=ki.verticalTextBox;return X.allowVerticalPlacement&&oi.numVerticalGlyphVertices>0&&as?hs(as,D.WritingMode.vertical):{box:null,offscreen:null}}),is(kr&&kr.box&&kr.box.length)}else{let hs=D.TextAnchorEnum[(Hr=(xi=this.prevPlacement)===null||xi===void 0?void 0:xi.variableOffsets[oi.crossTileID])===null||Hr===void 0?void 0:Hr.anchor];const as=(Gr,Yn,bn)=>{const _a=Gr.x2-Gr.x1,Gl=Gr.y2-Gr.y1,Ka=oi.textBoxScale,fA=St&&Bt==="never"?Yn:null;let Ga={box:[],offscreen:!1},Xr=Ye==="never"?1:2,sl="never";hs&&Xr++;for(let El=0;El<Xr;El++){for(let jn=Cs;jn<po;jn++){const ya=X.textAnchorOffsets.get(jn);if(hs&&ya.textAnchor!==hs)continue;const go=this.attemptAnchorPlacement(ya,Gr,_a,Gl,Ka,gt,It,ve,le,Je,sl,oi,X,bn,fA,Bi);if(go&&(Ga=go.placedGlyphBoxes,Ga&&Ga.box&&Ga.box.length))return or=!0,Kr=go.shift,Ga}hs?hs=null:sl=Ye}return Ga};cs(()=>as(fo,ki.iconBox,D.WritingMode.horizontal),()=>{const Gr=ki.verticalTextBox;return X.allowVerticalPlacement&&!(kr&&kr.box&&kr.box.length)&&oi.numVerticalGlyphVertices>0&&Gr?as(Gr,ki.verticalIconBox,D.WritingMode.vertical):{box:null,offscreen:null}}),kr&&(or=kr.box,lr=kr.offscreen);const Es=is(kr&&kr.box);if(!or&&this.prevPlacement){const Gr=this.prevPlacement.variableOffsets[oi.crossTileID];Gr&&(this.variableOffsets[oi.crossTileID]=Gr,this.markUsedJustification(X,Gr.anchor,oi,Es))}}}if(bs=kr,or=bs&&bs.box&&bs.box.length>0,lr=bs&&bs.offscreen,oi.useRuntimeCollisionCircles){const is=X.text.placedSymbolArray.get(oi.centerJustifiedTextSymbolIndex),cs=D.evaluateSizeForFeature(X.textSizeData,Qe,is),Cs=te.get("text-padding");Zr=this.collisionIndex.placeCollisionCircles(Ye,is,X.lineVertexArray,X.glyphOffsetArray,cs,le,he,pe,G,It,Je.predicate,oi.collisionCircleDiameter,Cs,Bi),Zr.circles.length&&Zr.collisionDetected&&!G&&D.warnOnce("Collisions detected, but collision boxes are not shown"),or=dt||Zr.circles.length>0&&!Zr.collisionDetected,lr=lr&&Zr.offscreen}if(ki.iconFeatureIndex&&(Mn=ki.iconFeatureIndex),ki.iconBox){const is=cs=>{const Cs=St&&Kr?ni(cs,Kr.x,Kr.y,gt,It,this.transform.angle):cs;return this.collisionIndex.placeCollisionBox(Cs,Bt,ve,le,Je.predicate,Bi)};rn&&rn.box&&rn.box.length&&ki.verticalIconBox?(Vs=is(ki.verticalIconBox),Mi=Vs.box.length>0):(Vs=is(ki.iconBox),Mi=Vs.box.length>0),lr=lr&&Vs.offscreen}const ma=Ze||oi.numHorizontalGlyphVertices===0&&oi.numVerticalGlyphVertices===0,Xn=rt||oi.numIconVertices===0;if(ma||Xn?Xn?ma||(Mi=Mi&&or):or=Mi&&or:Mi=or=Mi&&or,or&&bs&&bs.box&&this.collisionIndex.insertCollisionBox(bs.box,Ye,te.get("text-ignore-placement"),X.bucketInstanceId,rn&&rn.box&&wn?wn:Un,Je.ID),Mi&&Vs&&this.collisionIndex.insertCollisionBox(Vs.box,Bt,te.get("icon-ignore-placement"),X.bucketInstanceId,Mn,Je.ID),Zr&&(or&&this.collisionIndex.insertCollisionCircles(Zr.circles,Ye,te.get("text-ignore-placement"),X.bucketInstanceId,Un,Je.ID),G)){const is=X.bucketInstanceId;let cs=this.collisionCircleArrays[is];cs===void 0&&(cs=this.collisionCircleArrays[is]=new xt);for(let Cs=0;Cs<Zr.circles.length;Cs+=4)cs.circles.push(Zr.circles[Cs+0]),cs.circles.push(Zr.circles[Cs+1]),cs.circles.push(Zr.circles[Cs+2]),cs.circles.push(Zr.collisionDetected?1:0)}if(oi.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(X.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[oi.crossTileID]=new _t(or||Kt,Mi||Rt,lr||X.justReloaded),Q[oi.crossTileID]=!0};if(Lt){if(x.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const oi=X.getSortedSymbolIndexes(this.transform.angle);for(let ki=oi.length-1;ki>=0;--ki){const xi=oi[ki];ar(X.symbolInstances.get(xi),X.collisionArrays[xi])}}else for(let oi=x.symbolInstanceStart;oi<x.symbolInstanceEnd;oi++)ar(X.symbolInstances.get(oi),X.collisionArrays[oi]);if(G&&X.bucketInstanceId in this.collisionCircleArrays){const oi=this.collisionCircleArrays[X.bucketInstanceId];D.invert(oi.invProjMatrix,le),oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}X.justReloaded=!1}markUsedJustification(x,Q,G,X){let te;te=X===D.WritingMode.vertical?G.verticalPlacedTextSymbolIndex:{left:G.leftJustifiedTextSymbolIndex,center:G.centerJustifiedTextSymbolIndex,right:G.rightJustifiedTextSymbolIndex}[D.getAnchorJustification(Q)];const le=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex,G.verticalPlacedTextSymbolIndex];for(const he of le)he>=0&&(x.text.placedSymbolArray.get(he).crossTileID=te>=0&&he!==te?0:G.crossTileID)}markUsedOrientation(x,Q,G){const X=Q===D.WritingMode.horizontal||Q===D.WritingMode.horizontalOnly?Q:0,te=Q===D.WritingMode.vertical?Q:0,le=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex];for(const he of le)x.text.placedSymbolArray.get(he).placedOrientation=X;G.verticalPlacedTextSymbolIndex&&(x.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).placedOrientation=te)}commit(x){this.commitTime=x,this.zoomAtLastRecencyCheck=this.transform.zoom;const Q=this.prevPlacement;let G=!1;this.prevZoomAdjustment=Q?Q.zoomAdjustment(this.transform.zoom):0;const X=Q?Q.symbolFadeChange(x):1,te=Q?Q.opacities:{},le=Q?Q.variableOffsets:{},he=Q?Q.placedOrientations:{};for(const pe in this.placements){const ve=this.placements[pe],Ce=te[pe];Ce?(this.opacities[pe]=new st(Ce,X,ve.text,ve.icon),G=G||ve.text!==Ce.text.placed||ve.icon!==Ce.icon.placed):(this.opacities[pe]=new st(null,X,ve.text,ve.icon,ve.skipFade),G=G||ve.text||ve.icon)}for(const pe in te){const ve=te[pe];if(!this.opacities[pe]){const Ce=new st(ve,X,!1,!1);Ce.isHidden()||(this.opacities[pe]=Ce,G=G||ve.text.placed||ve.icon.placed)}}for(const pe in le)this.variableOffsets[pe]||!this.opacities[pe]||this.opacities[pe].isHidden()||(this.variableOffsets[pe]=le[pe]);for(const pe in he)this.placedOrientations[pe]||!this.opacities[pe]||this.opacities[pe].isHidden()||(this.placedOrientations[pe]=he[pe]);if(Q&&Q.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");G?this.lastPlacementChangeTime=x:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=Q?Q.lastPlacementChangeTime:x)}updateLayerOpacities(x,Q){const G={};for(const X of Q){const te=X.getBucket(x);te&&X.latestFeatureIndex&&x.id===te.layerIds[0]&&this.updateBucketOpacities(te,G,X.collisionBoxArray)}}updateBucketOpacities(x,Q,G){x.hasTextData()&&(x.text.opacityVertexArray.clear(),x.text.hasVisibleVertices=!1),x.hasIconData()&&(x.icon.opacityVertexArray.clear(),x.icon.hasVisibleVertices=!1),x.hasIconCollisionBoxData()&&x.iconCollisionBox.collisionVertexArray.clear(),x.hasTextCollisionBoxData()&&x.textCollisionBox.collisionVertexArray.clear();const X=x.layers[0],te=X.layout,le=new st(null,0,!1,!1,!0),he=te.get("text-allow-overlap"),pe=te.get("icon-allow-overlap"),ve=X._unevaluatedLayout.hasValue("text-variable-anchor")||X._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ce=te.get("text-rotation-alignment")==="map",Ie=te.get("text-pitch-alignment")==="map",Qe=te.get("icon-text-fit")!=="none",Je=new st(null,0,he&&(pe||!x.hasIconData()||te.get("icon-optional")),pe&&(he||!x.hasTextData()||te.get("text-optional")),!0);!x.collisionArrays&&G&&(x.hasIconCollisionBoxData()||x.hasTextCollisionBoxData())&&x.deserializeCollisionBoxes(G);const Ze=(rt,Ye,dt)=>{for(let Bt=0;Bt<Ye/4;Bt++)rt.opacityVertexArray.emplaceBack(dt);rt.hasVisibleVertices=rt.hasVisibleVertices||dt!==Zi};for(let rt=0;rt<x.symbolInstances.length;rt++){const Ye=x.symbolInstances.get(rt),{numHorizontalGlyphVertices:dt,numVerticalGlyphVertices:Bt,crossTileID:ot}=Ye;let gt=this.opacities[ot];Q[ot]?gt=le:gt||(gt=Je,this.opacities[ot]=gt),Q[ot]=!0;const It=Ye.numIconVertices>0,St=this.placedOrientations[Ye.crossTileID],Lt=St===D.WritingMode.vertical,Kt=St===D.WritingMode.horizontal||St===D.WritingMode.horizontalOnly;if(dt>0||Bt>0){const Rt=Pr(gt.text);Ze(x.text,dt,Lt?Zi:Rt),Ze(x.text,Bt,Kt?Zi:Rt);const Jt=gt.text.isHidden();[Ye.rightJustifiedTextSymbolIndex,Ye.centerJustifiedTextSymbolIndex,Ye.leftJustifiedTextSymbolIndex].forEach(oi=>{oi>=0&&(x.text.placedSymbolArray.get(oi).hidden=Jt||Lt?1:0)}),Ye.verticalPlacedTextSymbolIndex>=0&&(x.text.placedSymbolArray.get(Ye.verticalPlacedTextSymbolIndex).hidden=Jt||Kt?1:0);const Bi=this.variableOffsets[Ye.crossTileID];Bi&&this.markUsedJustification(x,Bi.anchor,Ye,St);const ar=this.placedOrientations[Ye.crossTileID];ar&&(this.markUsedJustification(x,"left",Ye,ar),this.markUsedOrientation(x,ar,Ye))}if(It){const Rt=Pr(gt.icon),Jt=!(Qe&&Ye.verticalPlacedIconSymbolIndex&&Lt);Ye.placedIconSymbolIndex>=0&&(Ze(x.icon,Ye.numIconVertices,Jt?Rt:Zi),x.icon.placedSymbolArray.get(Ye.placedIconSymbolIndex).hidden=gt.icon.isHidden()),Ye.verticalPlacedIconSymbolIndex>=0&&(Ze(x.icon,Ye.numVerticalIconVertices,Jt?Zi:Rt),x.icon.placedSymbolArray.get(Ye.verticalPlacedIconSymbolIndex).hidden=gt.icon.isHidden())}if(x.hasIconCollisionBoxData()||x.hasTextCollisionBoxData()){const Rt=x.collisionArrays[rt];if(Rt){let Jt=new D.Point(0,0);if(Rt.textBox||Rt.verticalTextBox){let ar=!0;if(ve){const oi=this.variableOffsets[ot];oi?(Jt=Di(oi.anchor,oi.width,oi.height,oi.textOffset,oi.textBoxScale),Ce&&Jt._rotate(Ie?this.transform.angle:-this.transform.angle)):ar=!1}Rt.textBox&&Ui(x.textCollisionBox.collisionVertexArray,gt.text.placed,!ar||Lt,Jt.x,Jt.y),Rt.verticalTextBox&&Ui(x.textCollisionBox.collisionVertexArray,gt.text.placed,!ar||Kt,Jt.x,Jt.y)}const Bi=!!(!Kt&&Rt.verticalIconBox);Rt.iconBox&&Ui(x.iconCollisionBox.collisionVertexArray,gt.icon.placed,Bi,Qe?Jt.x:0,Qe?Jt.y:0),Rt.verticalIconBox&&Ui(x.iconCollisionBox.collisionVertexArray,gt.icon.placed,!Bi,Qe?Jt.x:0,Qe?Jt.y:0)}}}if(x.sortFeatures(this.transform.angle),this.retainedQueryData[x.bucketInstanceId]&&(this.retainedQueryData[x.bucketInstanceId].featureSortOrder=x.featureSortOrder),x.hasTextData()&&x.text.opacityVertexBuffer&&x.text.opacityVertexBuffer.updateData(x.text.opacityVertexArray),x.hasIconData()&&x.icon.opacityVertexBuffer&&x.icon.opacityVertexBuffer.updateData(x.icon.opacityVertexArray),x.hasIconCollisionBoxData()&&x.iconCollisionBox.collisionVertexBuffer&&x.iconCollisionBox.collisionVertexBuffer.updateData(x.iconCollisionBox.collisionVertexArray),x.hasTextCollisionBoxData()&&x.textCollisionBox.collisionVertexBuffer&&x.textCollisionBox.collisionVertexBuffer.updateData(x.textCollisionBox.collisionVertexArray),x.text.opacityVertexArray.length!==x.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${x.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${x.text.layoutVertexArray.length}) / 4`);if(x.icon.opacityVertexArray.length!==x.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${x.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${x.icon.layoutVertexArray.length}) / 4`);if(x.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[x.bucketInstanceId];x.placementInvProjMatrix=rt.invProjMatrix,x.placementViewportMatrix=rt.viewportMatrix,x.collisionCircleArray=rt.circles,delete this.collisionCircleArrays[x.bucketInstanceId]}}symbolFadeChange(x){return this.fadeDuration===0?1:(x-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(x){return Math.max(0,(this.transform.zoom-x)/1.5)}hasTransitions(x){return this.stale||x-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(x,Q){const G=this.zoomAtLastRecencyCheck===Q?1-this.zoomAdjustment(Q):1;return this.zoomAtLastRecencyCheck=Q,this.commitTime+this.fadeDuration*G>x}setStale(){this.stale=!0}}function Ui(J,x,Q,G,X){J.emplaceBack(x?1:0,Q?1:0,G||0,X||0),J.emplaceBack(x?1:0,Q?1:0,G||0,X||0),J.emplaceBack(x?1:0,Q?1:0,G||0,X||0),J.emplaceBack(x?1:0,Q?1:0,G||0,X||0)}const Qi=Math.pow(2,25),hr=Math.pow(2,24),Ki=Math.pow(2,17),Xt=Math.pow(2,16),wr=Math.pow(2,9),bi=Math.pow(2,8),Sr=Math.pow(2,1);function Pr(J){if(J.opacity===0&&!J.placed)return 0;if(J.opacity===1&&J.placed)return 4294967295;const x=J.placed?1:0,Q=Math.floor(127*J.opacity);return Q*Qi+x*hr+Q*Ki+x*Xt+Q*wr+x*bi+Q*Sr+x}const Zi=0;class pi{constructor(x){this._sortAcrossTiles=x.layout.get("symbol-z-order")!=="viewport-y"&&!x.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(x,Q,G,X,te){const le=this._bucketParts;for(;this._currentTileIndex<x.length;)if(Q.getBucketParts(le,X,x[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,te())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,le.sort((he,pe)=>he.sortKey-pe.sortKey));this._currentPartIndex<le.length;)if(Q.placeLayerBucketPart(le[this._currentPartIndex],this._seenCrossTileIDs,G),this._currentPartIndex++,te())return!0;return!1}}class _s{constructor(x,Q,G,X,te,le,he,pe){this.placement=new ei(x,Q,le,he,pe),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=X,this._showCollisionBoxes=te,this._done=!1}isDone(){return this._done}continuePlacement(x,Q,G){const X=D.browser.now(),te=()=>!this._forceFullPlacement&&D.browser.now()-X>2;for(;this._currentPlacementIndex>=0;){const le=Q[x[this._currentPlacementIndex]],he=this.placement.collisionIndex.transform.zoom;if(le.type==="symbol"&&(!le.minzoom||le.minzoom<=he)&&(!le.maxzoom||le.maxzoom>he)){if(this._inProgressLayer||(this._inProgressLayer=new pi(le)),this._inProgressLayer.continuePlacement(G[le.source],this.placement,this._showCollisionBoxes,le,te))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(x){return this.placement.commit(x),this.placement}}const dr=512/D.EXTENT/2;class Dt{constructor(x,Q,G){this.tileID=x,this.bucketInstanceId=G,this._symbolsByKey={};const X=new Map;for(let te=0;te<Q.length;te++){const le=Q.get(te),he=le.key,pe=X.get(he);pe?pe.push(le):X.set(he,[le])}for(const[te,le]of X){const he={positions:le.map(pe=>({x:Math.floor(pe.anchorX*dr),y:Math.floor(pe.anchorY*dr)})),crossTileIDs:le.map(pe=>pe.crossTileID)};if(he.positions.length>128){const pe=new D.KDBush(he.positions.length,16,Uint16Array);for(const{x:ve,y:Ce}of he.positions)pe.add(ve,Ce);pe.finish(),delete he.positions,he.index=pe}this._symbolsByKey[te]=he}}getScaledCoordinates(x,Q){const{x:G,y:X,z:te}=this.tileID.canonical,{x:le,y:he,z:pe}=Q.canonical,ve=dr/Math.pow(2,pe-te),Ce=(he*D.EXTENT+x.anchorY)*ve,Ie=X*D.EXTENT*dr;return{x:Math.floor((le*D.EXTENT+x.anchorX)*ve-G*D.EXTENT*dr),y:Math.floor(Ce-Ie)}}findMatches(x,Q,G){const X=this.tileID.canonical.z<Q.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Q.canonical.z);for(let te=0;te<x.length;te++){const le=x.get(te);if(le.crossTileID)continue;const he=this._symbolsByKey[le.key];if(!he)continue;const pe=this.getScaledCoordinates(le,Q);if(he.index){const ve=he.index.range(pe.x-X,pe.y-X,pe.x+X,pe.y+X).sort();for(const Ce of ve){const Ie=he.crossTileIDs[Ce];if(!G[Ie]){G[Ie]=!0,le.crossTileID=Ie;break}}}else if(he.positions)for(let ve=0;ve<he.positions.length;ve++){const Ce=he.positions[ve],Ie=he.crossTileIDs[ve];if(Math.abs(Ce.x-pe.x)<=X&&Math.abs(Ce.y-pe.y)<=X&&!G[Ie]){G[Ie]=!0,le.crossTileID=Ie;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:x})=>x)}}class Yr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ys{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(x){const Q=Math.round((x-this.lng)/360);if(Q!==0)for(const G in this.indexes){const X=this.indexes[G],te={};for(const le in X){const he=X[le];he.tileID=he.tileID.unwrapTo(he.tileID.wrap+Q),te[he.tileID.key]=he}this.indexes[G]=te}this.lng=x}addBucket(x,Q,G){if(this.indexes[x.overscaledZ]&&this.indexes[x.overscaledZ][x.key]){if(this.indexes[x.overscaledZ][x.key].bucketInstanceId===Q.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(x.overscaledZ,this.indexes[x.overscaledZ][x.key])}for(let te=0;te<Q.symbolInstances.length;te++)Q.symbolInstances.get(te).crossTileID=0;this.usedCrossTileIDs[x.overscaledZ]||(this.usedCrossTileIDs[x.overscaledZ]={});const X=this.usedCrossTileIDs[x.overscaledZ];for(const te in this.indexes){const le=this.indexes[te];if(Number(te)>x.overscaledZ)for(const he in le){const pe=le[he];pe.tileID.isChildOf(x)&&pe.findMatches(Q.symbolInstances,x,X)}else{const he=le[x.scaledTo(Number(te)).key];he&&he.findMatches(Q.symbolInstances,x,X)}}for(let te=0;te<Q.symbolInstances.length;te++){const le=Q.symbolInstances.get(te);le.crossTileID||(le.crossTileID=G.generate(),X[le.crossTileID]=!0)}return this.indexes[x.overscaledZ]===void 0&&(this.indexes[x.overscaledZ]={}),this.indexes[x.overscaledZ][x.key]=new Dt(x,Q.symbolInstances,Q.bucketInstanceId),!0}removeBucketCrossTileIDs(x,Q){for(const G of Q.getCrossTileIDsLists())for(const X of G)delete this.usedCrossTileIDs[x][X]}removeStaleBuckets(x){let Q=!1;for(const G in this.indexes){const X=this.indexes[G];for(const te in X)x[X[te].bucketInstanceId]||(this.removeBucketCrossTileIDs(G,X[te]),delete X[te],Q=!0)}return Q}}class _r{constructor(){this.layerIndexes={},this.crossTileIDs=new Yr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(x,Q,G){let X=this.layerIndexes[x.id];X===void 0&&(X=this.layerIndexes[x.id]=new Ys);let te=!1;const le={};X.handleWrapJump(G);for(const he of Q){const pe=he.getBucket(x);pe&&x.id===pe.layerIds[0]&&(pe.bucketInstanceId||(pe.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(he.tileID,pe,this.crossTileIDs)&&(te=!0),le[pe.bucketInstanceId]=!0)}return X.removeStaleBuckets(le)&&(te=!0),te}pruneUnusedLayers(x){const Q={};x.forEach(G=>{Q[G]=!0});for(const G in this.layerIndexes)Q[G]||delete this.layerIndexes[G]}}const Br=(J,x)=>D.emitValidationErrors(J,x&&x.filter(Q=>Q.identifier!=="source.canvas")),Cr=D.pick(D.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),rr=D.pick(D.operations,["setCenter","setZoom","setBearing","setPitch"]),Lr=D.emptyStyle();class sr extends D.Evented{constructor(x,Q={}){super(),this.map=x,this.dispatcher=new I(Vi(),this,x._getMapId()),this.imageManager=new Pt,this.imageManager.setEventedParent(this),this.glyphManager=new Ei(x._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new _r,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new D.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",D.getReferrer());const G=this;this._rtlTextPluginCallback=sr.registerForPluginStateChange(X=>{G.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:X.pluginStatus,pluginURL:X.pluginURL},(te,le)=>{if(D.triggerPluginCompletionEvent(te),le&&le.every(he=>he))for(const he in G.sourceCaches){const pe=G.sourceCaches[he].getSource().type;pe!=="vector"&&pe!=="geojson"||G.sourceCaches[he].reload()}})}),this.on("data",X=>{if(X.dataType!=="source"||X.sourceDataType!=="metadata")return;const te=this.sourceCaches[X.sourceId];if(!te)return;const le=te.getSource();if(le&&le.vectorLayerIds)for(const he in this._layers){const pe=this._layers[he];pe.source===le.id&&this._validateLayer(pe)}})}loadURL(x,Q={},G){this.fire(new D.Event("dataloading",{dataType:"style"})),Q.validate=typeof Q.validate!="boolean"||Q.validate;const X=this.map._requestManager.transformRequest(x,We.Style);this._request=D.getJSON(X,(te,le)=>{this._request=null,te?this.fire(new D.ErrorEvent(te)):le&&this._load(le,Q,G)})}loadJSON(x,Q={},G){this.fire(new D.Event("dataloading",{dataType:"style"})),this._request=D.browser.frame(()=>{this._request=null,Q.validate=Q.validate!==!1,this._load(x,Q,G)})}loadEmpty(){this.fire(new D.Event("dataloading",{dataType:"style"})),this._load(Lr,{validate:!1})}_load(x,Q,G){var X;const te=Q.transformStyle?Q.transformStyle(G,x):x;if(!Q.validate||!Br(this,D.validateStyle(te))){this._loaded=!0,this.stylesheet=te;for(const le in te.sources)this.addSource(le,te.sources[le],{validate:!1});te.sprite?this._loadSprite(te.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(te.glyphs),this._createLayers(),this.light=new d(this.stylesheet.light),this.map.setTerrain((X=this.stylesheet.terrain)!==null&&X!==void 0?X:null),this.fire(new D.Event("data",{dataType:"style"})),this.fire(new D.Event("style.load"))}}_createLayers(){const x=D.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",x),this._order=x.map(Q=>Q.id),this._layers={},this._serializedLayers=null;for(const Q of x){const G=D.createStyleLayer(Q);G.setEventedParent(this,{layer:{id:Q.id}}),this._layers[Q.id]=G}}_loadSprite(x,Q=!1,G=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(X,te,le,he){const pe=qt(X),ve=pe.length,Ce=le>1?"@2x":"",Ie={},Qe={},Je={};for(const{id:Ze,url:rt}of pe){const Ye=te.transformRequest(te.normalizeSpriteURL(rt,Ce,".json"),We.SpriteJSON),dt=`${Ze}_${Ye.url}`;Ie[dt]=D.getJSON(Ye,(gt,It)=>{delete Ie[dt],Qe[Ze]=It,Vt(he,Qe,Je,gt,ve)});const Bt=te.transformRequest(te.normalizeSpriteURL(rt,Ce,".png"),We.SpriteImage),ot=`${Ze}_${Bt.url}`;Ie[ot]=$e.getImage(Bt,(gt,It)=>{delete Ie[ot],Je[Ze]=It,Vt(he,Qe,Je,gt,ve)})}return{cancel(){for(const Ze of Object.values(Ie))Ze.cancel()}}}(x,this.map._requestManager,this.map.getPixelRatio(),(X,te)=>{if(this._spriteRequest=null,X)this.fire(new D.ErrorEvent(X));else if(te)for(const le in te){this._spritesImagesIds[le]=[];const he=this._spritesImagesIds[le]?this._spritesImagesIds[le].filter(pe=>!(pe in te)):[];for(const pe of he)this.imageManager.removeImage(pe),this._changedImages[pe]=!0;for(const pe in te[le]){const ve=le==="default"?pe:`${le}:${pe}`;this._spritesImagesIds[le].push(ve),ve in this.imageManager.images?this.imageManager.updateImage(ve,te[le][pe],!1):this.imageManager.addImage(ve,te[le][pe]),Q&&(this._changedImages[ve]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),Q&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"})),G&&G(X)})}_unloadSprite(){for(const x of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(x),this._changedImages[x]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"}))}_validateLayer(x){const Q=this.sourceCaches[x.source];if(!Q)return;const G=x.sourceLayer;if(!G)return;const X=Q.getSource();(X.type==="geojson"||X.vectorLayerIds&&X.vectorLayerIds.indexOf(G)===-1)&&this.fire(new D.ErrorEvent(new Error(`Source layer "${G}" does not exist on source "${X.id}" as specified by style layer "${x.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(x){const Q=this._serializedAllLayers();if(!x||x.length===0)return Object.values(Q);const G=[];for(const X of x)Q[X]&&G.push(Q[X]);return G}_serializedAllLayers(){let x=this._serializedLayers;if(x)return x;x=this._serializedLayers={};const Q=Object.keys(this._layers);for(const G of Q){const X=this._layers[G];X.type!=="custom"&&(x[G]=X.serialize())}return x}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(const x in this._layers)if(this._layers[x].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(x){if(!this._loaded)return;const Q=this._changed;if(this._changed){const X=Object.keys(this._updatedLayers),te=Object.keys(this._removedLayers);(X.length||te.length)&&this._updateWorkerLayers(X,te);for(const le in this._updatedSources){const he=this._updatedSources[le];if(he==="reload")this._reloadSource(le);else{if(he!=="clear")throw new Error(`Invalid action ${he}`);this._clearSource(le)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const le in this._updatedPaintProps)this._layers[le].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}const G={};for(const X in this.sourceCaches){const te=this.sourceCaches[X];G[X]=te.used,te.used=!1}for(const X of this._order){const te=this._layers[X];te.recalculate(x,this._availableImages),!te.isHidden(x.zoom)&&te.source&&(this.sourceCaches[te.source].used=!0)}for(const X in G){const te=this.sourceCaches[X];G[X]!==te.used&&te.fire(new D.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:X}))}this.light.recalculate(x),this.z=x.zoom,Q&&this.fire(new D.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const x=Object.keys(this._changedImages);if(x.length){for(const Q in this.sourceCaches)this.sourceCaches[Q].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const x in this.sourceCaches)this.sourceCaches[x].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(x,Q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(x),removedIds:Q})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(x,Q={}){this._checkLoaded();const G=this.serialize();if(x=Q.transformStyle?Q.transformStyle(G,x):x,Br(this,D.validateStyle(x)))return!1;(x=D.clone$1(x)).layers=D.derefLayers(x.layers);const X=D.diffStyles(G,x).filter(le=>!(le.command in rr));if(X.length===0)return!1;const te=X.filter(le=>!(le.command in Cr));if(te.length>0)throw new Error(`Unimplemented: ${te.map(le=>le.command).join(", ")}.`);for(const le of X)le.command!=="setTransition"&&this[le.command].apply(this,le.args);return this.stylesheet=x,!0}addImage(x,Q){if(this.getImage(x))return this.fire(new D.ErrorEvent(new Error(`An image named "${x}" already exists.`)));this.imageManager.addImage(x,Q),this._afterImageUpdated(x)}updateImage(x,Q){this.imageManager.updateImage(x,Q)}getImage(x){return this.imageManager.getImage(x)}removeImage(x){if(!this.getImage(x))return this.fire(new D.ErrorEvent(new Error(`An image named "${x}" does not exist.`)));this.imageManager.removeImage(x),this._afterImageUpdated(x)}_afterImageUpdated(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(x,Q,G={}){if(this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error(`Source "${x}" already exists.`);if(!Q.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(Q).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(Q.type)>=0&&this._validate(D.validateStyle.source,`sources.${x}`,Q,null,G))return;this.map&&this.map._collectResourceTiming&&(Q.collectResourceTiming=!0);const X=this.sourceCaches[x]=new $t(x,Q,this.dispatcher);X.style=this,X.setEventedParent(this,()=>({isSourceLoaded:X.loaded(),source:X.serialize(),sourceId:x})),X.onAdd(this.map),this._changed=!0}removeSource(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(const G in this._layers)if(this._layers[G].source===x)return this.fire(new D.ErrorEvent(new Error(`Source "${x}" cannot be removed while layer "${G}" is using it.`)));const Q=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],Q.fire(new D.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),Q.setEventedParent(null),Q.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(x,Q){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error(`There is no source with this ID=${x}`);const G=this.sourceCaches[x].getSource();if(G.type!=="geojson")throw new Error(`geojsonSource.type is ${G.type}, which is !== 'geojson`);G.setData(Q),this._changed=!0}getSource(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()}addLayer(x,Q,G={}){this._checkLoaded();const X=x.id;if(this.getLayer(X))return void this.fire(new D.ErrorEvent(new Error(`Layer "${X}" already exists on this map.`)));let te;if(x.type==="custom"){if(Br(this,D.validateCustomStyleLayer(x)))return;te=D.createStyleLayer(x)}else{if("source"in x&&typeof x.source=="object"&&(this.addSource(X,x.source),x=D.clone$1(x),x=D.extend(x,{source:X})),this._validate(D.validateStyle.layer,`layers.${X}`,x,{arrayIndex:-1},G))return;te=D.createStyleLayer(x),this._validateLayer(te),te.setEventedParent(this,{layer:{id:X}})}const le=Q?this._order.indexOf(Q):this._order.length;if(Q&&le===-1)this.fire(new D.ErrorEvent(new Error(`Cannot add layer "${X}" before non-existing layer "${Q}".`)));else{if(this._order.splice(le,0,X),this._layerOrderChanged=!0,this._layers[X]=te,this._removedLayers[X]&&te.source&&te.type!=="custom"){const he=this._removedLayers[X];delete this._removedLayers[X],he.type!==te.type?this._updatedSources[te.source]="clear":(this._updatedSources[te.source]="reload",this.sourceCaches[te.source].pause())}this._updateLayer(te),te.onAdd&&te.onAdd(this.map)}}moveLayer(x,Q){if(this._checkLoaded(),this._changed=!0,!this._layers[x])return void this.fire(new D.ErrorEvent(new Error(`The layer '${x}' does not exist in the map's style and cannot be moved.`)));if(x===Q)return;const G=this._order.indexOf(x);this._order.splice(G,1);const X=Q?this._order.indexOf(Q):this._order.length;Q&&X===-1?this.fire(new D.ErrorEvent(new Error(`Cannot move layer "${x}" before non-existing layer "${Q}".`))):(this._order.splice(X,0,x),this._layerOrderChanged=!0)}removeLayer(x){this._checkLoaded();const Q=this._layers[x];if(!Q)return void this.fire(new D.ErrorEvent(new Error(`Cannot remove non-existing layer "${x}".`)));Q.setEventedParent(null);const G=this._order.indexOf(x);this._order.splice(G,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=Q,delete this._layers[x],this._serializedLayers&&delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],Q.onRemove&&Q.onRemove(this.map)}getLayer(x){return this._layers[x]}hasLayer(x){return x in this._layers}setLayerZoomRange(x,Q,G){this._checkLoaded();const X=this.getLayer(x);X?X.minzoom===Q&&X.maxzoom===G||(Q!=null&&(X.minzoom=Q),G!=null&&(X.maxzoom=G),this._updateLayer(X)):this.fire(new D.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${x}".`)))}setFilter(x,Q,G={}){this._checkLoaded();const X=this.getLayer(x);if(X){if(!D.deepEqual(X.filter,Q))return Q==null?(X.filter=void 0,void this._updateLayer(X)):void(this._validate(D.validateStyle.filter,`layers.${X.id}.filter`,Q,null,G)||(X.filter=D.clone$1(Q),this._updateLayer(X)))}else this.fire(new D.ErrorEvent(new Error(`Cannot filter non-existing layer "${x}".`)))}getFilter(x){return D.clone$1(this.getLayer(x).filter)}setLayoutProperty(x,Q,G,X={}){this._checkLoaded();const te=this.getLayer(x);te?D.deepEqual(te.getLayoutProperty(Q),G)||(te.setLayoutProperty(Q,G,X),this._updateLayer(te)):this.fire(new D.ErrorEvent(new Error(`Cannot style non-existing layer "${x}".`)))}getLayoutProperty(x,Q){const G=this.getLayer(x);if(G)return G.getLayoutProperty(Q);this.fire(new D.ErrorEvent(new Error(`Cannot get style of non-existing layer "${x}".`)))}setPaintProperty(x,Q,G,X={}){this._checkLoaded();const te=this.getLayer(x);te?D.deepEqual(te.getPaintProperty(Q),G)||(te.setPaintProperty(Q,G,X)&&this._updateLayer(te),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new D.ErrorEvent(new Error(`Cannot style non-existing layer "${x}".`)))}getPaintProperty(x,Q){return this.getLayer(x).getPaintProperty(Q)}setFeatureState(x,Q){this._checkLoaded();const G=x.source,X=x.sourceLayer,te=this.sourceCaches[G];if(te===void 0)return void this.fire(new D.ErrorEvent(new Error(`The source '${G}' does not exist in the map's style.`)));const le=te.getSource().type;le==="geojson"&&X?this.fire(new D.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):le!=="vector"||X?(x.id===void 0&&this.fire(new D.ErrorEvent(new Error("The feature id parameter must be provided."))),te.setFeatureState(X,x.id,Q)):this.fire(new D.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(x,Q){this._checkLoaded();const G=x.source,X=this.sourceCaches[G];if(X===void 0)return void this.fire(new D.ErrorEvent(new Error(`The source '${G}' does not exist in the map's style.`)));const te=X.getSource().type,le=te==="vector"?x.sourceLayer:void 0;te!=="vector"||le?Q&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new D.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):X.removeFeatureState(le,x.id,Q):this.fire(new D.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(x){this._checkLoaded();const Q=x.source,G=x.sourceLayer,X=this.sourceCaches[Q];if(X!==void 0)return X.getSource().type!=="vector"||G?(x.id===void 0&&this.fire(new D.ErrorEvent(new Error("The feature id parameter must be provided."))),X.getFeatureState(G,x.id)):void this.fire(new D.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new D.ErrorEvent(new Error(`The source '${Q}' does not exist in the map's style.`)))}getTransition(){return D.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const x=D.mapObject(this.sourceCaches,X=>X.serialize()),Q=this._serializeByIds(this._order),G=this.stylesheet;return D.filterObject({version:G.version,name:G.name,metadata:G.metadata,light:G.light,center:G.center,zoom:G.zoom,bearing:G.bearing,pitch:G.pitch,sprite:G.sprite,glyphs:G.glyphs,transition:G.transition,sources:x,layers:Q},X=>X!==void 0)}_updateLayer(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(x){const Q=le=>this._layers[le].type==="fill-extrusion",G={},X=[];for(let le=this._order.length-1;le>=0;le--){const he=this._order[le];if(Q(he)){G[he]=le;for(const pe of x){const ve=pe[he];if(ve)for(const Ce of ve)X.push(Ce)}}}X.sort((le,he)=>he.intersectionZ-le.intersectionZ);const te=[];for(let le=this._order.length-1;le>=0;le--){const he=this._order[le];if(Q(he))for(let pe=X.length-1;pe>=0;pe--){const ve=X[pe].feature;if(G[ve.layer.id]<le)break;te.push(ve),X.pop()}else for(const pe of x){const ve=pe[he];if(ve)for(const Ce of ve)te.push(Ce.feature)}}return te}queryRenderedFeatures(x,Q,G){Q&&Q.filter&&this._validate(D.validateStyle.filter,"queryRenderedFeatures.filter",Q.filter,null,Q);const X={};if(Q&&Q.layers){if(!Array.isArray(Q.layers))return this.fire(new D.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const he of Q.layers){const pe=this._layers[he];if(!pe)return this.fire(new D.ErrorEvent(new Error(`The layer '${he}' does not exist in the map's style and cannot be queried for features.`))),[];X[pe.source]=!0}}const te=[];Q.availableImages=this._availableImages;const le=this._serializedAllLayers();for(const he in this.sourceCaches)Q.layers&&!X[he]||te.push(pt(this.sourceCaches[he],this._layers,le,x,Q,G));return this.placement&&te.push(function(he,pe,ve,Ce,Ie,Qe,Je){const Ze={},rt=Qe.queryRenderedSymbols(Ce),Ye=[];for(const dt of Object.keys(rt).map(Number))Ye.push(Je[dt]);Ye.sort(Ft);for(const dt of Ye){const Bt=dt.featureIndex.lookupSymbolFeatures(rt[dt.bucketInstanceId],pe,dt.bucketIndex,dt.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,he);for(const ot in Bt){const gt=Ze[ot]=Ze[ot]||[],It=Bt[ot];It.sort((St,Lt)=>{const Kt=dt.featureSortOrder;if(Kt){const Rt=Kt.indexOf(St.featureIndex);return Kt.indexOf(Lt.featureIndex)-Rt}return Lt.featureIndex-St.featureIndex});for(const St of It)gt.push(St)}}for(const dt in Ze)Ze[dt].forEach(Bt=>{const ot=Bt.feature,gt=ve[he[dt].source].getFeatureState(ot.layer["source-layer"],ot.id);ot.source=ot.layer.source,ot.layer["source-layer"]&&(ot.sourceLayer=ot.layer["source-layer"]),ot.state=gt});return Ze}(this._layers,le,this.sourceCaches,x,Q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(te)}querySourceFeatures(x,Q){Q&&Q.filter&&this._validate(D.validateStyle.filter,"querySourceFeatures.filter",Q.filter,null,Q);const G=this.sourceCaches[x];return G?function(X,te){const le=X.getRenderableIds().map(ve=>X.getTileByID(ve)),he=[],pe={};for(let ve=0;ve<le.length;ve++){const Ce=le[ve],Ie=Ce.tileID.canonical.key;pe[Ie]||(pe[Ie]=!0,Ce.querySourceFeatures(he,te))}return he}(G,Q):[]}addSourceType(x,Q,G){return qe(x)?G(new Error(`A source type called "${x}" already exists.`)):(((X,te)=>{ke[X]=te})(x,Q),Q.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:Q.workerSourceURL},G):G(null,null))}getLight(){return this.light.getLight()}setLight(x,Q={}){this._checkLoaded();const G=this.light.getLight();let X=!1;for(const le in x)if(!D.deepEqual(x[le],G[le])){X=!0;break}if(!X)return;const te={now:D.browser.now(),transition:D.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,Q),this.light.updateTransitions(te)}_validate(x,Q,G,X,te={}){return(!te||te.validate!==!1)&&Br(this,x.call(D.validateStyle,D.extend({key:Q,style:this.serialize(),value:G,styleSpec:D.v8Spec},X)))}_remove(x=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),D.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const Q in this._layers)this._layers[Q].setEventedParent(null);for(const Q in this.sourceCaches){const G=this.sourceCaches[Q];G.setEventedParent(null),G.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(x)}_clearSource(x){this.sourceCaches[x].clearTiles()}_reloadSource(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()}_updateSources(x){for(const Q in this.sourceCaches)this.sourceCaches[Q].update(x,this.map.terrain)}_generateCollisionBoxes(){for(const x in this.sourceCaches)this._reloadSource(x)}_updatePlacement(x,Q,G,X,te=!1){let le=!1,he=!1;const pe={};for(const ve of this._order){const Ce=this._layers[ve];if(Ce.type!=="symbol")continue;if(!pe[Ce.source]){const Qe=this.sourceCaches[Ce.source];pe[Ce.source]=Qe.getRenderableIds(!0).map(Je=>Qe.getTileByID(Je)).sort((Je,Ze)=>Ze.tileID.overscaledZ-Je.tileID.overscaledZ||(Je.tileID.isLessThan(Ze.tileID)?-1:1))}const Ie=this.crossTileSymbolIndex.addLayer(Ce,pe[Ce.source],x.center.lng);le=le||Ie}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((te=te||this._layerOrderChanged||G===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.browser.now(),x.zoom))&&(this.pauseablePlacement=new _s(x,this.map.terrain,this._order,te,Q,G,X,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,pe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.browser.now()),he=!0),le&&this.pauseablePlacement.placement.setStale()),he||le)for(const ve of this._order){const Ce=this._layers[ve];Ce.type==="symbol"&&this.placement.updateLayerOpacities(Ce,pe[Ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.browser.now())}_releaseSymbolFadeTiles(){for(const x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()}getImages(x,Q,G){this.imageManager.getImages(Q.icons,G),this._updateTilesForChangedImages();const X=this.sourceCaches[Q.source];X&&X.setDependencies(Q.tileID.key,Q.type,Q.icons)}getGlyphs(x,Q,G){this.glyphManager.getGlyphs(Q.stacks,G);const X=this.sourceCaches[Q.source];X&&X.setDependencies(Q.tileID.key,Q.type,[""])}getResource(x,Q,G){return D.makeRequest(Q,G)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(x,Q={}){this._checkLoaded(),x&&this._validate(D.validateStyle.glyphs,"glyphs",x,null,Q)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=x,this.glyphManager.entries={},this.glyphManager.setURL(x))}addSprite(x,Q,G={},X){this._checkLoaded();const te=[{id:x,url:Q}],le=[...qt(this.stylesheet.sprite),...te];this._validate(D.validateStyle.sprite,"sprite",le,null,G)||(this.stylesheet.sprite=le,this._loadSprite(te,!0,X))}removeSprite(x){this._checkLoaded();const Q=qt(this.stylesheet.sprite);if(Q.find(G=>G.id===x)){if(this._spritesImagesIds[x])for(const G of this._spritesImagesIds[x])this.imageManager.removeImage(G),this._changedImages[G]=!0;Q.splice(Q.findIndex(G=>G.id===x),1),this.stylesheet.sprite=Q.length>0?Q:void 0,delete this._spritesImagesIds[x],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new D.Event("data",{dataType:"style"}))}else this.fire(new D.ErrorEvent(new Error(`Sprite "${x}" doesn't exists on this map.`)))}getSprite(){return qt(this.stylesheet.sprite)}setSprite(x,Q={},G){this._checkLoaded(),x&&this._validate(D.validateStyle.sprite,"sprite",x,null,Q)||(this.stylesheet.sprite=x,x?this._loadSprite(x,!0,G):(this._unloadSprite(),G&&G(null)))}}sr.registerForPluginStateChange=D.registerForPluginStateChange;var jr=D.createLayout([{name:"a_pos",type:"Int16",components:2}]),ss="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ps={prelude:cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:cr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:cr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:cr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:cr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:cr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:cr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:cr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:cr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:cr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:cr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:cr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ss),terrainDepth:cr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ss),terrainCoords:cr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ss)};function cr(J,x){const Q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,G=x.match(/attribute ([\w]+) ([\w]+)/g),X=J.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),le=te?te.concat(X):X,he={};return{fragmentSource:J=J.replace(Q,(pe,ve,Ce,Ie,Qe)=>(he[Qe]=!0,ve==="define"?`
#ifndef HAS_UNIFORM_u_${Qe}
varying ${Ce} ${Ie} ${Qe};
#else
uniform ${Ce} ${Ie} u_${Qe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Qe}
    ${Ce} ${Ie} ${Qe} = u_${Qe};
#endif
`)),vertexSource:x=x.replace(Q,(pe,ve,Ce,Ie,Qe)=>{const Je=Ie==="float"?"vec2":"vec4",Ze=Qe.match(/color/)?"color":Je;return he[Qe]?ve==="define"?`
#ifndef HAS_UNIFORM_u_${Qe}
uniform lowp float u_${Qe}_t;
attribute ${Ce} ${Je} a_${Qe};
varying ${Ce} ${Ie} ${Qe};
#else
uniform ${Ce} ${Ie} u_${Qe};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Qe}
    ${Qe} = a_${Qe};
#else
    ${Ce} ${Ie} ${Qe} = u_${Qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Qe}
    ${Qe} = unpack_mix_${Ze}(a_${Qe}, u_${Qe}_t);
#else
    ${Ce} ${Ie} ${Qe} = u_${Qe};
#endif
`:ve==="define"?`
#ifndef HAS_UNIFORM_u_${Qe}
uniform lowp float u_${Qe}_t;
attribute ${Ce} ${Je} a_${Qe};
#else
uniform ${Ce} ${Ie} u_${Qe};
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_${Qe}
    ${Ce} ${Ie} ${Qe} = a_${Qe};
#else
    ${Ce} ${Ie} ${Qe} = u_${Qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Qe}
    ${Ce} ${Ie} ${Qe} = unpack_mix_${Ze}(a_${Qe}, u_${Qe}_t);
#else
    ${Ce} ${Ie} ${Qe} = u_${Qe};
#endif
`}),staticAttributes:G,staticUniforms:le}}class js{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(x,Q,G,X,te,le,he,pe,ve){this.context=x;let Ce=this.boundPaintVertexBuffers.length!==X.length;for(let Ie=0;!Ce&&Ie<X.length;Ie++)this.boundPaintVertexBuffers[Ie]!==X[Ie]&&(Ce=!0);!this.vao||this.boundProgram!==Q||this.boundLayoutVertexBuffer!==G||Ce||this.boundIndexBuffer!==te||this.boundVertexOffset!==le||this.boundDynamicVertexBuffer!==he||this.boundDynamicVertexBuffer2!==pe||this.boundDynamicVertexBuffer3!==ve?this.freshBind(Q,G,X,te,le,he,pe,ve):(x.bindVertexArray.set(this.vao),he&&he.bind(),te&&te.dynamicDraw&&te.bind(),pe&&pe.bind(),ve&&ve.bind())}freshBind(x,Q,G,X,te,le,he,pe){const ve=x.numAttributes,Ce=this.context,Ie=Ce.gl;this.vao&&this.destroy(),this.vao=Ce.createVertexArray(),Ce.bindVertexArray.set(this.vao),this.boundProgram=x,this.boundLayoutVertexBuffer=Q,this.boundPaintVertexBuffers=G,this.boundIndexBuffer=X,this.boundVertexOffset=te,this.boundDynamicVertexBuffer=le,this.boundDynamicVertexBuffer2=he,this.boundDynamicVertexBuffer3=pe,Q.enableAttributes(Ie,x);for(const Qe of G)Qe.enableAttributes(Ie,x);le&&le.enableAttributes(Ie,x),he&&he.enableAttributes(Ie,x),pe&&pe.enableAttributes(Ie,x),Q.bind(),Q.setVertexAttribPointers(Ie,x,te);for(const Qe of G)Qe.bind(),Qe.setVertexAttribPointers(Ie,x,te);le&&(le.bind(),le.setVertexAttribPointers(Ie,x,te)),X&&X.bind(),he&&(he.bind(),he.setVertexAttribPointers(Ie,x,te)),pe&&(pe.bind(),pe.setVertexAttribPointers(Ie,x,te)),Ce.currentNumAttributes=ve}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ys(J){const x=[];for(let Q=0;Q<J.length;Q++){if(J[Q]===null)continue;const G=J[Q].split(" ");x.push(G.pop())}return x}class Os{constructor(x,Q,G,X,te,le){const he=x.gl;this.program=he.createProgram();const pe=ys(Q.staticAttributes),ve=G?G.getBinderAttributes():[],Ce=pe.concat(ve),Ie=ps.prelude.staticUniforms?ys(ps.prelude.staticUniforms):[],Qe=Q.staticUniforms?ys(Q.staticUniforms):[],Je=G?G.getBinderUniforms():[],Ze=Ie.concat(Qe).concat(Je),rt=[];for(const St of Ze)rt.indexOf(St)<0&&rt.push(St);const Ye=G?G.defines():[];te&&Ye.push("#define OVERDRAW_INSPECTOR;"),le&&Ye.push("#define TERRAIN3D;");const dt=Ye.concat(ps.prelude.fragmentSource,Q.fragmentSource).join(`
`),Bt=Ye.concat(ps.prelude.vertexSource,Q.vertexSource).join(`
`),ot=he.createShader(he.FRAGMENT_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);if(he.shaderSource(ot,dt),he.compileShader(ot),!he.getShaderParameter(ot,he.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${he.getShaderInfoLog(ot)}`);he.attachShader(this.program,ot);const gt=he.createShader(he.VERTEX_SHADER);if(he.isContextLost())return void(this.failedToCreate=!0);if(he.shaderSource(gt,Bt),he.compileShader(gt),!he.getShaderParameter(gt,he.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${he.getShaderInfoLog(gt)}`);he.attachShader(this.program,gt),this.attributes={};const It={};this.numAttributes=Ce.length;for(let St=0;St<this.numAttributes;St++)Ce[St]&&(he.bindAttribLocation(this.program,St,Ce[St]),this.attributes[Ce[St]]=St);if(he.linkProgram(this.program),!he.getProgramParameter(this.program,he.LINK_STATUS))throw new Error(`Program failed to link: ${he.getProgramInfoLog(this.program)}`);he.deleteShader(gt),he.deleteShader(ot);for(let St=0;St<rt.length;St++){const Lt=rt[St];if(Lt&&!It[Lt]){const Kt=he.getUniformLocation(this.program,Lt);Kt&&(It[Lt]=Kt)}}this.fixedUniforms=X(x,It),this.terrainUniforms=((St,Lt)=>({u_depth:new D.Uniform1i(St,Lt.u_depth),u_terrain:new D.Uniform1i(St,Lt.u_terrain),u_terrain_dim:new D.Uniform1f(St,Lt.u_terrain_dim),u_terrain_matrix:new D.UniformMatrix4f(St,Lt.u_terrain_matrix),u_terrain_unpack:new D.Uniform4f(St,Lt.u_terrain_unpack),u_terrain_exaggeration:new D.Uniform1f(St,Lt.u_terrain_exaggeration)}))(x,It),this.binderUniforms=G?G.getUniforms(x,It):[]}draw(x,Q,G,X,te,le,he,pe,ve,Ce,Ie,Qe,Je,Ze,rt,Ye,dt,Bt){const ot=x.gl;if(this.failedToCreate)return;if(x.program.set(this.program),x.setDepthMode(G),x.setStencilMode(X),x.setColorMode(te),x.setCullFace(le),pe){x.activeTexture.set(ot.TEXTURE2),ot.bindTexture(ot.TEXTURE_2D,pe.depthTexture),x.activeTexture.set(ot.TEXTURE3),ot.bindTexture(ot.TEXTURE_2D,pe.texture);for(const It in this.terrainUniforms)this.terrainUniforms[It].set(pe[It])}for(const It in this.fixedUniforms)this.fixedUniforms[It].set(he[It]);rt&&rt.setUniforms(x,this.binderUniforms,Je,{zoom:Ze});let gt=0;switch(Q){case ot.LINES:gt=2;break;case ot.TRIANGLES:gt=3;break;case ot.LINE_STRIP:gt=1}for(const It of Qe.get()){const St=It.vaos||(It.vaos={});(St[ve]||(St[ve]=new js)).bind(x,this,Ce,rt?rt.getPaintVertexBuffers():[],Ie,It.vertexOffset,Ye,dt,Bt),ot.drawElements(Q,It.primitiveLength*gt,ot.UNSIGNED_SHORT,It.primitiveOffset*gt*2)}}}function pn(J,x,Q){const G=1/Le(Q,1,x.transform.tileZoom),X=Math.pow(2,Q.tileID.overscaledZ),te=Q.tileSize*Math.pow(2,x.transform.tileZoom)/X,le=te*(Q.tileID.canonical.x+Q.tileID.wrap*X),he=te*Q.tileID.canonical.y;return{u_image:0,u_texsize:Q.imageAtlasTexture.size,u_scale:[G,J.fromScale,J.toScale],u_fade:J.t,u_pixel_coord_upper:[le>>16,he>>16],u_pixel_coord_lower:[65535&le,65535&he]}}const Qr=(J,x,Q,G)=>{const X=x.style.light,te=X.properties.get("position"),le=[te.x,te.y,te.z],he=function(){var ve=new D.ARRAY_TYPE(9);return D.ARRAY_TYPE!=Float32Array&&(ve[1]=0,ve[2]=0,ve[3]=0,ve[5]=0,ve[6]=0,ve[7]=0),ve[0]=1,ve[4]=1,ve[8]=1,ve}();X.properties.get("anchor")==="viewport"&&function(ve,Ce){var Ie=Math.sin(Ce),Qe=Math.cos(Ce);ve[0]=Qe,ve[1]=Ie,ve[2]=0,ve[3]=-Ie,ve[4]=Qe,ve[5]=0,ve[6]=0,ve[7]=0,ve[8]=1}(he,-x.transform.angle),function(ve,Ce,Ie){var Qe=Ce[0],Je=Ce[1],Ze=Ce[2];ve[0]=Qe*Ie[0]+Je*Ie[3]+Ze*Ie[6],ve[1]=Qe*Ie[1]+Je*Ie[4]+Ze*Ie[7],ve[2]=Qe*Ie[2]+Je*Ie[5]+Ze*Ie[8]}(le,le,he);const pe=X.properties.get("color");return{u_matrix:J,u_lightpos:le,u_lightintensity:X.properties.get("intensity"),u_lightcolor:[pe.r,pe.g,pe.b],u_vertical_gradient:+Q,u_opacity:G}},es=(J,x,Q,G,X,te,le)=>D.extend(Qr(J,x,Q,G),pn(te,x,le),{u_height_factor:-Math.pow(2,X.overscaledZ)/le.tileSize/8}),xo=J=>({u_matrix:J}),Zs=(J,x,Q,G)=>D.extend(xo(J),pn(Q,x,G)),An=(J,x)=>({u_matrix:J,u_world:x}),ta=(J,x,Q,G,X)=>D.extend(Zs(J,x,Q,G),{u_world:X}),ja=(J,x,Q,G)=>{const X=J.transform;let te,le;if(G.paint.get("circle-pitch-alignment")==="map"){const he=Le(Q,1,X.zoom);te=!0,le=[he,he]}else te=!1,le=X.pixelsToGLUnits;return{u_camera_to_center_distance:X.cameraToCenterDistance,u_scale_with_map:+(G.paint.get("circle-pitch-scale")==="map"),u_matrix:J.translatePosMatrix(x.posMatrix,Q,G.paint.get("circle-translate"),G.paint.get("circle-translate-anchor")),u_pitch_with_map:+te,u_device_pixel_ratio:J.pixelRatio,u_extrude_scale:le}},Qn=(J,x,Q)=>{const G=Le(Q,1,x.zoom),X=Math.pow(2,x.zoom-Q.tileID.overscaledZ),te=Q.tileID.overscaleFactor();return{u_matrix:J,u_camera_to_center_distance:x.cameraToCenterDistance,u_pixels_to_tile_units:G,u_extrude_scale:[x.pixelsToGLUnits[0]/(G*X),x.pixelsToGLUnits[1]/(G*X)],u_overscale_factor:te}},ba=(J,x,Q=1)=>({u_matrix:J,u_color:x,u_overlay:0,u_overlay_scale:Q}),Nr=J=>({u_matrix:J}),Vo=(J,x,Q,G)=>({u_matrix:J,u_extrude_scale:Le(x,1,Q),u_intensity:G});function Bo(J,x){const Q=Math.pow(2,x.canonical.z),G=x.canonical.y;return[new D.MercatorCoordinate(0,G/Q).toLngLat().lat,new D.MercatorCoordinate(0,(G+1)/Q).toLngLat().lat]}const xa=(J,x,Q,G)=>{const X=J.transform;return{u_matrix:ia(J,x,Q,G),u_ratio:1/Le(x,1,X.zoom),u_device_pixel_ratio:J.pixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},Tn=(J,x,Q,G,X)=>D.extend(xa(J,x,Q,X),{u_image:0,u_image_height:G}),br=(J,x,Q,G,X)=>{const te=J.transform,le=As(x,te);return{u_matrix:ia(J,x,Q,X),u_texsize:x.imageAtlasTexture.size,u_ratio:1/Le(x,1,te.zoom),u_device_pixel_ratio:J.pixelRatio,u_image:0,u_scale:[le,G.fromScale,G.toScale],u_fade:G.t,u_units_to_pixels:[1/te.pixelsToGLUnits[0],1/te.pixelsToGLUnits[1]]}},er=(J,x,Q,G,X,te)=>{const le=J.lineAtlas,he=As(x,J.transform),pe=Q.layout.get("line-cap")==="round",ve=le.getDash(G.from,pe),Ce=le.getDash(G.to,pe),Ie=ve.width*X.fromScale,Qe=Ce.width*X.toScale;return D.extend(xa(J,x,Q,te),{u_patternscale_a:[he/Ie,-ve.height/2],u_patternscale_b:[he/Qe,-Ce.height/2],u_sdfgamma:le.width/(256*Math.min(Ie,Qe)*J.pixelRatio)/2,u_image:0,u_tex_y_a:ve.y,u_tex_y_b:Ce.y,u_mix:X.t})};function As(J,x){return 1/Le(J,1,x.tileZoom)}function ia(J,x,Q,G){return J.translatePosMatrix(G?G.posMatrix:x.tileID.posMatrix,x,Q.paint.get("line-translate"),Q.paint.get("line-translate-anchor"))}const Ba=(J,x,Q,G,X)=>{return{u_matrix:J,u_tl_parent:x,u_scale_parent:Q,u_buffer_scale:1,u_fade_t:G.mix,u_opacity:G.opacity*X.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:X.paint.get("raster-brightness-min"),u_brightness_high:X.paint.get("raster-brightness-max"),u_saturation_factor:(le=X.paint.get("raster-saturation"),le>0?1-1/(1.001-le):-le),u_contrast_factor:(te=X.paint.get("raster-contrast"),te>0?1/(1-te):1+te),u_spin_weights:Ca(X.paint.get("raster-hue-rotate"))};var te,le};function Ca(J){J*=Math.PI/180;const x=Math.sin(J),Q=Math.cos(J);return[(2*Q+1)/3,(-Math.sqrt(3)*x-Q+1)/3,(Math.sqrt(3)*x-Q+1)/3]}const Ea=(J,x,Q,G,X,te,le,he,pe,ve)=>{const Ce=X.transform;return{u_is_size_zoom_constant:+(J==="constant"||J==="source"),u_is_size_feature_constant:+(J==="constant"||J==="camera"),u_size_t:x?x.uSizeT:0,u_size:x?x.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_pitch:Ce.pitch/360*2*Math.PI,u_rotate_symbol:+Q,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:X.options.fadeDuration?X.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:le,u_coord_matrix:he,u_is_text:+pe,u_pitch_with_map:+G,u_texsize:ve,u_texture:0}},Ta=(J,x,Q,G,X,te,le,he,pe,ve,Ce)=>{const Ie=X.transform;return D.extend(Ea(J,x,Q,G,X,te,le,he,pe,ve),{u_gamma_scale:G?Math.cos(Ie._pitch)*Ie.cameraToCenterDistance:1,u_device_pixel_ratio:X.pixelRatio,u_is_halo:+Ce})},Ia=(J,x,Q,G,X,te,le,he,pe,ve)=>D.extend(Ta(J,x,Q,G,X,te,le,he,!0,pe,!0),{u_texsize_icon:ve,u_texture_icon:1}),On=(J,x,Q)=>({u_matrix:J,u_opacity:x,u_color:Q}),Za=(J,x,Q,G,X,te)=>D.extend(function(le,he,pe,ve){const Ce=pe.imageManager.getPattern(le.from.toString()),Ie=pe.imageManager.getPattern(le.to.toString()),{width:Qe,height:Je}=pe.imageManager.getPixelSize(),Ze=Math.pow(2,ve.tileID.overscaledZ),rt=ve.tileSize*Math.pow(2,pe.transform.tileZoom)/Ze,Ye=rt*(ve.tileID.canonical.x+ve.tileID.wrap*Ze),dt=rt*ve.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ce.tl,u_pattern_br_a:Ce.br,u_pattern_tl_b:Ie.tl,u_pattern_br_b:Ie.br,u_texsize:[Qe,Je],u_mix:he.t,u_pattern_size_a:Ce.displaySize,u_pattern_size_b:Ie.displaySize,u_scale_a:he.fromScale,u_scale_b:he.toScale,u_tile_units_to_pixels:1/Le(ve,1,pe.transform.tileZoom),u_pixel_coord_upper:[Ye>>16,dt>>16],u_pixel_coord_lower:[65535&Ye,65535&dt]}}(G,te,Q,X),{u_matrix:J,u_opacity:x}),ks={fillExtrusion:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_lightpos:new D.Uniform3f(J,x.u_lightpos),u_lightintensity:new D.Uniform1f(J,x.u_lightintensity),u_lightcolor:new D.Uniform3f(J,x.u_lightcolor),u_vertical_gradient:new D.Uniform1f(J,x.u_vertical_gradient),u_opacity:new D.Uniform1f(J,x.u_opacity)}),fillExtrusionPattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_lightpos:new D.Uniform3f(J,x.u_lightpos),u_lightintensity:new D.Uniform1f(J,x.u_lightintensity),u_lightcolor:new D.Uniform3f(J,x.u_lightcolor),u_vertical_gradient:new D.Uniform1f(J,x.u_vertical_gradient),u_height_factor:new D.Uniform1f(J,x.u_height_factor),u_image:new D.Uniform1i(J,x.u_image),u_texsize:new D.Uniform2f(J,x.u_texsize),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade),u_opacity:new D.Uniform1f(J,x.u_opacity)}),fill:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),fillPattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_image:new D.Uniform1i(J,x.u_image),u_texsize:new D.Uniform2f(J,x.u_texsize),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade)}),fillOutline:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_world:new D.Uniform2f(J,x.u_world)}),fillOutlinePattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_world:new D.Uniform2f(J,x.u_world),u_image:new D.Uniform1i(J,x.u_image),u_texsize:new D.Uniform2f(J,x.u_texsize),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade)}),circle:(J,x)=>({u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_scale_with_map:new D.Uniform1i(J,x.u_scale_with_map),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_extrude_scale:new D.Uniform2f(J,x.u_extrude_scale),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),collisionBox:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pixels_to_tile_units:new D.Uniform1f(J,x.u_pixels_to_tile_units),u_extrude_scale:new D.Uniform2f(J,x.u_extrude_scale),u_overscale_factor:new D.Uniform1f(J,x.u_overscale_factor)}),collisionCircle:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_inv_matrix:new D.UniformMatrix4f(J,x.u_inv_matrix),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_viewport_size:new D.Uniform2f(J,x.u_viewport_size)}),debug:(J,x)=>({u_color:new D.UniformColor(J,x.u_color),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_overlay:new D.Uniform1i(J,x.u_overlay),u_overlay_scale:new D.Uniform1f(J,x.u_overlay_scale)}),clippingMask:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),heatmap:(J,x)=>({u_extrude_scale:new D.Uniform1f(J,x.u_extrude_scale),u_intensity:new D.Uniform1f(J,x.u_intensity),u_matrix:new D.UniformMatrix4f(J,x.u_matrix)}),heatmapTexture:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_world:new D.Uniform2f(J,x.u_world),u_image:new D.Uniform1i(J,x.u_image),u_color_ramp:new D.Uniform1i(J,x.u_color_ramp),u_opacity:new D.Uniform1f(J,x.u_opacity)}),hillshade:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_image:new D.Uniform1i(J,x.u_image),u_latrange:new D.Uniform2f(J,x.u_latrange),u_light:new D.Uniform2f(J,x.u_light),u_shadow:new D.UniformColor(J,x.u_shadow),u_highlight:new D.UniformColor(J,x.u_highlight),u_accent:new D.UniformColor(J,x.u_accent)}),hillshadePrepare:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_image:new D.Uniform1i(J,x.u_image),u_dimension:new D.Uniform2f(J,x.u_dimension),u_zoom:new D.Uniform1f(J,x.u_zoom),u_unpack:new D.Uniform4f(J,x.u_unpack)}),line:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels)}),lineGradient:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels),u_image:new D.Uniform1i(J,x.u_image),u_image_height:new D.Uniform1f(J,x.u_image_height)}),linePattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_texsize:new D.Uniform2f(J,x.u_texsize),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_image:new D.Uniform1i(J,x.u_image),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels),u_scale:new D.Uniform3f(J,x.u_scale),u_fade:new D.Uniform1f(J,x.u_fade)}),lineSDF:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ratio:new D.Uniform1f(J,x.u_ratio),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_units_to_pixels:new D.Uniform2f(J,x.u_units_to_pixels),u_patternscale_a:new D.Uniform2f(J,x.u_patternscale_a),u_patternscale_b:new D.Uniform2f(J,x.u_patternscale_b),u_sdfgamma:new D.Uniform1f(J,x.u_sdfgamma),u_image:new D.Uniform1i(J,x.u_image),u_tex_y_a:new D.Uniform1f(J,x.u_tex_y_a),u_tex_y_b:new D.Uniform1f(J,x.u_tex_y_b),u_mix:new D.Uniform1f(J,x.u_mix)}),raster:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_tl_parent:new D.Uniform2f(J,x.u_tl_parent),u_scale_parent:new D.Uniform1f(J,x.u_scale_parent),u_buffer_scale:new D.Uniform1f(J,x.u_buffer_scale),u_fade_t:new D.Uniform1f(J,x.u_fade_t),u_opacity:new D.Uniform1f(J,x.u_opacity),u_image0:new D.Uniform1i(J,x.u_image0),u_image1:new D.Uniform1i(J,x.u_image1),u_brightness_low:new D.Uniform1f(J,x.u_brightness_low),u_brightness_high:new D.Uniform1f(J,x.u_brightness_high),u_saturation_factor:new D.Uniform1f(J,x.u_saturation_factor),u_contrast_factor:new D.Uniform1f(J,x.u_contrast_factor),u_spin_weights:new D.Uniform3f(J,x.u_spin_weights)}),symbolIcon:(J,x)=>({u_is_size_zoom_constant:new D.Uniform1i(J,x.u_is_size_zoom_constant),u_is_size_feature_constant:new D.Uniform1i(J,x.u_is_size_feature_constant),u_size_t:new D.Uniform1f(J,x.u_size_t),u_size:new D.Uniform1f(J,x.u_size),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pitch:new D.Uniform1f(J,x.u_pitch),u_rotate_symbol:new D.Uniform1i(J,x.u_rotate_symbol),u_aspect_ratio:new D.Uniform1f(J,x.u_aspect_ratio),u_fade_change:new D.Uniform1f(J,x.u_fade_change),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_label_plane_matrix:new D.UniformMatrix4f(J,x.u_label_plane_matrix),u_coord_matrix:new D.UniformMatrix4f(J,x.u_coord_matrix),u_is_text:new D.Uniform1i(J,x.u_is_text),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_texsize:new D.Uniform2f(J,x.u_texsize),u_texture:new D.Uniform1i(J,x.u_texture)}),symbolSDF:(J,x)=>({u_is_size_zoom_constant:new D.Uniform1i(J,x.u_is_size_zoom_constant),u_is_size_feature_constant:new D.Uniform1i(J,x.u_is_size_feature_constant),u_size_t:new D.Uniform1f(J,x.u_size_t),u_size:new D.Uniform1f(J,x.u_size),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pitch:new D.Uniform1f(J,x.u_pitch),u_rotate_symbol:new D.Uniform1i(J,x.u_rotate_symbol),u_aspect_ratio:new D.Uniform1f(J,x.u_aspect_ratio),u_fade_change:new D.Uniform1f(J,x.u_fade_change),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_label_plane_matrix:new D.UniformMatrix4f(J,x.u_label_plane_matrix),u_coord_matrix:new D.UniformMatrix4f(J,x.u_coord_matrix),u_is_text:new D.Uniform1i(J,x.u_is_text),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_texsize:new D.Uniform2f(J,x.u_texsize),u_texture:new D.Uniform1i(J,x.u_texture),u_gamma_scale:new D.Uniform1f(J,x.u_gamma_scale),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_is_halo:new D.Uniform1i(J,x.u_is_halo)}),symbolTextAndIcon:(J,x)=>({u_is_size_zoom_constant:new D.Uniform1i(J,x.u_is_size_zoom_constant),u_is_size_feature_constant:new D.Uniform1i(J,x.u_is_size_feature_constant),u_size_t:new D.Uniform1f(J,x.u_size_t),u_size:new D.Uniform1f(J,x.u_size),u_camera_to_center_distance:new D.Uniform1f(J,x.u_camera_to_center_distance),u_pitch:new D.Uniform1f(J,x.u_pitch),u_rotate_symbol:new D.Uniform1i(J,x.u_rotate_symbol),u_aspect_ratio:new D.Uniform1f(J,x.u_aspect_ratio),u_fade_change:new D.Uniform1f(J,x.u_fade_change),u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_label_plane_matrix:new D.UniformMatrix4f(J,x.u_label_plane_matrix),u_coord_matrix:new D.UniformMatrix4f(J,x.u_coord_matrix),u_is_text:new D.Uniform1i(J,x.u_is_text),u_pitch_with_map:new D.Uniform1i(J,x.u_pitch_with_map),u_texsize:new D.Uniform2f(J,x.u_texsize),u_texsize_icon:new D.Uniform2f(J,x.u_texsize_icon),u_texture:new D.Uniform1i(J,x.u_texture),u_texture_icon:new D.Uniform1i(J,x.u_texture_icon),u_gamma_scale:new D.Uniform1f(J,x.u_gamma_scale),u_device_pixel_ratio:new D.Uniform1f(J,x.u_device_pixel_ratio),u_is_halo:new D.Uniform1i(J,x.u_is_halo)}),background:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_opacity:new D.Uniform1f(J,x.u_opacity),u_color:new D.UniformColor(J,x.u_color)}),backgroundPattern:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_opacity:new D.Uniform1f(J,x.u_opacity),u_image:new D.Uniform1i(J,x.u_image),u_pattern_tl_a:new D.Uniform2f(J,x.u_pattern_tl_a),u_pattern_br_a:new D.Uniform2f(J,x.u_pattern_br_a),u_pattern_tl_b:new D.Uniform2f(J,x.u_pattern_tl_b),u_pattern_br_b:new D.Uniform2f(J,x.u_pattern_br_b),u_texsize:new D.Uniform2f(J,x.u_texsize),u_mix:new D.Uniform1f(J,x.u_mix),u_pattern_size_a:new D.Uniform2f(J,x.u_pattern_size_a),u_pattern_size_b:new D.Uniform2f(J,x.u_pattern_size_b),u_scale_a:new D.Uniform1f(J,x.u_scale_a),u_scale_b:new D.Uniform1f(J,x.u_scale_b),u_pixel_coord_upper:new D.Uniform2f(J,x.u_pixel_coord_upper),u_pixel_coord_lower:new D.Uniform2f(J,x.u_pixel_coord_lower),u_tile_units_to_pixels:new D.Uniform1f(J,x.u_tile_units_to_pixels)}),terrain:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_texture:new D.Uniform1i(J,x.u_texture),u_ele_delta:new D.Uniform1f(J,x.u_ele_delta)}),terrainDepth:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_ele_delta:new D.Uniform1f(J,x.u_ele_delta)}),terrainCoords:(J,x)=>({u_matrix:new D.UniformMatrix4f(J,x.u_matrix),u_texture:new D.Uniform1i(J,x.u_texture),u_terrain_coords_id:new D.Uniform1f(J,x.u_terrain_coords_id),u_ele_delta:new D.Uniform1f(J,x.u_ele_delta)})};class gs{constructor(x,Q,G){this.context=x;const X=x.gl;this.buffer=X.createBuffer(),this.dynamicDraw=!!G,this.context.unbindVAO(),x.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,Q.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete Q.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(x){const Q=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),Q.bufferSubData(Q.ELEMENT_ARRAY_BUFFER,0,x.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ja={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Sa{constructor(x,Q,G,X){this.length=Q.length,this.attributes=G,this.itemSize=Q.bytesPerElement,this.dynamicDraw=X,this.context=x;const te=x.gl;this.buffer=te.createBuffer(),x.bindVertexBuffer.set(this.buffer),te.bufferData(te.ARRAY_BUFFER,Q.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete Q.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(x){if(x.length!==this.length)throw new Error(`Length of new data is ${x.length}, which doesn't match current length of ${this.length}`);const Q=this.context.gl;this.bind(),Q.bufferSubData(Q.ARRAY_BUFFER,0,x.arrayBuffer)}enableAttributes(x,Q){for(let G=0;G<this.attributes.length;G++){const X=Q.attributes[this.attributes[G].name];X!==void 0&&x.enableVertexAttribArray(X)}}setVertexAttribPointers(x,Q,G){for(let X=0;X<this.attributes.length;X++){const te=this.attributes[X],le=Q.attributes[te.name];le!==void 0&&x.vertexAttribPointer(le,te.components,x[Ja[te.type]],!1,this.itemSize,te.offset+this.itemSize*(G||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ra=new WeakMap;function In(J){if(ra.has(J))return ra.get(J);{const x=J.getParameter(J.VERSION).startsWith("WebGL 2.0");return ra.set(J,x),x}}class pr{constructor(x){this.gl=x.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(x){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $a extends pr{getDefault(){return D.Color.transparent}set(x){const Q=this.current;(x.r!==Q.r||x.g!==Q.g||x.b!==Q.b||x.a!==Q.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)}}class Co extends pr{getDefault(){return 1}set(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)}}class Sn extends pr{getDefault(){return 0}set(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)}}class sa extends pr{getDefault(){return[!0,!0,!0,!0]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||x[2]!==Q[2]||x[3]!==Q[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)}}class Eo extends pr{getDefault(){return!0}set(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)}}class To extends pr{getDefault(){return 255}set(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)}}class na extends pr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(x){const Q=this.current;(x.func!==Q.func||x.ref!==Q.ref||x.mask!==Q.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)}}class pl extends pr{getDefault(){const x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||x[2]!==Q[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)}}class Ko extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.STENCIL_TEST):Q.disable(Q.STENCIL_TEST),this.current=x,this.dirty=!1}}class Go extends pr{getDefault(){return[0,1]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)}}class Io extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.DEPTH_TEST):Q.disable(Q.DEPTH_TEST),this.current=x,this.dirty=!1}}class Wo extends pr{getDefault(){return this.gl.LESS}set(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)}}class cn extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.BLEND):Q.disable(Q.BLEND),this.current=x,this.dirty=!1}}class Rn extends pr{getDefault(){const x=this.gl;return[x.ONE,x.ZERO]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)}}class Fa extends pr{getDefault(){return D.Color.transparent}set(x){const Q=this.current;(x.r!==Q.r||x.g!==Q.g||x.b!==Q.b||x.a!==Q.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)}}class eo extends pr{getDefault(){return this.gl.FUNC_ADD}set(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)}}class ka extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;x?Q.enable(Q.CULL_FACE):Q.disable(Q.CULL_FACE),this.current=x,this.dirty=!1}}class gn extends pr{getDefault(){return this.gl.BACK}set(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)}}class aa extends pr{getDefault(){return this.gl.CCW}set(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)}}class Ds extends pr{getDefault(){return null}set(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)}}class oa extends pr{getDefault(){return this.gl.TEXTURE0}set(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)}}class hn extends pr{getDefault(){const x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]}set(x){const Q=this.current;(x[0]!==Q[0]||x[1]!==Q[1]||x[2]!==Q[2]||x[3]!==Q[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)}}class Rs extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindFramebuffer(Q.FRAMEBUFFER,x),this.current=x,this.dirty=!1}}class la extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindRenderbuffer(Q.RENDERBUFFER,x),this.current=x,this.dirty=!1}}class Hn extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindTexture(Q.TEXTURE_2D,x),this.current=x,this.dirty=!1}}class to extends pr{getDefault(){return null}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.bindBuffer(Q.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}}class io extends pr{getDefault(){return null}set(x){const Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1}}class gr extends pr{getDefault(){return null}set(x){var Q;if(x===this.current&&!this.dirty)return;const G=this.gl;In(G)?G.bindVertexArray(x):(Q=G.getExtension("OES_vertex_array_object"))===null||Q===void 0||Q.bindVertexArrayOES(x),this.current=x,this.dirty=!1}}class Js extends pr{getDefault(){return 4}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.pixelStorei(Q.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}}class gl extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}}class qo extends pr{getDefault(){return!1}set(x){if(x===this.current&&!this.dirty)return;const Q=this.gl;Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}}class mn extends pr{constructor(x,Q){super(x),this.context=x,this.parent=Q}getDefault(){return null}}class So extends mn{setDirty(){this.dirty=!0}set(x){if(x===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Q=this.gl;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}}class Xo extends mn{set(x){if(x===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Q=this.gl;Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_ATTACHMENT,Q.RENDERBUFFER,x),this.current=x,this.dirty=!1}}class Hs extends mn{set(x){if(x===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Q=this.gl;Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_STENCIL_ATTACHMENT,Q.RENDERBUFFER,x),this.current=x,this.dirty=!1}}class Da{constructor(x,Q,G,X,te){this.context=x,this.width=Q,this.height=G;const le=x.gl,he=this.framebuffer=le.createFramebuffer();if(this.colorAttachment=new So(x,he),X)this.depthAttachment=te?new Hs(x,he):new Xo(x,he);else if(te)throw new Error("Stencil cannot be setted without depth");if(le.checkFramebufferStatus(le.FRAMEBUFFER)!==le.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const x=this.context.gl,Q=this.colorAttachment.get();if(Q&&x.deleteTexture(Q),this.depthAttachment){const G=this.depthAttachment.get();G&&x.deleteRenderbuffer(G)}x.deleteFramebuffer(this.framebuffer)}}class Ur{constructor(x,Q,G){this.blendFunction=x,this.blendColor=Q,this.mask=G}}Ur.Replace=[1,0],Ur.disabled=new Ur(Ur.Replace,D.Color.transparent,[!1,!1,!1,!1]),Ur.unblended=new Ur(Ur.Replace,D.Color.transparent,[!0,!0,!0,!0]),Ur.alphaBlended=new Ur([1,771],D.Color.transparent,[!0,!0,!0,!0]);class $s{constructor(x){var Q,G;if(this.gl=x,this.clearColor=new $a(this),this.clearDepth=new Co(this),this.clearStencil=new Sn(this),this.colorMask=new sa(this),this.depthMask=new Eo(this),this.stencilMask=new To(this),this.stencilFunc=new na(this),this.stencilOp=new pl(this),this.stencilTest=new Ko(this),this.depthRange=new Go(this),this.depthTest=new Io(this),this.depthFunc=new Wo(this),this.blend=new cn(this),this.blendFunc=new Rn(this),this.blendColor=new Fa(this),this.blendEquation=new eo(this),this.cullFace=new ka(this),this.cullFaceSide=new gn(this),this.frontFace=new aa(this),this.program=new Ds(this),this.activeTexture=new oa(this),this.viewport=new hn(this),this.bindFramebuffer=new Rs(this),this.bindRenderbuffer=new la(this),this.bindTexture=new Hn(this),this.bindVertexBuffer=new to(this),this.bindElementBuffer=new io(this),this.bindVertexArray=new gr(this),this.pixelStoreUnpack=new Js(this),this.pixelStoreUnpackPremultiplyAlpha=new gl(this),this.pixelStoreUnpackFlipY=new qo(this),this.extTextureFilterAnisotropic=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=x.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=x.getParameter(x.MAX_TEXTURE_SIZE),In(x)){this.HALF_FLOAT=x.HALF_FLOAT;const X=x.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(Q=x.RGBA16F)!==null&&Q!==void 0?Q:X==null?void 0:X.RGBA16F_EXT,this.RGB16F=(G=x.RGB16F)!==null&&G!==void 0?G:X==null?void 0:X.RGB16F_EXT,x.getExtension("EXT_color_buffer_float")}else{x.getExtension("EXT_color_buffer_half_float"),x.getExtension("OES_texture_half_float_linear");const X=x.getExtension("OES_texture_half_float");this.HALF_FLOAT=X==null?void 0:X.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(x,Q){return new gs(this,x,Q)}createVertexBuffer(x,Q,G){return new Sa(this,x,Q,G)}createRenderbuffer(x,Q,G){const X=this.gl,te=X.createRenderbuffer();return this.bindRenderbuffer.set(te),X.renderbufferStorage(X.RENDERBUFFER,x,Q,G),this.bindRenderbuffer.set(null),te}createFramebuffer(x,Q,G,X){return new Da(this,x,Q,G,X)}clear({color:x,depth:Q,stencil:G}){const X=this.gl;let te=0;x&&(te|=X.COLOR_BUFFER_BIT,this.clearColor.set(x),this.colorMask.set([!0,!0,!0,!0])),Q!==void 0&&(te|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),G!==void 0&&(te|=X.STENCIL_BUFFER_BIT,this.clearStencil.set(G),this.stencilMask.set(255)),X.clear(te)}setCullFace(x){x.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(x.mode),this.frontFace.set(x.frontFace))}setDepthMode(x){x.func!==this.gl.ALWAYS||x.mask?(this.depthTest.set(!0),this.depthFunc.set(x.func),this.depthMask.set(x.mask),this.depthRange.set(x.range)):this.depthTest.set(!1)}setStencilMode(x){x.test.func!==this.gl.ALWAYS||x.mask?(this.stencilTest.set(!0),this.stencilMask.set(x.mask),this.stencilOp.set([x.fail,x.depthFail,x.pass]),this.stencilFunc.set({func:x.test.func,ref:x.ref,mask:x.test.mask})):this.stencilTest.set(!1)}setColorMode(x){D.deepEqual(x.blendFunction,Ur.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(x.blendFunction),this.blendColor.set(x.blendColor)),this.colorMask.set(x.mask)}createVertexArray(){var x;return In(this.gl)?this.gl.createVertexArray():(x=this.gl.getExtension("OES_vertex_array_object"))===null||x===void 0?void 0:x.createVertexArrayOES()}deleteVertexArray(x){var Q;return In(this.gl)?this.gl.deleteVertexArray(x):(Q=this.gl.getExtension("OES_vertex_array_object"))===null||Q===void 0?void 0:Q.deleteVertexArrayOES(x)}unbindVAO(){this.bindVertexArray.set(null)}}class Ji{constructor(x,Q,G){this.func=x,this.mask=Q,this.range=G}}Ji.ReadOnly=!1,Ji.ReadWrite=!0,Ji.disabled=new Ji(519,Ji.ReadOnly,[0,1]);const yr=7680;class Fr{constructor(x,Q,G,X,te,le){this.test=x,this.ref=Q,this.mask=G,this.fail=X,this.depthFail=te,this.pass=le}}Fr.disabled=new Fr({func:519,mask:0},0,0,yr,yr,yr);class Mr{constructor(x,Q,G){this.enable=x,this.mode=Q,this.frontFace=G}}let zn;function Ua(J,x,Q,G,X,te,le){const he=J.context,pe=he.gl,ve=J.useProgram("collisionBox"),Ce=[];let Ie=0,Qe=0;for(let ot=0;ot<G.length;ot++){const gt=G[ot],It=x.getTile(gt),St=It.getBucket(Q);if(!St)continue;let Lt=gt.posMatrix;X[0]===0&&X[1]===0||(Lt=J.translatePosMatrix(gt.posMatrix,It,X,te));const Kt=le?St.textCollisionBox:St.iconCollisionBox,Rt=St.collisionCircleArray;if(Rt.length>0){const Jt=D.create(),Bi=Lt;D.mul(Jt,St.placementInvProjMatrix,J.transform.glCoordMatrix),D.mul(Jt,Jt,St.placementViewportMatrix),Ce.push({circleArray:Rt,circleOffset:Qe,transform:Bi,invTransform:Jt,coord:gt}),Ie+=Rt.length/4,Qe=Ie}Kt&&ve.draw(he,pe.LINES,Ji.disabled,Fr.disabled,J.colorModeForRenderPass(),Mr.disabled,Qn(Lt,J.transform,It),J.style.map.terrain&&J.style.map.terrain.getTerrainData(gt),Q.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,null,J.transform.zoom,null,null,Kt.collisionVertexBuffer)}if(!le||!Ce.length)return;const Je=J.useProgram("collisionCircle"),Ze=new D.CollisionCircleLayoutArray;Ze.resize(4*Ie),Ze._trim();let rt=0;for(const ot of Ce)for(let gt=0;gt<ot.circleArray.length/4;gt++){const It=4*gt,St=ot.circleArray[It+0],Lt=ot.circleArray[It+1],Kt=ot.circleArray[It+2],Rt=ot.circleArray[It+3];Ze.emplace(rt++,St,Lt,Kt,Rt,0),Ze.emplace(rt++,St,Lt,Kt,Rt,1),Ze.emplace(rt++,St,Lt,Kt,Rt,2),Ze.emplace(rt++,St,Lt,Kt,Rt,3)}(!zn||zn.length<2*Ie)&&(zn=function(ot){const gt=2*ot,It=new D.QuadTriangleArray;It.resize(gt),It._trim();for(let St=0;St<gt;St++){const Lt=6*St;It.uint16[Lt+0]=4*St+0,It.uint16[Lt+1]=4*St+1,It.uint16[Lt+2]=4*St+2,It.uint16[Lt+3]=4*St+2,It.uint16[Lt+4]=4*St+3,It.uint16[Lt+5]=4*St+0}return It}(Ie));const Ye=he.createIndexBuffer(zn,!0),dt=he.createVertexBuffer(Ze,D.collisionCircleLayout.members,!0);for(const ot of Ce){const gt={u_matrix:ot.transform,u_inv_matrix:ot.invTransform,u_camera_to_center_distance:(Bt=J.transform).cameraToCenterDistance,u_viewport_size:[Bt.width,Bt.height]};Je.draw(he,pe.TRIANGLES,Ji.disabled,Fr.disabled,J.colorModeForRenderPass(),Mr.disabled,gt,J.style.map.terrain&&J.style.map.terrain.getTerrainData(ot.coord),Q.id,dt,Ye,D.SegmentVector.simpleSegment(0,2*ot.circleOffset,ot.circleArray.length,ot.circleArray.length/2),null,J.transform.zoom,null,null,null)}var Bt;dt.destroy(),Ye.destroy()}Mr.disabled=new Mr(!1,1029,2305),Mr.backCCW=new Mr(!0,1029,2305);const ro=D.identity(new Float32Array(16));function ml(J,x,Q,G,X,te){const{horizontalAlign:le,verticalAlign:he}=D.getAnchorAlignment(J);return new D.Point((-(le-.5)*x/X+G[0])*te,(-(he-.5)*Q/X+G[1])*te)}function Fo(J,x,Q,G,X,te,le,he,pe,ve,Ce){const Ie=J.text.placedSymbolArray,Qe=J.text.dynamicLayoutVertexArray,Je=J.icon.dynamicLayoutVertexArray,Ze={};Qe.clear();for(let rt=0;rt<Ie.length;rt++){const Ye=Ie.get(rt),dt=Ye.hidden||!Ye.crossTileID||J.allowVerticalPlacement&&!Ye.placedOrientation?null:G[Ye.crossTileID];if(dt){const Bt=new D.Point(Ye.anchorX,Ye.anchorY),ot=mi(Bt,Q?le:te,Ce),gt=wi(X.cameraToCenterDistance,ot.signedDistanceFromCamera);let It=D.evaluateSizeForFeature(J.textSizeData,pe,Ye)*gt/D.ONE_EM;Q&&(It*=J.tilePixelRatio/he);const{width:St,height:Lt,anchor:Kt,textOffset:Rt,textBoxScale:Jt}=dt,Bi=ml(Kt,St,Lt,Rt,Jt,It),ar=Q?mi(Bt.add(Bi),te,Ce).point:ot.point.add(x?Bi.rotate(-X.angle):Bi),oi=J.allowVerticalPlacement&&Ye.placedOrientation===D.WritingMode.vertical?Math.PI/2:0;for(let ki=0;ki<Ye.numGlyphs;ki++)D.addDynamicAttributes(Qe,ar,oi);ve&&Ye.associatedIconIndex>=0&&(Ze[Ye.associatedIconIndex]={shiftedAnchor:ar,angle:oi})}else ye(Ye.numGlyphs,Qe)}if(ve){Je.clear();const rt=J.icon.placedSymbolArray;for(let Ye=0;Ye<rt.length;Ye++){const dt=rt.get(Ye);if(dt.hidden)ye(dt.numGlyphs,Je);else{const Bt=Ze[Ye];if(Bt)for(let ot=0;ot<dt.numGlyphs;ot++)D.addDynamicAttributes(Je,Bt.shiftedAnchor,Bt.angle);else ye(dt.numGlyphs,Je)}}J.icon.dynamicLayoutVertexBuffer.updateData(Je)}J.text.dynamicLayoutVertexBuffer.updateData(Qe)}function so(J,x,Q){return Q.iconsInText&&x?"symbolTextAndIcon":J?"symbolSDF":"symbolIcon"}function no(J,x,Q,G,X,te,le,he,pe,ve,Ce,Ie){const Qe=J.context,Je=Qe.gl,Ze=J.transform,rt=he==="map",Ye=pe==="map",dt=he!=="viewport"&&Q.layout.get("symbol-placement")!=="point",Bt=rt&&!Ye&&!dt,ot=!Q.layout.get("symbol-sort-key").isConstant();let gt=!1;const It=J.depthModeForSublayer(0,Ji.ReadOnly),St=Q._unevaluatedLayout.hasValue("text-variable-anchor")||Q._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Lt=[];for(const Kt of G){const Rt=x.getTile(Kt),Jt=Rt.getBucket(Q);if(!Jt)continue;const Bi=X?Jt.text:Jt.icon;if(!Bi||!Bi.segments.get().length||!Bi.hasVisibleVertices)continue;const ar=Bi.programConfigurations.get(Q.id),oi=X||Jt.sdfIcons,ki=X?Jt.textSizeData:Jt.iconSizeData,xi=Ye||Ze.pitch!==0,Hr=J.useProgram(so(oi,X,Jt),ar),or=D.evaluateSizeForZoom(ki,Ze.zoom),Mi=J.style.map.terrain&&J.style.map.terrain.getTerrainData(Kt);let lr,Kr,kr,rn,bs=[0,0],Zr=null;if(X)Kr=Rt.glyphAtlasTexture,kr=Je.LINEAR,lr=Rt.glyphAtlasTexture.size,Jt.iconsInText&&(bs=Rt.imageAtlasTexture.size,Zr=Rt.imageAtlasTexture,rn=xi||J.options.rotating||J.options.zooming||ki.kind==="composite"||ki.kind==="camera"?Je.LINEAR:Je.NEAREST);else{const hs=Q.layout.get("icon-size").constantOr(0)!==1||Jt.iconsNeedLinear;Kr=Rt.imageAtlasTexture,kr=oi||J.options.rotating||J.options.zooming||hs||xi?Je.LINEAR:Je.NEAREST,lr=Rt.imageAtlasTexture.size}const Vs=Le(Rt,1,J.transform.zoom),Un=Wi(Kt.posMatrix,Ye,rt,J.transform,Vs),wn=Zt(Kt.posMatrix,Ye,rt,J.transform,Vs),Mn=St&&Jt.hasTextData(),fo=Q.layout.get("icon-text-fit")!=="none"&&Mn&&Jt.hasIconData();if(dt){const hs=J.style.map.terrain?(Es,Gr)=>J.style.map.terrain.getElevation(Kt,Es,Gr):null,as=Q.layout.get("text-rotation-alignment")==="map";tr(Jt,Kt.posMatrix,J,X,Un,wn,Ye,ve,as,hs)}const ma=J.translatePosMatrix(Kt.posMatrix,Rt,te,le),Xn=dt||X&&St||fo?ro:Un,is=J.translatePosMatrix(wn,Rt,te,le,!0),cs=oi&&Q.paint.get(X?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Cs;Cs=oi?Jt.iconsInText?Ia(ki.kind,or,Bt,Ye,J,ma,Xn,is,lr,bs):Ta(ki.kind,or,Bt,Ye,J,ma,Xn,is,X,lr,!0):Ea(ki.kind,or,Bt,Ye,J,ma,Xn,is,X,lr);const po={program:Hr,buffers:Bi,uniformValues:Cs,atlasTexture:Kr,atlasTextureIcon:Zr,atlasInterpolation:kr,atlasInterpolationIcon:rn,isSDF:oi,hasHalo:cs};if(ot&&Jt.canOverlap){gt=!0;const hs=Bi.segments.get();for(const as of hs)Lt.push({segments:new D.SegmentVector([as]),sortKey:as.sortKey,state:po,terrainData:Mi})}else Lt.push({segments:Bi.segments,sortKey:0,state:po,terrainData:Mi})}gt&&Lt.sort((Kt,Rt)=>Kt.sortKey-Rt.sortKey);for(const Kt of Lt){const Rt=Kt.state;if(Qe.activeTexture.set(Je.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,Je.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(Qe.activeTexture.set(Je.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,Je.CLAMP_TO_EDGE)),Rt.isSDF){const Jt=Rt.uniformValues;Rt.hasHalo&&(Jt.u_is_halo=1,Ma(Rt.buffers,Kt.segments,Q,J,Rt.program,It,Ce,Ie,Jt,Kt.terrainData)),Jt.u_is_halo=0}Ma(Rt.buffers,Kt.segments,Q,J,Rt.program,It,Ce,Ie,Rt.uniformValues,Kt.terrainData)}}function Ma(J,x,Q,G,X,te,le,he,pe,ve){const Ce=G.context;X.draw(Ce,Ce.gl.TRIANGLES,te,le,he,Mr.disabled,pe,ve,Q.id,J.layoutVertexBuffer,J.indexBuffer,x,Q.paint,G.transform.zoom,J.programConfigurations.get(Q.id),J.dynamicLayoutVertexBuffer,J.opacityVertexBuffer)}function ao(J,x,Q,G,X){if(!Q||!G||!G.imageAtlas)return;const te=G.imageAtlas.patternPositions;let le=te[Q.to.toString()],he=te[Q.from.toString()];if(!le||!he){const pe=X.getPaintProperty(x);le=te[pe],he=te[pe]}le&&he&&J.setConstantPatternPositions(le,he)}function oo(J,x,Q,G,X,te,le){const he=J.context.gl,pe="fill-pattern",ve=Q.paint.get(pe),Ce=ve&&ve.constantOr(1),Ie=Q.getCrossfadeParameters();let Qe,Je,Ze,rt,Ye;le?(Je=Ce&&!Q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Qe=he.LINES):(Je=Ce?"fillPattern":"fill",Qe=he.TRIANGLES);const dt=ve.constantOr(null);for(const Bt of G){const ot=x.getTile(Bt);if(Ce&&!ot.patternsLoaded())continue;const gt=ot.getBucket(Q);if(!gt)continue;const It=gt.programConfigurations.get(Q.id),St=J.useProgram(Je,It),Lt=J.style.map.terrain&&J.style.map.terrain.getTerrainData(Bt);Ce&&(J.context.activeTexture.set(he.TEXTURE0),ot.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),It.updatePaintBuffers(Ie)),ao(It,pe,dt,ot,Q);const Kt=Lt?Bt:null,Rt=J.translatePosMatrix(Kt?Kt.posMatrix:Bt.posMatrix,ot,Q.paint.get("fill-translate"),Q.paint.get("fill-translate-anchor"));if(le){rt=gt.indexBuffer2,Ye=gt.segments2;const Jt=[he.drawingBufferWidth,he.drawingBufferHeight];Ze=Je==="fillOutlinePattern"&&Ce?ta(Rt,J,Ie,ot,Jt):An(Rt,Jt)}else rt=gt.indexBuffer,Ye=gt.segments,Ze=Ce?Zs(Rt,J,Ie,ot):xo(Rt);St.draw(J.context,Qe,X,J.stencilModeForClipping(Bt),te,Mr.disabled,Ze,Lt,Q.id,gt.layoutVertexBuffer,rt,Ye,Q.paint,J.transform.zoom,It)}}function Pa(J,x,Q,G,X,te,le){const he=J.context,pe=he.gl,ve="fill-extrusion-pattern",Ce=Q.paint.get(ve),Ie=Ce.constantOr(1),Qe=Q.getCrossfadeParameters(),Je=Q.paint.get("fill-extrusion-opacity"),Ze=Ce.constantOr(null);for(const rt of G){const Ye=x.getTile(rt),dt=Ye.getBucket(Q);if(!dt)continue;const Bt=J.style.map.terrain&&J.style.map.terrain.getTerrainData(rt),ot=dt.programConfigurations.get(Q.id),gt=J.useProgram(Ie?"fillExtrusionPattern":"fillExtrusion",ot);Ie&&(J.context.activeTexture.set(pe.TEXTURE0),Ye.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),ot.updatePaintBuffers(Qe)),ao(ot,ve,Ze,Ye,Q);const It=J.translatePosMatrix(rt.posMatrix,Ye,Q.paint.get("fill-extrusion-translate"),Q.paint.get("fill-extrusion-translate-anchor")),St=Q.paint.get("fill-extrusion-vertical-gradient"),Lt=Ie?es(It,J,St,Je,rt,Qe,Ye):Qr(It,J,St,Je);gt.draw(he,he.gl.TRIANGLES,X,te,le,Mr.backCCW,Lt,Bt,Q.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,Q.paint,J.transform.zoom,ot,J.style.map.terrain&&dt.centroidVertexBuffer)}}function Nn(J,x,Q,G,X,te,le){const he=J.context,pe=he.gl,ve=Q.fbo;if(!ve)return;const Ce=J.useProgram("hillshade"),Ie=J.style.map.terrain&&J.style.map.terrain.getTerrainData(x);he.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ve.colorAttachment.get()),Ce.draw(he,pe.TRIANGLES,X,te,le,Mr.disabled,((Qe,Je,Ze,rt)=>{const Ye=Ze.paint.get("hillshade-shadow-color"),dt=Ze.paint.get("hillshade-highlight-color"),Bt=Ze.paint.get("hillshade-accent-color");let ot=Ze.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ze.paint.get("hillshade-illumination-anchor")==="viewport"&&(ot-=Qe.transform.angle);const gt=!Qe.options.moving;return{u_matrix:rt?rt.posMatrix:Qe.transform.calculatePosMatrix(Je.tileID.toUnwrapped(),gt),u_image:0,u_latrange:Bo(0,Je.tileID),u_light:[Ze.paint.get("hillshade-exaggeration"),ot],u_shadow:Ye,u_highlight:dt,u_accent:Bt}})(J,Q,G,Ie?x:null),Ie,G.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments)}function La(J,x,Q,G,X,te){const le=J.context,he=le.gl,pe=x.dem;if(pe&&pe.data){const ve=pe.dim,Ce=pe.stride,Ie=pe.getPixels();if(le.activeTexture.set(he.TEXTURE1),le.pixelStoreUnpackPremultiplyAlpha.set(!1),x.demTexture=x.demTexture||J.getTileTexture(Ce),x.demTexture){const Je=x.demTexture;Je.update(Ie,{premultiply:!1}),Je.bind(he.NEAREST,he.CLAMP_TO_EDGE)}else x.demTexture=new vt(le,Ie,he.RGBA,{premultiply:!1}),x.demTexture.bind(he.NEAREST,he.CLAMP_TO_EDGE);le.activeTexture.set(he.TEXTURE0);let Qe=x.fbo;if(!Qe){const Je=new vt(le,{width:ve,height:ve,data:null},he.RGBA);Je.bind(he.LINEAR,he.CLAMP_TO_EDGE),Qe=x.fbo=le.createFramebuffer(ve,ve,!0,!1),Qe.colorAttachment.set(Je.texture)}le.bindFramebuffer.set(Qe.framebuffer),le.viewport.set([0,0,ve,ve]),J.useProgram("hillshadePrepare").draw(le,he.TRIANGLES,G,X,te,Mr.disabled,((Je,Ze)=>{const rt=Ze.stride,Ye=D.create();return D.ortho(Ye,0,D.EXTENT,-D.EXTENT,0,0,1),D.translate(Ye,Ye,[0,-D.EXTENT,0]),{u_matrix:Ye,u_image:1,u_dimension:[rt,rt],u_zoom:Je.overscaledZ,u_unpack:Ze.getUnpackVector()}})(x.tileID,pe),null,Q.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments),x.needsHillshadePrepare=!1}}function _l(J,x,Q,G,X,te){const le=G.paint.get("raster-fade-duration");if(!te&&le>0){const he=D.browser.now(),pe=(he-J.timeAdded)/le,ve=x?(he-x.timeAdded)/le:-1,Ce=Q.getSource(),Ie=X.coveringZoomLevel({tileSize:Ce.tileSize,roundZoom:Ce.roundZoom}),Qe=!x||Math.abs(x.tileID.overscaledZ-Ie)>Math.abs(J.tileID.overscaledZ-Ie),Je=Qe&&J.refreshedUponExpiration?1:D.clamp(Qe?pe:1-ve,0,1);return J.refreshedUponExpiration&&pe>=1&&(J.refreshedUponExpiration=!1),x?{opacity:1,mix:1-Je}:{opacity:Je,mix:0}}return{opacity:1,mix:0}}const Yo=new D.Color(1,0,0,1),Wr=new D.Color(0,1,0,1),Vn=new D.Color(0,0,1,1),Us=new D.Color(1,0,1,1),ko=new D.Color(0,1,1,1);function Aa(J,x,Q,G){en(J,0,x+Q/2,J.transform.width,Q,G)}function Do(J,x,Q,G){en(J,x-Q/2,0,Q,J.transform.height,G)}function en(J,x,Q,G,X,te){const le=J.context,he=le.gl;he.enable(he.SCISSOR_TEST),he.scissor(x*J.pixelRatio,Q*J.pixelRatio,G*J.pixelRatio,X*J.pixelRatio),le.clear({color:te}),he.disable(he.SCISSOR_TEST)}function xs(J,x,Q){const G=J.context,X=G.gl,te=Q.posMatrix,le=J.useProgram("debug"),he=Ji.disabled,pe=Fr.disabled,ve=J.colorModeForRenderPass(),Ce="$debug",Ie=J.style.map.terrain&&J.style.map.terrain.getTerrainData(Q);G.activeTexture.set(X.TEXTURE0);const Qe=x.getTileByID(Q.key).latestRawTileData,Je=Math.floor((Qe&&Qe.byteLength||0)/1024),Ze=x.getTile(Q).tileSize,rt=512/Math.min(Ze,512)*(Q.overscaledZ/J.transform.zoom)*.5;let Ye=Q.canonical.toString();Q.overscaledZ!==Q.canonical.z&&(Ye+=` => ${Q.overscaledZ}`),function(dt,Bt){dt.initDebugOverlayCanvas();const ot=dt.debugOverlayCanvas,gt=dt.context.gl,It=dt.debugOverlayCanvas.getContext("2d");It.clearRect(0,0,ot.width,ot.height),It.shadowColor="white",It.shadowBlur=2,It.lineWidth=1.5,It.strokeStyle="white",It.textBaseline="top",It.font="bold 36px Open Sans, sans-serif",It.fillText(Bt,5,5),It.strokeText(Bt,5,5),dt.debugOverlayTexture.update(ot),dt.debugOverlayTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE)}(J,`${Ye} ${Je}kB`),le.draw(G,X.TRIANGLES,he,pe,Ur.alphaBlended,Mr.disabled,ba(te,D.Color.transparent,rt),null,Ce,J.debugBuffer,J.quadTriangleIndexBuffer,J.debugSegments),le.draw(G,X.LINE_STRIP,he,pe,ve,Mr.disabled,ba(te,D.Color.red),Ie,Ce,J.debugBuffer,J.tileBorderIndexBuffer,J.debugSegments)}function Kn(J,x,Q){const G=J.context,X=G.gl,te=J.colorModeForRenderPass(),le=new Ji(X.LEQUAL,Ji.ReadWrite,J.depthRangeFor3D),he=J.useProgram("terrain"),pe=x.getTerrainMesh();G.bindFramebuffer.set(null),G.viewport.set([0,0,J.width,J.height]);for(const ve of Q){const Ce=J.renderToTexture.getTexture(ve),Ie=x.getTerrainData(ve.tileID);G.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Ce.texture);const Qe={u_matrix:J.transform.calculatePosMatrix(ve.tileID.toUnwrapped()),u_texture:0,u_ele_delta:x.getMeshFrameDelta(J.transform.zoom)};he.draw(G,X.TRIANGLES,le,Fr.disabled,te,Mr.backCCW,Qe,Ie,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}class jo{constructor(x,Q){this.context=new $s(x),this.transform=Q,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:D.create(),renderTime:0},this.setup(),this.numSublayers=$t.maxUnderzooming+$t.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _r}resize(x,Q,G){if(this.width=Math.floor(x*G),this.height=Math.floor(Q*G),this.pixelRatio=G,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const X of this.style._order)this.style._layers[X].resize()}setup(){const x=this.context,Q=new D.PosArray;Q.emplaceBack(0,0),Q.emplaceBack(D.EXTENT,0),Q.emplaceBack(0,D.EXTENT),Q.emplaceBack(D.EXTENT,D.EXTENT),this.tileExtentBuffer=x.createVertexBuffer(Q,jr.members),this.tileExtentSegments=D.SegmentVector.simpleSegment(0,0,4,2);const G=new D.PosArray;G.emplaceBack(0,0),G.emplaceBack(D.EXTENT,0),G.emplaceBack(0,D.EXTENT),G.emplaceBack(D.EXTENT,D.EXTENT),this.debugBuffer=x.createVertexBuffer(G,jr.members),this.debugSegments=D.SegmentVector.simpleSegment(0,0,4,5);const X=new D.RasterBoundsArray;X.emplaceBack(0,0,0,0),X.emplaceBack(D.EXTENT,0,D.EXTENT,0),X.emplaceBack(0,D.EXTENT,0,D.EXTENT),X.emplaceBack(D.EXTENT,D.EXTENT,D.EXTENT,D.EXTENT),this.rasterBoundsBuffer=x.createVertexBuffer(X,Te.members),this.rasterBoundsSegments=D.SegmentVector.simpleSegment(0,0,4,2);const te=new D.PosArray;te.emplaceBack(0,0),te.emplaceBack(1,0),te.emplaceBack(0,1),te.emplaceBack(1,1),this.viewportBuffer=x.createVertexBuffer(te,jr.members),this.viewportSegments=D.SegmentVector.simpleSegment(0,0,4,2);const le=new D.LineStripIndexArray;le.emplaceBack(0),le.emplaceBack(1),le.emplaceBack(3),le.emplaceBack(2),le.emplaceBack(0),this.tileBorderIndexBuffer=x.createIndexBuffer(le);const he=new D.TriangleIndexArray;he.emplaceBack(0,1,2),he.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=x.createIndexBuffer(he);const pe=this.context.gl;this.stencilClearMode=new Fr({func:pe.ALWAYS,mask:0},0,255,pe.ZERO,pe.ZERO,pe.ZERO)}clearStencil(){const x=this.context,Q=x.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const G=D.create();D.ortho(G,0,this.width,this.height,0,0,1),D.scale(G,G,[Q.drawingBufferWidth,Q.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(x,Q.TRIANGLES,Ji.disabled,this.stencilClearMode,Ur.disabled,Mr.disabled,Nr(G),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(x,Q){if(this.currentStencilSource===x.source||!x.isTileClipped()||!Q||!Q.length)return;this.currentStencilSource=x.source;const G=this.context,X=G.gl;this.nextStencilID+Q.length>256&&this.clearStencil(),G.setColorMode(Ur.disabled),G.setDepthMode(Ji.disabled);const te=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const le of Q){const he=this._tileClippingMaskIDs[le.key]=this.nextStencilID++,pe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(le);te.draw(G,X.TRIANGLES,Ji.disabled,new Fr({func:X.ALWAYS,mask:0},he,255,X.KEEP,X.KEEP,X.REPLACE),Ur.disabled,Mr.disabled,Nr(le.posMatrix),pe,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const x=this.nextStencilID++,Q=this.context.gl;return new Fr({func:Q.NOTEQUAL,mask:255},x,255,Q.KEEP,Q.KEEP,Q.REPLACE)}stencilModeForClipping(x){const Q=this.context.gl;return new Fr({func:Q.EQUAL,mask:255},this._tileClippingMaskIDs[x.key],0,Q.KEEP,Q.KEEP,Q.REPLACE)}stencilConfigForOverlap(x){const Q=this.context.gl,G=x.sort((le,he)=>he.overscaledZ-le.overscaledZ),X=G[G.length-1].overscaledZ,te=G[0].overscaledZ-X+1;if(te>1){this.currentStencilSource=void 0,this.nextStencilID+te>256&&this.clearStencil();const le={};for(let he=0;he<te;he++)le[he+X]=new Fr({func:Q.GEQUAL,mask:255},he+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=te,[le,G]}return[{[X]:Fr.disabled},G]}colorModeForRenderPass(){const x=this.context.gl;return this._showOverdrawInspector?new Ur([x.CONSTANT_COLOR,x.ONE],new D.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ur.unblended:Ur.alphaBlended}depthModeForSublayer(x,Q,G){if(!this.opaquePassEnabledForLayer())return Ji.disabled;const X=1-((1+this.currentLayer)*this.numSublayers+x)*this.depthEpsilon;return new Ji(G||this.context.gl.LEQUAL,Q,[X,X])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(x,Q){this.style=x,this.options=Q,this.lineAtlas=x.lineAtlas,this.imageManager=x.imageManager,this.glyphManager=x.glyphManager,this.symbolFadeChange=x.placement.symbolFadeChange(D.browser.now()),this.imageManager.beginFrame();const G=this.style._order,X=this.style.sourceCaches,te={},le={},he={};for(const pe in X){const ve=X[pe];ve.used&&ve.prepare(this.context),te[pe]=ve.getVisibleCoordinates(),le[pe]=te[pe].slice().reverse(),he[pe]=ve.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let pe=0;pe<G.length;pe++)if(this.style._layers[G[pe]].is3D()){this.opaquePassCutoff=pe;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const pe=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!D.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||pe.length)&&(D.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ve,Ce){const Ie=ve.context,Qe=Ie.gl,Je=Ur.unblended,Ze=new Ji(Qe.LEQUAL,Ji.ReadWrite,[0,1]),rt=Ce.getTerrainMesh(),Ye=Ce.sourceCache.getRenderableTiles(),dt=ve.useProgram("terrainDepth");Ie.bindFramebuffer.set(Ce.getFramebuffer("depth").framebuffer),Ie.viewport.set([0,0,ve.width/devicePixelRatio,ve.height/devicePixelRatio]),Ie.clear({color:D.Color.transparent,depth:1});for(const Bt of Ye){const ot=Ce.getTerrainData(Bt.tileID),gt={u_matrix:ve.transform.calculatePosMatrix(Bt.tileID.toUnwrapped()),u_ele_delta:Ce.getMeshFrameDelta(ve.transform.zoom)};dt.draw(Ie,Qe.TRIANGLES,Ze,Fr.disabled,Je,Mr.backCCW,gt,ot,"terrain",rt.vertexBuffer,rt.indexBuffer,rt.segments)}Ie.bindFramebuffer.set(null),Ie.viewport.set([0,0,ve.width,ve.height])}(this,this.style.map.terrain),function(ve,Ce){const Ie=ve.context,Qe=Ie.gl,Je=Ur.unblended,Ze=new Ji(Qe.LEQUAL,Ji.ReadWrite,[0,1]),rt=Ce.getTerrainMesh(),Ye=Ce.getCoordsTexture(),dt=Ce.sourceCache.getRenderableTiles(),Bt=ve.useProgram("terrainCoords");Ie.bindFramebuffer.set(Ce.getFramebuffer("coords").framebuffer),Ie.viewport.set([0,0,ve.width/devicePixelRatio,ve.height/devicePixelRatio]),Ie.clear({color:D.Color.transparent,depth:1}),Ce.coordsIndex=[];for(const ot of dt){const gt=Ce.getTerrainData(ot.tileID);Ie.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,Ye.texture);const It={u_matrix:ve.transform.calculatePosMatrix(ot.tileID.toUnwrapped()),u_terrain_coords_id:(255-Ce.coordsIndex.length)/255,u_texture:0,u_ele_delta:Ce.getMeshFrameDelta(ve.transform.zoom)};Bt.draw(Ie,Qe.TRIANGLES,Ze,Fr.disabled,Je,Mr.backCCW,It,gt,"terrain",rt.vertexBuffer,rt.indexBuffer,rt.segments),Ce.coordsIndex.push(ot.tileID.key)}Ie.bindFramebuffer.set(null),Ie.viewport.set([0,0,ve.width,ve.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const pe of G){const ve=this.style._layers[pe];if(!ve.hasOffscreenPass()||ve.isHidden(this.transform.zoom))continue;const Ce=le[ve.source];(ve.type==="custom"||Ce.length)&&this.renderLayer(this,X[ve.source],ve,Ce)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:Q.showOverdrawInspector?D.Color.black:D.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Q.showOverdrawInspector,this.depthRangeFor3D=[0,1-(x._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=G.length-1;this.currentLayer>=0;this.currentLayer--){const pe=this.style._layers[G[this.currentLayer]],ve=X[pe.source],Ce=te[pe.source];this._renderTileClippingMasks(pe,Ce),this.renderLayer(this,ve,pe,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<G.length;this.currentLayer++){const pe=this.style._layers[G[this.currentLayer]],ve=X[pe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(pe))continue;const Ce=(pe.type==="symbol"?he:le)[pe.source];this._renderTileClippingMasks(pe,te[pe.source]),this.renderLayer(this,ve,pe,Ce)}if(this.options.showTileBoundaries){const pe=function(ve,Ce){let Ie=null;const Qe=Object.values(ve._layers).flatMap(Ye=>Ye.source&&!Ye.isHidden(Ce)?[ve.sourceCaches[Ye.source]]:[]),Je=Qe.filter(Ye=>Ye.getSource().type==="vector"),Ze=Qe.filter(Ye=>Ye.getSource().type!=="vector"),rt=Ye=>{(!Ie||Ie.getSource().maxzoom<Ye.getSource().maxzoom)&&(Ie=Ye)};return Je.forEach(Ye=>rt(Ye)),Ie||Ze.forEach(Ye=>rt(Ye)),Ie}(this.style,this.transform.zoom);pe&&function(ve,Ce,Ie){for(let Qe=0;Qe<Ie.length;Qe++)xs(ve,Ce,Ie[Qe])}(this,pe,pe.getVisibleCoordinates())}this.options.showPadding&&function(pe){const ve=pe.transform.padding;Aa(pe,pe.transform.height-(ve.top||0),3,Yo),Aa(pe,ve.bottom||0,3,Wr),Do(pe,ve.left||0,3,Vn),Do(pe,pe.transform.width-(ve.right||0),3,Us);const Ce=pe.transform.centerPoint;(function(Ie,Qe,Je,Ze){en(Ie,Qe-1,Je-10,2,20,Ze),en(Ie,Qe-10,Je-1,20,2,Ze)})(pe,Ce.x,pe.transform.height-Ce.y,ko)}(this),this.context.setDefault()}renderLayer(x,Q,G,X){if(!G.isHidden(this.transform.zoom)&&(G.type==="background"||G.type==="custom"||(X||[]).length))switch(this.id=G.id,G.type){case"symbol":(function(te,le,he,pe,ve){if(te.renderPass!=="translucent")return;const Ce=Fr.disabled,Ie=te.colorModeForRenderPass();(he._unevaluatedLayout.hasValue("text-variable-anchor")||he._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Qe,Je,Ze,rt,Ye,dt,Bt){const ot=Je.transform,gt=Ye==="map",It=dt==="map";for(const St of Qe){const Lt=rt.getTile(St),Kt=Lt.getBucket(Ze);if(!Kt||!Kt.text||!Kt.text.segments.get().length)continue;const Rt=D.evaluateSizeForZoom(Kt.textSizeData,ot.zoom),Jt=Le(Lt,1,Je.transform.zoom),Bi=Wi(St.posMatrix,It,gt,Je.transform,Jt),ar=Ze.layout.get("icon-text-fit")!=="none"&&Kt.hasIconData();if(Rt){const oi=Math.pow(2,ot.zoom-Lt.tileID.overscaledZ);Fo(Kt,gt,It,Bt,ot,Bi,St.posMatrix,oi,Rt,ar,Je.style.map.terrain?(ki,xi)=>Je.style.map.terrain.getElevation(St,ki,xi):null)}}}(pe,te,he,le,he.layout.get("text-rotation-alignment"),he.layout.get("text-pitch-alignment"),ve),he.paint.get("icon-opacity").constantOr(1)!==0&&no(te,le,he,pe,!1,he.paint.get("icon-translate"),he.paint.get("icon-translate-anchor"),he.layout.get("icon-rotation-alignment"),he.layout.get("icon-pitch-alignment"),he.layout.get("icon-keep-upright"),Ce,Ie),he.paint.get("text-opacity").constantOr(1)!==0&&no(te,le,he,pe,!0,he.paint.get("text-translate"),he.paint.get("text-translate-anchor"),he.layout.get("text-rotation-alignment"),he.layout.get("text-pitch-alignment"),he.layout.get("text-keep-upright"),Ce,Ie),le.map.showCollisionBoxes&&(Ua(te,le,he,pe,he.paint.get("text-translate"),he.paint.get("text-translate-anchor"),!0),Ua(te,le,he,pe,he.paint.get("icon-translate"),he.paint.get("icon-translate-anchor"),!1))})(x,Q,G,X,this.style.placement.variableOffsets);break;case"circle":(function(te,le,he,pe){if(te.renderPass!=="translucent")return;const ve=he.paint.get("circle-opacity"),Ce=he.paint.get("circle-stroke-width"),Ie=he.paint.get("circle-stroke-opacity"),Qe=!he.layout.get("circle-sort-key").isConstant();if(ve.constantOr(1)===0&&(Ce.constantOr(1)===0||Ie.constantOr(1)===0))return;const Je=te.context,Ze=Je.gl,rt=te.depthModeForSublayer(0,Ji.ReadOnly),Ye=Fr.disabled,dt=te.colorModeForRenderPass(),Bt=[];for(let ot=0;ot<pe.length;ot++){const gt=pe[ot],It=le.getTile(gt),St=It.getBucket(he);if(!St)continue;const Lt=St.programConfigurations.get(he.id),Kt=te.useProgram("circle",Lt),Rt=St.layoutVertexBuffer,Jt=St.indexBuffer,Bi=te.style.map.terrain&&te.style.map.terrain.getTerrainData(gt),ar={programConfiguration:Lt,program:Kt,layoutVertexBuffer:Rt,indexBuffer:Jt,uniformValues:ja(te,gt,It,he),terrainData:Bi};if(Qe){const oi=St.segments.get();for(const ki of oi)Bt.push({segments:new D.SegmentVector([ki]),sortKey:ki.sortKey,state:ar})}else Bt.push({segments:St.segments,sortKey:0,state:ar})}Qe&&Bt.sort((ot,gt)=>ot.sortKey-gt.sortKey);for(const ot of Bt){const{programConfiguration:gt,program:It,layoutVertexBuffer:St,indexBuffer:Lt,uniformValues:Kt,terrainData:Rt}=ot.state;It.draw(Je,Ze.TRIANGLES,rt,Ye,dt,Mr.disabled,Kt,Rt,he.id,St,Lt,ot.segments,he.paint,te.transform.zoom,gt)}})(x,Q,G,X);break;case"heatmap":(function(te,le,he,pe){if(he.paint.get("heatmap-opacity")!==0)if(te.renderPass==="offscreen"){const ve=te.context,Ce=ve.gl,Ie=Fr.disabled,Qe=new Ur([Ce.ONE,Ce.ONE],D.Color.transparent,[!0,!0,!0,!0]);(function(Je,Ze,rt){const Ye=Je.gl;Je.activeTexture.set(Ye.TEXTURE1),Je.viewport.set([0,0,Ze.width/4,Ze.height/4]);let dt=rt.heatmapFbo;if(dt)Ye.bindTexture(Ye.TEXTURE_2D,dt.colorAttachment.get()),Je.bindFramebuffer.set(dt.framebuffer);else{const Bt=Ye.createTexture();Ye.bindTexture(Ye.TEXTURE_2D,Bt),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_WRAP_S,Ye.CLAMP_TO_EDGE),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_WRAP_T,Ye.CLAMP_TO_EDGE),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_MIN_FILTER,Ye.LINEAR),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_MAG_FILTER,Ye.LINEAR),dt=rt.heatmapFbo=Je.createFramebuffer(Ze.width/4,Ze.height/4,!1,!1),function(ot,gt,It,St){var Lt,Kt;const Rt=ot.gl,Jt=(Lt=ot.HALF_FLOAT)!==null&&Lt!==void 0?Lt:Rt.UNSIGNED_BYTE,Bi=(Kt=ot.RGBA16F)!==null&&Kt!==void 0?Kt:Rt.RGBA;Rt.texImage2D(Rt.TEXTURE_2D,0,Bi,gt.width/4,gt.height/4,0,Rt.RGBA,Jt,null),St.colorAttachment.set(It)}(Je,Ze,Bt,dt)}})(ve,te,he),ve.clear({color:D.Color.transparent});for(let Je=0;Je<pe.length;Je++){const Ze=pe[Je];if(le.hasRenderableParent(Ze))continue;const rt=le.getTile(Ze),Ye=rt.getBucket(he);if(!Ye)continue;const dt=Ye.programConfigurations.get(he.id),Bt=te.useProgram("heatmap",dt),{zoom:ot}=te.transform;Bt.draw(ve,Ce.TRIANGLES,Ji.disabled,Ie,Qe,Mr.disabled,Vo(Ze.posMatrix,rt,ot,he.paint.get("heatmap-intensity")),null,he.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,he.paint,te.transform.zoom,dt)}ve.viewport.set([0,0,te.width,te.height])}else te.renderPass==="translucent"&&(te.context.setColorMode(te.colorModeForRenderPass()),function(ve,Ce){const Ie=ve.context,Qe=Ie.gl,Je=Ce.heatmapFbo;if(!Je)return;Ie.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,Je.colorAttachment.get()),Ie.activeTexture.set(Qe.TEXTURE1);let Ze=Ce.colorRampTexture;Ze||(Ze=Ce.colorRampTexture=new vt(Ie,Ce.colorRamp,Qe.RGBA)),Ze.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(Ie,Qe.TRIANGLES,Ji.disabled,Fr.disabled,ve.colorModeForRenderPass(),Mr.disabled,((rt,Ye,dt,Bt)=>{const ot=D.create();D.ortho(ot,0,rt.width,rt.height,0,0,1);const gt=rt.context.gl;return{u_matrix:ot,u_world:[gt.drawingBufferWidth,gt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ye.paint.get("heatmap-opacity")}})(ve,Ce),null,Ce.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,Ce.paint,ve.transform.zoom)}(te,he))})(x,Q,G,X);break;case"line":(function(te,le,he,pe){if(te.renderPass!=="translucent")return;const ve=he.paint.get("line-opacity"),Ce=he.paint.get("line-width");if(ve.constantOr(1)===0||Ce.constantOr(1)===0)return;const Ie=te.depthModeForSublayer(0,Ji.ReadOnly),Qe=te.colorModeForRenderPass(),Je=he.paint.get("line-dasharray"),Ze=he.paint.get("line-pattern"),rt=Ze.constantOr(1),Ye=he.paint.get("line-gradient"),dt=he.getCrossfadeParameters(),Bt=rt?"linePattern":Je?"lineSDF":Ye?"lineGradient":"line",ot=te.context,gt=ot.gl;let It=!0;for(const St of pe){const Lt=le.getTile(St);if(rt&&!Lt.patternsLoaded())continue;const Kt=Lt.getBucket(he);if(!Kt)continue;const Rt=Kt.programConfigurations.get(he.id),Jt=te.context.program.get(),Bi=te.useProgram(Bt,Rt),ar=It||Bi.program!==Jt,oi=te.style.map.terrain&&te.style.map.terrain.getTerrainData(St),ki=Ze.constantOr(null);if(ki&&Lt.imageAtlas){const or=Lt.imageAtlas,Mi=or.patternPositions[ki.to.toString()],lr=or.patternPositions[ki.from.toString()];Mi&&lr&&Rt.setConstantPatternPositions(Mi,lr)}const xi=oi?St:null,Hr=rt?br(te,Lt,he,dt,xi):Je?er(te,Lt,he,Je,dt,xi):Ye?Tn(te,Lt,he,Kt.lineClipsArray.length,xi):xa(te,Lt,he,xi);if(rt)ot.activeTexture.set(gt.TEXTURE0),Lt.imageAtlasTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),Rt.updatePaintBuffers(dt);else if(Je&&(ar||te.lineAtlas.dirty))ot.activeTexture.set(gt.TEXTURE0),te.lineAtlas.bind(ot);else if(Ye){const or=Kt.gradients[he.id];let Mi=or.texture;if(he.gradientVersion!==or.version){let lr=256;if(he.stepInterpolant){const Kr=le.getSource().maxzoom,kr=St.canonical.z===Kr?Math.ceil(1<<te.transform.maxZoom-St.canonical.z):1;lr=D.clamp(D.nextPowerOfTwo(Kt.maxLineLength/D.EXTENT*1024*kr),256,ot.maxTextureSize)}or.gradient=D.renderColorRamp({expression:he.gradientExpression(),evaluationKey:"lineProgress",resolution:lr,image:or.gradient||void 0,clips:Kt.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new vt(ot,or.gradient,gt.RGBA),or.version=he.gradientVersion,Mi=or.texture}ot.activeTexture.set(gt.TEXTURE0),Mi.bind(he.stepInterpolant?gt.NEAREST:gt.LINEAR,gt.CLAMP_TO_EDGE)}Bi.draw(ot,gt.TRIANGLES,Ie,te.stencilModeForClipping(St),Qe,Mr.disabled,Hr,oi,he.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,he.paint,te.transform.zoom,Rt,Kt.layoutVertexBuffer2),It=!1}})(x,Q,G,X);break;case"fill":(function(te,le,he,pe){const ve=he.paint.get("fill-color"),Ce=he.paint.get("fill-opacity");if(Ce.constantOr(1)===0)return;const Ie=te.colorModeForRenderPass(),Qe=he.paint.get("fill-pattern"),Je=te.opaquePassEnabledForLayer()&&!Qe.constantOr(1)&&ve.constantOr(D.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(te.renderPass===Je){const Ze=te.depthModeForSublayer(1,te.renderPass==="opaque"?Ji.ReadWrite:Ji.ReadOnly);oo(te,le,he,pe,Ze,Ie,!1)}if(te.renderPass==="translucent"&&he.paint.get("fill-antialias")){const Ze=te.depthModeForSublayer(he.getPaintProperty("fill-outline-color")?2:0,Ji.ReadOnly);oo(te,le,he,pe,Ze,Ie,!0)}})(x,Q,G,X);break;case"fill-extrusion":(function(te,le,he,pe){const ve=he.paint.get("fill-extrusion-opacity");if(ve!==0&&te.renderPass==="translucent"){const Ce=new Ji(te.context.gl.LEQUAL,Ji.ReadWrite,te.depthRangeFor3D);if(ve!==1||he.paint.get("fill-extrusion-pattern").constantOr(1))Pa(te,le,he,pe,Ce,Fr.disabled,Ur.disabled),Pa(te,le,he,pe,Ce,te.stencilModeFor3D(),te.colorModeForRenderPass());else{const Ie=te.colorModeForRenderPass();Pa(te,le,he,pe,Ce,Fr.disabled,Ie)}}})(x,Q,G,X);break;case"hillshade":(function(te,le,he,pe){if(te.renderPass!=="offscreen"&&te.renderPass!=="translucent")return;const ve=te.context,Ce=te.depthModeForSublayer(0,Ji.ReadOnly),Ie=te.colorModeForRenderPass(),[Qe,Je]=te.renderPass==="translucent"?te.stencilConfigForOverlap(pe):[{},pe];for(const Ze of Je){const rt=le.getTile(Ze);rt.needsHillshadePrepare!==void 0&&rt.needsHillshadePrepare&&te.renderPass==="offscreen"?La(te,rt,he,Ce,Fr.disabled,Ie):te.renderPass==="translucent"&&Nn(te,Ze,rt,he,Ce,Qe[Ze.overscaledZ],Ie)}ve.viewport.set([0,0,te.width,te.height])})(x,Q,G,X);break;case"raster":(function(te,le,he,pe){if(te.renderPass!=="translucent"||he.paint.get("raster-opacity")===0||!pe.length)return;const ve=te.context,Ce=ve.gl,Ie=le.getSource(),Qe=te.useProgram("raster"),Je=te.colorModeForRenderPass(),[Ze,rt]=Ie instanceof Ve?[{},pe]:te.stencilConfigForOverlap(pe),Ye=rt[rt.length-1].overscaledZ,dt=!te.options.moving;for(const Bt of rt){const ot=te.depthModeForSublayer(Bt.overscaledZ-Ye,he.paint.get("raster-opacity")===1?Ji.ReadWrite:Ji.ReadOnly,Ce.LESS),gt=le.getTile(Bt);gt.registerFadeDuration(he.paint.get("raster-fade-duration"));const It=le.findLoadedParent(Bt,0),St=_l(gt,It,le,he,te.transform,te.style.map.terrain);let Lt,Kt;const Rt=he.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;ve.activeTexture.set(Ce.TEXTURE0),gt.texture.bind(Rt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ce.TEXTURE1),It?(It.texture.bind(Rt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Lt=Math.pow(2,It.tileID.overscaledZ-gt.tileID.overscaledZ),Kt=[gt.tileID.canonical.x*Lt%1,gt.tileID.canonical.y*Lt%1]):gt.texture.bind(Rt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);const Jt=te.style.map.terrain&&te.style.map.terrain.getTerrainData(Bt),Bi=Jt?Bt:null,ar=Bi?Bi.posMatrix:te.transform.calculatePosMatrix(Bt.toUnwrapped(),dt),oi=Ba(ar,Kt||[0,0],Lt||1,St,he);Ie instanceof Ve?Qe.draw(ve,Ce.TRIANGLES,ot,Fr.disabled,Je,Mr.disabled,oi,Jt,he.id,Ie.boundsBuffer,te.quadTriangleIndexBuffer,Ie.boundsSegments):Qe.draw(ve,Ce.TRIANGLES,ot,Ze[Bt.overscaledZ],Je,Mr.disabled,oi,Jt,he.id,te.rasterBoundsBuffer,te.quadTriangleIndexBuffer,te.rasterBoundsSegments)}})(x,Q,G,X);break;case"background":(function(te,le,he,pe){const ve=he.paint.get("background-color"),Ce=he.paint.get("background-opacity");if(Ce===0)return;const Ie=te.context,Qe=Ie.gl,Je=te.transform,Ze=Je.tileSize,rt=he.paint.get("background-pattern");if(te.isPatternMissing(rt))return;const Ye=!rt&&ve.a===1&&Ce===1&&te.opaquePassEnabledForLayer()?"opaque":"translucent";if(te.renderPass!==Ye)return;const dt=Fr.disabled,Bt=te.depthModeForSublayer(0,Ye==="opaque"?Ji.ReadWrite:Ji.ReadOnly),ot=te.colorModeForRenderPass(),gt=te.useProgram(rt?"backgroundPattern":"background"),It=pe||Je.coveringTiles({tileSize:Ze,terrain:te.style.map.terrain});rt&&(Ie.activeTexture.set(Qe.TEXTURE0),te.imageManager.bind(te.context));const St=he.getCrossfadeParameters();for(const Lt of It){const Kt=pe?Lt.posMatrix:te.transform.calculatePosMatrix(Lt.toUnwrapped()),Rt=rt?Za(Kt,Ce,te,rt,{tileID:Lt,tileSize:Ze},St):On(Kt,Ce,ve),Jt=te.style.map.terrain&&te.style.map.terrain.getTerrainData(Lt);gt.draw(Ie,Qe.TRIANGLES,Bt,dt,ot,Mr.disabled,Rt,Jt,he.id,te.tileExtentBuffer,te.quadTriangleIndexBuffer,te.tileExtentSegments)}})(x,0,G,X);break;case"custom":(function(te,le,he){const pe=te.context,ve=he.implementation;if(te.renderPass==="offscreen"){const Ce=ve.prerender;Ce&&(te.setCustomLayerDefaults(),pe.setColorMode(te.colorModeForRenderPass()),Ce.call(ve,pe.gl,te.transform.customLayerMatrix()),pe.setDirty(),te.setBaseState())}else if(te.renderPass==="translucent"){te.setCustomLayerDefaults(),pe.setColorMode(te.colorModeForRenderPass()),pe.setStencilMode(Fr.disabled);const Ce=ve.renderingMode==="3d"?new Ji(te.context.gl.LEQUAL,Ji.ReadWrite,te.depthRangeFor3D):te.depthModeForSublayer(0,Ji.ReadOnly);pe.setDepthMode(Ce),ve.render(pe.gl,te.transform.customLayerMatrix()),pe.setDirty(),te.setBaseState(),pe.bindFramebuffer.set(null)}})(x,0,G)}}translatePosMatrix(x,Q,G,X,te){if(!G[0]&&!G[1])return x;const le=te?X==="map"?this.transform.angle:0:X==="viewport"?-this.transform.angle:0;if(le){const ve=Math.sin(le),Ce=Math.cos(le);G=[G[0]*Ce-G[1]*ve,G[0]*ve+G[1]*Ce]}const he=[te?G[0]:Le(Q,G[0],this.transform.zoom),te?G[1]:Le(Q,G[1],this.transform.zoom),0],pe=new Float32Array(16);return D.translate(pe,x,he),pe}saveTileTexture(x){const Q=this._tileTextures[x.size[0]];Q?Q.push(x):this._tileTextures[x.size[0]]=[x]}getTileTexture(x){const Q=this._tileTextures[x];return Q&&Q.length>0?Q.pop():null}isPatternMissing(x){if(!x)return!1;if(!x.from||!x.to)return!0;const Q=this.imageManager.getPattern(x.from.toString()),G=this.imageManager.getPattern(x.to.toString());return!Q||!G}useProgram(x,Q){this.cache=this.cache||{};const G=x+(Q?Q.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[G]||(this.cache[G]=new Os(this.context,ps[x],Q,ks[x],this._showOverdrawInspector,this.style.map.terrain)),this.cache[G]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const x=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(x.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new vt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:x,drawingBufferHeight:Q}=this.context.gl;return this.width!==x||this.height!==Q}}class ca{constructor(x,Q){this.points=x,this.planes=Q}static fromInvProjectionMatrix(x,Q,G){const X=Math.pow(2,G),te=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(he=>{const pe=1/(he=D.transformMat4([],he,x))[3]/Q*X;return D.mul$1(he,he,[pe,pe,1/he[3],pe])}),le=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(he=>{const pe=function(Qe,Je){var Ze=Je[0],rt=Je[1],Ye=Je[2],dt=Ze*Ze+rt*rt+Ye*Ye;return dt>0&&(dt=1/Math.sqrt(dt)),Qe[0]=Je[0]*dt,Qe[1]=Je[1]*dt,Qe[2]=Je[2]*dt,Qe}([],function(Qe,Je,Ze){var rt=Je[0],Ye=Je[1],dt=Je[2],Bt=Ze[0],ot=Ze[1],gt=Ze[2];return Qe[0]=Ye*gt-dt*ot,Qe[1]=dt*Bt-rt*gt,Qe[2]=rt*ot-Ye*Bt,Qe}([],ft([],te[he[0]],te[he[1]]),ft([],te[he[2]],te[he[1]]))),ve=-((Ce=pe)[0]*(Ie=te[he[1]])[0]+Ce[1]*Ie[1]+Ce[2]*Ie[2]);var Ce,Ie;return pe.concat(ve)});return new ca(te,le)}}class ha{constructor(x,Q){this.min=x,this.max=Q,this.center=function(G,X,te){return G[0]=.5*X[0],G[1]=.5*X[1],G[2]=.5*X[2],G}([],function(G,X,te){return G[0]=X[0]+te[0],G[1]=X[1]+te[1],G[2]=X[2]+te[2],G}([],this.min,this.max))}quadrant(x){const Q=[x%2==0,x<2],G=At(this.min),X=At(this.max);for(let te=0;te<Q.length;te++)G[te]=Q[te]?this.min[te]:this.center[te],X[te]=Q[te]?this.center[te]:this.max[te];return X[2]=this.max[2],new ha(G,X)}distanceX(x){return Math.max(Math.min(this.max[0],x[0]),this.min[0])-x[0]}distanceY(x){return Math.max(Math.min(this.max[1],x[1]),this.min[1])-x[1]}intersects(x){const Q=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let G=!0;for(let X=0;X<x.planes.length;X++){const te=x.planes[X];let le=0;for(let he=0;he<Q.length;he++)D.dot(te,Q[he])>=0&&le++;if(le===0)return 0;le!==Q.length&&(G=!1)}if(G)return 2;for(let X=0;X<3;X++){let te=Number.MAX_VALUE,le=-Number.MAX_VALUE;for(let he=0;he<x.points.length;he++){const pe=x.points[he][X]-this.min[X];te=Math.min(te,pe),le=Math.max(le,pe)}if(le<0||te>this.max[X]-this.min[X])return 0}return 1}}class _n{constructor(x=0,Q=0,G=0,X=0){if(isNaN(x)||x<0||isNaN(Q)||Q<0||isNaN(G)||G<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=x,this.bottom=Q,this.left=G,this.right=X}interpolate(x,Q,G){return Q.top!=null&&x.top!=null&&(this.top=D.interpolate.number(x.top,Q.top,G)),Q.bottom!=null&&x.bottom!=null&&(this.bottom=D.interpolate.number(x.bottom,Q.bottom,G)),Q.left!=null&&x.left!=null&&(this.left=D.interpolate.number(x.left,Q.left,G)),Q.right!=null&&x.right!=null&&(this.right=D.interpolate.number(x.right,Q.right,G)),this}getCenter(x,Q){const G=D.clamp((this.left+x-this.right)/2,0,x),X=D.clamp((this.top+Q-this.bottom)/2,0,Q);return new D.Point(G,X)}equals(x){return this.top===x.top&&this.bottom===x.bottom&&this.left===x.left&&this.right===x.right}clone(){return new _n(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Bs{constructor(x,Q,G,X,te){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=te===void 0||!!te,this._minZoom=x||0,this._maxZoom=Q||22,this._minPitch=G??0,this._maxPitch=X??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new D.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const x=new Bs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return x.apply(this),x}apply(x){this.tileSize=x.tileSize,this.latRange=x.latRange,this.width=x.width,this.height=x.height,this._center=x._center,this._elevation=x._elevation,this._minEleveationForCurrentTile=x._minEleveationForCurrentTile,this.zoom=x.zoom,this.angle=x.angle,this._fov=x._fov,this._pitch=x._pitch,this._unmodified=x._unmodified,this._edgeInsets=x._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(x){this._minZoom!==x&&(this._minZoom=x,this.zoom=Math.max(this.zoom,x))}get maxZoom(){return this._maxZoom}set maxZoom(x){this._maxZoom!==x&&(this._maxZoom=x,this.zoom=Math.min(this.zoom,x))}get minPitch(){return this._minPitch}set minPitch(x){this._minPitch!==x&&(this._minPitch=x,this.pitch=Math.max(this.pitch,x))}get maxPitch(){return this._maxPitch}set maxPitch(x){this._maxPitch!==x&&(this._maxPitch=x,this.pitch=Math.min(this.pitch,x))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(x){x===void 0?x=!0:x===null&&(x=!1),this._renderWorldCopies=x}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new D.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(x){const Q=-D.wrap(x,-180,180)*Math.PI/180;this.angle!==Q&&(this._unmodified=!1,this.angle=Q,this._calcMatrices(),this.rotationMatrix=function(){var G=new D.ARRAY_TYPE(4);return D.ARRAY_TYPE!=Float32Array&&(G[1]=0,G[2]=0),G[0]=1,G[3]=1,G}(),function(G,X,te){var le=X[0],he=X[1],pe=X[2],ve=X[3],Ce=Math.sin(te),Ie=Math.cos(te);G[0]=le*Ie+pe*Ce,G[1]=he*Ie+ve*Ce,G[2]=le*-Ce+pe*Ie,G[3]=he*-Ce+ve*Ie}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(x){const Q=D.clamp(x,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Q&&(this._unmodified=!1,this._pitch=Q,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(x){x=Math.max(.01,Math.min(60,x)),this._fov!==x&&(this._unmodified=!1,this._fov=x/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(x){const Q=Math.min(Math.max(x,this.minZoom),this.maxZoom);this._zoom!==Q&&(this._unmodified=!1,this._zoom=Q,this.tileZoom=Math.max(0,Math.floor(Q)),this.scale=this.zoomScale(Q),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(x){x.lat===this._center.lat&&x.lng===this._center.lng||(this._unmodified=!1,this._center=x,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(x){x!==this._elevation&&(this._elevation=x,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(x){this._edgeInsets.equals(x)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,x,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(x){return this._edgeInsets.equals(x)}interpolatePadding(x,Q,G){this._unmodified=!1,this._edgeInsets.interpolate(x,Q,G),this._constrain(),this._calcMatrices()}coveringZoomLevel(x){const Q=(x.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/x.tileSize));return Math.max(0,Q)}getVisibleUnwrappedCoordinates(x){const Q=[new D.UnwrappedTileID(0,x)];if(this._renderWorldCopies){const G=this.pointCoordinate(new D.Point(0,0)),X=this.pointCoordinate(new D.Point(this.width,0)),te=this.pointCoordinate(new D.Point(this.width,this.height)),le=this.pointCoordinate(new D.Point(0,this.height)),he=Math.floor(Math.min(G.x,X.x,te.x,le.x)),pe=Math.floor(Math.max(G.x,X.x,te.x,le.x)),ve=1;for(let Ce=he-ve;Ce<=pe+ve;Ce++)Ce!==0&&Q.push(new D.UnwrappedTileID(Ce,x))}return Q}coveringTiles(x){var Q,G;let X=this.coveringZoomLevel(x);const te=X;if(x.minzoom!==void 0&&X<x.minzoom)return[];x.maxzoom!==void 0&&X>x.maxzoom&&(X=x.maxzoom);const le=this.pointCoordinate(this.getCameraPoint()),he=D.MercatorCoordinate.fromLngLat(this.center),pe=Math.pow(2,X),ve=[pe*le.x,pe*le.y,0],Ce=[pe*he.x,pe*he.y,0],Ie=ca.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,X);let Qe=x.minzoom||0;!x.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Qe=X);const Je=x.terrain?2/Math.min(this.tileSize,x.tileSize)*this.tileSize:3,Ze=ot=>({aabb:new ha([ot*pe,0,0],[(ot+1)*pe,pe,0]),zoom:0,x:0,y:0,wrap:ot,fullyVisible:!1}),rt=[],Ye=[],dt=X,Bt=x.reparseOverscaled?te:X;if(this._renderWorldCopies)for(let ot=1;ot<=3;ot++)rt.push(Ze(-ot)),rt.push(Ze(ot));for(rt.push(Ze(0));rt.length>0;){const ot=rt.pop(),gt=ot.x,It=ot.y;let St=ot.fullyVisible;if(!St){const Bi=ot.aabb.intersects(Ie);if(Bi===0)continue;St=Bi===2}const Lt=x.terrain?ve:Ce,Kt=ot.aabb.distanceX(Lt),Rt=ot.aabb.distanceY(Lt),Jt=Math.max(Math.abs(Kt),Math.abs(Rt));if(ot.zoom===dt||Jt>Je+(1<<dt-ot.zoom)-2&&ot.zoom>=Qe){const Bi=dt-ot.zoom,ar=ve[0]-.5-(gt<<Bi),oi=ve[1]-.5-(It<<Bi);Ye.push({tileID:new D.OverscaledTileID(ot.zoom===dt?Bt:ot.zoom,ot.wrap,ot.zoom,gt,It),distanceSq:Tt([Ce[0]-.5-gt,Ce[1]-.5-It]),tileDistanceToCamera:Math.sqrt(ar*ar+oi*oi)})}else for(let Bi=0;Bi<4;Bi++){const ar=(gt<<1)+Bi%2,oi=(It<<1)+(Bi>>1),ki=ot.zoom+1;let xi=ot.aabb.quadrant(Bi);if(x.terrain){const Hr=new D.OverscaledTileID(ki,ot.wrap,ki,ar,oi),or=x.terrain.getMinMaxElevation(Hr),Mi=(Q=or.minElevation)!==null&&Q!==void 0?Q:this.elevation,lr=(G=or.maxElevation)!==null&&G!==void 0?G:this.elevation;xi=new ha([xi.min[0],xi.min[1],Mi],[xi.max[0],xi.max[1],lr])}rt.push({aabb:xi,zoom:ki,x:ar,y:oi,wrap:ot.wrap,fullyVisible:St})}}return Ye.sort((ot,gt)=>ot.distanceSq-gt.distanceSq).map(ot=>ot.tileID)}resize(x,Q){this.width=x,this.height=Q,this.pixelsToGLUnits=[2/x,-2/Q],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(x){return Math.pow(2,x)}scaleZoom(x){return Math.log(x)/Math.LN2}project(x){const Q=D.clamp(x.lat,-this.maxValidLatitude,this.maxValidLatitude);return new D.Point(D.mercatorXfromLng(x.lng)*this.worldSize,D.mercatorYfromLat(Q)*this.worldSize)}unproject(x){return new D.MercatorCoordinate(x.x/this.worldSize,x.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(x){const Q=this.pointLocation(this.centerPoint,x),G=x.getElevationForLngLatZoom(Q,this.tileZoom);if(!(this.elevation-G))return;const X=this.getCameraPosition(),te=D.MercatorCoordinate.fromLngLat(X.lngLat,X.altitude),le=D.MercatorCoordinate.fromLngLat(Q,G),he=te.x-le.x,pe=te.y-le.y,ve=te.z-le.z,Ce=Math.sqrt(he*he+pe*pe+ve*ve),Ie=this.scaleZoom(this.cameraToCenterDistance/Ce/this.tileSize);this._elevation=G,this._center=Q,this.zoom=Ie}setLocationAtPoint(x,Q){const G=this.pointCoordinate(Q),X=this.pointCoordinate(this.centerPoint),te=this.locationCoordinate(x),le=new D.MercatorCoordinate(te.x-(G.x-X.x),te.y-(G.y-X.y));this.center=this.coordinateLocation(le),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(x,Q){return Q?this.coordinatePoint(this.locationCoordinate(x),Q.getElevationForLngLatZoom(x,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(x))}pointLocation(x,Q){return this.coordinateLocation(this.pointCoordinate(x,Q))}locationCoordinate(x){return D.MercatorCoordinate.fromLngLat(x)}coordinateLocation(x){return x&&x.toLngLat()}pointCoordinate(x,Q){if(Q){const Qe=Q.pointCoordinate(x);if(Qe!=null)return Qe}const G=[x.x,x.y,0,1],X=[x.x,x.y,1,1];D.transformMat4(G,G,this.pixelMatrixInverse),D.transformMat4(X,X,this.pixelMatrixInverse);const te=G[3],le=X[3],he=G[1]/te,pe=X[1]/le,ve=G[2]/te,Ce=X[2]/le,Ie=ve===Ce?0:(0-ve)/(Ce-ve);return new D.MercatorCoordinate(D.interpolate.number(G[0]/te,X[0]/le,Ie)/this.worldSize,D.interpolate.number(he,pe,Ie)/this.worldSize)}coordinatePoint(x,Q=0,G=this.pixelMatrix){const X=[x.x*this.worldSize,x.y*this.worldSize,Q,1];return D.transformMat4(X,X,G),new D.Point(X[0]/X[3],X[1]/X[3])}getBounds(){const x=Math.max(0,this.height/2-this.getHorizon());return new R().extend(this.pointLocation(new D.Point(0,x))).extend(this.pointLocation(new D.Point(this.width,x))).extend(this.pointLocation(new D.Point(this.width,this.height))).extend(this.pointLocation(new D.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new R([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(x){x?(this.lngRange=[x.getWest(),x.getEast()],this.latRange=[x.getSouth(),x.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(x,Q=!1){const G=x.key,X=Q?this._alignedPosMatrixCache:this._posMatrixCache;if(X[G])return X[G];const te=x.canonical,le=this.worldSize/this.zoomScale(te.z),he=te.x+Math.pow(2,te.z)*x.wrap,pe=D.identity(new Float64Array(16));return D.translate(pe,pe,[he*le,te.y*le,0]),D.scale(pe,pe,[le/D.EXTENT,le/D.EXTENT,1]),D.multiply(pe,Q?this.alignedProjMatrix:this.projMatrix,pe),X[G]=new Float32Array(pe),X[G]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let x,Q,G,X,te=-90,le=90,he=-180,pe=180;const ve=this.size,Ce=this._unmodified;if(this.latRange){const Je=this.latRange;te=D.mercatorYfromLat(Je[1])*this.worldSize,le=D.mercatorYfromLat(Je[0])*this.worldSize,x=le-te<ve.y?ve.y/(le-te):0}if(this.lngRange){const Je=this.lngRange;he=D.wrap(D.mercatorXfromLng(Je[0])*this.worldSize,0,this.worldSize),pe=D.wrap(D.mercatorXfromLng(Je[1])*this.worldSize,0,this.worldSize),pe<he&&(pe+=this.worldSize),Q=pe-he<ve.x?ve.x/(pe-he):0}const Ie=this.point,Qe=Math.max(Q||0,x||0);if(Qe)return this.center=this.unproject(new D.Point(Q?(pe+he)/2:Ie.x,x?(le+te)/2:Ie.y)),this.zoom+=this.scaleZoom(Qe),this._unmodified=Ce,void(this._constraining=!1);if(this.latRange){const Je=Ie.y,Ze=ve.y/2;Je-Ze<te&&(X=te+Ze),Je+Ze>le&&(X=le-Ze)}if(this.lngRange){const Je=(he+pe)/2,Ze=D.wrap(Ie.x,Je-this.worldSize/2,Je+this.worldSize/2),rt=ve.x/2;Ze-rt<he&&(G=he+rt),Ze+rt>pe&&(G=pe-rt)}G===void 0&&X===void 0||(this.center=this.unproject(new D.Point(G!==void 0?G:Ie.x,X!==void 0?X:Ie.y)).wrap()),this._unmodified=Ce,this._constraining=!1}_calcMatrices(){if(!this.height)return;const x=this.centerOffset,Q=this.point.x,G=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=D.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let X=D.identity(new Float64Array(16));D.scale(X,X,[this.width/2,-this.height/2,1]),D.translate(X,X,[1,-1,0]),this.labelPlaneMatrix=X,X=D.identity(new Float64Array(16)),D.scale(X,X,[1,-1,1]),D.translate(X,X,[-1,-1,0]),D.scale(X,X,[2/this.width,2/this.height,1]),this.glCoordMatrix=X;const te=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),le=Math.min(this.elevation,this._minEleveationForCurrentTile),he=te-le*this._pixelPerMeter/Math.cos(this._pitch),pe=le<0?he:te,ve=Math.PI/2+this._pitch,Ce=this._fov*(.5+x.y/this.height),Ie=Math.sin(Ce)*pe/Math.sin(D.clamp(Math.PI-ve-Ce,.01,Math.PI-.01)),Qe=this.getHorizon(),Je=2*Math.atan(Qe/this.cameraToCenterDistance)*(.5+x.y/(2*Qe)),Ze=Math.sin(Je)*pe/Math.sin(D.clamp(Math.PI-ve-Je,.01,Math.PI-.01)),rt=Math.min(Ie,Ze),Ye=1.01*(Math.cos(Math.PI/2-this._pitch)*rt+pe),dt=this.height/50;X=new Float64Array(16),D.perspective(X,this._fov,this.width/this.height,dt,Ye),X[8]=2*-x.x/this.width,X[9]=2*x.y/this.height,D.scale(X,X,[1,-1,1]),D.translate(X,X,[0,0,-this.cameraToCenterDistance]),D.rotateX(X,X,this._pitch),D.rotateZ(X,X,this.angle),D.translate(X,X,[-Q,-G,0]),this.mercatorMatrix=D.scale([],X,[this.worldSize,this.worldSize,this.worldSize]),D.scale(X,X,[1,1,this._pixelPerMeter]),this.pixelMatrix=D.multiply(new Float64Array(16),this.labelPlaneMatrix,X),D.translate(X,X,[0,0,-this.elevation]),this.projMatrix=X,this.invProjMatrix=D.invert([],X),this.pixelMatrix3D=D.multiply(new Float64Array(16),this.labelPlaneMatrix,X);const Bt=this.width%2/2,ot=this.height%2/2,gt=Math.cos(this.angle),It=Math.sin(this.angle),St=Q-Math.round(Q)+gt*Bt+It*ot,Lt=G-Math.round(G)+gt*ot+It*Bt,Kt=new Float64Array(X);if(D.translate(Kt,Kt,[St>.5?St-1:St,Lt>.5?Lt-1:Lt,0]),this.alignedProjMatrix=Kt,X=D.invert(new Float64Array(16),this.pixelMatrix),!X)throw new Error("failed to invert matrix");this.pixelMatrixInverse=X,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const x=this.pointCoordinate(new D.Point(0,0)),Q=[x.x*this.worldSize,x.y*this.worldSize,0,1];return D.transformMat4(Q,Q,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const x=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new D.Point(0,x))}getCameraQueryGeometry(x){const Q=this.getCameraPoint();if(x.length===1)return[x[0],Q];{let G=Q.x,X=Q.y,te=Q.x,le=Q.y;for(const he of x)G=Math.min(G,he.x),X=Math.min(X,he.y),te=Math.max(te,he.x),le=Math.max(le,he.y);return[new D.Point(G,X),new D.Point(te,X),new D.Point(te,le),new D.Point(G,le),new D.Point(G,X)]}}}function yn(J,x){let Q,G=!1,X=null,te=null;const le=()=>{X=null,G&&(J.apply(te,Q),X=setTimeout(le,x),G=!1)};return(...he)=>(G=!0,te=this,Q=he,X||le(),X)}class Uo{constructor(x){this._getCurrentHash=()=>{const Q=window.location.hash.replace("#","");if(this._hashName){let G;return Q.split("&").map(X=>X.split("=")).forEach(X=>{X[0]===this._hashName&&(G=X)}),(G&&G[1]||"").split("/")}return Q.split("/")},this._onHashChange=()=>{const Q=this._getCurrentHash();if(Q.length>=3&&!Q.some(G=>isNaN(G))){const G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Q[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Q[2],+Q[1]],zoom:+Q[0],bearing:G,pitch:+(Q[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const Q=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,Q)}catch{}},this._updateHash=yn(this._updateHashUnthrottled,300),this._hashName=x&&encodeURIComponent(x)}addTo(x){return this._map=x,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(x){const Q=this._map.getCenter(),G=Math.round(100*this._map.getZoom())/100,X=Math.ceil((G*Math.LN2+Math.log(512/360/.5))/Math.LN10),te=Math.pow(10,X),le=Math.round(Q.lng*te)/te,he=Math.round(Q.lat*te)/te,pe=this._map.getBearing(),ve=this._map.getPitch();let Ce="";if(Ce+=x?`/${le}/${he}/${G}`:`${G}/${he}/${le}`,(pe||ve)&&(Ce+="/"+Math.round(10*pe)/10),ve&&(Ce+=`/${Math.round(ve)}`),this._hashName){const Ie=this._hashName;let Qe=!1;const Je=window.location.hash.slice(1).split("&").map(Ze=>{const rt=Ze.split("=")[0];return rt===Ie?(Qe=!0,`${rt}=${Ce}`):Ze}).filter(Ze=>Ze);return Qe||Je.push(`${Ie}=${Ce}`),`#${Je.join("&")}`}return`#${Ce}`}}const Gn={linearity:.3,easing:D.bezier(0,0,.3,1)},Qa=D.extend({deceleration:2500,maxSpeed:1400},Gn),lo=D.extend({deceleration:20,maxSpeed:1400},Gn),ua=D.extend({deceleration:1e3,maxSpeed:360},Gn),Ao=D.extend({deceleration:1e3,maxSpeed:90},Gn);class fa{constructor(x){this._map=x,this.clear()}clear(){this._inertiaBuffer=[]}record(x){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.browser.now(),settings:x})}_drainInertiaBuffer(){const x=this._inertiaBuffer,Q=D.browser.now();for(;x.length>0&&Q-x[0].time>160;)x.shift()}_onMoveEnd(x){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const Q={zoom:0,bearing:0,pitch:0,pan:new D.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:te}of this._inertiaBuffer)Q.zoom+=te.zoomDelta||0,Q.bearing+=te.bearingDelta||0,Q.pitch+=te.pitchDelta||0,te.panDelta&&Q.pan._add(te.panDelta),te.around&&(Q.around=te.around),te.pinchAround&&(Q.pinchAround=te.pinchAround);const G=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,X={};if(Q.pan.mag()){const te=vs(Q.pan.mag(),G,D.extend({},Qa,x||{}));X.offset=Q.pan.mult(te.amount/Q.pan.mag()),X.center=this._map.transform.center,Fn(X,te)}if(Q.zoom){const te=vs(Q.zoom,G,lo);X.zoom=this._map.transform.zoom+te.amount,Fn(X,te)}if(Q.bearing){const te=vs(Q.bearing,G,ua);X.bearing=this._map.transform.bearing+D.clamp(te.amount,-179,179),Fn(X,te)}if(Q.pitch){const te=vs(Q.pitch,G,Ao);X.pitch=this._map.transform.pitch+te.amount,Fn(X,te)}if(X.zoom||X.bearing){const te=Q.pinchAround===void 0?Q.around:Q.pinchAround;X.around=te?this._map.unproject(te):this._map.getCenter()}return this.clear(),D.extend(X,{noMoveStart:!0})}}function Fn(J,x){(!J.duration||J.duration<x.duration)&&(J.duration=x.duration,J.easing=x.easing)}function vs(J,x,Q){const{maxSpeed:G,linearity:X,deceleration:te}=Q,le=D.clamp(J*X/(x/1e3),-G,G),he=Math.abs(le)/(te*X);return{easing:Q.easing,duration:1e3*he,amount:le*(he/2)}}class qr extends D.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(x,Q,G,X={}){const te=Ae.mousePos(Q.getCanvasContainer(),G),le=Q.unproject(te);super(x,D.extend({point:te,lngLat:le,originalEvent:G},X)),this._defaultPrevented=!1,this.target=Q}}class Oa extends D.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(x,Q,G){const X=x==="touchend"?G.changedTouches:G.touches,te=Ae.touchPos(Q.getCanvasContainer(),X),le=te.map(pe=>Q.unproject(pe)),he=te.reduce((pe,ve,Ce,Ie)=>pe.add(ve.div(Ie.length)),new D.Point(0,0));super(x,{points:te,point:he,lngLats:le,lngLat:Q.unproject(he),originalEvent:G}),this._defaultPrevented=!1}}class Ms extends D.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(x,Q,G){super(x,{originalEvent:G}),this._defaultPrevented=!1}}class Ra{constructor(x,Q){this._map=x,this._clickTolerance=Q.clickTolerance}reset(){delete this._mousedownPos}wheel(x){return this._firePreventable(new Ms(x.type,this._map,x))}mousedown(x,Q){return this._mousedownPos=Q,this._firePreventable(new qr(x.type,this._map,x))}mouseup(x){this._map.fire(new qr(x.type,this._map,x))}click(x,Q){this._mousedownPos&&this._mousedownPos.dist(Q)>=this._clickTolerance||this._map.fire(new qr(x.type,this._map,x))}dblclick(x){return this._firePreventable(new qr(x.type,this._map,x))}mouseover(x){this._map.fire(new qr(x.type,this._map,x))}mouseout(x){this._map.fire(new qr(x.type,this._map,x))}touchstart(x){return this._firePreventable(new Oa(x.type,this._map,x))}touchmove(x){this._map.fire(new Oa(x.type,this._map,x))}touchend(x){this._map.fire(new Oa(x.type,this._map,x))}touchcancel(x){this._map.fire(new Oa(x.type,this._map,x))}_firePreventable(x){if(this._map.fire(x),x.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class co{constructor(x){this._map=x}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(x){this._map.fire(new qr(x.type,this._map,x))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(x){this._delayContextMenu?this._contextMenuEvent=x:this._ignoreContextMenu||this._map.fire(new qr(x.type,this._map,x)),this._map.listens("contextmenu")&&x.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class da{constructor(x){this._map=x}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(x){return this.transform.pointLocation(D.Point.convert(x),this._map.terrain)}}class Zo{constructor(x,Q){this._map=x,this._tr=new da(x),this._el=x.getCanvasContainer(),this._container=x.getContainer(),this._clickTolerance=Q.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(x,Q){this.isEnabled()&&x.shiftKey&&x.button===0&&(Ae.disableDrag(),this._startPos=this._lastPos=Q,this._active=!0)}mousemoveWindow(x,Q){if(!this._active)return;const G=Q;if(this._lastPos.equals(G)||!this._box&&G.dist(this._startPos)<this._clickTolerance)return;const X=this._startPos;this._lastPos=G,this._box||(this._box=Ae.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",x));const te=Math.min(X.x,G.x),le=Math.max(X.x,G.x),he=Math.min(X.y,G.y),pe=Math.max(X.y,G.y);Ae.setTransform(this._box,`translate(${te}px,${he}px)`),this._box.style.width=le-te+"px",this._box.style.height=pe-he+"px"}mouseupWindow(x,Q){if(!this._active||x.button!==0)return;const G=this._startPos,X=Q;if(this.reset(),Ae.suppressClick(),G.x!==X.x||G.y!==X.y)return this._map.fire(new D.Event("boxzoomend",{originalEvent:x})),{cameraAnimation:te=>te.fitScreenCoordinates(G,X,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",x)}keydown(x){this._active&&x.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",x))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Ae.remove(this._box),this._box=null),Ae.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(x,Q){return this._map.fire(new D.Event(x,{originalEvent:Q}))}}function Wn(J,x){if(J.length!==x.length)throw new Error(`The number of touches and points are not equal - touches ${J.length}, points ${x.length}`);const Q={};for(let G=0;G<J.length;G++)Q[J[G].identifier]=x[G];return Q}class qi{constructor(x){this.reset(),this.numTouches=x.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(x,Q,G){(this.centroid||G.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=x.timeStamp),G.length===this.numTouches&&(this.centroid=function(X){const te=new D.Point(0,0);for(const le of X)te._add(le);return te.div(X.length)}(Q),this.touches=Wn(G,Q)))}touchmove(x,Q,G){if(this.aborted||!this.centroid)return;const X=Wn(G,Q);for(const te in this.touches){const le=X[te];(!le||le.dist(this.touches[te])>30)&&(this.aborted=!0)}}touchend(x,Q,G){if((!this.centroid||x.timeStamp-this.startTime>500)&&(this.aborted=!0),G.length===0){const X=!this.aborted&&this.centroid;if(this.reset(),X)return X}}}class tn{constructor(x){this.singleTap=new qi(x),this.numTaps=x.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(x,Q,G){this.singleTap.touchstart(x,Q,G)}touchmove(x,Q,G){this.singleTap.touchmove(x,Q,G)}touchend(x,Q,G){const X=this.singleTap.touchend(x,Q,G);if(X){const te=x.timeStamp-this.lastTime<500,le=!this.lastTap||this.lastTap.dist(X)<30;if(te&&le||this.reset(),this.count++,this.lastTime=x.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}}}class gi{constructor(x){this._tr=new da(x),this._zoomIn=new tn({numTouches:1,numTaps:2}),this._zoomOut=new tn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(x,Q,G){this._zoomIn.touchstart(x,Q,G),this._zoomOut.touchstart(x,Q,G)}touchmove(x,Q,G){this._zoomIn.touchmove(x,Q,G),this._zoomOut.touchmove(x,Q,G)}touchend(x,Q,G){const X=this._zoomIn.touchend(x,Q,G),te=this._zoomOut.touchend(x,Q,G),le=this._tr;return X?(this._active=!0,x.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:he=>he.easeTo({duration:300,zoom:le.zoom+1,around:le.unproject(X)},{originalEvent:x})}):te?(this._active=!0,x.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:he=>he.easeTo({duration:300,zoom:le.zoom-1,around:le.unproject(te)},{originalEvent:x})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kn{constructor(x){this._enabled=!!x.enable,this._moveStateManager=x.moveStateManager,this._clickTolerance=x.clickTolerance||1,this._moveFunction=x.move,this._activateOnStart=!!x.activateOnStart,x.assignEvents(this),this.reset()}reset(x){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(x)}_move(...x){const Q=this._moveFunction(...x);if(Q.bearingDelta||Q.pitchDelta||Q.around||Q.panDelta)return this._active=!0,Q}dragStart(x,Q){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(x)&&(this._moveStateManager.startMove(x),this._lastPoint=Q.length?Q[0]:Q,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(x,Q){if(!this.isEnabled())return;const G=this._lastPoint;if(!G)return;if(x.preventDefault(),!this._moveStateManager.isValidMoveEvent(x))return void this.reset(x);const X=Q.length?Q[0]:Q;return!this._moved&&X.dist(G)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=X,this._move(G,X))}dragEnd(x){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(x)&&(this._moved&&Ae.suppressClick(),this.reset(x))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const be={0:1,2:2};class Oe{constructor(x){this._correctEvent=x.checkCorrectEvent}startMove(x){const Q=Ae.mouseButton(x);this._eventButton=Q}endMove(x){delete this._eventButton}isValidStartEvent(x){return this._correctEvent(x)}isValidMoveEvent(x){return!function(Q,G){const X=be[G];return Q.buttons===void 0||(Q.buttons&X)!==X}(x,this._eventButton)}isValidEndEvent(x){return Ae.mouseButton(x)===this._eventButton}}class Xe{constructor(){this._firstTouch=void 0}_isOneFingerTouch(x){return x.targetTouches.length===1}_isSameTouchEvent(x){return x.targetTouches[0].identifier===this._firstTouch}startMove(x){this._firstTouch=x.targetTouches[0].identifier}endMove(x){delete this._firstTouch}isValidStartEvent(x){return this._isOneFingerTouch(x)}isValidMoveEvent(x){return this._isOneFingerTouch(x)&&this._isSameTouchEvent(x)}isValidEndEvent(x){return this._isOneFingerTouch(x)&&this._isSameTouchEvent(x)}}const je=J=>{J.mousedown=J.dragStart,J.mousemoveWindow=J.dragMove,J.mouseup=J.dragEnd,J.contextmenu=function(x){x.preventDefault()}},yt=({enable:J,clickTolerance:x,bearingDegreesPerPixelMoved:Q=.8})=>{const G=new Oe({checkCorrectEvent:X=>Ae.mouseButton(X)===0&&X.ctrlKey||Ae.mouseButton(X)===2});return new kn({clickTolerance:x,move:(X,te)=>({bearingDelta:(te.x-X.x)*Q}),moveStateManager:G,enable:J,assignEvents:je})},Et=({enable:J,clickTolerance:x,pitchDegreesPerPixelMoved:Q=-.5})=>{const G=new Oe({checkCorrectEvent:X=>Ae.mouseButton(X)===0&&X.ctrlKey||Ae.mouseButton(X)===2});return new kn({clickTolerance:x,move:(X,te)=>({pitchDelta:(te.y-X.y)*Q}),moveStateManager:G,enable:J,assignEvents:je})};class Ht{constructor(x,Q){this._minTouches=x.cooperativeGestures?2:1,this._clickTolerance=x.clickTolerance||1,this._map=Q,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new D.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(x,Q,G){return this._calculateTransform(x,Q,G)}touchmove(x,Q,G){if(this._map._cooperativeGestures&&(this._minTouches===2&&G.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(x,!1,G.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(G.length<this._minTouches))return x.preventDefault(),this._calculateTransform(x,Q,G)}touchend(x,Q,G){this._calculateTransform(x,Q,G),this._active&&G.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(x,Q,G){G.length>0&&(this._active=!0);const X=Wn(G,Q),te=new D.Point(0,0),le=new D.Point(0,0);let he=0;for(const ve in X){const Ce=X[ve],Ie=this._touches[ve];Ie&&(te._add(Ce),le._add(Ce.sub(Ie)),he++,X[ve]=Ce)}if(this._touches=X,he<this._minTouches||!le.mag())return;const pe=le.div(he);return this._sum._add(pe),this._sum.mag()<this._clickTolerance?void 0:{around:te.div(he),panDelta:pe}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(x,Q,G){this._firstTwoTouches||G.length<2||(this._firstTwoTouches=[G[0].identifier,G[1].identifier],this._start([Q[0],Q[1]]))}touchmove(x,Q,G){if(!this._firstTwoTouches)return;x.preventDefault();const[X,te]=this._firstTwoTouches,le=hi(G,Q,X),he=hi(G,Q,te);if(!le||!he)return;const pe=this._aroundCenter?null:le.add(he).div(2);return this._move([le,he],pe,x)}touchend(x,Q,G){if(!this._firstTwoTouches)return;const[X,te]=this._firstTwoTouches,le=hi(G,Q,X),he=hi(G,Q,te);le&&he||(this._active&&Ae.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(x){this._enabled=!0,this._aroundCenter=!!x&&x.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function hi(J,x,Q){for(let G=0;G<J.length;G++)if(J[G].identifier===Q)return x[G]}function Wt(J,x){return Math.log(J/x)/Math.LN2}class Gi extends jt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(x){this._startDistance=this._distance=x[0].dist(x[1])}_move(x,Q){const G=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(Wt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wt(this._distance,G),pinchAround:Q}}}function zi(J,x){return 180*J.angleWith(x)/Math.PI}class Oi extends jt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])}_move(x,Q){const G=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zi(this._vector,G),pinchAround:Q}}_isBelowThreshold(x){this._minDiameter=Math.min(this._minDiameter,x.mag());const Q=25/(Math.PI*this._minDiameter)*360,G=zi(x,this._startVector);return Math.abs(G)<Q}}function mr(J){return Math.abs(J.y)>Math.abs(J.x)}class ur extends jt{constructor(x){super(),this._map=x}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(x,Q,G){super.touchstart(x,Q,G),this._currentTouchCount=G.length}_start(x){this._lastPoints=x,mr(x[0].sub(x[1]))&&(this._valid=!1)}_move(x,Q,G){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const X=x[0].sub(this._lastPoints[0]),te=x[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(X,te,G.timeStamp),this._valid?(this._lastPoints=x,this._active=!0,{pitchDelta:(X.y+te.y)/2*-.5}):void 0}gestureBeginsVertically(x,Q,G){if(this._valid!==void 0)return this._valid;const X=x.mag()>=2,te=Q.mag()>=2;if(!X&&!te)return;if(!X||!te)return this._firstMove===void 0&&(this._firstMove=G),G-this._firstMove<100&&void 0;const le=x.y>0==Q.y>0;return mr(x)&&mr(Q)&&le}}const vr={panStep:100,bearingStep:15,pitchStep:10};class nr{constructor(x){this._tr=new da(x);const Q=vr;this._panStep=Q.panStep,this._bearingStep=Q.bearingStep,this._pitchStep=Q.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(x){if(x.altKey||x.ctrlKey||x.metaKey)return;let Q=0,G=0,X=0,te=0,le=0;switch(x.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:x.shiftKey?G=-1:(x.preventDefault(),te=-1);break;case 39:x.shiftKey?G=1:(x.preventDefault(),te=1);break;case 38:x.shiftKey?X=1:(x.preventDefault(),le=-1);break;case 40:x.shiftKey?X=-1:(x.preventDefault(),le=1);break;default:return}return this._rotationDisabled&&(G=0,X=0),{cameraAnimation:he=>{const pe=this._tr;he.easeTo({duration:300,easeId:"keyboardHandler",easing:Xi,zoom:Q?Math.round(pe.zoom)+Q*(x.shiftKey?2:1):pe.zoom,bearing:pe.bearing+G*this._bearingStep,pitch:pe.pitch+X*this._pitchStep,offset:[-te*this._panStep,-le*this._panStep],center:pe.center},{originalEvent:x})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xi(J){return J*(2-J)}const Or=4.000244140625;class Ir{constructor(x,Q){this._onTimeout=G=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(G)},this._map=x,this._tr=new da(x),this._el=x.getCanvasContainer(),this._triggerRenderFrame=Q,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(x){this._defaultZoomRate=x}setWheelZoomRate(x){this._wheelZoomRate=x}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(x){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!x&&x.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(x){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!x[this._map._metaKey])return;x.preventDefault()}let Q=x.deltaMode===WheelEvent.DOM_DELTA_LINE?40*x.deltaY:x.deltaY;const G=D.browser.now(),X=G-(this._lastWheelEventTime||0);this._lastWheelEventTime=G,Q!==0&&Q%Or==0?this._type="wheel":Q!==0&&Math.abs(Q)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=Q,this._timeout=setTimeout(this._onTimeout,40,x)):this._type||(this._type=Math.abs(X*Q)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Q+=this._lastValue)),x.shiftKey&&Q&&(Q/=4),this._type&&(this._lastWheelEvent=x,this._delta-=Q,this._active||this._start(x)),x.preventDefault()}_start(x){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const Q=Ae.mousePos(this._el,x),G=this._tr;this._around=D.LngLat.convert(this._aroundCenter?G.center:G.unproject(Q)),this._aroundPoint=G.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const x=this._tr.transform;if(this._delta!==0){const he=this._type==="wheel"&&Math.abs(this._delta)>Or?this._wheelZoomRate:this._defaultZoomRate;let pe=2/(1+Math.exp(-Math.abs(this._delta*he)));this._delta<0&&pe!==0&&(pe=1/pe);const ve=typeof this._targetZoom=="number"?x.zoomScale(this._targetZoom):x.scale;this._targetZoom=Math.min(x.maxZoom,Math.max(x.minZoom,x.scaleZoom(ve*pe))),this._type==="wheel"&&(this._startZoom=x.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const Q=typeof this._targetZoom=="number"?this._targetZoom:x.zoom,G=this._startZoom,X=this._easing;let te,le=!1;if(this._type==="wheel"&&G&&X){const he=Math.min((D.browser.now()-this._lastWheelEventTime)/200,1),pe=X(he);te=D.interpolate.number(G,Q,pe),he<1?this._frameId||(this._frameId=!0):le=!0}else te=Q,le=!0;return this._active=!0,le&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!le,zoomDelta:te-x.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(x){let Q=D.defaultEasing;if(this._prevEase){const G=this._prevEase,X=(D.browser.now()-G.start)/G.duration,te=G.easing(X+.01)-G.easing(X),le=.27/Math.sqrt(te*te+1e-4)*.01,he=Math.sqrt(.0729-le*le);Q=D.bezier(le,he,.25,1)}return this._prevEase={start:D.browser.now(),duration:x,easing:Q},Q}reset(){this._active=!1}}class ws{constructor(x,Q){this._clickZoom=x,this._tapZoom=Q}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ha{constructor(x){this._tr=new da(x),this.reset()}reset(){this._active=!1}dblclick(x,Q){return x.preventDefault(),{cameraAnimation:G=>{G.easeTo({duration:300,zoom:this._tr.zoom+(x.shiftKey?-1:1),around:this._tr.unproject(Q)},{originalEvent:x})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pa{constructor(){this._tap=new tn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(x,Q,G){if(!this._swipePoint)if(this._tapTime){const X=Q[0],te=x.timeStamp-this._tapTime<500,le=this._tapPoint.dist(X)<30;te&&le?G.length>0&&(this._swipePoint=X,this._swipeTouch=G[0].identifier):this.reset()}else this._tap.touchstart(x,Q,G)}touchmove(x,Q,G){if(this._tapTime){if(this._swipePoint){if(G[0].identifier!==this._swipeTouch)return;const X=Q[0],te=X.y-this._swipePoint.y;return this._swipePoint=X,x.preventDefault(),this._active=!0,{zoomDelta:te/128}}}else this._tap.touchmove(x,Q,G)}touchend(x,Q,G){if(this._tapTime)this._swipePoint&&G.length===0&&this.reset();else{const X=this._tap.touchend(x,Q,G);X&&(this._tapTime=x.timeStamp,this._tapPoint=X)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ns{constructor(x,Q,G){this._el=x,this._mousePan=Q,this._touchPan=G}enable(x){this._inertiaOptions=x||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Er{constructor(x,Q,G){this._pitchWithRotate=x.pitchWithRotate,this._mouseRotate=Q,this._mousePitch=G}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ga{constructor(x,Q,G,X){this._el=x,this._touchZoom=Q,this._touchRotate=G,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0}enable(x){this._touchZoom.enable(x),this._rotationDisabled||this._touchRotate.enable(x),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const vn=J=>J.zoom||J.drag||J.pitch||J.rotate;class Jo extends D.Event{}function qn(J){return J.panDelta&&J.panDelta.mag()||J.zoomDelta||J.bearingDelta||J.pitchDelta}class ho{constructor(x,Q){this.handleWindowEvent=X=>{this.handleEvent(X,`${X.type}Window`)},this.handleEvent=(X,te)=>{if(X.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const le=X.type==="renderFrame"?void 0:X,he={needsRenderFrame:!1},pe={},ve={},Ce=X.touches,Ie=Ce?this._getMapTouches(Ce):void 0,Qe=Ie?Ae.touchPos(this._el,Ie):Ae.mousePos(this._el,X);for(const{handlerName:rt,handler:Ye,allowed:dt}of this._handlers){if(!Ye.isEnabled())continue;let Bt;this._blockedByActive(ve,dt,rt)?Ye.reset():Ye[te||X.type]&&(Bt=Ye[te||X.type](X,Qe,Ie),this.mergeHandlerResult(he,pe,Bt,rt,le),Bt&&Bt.needsRenderFrame&&this._triggerRenderFrame()),(Bt||Ye.isActive())&&(ve[rt]=Ye)}const Je={};for(const rt in this._previousActiveHandlers)ve[rt]||(Je[rt]=le);this._previousActiveHandlers=ve,(Object.keys(Je).length||qn(he))&&(this._changes.push([he,pe,Je]),this._triggerRenderFrame()),(Object.keys(ve).length||qn(he))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ze}=he;Ze&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ze(this._map))},this._map=x,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new fa(x),this._bearingSnap=Q.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Q);const G=this._el;this._listeners=[[G,"touchstart",{passive:!0}],[G,"touchmove",{passive:!1}],[G,"touchend",void 0],[G,"touchcancel",void 0],[G,"mousedown",void 0],[G,"mousemove",void 0],[G,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[G,"mouseover",void 0],[G,"mouseout",void 0],[G,"dblclick",void 0],[G,"click",void 0],[G,"keydown",{capture:!1}],[G,"keyup",void 0],[G,"wheel",{passive:!1}],[G,"contextmenu",void 0],[window,"blur",void 0]];for(const[X,te,le]of this._listeners)Ae.addEventListener(X,te,X===document?this.handleWindowEvent:this.handleEvent,le)}destroy(){for(const[x,Q,G]of this._listeners)Ae.removeEventListener(x,Q,x===document?this.handleWindowEvent:this.handleEvent,G)}_addDefaultHandlers(x){const Q=this._map,G=Q.getCanvasContainer();this._add("mapEvent",new Ra(Q,x));const X=Q.boxZoom=new Zo(Q,x);this._add("boxZoom",X),x.interactive&&x.boxZoom&&X.enable();const te=new gi(Q),le=new Ha(Q);Q.doubleClickZoom=new ws(le,te),this._add("tapZoom",te),this._add("clickZoom",le),x.interactive&&x.doubleClickZoom&&Q.doubleClickZoom.enable();const he=new pa;this._add("tapDragZoom",he);const pe=Q.touchPitch=new ur(Q);this._add("touchPitch",pe),x.interactive&&x.touchPitch&&Q.touchPitch.enable(x.touchPitch);const ve=yt(x),Ce=Et(x);Q.dragRotate=new Er(x,ve,Ce),this._add("mouseRotate",ve,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate"]),x.interactive&&x.dragRotate&&Q.dragRotate.enable();const Ie=(({enable:dt,clickTolerance:Bt})=>{const ot=new Oe({checkCorrectEvent:gt=>Ae.mouseButton(gt)===0&&!gt.ctrlKey});return new kn({clickTolerance:Bt,move:(gt,It)=>({around:It,panDelta:It.sub(gt)}),activateOnStart:!0,moveStateManager:ot,enable:dt,assignEvents:je})})(x),Qe=new Ht(x,Q);Q.dragPan=new ns(G,Ie,Qe),this._add("mousePan",Ie),this._add("touchPan",Qe,["touchZoom","touchRotate"]),x.interactive&&x.dragPan&&Q.dragPan.enable(x.dragPan);const Je=new Oi,Ze=new Gi;Q.touchZoomRotate=new ga(G,Ze,Je,he),this._add("touchRotate",Je,["touchPan","touchZoom"]),this._add("touchZoom",Ze,["touchPan","touchRotate"]),x.interactive&&x.touchZoomRotate&&Q.touchZoomRotate.enable(x.touchZoomRotate);const rt=Q.scrollZoom=new Ir(Q,()=>this._triggerRenderFrame());this._add("scrollZoom",rt,["mousePan"]),x.interactive&&x.scrollZoom&&Q.scrollZoom.enable(x.scrollZoom);const Ye=Q.keyboard=new nr(Q);this._add("keyboard",Ye),x.interactive&&x.keyboard&&Q.keyboard.enable(),this._add("blockableMapEvent",new co(Q))}_add(x,Q,G){this._handlers.push({handlerName:x,handler:Q,allowed:G}),this._handlersById[x]=Q}stop(x){if(!this._updatingCamera){for(const{handler:Q}of this._handlers)Q.reset();this._inertia.clear(),this._fireEvents({},{},x),this._changes=[]}}isActive(){for(const{handler:x}of this._handlers)if(x.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vn(this._eventsInProgress)||this.isZooming()}_blockedByActive(x,Q,G){for(const X in x)if(X!==G&&(!Q||Q.indexOf(X)<0))return!0;return!1}_getMapTouches(x){const Q=[];for(const G of x)this._el.contains(G.target)&&Q.push(G);return Q}mergeHandlerResult(x,Q,G,X,te){if(!G)return;D.extend(x,G);const le={handlerName:X,originalEvent:G.originalEvent||te};G.zoomDelta!==void 0&&(Q.zoom=le),G.panDelta!==void 0&&(Q.drag=le),G.pitchDelta!==void 0&&(Q.pitch=le),G.bearingDelta!==void 0&&(Q.rotate=le)}_applyChanges(){const x={},Q={},G={};for(const[X,te,le]of this._changes)X.panDelta&&(x.panDelta=(x.panDelta||new D.Point(0,0))._add(X.panDelta)),X.zoomDelta&&(x.zoomDelta=(x.zoomDelta||0)+X.zoomDelta),X.bearingDelta&&(x.bearingDelta=(x.bearingDelta||0)+X.bearingDelta),X.pitchDelta&&(x.pitchDelta=(x.pitchDelta||0)+X.pitchDelta),X.around!==void 0&&(x.around=X.around),X.pinchAround!==void 0&&(x.pinchAround=X.pinchAround),X.noInertia&&(x.noInertia=X.noInertia),D.extend(Q,te),D.extend(G,le);this._updateMapTransform(x,Q,G),this._changes=[]}_updateMapTransform(x,Q,G){const X=this._map,te=X._getTransformForUpdate(),le=X.terrain;if(!(qn(x)||le&&this._terrainMovement))return this._fireEvents(Q,G,!0);let{panDelta:he,zoomDelta:pe,bearingDelta:ve,pitchDelta:Ce,around:Ie,pinchAround:Qe}=x;Qe!==void 0&&(Ie=Qe),X._stop(!0),Ie=Ie||X.transform.centerPoint;const Je=te.pointLocation(he?Ie.sub(he):Ie);ve&&(te.bearing+=ve),Ce&&(te.pitch+=Ce),pe&&(te.zoom+=pe),le?this._terrainMovement||!Q.drag&&!Q.zoom?Q.drag&&this._terrainMovement?te.center=te.pointLocation(te.centerPoint.sub(he)):te.setLocationAtPoint(Je,Ie):(this._terrainMovement=!0,this._map._elevationFreeze=!0,te.setLocationAtPoint(Je,Ie),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,te.recalculateZoom(X.terrain)})):te.setLocationAtPoint(Je,Ie),X._applyUpdatedTransform(te),this._map._update(),x.noInertia||this._inertia.record(x),this._fireEvents(Q,G,!0)}_fireEvents(x,Q,G){const X=vn(this._eventsInProgress),te=vn(x),le={};for(const Ce in x){const{originalEvent:Ie}=x[Ce];this._eventsInProgress[Ce]||(le[`${Ce}start`]=Ie),this._eventsInProgress[Ce]=x[Ce]}!X&&te&&this._fireEvent("movestart",te.originalEvent);for(const Ce in le)this._fireEvent(Ce,le[Ce]);te&&this._fireEvent("move",te.originalEvent);for(const Ce in x){const{originalEvent:Ie}=x[Ce];this._fireEvent(Ce,Ie)}const he={};let pe;for(const Ce in this._eventsInProgress){const{handlerName:Ie,originalEvent:Qe}=this._eventsInProgress[Ce];this._handlersById[Ie].isActive()||(delete this._eventsInProgress[Ce],pe=Q[Ie]||Qe,he[`${Ce}end`]=pe)}for(const Ce in he)this._fireEvent(Ce,he[Ce]);const ve=vn(this._eventsInProgress);if(G&&(X||te)&&!ve){this._updatingCamera=!0;const Ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=Qe=>Qe!==0&&-this._bearingSnap<Qe&&Qe<this._bearingSnap;Ce?(Ie(Ce.bearing||this._map.getBearing())&&(Ce.bearing=0),Ce.freezeElevation=!0,this._map.easeTo(Ce,{originalEvent:pe})):(this._map.fire(new D.Event("moveend",{originalEvent:pe})),Ie(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(x,Q){this._map.fire(new D.Event(x,Q?{originalEvent:Q}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(x=>{delete this._frameId,this.handleEvent(new Jo("renderFrame",{timeStamp:x})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class yl extends D.Evented{constructor(x,Q){super(),this._renderFrameCallback=()=>{const G=Math.min((D.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(G)),G<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=Q.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new D.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(x,Q){return this.jumpTo({center:x},Q)}panBy(x,Q,G){return x=D.Point.convert(x).mult(-1),this.panTo(this.transform.center,D.extend({offset:x},Q),G)}panTo(x,Q,G){return this.easeTo(D.extend({center:x},Q),G)}getZoom(){return this.transform.zoom}setZoom(x,Q){return this.jumpTo({zoom:x},Q),this}zoomTo(x,Q,G){return this.easeTo(D.extend({zoom:x},Q),G)}zoomIn(x,Q){return this.zoomTo(this.getZoom()+1,x,Q),this}zoomOut(x,Q){return this.zoomTo(this.getZoom()-1,x,Q),this}getBearing(){return this.transform.bearing}setBearing(x,Q){return this.jumpTo({bearing:x},Q),this}getPadding(){return this.transform.padding}setPadding(x,Q){return this.jumpTo({padding:x},Q),this}rotateTo(x,Q,G){return this.easeTo(D.extend({bearing:x},Q),G)}resetNorth(x,Q){return this.rotateTo(0,D.extend({duration:1e3},x),Q),this}resetNorthPitch(x,Q){return this.easeTo(D.extend({bearing:0,pitch:0,duration:1e3},x),Q),this}snapToNorth(x,Q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,Q):this}getPitch(){return this.transform.pitch}setPitch(x,Q){return this.jumpTo({pitch:x},Q),this}cameraForBounds(x,Q){x=R.convert(x);const G=Q&&Q.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),G,Q)}_cameraForBoxAndBearing(x,Q,G,X){const te={top:0,bottom:0,right:0,left:0};if(typeof(X=D.extend({padding:te,offset:[0,0],maxZoom:this.transform.maxZoom},X)).padding=="number"){const It=X.padding;X.padding={top:It,bottom:It,right:It,left:It}}X.padding=D.extend(te,X.padding);const le=this.transform,he=le.padding,pe=le.project(D.LngLat.convert(x)),ve=le.project(D.LngLat.convert(Q)),Ce=pe.rotate(-G*Math.PI/180),Ie=ve.rotate(-G*Math.PI/180),Qe=new D.Point(Math.max(Ce.x,Ie.x),Math.max(Ce.y,Ie.y)),Je=new D.Point(Math.min(Ce.x,Ie.x),Math.min(Ce.y,Ie.y)),Ze=Qe.sub(Je),rt=(le.width-(he.left+he.right+X.padding.left+X.padding.right))/Ze.x,Ye=(le.height-(he.top+he.bottom+X.padding.top+X.padding.bottom))/Ze.y;if(Ye<0||rt<0)return void D.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const dt=Math.min(le.scaleZoom(le.scale*Math.min(rt,Ye)),X.maxZoom),Bt=D.Point.convert(X.offset),ot=new D.Point((X.padding.left-X.padding.right)/2,(X.padding.top-X.padding.bottom)/2).rotate(G*Math.PI/180),gt=Bt.add(ot).mult(le.scale/le.zoomScale(dt));return{center:le.unproject(pe.add(ve).div(2).sub(gt)),zoom:dt,bearing:G}}fitBounds(x,Q,G){return this._fitInternal(this.cameraForBounds(x,Q),Q,G)}fitScreenCoordinates(x,Q,G,X,te){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(D.Point.convert(x)),this.transform.pointLocation(D.Point.convert(Q)),G,X),X,te)}_fitInternal(x,Q,G){return x?(delete(Q=D.extend(x,Q)).padding,Q.linear?this.easeTo(Q,G):this.flyTo(Q,G)):this}jumpTo(x,Q){this.stop();const G=this._getTransformForUpdate();let X=!1,te=!1,le=!1;return"zoom"in x&&G.zoom!==+x.zoom&&(X=!0,G.zoom=+x.zoom),x.center!==void 0&&(G.center=D.LngLat.convert(x.center)),"bearing"in x&&G.bearing!==+x.bearing&&(te=!0,G.bearing=+x.bearing),"pitch"in x&&G.pitch!==+x.pitch&&(le=!0,G.pitch=+x.pitch),x.padding==null||G.isPaddingEqual(x.padding)||(G.padding=x.padding),this._applyUpdatedTransform(G),this.fire(new D.Event("movestart",Q)).fire(new D.Event("move",Q)),X&&this.fire(new D.Event("zoomstart",Q)).fire(new D.Event("zoom",Q)).fire(new D.Event("zoomend",Q)),te&&this.fire(new D.Event("rotatestart",Q)).fire(new D.Event("rotate",Q)).fire(new D.Event("rotateend",Q)),le&&this.fire(new D.Event("pitchstart",Q)).fire(new D.Event("pitch",Q)).fire(new D.Event("pitchend",Q)),this.fire(new D.Event("moveend",Q))}calculateCameraOptionsFromTo(x,Q,G,X=0){const te=D.MercatorCoordinate.fromLngLat(x,Q),le=D.MercatorCoordinate.fromLngLat(G,X),he=le.x-te.x,pe=le.y-te.y,ve=le.z-te.z,Ce=Math.hypot(he,pe,ve);if(Ce===0)throw new Error("Can't calculate camera options with same From and To");const Ie=Math.hypot(he,pe),Qe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ce/this.transform.tileSize),Je=180*Math.atan2(he,-pe)/Math.PI;let Ze=180*Math.acos(Ie/Ce)/Math.PI;return Ze=ve<0?90-Ze:90+Ze,{center:le.toLngLat(),zoom:Qe,pitch:Ze,bearing:Je}}easeTo(x,Q){this._stop(!1,x.easeId),((x=D.extend({offset:[0,0],duration:500,easing:D.defaultEasing},x)).animate===!1||!x.essential&&D.browser.prefersReducedMotion)&&(x.duration=0);const G=this._getTransformForUpdate(),X=this.getZoom(),te=this.getBearing(),le=this.getPitch(),he=this.getPadding(),pe="zoom"in x?+x.zoom:X,ve="bearing"in x?this._normalizeBearing(x.bearing,te):te,Ce="pitch"in x?+x.pitch:le,Ie="padding"in x?x.padding:G.padding,Qe=D.Point.convert(x.offset);let Je=G.centerPoint.add(Qe);const Ze=G.pointLocation(Je),rt=D.LngLat.convert(x.center||Ze);this._normalizeCenter(rt);const Ye=G.project(Ze),dt=G.project(rt).sub(Ye),Bt=G.zoomScale(pe-X);let ot,gt;x.around&&(ot=D.LngLat.convert(x.around),gt=G.locationPoint(ot));const It={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pe!==X,this._rotating=this._rotating||te!==ve,this._pitching=this._pitching||Ce!==le,this._padding=!G.isPaddingEqual(Ie),this._easeId=x.easeId,this._prepareEase(Q,x.noMoveStart,It),this.terrain&&this._prepareElevation(rt),this._ease(St=>{if(this._zooming&&(G.zoom=D.interpolate.number(X,pe,St)),this._rotating&&(G.bearing=D.interpolate.number(te,ve,St)),this._pitching&&(G.pitch=D.interpolate.number(le,Ce,St)),this._padding&&(G.interpolatePadding(he,Ie,St),Je=G.centerPoint.add(Qe)),this.terrain&&!x.freezeElevation&&this._updateElevation(St),ot)G.setLocationAtPoint(ot,gt);else{const Lt=G.zoomScale(G.zoom-X),Kt=pe>X?Math.min(2,Bt):Math.max(.5,Bt),Rt=Math.pow(Kt,1-St),Jt=G.unproject(Ye.add(dt.mult(St*Rt)).mult(Lt));G.setLocationAtPoint(G.renderWorldCopies?Jt.wrap():Jt,Je)}this._applyUpdatedTransform(G),this._fireMoveEvents(Q)},St=>{this.terrain&&this._finalizeElevation(),this._afterEase(Q,St)},x),this}_prepareEase(x,Q,G={}){this._moving=!0,Q||G.moving||this.fire(new D.Event("movestart",x)),this._zooming&&!G.zooming&&this.fire(new D.Event("zoomstart",x)),this._rotating&&!G.rotating&&this.fire(new D.Event("rotatestart",x)),this._pitching&&!G.pitching&&this.fire(new D.Event("pitchstart",x))}_prepareElevation(x){this._elevationCenter=x,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(x,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(x){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const Q=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(x<1&&Q!==this._elevationTarget){const G=this._elevationTarget-this._elevationStart;this._elevationStart+=x*(G-(Q-(G*x+this._elevationStart))/(1-x)),this._elevationTarget=Q}this.transform.elevation=D.interpolate.number(this._elevationStart,this._elevationTarget,x)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(x){if(!this.transformCameraUpdate)return;const Q=x.clone(),{center:G,zoom:X,pitch:te,bearing:le,elevation:he}=this.transformCameraUpdate(Q);G&&(Q.center=G),X!==void 0&&(Q.zoom=X),te!==void 0&&(Q.pitch=te),le!==void 0&&(Q.bearing=le),he!==void 0&&(Q.elevation=he),this.transform.apply(Q)}_fireMoveEvents(x){this.fire(new D.Event("move",x)),this._zooming&&this.fire(new D.Event("zoom",x)),this._rotating&&this.fire(new D.Event("rotate",x)),this._pitching&&this.fire(new D.Event("pitch",x))}_afterEase(x,Q){if(this._easeId&&Q&&this._easeId===Q)return;delete this._easeId;const G=this._zooming,X=this._rotating,te=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,G&&this.fire(new D.Event("zoomend",x)),X&&this.fire(new D.Event("rotateend",x)),te&&this.fire(new D.Event("pitchend",x)),this.fire(new D.Event("moveend",x))}flyTo(x,Q){if(!x.essential&&D.browser.prefersReducedMotion){const xi=D.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xi,Q)}this.stop(),x=D.extend({offset:[0,0],speed:1.2,curve:1.42,easing:D.defaultEasing},x);const G=this._getTransformForUpdate(),X=this.getZoom(),te=this.getBearing(),le=this.getPitch(),he=this.getPadding(),pe="zoom"in x?D.clamp(+x.zoom,G.minZoom,G.maxZoom):X,ve="bearing"in x?this._normalizeBearing(x.bearing,te):te,Ce="pitch"in x?+x.pitch:le,Ie="padding"in x?x.padding:G.padding,Qe=G.zoomScale(pe-X),Je=D.Point.convert(x.offset);let Ze=G.centerPoint.add(Je);const rt=G.pointLocation(Ze),Ye=D.LngLat.convert(x.center||rt);this._normalizeCenter(Ye);const dt=G.project(rt),Bt=G.project(Ye).sub(dt);let ot=x.curve;const gt=Math.max(G.width,G.height),It=gt/Qe,St=Bt.mag();if("minZoom"in x){const xi=D.clamp(Math.min(x.minZoom,X,pe),G.minZoom,G.maxZoom),Hr=gt/G.zoomScale(xi-X);ot=Math.sqrt(Hr/St*2)}const Lt=ot*ot;function Kt(xi){const Hr=(It*It-gt*gt+(xi?-1:1)*Lt*Lt*St*St)/(2*(xi?It:gt)*Lt*St);return Math.log(Math.sqrt(Hr*Hr+1)-Hr)}function Rt(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function Jt(xi){return(Math.exp(xi)+Math.exp(-xi))/2}const Bi=Kt(!1);let ar=function(xi){return Jt(Bi)/Jt(Bi+ot*xi)},oi=function(xi){return gt*((Jt(Bi)*(Rt(Hr=Bi+ot*xi)/Jt(Hr))-Rt(Bi))/Lt)/St;var Hr},ki=(Kt(!0)-Bi)/ot;if(Math.abs(St)<1e-6||!isFinite(ki)){if(Math.abs(gt-It)<1e-6)return this.easeTo(x,Q);const xi=It<gt?-1:1;ki=Math.abs(Math.log(It/gt))/ot,oi=function(){return 0},ar=function(Hr){return Math.exp(xi*ot*Hr)}}return x.duration="duration"in x?+x.duration:1e3*ki/("screenSpeed"in x?+x.screenSpeed/ot:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=te!==ve,this._pitching=Ce!==le,this._padding=!G.isPaddingEqual(Ie),this._prepareEase(Q,!1),this.terrain&&this._prepareElevation(Ye),this._ease(xi=>{const Hr=xi*ki,or=1/ar(Hr);G.zoom=xi===1?pe:X+G.scaleZoom(or),this._rotating&&(G.bearing=D.interpolate.number(te,ve,xi)),this._pitching&&(G.pitch=D.interpolate.number(le,Ce,xi)),this._padding&&(G.interpolatePadding(he,Ie,xi),Ze=G.centerPoint.add(Je)),this.terrain&&!x.freezeElevation&&this._updateElevation(xi);const Mi=xi===1?Ye:G.unproject(dt.add(Bt.mult(oi(Hr))).mult(or));G.setLocationAtPoint(G.renderWorldCopies?Mi.wrap():Mi,Ze),this._applyUpdatedTransform(G),this._fireMoveEvents(Q)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(Q)},x),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(x,Q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const G=this._onEaseEnd;delete this._onEaseEnd,G.call(this,Q)}if(!x){const G=this.handlers;G&&G.stop(!1)}return this}_ease(x,Q,G){G.animate===!1||G.duration===0?(x(1),Q()):(this._easeStart=D.browser.now(),this._easeOptions=G,this._onEaseFrame=x,this._onEaseEnd=Q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(x,Q){x=D.wrap(x,-180,180);const G=Math.abs(x-Q);return Math.abs(x-360-Q)<G&&(x-=360),Math.abs(x+360-Q)<G&&(x+=360),x}_normalizeCenter(x){const Q=this.transform;if(!Q.renderWorldCopies||Q.lngRange)return;const G=x.lng-Q.center.lng;x.lng+=G>180?-360:G<-180?360:0}queryTerrainElevation(x){return this.terrain?this.terrain.getElevationForLngLatZoom(D.LngLat.convert(x),this.transform.tileZoom)-this.transform.elevation:null}}class zs{constructor(x={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=Q=>{!Q||Q.sourceDataType!=="metadata"&&Q.sourceDataType!=="visibility"&&Q.dataType!=="style"&&Q.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=x}getDefaultPosition(){return"bottom-right"}onAdd(x){return this._map=x,this._compact=this.options&&this.options.compact,this._container=Ae.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Ae.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ae.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Ae.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(x,Q){const G=this._map._getUIString(`AttributionControl.${Q}`);x.title=G,x.setAttribute("aria-label",G)}_updateAttributions(){if(!this._map.style)return;let x=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?x=x.concat(this.options.customAttribution.map(X=>typeof X!="string"?"":X)):typeof this.options.customAttribution=="string"&&x.push(this.options.customAttribution)),this._map.style.stylesheet){const X=this._map.style.stylesheet;this.styleOwner=X.owner,this.styleId=X.id}const Q=this._map.style.sourceCaches;for(const X in Q){const te=Q[X];if(te.used||te.usedForTerrain){const le=te.getSource();le.attribution&&x.indexOf(le.attribution)<0&&x.push(le.attribution)}}x=x.filter(X=>String(X).trim()),x.sort((X,te)=>X.length-te.length),x=x.filter((X,te)=>{for(let le=te+1;le<x.length;le++)if(x[le].indexOf(X)>=0)return!1;return!0});const G=x.join(" | ");G!==this._attribHTML&&(this._attribHTML=G,x.length?(this._innerContainer.innerHTML=G,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mo{constructor(x={}){this._updateCompact=()=>{const Q=this._container.children;if(Q.length){const G=Q[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&G.classList.add("maplibregl-compact"):G.classList.remove("maplibregl-compact")}},this.options=x}getDefaultPosition(){return"bottom-left"}onAdd(x){this._map=x,this._compact=this.options&&this.options.compact,this._container=Ae.create("div","maplibregl-ctrl");const Q=Ae.create("a","maplibregl-ctrl-logo");return Q.target="_blank",Q.rel="noopener nofollow",Q.href="https://maplibre.org/",Q.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Q.setAttribute("rel","noopener nofollow"),this._container.appendChild(Q),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Ae.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(x){const Q=++this._id;return this._queue.push({callback:x,id:Q,cancelled:!1}),Q}remove(x){const Q=this._currentlyRunning,G=Q?this._queue.concat(Q):this._queue;for(const X of G)if(X.id===x)return void(X.cancelled=!0)}run(x=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const Q=this._currentlyRunning=this._queue;this._queue=[];for(const G of Q)if(!G.cancelled&&(G.callback(x),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ni={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var $o=D.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class vl extends D.Evented{constructor(x){super(),this.sourceCache=x,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,x.usedForTerrain=!0,x.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(x,Q){this.sourceCache.update(x,Q),this._renderableTilesKeys=[];const G={};for(const X of x.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:Q}))G[X.key]=!0,this._renderableTilesKeys.push(X.key),this._tiles[X.key]||(X.posMatrix=new Float64Array(16),D.ortho(X.posMatrix,0,D.EXTENT,0,D.EXTENT,0,1),this._tiles[X.key]=new zt(X,this.tileSize));for(const X in this._tiles)G[X]||delete this._tiles[X]}freeRtt(x){for(const Q in this._tiles){const G=this._tiles[Q];(!x||G.tileID.equals(x)||G.tileID.isChildOf(x)||x.isChildOf(G.tileID))&&(G.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(x=>this.getTileByID(x))}getTileByID(x){return this._tiles[x]}getTerrainCoords(x){const Q={};for(const G of this._renderableTilesKeys){const X=this._tiles[G].tileID;if(X.canonical.equals(x.canonical)){const te=x.clone();te.posMatrix=new Float64Array(16),D.ortho(te.posMatrix,0,D.EXTENT,0,D.EXTENT,0,1),Q[G]=te}else if(X.canonical.isChildOf(x.canonical)){const te=x.clone();te.posMatrix=new Float64Array(16);const le=X.canonical.z-x.canonical.z,he=X.canonical.x-(X.canonical.x>>le<<le),pe=X.canonical.y-(X.canonical.y>>le<<le),ve=D.EXTENT>>le;D.ortho(te.posMatrix,0,ve,0,ve,0,1),D.translate(te.posMatrix,te.posMatrix,[-he*ve,-pe*ve,0]),Q[G]=te}else if(x.canonical.isChildOf(X.canonical)){const te=x.clone();te.posMatrix=new Float64Array(16);const le=x.canonical.z-X.canonical.z,he=x.canonical.x-(x.canonical.x>>le<<le),pe=x.canonical.y-(x.canonical.y>>le<<le),ve=D.EXTENT>>le;D.ortho(te.posMatrix,0,D.EXTENT,0,D.EXTENT,0,1),D.translate(te.posMatrix,te.posMatrix,[he*ve,pe*ve,0]),D.scale(te.posMatrix,te.posMatrix,[1/2**le,1/2**le,0]),Q[G]=te}}return Q}getSourceTile(x,Q){const G=this.sourceCache._source;let X=x.overscaledZ-this.deltaZoom;if(X>G.maxzoom&&(X=G.maxzoom),X<G.minzoom)return null;this._sourceTileCache[x.key]||(this._sourceTileCache[x.key]=x.scaledTo(X).key);let te=this.sourceCache.getTileByID(this._sourceTileCache[x.key]);if((!te||!te.dem)&&Q)for(;X>=G.minzoom&&(!te||!te.dem);)te=this.sourceCache.getTileByID(x.scaledTo(X--).key);return te}tilesAfterTime(x=Date.now()){return Object.values(this._tiles).filter(Q=>Q.timeAdded>=x)}}class wl{constructor(x,Q,G){this.painter=x,this.sourceCache=new vl(Q),this.options=G,this.exaggeration=typeof G.exaggeration=="number"?G.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(x,Q,G,X=D.EXTENT){var te;if(!(Q>=0&&Q<X&&G>=0&&G<X))return 0;const le=this.getTerrainData(x),he=(te=le.tile)===null||te===void 0?void 0:te.dem;if(!he)return 0;const pe=function(Ze,rt,Ye){var dt=rt[0],Bt=rt[1];return Ze[0]=Ye[0]*dt+Ye[4]*Bt+Ye[12],Ze[1]=Ye[1]*dt+Ye[5]*Bt+Ye[13],Ze}([],[Q/X*D.EXTENT,G/X*D.EXTENT],le.u_terrain_matrix),ve=[pe[0]*he.dim,pe[1]*he.dim],Ce=Math.floor(ve[0]),Ie=Math.floor(ve[1]),Qe=ve[0]-Ce,Je=ve[1]-Ie;return he.get(Ce,Ie)*(1-Qe)*(1-Je)+he.get(Ce+1,Ie)*Qe*(1-Je)+he.get(Ce,Ie+1)*(1-Qe)*Je+he.get(Ce+1,Ie+1)*Qe*Je}getElevationForLngLatZoom(x,Q){const{tileID:G,mercatorX:X,mercatorY:te}=this._getOverscaledTileIDFromLngLatZoom(x,Q);return this.getElevation(G,X%D.EXTENT,te%D.EXTENT,D.EXTENT)}getElevation(x,Q,G,X=D.EXTENT){return this.getDEMElevation(x,Q,G,X)*this.exaggeration}getTerrainData(x){if(!this._emptyDemTexture){const X=this.painter.context,te=new D.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new vt(X,te,X.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new vt(X,new D.RGBAImage({width:1,height:1}),X.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(X.gl.NEAREST,X.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=D.identity([])}const Q=this.sourceCache.getSourceTile(x,!0);if(Q&&Q.dem&&(!Q.demTexture||Q.needsTerrainPrepare)){const X=this.painter.context;Q.demTexture=this.painter.getTileTexture(Q.dem.stride),Q.demTexture?Q.demTexture.update(Q.dem.getPixels(),{premultiply:!1}):Q.demTexture=new vt(X,Q.dem.getPixels(),X.gl.RGBA,{premultiply:!1}),Q.demTexture.bind(X.gl.NEAREST,X.gl.CLAMP_TO_EDGE),Q.needsTerrainPrepare=!1}const G=Q&&Q+Q.tileID.key+x.key;if(G&&!this._demMatrixCache[G]){const X=this.sourceCache.sourceCache._source.maxzoom;let te=x.canonical.z-Q.tileID.canonical.z;x.overscaledZ>x.canonical.z&&(x.canonical.z>=X?te=x.canonical.z-X:D.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const le=x.canonical.x-(x.canonical.x>>te<<te),he=x.canonical.y-(x.canonical.y>>te<<te),pe=D.fromScaling(new Float64Array(16),[1/(D.EXTENT<<te),1/(D.EXTENT<<te),0]);D.translate(pe,pe,[le*D.EXTENT,he*D.EXTENT,0]),this._demMatrixCache[x.key]={matrix:pe,coord:x}}return{u_depth:2,u_terrain:3,u_terrain_dim:Q&&Q.dem&&Q.dem.dim||1,u_terrain_matrix:G?this._demMatrixCache[x.key].matrix:this._emptyDemMatrix,u_terrain_unpack:Q&&Q.dem&&Q.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(Q&&Q.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:Q}}getFramebuffer(x){const Q=this.painter,G=Q.width/devicePixelRatio,X=Q.height/devicePixelRatio;return!this._fbo||this._fbo.width===G&&this._fbo.height===X||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new vt(Q.context,{width:G,height:X,data:null},Q.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(Q.context.gl.NEAREST,Q.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new vt(Q.context,{width:G,height:X,data:null},Q.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(Q.context.gl.NEAREST,Q.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=Q.context.createFramebuffer(G,X,!0,!1),this._fbo.depthAttachment.set(Q.context.createRenderbuffer(Q.context.gl.DEPTH_COMPONENT16,G,X))),this._fbo.colorAttachment.set(x==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const x=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const Q=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let te=0,le=0;te<this._coordsTextureSize;te++)for(let he=0;he<this._coordsTextureSize;he++,le+=4)Q[le+0]=255&he,Q[le+1]=255&te,Q[le+2]=he>>8<<4|te>>8,Q[le+3]=0;const G=new D.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(Q.buffer)),X=new vt(x,G,x.gl.RGBA,{premultiply:!1});return X.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._coordsTexture=X,X}pointCoordinate(x){const Q=new Uint8Array(4),G=this.painter.context,X=G.gl;G.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),X.readPixels(x.x,this.painter.height/devicePixelRatio-x.y-1,1,1,X.RGBA,X.UNSIGNED_BYTE,Q),G.bindFramebuffer.set(null);const te=Q[0]+(Q[2]>>4<<8),le=Q[1]+((15&Q[2])<<8),he=this.coordsIndex[255-Q[3]],pe=he&&this.sourceCache.getTileByID(he);if(!pe)return null;const ve=this._coordsTextureSize,Ce=(1<<pe.tileID.canonical.z)*ve;return new D.MercatorCoordinate((pe.tileID.canonical.x*ve+te)/Ce,(pe.tileID.canonical.y*ve+le)/Ce,this.getElevation(pe.tileID,te,le,ve))}getTerrainMesh(){if(this._mesh)return this._mesh;const x=this.painter.context,Q=new D.Pos3dArray,G=new D.TriangleIndexArray,X=this.meshSize,te=D.EXTENT/X,le=X*X;for(let Ie=0;Ie<=X;Ie++)for(let Qe=0;Qe<=X;Qe++)Q.emplaceBack(Qe*te,Ie*te,0);for(let Ie=0;Ie<le;Ie+=X+1)for(let Qe=0;Qe<X;Qe++)G.emplaceBack(Qe+Ie,X+Qe+Ie+1,X+Qe+Ie+2),G.emplaceBack(Qe+Ie,X+Qe+Ie+2,Qe+Ie+1);const he=Q.length,pe=he+2*(X+1);for(const Ie of[0,1])for(let Qe=0;Qe<=X;Qe++)for(const Je of[0,1])Q.emplaceBack(Qe*te,Ie*D.EXTENT,Je);for(let Ie=0;Ie<2*X;Ie+=2)G.emplaceBack(pe+Ie,pe+Ie+1,pe+Ie+3),G.emplaceBack(pe+Ie,pe+Ie+3,pe+Ie+2),G.emplaceBack(he+Ie,he+Ie+3,he+Ie+1),G.emplaceBack(he+Ie,he+Ie+2,he+Ie+3);const ve=Q.length,Ce=ve+2*(X+1);for(const Ie of[0,1])for(let Qe=0;Qe<=X;Qe++)for(const Je of[0,1])Q.emplaceBack(Ie*D.EXTENT,Qe*te,Je);for(let Ie=0;Ie<2*X;Ie+=2)G.emplaceBack(ve+Ie,ve+Ie+1,ve+Ie+3),G.emplaceBack(ve+Ie,ve+Ie+3,ve+Ie+2),G.emplaceBack(Ce+Ie,Ce+Ie+3,Ce+Ie+1),G.emplaceBack(Ce+Ie,Ce+Ie+2,Ce+Ie+3);return this._mesh={indexBuffer:x.createIndexBuffer(G),vertexBuffer:x.createVertexBuffer(Q,$o.members),segments:D.SegmentVector.simpleSegment(0,0,Q.length,G.length)},this._mesh}getMeshFrameDelta(x){return 2*Math.PI*D.earthRadius/Math.pow(2,x)/5}getMinTileElevationForLngLatZoom(x,Q){var G;const{tileID:X}=this._getOverscaledTileIDFromLngLatZoom(x,Q);return(G=this.getMinMaxElevation(X).minElevation)!==null&&G!==void 0?G:0}getMinMaxElevation(x){const Q=this.getTerrainData(x).tile,G={minElevation:null,maxElevation:null};return Q&&Q.dem&&(G.minElevation=Q.dem.min*this.exaggeration,G.maxElevation=Q.dem.max*this.exaggeration),G}_getOverscaledTileIDFromLngLatZoom(x,Q){const G=D.MercatorCoordinate.fromLngLat(x.wrap()),X=(1<<Q)*D.EXTENT,te=G.x*X,le=G.y*X,he=Math.floor(te/D.EXTENT),pe=Math.floor(le/D.EXTENT);return{tileID:new D.OverscaledTileID(Q,0,Q,he,pe),mercatorX:te,mercatorY:le}}}class Ns{constructor(x,Q,G){this._context=x,this._size=Q,this._tileSize=G,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const x of this._objects)x.texture.destroy(),x.fbo.destroy()}_createObject(x){const Q=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),G=new vt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return G.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),Q.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),Q.colorAttachment.set(G.texture),{id:x,fbo:Q,texture:G,stamp:-1,inUse:!1}}getObjectForId(x){return this._objects[x]}useObject(x){x.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(Q=>x.id!==Q),this._recentlyUsed.push(x.id)}stampObject(x){x.stamp=++this._stamp}getOrCreateFreeObject(){for(const Q of this._recentlyUsed)if(!this._objects[Q].inUse)return this._objects[Q];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const x=this._createObject(this._objects.length);return this._objects.push(x),x}freeObject(x){x.inUse=!1}freeAllObjects(){for(const x of this._objects)this.freeObject(x)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(x=>!x.inUse)===!1}}const za={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Dn{constructor(x,Q){this.painter=x,this.terrain=Q,this.pool=new Ns(x.context,30,Q.sourceCache.tileSize*Q.qualityFactor)}destruct(){this.pool.destruct()}getTexture(x){return this.pool.getObjectForId(x.rtt[this._stacks.length-1].id).texture}prepareForRender(x,Q){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=x._order.filter(G=>!x._layers[G].isHidden(Q)),this._coordsDescendingInv={};for(const G in x.sourceCaches){this._coordsDescendingInv[G]={};const X=x.sourceCaches[G].getVisibleCoordinates();for(const te of X){const le=this.terrain.sourceCache.getTerrainCoords(te);for(const he in le)this._coordsDescendingInv[G][he]||(this._coordsDescendingInv[G][he]=[]),this._coordsDescendingInv[G][he].push(le[he])}}this._coordsDescendingInvStr={};for(const G of x._order){const X=x._layers[G],te=X.source;if(za[X.type]&&!this._coordsDescendingInvStr[te]){this._coordsDescendingInvStr[te]={};for(const le in this._coordsDescendingInv[te])this._coordsDescendingInvStr[te][le]=this._coordsDescendingInv[te][le].map(he=>he.key).sort().join()}}for(const G of this._renderableTiles)for(const X in this._coordsDescendingInvStr){const te=this._coordsDescendingInvStr[X][G.tileID.key];te&&te!==G.rttCoords[X]&&(G.rtt=[])}}renderLayer(x){if(x.isHidden(this.painter.transform.zoom))return!1;const Q=x.type,G=this.painter,X=this._renderableLayerIds[this._renderableLayerIds.length-1]===x.id;if(za[Q]&&(this._prevType&&za[this._prevType]||this._stacks.push([]),this._prevType=Q,this._stacks[this._stacks.length-1].push(x.id),!X))return!0;if(za[this._prevType]||za[Q]&&X){this._prevType=Q;const te=this._stacks.length-1,le=this._stacks[te]||[];for(const he of this._renderableTiles){if(this.pool.isFull()&&(Kn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(he),he.rtt[te]){const ve=this.pool.getObjectForId(he.rtt[te].id);if(ve.stamp===he.rtt[te].stamp){this.pool.useObject(ve);continue}}const pe=this.pool.getOrCreateFreeObject();this.pool.useObject(pe),this.pool.stampObject(pe),he.rtt[te]={id:pe.id,stamp:pe.stamp},G.context.bindFramebuffer.set(pe.fbo.framebuffer),G.context.clear({color:D.Color.transparent,stencil:0}),G.currentStencilSource=void 0;for(let ve=0;ve<le.length;ve++){const Ce=G.style._layers[le[ve]],Ie=Ce.source?this._coordsDescendingInv[Ce.source][he.tileID.key]:[he.tileID];G.context.viewport.set([0,0,pe.fbo.width,pe.fbo.height]),G._renderTileClippingMasks(Ce,Ie),G.renderLayer(G,G.style.sourceCaches[Ce.source],Ce,Ie),Ce.source&&(he.rttCoords[Ce.source]=this._coordsDescendingInvStr[Ce.source][he.tileID.key])}}return Kn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),za[Q]}return!1}}const uA=ne,Po={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:D.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Vr=J=>{J.touchstart=J.dragStart,J.touchmoveWindow=J.dragMove,J.touchend=J.dragEnd},ts={showCompass:!0,showZoom:!0,visualizePitch:!1};class Kl{constructor(x,Q,G=!1){this.mousedown=le=>{this.startMouse(D.extend({},le,{ctrlKey:!0,preventDefault:()=>le.preventDefault()}),Ae.mousePos(this.element,le)),Ae.addEventListener(window,"mousemove",this.mousemove),Ae.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=le=>{this.moveMouse(le,Ae.mousePos(this.element,le))},this.mouseup=le=>{this.mouseRotate.dragEnd(le),this.mousePitch&&this.mousePitch.dragEnd(le),this.offTemp()},this.touchstart=le=>{le.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ae.touchPos(this.element,le.targetTouches)[0],this.startTouch(le,this._startPos),Ae.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ae.addEventListener(window,"touchend",this.touchend))},this.touchmove=le=>{le.targetTouches.length!==1?this.reset():(this._lastPos=Ae.touchPos(this.element,le.targetTouches)[0],this.moveTouch(le,this._lastPos))},this.touchend=le=>{le.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const X=x.dragRotate._mouseRotate.getClickTolerance(),te=x.dragRotate._mousePitch.getClickTolerance();this.element=Q,this.mouseRotate=yt({clickTolerance:X,enable:!0}),this.touchRotate=(({enable:le,clickTolerance:he,bearingDegreesPerPixelMoved:pe=.8})=>{const ve=new Xe;return new kn({clickTolerance:he,move:(Ce,Ie)=>({bearingDelta:(Ie.x-Ce.x)*pe}),moveStateManager:ve,enable:le,assignEvents:Vr})})({clickTolerance:X,enable:!0}),this.map=x,G&&(this.mousePitch=Et({clickTolerance:te,enable:!0}),this.touchPitch=(({enable:le,clickTolerance:he,pitchDegreesPerPixelMoved:pe=-.5})=>{const ve=new Xe;return new kn({clickTolerance:he,move:(Ce,Ie)=>({pitchDelta:(Ie.y-Ce.y)*pe}),moveStateManager:ve,enable:le,assignEvents:Vr})})({clickTolerance:te,enable:!0})),Ae.addEventListener(Q,"mousedown",this.mousedown),Ae.addEventListener(Q,"touchstart",this.touchstart,{passive:!1}),Ae.addEventListener(Q,"touchcancel",this.reset)}startMouse(x,Q){this.mouseRotate.dragStart(x,Q),this.mousePitch&&this.mousePitch.dragStart(x,Q),Ae.disableDrag()}startTouch(x,Q){this.touchRotate.dragStart(x,Q),this.touchPitch&&this.touchPitch.dragStart(x,Q),Ae.disableDrag()}moveMouse(x,Q){const G=this.map,{bearingDelta:X}=this.mouseRotate.dragMove(x,Q)||{};if(X&&G.setBearing(G.getBearing()+X),this.mousePitch){const{pitchDelta:te}=this.mousePitch.dragMove(x,Q)||{};te&&G.setPitch(G.getPitch()+te)}}moveTouch(x,Q){const G=this.map,{bearingDelta:X}=this.touchRotate.dragMove(x,Q)||{};if(X&&G.setBearing(G.getBearing()+X),this.touchPitch){const{pitchDelta:te}=this.touchPitch.dragMove(x,Q)||{};te&&G.setPitch(G.getPitch()+te)}}off(){const x=this.element;Ae.removeEventListener(x,"mousedown",this.mousedown),Ae.removeEventListener(x,"touchstart",this.touchstart,{passive:!1}),Ae.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ae.removeEventListener(window,"touchend",this.touchend),Ae.removeEventListener(x,"touchcancel",this.reset),this.offTemp()}offTemp(){Ae.enableDrag(),Ae.removeEventListener(window,"mousemove",this.mousemove),Ae.removeEventListener(window,"mouseup",this.mouseup),Ae.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ae.removeEventListener(window,"touchend",this.touchend)}}let un;function Lo(J,x,Q){if(J=new D.LngLat(J.lng,J.lat),x){const G=new D.LngLat(J.lng-360,J.lat),X=new D.LngLat(J.lng+360,J.lat),te=Q.locationPoint(J).distSqr(x);Q.locationPoint(G).distSqr(x)<te?J=G:Q.locationPoint(X).distSqr(x)<te&&(J=X)}for(;Math.abs(J.lng-Q.center.lng)>180;){const G=Q.locationPoint(J);if(G.x>=0&&G.y>=0&&G.x<=Q.width&&G.y<=Q.height)break;J.lng>Q.center.lng?J.lng-=360:J.lng+=360}return J}const Qo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function el(J,x,Q){const G=J.classList;for(const X in Qo)G.remove(`maplibregl-${Q}-anchor-${X}`);G.add(`maplibregl-${Q}-anchor-${x}`)}class Oo extends D.Evented{constructor(x){if(super(),this._onKeyPress=Q=>{const G=Q.code,X=Q.charCode||Q.keyCode;G!=="Space"&&G!=="Enter"&&X!==32&&X!==13||this.togglePopup()},this._onMapClick=Q=>{const G=Q.originalEvent.target,X=this._element;this._popup&&(G===X||X.contains(G))&&this.togglePopup()},this._update=Q=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Lo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let G="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?G=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(G=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let X="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?X="rotateX(0deg)":this._pitchAlignment==="map"&&(X=`rotateX(${this._map.getPitch()}deg)`),Q&&Q.type!=="moveend"||(this._pos=this._pos.round()),Ae.setTransform(this._element,`${Qo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${X} ${G}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const te=this._map.unproject(this._pos),le=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=te.distanceTo(this._lngLat)>20*le?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=Q=>{if(!this._isDragging){const G=this._clickTolerance||this._map._clickTolerance;this._isDragging=Q.point.dist(this._pointerdownPos)>=G}this._isDragging&&(this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new D.Event("dragstart"))),this.fire(new D.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new D.Event("dragend")),this._state="inactive"},this._addDragHandler=Q=>{this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._pointerdownPos=Q.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=D.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ae.create("div"),this._element.setAttribute("aria-label","Map marker");const Q=Ae.createNS("http://www.w3.org/2000/svg","svg"),G=41,X=27;Q.setAttributeNS(null,"display","block"),Q.setAttributeNS(null,"height",`${G}px`),Q.setAttributeNS(null,"width",`${X}px`),Q.setAttributeNS(null,"viewBox",`0 0 ${X} ${G}`);const te=Ae.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");const le=Ae.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"fill-rule","nonzero");const he=Ae.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(3.0, 29.0)"),he.setAttributeNS(null,"fill","#000000");const pe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const dt of pe){const Bt=Ae.createNS("http://www.w3.org/2000/svg","ellipse");Bt.setAttributeNS(null,"opacity","0.04"),Bt.setAttributeNS(null,"cx","10.5"),Bt.setAttributeNS(null,"cy","5.80029008"),Bt.setAttributeNS(null,"rx",dt.rx),Bt.setAttributeNS(null,"ry",dt.ry),he.appendChild(Bt)}const ve=Ae.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"fill",this._color);const Ce=Ae.createNS("http://www.w3.org/2000/svg","path");Ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ve.appendChild(Ce);const Ie=Ae.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"fill","#000000");const Qe=Ae.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ie.appendChild(Qe);const Je=Ae.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Je.setAttributeNS(null,"fill","#FFFFFF");const Ze=Ae.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(8.0, 8.0)");const rt=Ae.createNS("http://www.w3.org/2000/svg","circle");rt.setAttributeNS(null,"fill","#000000"),rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"cx","5.5"),rt.setAttributeNS(null,"cy","5.5"),rt.setAttributeNS(null,"r","5.4999962");const Ye=Ae.createNS("http://www.w3.org/2000/svg","circle");Ye.setAttributeNS(null,"fill","#FFFFFF"),Ye.setAttributeNS(null,"cx","5.5"),Ye.setAttributeNS(null,"cy","5.5"),Ye.setAttributeNS(null,"r","5.4999962"),Ze.appendChild(rt),Ze.appendChild(Ye),le.appendChild(he),le.appendChild(ve),le.appendChild(Ie),le.appendChild(Je),le.appendChild(Ze),Q.appendChild(le),Q.setAttributeNS(null,"height",G*this._scale+"px"),Q.setAttributeNS(null,"width",X*this._scale+"px"),this._element.appendChild(Q),this._offset=D.Point.convert(x&&x.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",Q=>{Q.preventDefault()}),this._element.addEventListener("mousedown",Q=>{Q.preventDefault()}),el(this._element,this._anchor,"marker"),x&&x.className)for(const Q of x.className.split(" "))this._element.classList.add(Q);this._popup=null}addTo(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ae.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=D.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){const X=Math.abs(13.5)/Math.SQRT2;x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[X,-1*(38.1-13.5+X)],"bottom-right":[-X,-1*(38.1-13.5+X)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(x){return this._offset=D.Point.convert(x),this._update(),this}addClassName(x){this._element.classList.add(x)}removeClassName(x){this._element.classList.remove(x)}toggleClassName(x){return this._element.classList.toggle(x)}setDraggable(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(x){return this._rotation=x||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(x){return this._rotationAlignment=x||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ro={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let uo=0,Na=!1;const bl={maxWidth:100,unit:"metric"};function tl(J,x,Q){const G=Q&&Q.maxWidth||100,X=J._container.clientHeight/2,te=J.unproject([0,X]),le=J.unproject([G,X]),he=te.distanceTo(le);if(Q&&Q.unit==="imperial"){const pe=3.2808*he;pe>5280?Va(x,G,pe/5280,J._getUIString("ScaleControl.Miles")):Va(x,G,pe,J._getUIString("ScaleControl.Feet"))}else Q&&Q.unit==="nautical"?Va(x,G,he/1852,J._getUIString("ScaleControl.NauticalMiles")):he>=1e3?Va(x,G,he/1e3,J._getUIString("ScaleControl.Kilometers")):Va(x,G,he,J._getUIString("ScaleControl.Meters"))}function Va(J,x,Q,G){const X=function(te){const le=Math.pow(10,`${Math.floor(te)}`.length-1);let he=te/le;return he=he>=10?10:he>=5?5:he>=3?3:he>=2?2:he>=1?1:function(pe){const ve=Math.pow(10,Math.ceil(-Math.log(pe)/Math.LN10));return Math.round(pe*ve)/ve}(he),le*he}(Q);J.style.width=x*(X/Q)+"px",J.innerHTML=`${X}&nbsp;${G}`}const xl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Bl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function il(J){if(J){if(typeof J=="number"){const x=Math.round(Math.abs(J)/Math.SQRT2);return{center:new D.Point(0,0),top:new D.Point(0,J),"top-left":new D.Point(x,x),"top-right":new D.Point(-x,x),bottom:new D.Point(0,-J),"bottom-left":new D.Point(x,-x),"bottom-right":new D.Point(-x,-x),left:new D.Point(J,0),right:new D.Point(-J,0)}}if(J instanceof D.Point||Array.isArray(J)){const x=D.Point.convert(J);return{center:x,top:x,"top-left":x,"top-right":x,bottom:x,"bottom-left":x,"bottom-right":x,left:x,right:x}}return{center:D.Point.convert(J.center||[0,0]),top:D.Point.convert(J.top||[0,0]),"top-left":D.Point.convert(J["top-left"]||[0,0]),"top-right":D.Point.convert(J["top-right"]||[0,0]),bottom:D.Point.convert(J.bottom||[0,0]),"bottom-left":D.Point.convert(J["bottom-left"]||[0,0]),"bottom-right":D.Point.convert(J["bottom-right"]||[0,0]),left:D.Point.convert(J.left||[0,0]),right:D.Point.convert(J.right||[0,0])}}return il(new D.Point(0,0))}const rl={extend:(J,...x)=>D.extend(J,...x),run(J){J()},logToElement(J,x=!1,Q="log"){const G=window.document.getElementById(Q);G&&(x&&(G.innerHTML=""),G.innerHTML+=`<br>${J}`)}},Cl=ne;class xr{static get version(){return Cl}static get workerCount(){return di.workerCount}static set workerCount(x){di.workerCount=x}static get maxParallelImageRequests(){return D.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(x){D.config.MAX_PARALLEL_IMAGE_REQUESTS=x}static get workerUrl(){return D.config.WORKER_URL}static set workerUrl(x){D.config.WORKER_URL=x}static addProtocol(x,Q){D.config.REGISTERED_PROTOCOLS[x]=Q}static removeProtocol(x){delete D.config.REGISTERED_PROTOCOLS[x]}}return xr.Map=class extends yl{constructor(J){if(D.PerformanceUtils.mark(D.PerformanceMarkers.create),(J=D.extend({},Po,J)).minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(J.maxPitch!=null&&J.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Bs(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies),{bearingSnap:J.bearingSnap}),this._cooperativeGesturesOnWheel=x=>{this._onCooperativeGesture(x,x[this._metaKey],1)},this._contextLost=x=>{x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new D.Event("webglcontextlost",{originalEvent:x}))},this._contextRestored=x=>{this._setupPainter(),this.resize(),this._update(),this.fire(new D.Event("webglcontextrestored",{originalEvent:x}))},this._onMapScroll=x=>{if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=J.interactive,this._cooperativeGestures=J.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=J.maxTileCacheSize,this._maxTileCacheZoomLevels=J.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new Fi,this._controls=[],this._mapId=D.uniqueId(),this._locale=D.extend({},Ni,J.locale),this._clickTolerance=J.clickTolerance,this._overridePixelRatio=J.pixelRatio,this._maxCanvasSize=J.maxCanvasSize,this.transformCameraUpdate=J.transformCameraUpdate,this._imageQueueHandle=$e.addThrottleControl(()=>this.isMoving()),this._requestManager=new ut(J.transformRequest),typeof J.container=="string"){if(this._container=document.getElementById(J.container),!this._container)throw new Error(`Container '${J.container}' not found.`)}else{if(!(J.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=J.container}if(J.maxBounds&&this.setMaxBounds(J.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let x=!1;const Q=yn(G=>{this._trackResize&&!this._removed&&this.resize(G)._update()},50);this._resizeObserver=new ResizeObserver(G=>{x?Q(G):x=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ho(this,J),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=J.hash&&new Uo(typeof J.hash=="string"&&J.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,D.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,this._validateStyle=J.validateStyle,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new zs({customAttribution:J.customAttribution})),J.maplibreLogo&&this.addControl(new Mo,J.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",x=>{this._update(x.dataType==="style"),this.fire(new D.Event(`${x.dataType}data`,x))}),this.on("dataloading",x=>{this.fire(new D.Event(`${x.dataType}dataloading`,x))}),this.on("dataabort",x=>{this.fire(new D.Event("sourcedataabort",x))})}_getMapId(){return this._mapId}addControl(J,x){if(x===void 0&&(x=J.getDefaultPosition?J.getDefaultPosition():"top-right"),!J||!J.onAdd)return this.fire(new D.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const Q=J.onAdd(this);this._controls.push(J);const G=this._controlPositions[x];return x.indexOf("bottom")!==-1?G.insertBefore(Q,G.firstChild):G.appendChild(Q),this}removeControl(J){if(!J||!J.onRemove)return this.fire(new D.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const x=this._controls.indexOf(J);return x>-1&&this._controls.splice(x,1),J.onRemove(this),this}hasControl(J){return this._controls.indexOf(J)>-1}calculateCameraOptionsFromTo(J,x,Q,G){return G==null&&this.terrain&&(G=this.terrain.getElevationForLngLatZoom(Q,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(J,x,Q,G)}resize(J){var x;const Q=this._containerDimensions(),G=Q[0],X=Q[1],te=this._getClampedPixelRatio(G,X);if(this._resizeCanvas(G,X,te),this.painter.resize(G,X,te),this.painter.overLimit()){const he=this.painter.context.gl;this._maxCanvasSize=[he.drawingBufferWidth,he.drawingBufferHeight];const pe=this._getClampedPixelRatio(G,X);this._resizeCanvas(G,X,pe),this.painter.resize(G,X,pe)}this.transform.resize(G,X),(x=this._requestedCameraState)===null||x===void 0||x.resize(G,X);const le=!this._moving;return le&&(this.stop(),this.fire(new D.Event("movestart",J)).fire(new D.Event("move",J))),this.fire(new D.Event("resize",J)),le&&this.fire(new D.Event("moveend",J)),this}_getClampedPixelRatio(J,x){const{0:Q,1:G}=this._maxCanvasSize,X=this.getPixelRatio(),te=J*X,le=x*X;return Math.min(te>Q?Q/te:1,le>G?G/le:1)*X}getPixelRatio(){var J;return(J=this._overridePixelRatio)!==null&&J!==void 0?J:devicePixelRatio}setPixelRatio(J){this._overridePixelRatio=J,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(J){return this.transform.setMaxBounds(R.convert(J)),this._update()}setMinZoom(J){if((J=J??-2)>=-2&&J<=this.transform.maxZoom)return this.transform.minZoom=J,this._update(),this.getZoom()<J&&this.setZoom(J),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(J){if((J=J??22)>=this.transform.minZoom)return this.transform.maxZoom=J,this._update(),this.getZoom()>J&&this.setZoom(J),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(J){if((J=J??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(J>=0&&J<=this.transform.maxPitch)return this.transform.minPitch=J,this._update(),this.getPitch()<J&&this.setPitch(J),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(J){if((J=J??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(J>=this.transform.minPitch)return this.transform.maxPitch=J,this._update(),this.getPitch()>J&&this.setPitch(J),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(J){return this.transform.renderWorldCopies=J,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(J){return this._cooperativeGestures=J,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(J){return this.transform.locationPoint(D.LngLat.convert(J),this.style&&this.terrain)}unproject(J){return this.transform.pointLocation(D.Point.convert(J),this.terrain)}isMoving(){var J;return this._moving||((J=this.handlers)===null||J===void 0?void 0:J.isMoving())}isZooming(){var J;return this._zooming||((J=this.handlers)===null||J===void 0?void 0:J.isZooming())}isRotating(){var J;return this._rotating||((J=this.handlers)===null||J===void 0?void 0:J.isRotating())}_createDelegatedListener(J,x,Q){if(J==="mouseenter"||J==="mouseover"){let G=!1;return{layer:x,listener:Q,delegates:{mousemove:te=>{const le=this.getLayer(x)?this.queryRenderedFeatures(te.point,{layers:[x]}):[];le.length?G||(G=!0,Q.call(this,new qr(J,this,te.originalEvent,{features:le}))):G=!1},mouseout:()=>{G=!1}}}}if(J==="mouseleave"||J==="mouseout"){let G=!1;return{layer:x,listener:Q,delegates:{mousemove:le=>{(this.getLayer(x)?this.queryRenderedFeatures(le.point,{layers:[x]}):[]).length?G=!0:G&&(G=!1,Q.call(this,new qr(J,this,le.originalEvent)))},mouseout:le=>{G&&(G=!1,Q.call(this,new qr(J,this,le.originalEvent)))}}}}{const G=X=>{const te=this.getLayer(x)?this.queryRenderedFeatures(X.point,{layers:[x]}):[];te.length&&(X.features=te,Q.call(this,X),delete X.features)};return{layer:x,listener:Q,delegates:{[J]:G}}}}on(J,x,Q){if(Q===void 0)return super.on(J,x);const G=this._createDelegatedListener(J,x,Q);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[J]=this._delegatedListeners[J]||[],this._delegatedListeners[J].push(G);for(const X in G.delegates)this.on(X,G.delegates[X]);return this}once(J,x,Q){if(Q===void 0)return super.once(J,x);const G=this._createDelegatedListener(J,x,Q);for(const X in G.delegates)this.once(X,G.delegates[X]);return this}off(J,x,Q){return Q===void 0?super.off(J,x):(this._delegatedListeners&&this._delegatedListeners[J]&&(G=>{const X=this._delegatedListeners[J];for(let te=0;te<X.length;te++){const le=X[te];if(le.layer===x&&le.listener===Q){for(const he in le.delegates)this.off(he,le.delegates[he]);return X.splice(te,1),this}}})(),this)}queryRenderedFeatures(J,x){if(!this.style)return[];let Q;const G=J instanceof D.Point||Array.isArray(J),X=G?J:[[0,0],[this.transform.width,this.transform.height]];if(x=x||(G?{}:J)||{},X instanceof D.Point||typeof X[0]=="number")Q=[D.Point.convert(X)];else{const te=D.Point.convert(X[0]),le=D.Point.convert(X[1]);Q=[te,new D.Point(le.x,te.y),le,new D.Point(te.x,le.y),te]}return this.style.queryRenderedFeatures(Q,x,this.transform)}querySourceFeatures(J,x){return this.style.querySourceFeatures(J,x)}setStyle(J,x){return(x=D.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},x)).diff!==!1&&x.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&J?(this._diffStyle(J,x),this):(this._localIdeographFontFamily=x.localIdeographFontFamily,this._updateStyle(J,x))}setTransformRequest(J){return this._requestManager.setTransformRequest(J),this}_getUIString(J){const x=this._locale[J];if(x==null)throw new Error(`Missing UI string '${J}'`);return x}_updateStyle(J,x){if(x.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(J,x));const Q=this.style&&x.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!J)),J?(this.style=new sr(this,x||{}),this.style.setEventedParent(this,{style:this.style}),typeof J=="string"?this.style.loadURL(J,x,Q):this.style.loadJSON(J,x,Q),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new sr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(J,x){if(typeof J=="string"){const Q=this._requestManager.transformRequest(J,We.Style);D.getJSON(Q,(G,X)=>{G?this.fire(new D.ErrorEvent(G)):X&&this._updateDiff(X,x)})}else typeof J=="object"&&this._updateDiff(J,x)}_updateDiff(J,x){try{this.style.setState(J,x)&&this._update(!0)}catch(Q){D.warnOnce(`Unable to perform style diff: ${Q.message||Q.error||Q}.  Rebuilding the style from scratch.`),this._updateStyle(J,x)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():D.warnOnce("There is no style added to the map.")}addSource(J,x){return this._lazyInitEmptyStyle(),this.style.addSource(J,x),this._update(!0)}isSourceLoaded(J){const x=this.style&&this.style.sourceCaches[J];if(x!==void 0)return x.loaded();this.fire(new D.ErrorEvent(new Error(`There is no source with ID '${J}'`)))}setTerrain(J){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),J){const x=this.style.sourceCaches[J.source];if(!x)throw new Error(`cannot load terrain, because there exists no source with ID: ${J.source}`);for(const Q in this.style._layers){const G=this.style._layers[Q];G.type==="hillshade"&&G.source===J.source&&D.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wl(this.painter,x,J),this.painter.renderToTexture=new Dn(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=Q=>{Q.dataType==="style"?this.terrain.sourceCache.freeRtt():Q.dataType==="source"&&Q.tile&&(Q.sourceId!==J.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(Q.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new D.Event("terrain",{terrain:J})),this}getTerrain(){var J,x;return(x=(J=this.terrain)===null||J===void 0?void 0:J.options)!==null&&x!==void 0?x:null}areTilesLoaded(){const J=this.style&&this.style.sourceCaches;for(const x in J){const Q=J[x]._tiles;for(const G in Q){const X=Q[G];if(X.state!=="loaded"&&X.state!=="errored")return!1}}return!0}addSourceType(J,x,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(J,x,Q)}removeSource(J){return this.style.removeSource(J),this._update(!0)}getSource(J){return this.style.getSource(J)}addImage(J,x,Q={}){const{pixelRatio:G=1,sdf:X=!1,stretchX:te,stretchY:le,content:he}=Q;if(this._lazyInitEmptyStyle(),!(x instanceof HTMLImageElement||D.isImageBitmap(x))){if(x.width===void 0||x.height===void 0)return this.fire(new D.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:ve,data:Ce}=x,Ie=x;return this.style.addImage(J,{data:new D.RGBAImage({width:pe,height:ve},new Uint8Array(Ce)),pixelRatio:G,stretchX:te,stretchY:le,content:he,sdf:X,version:0,userImage:Ie}),Ie.onAdd&&Ie.onAdd(this,J),this}}{const{width:pe,height:ve,data:Ce}=D.browser.getImageData(x);this.style.addImage(J,{data:new D.RGBAImage({width:pe,height:ve},Ce),pixelRatio:G,stretchX:te,stretchY:le,content:he,sdf:X,version:0})}}updateImage(J,x){const Q=this.style.getImage(J);if(!Q)return this.fire(new D.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const G=x instanceof HTMLImageElement||D.isImageBitmap(x)?D.browser.getImageData(x):x,{width:X,height:te,data:le}=G;if(X===void 0||te===void 0)return this.fire(new D.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(X!==Q.data.width||te!==Q.data.height)return this.fire(new D.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const he=!(x instanceof HTMLImageElement||D.isImageBitmap(x));return Q.data.replace(le,he),this.style.updateImage(J,Q),this}getImage(J){return this.style.getImage(J)}hasImage(J){return J?!!this.style.getImage(J):(this.fire(new D.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(J){this.style.removeImage(J)}loadImage(J,x){$e.getImage(this._requestManager.transformRequest(J,We.Image),x)}listImages(){return this.style.listImages()}addLayer(J,x){return this._lazyInitEmptyStyle(),this.style.addLayer(J,x),this._update(!0)}moveLayer(J,x){return this.style.moveLayer(J,x),this._update(!0)}removeLayer(J){return this.style.removeLayer(J),this._update(!0)}getLayer(J){return this.style.getLayer(J)}setLayerZoomRange(J,x,Q){return this.style.setLayerZoomRange(J,x,Q),this._update(!0)}setFilter(J,x,Q={}){return this.style.setFilter(J,x,Q),this._update(!0)}getFilter(J){return this.style.getFilter(J)}setPaintProperty(J,x,Q,G={}){return this.style.setPaintProperty(J,x,Q,G),this._update(!0)}getPaintProperty(J,x){return this.style.getPaintProperty(J,x)}setLayoutProperty(J,x,Q,G={}){return this.style.setLayoutProperty(J,x,Q,G),this._update(!0)}getLayoutProperty(J,x){return this.style.getLayoutProperty(J,x)}setGlyphs(J,x={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(J,x),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(J,x,Q={}){return this._lazyInitEmptyStyle(),this.style.addSprite(J,x,Q,G=>{G||this._update(!0)}),this}removeSprite(J){return this._lazyInitEmptyStyle(),this.style.removeSprite(J),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(J,x={}){return this._lazyInitEmptyStyle(),this.style.setSprite(J,x,Q=>{Q||this._update(!0)}),this}setLight(J,x={}){return this._lazyInitEmptyStyle(),this.style.setLight(J,x),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(J,x){return this.style.setFeatureState(J,x),this._update()}removeFeatureState(J,x){return this.style.removeFeatureState(J,x),this._update()}getFeatureState(J){return this.style.getFeatureState(J)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let J=0,x=0;return this._container&&(J=this._container.clientWidth||400,x=this._container.clientHeight||300),[J,x]}_setupContainer(){const J=this._container;J.classList.add("maplibregl-map");const x=this._canvasContainer=Ae.create("div","maplibregl-canvas-container",J);this._interactive&&x.classList.add("maplibregl-interactive"),this._canvas=Ae.create("canvas","maplibregl-canvas",x),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const Q=this._containerDimensions(),G=this._getClampedPixelRatio(Q[0],Q[1]);this._resizeCanvas(Q[0],Q[1],G);const X=this._controlContainer=Ae.create("div","maplibregl-control-container",J),te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(le=>{te[le]=Ae.create("div",`maplibregl-ctrl-${le} `,X)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=Ae.create("div","maplibregl-cooperative-gesture-screen",this._container);let J=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(J=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use â + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${J}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){Ae.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(J,x,Q){this._canvas.width=Math.floor(Q*J),this._canvas.height=Math.floor(Q*x),this._canvas.style.width=`${J}px`,this._canvas.style.height=`${x}px`}_setupPainter(){const J={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let x=null;this._canvas.addEventListener("webglcontextcreationerror",G=>{x={requestedAttributes:J},G&&(x.statusMessage=G.statusMessage,x.type=G.type)},{once:!0});const Q=this._canvas.getContext("webgl2",J)||this._canvas.getContext("webgl",J);if(!Q){const G="Failed to initialize WebGL";throw x?(x.message=G,new Error(JSON.stringify(x))):new Error(G)}this.painter=new jo(Q,this.transform),fe.testSupport(Q)}_onCooperativeGesture(J,x,Q){return!x&&Q<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(J){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||J,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(J){return this._update(),this._renderTaskQueue.add(J)}_cancelRenderFrame(J){this._renderTaskQueue.remove(J)}_render(J){const x=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(J),this._removed)return;let Q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,te=D.browser.now();this.style.zoomHistory.update(X,te);const le=new D.EvaluationParameters(X,{now:te,fadeDuration:x,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),he=le.crossFadingFactor();he===1&&he===this._crossFadingFactor||(Q=!0,this._crossFadingFactor=he),this.style.update(le)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,showPadding:this.showPadding}),this.fire(new D.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,D.PerformanceUtils.mark(D.PerformanceMarkers.load),this.fire(new D.Event("load"))),this.style&&(this.style.hasTransitions()||Q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const G=this._sourcesDirty||this._styleDirty||this._placementDirty;return G||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new D.Event("idle")),!this._loaded||this._fullyLoaded||G||(this._fullyLoaded=!0,D.PerformanceUtils.mark(D.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var J;this._hash&&this._hash.remove();for(const Q of this._controls)Q.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$e.removeThrottleControl(this._imageQueueHandle),(J=this._resizeObserver)===null||J===void 0||J.disconnect();const x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Ae.remove(this._canvasContainer),Ae.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),D.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new D.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=D.browser.frame(J=>{D.PerformanceUtils.frame(J),this._frame=null,this._render(J)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())}get showPadding(){return!!this._showPadding}set showPadding(J){this._showPadding!==J&&(this._showPadding=J,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())}get repaint(){return!!this._repaint}set repaint(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(J){this._vertices=J,this._update()}get version(){return uA}getCameraTargetElevation(){return this.transform.elevation}},xr.NavigationControl=class{constructor(J){this._updateZoomButtons=()=>{const x=this._map.getZoom(),Q=x===this._map.getMaxZoom(),G=x===this._map.getMinZoom();this._zoomInButton.disabled=Q,this._zoomOutButton.disabled=G,this._zoomInButton.setAttribute("aria-disabled",Q.toString()),this._zoomOutButton.setAttribute("aria-disabled",G.toString())},this._rotateCompassArrow=()=>{const x=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=x},this._setButtonTitle=(x,Q)=>{const G=this._map._getUIString(`NavigationControl.${Q}`);x.title=G,x.setAttribute("aria-label",G)},this.options=D.extend({},ts,J),this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",x=>x.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",x=>this._map.zoomIn({},{originalEvent:x})),Ae.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",x=>this._map.zoomOut({},{originalEvent:x})),Ae.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",x=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:x}):this._map.resetNorth({},{originalEvent:x})}),this._compassIcon=Ae.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(J){return this._map=J,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Kl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Ae.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(J,x){const Q=Ae.create("button",J,this._container);return Q.type="button",Q.addEventListener("click",x),Q}},xr.GeolocateControl=class extends D.Evented{constructor(J){super(),this._onSuccess=x=>{if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new D.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new D.Event("geolocate",x)),this._finish()}},this._updateCamera=x=>{const Q=new D.LngLat(x.coords.longitude,x.coords.latitude),G=x.coords.accuracy,X=this._map.getBearing(),te=D.extend({bearing:X},this.options.fitBoundsOptions),le=R.fromLngLat(Q,G);this._map.fitBounds(le,te,{geolocateSource:!0})},this._updateMarker=x=>{if(x){const Q=new D.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(Q).addTo(this._map),this._userLocationDotMarker.setLngLat(Q).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=x=>{if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const Q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&Na)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new D.Event("error",x)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=x=>{if(this._map){if(this._container.addEventListener("contextmenu",Q=>Q.preventDefault()),this._geolocateButton=Ae.create("button","maplibregl-ctrl-geolocate",this._container),Ae.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",x===!1){D.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const Q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}else{const Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ae.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Oo({element:this._dotElement}),this._circleElement=Ae.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",Q=>{Q.geolocateSource||this._watchState!=="ACTIVE_LOCK"||Q.originalEvent&&Q.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new D.Event("trackuserlocationend")))})}},this.options=D.extend({},Ro,J)}onAdd(J){return this._map=J,this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(x,Q=!1){un===void 0||Q?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(G=>{un=G.state!=="denied",x(un)}).catch(()=>{un=!!window.navigator.geolocation,x(un)}):(un=!!window.navigator.geolocation,x(un)):x(un)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ae.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uo=0,Na=!1}_isOutOfMapMaxBounds(J){const x=this._map.getMaxBounds(),Q=J.coords;return x&&(Q.longitude<x.getWest()||Q.longitude>x.getEast()||Q.latitude<x.getSouth()||Q.latitude>x.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const J=this._map.getBounds(),x=J.getSouthEast(),Q=J.getNorthEast(),G=x.distanceTo(Q),X=Math.ceil(this._accuracy/(G/this._map._container.clientHeight)*2);this._circleElement.style.width=`${X}px`,this._circleElement.style.height=`${X}px`}trigger(){if(!this._setup)return D.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new D.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uo--,Na=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new D.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new D.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let J;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),uo++,uo>1?(J={maximumAge:6e5,timeout:0},Na=!0):(J=this.options.positionOptions,Na=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},xr.AttributionControl=zs,xr.LogoControl=Mo,xr.ScaleControl=class{constructor(J){this._onMove=()=>{tl(this._map,this._container,this.options)},this.setUnit=x=>{this.options.unit=x,tl(this._map,this._container,this.options)},this.options=D.extend({},bl,J)}getDefaultPosition(){return"bottom-left"}onAdd(J){return this._map=J,this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-scale",J.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Ae.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},xr.FullscreenControl=class extends D.Evented{constructor(J={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,J&&J.container&&(J.container instanceof HTMLElement?this._container=J.container:D.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(J){return this._map=J,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Ae.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const J=this._fullscreenButton=Ae.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Ae.create("span","maplibregl-ctrl-icon",J).setAttribute("aria-hidden","true"),J.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const J=this._getTitle();this._fullscreenButton.setAttribute("aria-label",J),this._fullscreenButton.title=J}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new D.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new D.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},xr.TerrainControl=class{constructor(J){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=J}onAdd(J){return this._map=J,this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Ae.create("button","maplibregl-ctrl-terrain",this._container),Ae.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Ae.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},xr.Popup=class extends D.Evented{constructor(J){super(),this.remove=()=>(this._content&&Ae.remove(this._content),this._container&&(Ae.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new D.Event("close")),this),this._onMouseUp=x=>{this._update(x.point)},this._onMouseMove=x=>{this._update(x.point)},this._onDrag=x=>{this._update(x.point)},this._update=x=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Ae.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Ae.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const le of this.options.className.split(" "))this._container.classList.add(le);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lo(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!x)return;const Q=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat);let G=this.options.anchor;const X=il(this.options.offset);if(!G){const le=this._container.offsetWidth,he=this._container.offsetHeight;let pe;pe=Q.y+X.bottom.y<he?["top"]:Q.y>this._map.transform.height-he?["bottom"]:[],Q.x<le/2?pe.push("left"):Q.x>this._map.transform.width-le/2&&pe.push("right"),G=pe.length===0?"bottom":pe.join("-")}const te=Q.add(X[G]).round();Ae.setTransform(this._container,`${Qo[G]} translate(${te.x}px,${te.y}px)`),el(this._container,G,"popup")},this._onClose=()=>{this.remove()},this.options=D.extend(Object.create(xl),J)}addTo(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new D.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(J){return this._lngLat=D.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(J){return this.setDOMContent(document.createTextNode(J))}setHTML(J){const x=document.createDocumentFragment(),Q=document.createElement("body");let G;for(Q.innerHTML=J;G=Q.firstChild,G;)x.appendChild(G);return this.setDOMContent(x)}getMaxWidth(){var J;return(J=this._container)===null||J===void 0?void 0:J.style.maxWidth}setMaxWidth(J){return this.options.maxWidth=J,this._update(),this}setDOMContent(J){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ae.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(J),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(J){this._container&&this._container.classList.add(J)}removeClassName(J){this._container&&this._container.classList.remove(J)}setOffset(J){return this.options.offset=J,this._update(),this}toggleClassName(J){if(this._container)return this._container.classList.toggle(J)}_createCloseButton(){this.options.closeButton&&(this._closeButton=Ae.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const J=this._container.querySelector(Bl);J&&J.focus()}},xr.Marker=Oo,xr.Style=sr,xr.LngLat=D.LngLat,xr.LngLatBounds=R,xr.Point=D.Point,xr.MercatorCoordinate=D.MercatorCoordinate,xr.Evented=D.Evented,xr.AJAXError=D.AJAXError,xr.config=D.config,xr.CanvasSource=me,xr.GeoJSONSource=we,xr.ImageSource=Ve,xr.RasterDEMTileSource=ue,xr.RasterTileSource=oe,xr.VectorTileSource=se,xr.VideoSource=De,xr.setRTLTextPlugin=D.setRTLTextPlugin,xr.getRTLTextPluginStatus=D.getRTLTextPluginStatus,xr.prewarm=function(){Vi().acquire(bt)},xr.clearPrewarmedResources=function(){const J=Hi;J&&(J.isPreloaded()&&J.numActive()===1?(J.release(bt),Hi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},rl.extend(xr,{isSafari:D.isSafari,getPerformanceMetrics:D.PerformanceUtils.getPerformanceMetrics}),xr});var re=K;return re})})(maplibreGl);var maplibreGlExports=maplibreGl.exports;const mapLibre=getDefaultExportFromCjs(maplibreGlExports),MaplibreLayer=L.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(g){L.setOptions(this,g),this._throttledUpdate=L.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(g){this._container||this._initContainer();const B=this.getPaneName();g.getPane(B).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),g.options.zoomAnimation&&L.DomEvent.on(g._proxy,L.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(g){this._map._proxy&&this._map.options.zoomAnimation&&L.DomEvent.off(this._map._proxy,L.DomUtil.TRANSITION_END,this._transitionEnd,this);const B=this.getPaneName();g.getPane(B).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){const g=this.getSize().multiplyBy(.5),B=this._map.latLngToContainerPoint(this._map.getCenter());return latLngBounds(this._map.containerPointToLatLng(B.subtract(g)),this._map.containerPointToLatLng(B.add(g)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(g){return{x:Math.round(g.x),y:Math.round(g.y)}},_initContainer:function(){const g=this._container=L.DomUtil.create("div","leaflet-gl-layer"),B=this.getSize(),M=this._map.getSize().multiplyBy(this.options.padding);g.style.width=`${B.x}px`,g.style.height=`${B.y}px`;const P=this._map.containerPointToLayerPoint([0,0]).subtract(M);L.DomUtil.setPosition(g,this._roundPoint(P))},_initGL:function(){const g=this._map.getCenter(),B=L.extend({},this.options,{container:this._container,center:[g.lng,g.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new mapLibre.Map(B),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;const M=this._glMap._actualCanvas;L.DomUtil.addClass(M,"leaflet-image-layer"),L.DomUtil.addClass(M,"leaflet-zoom-animated"),this.options.interactive&&L.DomUtil.addClass(M,"leaflet-interactive"),this.options.className&&L.DomUtil.addClass(M,this.options.className)},_update:function(g){if(this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming)return;const B=this.getSize(),M=this._container,P=this._glMap,K=this._map.getSize().multiplyBy(this.options.padding),Y=this._map.containerPointToLayerPoint([0,0]).subtract(K);L.DomUtil.setPosition(M,this._roundPoint(Y)),this._transformGL(P),P.transform.width!==B.x||P.transform.height!==B.y?(M.style.width=`${B.x}px`,M.style.height=`${B.y}px`,P._resize!==null&&P._resize!==void 0?P._resize():P.resize()):P._update!==null&&P._update!==void 0?P._update():P.update()},_transformGL:function(g){const B=this._map.getCenter(),M=g.transform;M.center=mapLibre.LngLat.convert([B.lng,B.lat]),M.zoom=this._map.getZoom()-1},_pinchZoom:function(g){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(g){const B=this._map.getZoomScale(g.zoom),M=this._map.getSize().multiplyBy(this.options.padding*B),P=this.getSize()._divideBy(2),K=this._map.project(g.center,g.zoom)._subtract(P)._add(this._map._getMapPanePos().add(M))._round(),Y=this._map.project(this._map.getBounds().getNorthWest(),g.zoom)._subtract(K);L.DomUtil.setTransform(this._glMap._actualCanvas,Y.subtract(this._offset),B)},_zoomStart:function(g){this._zooming=!0},_zoomEnd:function(){const g=this._map.getZoomScale(this._map.getZoom());L.DomUtil.setTransform(this._glMap._actualCanvas,new L.Point(0,0),g),this._zooming=!1,this._update()},_transitionEnd:function(g){L.Util.requestAnimFrame(function(){const B=this._map.getZoom(),M=this._map.getCenter(),P=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());L.DomUtil.setTransform(this._glMap._actualCanvas,P,1),this._glMap.once("moveend",L.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:M,zoom:B-1})},this)},_resize:function(g){this._transitionEnd(g)}});function maplibreLayer(g){return new MaplibreLayer(g)}let copyData;$(document).on("copy",g=>{copyData&&g.originalEvent&&g.originalEvent.clipboardData?(Object.keys(copyData).forEach(B=>{g.originalEvent.clipboardData.setData(B,copyData[B])}),g.originalEvent.preventDefault(),copyData=void 0):copyData&&copyData["text/plain"]&&(prompt(i18n.t("export.copy_to_clipboard"),copyData["text/plain"]),copyData=null)});function make_combobox(g,B,M,P){if(g[0].is_combobox){g.autocomplete("option",{source:B});return}const K=g.wrap("<span>").parent().addClass("ui-combobox");g.autocomplete({source:B,minLength:0}).addClass("ui-widget ui-widget-content ui-corner-left ui-state-default").autocomplete("instance")._renderItem=(Y,re)=>$("<li>").append(M&&M.indexOf(re.value)!==-1?`<div title="shift-click to remove from list" style="font-style:italic;">${re.label}</div>`:`<div>${re.label}</div>`).on("click",function(D){if(D.shiftKey&&M.indexOf(re.value)!==-1){P(re.value),$(this).remove();const ne=g.autocomplete("option","source");return ne.splice(ne.indexOf(re),1),g.autocomplete("option","source",ne),!1}}).appendTo(Y),$("<a>").attr("tabIndex",-1).attr("title","show all items").appendTo(K).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle").click(()=>{if(g.autocomplete("widget").is(":visible")){g.autocomplete("close");return}g.autocomplete("search",""),g.focus()}),g[0].is_combobox=!0}function showDialog(g,B,M){const P=`      <div class="modal is-active">        <div class="modal-background"></div>        <div class="modal-card">          <header class="modal-card-head">            <p class="modal-card-title">${g}</p>            <button class="delete" aria-label="close"></button>          </header>          <section class="modal-card-body">            ${B}          </section>          <footer class="modal-card-foot">            <div class="level">              <div class="level-right">                <div class="level-item">                </div>              </div>            </div>          </footer>        </div>      </div>    `,K=$(P);$(".delete",K).click(()=>$(K).remove());for(const Y in M){const re=M[Y];$(`<button class="button">${re.name}</button>`).click(()=>{var D;(D=re.callback)==null||D.call(re),$(K).remove()}).appendTo($("footer .level-item",K))}K.appendTo("body")}class IDE{constructor(){this.attribControl=null,this.scaleControl=null,this.queryParser=new parser,this.run_query_on_startup=!1,this.codeEditor=null,this.dataViewer=null,this.map=null,this.waiter=new class{constructor(){this.opened=!0,this.frames=["â´","â·","â¶","âµ"],this.frameDelay=250,this.onAbort=void 0,this.interval=0,this._initialTitle=document.title}open(M){M?($(".modal .wait-info h4").text(M),$(".wait-info").show()):$(".wait-info").hide(),$("#loading-dialog").addClass("is-active"),document.title=`${this.frames[0]} ${this._initialTitle}`;let P=0;this.interval=setInterval(()=>{const K=this.isAlert?this.alertFrame:this.frames[++P%this.frames.length];document.title=`${K} ${this._initialTitle}`},this.frameDelay),this.opened=!0}close(M=""){this.opened&&(clearInterval(this.interval),document.title=`${M}${this._initialTitle}`,$("#loading-dialog").removeClass("is-active"),$(".wait-info ul li").remove(),delete this.onAbort,this.opened=!1)}addInfo(M,P){$("#aborter").remove(),$(".wait-info ul li:nth-child(n+1)").css("opacity",.5),$(".wait-info ul li span.fas").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-check"),$(".wait-info ul li:nth-child(n+4)").hide();const K=$(`<li><span class="fas fa-spinner fa-spin" style="display:inline-block; margin-bottom:-2px; margin-right:3px;"></span>${M}</li>`);if(typeof P=="function"){this.onAbort=P;const Y=$('<span id="aborter">&nbsp;(<a href="#">abort</a>)</span>').on("click",()=>(this.abort(),!1));K.append(Y)}$(".wait-info ul").prepend(K)}abort(){typeof this.onAbort=="function"&&(this.addInfo("aborting"),this.onAbort(this.close))}}}init(){this.waiter.addInfo("ide starting up"),$("#overpass-turbo-version").html("overpass-turbo <code>2024-06-10/8e16197</code>"),$("#overpass-turbo-dependencies").html('<a href="https://www.npmjs.com/package/@fortawesome/fontawesome-free/v/5.15.4">@fortawesome/fontawesome-free</a> 5.15.4 ((CC-BY-4.0 AND OFL-1.1 AND MIT)), <a href="https://www.npmjs.com/package/@maplibre/maplibre-gl-leaflet/v/0.0.20">@maplibre/maplibre-gl-leaflet</a> 0.0.20 (ISC), <a href="https://www.npmjs.com/package/@openstreetmap/id-tagging-schema/v/3.5.1">@openstreetmap/id-tagging-schema</a> 3.5.1 (ISC), <a href="https://www.npmjs.com/package/bulma/v/0.9.4">bulma</a> 0.9.4 (MIT), <a href="https://www.npmjs.com/package/canvg/v/4.0.1">canvg</a> 4.0.1 (MIT), <a href="https://www.npmjs.com/package/codemirror/v/2.38.00">codemirror</a> 2.38.00 (undefined), <a href="https://www.npmjs.com/package/html2canvas/v/1.4.1">html2canvas</a> 1.4.1 (MIT), <a href="https://www.npmjs.com/package/jquery/v/3.7.1">jquery</a> 3.7.1 (MIT), <a href="https://www.npmjs.com/package/jquery-ui/v/1.13.2">jquery-ui</a> 1.13.2 (MIT), <a href="https://www.npmjs.com/package/jquery-ui-dist/v/1.13.2">jquery-ui-dist</a> 1.13.2 (MIT), <a href="https://www.npmjs.com/package/leaflet/v/1.9.4">leaflet</a> 1.9.4 (BSD-2-Clause), <a href="https://www.npmjs.com/package/leaflet-polylineoffset/v/1.1.1">leaflet-polylineoffset</a> 1.1.1 (MIT), <a href="https://www.npmjs.com/package/leaflet-locationfilter/v/0.1.3">leaflet-locationfilter</a> 0.1.3 (MIT), <a href="https://www.npmjs.com/package/lodash/v/4.17.21">lodash</a> 4.17.21 (MIT), <a href="https://www.npmjs.com/package/maplibre-gl/v/3.3.1">maplibre-gl</a> 3.3.1 (BSD-3-Clause), <a href="https://www.npmjs.com/package/osm-auth/v/2.2.0">osm-auth</a> 2.2.0 (ISC), <a href="https://www.npmjs.com/package/osmtogeojson/v/3.0.0-beta.5">osmtogeojson</a> 3.0.0-beta.5 (MIT), <a href="https://www.npmjs.com/package/rgbcolor/v/1.0.1">rgbcolor</a> 1.0.1 (MIT OR SEE LICENSE IN FEEL-FREE.md), <a href="https://www.npmjs.com/package/stackblur/v/1.0.0">stackblur</a> 1.0.0 (BSD-2-Clause), <a href="https://www.npmjs.com/package/tag2link/v/2023.10.21">tag2link</a> 2023.10.21 (ISC), <a href="https://www.npmjs.com/package/togpx/v/0.5.4">togpx</a> 0.5.4 (MIT), <a href="https://www.npmjs.com/package/tokml/v/0.4.0">tokml</a> 0.4.0 (BSD-2-Clause)'),($.support.cors!=!0||typeof function(){let B;try{localStorage.setItem("startup_localstorage_quota_test",123),localStorage.removeItem("startup_localstorage_quota_test"),B=localStorage}catch{}return B}()!="object")&&(this.not_supported=!0,$("#warning-unsupported-browser").addClass("is-active")),this.waiter.addInfo("load settings"),settings.load(),this.waiter.addInfo("translate ui"),i18n.translate().then(()=>this.initAfterI18n()),sync.enabled&&($("#load-dialog .osm").show(),sync.authenticated()&&($("#logout").show(),$("#logout").appendTo($("#logout").parent())))}initAfterI18n(){const B=this;B.waiter.addInfo("parse url parameters");const M=urlParameters();M.has_coords&&(settings.coords_lat=M.coords.lat,settings.coords_lon=M.coords.lng),M.has_zoom&&(settings.coords_zoom=M.zoom),M.run_query&&(B.run_query_on_startup=!0),settings.save(),B.waiter.addInfo("initialize page");const P=$(window).width()/$(window).height()<.8;if(settings.editor_width!=""&&!P&&($("#editor").css("width",settings.editor_width),$("#dataviewer").css("left",settings.editor_width)),P&&$("#editor, #dataviewer").addClass("portrait"),$("#editor").resizable({handles:P?"s":"e",minWidth:P?void 0:"200",resize(){if(!P)$(this).next().css("left",`${$(this).outerWidth()}px`);else{const fe=$(this).offset().top+$(this).outerHeight();$(this).next().css("top",`${fe}px`)}B.map.invalidateSize(!1)},stop(){P||(settings.editor_width=$("#editor").css("width"),settings.save())}}),$("#editor").prepend("<span class='ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'/>"),$("#editor textarea")[0].value=settings.code.overpass,settings.use_rich_editor){let fe=0;CodeMirror.defineMIME("text/x-overpassQL",{name:"clike",keywords:function(ge){const Be={},Ue=ge.split(" ");for(const ze of Ue)Be[ze]=!0;return Be}("out json xml custom popup timeout maxsize bbox date diff adiff foreach relation rel way node is_in area around user uid newer changed poly pivot nwr nw nr wr derived out meta body skel tags ids count qt asc center bb geom")}),CodeMirror.defineMIME("text/x-overpassXML","xml"),CodeMirror.defineMode("xml+mustache",ge=>CodeMirror.multiplexingMode(CodeMirror.multiplexingMode(CodeMirror.getMode(ge,"xml"),{open:"{{",close:"}}",mode:CodeMirror.getMode(ge,"text/plain"),delimStyle:"mustache"}),{open:"{{style:",close:"}}",mode:CodeMirror.getMode(ge,"text/css"),delimStyle:"mustache"})),CodeMirror.defineMode("ql+mustache",ge=>CodeMirror.multiplexingMode(CodeMirror.multiplexingMode(CodeMirror.getMode(ge,"text/x-overpassQL"),{open:"{{",close:"}}",mode:CodeMirror.getMode(ge,"text/plain"),delimStyle:"mustache"}),{open:"{{style:",close:"}}",mode:CodeMirror.getMode(ge,"text/css"),delimStyle:"mustache"})),B.codeEditor=CodeMirror.fromTextArea($("#editor textarea")[0],{lineNumbers:!0,lineWrapping:!0,mode:"text/plain",onChange(ge){clearTimeout(fe),fe=setTimeout(()=>{B.getQueryLang()=="xml"?ge.getOption("mode")!="xml+mustache"&&(ge.closeTagEnabled=!0,ge.setOption("matchBrackets",!1),ge.setOption("mode","xml+mustache")):ge.getOption("mode")!="ql+mustache"&&(ge.closeTagEnabled=!1,ge.setOption("matchBrackets",!0),ge.setOption("mode","ql+mustache"));const Be=$(".leaflet-control-buttons-bboxfilter");B.getRawQuery().match(/\{\{bbox\}\}/)?Be.hasClass("disabled")&&(Be.removeClass("disabled"),Be.attr("data-t","[title]map_controlls.select_bbox"),i18n.translate_ui(Be[0])):Be.hasClass("disabled")||(Be.addClass("disabled"),Be.attr("data-t","[title]map_controlls.select_bbox_disabled"),i18n.translate_ui(Be[0]))},500),settings.code.overpass=ge.getValue(),settings.save()},closeTagEnabled:!0,closeTagIndent:["osm-script","query","union","foreach","difference"],extraKeys:{"'>'"(ge){ge.closeTag(ge,">")},"'/'"(ge){ge.closeTag(ge,"/")}}}),B.codeEditor.getOption("onChange")(B.codeEditor)}else B.codeEditor=$("#editor textarea")[0],B.codeEditor.getValue=function(){return this.value},B.codeEditor.setValue=function(fe){this.value=fe},B.codeEditor.lineCount=function(){return this.value.split(/\r\n|\r|\n/).length},B.codeEditor.setLineClass=function(){},$("#editor textarea").bind("input change",fe=>{settings.code.overpass=fe.target.getValue(),settings.save()});M.has_query&&B.codeEditor.setValue(M.query),B.dataViewer=CodeMirror($("#data")[0],{value:"no data loaded yet",lineNumbers:!0,readOnly:!0,mode:"javascript"}),B.map=new L.Map("map",{attributionControl:!0,minZoom:0,maxZoom:configs.maxMapZoom,worldCopyJump:!1});const K=settings.tile_server,Y=configs.vectorTileAttribution,re=new L.TileLayer(K,{attribution:Y,noWrap:!0,maxNativeZoom:19,maxZoom:B.map.options.maxZoom});B.attribControl=new L.Control.Attribution({prefix:!1}),B.attribControl.addAttribution(Y);const D=new L.LatLng(settings.coords_lat,settings.coords_lon);B.map.setView(D,settings.coords_zoom).addLayer(re),B.map.tile_layer=re,B.map.createPane("ohm_vectortiles"),B.map.getPane("ohm_vectortiles").style.zIndex="210",B.map.getPane("ohm_vectortiles").style.pointerEvents="none",maplibreLayer({style:configs.vectorTileStyleUrl,pane:"ohm_vectortiles"}).addTo(B.map),B.map.inv_opacity_layer=L.tileLayer("data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==").setOpacity(1-settings.background_opacity),settings.background_opacity!=1&&B.map.inv_opacity_layer.addTo(B.map),B.scaleControl=new L.Control.Scale({metric:!0,imperial:!1}),B.scaleControl.addTo(B.map),B.map.on("moveend",()=>{settings.coords_lat=B.map.getCenter().lat,settings.coords_lon=B.map.getCenter().lng,settings.coords_zoom=B.map.getZoom(),settings.save()}),$("#dataviewer > div#data")[0].style.zIndex=-1001,$(".tabs li").bind("click",fe=>{$(fe.target).hasClass("is-active")||($("#dataviewer > div#data")[0].style.zIndex=-1*$("#dataviewer > div#data")[0].style.zIndex,$(".tabs li").toggleClass("is-active"))}),$(document).keydown(fe=>B.onKeyPress(fe));const ne=L.Control.extend({options:{position:"topleft"},onAdd(){const fe=L.DomUtil.create("div","leaflet-control-buttons leaflet-bar");let ge=L.DomUtil.create("a","leaflet-control-buttons-fitdata leaflet-bar-part leaflet-bar-part-top",fe);return $('<span class="fas fa-search"/>').appendTo($(ge)),ge.href="#",ge.className+=" t",ge.setAttribute("data-t","[title]map_controlls.zoom_to_data"),i18n.translate_ui(ge),L.DomEvent.addListener(ge,"click",()=>{try{B.map.fitBounds(overpass.osmLayer.getBaseLayer().getBounds(),{maxZoom:18})}catch{}return!1},B.map),ge=L.DomUtil.create("a","leaflet-control-buttons-myloc leaflet-bar-part",fe),$('<span class="fas fa-crosshairs"/>').appendTo($(ge)),ge.href="#",ge.className+=" t",ge.setAttribute("data-t","[title]map_controlls.localize_user"),window.isSecureContext||(ge.className+=" disabled",ge.setAttribute("data-t","[title]map_controlls.localize_user_disabled")),i18n.translate_ui(ge),L.DomEvent.addListener(ge,"click",()=>{try{navigator.geolocation.getCurrentPosition(Be=>{const Ue=new L.LatLng(Be.coords.latitude,Be.coords.longitude);B.map.setView(Ue,settings.coords_zoom)})}catch{}return!1},B.map),ge=L.DomUtil.create("a","leaflet-control-buttons-bboxfilter leaflet-bar-part",fe),$('<span class="fas fa-image"/>').appendTo($(ge)),ge.href="#",ge.className+=" t",ge.setAttribute("data-t","[title]map_controlls.select_bbox"),i18n.translate_ui(ge),L.DomEvent.addListener(ge,"click",Be=>($(Be.target).parent().hasClass("disabled")||(B.map.bboxfilter.isEnabled()?B.map.bboxfilter.disable():(B.map.bboxfilter.setBounds(B.map.getBounds().pad(-.2)),B.map.bboxfilter.enable()),$(Be.target).toggleClass("fa-times-circle").toggleClass("fa-image")),!1),B.map),ge=L.DomUtil.create("a","leaflet-control-buttons-fullscreen leaflet-bar-part",fe),$('<span class="fas fa-step-backward"/>').appendTo($(ge)),ge.href="#",ge.className+=" t",ge.setAttribute("data-t","[title]map_controlls.toggle_wide_map"),i18n.translate_ui(ge),L.DomEvent.addListener(ge,"click",Be=>($("#dataviewer").toggleClass("fullscreen"),B.map.invalidateSize(),$(Be.target).toggleClass("fa-step-forward").toggleClass("fa-step-backward"),$("#editor").toggleClass("hidden"),$("#editor").resizable("option","disabled")?$("#editor").resizable("enable"):$("#editor").resizable("disable"),!1),B.map),ge=L.DomUtil.create("a","leaflet-control-buttons-clearoverlay leaflet-bar-part leaflet-bar-part-bottom",fe),$('<span class="fas fa-ban"/>').appendTo($(ge)),ge.href="#",ge.className+=" t",ge.setAttribute("data-t","[title]map_controlls.toggle_data"),i18n.translate_ui(ge),L.DomEvent.addListener(ge,"click",Be=>(Be.preventDefault(),B.map.hasLayer(overpass.osmLayer)?B.map.removeLayer(overpass.osmLayer):B.map.addLayer(overpass.osmLayer),!1),B.map),fe}});B.map.addControl(new ne),$(".leaflet-control-buttons > a").bind("dblclick",fe=>fe.stopPropagation()),$(".leaflet-control-buttons > a").tooltip({items:"a[title]",hide:{effect:"fadeOut",duration:100},position:{my:"left+5 center",at:"right center"}});const Ae=L.Control.extend({options:{position:"topright"},onAdd(){const fe=L.DomUtil.create("div","leaflet-control-search control has-icons-left");fe.style.position="absolute",fe.style.right="0";const ge=L.DomUtil.create("input","input is-rounded",fe);return $('<span class="icon is-left"><span class="fas fa-search"/></span>').click(function(){$(this).prev().autocomplete("search")}).insertAfter(ge),ge.id="search",ge.type="search",ge.onclick=function(){this.focus()},fe.ondblclick=function(Be){Be.stopPropagation()},$(ge).autocomplete({source(Be,Ue){$.ajax(`https://search.osmnames.org/q/${encodeURIComponent(Be.term)}.js?key=${configs.osmnamesApiKey}`,{success(ze){if(typeof ze=="string")try{ze=$.parseJSON(ze)}catch{}Ue($.map(ze.results.slice(0,10),Re=>({label:Re.display_name,value:Re.display_name,lat:Re.lat,lon:Re.lon,boundingbox:Re.boundingbox})))},error(){console.error("An error occured while contacting the search server osmnames.org :(")}})},minLength:2,autoFocus:!0,select(Be,Ue){return Ue.item.boundingbox&&Ue.item.boundingbox instanceof Array?B.map.fitBounds(L.latLngBounds([[Ue.item.boundingbox[1],Ue.item.boundingbox[0]],[Ue.item.boundingbox[3],Ue.item.boundingbox[2]]]),{maxZoom:18}):B.map.panTo(new L.LatLng(Ue.item.lat,Ue.item.lon)),this.value="",!1},open(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close(){$(this).addClass("ui-corner-all").removeClass("ui-corner-top")}}),$(ge).autocomplete("option","delay",20),fe}});B.map.addControl(new Ae),$('<span class="fas fa-plus" />').addClass("crosshairs").hide().appendTo("#map"),settings.enable_crosshairs&&$(".crosshairs").show(),B.map.bboxfilter=new L.LocationFilter({enable:!1,adjustButton:!1,enableButton:!1}).addTo(B.map),B.map.on("popupopen popupclose",fe=>{if(typeof fe.popup.layer<"u"){const ge=fe.popup.layer.placeholder||fe.popup.layer,Be=overpass.osmLayer._baseLayer.options.style(ge.feature,fe.type=="popupopen");typeof ge.eachLayer!="function"?typeof ge.setStyle=="function"&&ge.setStyle(Be):ge.eachLayer(Ue=>{typeof Ue.setStyle=="function"&&Ue.setStyle(Be)})}}),overpass.init(),overpass.handlers.onProgress=function(fe,ge){B.waiter.addInfo(fe,ge)},overpass.handlers.onDone=function(){const fe=B.getRawQuery().match(/@name ([^\n]+)/),ge=fe?`${fe[1]} | `:"";B.waiter.close(ge);const Be=B.map.getBounds(),Ue=overpass.osmLayer.getBaseLayer().getBounds();if(Ue.isValid()&&!Be.intersects(Ue)){const ze=$(".leaflet-control-buttons-fitdata").tooltip("option","content");$(".leaflet-control-buttons-fitdata").tooltip("option","content",`â ${i18n.t("map_controlls.suggest_zoom_to_data")}`),$(".leaflet-control-buttons-fitdata").tooltip("open"),$(".leaflet-control-buttons-fitdata").tooltip("option","hide",{effect:"fadeOut",duration:1e3}),setTimeout(()=>{$(".leaflet-control-buttons-fitdata").tooltip("option","content",ze),$(".leaflet-control-buttons-fitdata").tooltip("close"),$(".leaflet-control-buttons-fitdata").tooltip("option","hide",{effect:"fadeOut",duration:100})},2600)}},overpass.handlers.onEmptyMap=function(fe,ge){const Be=B.getRawQuery(),Ue=/out[^;]+?count/.test(Be);if(fe=="no visible data")if(!Ue&&!settings.no_autorepair){const ze=`<p>${i18n.t("warning.incomplete.expl.1")}</p><p>${i18n.t("warning.incomplete.expl.2")}</p><p><input type="checkbox" name="hide_incomplete_data_warning"/>&nbsp;${i18n.t("warning.incomplete.not_again")}</p>`,Re=[{name:i18n.t("dialog.repair_query"),callback(){B.repairQuery("no visible data")}},{name:i18n.t("dialog.show_data"),callback(){var $e,We;(We=($e=$("input[name=hide_incomplete_data_warning]"))==null?void 0:$e[0])!=null&&We.checked&&(settings.no_autorepair=!0,settings.save()),B.switchTab("Data")}}];showDialog(i18n.t("warning.incomplete.title"),ze,Re)}else Ue&&B.switchTab("Data");fe=="only areas returned"&&B.switchTab("Data"),fe=="no coordinates returned"&&B.switchTab("Data"),ge=="unknown"&&B.switchTab("Data"),$(`<div id="map_blank" style="z-index:700; display:block; position:relative; top:50px; width:100%; text-align:center; background-color:#eee; opacity: 0.8;">${i18n.t("map.intentionally_blank")} <small>(${fe})</small></div>`).appendTo("#map")},overpass.handlers.onDataReceived=function(fe,ge,Be,Ue){if(fe>1e6){B.waiter.close();const ze=document.title;document.title=`â ${ze}`;const Re=[{name:i18n.t("dialog.abort"),callback(){document.title=ze,Be()}},{name:i18n.t("dialog.continue_anyway"),callback(){document.title=ze,Ue()}}],$e=`<p>${i18n.t("warning.huge_data.expl.1").replace("{{amount_txt}}",ge)}</p><p>${i18n.t("warning.huge_data.expl.2")}</p>`;showDialog(i18n.t("warning.huge_data.title"),$e,Re)}else Ue()},overpass.handlers.onAbort=function(){B.waiter.close()},overpass.handlers.onAjaxError=function(fe){B.waiter.close();const ge=document.title;document.title=`â ${ge}`;const Be=[{name:i18n.t("dialog.dismiss"),callback(){document.title=ge}}],Ue=`<p style="color:red;">${i18n.t("error.ajax.expl")}</p>${fe}`;showDialog(i18n.t("error.ajax.title"),Ue,Be),overpass.resultText&&B.dataViewer.setValue(overpass.resultText)},overpass.handlers.onQueryError=function(fe){B.waiter.close();const ge=document.title;document.title=`â ${ge}`;const Be=[{name:i18n.t("dialog.dismiss"),callback(){document.title=ge}}],Ue=`<div class="notification is-danger is-light">${i18n.t("error.query.expl")}<br>${fe}</div>`;showDialog(i18n.t("error.query.title"),Ue,Be)},overpass.handlers.onStyleError=function(fe){const ge=[{name:i18n.t("dialog.dismiss")}],Be=`<p style="color:red;">${i18n.t("error.mapcss.expl")}</p>${fe}`;showDialog(i18n.t("error.mapcss.title"),Be,ge)},overpass.handlers.onQueryErrorLine=function(fe){B.highlightError(fe)},overpass.handlers.onRawDataPresent=function(){B.dataViewer.setOption("mode",overpass.resultType),B.dataViewer.setValue(overpass.resultText)},overpass.handlers.onGeoJsonReady=function(){if(B.map.addLayer(overpass.osmLayer),typeof B.run_query_on_startup=="function"&&B.run_query_on_startup(),settings.show_data_stats){const fe=overpass.stats,ge=`<small>${i18n.t("data_stats.loaded")}</small>&nbsp;&ndash;&nbsp;${i18n.t("data_stats.nodes")}:&nbsp;${fe.data.nodes}, ${i18n.t("data_stats.ways")}:&nbsp;${fe.data.ways}, ${i18n.t("data_stats.relations")}:&nbsp;${fe.data.relations}${fe.data.areas>0?`, ${i18n.t("data_stats.areas")}:&nbsp;${fe.data.areas}`:""}<br/><small>${i18n.t("data_stats.displayed")}</small>&nbsp;&ndash;&nbsp;${i18n.t("data_stats.pois")}:&nbsp;${fe.geojson.pois}, ${i18n.t("data_stats.lines")}:&nbsp;${fe.geojson.lines}, ${i18n.t("data_stats.polygons")}:&nbsp;${fe.geojson.polys}</small>`;$(`<div id="data_stats" class="stats leaflet-control">${ge}</div>`).insertAfter("#map .leaflet-control-attribution");const Be=overpass.timestamp&&Date.now()-Date.parse(overpass.timestamp),Ue=overpass.timestampAreas&&Date.now()-Date.parse(overpass.timestampAreas);$("#data_stats").tooltip({items:"div",tooltipClass:"stats",content(){let ze="<div>";if(overpass.ajax_request_duration){let Re=overpass.ajax_request_duration;Re.toLocaleString&&(Re=Re.toLocaleString()),ze+=`${i18n.t("data_stats.request_duration")}: ${Re}ms<br>`}return overpass.timestamp&&(ze+=`${i18n.t("data_stats.lag")}: ${Math.floor(Be/1e3)}s <small>${i18n.t("data_stats.lag.expl")}</small>`),overpass.timestampAreas&&(ze+=`<br>${i18n.t("data_stats.lag_areas")}: ${Math.floor(Ue/1e3)}s <small>${i18n.t("data_stats.lag.expl")}</small>`),ze+="</div>",ze},hide:{effect:"fadeOut",duration:100},position:{my:"right bottom-5",at:"right top"}}),(Be>24*60*60*1e3||Ue>96*60*60*1e3)&&$("#data_stats").css("background-color","yellow")}},overpass.handlers.onPopupReady=function(fe){fe.openOn(B.map)},B.waiter.close(),B.run_query_on_startup===!0&&(B.update_map(),!M.has_coords&&M.has_query&&M.query.match(/\{\{(bbox|center)\}\}/)===null&&(B.run_query_on_startup=function(){B.run_query_on_startup=null;try{B.map.fitBounds(overpass.osmLayer.getBaseLayer().getBounds(),{maxZoom:18})}catch{}}))}onNominatimError(B,M){this.waiter.close();let P=this.getRawQuery();P=P.split(`
`),P.forEach((re,D)=>{re.indexOf(`{{geocode${M}:${B}}}`)!==-1&&this.highlightError(D+1)});const K=[{name:i18n.t("dialog.dismiss")}],Y=`<p style="color:red;">${i18n.t("error.nominatim.expl")}</p><p><i>${htmlentities(B)}</i></p>`;showDialog(i18n.t("error.nominatim.title"),Y,K)}getRawQuery(){return this.codeEditor.getValue()}async getQuery(){let B=this.getRawQuery();B=B.replace(/(<osm-script[^>]+bbox[^=]*=[^"'']*["'])({{bbox}})(["'])/,"$1{{__bbox__global_bbox_xml__ezs4K8__}}$3"),B=await this.queryParser.parse(B,shortcuts());let M="";this.queryParser.hasStatement("style")&&(M=this.queryParser.getStatement("style")),this.mapcss=M;let P=null;if(this.queryParser.hasStatement("data")){P=this.queryParser.getStatement("data"),P=P.split(",");const K=P[0].toLowerCase();P=P.slice(1);const Y={};for(const re of P){const D=re.split("=");Y[D[0]]=D[1]}P={mode:K,options:Y}}return this.data_source=P,B}setQuery(B){this.codeEditor.setValue(B)}getQueryLang(){return $.trim(this.getRawQuery().replace(/{{.*?}}/g,"")).match(/^</)?"xml":"OverpassQL"}repairQuery(B){const M=this.getRawQuery(),P=this.getQueryLang(),K=autorepair(M,P);B=="no visible data"?K.recurse():B=="xml+metadata"&&K.editors(),this.setQuery(K.getQuery())}highlightError(B){this.codeEditor.setLineClass(B-1,null,"errorline")}resetErrors(){for(let B=0;B<this.codeEditor.lineCount();B++)this.codeEditor.setLineClass(B,null,null)}switchTab(B){$(`.tabs li.${B}`).click()}loadExample(B){if(typeof settings.saves[B]<"u"){let M=settings.saves[B].overpass;/@name/.test(M)||(M=`// @name ${B}

${M}`),this.setQuery(M)}}removeExample(B){const M=[{name:i18n.t("dialog.delete"),callback:()=>{delete settings.saves[B],settings.save(),this.onLoadClick()}},{name:i18n.t("dialog.cancel")}],P=`<p><span class="fas fa-exclamation-triangle" style="float:left; margin:1px 7px 20px 0;"></span>${i18n.t("dialog.delete_query.expl")}: &quot;<i>${B}</i>&quot;?</p>`;showDialog(i18n.t("dialog.delete_query.title"),P,M)}removeExampleSync(B,M){const P=[{name:i18n.t("dialog.delete"),callback(){sync.delete(B.name,Y=>{if(Y)return console.error(Y);$(M).parent().remove()})}},{name:i18n.t("dialog.cancel")}],K=`<p><span class="fas fa-exclamation-triangle" style="float:left; margin:1px 7px 20px 0;"></span>${i18n.t("dialog.delete_query.expl-osm")}: &quot;<i>${B.name}</i>&quot;?</p>`;showDialog(i18n.t("dialog.delete_query.title"),K,P)}onLoadClick(){const B=this;$("#load-dialog .panel.saved_query .panel-block").remove(),$("#load-dialog .panel.example .panel-block").remove();let M=!1;for(const P in settings.saves){const K=settings.saves[P].type;K!="template"&&($('<a class="panel-block">').attr("href","#").text(P).on("click",()=>(B.loadExample(P),$("#load-dialog").removeClass("is-active"),!1)).append($('<button class="ml-auto">').attr("title",`${i18n.t("load.delete_query")}: ${P}`).addClass("delete").on("click",()=>(B.removeExample(P),!1))).appendTo(`#load-dialog .panel.${K}`),K=="saved_query"&&(M=!0))}if(M||$('<div class="panel-block">').text(i18n.t("load.no_saved_query")).appendTo("#load-dialog .panel.saved_query"),$("#load-dialog").addClass("is-active"),sync.authenticated())B.loadOsmQueries();else{const P=$("#load-dialog .panel.osm-queries");location.protocol==="https:"||location.hostname==="127.0.0.1"?(P.show(),P.find(".panel-block").remove(),$('<div class="panel-block">').append($(`<button class='button is-link is-outlined t' title='load.title'>${i18n.t("load.title")}</button>`).on("click",()=>{B.loadOsmQueries()})).appendTo(P)):P.hide()}}loadOsmQueries(){const B=this,M=$("#load-dialog .panel.osm-queries");M.show(),M.find(".panel-block").remove(),$('<div class="panel-block">').text(i18n.t("load.saved_queries-osm-loading")).appendTo(M),sync.load((P,K)=>{if(P)return M.find(".panel-block").remove(),$('<div class="panel-block">').text(i18n.t("load.saved_queries-osm-error")).appendTo(M),console.error(P);M.find(".panel-block").remove(),$("#logout").show(),$("#logout").appendTo($("#logout").parent()),K.forEach(Y=>{$('<a class="panel-block">').attr("href","#").text(Y.name).on("click",()=>(B.setQuery(lzw_decode(Base64.decode(Y.query))),$("#load-dialog").removeClass("is-active"),!1)).append($('<button class="ml-auto">').attr("title",`${i18n.t("load.delete_query")}: ${Y.name}`).addClass("delete").on("click",()=>(B.removeExampleSync(Y,this),!1))).appendTo(M)})})}onLoadClose(){$("#load-dialog").removeClass("is-active")}onSaveClick(){const B=[];for(const M in settings.saves)settings.saves[M].type!="template"&&B.push(M);make_combobox($("#save-dialog input[name=save]"),B),sync.enabled&&(location.protocol==="https:"||location.hostname==="127.0.0.1")&&$("#save-dialog button.osm").show(),$("#save-dialog").addClass("is-active")}onSaveSumbit(){const B=$("#save-dialog input[name=save]")[0].value;settings.saves[htmlentities(B)]={overpass:this.getRawQuery(),type:"saved_query"},settings.save(),$("#save-dialog").removeClass("is-active")}onSaveOsmSumbit(){const B=$("#save-dialog input[name=save]")[0].value,M=this.compose_share_link(this.getRawQuery(),!0).slice(3);sync.save({name:B,query:M},P=>{if(P)return console.error(P);$("#logout").show(),$("#logout").appendTo($("#logout").parent()),$("#save-dialog").removeClass("is-active")})}onSaveClose(){$("#save-dialog").removeClass("is-active")}onLogoutClick(){sync.logout(),$("#load-dialog .panel.osm-queries .panel-block").remove(),$("#logout").hide(),$("#logout").insertBefore($("#logout").prev())}onRunClick(){this.update_map()}onRerenderClick(){this.rerender_map()}compose_share_link(B,M,P,K){const Y=new URLSearchParams;return M?(Y.append("q",Base64.encode(lzw_encode(B))),P&&Y.append("c",re(this.map.getCenter().lat,this.map.getCenter().lng)+Base64.encodeNum(this.map.getZoom()))):(Y.append("Q",B),P&&Y.append("C",`${L.Util.formatNum(this.map.getCenter().lat)};${L.Util.formatNum(this.map.getCenter().lng)};${this.map.getZoom()}`)),K&&Y.append("R",""),`?${Y}`.replace(/\+/g,"%20");function re(D,ne){const Ae=Base64.encodeNum(Math.round((D+90)*1e5)+Math.round((ne+180)*1e5)*180*1e5);return"AAAAAAAA".substring(0,9-Ae.length)+Ae}}updateShareLink(){const B=`${location.protocol}//${location.host}${location.pathname}`,M=this.getRawQuery(),P=settings.share_compression=="auto"&&M.length>300||settings.share_compression=="on",K=$("div#share-dialog input[name=include_coords]")[0].checked,Y=$("div#share-dialog input[name=run_immediately]")[0].checked,re=this.compose_share_link(M,P,K,Y),D=B+re;let ne="";D.length>=2e3&&(ne=`<p class="warning">${i18n.t("warning.share.long")}</p>`),D.length>=4e3&&(ne=`<p class="warning severe">${i18n.t("warning.share.very_long")}</p>`),$("div#share-dialog #share_link_warning").html(ne),$("div#share-dialog #share_link_a")[0].href=D,$("div#share-dialog #share_link_textarea")[0].value=D}onShareClick(){$("div#share-dialog input[name=include_coords]")[0].checked=settings.share_include_pos,this.updateShareLink(),$("#share-dialog").addClass("is-active")}onShareClose(){$("#share-dialog").removeClass("is-active")}async onExportClick(){const B=await this.getQuery(),M=`${location.protocol}//${location.host}${location.pathname.match(/.*\//)[0]}`,P=this.data_source&&this.data_source.mode=="overpass"&&this.data_source.options.server?this.data_source.options.server:settings.server;let K=B;this.queryParser.hasStatement("style")&&(K+=`{{style: ${this.queryParser.getStatement("style")} }}`),this.queryParser.hasStatement("data")?K+=`{{data:${this.queryParser.getStatement("data")}}}`:settings.server!==configs.defaultServer&&(K+=`{{data:overpass,server=${settings.server}}}`),$("#export-dialog a#export-interactive-map")[0].href=`${M}map.html?${new URLSearchParams({Q:K})}`,$("#export-dialog a#export-overpass-api")[0].href=`${P}interpreter?data=${encodeURIComponent(B).replace(/!/g,"%21").replace(/\(/g,"%28").replace(/\)/g,"%29")}`;function Y(et,At){return`data:${At||"text/plain"};charset=${document.characterSet||document.charset};base64,${Base64.encode(et,!0)}`}function re(et,At,nt){const ft=document.createElement("a");ft.href=Y(et,At),ft.download=nt,ft.dispatchEvent(new MouseEvent("click"))}function D(et,At){return function(){return $("#export-clipboard-success").addClass("is-active"),copyData={"text/plain":et},document.execCommand("copy"),$("#export-clipboard-success .message").html(i18n.t("export.copy_to_clipboard_success-message")),$("#export-clipboard-success .export-copy_to_clipboard-content").html(At),!1}}$("#export-text .format").html(i18n.t("export.format_text")),$("#export-text .export").attr({download:"query.overpassql",target:"_blank",href:Y(B)}),$("#export-text .copy").attr("href","").click(D(B));const ne=this.getRawQuery();$("#export-text_raw .format").html(i18n.t("export.format_text_raw")),$("#export-text_raw .export").attr({download:"query-raw.overpassql",target:"_blank",href:Y(ne)}),$("#export-text_raw .copy").attr("href","").click(D(ne));let Ae=`{{OverpassTurboExample|loc=${L.Util.formatNum(this.map.getCenter().lat)};${L.Util.formatNum(this.map.getCenter().lng)};${this.map.getZoom()}|query=
`;Ae+=ne.replace(/{{/g,"mSAvmrw81O8NgWlX").replace(/{/g,"Z9P563g6zQYzjiLE").replace(/}}/g,"AtUhvGGxAlM1mP5i").replace(/}/g,"Yfxw6RTW5lewTqtg").replace(/mSAvmrw81O8NgWlX/g,"{{((}}").replace(/Z9P563g6zQYzjiLE/g,"{{(}}").replace(/AtUhvGGxAlM1mP5i/g,"{{))}}").replace(/Yfxw6RTW5lewTqtg/g,"{{)}}").replace(/\|/g,"{{!}}").replace(/{{!}}{{!}}/g,"{{!!}}"),Ae+=`
}}`,$("#export-text_wiki .format").html(i18n.t("export.format_text_wiki")),$("#export-text_wiki .export").attr({download:"query-wiki.mediawiki",target:"_blank",href:Y(Ae)}),$("#export-text_wiki .copy").attr("href","").click(D(Ae));let fe=B;fe=fe.replace(/\/\*[\S\s]*?\*\//g,""),fe=fe.replace(/\/\/.*/g,""),fe=fe.replace(/\n\s*/g,""),fe=fe.replace(new RegExp(shortcuts().bbox,"g"),"{south},{west},{north},{east}"),$("#export-text_umap .format").html(i18n.t("export.format_text_umap")),$("#export-text_umap .export").attr({download:"query-umap.overpassql",target:"_blank",href:Y(fe)}),$("#export-text_umap .copy").attr("href","").click(D(fe,`${i18n.t("export.section.query")} (${i18n.t("export.format_text_umap")})`));const ge=[{name:i18n.t("dialog.done")}];$("#export-dialog a#export-map-state").unbind("click").bind("click",()=>{const et=`<h4>${i18n.t("export.map_view.permalink")}</h4><p><a href="//www.openstreetmap.org/#map=${this.map.getZoom()}/${L.Util.formatNum(this.map.getCenter().lat)}/${L.Util.formatNum(this.map.getCenter().lng)}" target="_blank">${i18n.t("export.map_view.permalink_osm")}</a></p><h4>${i18n.t("export.map_view.center")}</h4><p>${L.Util.formatNum(this.map.getCenter().lat)}, ${L.Util.formatNum(this.map.getCenter().lng)} <small>(${i18n.t("export.map_view.center_expl")})</small></p><h4>${i18n.t("export.map_view.bounds")}</h4><p>${L.Util.formatNum(this.map.getBounds().getSouthWest().lat)}, ${L.Util.formatNum(this.map.getBounds().getSouthWest().lng)}, ${L.Util.formatNum(this.map.getBounds().getNorthEast().lat)}, ${L.Util.formatNum(this.map.getBounds().getNorthEast().lng)}<br /><small>(${i18n.t("export.map_view.bounds_expl")})</small></p>${this.map.bboxfilter.isEnabled()?`<h4>${i18n.t("export.map_view.bounds_selection")}</h4><p>${L.Util.formatNum(this.map.bboxfilter.getBounds().getSouthWest().lat)}, ${L.Util.formatNum(this.map.bboxfilter.getBounds().getSouthWest().lng)}, ${L.Util.formatNum(this.map.bboxfilter.getBounds().getNorthEast().lat)}, ${L.Util.formatNum(this.map.bboxfilter.getBounds().getNorthEast().lng)}<br /><small>(${i18n.t("export.map_view.bounds_expl")})</small></p>`:""}<h4>${i18n.t("export.map_view.zoom")}</h4><p>${this.map.getZoom()}</p>`;return showDialog(i18n.t("export.map_view.title"),et,ge),!1}),$("#export-dialog a#export-image").unbind("click").on("click",()=>(this.onExportImageClick(),$("#export-dialog").removeClass("is-active"),!1));function Be(et){let At;if(!et)At=i18n.t("export.geoJSON.no_data");else{console.log(new Date);const nt={type:"FeatureCollection",generator:configs.appname,copyright:overpass.copyright,timestamp:overpass.timestamp,features:et.features.map(ft=>({type:"Feature",properties:ft.properties,geometry:ft.geometry}))};nt.features.forEach(ft=>{const Tt=ft.properties;ft.id=`${Tt.type}/${Tt.id}`,ft.properties={"@id":ft.id};for(const qt in Tt.tags||{})ft.properties[qt.replace(/^@/,"@@")]=Tt.tags[qt];for(const qt in Tt.meta||{})ft.properties[`@${qt}`]=Tt.meta[qt];Tt.tainted&&(ft.properties["@tainted"]=Tt.tainted),Tt.geometry&&(ft.properties["@geometry"]=Tt.geometry),Tt.relations&&Tt.relations.length>0&&(ft.properties["@relations"]=Tt.relations)}),At=JSON.stringify(nt,void 0,2)}return At}$("#export-geoJSON .format").text("GeoJSON"),$("#export-geoJSON .export").attr("href","").unbind("click").on("click",()=>{const et=Be(overpass.geojson),At=$("#export-download-dialog");return overpass.geojson?re(et,"application/geo+json","export.geojson"):(At.addClass("is-active"),$(".message",At).text(et)),!1}),$("#export-geoJSON .copy").attr("href","").click(()=>{const et=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");if(et.addClass("is-active"),overpass.geojson){const At=Be(overpass.geojson);copyData={"text/plain":At,"application/geo+json":At},document.execCommand("copy"),$(".message",et).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",et).text("GeoJSON")}else $(".message",et).text(i18n.t("export.geoJSON.no_data"));return!1}),$("#export-dialog a#export-geoJSON-gist").unbind("click").on("click",()=>{const et=Be(overpass.geojson);return $.ajax("https://api.github.com/gists",{method:"POST",data:JSON.stringify({description:"data exported by overpass turbo",public:!0,files:{"overpass.geojson":{content:et}}})}).done(At=>{const nt=[{name:i18n.t("dialog.done")}],ft=`<p>${i18n.t("export.geoJSON_gist.gist")}&nbsp;<a href="${At.html_url}" target="_blank" class="external">${At.id}</a></p><p>${i18n.t("export.geoJSON_gist.geojsonio")}&nbsp;<a href="http://geojson.io/#id=gist:anonymous/${At.id}" target="_blank" class="external">${i18n.t("export.geoJSON_gist.geojsonio_link")}</a></p>`;showDialog(i18n.t("export.geoJSON_gist.title"),ft,nt)}).fail(At=>{alert(`an error occured during the creation of the overpass gist:
${JSON.stringify(At)}`)}),!1});function Ue(et){let At;return et?(At=togpx$1(et,{creator:configs.appname,metadata:{desc:"Filtered OSM data converted to GPX by overpass turbo",copyright:{"@author":overpass.copyright},time:overpass.timestamp},featureTitle(nt){if(nt.tags){if(nt.tags.name)return nt.tags.name;if(nt.tags.ref)return nt.tags.ref;if(nt.tags["addr:housenumber"]&&nt.tags["addr:street"])return`${nt.tags["addr:street"]} ${nt.tags["addr:housenumber"]}`}return`${nt.type}/${nt.id}`},featureLink(nt){return`http://osm.org/browse/${nt.type}/${nt.id}`}}),At[1]!=="?"&&(At=`<?xml version="1.0" encoding="UTF-8"?>
${At}`)):At=i18n.t("export.GPX.no_data"),At}$("#export-GPX .format").text("GPX"),$("#export-GPX .export").attr("href","").unbind("click").on("click",()=>{const et=overpass.geojson,At=Ue(et);if(et)re(At,"application/gpx+xml","export.gpx");else{const nt=$("#export-download-dialog");nt.addClass("is-active"),$(".message",nt).text(At)}return!1}),$("#export-GPX .copy").attr("href","").click(()=>{const et=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");if(et.addClass("is-active"),overpass.geojson){const At=Ue(overpass.geojson);copyData={"text/plain":At,"application/gpx+xml":At},document.execCommand("copy"),$(".message",et).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",et).text("GPX")}else $(".message",et).text(i18n.t("export.GPX.no_data"));return!1});function ze(et){return et=et&&JSON.parse(Be(et)),et?tokml$1(et,{documentName:"overpass-turbo.eu export",documentDescription:`Filtered OSM data converted to KML by overpass turbo.
Copyright: ${overpass.copyright}
Timestamp: ${overpass.timestamp}`,name:"name",description:"description"}):i18n.t("export.KML.no_data")}$("#export-KML .format").text("KML"),$("#export-KML .export").attr("href","").unbind("click").on("click",()=>{const et=overpass.geojson,At=ze(et);return et?re(At,"application/vnd.google-earth.kml+xml","export.kml"):($("#export-download-dialog").addClass("is-active"),$("#export-download-dialog .message").text(At)),!1}),$("#export-KML .copy").attr("href","").click(()=>{const et=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");if(et.addClass("is-active"),overpass.geojson){const At=ze(overpass.geojson);copyData={"text/plain":At,"application/vnd.google-earth.kml+xml":At},document.execCommand("copy"),$(".message",et).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",et).text("KML")}else $(".message",et).text(i18n.t("export.kml.no_data"));return!1});function Re(et){let At,nt;if(!et)At=i18n.t("export.raw.no_data");else{const ft=overpass.data;if(ft instanceof XMLDocument)At=new XMLSerializer().serializeToString(ft),nt=At.match(/<osm/)?"osm":"xml";else if(ft instanceof Object)At=JSON.stringify(ft,void 0,2),nt="json";else try{At=ft.toString()}catch{At="Error while exporting the data"}}return{raw_str:At,raw_type:nt}}$("#export-raw .format").text(i18n.t("export.raw_data")),$("#export-raw .export").attr("href","").unbind("click").on("click",()=>{const et=overpass.geojson,At=Re(et),nt=At.raw_str,ft=At.raw_type;if(et)ft=="osm"||ft=="xml"?re(nt,"application/xml",`export.${ft}`):ft=="json"?re(nt,"application/json","export.json"):re(nt,"application/octet-stream","export.dat");else{const Tt=$("#export-download-dialog");Tt.addClass("is-active"),$(".message",Tt).text(nt)}return!1}),$("#export-raw .copy").attr("href","").click(()=>{const et=overpass.geojson?$("#export-clipboard-success"):$("#export-download-dialog");et.addClass("is-active");const At=overpass.geojson;if(At){const nt=Re(At),ft=nt.raw_str,Tt=nt.raw_type;copyData={"text/plain":ft},Tt=="osm"||Tt=="xml"?copyData["application/xml"]=ft:Tt=="json"?copyData["application/json"]=ft:copyData["application/octet-stream"]=ft,document.execCommand("copy"),$(".message",et).html(i18n.t("export.copy_to_clipboard_success-message")),$(".export-copy_to_clipboard-content",et).html(i18n.t("export.raw_data"))}else $(".message",et).text(i18n.t("export.raw.no_data"));return!1}),$("#export-dialog a#export-convert-xml")[0].href=`${P}convert?${new URLSearchParams({data:B,target:"xml"})}`,$("#export-dialog a#export-convert-ql")[0].href=`${P}convert?${new URLSearchParams({data:B,target:"mapql"})}`,$("#export-dialog a#export-convert-compact")[0].href=`${P}convert?${new URLSearchParams({data:B,target:"compact"})}`;const $e=autorepair.detect.editors(this.getRawQuery(),this.getQueryLang()),We=$("#export-dialog a#export-editors-level0");We.unbind("click");function ut(et){return`https://level0.osmz.ru/?${new URLSearchParams({url:`${P}interpreter?${new URLSearchParams({data:et})}`})}`}$e?We[0].href=ut(B):(We[0].href="",We.bind("click",()=>{const et=[{name:i18n.t("dialog.repair_query"),callback:async()=>{this.repairQuery("xml+metadata");const nt=await this.getQuery();We.unbind("click"),We[0].href=ut(nt),window.open(We[0].href,"_blank")}},{name:i18n.t("dialog.continue_anyway"),callback:()=>{We.unbind("click"),We[0].href=ut(B),window.open(We[0].href,"_blank")}}],At=`<p>${i18n.t("warning.incomplete.remote.expl.1")}</p><p>${i18n.t("warning.incomplete.remote.expl.2")}</p>`;return showDialog(i18n.t("warning.incomplete.title"),At,et),!1})),$("#export-dialog a#export-editors-josm").unbind("click").on("click",()=>{const et=$("#export-dialog");function At(ft){const Tt="http://127.0.0.1:8111/";$.getJSON(`${Tt}version`).done(qt=>{if(qt.protocolversion.major==1)$.get(`${Tt}import`,{url:`${P.replace(/^\/\//,`${location.protocol}//`)}interpreter?data=${encodeURIComponent(ft)}`}).fail(()=>{alert("Error: Unexpected JOSM remote control error.")}).done(()=>{console.log("successfully invoked JOSM remote control")});else{const Vt=[{name:i18n.t("dialog.dismiss")}],vt=`<p>${i18n.t("error.remote.incompat")}: ${qt.protocolversion.major}.${qt.protocolversion.minor} :(</p>`;showDialog(i18n.t("error.remote.title"),vt,Vt)}}).fail(()=>{const qt=[{name:i18n.t("dialog.dismiss")}],Vt=`<p>${i18n.t("error.remote.not_found")}</p>`;showDialog(i18n.t("error.remote.title"),Vt,qt)})}if(autorepair.detect.editors(this.getRawQuery(),this.getQueryLang()))return At(B),!1;{const ft=[{name:i18n.t("dialog.repair_query"),callback:async()=>{this.repairQuery("xml+metadata");const qt=await this.getQuery();At(qt),et.removeClass("is-active")}},{name:i18n.t("dialog.continue_anyway"),callback:()=>{At(B),et.removeClass("is-active")}}],Tt=`<p>${i18n.t("warning.incomplete.remote.expl.1")}</p><p>${i18n.t("warning.incomplete.remote.expl.2")}</p>`;return showDialog(i18n.t("warning.incomplete.title"),Tt,ft),!1}}),$("#export-dialog").addClass("is-active")}onExportDownloadClose(){$("#export-download-dialog").removeClass("is-active")}onExportClipboardClose(){$("#export-clipboard-success").removeClass("is-active")}onExportClose(){$("#export-dialog").removeClass("is-active")}async onExportImageClick(){this.waiter.open(i18n.t("waiter.export_as_image")),this.waiter.addInfo("prepare map"),$("#map .leaflet-control-container .leaflet-top").hide(),$("#data_stats").hide(),settings.export_image_attribution&&this.map.addControl(this.attribControl),settings.export_image_scale||this.map.removeControl(this.scaleControl),this.waiter.addInfo("rendering map tiles"),$("#map .leaflet-overlay-pane").hide();const B=await html2canvas(document.getElementById("map"),{useCORS:!0,allowTaint:!1,proxy:void 0});$("#map .leaflet-overlay-pane").show(),settings.export_image_attribution&&this.map.removeControl(this.attribControl),settings.export_image_scale||this.map.addControl(this.scaleControl),settings.show_data_stats&&$("#data_stats").show(),$("#map .leaflet-control-container .leaflet-top").show(),this.waiter.addInfo("rendering map data"),B.id="render_canvas";const M=B.getContext("2d"),P=$("#map .leaflet-overlay-pane svg").height(),K=$("#map .leaflet-overlay-pane svg").width(),Y=$("#map .leaflet-map-pane")[0].style.cssText.match(/.*?(-?\d+)px.*?(-?\d+)px.*/),re=+Y[1],D=+Y[2],ne=$("#map .leaflet-overlay-pane").html();ne.length>0&&(await Canvg.from(M,ne,{ignoreAnimation:!0,ignoreClear:!0,ignoreDimensions:!0,ignoreMouse:!0,offsetX:re,offsetY:D,scaleHeight:P,scaleWidth:K})).render(),this.waiter.addInfo("converting to png image");const Ae=B.toDataURL("image/png");let fe="";settings.export_image_attribution||(fe='<p style="font-size:smaller; color:orange;">Make sure to include proper attributions when distributing this image!</p>');const ge=[{name:i18n.t("dialog.done")}];this.waiter.close();const Be=`<p><img src="${Ae}" alt="${i18n.t("export.image.alt")}" width="480px"/><br><!--<a href="${Ae}" download="export.png" target="_blank">${i18n.t("export.image.download")}</a>--></p>${fe}`;showDialog(i18n.t("export.image.title"),Be,ge);const Ue=document.createElement("a");Ue.href=Ae,Ue.download="export.png",Ue.dispatchEvent(new MouseEvent("click"))}onFfsClick(){$("#ffs-dialog #ffs-dialog-parse-error").hide(),$("#ffs-dialog #ffs-dialog-typo").hide(),$("#ffs-dialog .loading").hide(),$("#ffs-dialog").addClass("is-active"),$("#ffs-dialog input[type=search]").removeClass("is-danger").unbind("keypress").bind("keypress",B=>{B.key==="Enter"&&(this.onFfsRun(!0),B.preventDefault())}).first().focus()}onFfsClose(){$("#ffs-dialog").removeClass("is-active")}onFfsBuild(){this.onFfsRun(!1)}onFfsRun(B){$("#ffs-dialog input[type=search]").removeClass("is-danger"),$("#ffs-dialog #ffs-dialog-parse-error").hide(),$("#ffs-dialog #ffs-dialog-typo").hide(),$("#ffs-dialog .loading").show(),this.update_ffs_query(void 0,(M,P)=>{if($("#ffs-dialog .loading").hide(),!M)$("#ffs-dialog").removeClass("is-active"),B!==!1&&this.onRunClick();else if(_$1.isArray(P)){$("#ffs-dialog #ffs-dialog-parse-error").hide(),$("#ffs-dialog #ffs-dialog-typo").show(),$("#ffs-dialog input[type=search]").addClass("is-danger");const K=P.join(""),Y=P.map((re,D)=>D%2===1?`<b>${re}</b>`:re).join("");$("#ffs-dialog #ffs-dialog-typo-correction").html(Y),$("#ffs-dialog #ffs-dialog-typo-correction").unbind("click").bind("click",function(re){$("#ffs-dialog input[type=search]").val(K),$(this).parent().hide(),re.preventDefault()})}else $("#ffs-dialog #ffs-dialog-typo").hide(),$("#ffs-dialog #ffs-dialog-parse-error").show(),$("#ffs-dialog input[type=search]").addClass("is-danger")})}onSettingsClick(){$("#settings-dialog input[name=ui_language]")[0].value=settings.ui_language;const B=i18n.getSupportedLanguagesDescriptions();make_combobox($("#settings-dialog input[name=ui_language]"),["auto"].concat(i18n.getSupportedLanguages()).map(M=>({value:M,label:M=="auto"?"auto":`${M} - ${B[M]}`}))),$("#settings-dialog input[name=server]")[0].value=settings.server,make_combobox($("#settings-dialog input[name=server]"),configs.suggestedServers.concat(settings.customServers),settings.customServers,M=>{settings.customServers.splice(settings.customServers.indexOf(M),1),settings.save()}),$("#settings-dialog input[name=no_autorepair]")[0].checked=settings.no_autorepair,$("#settings-dialog input[name=use_rich_editor]")[0].checked=settings.use_rich_editor,$("#settings-dialog input[name=editor_width]")[0].value=settings.editor_width,$("#settings-dialog input[name=share_include_pos]")[0].checked=settings.share_include_pos,$("#settings-dialog input[name=share_compression]")[0].value=settings.share_compression,make_combobox($("#settings-dialog input[name=share_compression]"),["auto","on","off"]),$("#settings-dialog input[name=tile_server]")[0].value=settings.tile_server,make_combobox($("#settings-dialog input[name=tile_server]"),configs.suggestedTiles.concat(settings.customTiles),settings.customTiles,M=>{settings.customTiles.splice(settings.customTiles.indexOf(M),1),settings.save()}),$("#settings-dialog input[name=background_opacity]")[0].value=settings.background_opacity,$("#settings-dialog input[name=enable_crosshairs]")[0].checked=settings.enable_crosshairs,$("#settings-dialog input[name=disable_poiomatic]")[0].checked=settings.disable_poiomatic,$("#settings-dialog input[name=show_data_stats]")[0].checked=settings.show_data_stats,$("#settings-dialog input[name=export_image_scale]")[0].checked=settings.export_image_scale,$("#settings-dialog input[name=export_image_attribution]")[0].checked=settings.export_image_attribution,$("#settings-dialog").addClass("is-active")}onSettingsSave(){const B=$("#settings-dialog input[name=ui_language]")[0].value;settings.ui_language!=B&&i18n.translate(B),settings.ui_language=B,settings.server=$("#settings-dialog input[name=server]")[0].value,configs.suggestedServers.indexOf(settings.server)===-1&&settings.customServers.indexOf(settings.server)===-1&&settings.customServers.push(settings.server),settings.no_autorepair=$("#settings-dialog input[name=no_autorepair]")[0].checked,settings.use_rich_editor=$("#settings-dialog input[name=use_rich_editor]")[0].checked;const M=settings.editor_width;settings.editor_width=$("#settings-dialog input[name=editor_width]")[0].value,M!=settings.editor_width&&($("#editor").css("width",settings.editor_width),$("#dataviewer").css("left",settings.editor_width)),settings.share_include_pos=$("#settings-dialog input[name=share_include_pos]")[0].checked,settings.share_compression=$("#settings-dialog input[name=share_compression]")[0].value;const P=settings.tile_server;settings.tile_server=$("#settings-dialog input[name=tile_server]")[0].value,configs.suggestedTiles.indexOf(settings.tile_server)===-1&&settings.customTiles.indexOf(settings.tile_server)===-1&&settings.customTiles.push(settings.tile_server),P!=settings.tile_server&&this.map.tile_layer.setUrl(settings.tile_server);const K=settings.background_opacity;settings.background_opacity=+$("#settings-dialog input[name=background_opacity]")[0].value,settings.background_opacity!=K&&(settings.background_opacity==1?this.map.removeLayer(this.map.inv_opacity_layer):this.map.inv_opacity_layer.setOpacity(1-settings.background_opacity).addTo(this.map)),settings.enable_crosshairs=$("#settings-dialog input[name=enable_crosshairs]")[0].checked,settings.disable_poiomatic=$("#settings-dialog input[name=disable_poiomatic]")[0].checked,settings.show_data_stats=$("#settings-dialog input[name=show_data_stats]")[0].checked,$(".crosshairs").toggle(settings.enable_crosshairs),settings.export_image_scale=$("#settings-dialog input[name=export_image_scale]")[0].checked,settings.export_image_attribution=$("#settings-dialog input[name=export_image_attribution]")[0].checked,settings.save(),$("#settings-dialog").removeClass("is-active")}onSettingsClose(){$("#settings-dialog").removeClass("is-active")}onSettingsReset(){window.confirm("Reset?")&&(settings.reset(),location.reload())}onHelpClick(){$("#help-dialog").addClass("is-active")}onHelpClose(){$("#help-dialog").removeClass("is-active")}onKeyPress(B){(B.key==="F9"||B.key==="Enter"&&(B.ctrlKey||B.metaKey))&&(this.onRunClick(),B.preventDefault()),B.key=="e"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onExportClick(),B.preventDefault()),B.key=="s"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onSaveClick(),B.preventDefault()),B.key=="o"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onLoadClick(),B.preventDefault()),B.key=="h"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey&&(this.onHelpClick(),B.preventDefault()),(B.key=="i"&&(B.ctrlKey||B.metaKey)&&!B.shiftKey&&!B.altKey||B.key=="f"&&(B.ctrlKey||B.metaKey)&&B.shiftKey&&!B.altKey)&&(this.onFfsClick(),B.preventDefault()),B.key==="Escape"&&$(".modal").removeClass("is-active")}async update_map(){this.waiter.open(i18n.t("waiter.processing_query")),this.waiter.addInfo("resetting map"),$("#data_stats").remove(),this.resetErrors(),this.dataViewer.setValue(""),typeof overpass.osmLayer<"u"&&this.map.removeLayer(overpass.osmLayer),$("#map_blank").remove(),this.waiter.addInfo("building query");const B=await this.getQuery();if(typeof history.pushState=="function"){const K=this.compose_share_link(this.getRawQuery(),!0);K.length>2e3?history.pushState({},"",`?#${K.slice(1)}`):history.pushState({},"",K)}const M=this.getQueryLang(),P=this.data_source&&this.data_source.mode=="overpass"&&this.data_source.options.server?this.data_source.options.server:settings.server;overpass.run_query(B,M,void 0,void 0,P,this.mapcss)}async rerender_map(){$("#data_stats").remove(),typeof overpass.osmLayer<"u"&&this.map.removeLayer(overpass.osmLayer),await this.getQuery(),overpass.rerender(this.mapcss)}update_ffs_query(B,M){const P=B||$("#ffs-dialog input[type=search]").val(),K=$("#ffs-dialog input[name='ffs.comments']")[0].checked;ffs_construct_query(P,K,(Y,re)=>{Y?ffs_repair_search(P,D=>{if(D)M("repairable query",D);else{if(B)return M(!0);this.update_ffs_query(`"${P}"`,M)}}):(this.setQuery(re),M(null))})}}const ide=new IDE;$(document).ready(()=>ide.init());$(document).ready(initClickHandler);function initClickHandler(){$("*[data-ide-handler]").each(function(){const g=$(this).attr("data-ide-handler").split(/:/),B=g[0],M=g[1],P=ide[M].bind(ide);$(this).on(B,P)})}
